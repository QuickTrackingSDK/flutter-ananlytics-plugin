/*! 2022-11-23 15:18:23 */
!function(e) {
    function t(a) {
        if (n[a]) return n[a].exports;
        var o = n[a] = {
            exports: {},
            id: a,
            loaded: !1
        };
        return e[a].call(o.exports, o, o.exports, t), o.loaded = !0, o.exports;
    }
    var n = {};
    return t.m = e, t.c = n, t.p = "", t(0);
}([ function(e, t, n) {
    e.exports = n(1);
}, function(e, t, n) {
    "use strict";
    n(2).initGlobal(window), function() {
        var e = n(4);
        n(145)(e);
    }();
}, function(e, t, n) {
    "use strict";
    var a, o = n(3), r = o.APLUS, i = o.APLUS_QUEUE, s = o.GOLDLOG, u = o.GOLDLOG_QUEUE, c = !1;
    try {
        window && (a = window, c = !0);
    } catch (e) {
        a = {}, c = !1;
    }
    t.getContext = function() {
        return a;
    }, t.isWeb = function() {
        return window;
    }, t.initGlobal = function(e) {
        a = e ? e : {
            v: 1,
            aplus: {},
            aplus_queue: []
        };
        var t, n;
        if (c) try {
            t = a.aplus || a.goldlog || (a.aplus = {});
            var o = a.goldlog_queue || (a.goldlog_queue = []);
            n = a.aplus_queue || (a.aplus_queue = []), n = o.concat(n);
        } catch (e) {} else t = a.aplus, n = a.aplus_queue;
        return a.aplus = a.goldlog = t, a.aplus_queue = a.goldlog_queue = n, a;
    };
    var l = function(e) {
        if (e === r || e === s) {
            var t = a[r] || a[s];
            return t || (t = a[r] = a[s] = {}), t;
        }
        var n = u, o = i;
        if (e === o || e === n) {
            var c = a[o] || a[n];
            return c || (c = a[o] = a[n] = []), c;
        }
    };
    t.getGlobalValue = l, t.setGlobalValue = function(e, t) {
        a[e] = t;
    };
    var p = function(e) {
        var t;
        try {
            var n = l(r);
            t = n[e];
        } catch (e) {
            t = "";
        } finally {
            return t;
        }
    };
    t.getGoldlogVal = p;
    var f = function(e, t) {
        var n = !1;
        try {
            var a = l(r);
            e && (a[e] = t, n = !0);
        } catch (e) {
            n = !1;
        } finally {
            return n;
        }
    };
    t.setGoldlogVal = f, t.getClientInfo = function() {
        return p("_aplus_client") || {};
    };
}, function(e, t) {
    var n = "aplus", a = "goldlog", o = n + "_queue", r = a + "_queue", i = "mw_change", s = "MetaInfo", u = "append" + s, c = "set" + s, l = "http", p = "_pubsub", f = "other", g = "2101", d = "2201", _ = "2202", h = "19999", m = "1023", v = "1010", y = 3e4, b = 18e5, w = "ekvs", A = 1e4, E = 1, S = 1, T = 3e3, P = "$$_page_start", I = "$$_page_end", x = "$$_app_start", C = "$$_app_end", M = "aplus_user_profile", k = "imprint", O = "aplus-idtype", N = "aplus-jsbridge-only", R = "aplus-page-config", L = "aplus-skip-apv-rules", U = "aplus-rhost-v", D = "aplus-rhost-g", j = "autoGetOpenid";
    e.exports = {
        PAGE_ENTER: "PAGE_ENTER",
        CURRENT_PAGE_CONFIG: "CURRENT_PAGE_CONFIG",
        _ANONY_ID: "_anony_id",
        _DEV_ID: "_dev_id",
        _USER_ID: "_user_id",
        DEFAULT_CODE: f,
        OTHER: h,
        EVENT_MAP: {
            "2101": "click",
            "2201": "exposure",
            "2202": "exposure",
            "19999": f,
            "1023": "app_show",
            "1010": "app_hide_or_unload"
        },
        EVENT_ID_MAP: {
            EXP: d,
            IMPEXP: _,
            CLK: g,
            OTHER: h,
            SHOW: m,
            H_OR_U: v
        },
        APLUS: n,
        GOLDLOG: a,
        UNSUBSCRIBE: n + "." + n + p + ".unsubscribe",
        SUBSCRIBE: n + "." + n + p + ".subscribe",
        PUBLISH: n + "." + n + p + ".publish",
        CACHE_PUBS: n + "." + n + p + ".cachePubs",
        APLUS_UNIVERSAL: n + "_universal",
        APLUS_QUEUE: o,
        GOLDLOG_QUEUE: r,
        COMPLETE: "complete",
        PV_CODE: "2001",
        EXP_CODE: d,
        CLK_CODE: g,
        OTHER_CODE: h,
        CLK: "CLK",
        EXP: "EXP",
        SPM_CNT: "spm-cnt",
        SPM_URL: "spm-url",
        SPM_PRE: "spm-pre",
        MW_CHANGE_PV: i + "_pv",
        MW_CHANGE_HJLJ: i + "_hjlj",
        HTTP: l + ":",
        HTTPS: "https:",
        APPEND_META_INFO: u,
        SET_META_INFO: c,
        APLUS_APPEND_META_INFO: n + "." + u,
        APLUS_SET_META_INFO: n + "." + c,
        PVID: "pvid",
        APLUS_LOG_PIPE: "aplus-log-pipe",
        openAPIs: [ "send", "enter", "sendPV", "record", "combineRecord", "recordUdata", "requestVTConfig", "requestRemoteConfig", "setPageSPM", "setMetaInfo", "appendMetaInfo", "updatePageProperties", "updateNextPageProperties", "updatePageUtparam", "updateNextPageUtparam", "pageAppear", "pageDisappear", "skipPage", "updateSessionProperties", "getPageSpmUrl", "getPageSpmPre", "setPageName", "getElementSPM", "recordAppLink" ],
        SESSION_INTERVAL: y,
        SESSION_PAUSE_TIME: "session_pause_time",
        IMPRINT: "imprint",
        CURRENT_SESSION: "current_session",
        MAX_EVENTID_LENGTH: 128,
        MAX_PROPERTY_KEY_LENGTH: 256,
        MAX_PROPERTY_KEYS_COUNT: 100,
        FAILED_REQUESTS: "failed_requests",
        REQUESTS: "requests",
        SHARES: "shares",
        APLUS_SSRC: "_aplus_ssrc",
        EKVS: w,
        EVENT_MAX_COUNT: A,
        MEMORY_MAX_COUNT: E,
        MAX_QUEUE_COUNT: S,
        EVENT_SEND_DEFAULT_INTERVAL: T,
        PAGE_START: P,
        PAGE_END: I,
        APP_START: x,
        APP_END: C,
        USER_PROFILE_KEY: M,
        SHARE_CACHE_INTERVAL: b,
        IMPRINT: k,
        ID_TYPE: O,
        GLOBAL_PROPERTY: "globalproperty",
        JSBRIDGE_ONLY: N,
        PAGE_CONFIG: R,
        APLUS_SKIP_APV_RULES: L,
        APLUS_PV_DOMAIN: U,
        APLUS_EKV_DOMAIN: D,
        APLUS_IMPRINT_VERSION: "APLUS_IMPRINT_VERSION",
        APLUS_REMOTE_CONFIG: "APLUS_REMOTE_CONFIG",
        RANK: "ekv_rank",
        WEB_EVENT_SUFFIX: "/web_logs",
        WEB_PC_PV_SUFFIX: "v.gif",
        WEB_WAP_PV_SUFFIX: "m.gif",
        PAGE_LEAVE: "$$_page_leave",
        APLUS_AUTOTRACK_ENABLED: "aplus-autotrack-enabled",
        APLUS_AUTOTRACK_ENABLED_REMOTE: "aplus-autotrack-enabled-remote",
        APLUS_AUTOTRACK_CONFIG: "aplus-autotrack-config",
        APLUS_AUTOTRACK_CONFIG_REMOTE: "aplus-autotrack-config-remote",
        APLUS_EVENT_LIMITRATES: "aplus-event-limitrates",
        APLUS_DISABLE_AUTOEVENT: "aplus-disable-autoevent",
        APLUS_DISABLE_AUTOEVENT_REMOTE: "aplus-disable-autoevent",
        APLUS_DISABLE_AUTOPV: "aplus-disable-apv",
        APLUS_DISABLE_AUTOPV_REMOTE: "aplus-disable-apv-remote",
        APLUS_DEVICE_ENABLE: "aplus-device-enable",
        PERFORMANCE_WARING: "$$_perf_warning",
        START_ID: "START_ID",
        AUTO_GET_OPENID: j,
        APLUS_BRIDGE_NAME: "aplus-bridge-name",
        APLUS_MINI_REQUEST_TIMEOUT: "aplus-request-timeout",
        APLUS_LATEAST_UTM: "APLUS_LATEAST_UTM"
    };
}, function(e, t, n) {
    e.exports = {
        metaInfo: {
            "aplus-ifr-pv": "1",
            "aplus-rhost-v": "",
            "aplus-rhost-g": "",
            "aplus-channel": "",
            appId: "",
            sdkId: "aplus_cloud_um",
            "aplus-cpvdata": {},
            "aplus-exdata": {},
            "aplus-globaldata": {},
            "aplus-mmstat-timeout": "10000",
            "aplus-toUT": "",
            "aplus-disable-autoevent": !1,
            "aplus-disable-apv": !1,
            "aplus-autotrack-enabled": !1,
            "aplus-device-enable": !0
        },
        globalConfig: {
            isDecodeUrl: !0,
            isAli: !1,
            isUM: !0,
            APLUS_QUEUE: "aplus_queue",
            ETAG_STORAGE_KEY: "__ETAG__CNA__ID__",
            script_name: "aplus.js",
            lver: "1.9.51",
            NAME_STORAGE_KEYS: {
                REFERRER: "wm_referrer",
                REFERRER_PV_ID: "refer_pv_id",
                LOST_PV_PAGE_DURATION: "lost_pv_page_duration",
                LOST_PV_PAGE_SPMAB: "lost_pv_page_spmab",
                LOST_PV_PAGE: "lost_pv_page",
                LOST_PV_PAGE_MSG: "lost_pv_page_msg"
            }
        },
        plugins: [ {
            name: "aplus_session_manager",
            path: n(5)
        }, {
            name: "aplus_track_debug",
            path: n(12)
        }, {
            name: "aplus_body_ready",
            path: n(16)
        }, {
            name: "pubsub",
            path: n(17)
        }, {
            name: "aplus_client",
            path: n(22)
        }, {
            name: "aplus_meta_inject",
            path: n(24)
        }, {
            name: "aplus_ac",
            path: n(44)
        }, {
            name: "aplus_ae",
            path: n(57)
        }, {
            name: "name_storage",
            path: n(65)
        }, {
            name: "record_lost_pv",
            path: n(66),
            config: {
                lostPvRecordRatio: .01
            }
        }, {
            name: "aplus_monitor",
            path: n(68),
            config: {
                obsoleteInterRecordRatio: "0.01",
                jsErrorRecordRatio: "0.01",
                browserSupportRatio: "0.01"
            }
        }, {
            name: "aplus_web_http_um",
            path: n(70)
        }, {
            name: "aplus_log_inject",
            path: n(86),
            deps: [ "aplus_meta_inject" ],
            config: {
                plugins: {
                    pv: [ {
                        name: "remote_config",
                        path: n(87)
                    }, {
                        name: "when_to_sendpv",
                        path: n(93),
                        config: {
                            aplusWaiting: ""
                        }
                    }, {
                        name: "where_to_send",
                        path: n(94)
                    }, {
                        name: "what_to_send",
                        path: n(96),
                        config: {
                            pvdataToUt: {}
                        }
                    }, {
                        name: "what_to_sendpv_userdata",
                        path: n(99),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "what_to_sendpv_userdata_web",
                        path: n(101),
                        deps: [ "what_to_send", "what_to_sendpv_userdata" ]
                    }, {
                        name: "what_to_sendpv_ut2",
                        path: n(104),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "what_to_sendpv_um2native",
                        path: n(105),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "can_to_sendpv",
                        path: n(106),
                        config: {
                            flag: "NO"
                        }
                    }, {
                        name: "after_pv",
                        path: n(109)
                    } ],
                    hjlj: [ {
                        name: "remote_config",
                        path: n(87)
                    }, {
                        name: "where_to_send",
                        path: n(94),
                        deps: []
                    }, {
                        name: "what_to_send",
                        path: n(96),
                        deps: []
                    }, {
                        name: "what_to_hjlj_userdata",
                        path: n(110),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "what_to_hjlj_userdata_web",
                        path: n(111),
                        deps: [ "what_to_send", "what_to_hjlj_userdata" ]
                    }, {
                        name: "what_to_hjlj_ut2",
                        path: n(112),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "what_to_hjlj_um2native",
                        path: n(113),
                        deps: [ "what_to_send" ]
                    } ]
                }
            }
        }, {
            name: "aplus_spm_inject",
            path: n(114)
        }, {
            name: "aplus_api",
            path: n(117)
        }, {
            name: "aplus_fingerpint",
            path: n(127)
        }, {
            name: "meta_queue",
            path: n(129)
        }, {
            name: "aplusUmBridge",
            path: n(131)
        }, {
            name: "aplus_queue",
            path: n(132)
        }, {
            name: "hot_loader",
            path: n(133),
            config: {
                urlRules: [ {
                    rule: "aplus_webvt_messager",
                    cdnPath: [ "https://d.alicdn.com/alilog/mlog/aplus_webvt_messager.js" ]
                } ]
            }
        }, {
            name: "aplus_apv",
            path: n(134),
            deps: [ "aplus_log_inject", "aplus_api" ]
        }, {
            name: "aplus_autotrack",
            path: n(136)
        }, {
            name: "aplus_heatmap",
            path: n(141),
            deps: [ "aplus_log_inject", "aplus_api" ]
        }, {
            name: "aplus_pageleave",
            path: n(143),
            deps: [ "aplus_log_inject", "aplus_api" ]
        } ]
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(6)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(3), o = n(7);
    e.exports = function() {
        try {
            var e = o.getStartId();
            window.sessionStorage.setItem(a.START_ID, e);
        } catch (e) {}
    };
}, function(e, t, n) {
    function a(e) {
        for (var t = "", n = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" ], a = 0; a < Number(e); a++) {
            var o = Math.round(Math.random() * (n.length - 1));
            t += n[o];
        }
        return t;
    }
    t.getRandomStr = a, t.startsWith = function(e, t) {
        return !(!e || !t || 0 === t.length || t.length > e.length) && e.substr(0, t.length) === t;
    }, t.assign = function(e) {
        if (void 0 === e || null === e) throw new TypeError("Cannot convert undefined or null to object");
        for (var t = Object(e), n = 1; n < arguments.length; n++) {
            var a = arguments[n];
            if (a) for (var o in a) Object.prototype.hasOwnProperty.call(a, o) && (t[o] = a[o]);
        }
        return t;
    }, t.checkEvent = function(e, t) {
        var a = n(3), o = n(8), r = n(9);
        if (!e || "string" != typeof e) return o().w("event logkey is invalid, id =", e || "'' event properties = ", r.stringfy(t.cusp)), 
        !1;
        var i = [ "id", "du" ], s = {};
        if (i.forEach(function(e) {
            s[e] = 1;
        }), s[e]) return o().e("eventId has conflict with reservewords: " + i.join(",")), 
        !1;
        if (e.length > a.MAX_EVENTID_LENGTH) return o().e("The maximum length of event id shall not exceed " + a.MAX_EVENTID_LENGTH), 
        !1;
        if (t && ("object" != typeof t || Array.isArray(t)) && "string" != typeof t) return o().e("please check trackEvent properties. properties should be string or object(not include Array)"), 
        !1;
        if ("object" == typeof t) {
            var u = 0;
            for (var c in t) if ({}.hasOwnProperty.call(t, c)) {
                if (c.length > a.MAX_PROPERTY_KEY_LENGTH) return o().e("The maximum length of property key shall not exceed " + a.MAX_PROPERTY_KEY_LENGTH), 
                !1;
                if (u >= a.MAX_PROPERTY_KEYS_COUNT) return o().e("The maximum count of properties shall not exceed " + a.MAX_PROPERTY_KEYS_COUNT), 
                !1;
                if (s[c]) return o().e("property key has conflict with reserveWords: " + i.join(",")), 
                !1;
                u += 1;
            }
        }
        return !0;
    };
    var o = n(10);
    t.deleteInfo = function(e, t) {
        return o(t, function(t) {
            delete e[t];
        }), e;
    }, t.checkEmptyObj = function(e) {
        return "object" != typeof e || 0 === Object.keys(e).length;
    }, t.getStartId = function() {
        return a(10) + Date.now() + a(9);
    }, t.DataType = {
        HALF_SESSION: "half_session",
        CLOSE_SESSION: "close_session",
        EKV: "ekv",
        ENTER_PAGE: "enter_page",
        LEAVE_PAGE: "leave_page"
    }, t.AccessType = {
        MOBILE_NETWORK_2G: "2g",
        MOBILE_NETWORK_3G: "3g",
        MOBILE_NETWORK_4G: "4g",
        MOBILE_NETWORK_NONE: "none"
    };
}, function(e, t) {
    var n = "[APLUS] -- ";
    e.exports = function() {
        function e() {
            this.setDebug = function(e) {
                a = e;
            }, this.i = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.info.apply(console, arguments);
                } catch (e) {}
            }, this.e = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.error.apply(console, arguments);
                } catch (e) {}
            }, this.w = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                } catch (e) {}
            }, this.v = function() {
                try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                } catch (e) {}
            }, this.tip_w = function(e) {
                try {
                    console.log("%c " + n + e, "background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;");
                } catch (e) {}
            }, this.repeat = function(e) {
                for (var t = e; t.length < 86; ) t += e;
                return t;
            };
        }
        var t = null, a = !1;
        return function() {
            return null === t && (t = new e()), t;
        };
    }();
}, function(e, t) {
    t.stringfy = function(e) {
        if (e) try {
            return JSON.stringify(e);
        } catch (e) {}
        return "";
    }, t.parse = function(e) {
        if (e) try {
            return JSON.parse(e);
        } catch (e) {}
        return null;
    }, t.parseToArray = function(e) {
        if (e) try {
            return JSON.parse(e);
        } catch (e) {}
        return [];
    };
}, function(e, t, n) {
    "use strict";
    var a = n(11);
    e.exports = function(e, t) {
        if (a(e) && void 0 === e.length) for (var n in e) e.hasOwnProperty(n) && t(n, e[n], e); else {
            var o, r = e.length;
            for (o = 0; o < r; o++) {
                var i = t(e[o], o);
                if ("break" === i) break;
            }
        }
    };
}, function(e, t) {
    e.exports = function(e) {
        if ("object" != typeof e || null === e) return !1;
        for (var t = e; null !== Object.getPrototypeOf(t); ) t = Object.getPrototypeOf(t);
        return Object.getPrototypeOf(e) === t;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(13);
    e.exports = function() {
        return {
            run: function() {
                var e = document, t = window.aplus || (window.aplus = {});
                if (!t._aplus_cplugin_track_deb) {
                    t._aplus_cplugin_track_deb = {
                        status: "init"
                    };
                    var n = window, o = function() {
                        try {
                            var t = n.localStorage, a = "aplus_track_debug_id", o = new RegExp("[?|&]" + a + "=(\\w*)"), r = location.href.match(o);
                            if (r && r.length > 0) t.setItem(a, r[1]); else {
                                var i = e.referrer || "", s = i.match(o);
                                if (s && s.length > 0) t.setItem(a, s[1]); else {
                                    var u = n.name || "", c = u.match(o);
                                    c && c.length > 0 && t.setItem(a, c[1]);
                                }
                            }
                            var l = t.getItem(a) || "";
                            if (!(l && l.length > 50)) return !1;
                            var p, f = l.split("_");
                            if (f && f.length > 0) {
                                p = f[f.length - 1].replace(/log/, "");
                                var g = new Date(), d = g.getTime(), _ = new Date(), h = _.getTime();
                                g.setFullYear(parseInt(p.substr(0, 4))), g.setMonth(parseInt(p.substr(4, 2) - 1)), 
                                g.setDate(parseInt(p.substr(6, 2))), g.setHours(parseInt(p.substr(8, 2))), g.setMinutes(parseInt(p.substr(10, 2))), 
                                g.setSeconds(parseInt(p.substr(12, 2))), g.setMilliseconds(0), d = g.getTime(), 
                                h = _.getTime();
                                var m = h - d;
                                return m <= 36e5 && (l || r[1]);
                            }
                        } catch (e) {
                            return !1;
                        }
                    }, r = function(e) {
                        t._aplus_cplugin_track_deb.status = "start";
                        var n = {
                            aplus_track_debug_id: e
                        }, a = window.aplus_queue || (window.aplus_queue = []);
                        a.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-exdata", n ]
                        }), a.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-cpvdata", n ]
                        }), t._aplus_cplugin_track_deb.status = "complete";
                    };
                    a.on(n, "message", function(e) {
                        var t = e && e.data;
                        t && "qt_verify_msg" === t.message && (window.localStorage.setItem("aplus_track_debug_id", t.data), 
                        r(t.data), e.source && e.source.postMessage({
                            message: "qt_msg_sdk"
                        }, e.origin));
                    });
                    var i = o();
                    i && r(i);
                }
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t, n) {
        var a = aplus._$ || {}, o = a.meta_info || {}, r = o.aplus_ctap || {}, i = o["aplus-touch"];
        if (r && "function" == typeof r.on) r.on(e, t); else {
            var s = "ontouchend" in document.createElement("div");
            !s || "tap" !== i && "tapSpm" !== n && "tap" !== n ? u(e, s ? "touchstart" : "mousedown", t) : l.on(e, t);
        }
    }
    function o(e) {
        try {
            document.documentElement.doScroll("left");
        } catch (t) {
            return void setTimeout(function() {
                o(e);
            }, 1);
        }
        e();
    }
    function r(e) {
        var t = 0, n = function() {
            0 === t && e(), t++;
        };
        "complete" === document.readyState && n();
        var a;
        if (document.addEventListener) a = function() {
            document.removeEventListener("DOMContentLoaded", a, !1), n();
        }, document.addEventListener("DOMContentLoaded", a, !1), window.addEventListener("load", n, !1); else if (document.attachEvent) {
            a = function() {
                "complete" === document.readyState && (document.detachEvent("onreadystatechange", a), 
                n());
            }, document.attachEvent("onreadystatechange", a), window.attachEvent("onload", n);
            var r = !1;
            try {
                r = null === window.frameElement;
            } catch (e) {}
            document.documentElement.doScroll && r && o(n);
        }
    }
    function i(e) {
        "complete" === document.readyState ? e() : u(window, "load", e);
    }
    function s(e) {
        var t = history[e];
        return function() {
            var n;
            try {
                n = new Event(e), n.arguments = arguments;
            } catch (t) {
                n = document.createEvent("Event"), n.initEvent(e, !0, !0);
            }
            window.dispatchEvent(n);
            var a = t.apply(this, arguments);
            return a;
        };
    }
    function u() {
        var e = window, t = arguments;
        if (2 === t.length) "DOMReady" === t[0] && r(t[1]), "onload" === t[0] && i(t[1]); else if (3 === t.length) {
            var n = t[0], o = t[1], u = t[2];
            if ("tap" === o || "tapSpm" === o) a(n, u, o); else {
                [ "pushState", "replaceState" ].indexOf(o) > -1 && (history[o] = s(o));
                var l = document.attachEvent ? "attachEvent" : "addEventListener", p = !!document.attachEvent;
                n[l]((p ? "on" : "") + o, function(t) {
                    t = t || e.event;
                    var n = t.target || t.srcElement;
                    "function" == typeof u && u(t, n);
                }, !!c(o) && {
                    passive: !0
                });
            }
        }
    }
    var c = n(14), l = n(15);
    t.DOMReady = r, t.onload = i, t.on = u;
}, function(e, t) {
    var n;
    e.exports = function(e) {
        if ("boolean" == typeof n) return n;
        if (!/touch|mouse|scroll|wheel/i.test(e)) return !1;
        n = !1;
        try {
            var t = Object.defineProperty({}, "passive", {
                get: function() {
                    n = !0;
                }
            });
            window.addEventListener("test", null, t);
        } catch (e) {}
        return n;
    };
}, function(e, t) {
    "use strict";
    function n(e, t) {
        return e + Math.floor(Math.random() * (t - e + 1));
    }
    function a(e, t, n) {
        var a = document.createEvent("HTMLEvents");
        if (a.initEvent(t, !0, !0), "object" == typeof n) for (var o in n) a[o] = n[o];
        e.dispatchEvent(a);
    }
    function o(e) {
        var t = document.documentElement;
        0 === Object.keys(l).length && (t.addEventListener(g, r, !1), t.addEventListener(f, i, !1), 
        t.addEventListener(_, i, !1));
        for (var n = 0; n < e.changedTouches.length; n++) {
            var a = e.changedTouches[n], o = {};
            for (var s in a) o[s] = a[s];
            var u = {
                startTouch: o,
                startTime: Date.now(),
                status: d,
                element: e.srcElement || e.target
            };
            l[a.identifier] = u;
        }
    }
    function r(e) {
        for (var t = 0; t < e.changedTouches.length; t++) {
            var n = e.changedTouches[t], a = l[n.identifier];
            if (!a) return;
            var o = n.clientX - a.startTouch.clientX, r = n.clientY - a.startTouch.clientY, i = Math.sqrt(Math.pow(o, 2) + Math.pow(r, 2));
            (a.status === d || "pressing" === a.status) && i > 10 && (a.status = "panning");
        }
    }
    function i(e) {
        for (var t = 0; t < e.changedTouches.length; t++) {
            var n = e.changedTouches[t], o = n.identifier, s = l[o];
            s && (s.status === d && e.type === f && (s.timestamp = Date.now(), a(s.element, h, {
                touch: n,
                touchEvent: e
            })), delete l[o]);
        }
        var u = document.documentElement;
        0 === Object.keys(l).length && (u.removeEventListener(g, r, !1), u.removeEventListener(f, i, !1), 
        u.removeEventListener(_, i, !1));
    }
    function s(e) {
        e.__fixTouchEvent || (e.addEventListener(p, function() {}, !1), e.__fixTouchEvent = !0);
    }
    function u() {
        if (!c) {
            var e = document.documentElement;
            e.addEventListener(p, o, !1), c = !0;
        }
    }
    var c = !1, l = {}, p = "touchstart", f = "touchend", g = "touchmove", d = "tapping", _ = "touchcancel", h = "aplus_tap" + n(1, 1e5);
    e.exports = {
        on: function(e, t) {
            u(), e && e.addEventListener && t && (s(e), e.addEventListener(h, t._aplus_tap_callback = function(e) {
                t(e, e.target);
            }, !1));
        },
        un: function(e, t) {
            e && e.removeEventListener && t && t._aplus_tap_callback && e.removeEventListener(h, t._aplus_tap_callback, !1);
        }
    };
}, function(e, t) {
    "use strict";
    e.exports = function() {
        return {
            run: function(e, t) {
                var n = setInterval(function() {
                    document.getElementsByTagName("body").length && (clearInterval(n), n = null, t());
                }, 50);
                return setTimeout(function() {
                    n && clearInterval(n);
                }, 1e3), 1e3;
            }
        };
    };
}, function(e, t, n) {
    var a = n(18), o = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = o.getGlobalValue("aplus");
                e.aplus_pubsub || (e.aplus_pubsub = a.create());
            }
        };
    };
}, function(e, t, n) {
    var a = n(19);
    e.exports = a.extend({
        subscribeOnce: function(e, t) {
            this.callable(t);
            var n, a = this;
            return this.subscribe.call(this, e, n = function() {
                a.unsubscribe.call(a, e, n);
                var o = Array.prototype.slice.call(arguments);
                t.apply(a, o);
            }), this;
        }
    });
}, function(e, t, n) {
    "use strict";
    var a = n(20), o = n(21), r = function(e) {
        for (var t = e.length, n = new Array(t - 1), a = 1; a < t; a++) n[a - 1] = e[a];
        return n;
    }, i = o.extend({
        callable: function(e) {
            if (!a(e)) throw new TypeError(e + " is not a function");
            return e;
        },
        create: function(e) {
            var t = new this();
            for (var n in e) t[n] = e[n];
            return t.handlers = [], t.pubs = {}, t;
        },
        setHandlers: function(e) {
            this.handlers = e;
        },
        subscribe: function(e, t) {
            this.callable(t);
            var n = this, a = n.pubs || {}, o = n.handlers || [];
            e in o || (o[e] = []), o[e].push(t), n.setHandlers(o);
            for (var r = a[e] || [], i = 0; i < r.length; i++) {
                var s = r[i]();
                t.apply(n, s);
            }
            return n;
        },
        unsubscribe: function(e, t) {
            this.callable(t);
            try {
                var n = this.handlers[e];
                if (!n) return this;
                if ("object" == typeof n && n.length > 0) {
                    for (var a = 0; a < n.length; a++) t === n[a] && n.splice(a, 1);
                    this.handlers[e] = n;
                } else delete this.handlers[e];
            } catch (e) {}
            return this;
        },
        publish: function(e) {
            var t = r(arguments), n = this.handlers || [], o = n[e] ? n[e].length : 0;
            if (o > 0) for (var i = 0; i < o; i++) {
                var s = n[e][i];
                a(s) && s.apply(this, t);
            }
            return this;
        },
        cachePubs: function(e) {
            var t = this.pubs || {}, n = r(arguments);
            t[e] || (t[e] = []), t[e].push(function() {
                return n;
            });
        }
    });
    e.exports = i;
}, function(e, t) {
    "use strict";
    e.exports = function(e) {
        return "function" == typeof e;
    };
}, function(e, t, n) {
    "use strict";
    function a() {}
    var o = n(20);
    a.prototype.extend = function() {}, a.prototype.create = function() {}, a.extend = function(e) {
        return this.prototype.extend.call(this, e);
    }, a.prototype.create = function(e) {
        var t = new this();
        for (var n in e) t[n] = e[n];
        return t;
    }, a.prototype.extend = function(e) {
        var t = function() {};
        try {
            o(Object.create) || (Object.create = function(e) {
                function t() {}
                return t.prototype = e, new t();
            }), t.prototype = Object.create(this.prototype);
            for (var n in e) t.prototype[n] = e[n];
            t.prototype.constructor = t, t.extend = t.prototype.extend, t.create = t.prototype.create;
        } catch (e) {
            console && console.log(e);
        } finally {
            return t;
        }
    }, e.exports = a;
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                var e = window.aplus || (window.aplus = {});
                e._aplus_client = n(23)();
            }
        };
    };
}, function(e, t) {
    "use strict";
    function n(e) {
        for (var t = [ [ "Windows NT 5.1", "winXP" ], [ "Windows NT 6.1", "win7" ], [ "Windows NT 6.0", "winVista" ], [ "Windows NT 6.2", "win8" ], [ "Windows NT 6.3", "win8.1" ], [ "Windows NT 10.0", "win10" ], [ "Ubuntu", "ubuntu" ], [ "Linux", "linux" ], [ "Windows NT 5.2", "win2003" ], [ "Windows NT 5.0", "win2000" ], [ "Windows", "winOther" ], [ "rhino", "rhino" ] ], n = 0, a = t.length; n < a; ++n) {
            var o = t[n][0];
            if (e.indexOf(o) !== -1) {
                var r = o.split(" ")[0];
                return {
                    device_model: r,
                    os: r,
                    os_version: t[n][1]
                };
            }
        }
        var i = "other";
        return {
            device_model: i,
            os: i,
            os_version: i
        };
    }
    function a(e, t) {
        var n = e.substring(e.indexOf("(") + 1, e.indexOf(")")), a = {
            device_model: t
        }, o = t.toLowerCase();
        switch (o) {
          case "ipad":
          case "iphone":
          case "ipod":
          case "macintosh":
            "macintosh" === o ? /Mac OS X/.test(n) ? a.os = "Mac OS X" : a.os = "Mac OS" : a.os = "IOS", 
            a.os_version = n.match(/[0-9_.]+/)[0];
            break;

          case "android":
            a.os = "Android", a.os_version = n.match(/[0-9.]+/)[0];
        }
        return a.os_version = a.os_version.replace(/_/g, "."), a;
    }
    e.exports = function() {
        var e = navigator.userAgent, t = {}, o = e.match(/iphone|ipad|android|macintosh/i), r = e.match(/Darwin/i);
        if (o) t = a(e, o[0]); else if (r) {
            var i = e.split(" ")[2];
            t = {
                os: "Darwin",
                os_version: i.match(/[0-9.]+/)[0],
                device_model: "Darwin"
            };
        } else t = n(e);
        var s = screen || {};
        return t.screenWidth = s.width, t.screenHeight = s.height, navigator && (t.userAgent = navigator.userAgent || "-", 
        t.language = navigator.language || navigator.userLanguage || "-"), t;
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(25)(this.options.context.aplus_config);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        var e = document, t = "//g.alicdn.com";
        if (e) {
            var n = e.getElementById("beacon-aplus") || e.getElementById("tb-beacon-aplus"), a = [ "//assets.alicdn.com/g", "//g-assets.daily.taobao.net", "//alidt.oss-cn-hangzhou.aliyuncs.com" ];
            if (n) for (var o = 0; o < a.length; o++) {
                var r = new RegExp(a[o]);
                if (r.test(n.src)) {
                    t = a[o];
                    break;
                }
            }
        }
        return t;
    }
    function o() {
        s || (s = a());
        var e = "//assets.alicdn.com/g" === s || "//laz-g-cdn.alicdn.com" === s;
        return e || "int" === f.getMetaInfo("aplus-env");
    }
    function r() {
        if (navigator && navigator.userAgent) {
            var e = /iphone|android/i.test(navigator.userAgent), t = e || /TB\-PD/i.test(navigator.userAgent);
            return t;
        }
        return !0;
    }
    function i() {
        var e, t = c.getParamFromUrl("utparamcnt", location.href);
        if (t) try {
            e = t = JSON.parse(decodeURIComponent(t));
        } catch (e) {}
        return e;
    }
    var s, u = n(2), c = n(26), l = n(30), p = n(31), f = n(32);
    e.exports = function(e) {
        var t = u.getGlobalValue("aplus"), s = e.globalConfig.NAME_STORAGE_KEYS, c = n(43).getRefer(s);
        t.nameStorage = p.nameStorage, l.haveNativeFlagInUA();
        var g = t._$ = t._$ || {};
        g.is_terminal = r(), g.send_pv_count = 0, g.page_referrer = c, g.spm = {
            data: {},
            page_referrer: c
        }, t.globalConfig = e.globalConfig;
        var d = i();
        g.meta_info = f.qGet() || {};
        for (var _ in e.metaInfo) if (!g.meta_info.hasOwnProperty(_)) {
            var h = e.metaInfo[_];
            "aplus-utparam" === _ ? (d && f.appendMetaInfo(_, d), f.appendMetaInfo(_, h)) : f.setMetaInfo(_, h);
        }
        t._$ = g, t.isInternational = o, t.getCdnPath = a;
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        if (!e || !t) return "";
        var n, a = "";
        try {
            var o = new RegExp(e + "=([^&|#|?|/]+)");
            if ("spm" === e || "scm" === e) {
                var r = new RegExp("\\?.*" + e + "=([\\w\\.\\-\\*/]+)"), i = t.match(o), s = t.match(r), u = i && 2 === i.length ? i[1] : "", c = s && 2 === s.length ? s[1] : "";
                a = u > c ? u : c, a = decodeURIComponent(a);
            } else n = t.match(o), a = n && 2 === n.length ? n[1] : "";
        } catch (e) {} finally {
            return a;
        }
    }
    function o(e, t) {
        var n, a, o, r, i, u = t || location.href, c = "&", l = [];
        return s(e, function(e, t) {
            new RegExp(e + "=").test(u) || l.push(e + "=" + t);
        }), 0 === l.length ? u : (u.indexOf("#") !== -1 && (o = u.split("#"), u = o.shift(), 
        a = o.join("#")), r = u.split("?"), i = r.length - 1, o = r[0].split("//"), o = o[o.length - 1].split("/"), 
        i > 0 && (n = r.pop(), u = r.join("?")), n && i > 1 && n.indexOf("&") == -1 && n.indexOf("%") !== -1 && (c = "%26"), 
        u = u + "?" + l.join("&") + (n ? c + n : "") + (a ? "#" + a : ""));
    }
    function r(e) {
        var t = location.hash + "";
        u.pushIntoGoldlogQueue("aplus.on", [ window, "hashchange", function() {
            t !== location.hash && (t = location.hash + "", e && "function" == typeof e && e(t, l));
        } ]);
    }
    function i(e) {
        function t(t) {
            var a = "";
            if (t) {
                a = t && t.arguments && t.arguments.length > 2 && t.arguments[2];
                var o = /^http|https/.test(a) ? a : location.protocol + "//" + location.host + a;
                location.href !== o && setTimeout(function() {
                    e && "function" == typeof e && e(a, p);
                }, 0);
            } else a = location.pathname + location.search, a !== n && setTimeout(function() {
                e && "function" == typeof e && e(a, p);
            }, 0);
            n = a;
        }
        var n = location.pathname + location.search;
        if (history.pushState && window.addEventListener) {
            u.pushIntoGoldlogQueue("aplus.on", [ window, "pushState", function(e) {
                t(e);
            } ]), u.pushIntoGoldlogQueue("aplus.on", [ window, "popstate", function() {
                t();
            } ]);
            var a = c.getMetaCnt("aplus-track-replacestate") || aplus.getMetaInfo("aplus-track-replacestate");
            a && u.pushIntoGoldlogQueue("aplus.on", [ window, "replaceState", function(e) {
                t(e);
            } ]);
        }
    }
    var s = n(10);
    t.addParamsIntoUrl = o, t.getParamFromUrl = a, t.getSPMFromUrl = function(e) {
        return a("spm", e);
    }, t.getQueryFromUrl = function() {
        function e(e) {
            for (var t = decodeURIComponent(e), n = t.indexOf("?") + 1, a = t.substring(n), o = Object.create(null), r = a.split("&"), i = 0; i < r.length; i++) o[r[i].split("=")[0]] = decodeURIComponent(r[i].split("=")[1]);
            return o;
        }
        try {
            var t = location && location.hash, a = location && location.search;
            if (t && t.indexOf("?") !== -1) return e(t);
            if (a && a.indexOf("?") !== -1) return e(a);
        } catch (e) {
            var o = n(8);
            o().w("url error === ", location.href);
        }
    };
    var u = n(27), c = n(28), l = "hash", p = "history";
    t.watchHashChange = r, t.watchHistoryChange = i;
}, function(e, t, n) {
    "use strict";
    var a = n(2);
    t.pushIntoGoldlogQueue = function(e, t) {
        var n = a.getGlobalValue("aplus_queue"), o = a.getGlobalValue("aplus"), r = e.split("."), i = o[r[1]], s = i ? i[r[2]] : null;
        o && 2 === r.length && i ? i.apply(o, t) : 3 === r.length && s ? s.apply(i, t) : n.push({
            action: e,
            arguments: t
        });
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        return i = i || document.getElementsByTagName("head")[0], s && !e ? s : i ? s = i.getElementsByTagName("meta") : [];
    }
    function o(e, t) {
        var n, o, r, i = a(), s = i.length;
        for (n = 0; n < s; n++) o = i[n], u.tryToGetAttribute(o, "name") === e && (r = u.tryToGetAttribute(o, t || "content"));
        return r || "";
    }
    function r(e) {
        var t = {
            isonepage: "-1",
            urlpagename: ""
        }, n = e.qGet();
        if (n && n.hasOwnProperty("isonepage_data")) t.isonepage = n.isonepage_data.isonepage, 
        t.urlpagename = n.isonepage_data.urlpagename; else {
            var a = o("isonepage") || "-1", r = a.split("|");
            t.isonepage = r[0], t.urlpagename = r[1] ? r[1] : "";
        }
        return t;
    }
    var i, s, u = n(29);
    t.getMetaTags = a, t.getMetaCnt = o, t.getOnePageInfo = r;
}, function(e, t) {
    "use strict";
    t.tryToGetAttribute = function(e, t) {
        return e && e.getAttribute ? e.getAttribute(t) || "" : "";
    };
    var n = function(e, t, n) {
        if (e && e.setAttribute) try {
            e.setAttribute(t, n);
        } catch (e) {}
    };
    t.tryToSetAttribute = n, t.tryToRemoveAttribute = function(e, t) {
        if (e && e.removeAttribute) try {
            e.removeAttribute(t);
        } catch (a) {
            n(e, t, "");
        }
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = "UT4Aplus", r = "Umeng4Aplus";
    t.isNative4Aplus = function() {
        var e = a.getGlobalValue("aplus"), t = e.getMetaInfo("aplus-toUT"), n = e.aplusBridgeName;
        return n === o && t === o || n === r;
    }, t.haveNativeFlagInUA = function() {
        var e = a.getGlobalValue("aplus"), t = e.aplusBridgeName;
        if (!t && "boolean" != typeof t && navigator && navigator.userAgent) {
            var n = new RegExp([ o, r ].join("|"), "i"), i = navigator.userAgent.match(n);
            t = !!i && i[0], e.aplusBridgeName = t;
        }
        return !!t;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = function() {
        function e() {
            var e, t = [], n = !0;
            for (var a in f) f.hasOwnProperty(a) && (n = !1, e = f[a] || "", t.push(l(a) + u + l(e)));
            window.name = n ? o : r + l(o) + s + t.join(c);
        }
        function t(e, t, n) {
            e && (e.addEventListener ? e.addEventListener(t, n, !1) : e.attachEvent && e.attachEvent("on" + t, function(t) {
                n.call(e, t);
            }));
        }
        var n = a.getGlobalValue("nameStorage");
        if (n) return n;
        var o, r = "nameStorage:", i = /^([^=]+)(?:=(.*))?$/, s = "?", u = "=", c = "&", l = encodeURIComponent, p = decodeURIComponent, f = {}, g = {};
        return function(e) {
            if (e && 0 === e.indexOf(r)) {
                var t = e.split(/[:?]/);
                t.shift(), o = p(t.shift()) || "";
                for (var n, a, s, u = t.join(""), l = u.split(c), g = 0, d = l.length; g < d; g++) n = l[g].match(i), 
                n && n[1] && (a = p(n[1]), s = p(n[2]) || "", f[a] = s);
            } else o = e || "";
        }(window.name), g.setItem = function(t, n) {
            t && "undefined" != typeof n && (f[t] = String(n), e());
        }, g.getItem = function(e) {
            return f.hasOwnProperty(e) ? f[e] : null;
        }, g.removeItem = function(t) {
            f.hasOwnProperty(t) && (f[t] = null, delete f[t], e());
        }, g.clear = function() {
            f = {}, e();
        }, g.valueOf = function() {
            return f;
        }, g.toString = function() {
            var e = window.name;
            return 0 === e.indexOf(r) ? e : r + e;
        }, t(window, "beforeunload", function() {
            e();
        }), g;
    }();
    t.nameStorage = o;
}, function(e, t, n) {
    "use strict";
    function a(e) {
        var t, n, a, o = e.length, r = {};
        for (v._microscope_data = r, t = 0; t < o; t++) n = e[t], "microscope-data" === _.tryToGetAttribute(n, "name") && (a = _.tryToGetAttribute(n, "content"), 
        f.parseSemicolonContent(a, r), v.is_head_has_meta_microscope_data = !0);
        v._microscope_data_params = l.obj2param(r), v.ms_data_page_id = r.pageId, v.ms_data_shop_id = r.shopId, 
        v.ms_data_instance_id = r.siteInstanceId, v.ms_data_siteCategoryId = r.siteCategory, 
        v.ms_prototype_id = r.prototypeId, v.site_instance_id_or_shop_id = v.ms_data_instance_id || v.ms_data_shop_id, 
        v._atp_beacon_data = {}, v._atp_beacon_data_params = "";
    }
    function o(e) {
        var t, n = function() {
            var t;
            return document.querySelector && (t = document.querySelector("meta[name=data-spm]")), 
            d(e, function(e) {
                "data-spm" === _.tryToGetAttribute(e, "name") && (t = e);
            }), t;
        }, a = n();
        return a && (t = _.tryToGetAttribute(a, "data-spm-protocol")), t;
    }
    function r(e) {
        var t = e.isonepage || "-1", n = t.split("|"), a = n[0], o = n[1] ? n[1] : "";
        e.isonepage_data = {
            isonepage: a,
            urlpagename: o
        };
    }
    function i() {
        if (document) {
            var e = h.getMetaTags();
            a(e), d(e, function(e) {
                var t = _.tryToGetAttribute(e, "name");
                if (/^aplus/.test(t) && (v[t] = h.getMetaCnt(t), t === y)) try {
                    u = v[t] = JSON.parse(h.getMetaCnt(t));
                } catch (e) {}
            }), d(b, function(e) {
                v[e] = h.getMetaCnt(e);
            }), v.spm_protocol = o(e), u && (v = p.assign(v, u));
            var t, n, i = [ "aplus-rate-ahot" ], s = i.length;
            for (t = 0; t < s; t++) n = i[t], v[n] = parseFloat(v[n]);
            r(v);
        }
        return c = v || {}, v;
    }
    function s(e) {
        g.logger({
            msg: "please do not repeat setPriorityMetaInfo " + e
        });
    }
    var u, c, l = n(33), p = n(34), f = n(36), g = n(40), d = n(10), _ = n(29), h = n(28), m = n(2), v = {}, y = "aplus-x-settings", b = [ "ahot-aplus", "isonepage", "spm-id", "data-spm", "microscope-data" ];
    t.getInfo = i, t.qGet = function() {
        return c || i();
    }, t.setMetaInfo = function(e, t) {
        if (c || (c = {}), "object" == typeof u && u[e]) return s(e), !0;
        if (e === y) {
            if (u) s(e); else try {
                u = "object" == typeof t ? t : JSON.parse(t), c = p.assign(c, u);
            } catch (e) {
                console && console.log(e);
            }
            return !0;
        }
        return "aplus-exinfo" === e ? c[e] = "object" == typeof t ? t : l.param2obj(t) : c[e] = t, 
        !0;
    };
    var w = function(e) {
        return c || (c = {}), c[e] || "";
    };
    t.getMetaInfo = w, t.appendMetaInfo = function(e, t) {
        var n = m.getGlobalValue("aplus");
        if (e && t) {
            var a, o = function(n) {
                try {
                    var a = "string" == typeof t ? JSON.parse(t) : t;
                    s(e, p.assign(n, a));
                } catch (e) {}
            }, r = function(n) {
                try {
                    var a = "string" == typeof t ? JSON.parse(t) : t;
                    s(e, n.concat(a));
                } catch (e) {}
            }, i = function(e) {
                e.constructor === Array ? r(e) : o(e);
            }, s = function(e, t) {
                n.setMetaInfo(e, t, {
                    from: "appendMetaInfo"
                });
            }, u = function(n) {
                var a = l.param2obj(t);
                s(e, p.assign(n, a));
            }, c = n.getMetaInfo(e);
            if ("aplus-exinfo" === e && (u(c), a = !0), c) if ("object" == typeof c) i(c), a = !0; else try {
                var f = JSON.parse(c);
                "object" == typeof f && (i(f), a = !0);
            } catch (e) {}
            a || s(e, t);
        }
    };
}, function(e, t) {
    "use strict";
    function n(e, t) {
        var n, o, r, i = [], s = e.length;
        for (r = 0; r < s; r++) {
            n = e[r][0], o = e[r][1];
            var u = 0 === n.indexOf(a), c = u || t ? o : encodeURIComponent(o);
            i.push(u ? c : n + "=" + c);
        }
        return i.join("&");
    }
    t.arr2obj = function(e) {
        var t, n, a, o = {}, r = e.length;
        for (a = 0; a < r; a++) t = e[a][0], n = e[a][1], o[t] = n;
        return o;
    }, t.param2obj = function(e) {
        if ("object" == typeof e) return e;
        var t = {};
        if (!e || "string" != typeof e) return t;
        for (var n = e.split("&"), a = 0; a < n.length; a++) {
            var o = n[a], r = o.indexOf("="), i = o.split("="), s = o.length;
            if (2 === i.length) t[i[0]] = i[1] || ""; else if (r > 0) {
                var u = o.slice(0, r), c = o.slice(r + 1, s) || "";
                t[u] = c;
            } else t[i[0]] = "";
        }
        return t;
    };
    var a = "::-plain-::";
    t.s_plain_obj = a, t.arr2param = n, t.obj2param = function(e, t) {
        var n, o, r, i = [];
        for (n in e) n && e.hasOwnProperty(n) && ("object" == typeof e[n] ? (o = "" + this.obj2param(e[n]), 
        r = o) : (o = "" + e[n], r = n + "=" + o), t ? i.push(r) : i.push(0 === n.indexOf(a) ? o : r));
        return i.join("&");
    }, t.encodeGokeyValue = function(e) {
        return e;
    };
}, function(e, t, n) {
    "use strict";
    t.assign = n(35), t.makeCacheNum = function() {
        return Math.floor(268435456 * Math.random()).toString(16);
    }, t.isStartWith = function(e, t) {
        return 0 === e.indexOf(t);
    }, t.isEndWith = function(e, t) {
        if (String.prototype.endsWith) return e.endsWith(t);
        var n = e.length, a = t.length;
        return n >= a && e.substring(n - a) === t;
    }, t.any = function(e, t) {
        var n, a = e.length;
        for (n = 0; n < a; n++) if (t(e[n])) return !0;
        return !1;
    }, t.isNumber = function(e) {
        return "number" == typeof e;
    }, t.isNaN = function(e) {
        return isNaN ? isNaN(e) : e !== e;
    }, t.isContain = function(e, t) {
        return e.indexOf(t) > -1;
    };
    var a = function(e) {
        var t, n = e.constructor === Array ? [] : {};
        if ("object" == typeof e) {
            if (JSON && JSON.parse) t = JSON.stringify(e), n = JSON.parse(t); else for (var o in e) n[o] = "object" == typeof e[o] ? a(e[o]) : e[o];
            return n;
        }
    };
    t.cloneDeep = a;
    var o = function() {
        for (var e, t = /[?&]([^=#]+)=([^&#]*)/g, n = window.location.href, a = {}; e = t.exec(n); ) a[e[1]] = e[2];
        return a;
    };
    t.getUrlParams = o;
    var r = function(e) {
        if (!e) return !0;
        for (var t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
        return !0;
    };
    t.isEmptyObject = r;
}, function(e, t) {
    e.exports = function(e, t) {
        return "function" != typeof Object.assign ? function(e) {
            for (var t = Object(e), n = 1; n < arguments.length; n++) {
                var a = arguments[n];
                if (null !== a) for (var o in a) Object.prototype.hasOwnProperty.call(a, o) && (t[o] = a[o]);
            }
            return t;
        }(e, t) : Object.assign({}, e, t);
    };
}, function(e, t, n) {
    "use strict";
    var a = n(37), o = n(38), r = n(2), i = n(34), s = n(9), u = n(39);
    e.exports = {
        tryToDecodeURIComponent: function(e, t) {
            var n = t || "";
            if (e) try {
                n = decodeURIComponent(e);
            } catch (e) {}
            return n;
        },
        parseSemicolonContent: function(e, t, n) {
            t = t || {};
            var o, r, i = e.split(";"), s = i.length;
            for (o = 0; o < s; o++) {
                r = i[o].split("=");
                var u = a.trim(r.slice(1).join("="));
                t[a.trim(r[0]) || ""] = n ? u : this.tryToDecodeURIComponent(u);
            }
            return t;
        },
        nodeListToArray: function(e) {
            var t, n;
            try {
                return t = [].slice.call(e);
            } catch (o) {
                t = [], n = e.length;
                for (var a = 0; a < n; a++) t.push(e[a]);
                return t;
            }
        },
        getLsCna: function(e, t) {
            if (o.get && o.test()) {
                var n = "", a = o.get(e);
                if (a) {
                    var r = a.split("_") || [];
                    n = t ? r.length > 1 && t === r[0] ? r[1] : "" : r.length > 1 ? r[1] : "";
                }
                return decodeURIComponent(n);
            }
            return "";
        },
        setLsCna: function(e, t, n) {
            n && o.set && o.test() && o.set(e, t + "_" + encodeURIComponent(n));
        },
        getLsImpv: function(e, t) {
            if (o.get && o.test()) {
                var n = "", a = o.get(e);
                if (a) {
                    var r = a.split("||") || [];
                    n = t ? r.length > 1 && t === r[0] ? r[1] : "" : r.length > 1 ? r[1] : "";
                }
                return decodeURIComponent(n);
            }
            return "";
        },
        setLsImpv: function(e, t, n) {
            n && o.set && o.test() && o.set(e, t + "||" + encodeURIComponent(n));
        },
        setLsRemoteCfg: function(e, t, n) {
            if (n && o.set && o.test()) {
                var a = i.cloneDeep(n);
                "object" == typeof a && (a = JSON.stringify(a)), o.set(e, t + "||" + encodeURIComponent(a));
            }
        },
        getLsRemoteCfg: function(e, t) {
            if (o.get && o.test()) {
                var n = "", a = o.get(e);
                if (a) {
                    var r = a.split("||") || [];
                    n = t ? r.length > 1 && t === r[0] ? r[1] : "" : r.length > 1 ? r[1] : "";
                }
                return s.parse(decodeURIComponent(n));
            }
            return "";
        },
        getUrl: function(e) {
            var t = r.getGlobalValue("aplus"), a = n(3), o = e || "//log.mmstat.com/eg.js";
            try {
                var i = t.getMetaInfo(a.APLUS_PV_DOMAIN);
                i = u.fixDomain(i).replace(/\/\w+.gif$/, ""), o = i + "/eg.js";
            } catch (e) {}
            return o;
        }
    };
}, function(e, t) {
    "use strict";
    function n(e) {
        return "string" == typeof e ? e.replace(/^\s+|\s+$/g, "") : "";
    }
    t.trim = n;
}, function(e, t) {
    "use strict";
    e.exports = {
        set: function(e, t) {
            try {
                return localStorage.setItem(e, t), !0;
            } catch (e) {
                return !1;
            }
        },
        get: function(e) {
            try {
                return localStorage.getItem(e);
            } catch (e) {
                return "";
            }
        },
        test: function() {
            var e = "grey_test_key";
            try {
                return localStorage.setItem(e, 1), localStorage.removeItem(e), !0;
            } catch (e) {
                return !1;
            }
        },
        remove: function(e) {
            localStorage.removeItem(e);
        }
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        var t, n, a, r = [], i = e.length;
        for (a = 0; a < i; a++) t = e[a][0], n = e[a][1], r.push(0 === t.indexOf(o) ? n : t + "=" + encodeURIComponent(n));
        return r.join("&");
    }
    var o = "::-plain-::";
    t.mkPlainKey = function() {
        return o + Math.random();
    }, t.s_plain_obj = o, t.mkPlainKeyForExparams = function(e) {
        var t = e || o;
        return t + "exparams";
    }, t.arr2param = a, t.param2arr = function(e) {
        for (var t, n = e.split("&"), a = 0, o = n.length, r = []; a < o; a++) t = n[a].split("="), 
        r.push([ t.shift(), t.join("=") ]);
        return r;
    }, t.arr2obj = function(e) {
        var t, n, a, o = {}, r = e.length;
        for (a = 0; a < r; a++) t = e[a][0], n = e[a][1], o[t] = n;
        return o;
    }, t.jsonLikeStr2JSON = function(e) {
        if (!e || "string" != typeof e) return {};
        for (var t = e.replace(/['"{}]+/g, ""), n = t.split(","), a = [], o = 0; o < n.length; o++) a.push(n[o].split(":"));
        var r = this.arr2obj(a);
        return r;
    }, t.fixDomain = function(e) {
        return e.indexOf("https://") !== -1 || e.indexOf("http://") !== -1 ? e : (e = (/^\/\//.test(e) ? "" : "//") + e, 
        /^\/\/(\d+\.){3,}\d+/.test(e) ? "http:" + e : "https:" + e);
    }, t.getAppKey = function() {
        var e = n(2).getGlobalValue("aplus");
        return e.getMetaInfo("appkey") || e.getMetaInfo("appId") || e.getMetaInfo("appKey");
    }, t.checkEmptyObj = function(e) {
        return "object" != typeof e || 0 === Object.keys(e).length;
    }, t.checkDomain = function(e) {
        var t = new RegExp(/^((http|https|''):\/\/)?([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:[0-9]{1,5})*)$/), a = (e.match(t) || [])[0];
        if (!e || !a) {
            var o = n(8);
            return o().tip_w(o().repeat("!")), o().tip_w("trackDomain error, please check aplus-rhost-v setting, current value is: " + e || "undefined"), 
            o().tip_w("we accept these three patterns:"), o().tip_w("eg1: https://test-qtracking-xxx.com:port, port is optional"), 
            o().tip_w("eg2: http://test-qtracking-xxx.com:port, port is optional"), o().tip_w("eg3: test-qtracking-xxx.com:port, port is optional"), 
            o().tip_w(o().repeat("!")), !1;
        }
        return !0;
    }, t.checkOpenid = function(e) {
        if (!e) {
            var t = n(8);
            return t().tip_w(t().repeat("!")), t().tip_w("QT need an unique id as QT's deviceid!!"), 
            t().tip_w("setting examples: aplus_queue.push({action: 'aplus.setMetaInfo', arguments: ['_anony_id', xxxxxx]});"), 
            t().tip_w("referrence document: https://t.tb.cn/1dTHjTTQF0UjOTNHiCkaCS"), t().tip_w(t().repeat("!")), 
            !1;
        }
        return !0;
    };
    var r = n(10);
    t.mapEventSampleRates = function(e) {
        var t = [];
        return r(e, function(e) {
            e.eventIds && e.eventIds.length > 0 && r(e.eventIds, function(n) {
                t.push({
                    eventId: n,
                    samplingRate: e.samplingRate
                });
            });
        }), t;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(41), o = "[APLUS] -- ";
    t.logger = function(e) {
        e || (e = {});
        var t = e.level || "warn";
        console && console[t] && console[t](o + e.msg);
    }, t.log = function() {
        var e = a && a.getMetaInfo("debug");
        e && console.log.apply(console, [ o ].concat(Array.prototype.slice.apply(arguments)));
    }, t.debugLog = function(e) {
        var t = n(2).getGlobalValue("aplus");
        t && t.aplusDebug && this.logger(e);
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        return i = f || {}, f;
    }
    function o() {
        return i || a();
    }
    function r(e, t) {
        return i || (i = {}), "aplus-inject-record-gokey" === e && (_("the API aplus-inject-record-gokey is deprecated, if needed please concat APLUS SDK supporter"), 
        p.record("/inject.record.gokey", "OTHER", "")), i[e] = t, !0;
    }
    var i, s = n(42), u = n(33), c = n(2), l = n(3), p = c.getGlobalValue(l.APLUS), f = {}, g = "object", d = "string";
    t.getInfo = a, t.qGet = o, t.setMetaInfo = r;
    var _ = function(e) {
        try {
            console && console.error(e);
        } catch (e) {}
    };
    t.catchException = _;
    var h = function(e) {
        return i || (i = {}), i[e] || "";
    };
    t.getMetaInfo = h;
    var m = function(e) {
        var t = h("aplus-inject-record-gokey");
        return "function" == typeof t ? t(e) : e.gokey;
    };
    t.getUserInjectGokey = m;
    var v = function(e, t) {
        if (e && t) {
            var n, a = function(n) {
                try {
                    var a = typeof t === d ? JSON.parse(t) : t;
                    i(e, Object.assign({}, n, a));
                } catch (e) {}
            }, o = function(n) {
                try {
                    var a = typeof t === d ? JSON.parse(t) : t;
                    i(e, n.concat(a));
                } catch (e) {}
            }, r = function(e) {
                e.constructor === Array ? o(e) : a(e);
            }, i = function(e, t) {
                y(e, t, {
                    from: "appendMetaInfo"
                });
            }, s = h(e);
            if ("aplus-exinfo" === e && (i(e, Object.assign({}, s, u.param2obj(t))), n = !0), 
            "aplus-page-properties" === e) {
                var c = t;
                if (s) for (var l in s) t[l] ? c[l] = Object.assign({}, s[l], t[l]) : c[l] = s[l];
                i(e, c), n = !0;
            }
            if (s) if (typeof s === g) r(s), n = !0; else try {
                var p = JSON.parse(s);
                typeof p === g && (r(p), n = !0);
            } catch (e) {}
            n || i(e, t);
        }
    };
    t.appendMetaInfo = v;
    var y = function(e, t) {
        var n, a, i = "OVERWRITE", u = i;
        if ("object" == typeof e ? (n = e.metaName, a = e.metaValue, u = e.mode || i) : (n = e, 
        a = t), u !== i) return v(n, a);
        if (r(n, a)) {
            var l = c.getGoldlogVal("_$") || {};
            l.meta_info = o();
            var p = c.setGoldlogVal("_$", l), f = [ "setMetaInfo", n, a, {} ];
            return s.doPubMsg(f), s.doCachePubs(f), p;
        }
    };
    t._setMetaInfo = y;
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = "function", r = function() {
        var e = a.getGlobalValue("aplus"), t = e.aplus_pubsub || {}, n = typeof t.publish === o;
        return n ? t : "";
    };
    t.doPubMsg = function(e) {
        var t = r();
        t && typeof t.publish === o && t.publish.apply(t, e);
    }, t.doCachePubs = function(e) {
        var t = r();
        t && typeof t.cachePubs === o && t.cachePubs.apply(t, e);
    }, t.doSubMsg = function(e, t) {
        var n = r();
        n && typeof n.subscribe === o && n.subscribe(e, t);
    };
}, function(e, t, n) {
    "use strict";
    var a = n(31).nameStorage;
    t.getRefer = function(e) {
        return document.referrer || a.getItem(e.REFERRER) || "";
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(45)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        var t, n = window.aplus || (window.aplus = {}), a = !1, l = function() {
            a || (o.wrap(function() {
                t = c.getAutoClkConfig();
                var e;
                t && t.length > 0 && (e = u.create({
                    autoClkConfig: t
                }), e.init(), s.watch_clk()), n.aplus_pubsub.subscribe("setMetaInfo", function(n, a, o) {
                    if ("aplus-auto-clk" === n) {
                        var r = c.getAutoClkConfig(a);
                        if (JSON.stringify(r) === JSON.stringify(t)) return;
                        t = r, s.clear(), o || (o = {
                            from: "setMetaInfo"
                        }), e && e.clear(o), e && e.clearDom({
                            autoClkConfig: t
                        }, o), a && (e ? e.reset({
                            autoClkConfig: t
                        }, o) : (e = u.create({
                            autoClkConfig: t
                        }), e.init()), s.watch_clk());
                    }
                });
            }, "do_init"), a = !0);
        };
        setTimeout(function() {
            a || i().w("aplus_ac_init failed! please check whether aplusJs is loaded correctly!");
        }, 5e3);
        var p = n._$ || {}, f = window.g_SPM || {};
        "complete" === p.status && f.spm && l();
        var g = window.aplus_queue || (window.aplus_queue = []);
        g.push({
            action: r.SUBSCRIBE,
            arguments: [ "aplusReady", function(e) {
                "complete" === e && l("aplusReady");
            } ]
        }), "function" == typeof e && e();
    }
    var o = n(46), r = n(3), i = n(8), s = n(47), u = n(56), c = n(55);
    e.exports = function() {
        var e = window.aplus || window.goldlog || (window.aplus = {});
        e._aplus_ac || (e._aplus_ac = {
            status: "init",
            elementSelectorSizeMap: {}
        }, a(function() {
            e._aplus_ac.status = "complete";
        }));
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = function(e, t) {
        var n = a.getGlobalValue("aplus_queue", []);
        n.push({
            action: "aplus._aplus_cplugin_track_deb.monitor",
            arguments: [ {
                key: "APLUS_PLUGIN_DEBUG",
                title: "aplus_core",
                msg: [ "_error_:methodName=" + t + ",params=" + JSON.stringify(e) ],
                type: "updateMsg",
                description: t || "aplus_core"
            } ]
        });
    }, r = function(e, t, n) {
        var o = a.getGlobalValue("aplus_queue", []);
        o.push({
            action: [ "aplus", "_aplus_cplugin_m", t ].join("."),
            arguments: [ e, n ]
        });
    };
    t.do_tracker_jserror = function(e, t) {
        var n = "do_tracker_jserror";
        r(e, n, t), o(e, n);
        var i = a.getGlobalValue("aplus");
        i && i.aplusDebug && console && console.warn(e);
    }, t.wrap = function(e) {
        if ("function" == typeof e) try {
            e();
        } catch (e) {
            o({
                msg: e.message || e
            }, "exception");
        } finally {}
    };
}, function(e, t, n) {
    "use strict";
    var a = n(48), o = n(29), r = n(49), i = n(2), s = n(34), u = n(50), c = n(10), l = n(33), p = n(51), f = n(52), g = n(55), d = window, _ = [ "iframe", "html", "body", "head" ], h = g.DATA_APLUS_AC_KEY, m = function(e) {
        var t = [], n = e ? o.tryToGetAttribute(e, h) : "";
        if (n) {
            var a = i.getGoldlogVal("_aplus_ac") || {}, r = a._acHashMap || {};
            u(r, function(e, a) {
                c(a, function(e) {
                    e.hash_value === n && t.push(e.clkConfig);
                });
            });
        }
        return {
            clkConfigs: t,
            el: e
        };
    }, v = function(e) {
        var t = m(e);
        if (t && t.clkConfigs && t.clkConfigs.length > 0) return t;
        for (;(e = e.parentNode) && a.indexof(_, e.tagName ? e.tagName.toLowerCase() : "html") === -1; ) if (t = m(e), 
        t && t.clkConfigs && t.clkConfigs.length > 0) return t;
    }, y = function(e) {
        e = e || d.event;
        var t = e.target || e.srcElement, n = v(t) || {}, a = n.clkConfigs;
        n && a && n.el && c(a, function(a) {
            var o = a;
            t = n.el;
            var r = aplus.spm_ab ? aplus.spm_ab.join(".") : "0.0", i = r + ".0.0", u = "";
            d.g_SPM && "function" == typeof d.g_SPM.spm && (i = d.g_SPM.spm(t));
            var c = [], p = {}, _ = f.fillPropsData(o, t, p);
            _ = f.fillFilterData(o, t, p), _ = f.fillSpmData(o, t, p), _ = s.assign(_, f.getDataTrackerParams(t));
            var h = g.getAutoClkUserFn();
            if (h) {
                var m = f.autoUserFnHandler(h, t, o.elementSelector, o, e);
                if ("object" == typeof m) "object" == typeof m.userdata && (_ = s.assign(_, m.userdata)), 
                m.spm && (i = m.spm), m.scm && (u = m.scm); else if (m === !1) return;
            }
            if ("on" === aplus.getMetaInfo("aplus-track-combine")) c.push("clkdata=" + JSON.stringify([ {
                exargs: _,
                scm: u,
                spm: i,
                aplusContentId: ""
            } ])); else for (var v in _) c.push(v + "=" + _[v]);
            c.push("_is_auto_clk=1");
            var y = o.method || "POST";
            "on" !== aplus.getMetaInfo("aplus-track-combine") && c.push("is_auto=1"), "$$_APLUS" !== o.logkey && (aplus.globalConfig.isUM ? aplus_queue.push({
                action: "aplus.record",
                arguments: [ o.logkey, "CLK", l.param2obj(c.join("&")), y ]
            }) : aplus_queue.push({
                action: "aplus.record",
                arguments: [ o.logkey, "CLK", c.join("&"), y ]
            }));
        });
    };
    t.watch_clk = function() {
        r.isTouch() ? p.on(document, "tap", y) : p.on(document, "mousedown", y);
    }, t.clear = function() {
        r.isTouch() ? p.un(document, "tap", y) : p.un(document, "mousedown", y);
    };
}, function(e, t) {
    "use strict";
    function n(e) {
        return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
    }
    function a(e) {
        var t = [];
        if (n(e)) for (var o = 0; o < e.length; o++) {
            var r = e[o];
            n(r) ? (e[o] = a(r), t = t.concat(e[o])) : t.push(r);
        }
        return t;
    }
    function o(e, t) {
        try {
            return e.find(t);
        } catch (o) {
            for (var n = 0; n < e.length; n++) {
                var a = t(e[n]);
                if (a) return e[n];
            }
        }
    }
    t.indexof = function(e, t) {
        var n = -1;
        try {
            n = e.indexOf(t);
        } catch (o) {
            for (var a = 0; a < e.length; a++) e[a] === t && (n = a);
        } finally {
            return n;
        }
    }, t.itemMatch = function(e, t) {
        var n = !1;
        try {
            if (!this.isArray(e)) return n;
            n = e.some(function(e) {
                return e && e.length > 0 && t.indexOf(e) !== -1;
            });
        } catch (o) {
            for (var a = 0; a < e.length; a++) if (t.indexOf(e[a]) !== -1) {
                n = !0;
                break;
            }
        }
        return n;
    }, t.isArray = n, t.flat = a, t.find = o;
}, function(e, t, n) {
    "use strict";
    function a() {
        return i || (i = document.getElementById("beacon-aplus") || document.getElementById("tb-beacon-aplus")), 
        i;
    }
    function o(e) {
        var t = a(), n = s.tryToGetAttribute(t, "cspx");
        e && n && (e.nonce = n);
    }
    var r, i, s = n(29), u = n(3), c = n(10);
    t.getCurrentNode = a, t.addScript = function(e, t, n) {
        var i = "script", s = document.createElement(i);
        s.type = "text/javascript", s.async = !0;
        var c = a(), l = c && c.hasAttribute("crossorigin");
        l && (s.crossOrigin = "anonymous");
        var p = u.HTTPS === location.protocol ? t || e : e;
        0 === p.indexOf("//") && (p = u.HTTPS + p), s.src = p, n && (s.id = n), o(s);
        var f = document.getElementsByTagName(i)[0];
        r = r || document.getElementsByTagName("head")[0], f ? f.parentNode.insertBefore(s, f) : r && r.appendChild(s);
    }, t.loadScript = function(e, t) {
        function n(e) {
            a.onreadystatechange = a.onload = a.onerror = null, a = null, t(e);
        }
        var a = document.createElement("script");
        if (r = r || document.getElementsByTagName("head")[0], a.async = !0, "onload" in a) a.onload = n; else {
            var i = function() {
                /loaded|complete/.test(a.readyState) && n();
            };
            a.onreadystatechange = i, i();
        }
        if (a.onerror = function(e) {
            n(e);
        }, a.src = e, o(a), aplus.globalConfig.isUM) {
            a.id = "aplus-setting", a.type = "text/javascript", a.charset = "utf-8";
            var s = document.getElementsByTagName("script");
            s && s.length > 0 && c(s, function(e) {
                e && "aplus-setting" === e.id && r.removeChild(e);
            });
        }
        r.appendChild(a);
    }, t.isTouch = function() {
        return "ontouchend" in document.createElement("div");
    };
}, function(e, t) {
    "use strict";
    e.exports = function(e, t) {
        if (Object && Object.keys) for (var n = Object.keys(e), a = n.length, o = 0; o < a; o++) {
            var r = n[o];
            t(r, e[r]);
        } else for (var i in e) t(i, e[i]);
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        var e = aplus._$ || {}, t = e.meta_info || {}, n = t.aplus_ctap || {};
        return n && "function" == typeof n.on ? n : null;
    }
    function o(e, t) {
        var n = a();
        n ? n.on(e, t) : s.on(e, t);
    }
    function r(e, t) {
        var n = a();
        n ? n.un(e, t) : s.un(e, t);
    }
    var i = !!document.attachEvent, s = n(15);
    t.on = function(e, t, n) {
        return "tap" === t ? void o(e, n) : void (i ? e.attachEvent(t, n) : e.addEventListener(t, n));
    }, t.un = function(e, t, n) {
        return "tap" === t ? void r(e, n) : void (i ? e.detachEvent(t, n) : e.removeEventListener(t, n));
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t, n) {
        var a = t.hash_value, o = i.getGoldlogVal(n) || {};
        if (o.hash_value || (o.hash_value = {}), o.hash_value[e] || (o.hash_value[e] = r.Map ? new r.Map() : {}), 
        r.Map) {
            var s = o.hash_value[e].get(a);
            s ? ++s : s = 1, o.hash_value[e].set(a, s);
        } else o.hash_value[e][a] ? ++o.hash_value[e][a] : o.hash_value[e][a] = 1;
        i.setGoldlogVal(n, o);
    }
    var o = document, r = window, i = n(2), s = n(8), u = n(53), c = n(10), l = n(50), p = n(54), f = n(55), g = function(e) {
        return "[object Array]" === Object.prototype.toString.call(e);
    };
    t.isArray = g, t.getXPath = function(e) {
        var t, n, a, r, i, s, u = o.getElementsByTagName("*");
        for (t = []; e && 1 == e.nodeType; e = e.parentNode) if (e.id) {
            for (s = e.id, r = 0, n = 0; n < u.length; n++) if (i = u[n], i.id && i.id == s) {
                r++;
                break;
            }
            if (t.unshift(e.tagName.toLowerCase() + '[@id="' + s + '"]'), 1 == r) return t.unshift("/"), 
            t.join("/");
        } else {
            for (n = 1, a = e.previousSibling; a; a = a.previousSibling) a.tagName == e.tagName && n++;
            t.unshift(e.tagName.toLowerCase() + "[" + n + "]");
        }
        return t.length ? "/" + t.join("/") : null;
    };
    var d = function(e, t) {
        if (t && 0 !== t.length || (t = []), e && e.length > 0) for (var n = 0; n < e.length; n++) t.push(e[n]);
        return t;
    };
    t.nodelistToArray = d, t.getElements = function(e, t) {
        var n = t || o, a = [];
        if (n.querySelectorAll) a = d(n.querySelectorAll(e.elementSelector) || []); else for (var r = document.getElementsByTagName(e.tag), i = e.filter.split("="), s = i.length > 0 ? i[0].trim() : "", u = i.length > 1 ? i[1].trim() : "", c = 0; c < r.length; c++) {
            var l = r[c], p = l.getAttribute(s), f = l.hasAttribute(s);
            !f || u && u !== p || a.push(l);
        }
        return a;
    };
    var _ = function() {
        return /aplusDebug=true/.test(location.search);
    }, h = _();
    t.IS_DEBUG = h, t.fillPropsData = function(e, t, n) {
        n || (n = {});
        try {
            var a = e.props || [];
            if (a && g(a) && a.length > 0) for (var o = 0; o < a.length; o++) if (t && t.getAttribute) {
                var r = a[o], i = t.getAttribute(r);
                if (void 0 !== typeof i && null !== i && "" !== i) {
                    var u = r.toLowerCase().replace(/^data-/, "");
                    aplus.globalConfig && aplus.globalConfig.isUM ? n[u] = i : n[u] = encodeURIComponent(i);
                }
            }
        } catch (e) {
            s().w(e && e.message);
        }
        return n;
    };
    var m = function(e, t, n) {
        n || (n = {});
        try {
            var a = e.filter || "", o = a.split("=");
            if (g(o) && o[1]) n[o[0]] = o[1]; else if (o[0] && t && t.getAttribute) {
                var r = t.getAttribute(o[0]) || "";
                void 0 !== typeof r && null !== r && "" !== r && (n[o[0]] = r);
            }
        } catch (e) {
            s().w(e && e.message);
        }
        return n;
    };
    t.fillFilterData = m;
    var v = "data-tracker-params";
    t.getDataTrackerParams = function(e) {
        var t = {};
        try {
            var n = m({
                filter: v
            }, e);
            n && n[v] && (t = JSON.parse(n[v]));
        } catch (e) {}
        return t;
    }, t.fillSpmData = function(e, t, n) {
        n || (n = {});
        var a, o, r;
        return a = e && e.spmB ? e.spmB : document.body.dataset && document.body.dataset.pagename, 
        o = e && e.spmC ? e.spmC : t.parentNode && t.parentNode.dataset && t.parentNode.dataset.spmc, 
        r = e && e.spmD ? e.spmD : t.dataset && t.dataset.spmd, t.dataset && t.dataset.aplusVtPos && (r += "_" + t.dataset.aplusVtPos), 
        a && (n.spmB = a), o && (n.spmC = o), r && (n.spmD = r), n;
    };
    var y = function(e) {
        return !!/^POST|GET$/i.test(e);
    };
    t.isMethod = y;
    var b = function(e) {
        var t = !!/^\d+$/.test(e);
        return !!(t && parseInt(e) > 0);
    };
    t.isPkgSize = b, t.filterExpConfigRequestCfg = function(e) {
        var t = f.getDefaultRequestCfg() || {};
        try {
            var n = e || {};
            y(n.method) && (t.method = n.method), b(n.pkgSize) && (t.pkgSize = parseInt(n.pkgSize));
        } catch (e) {
            s().w(e && e.message);
        }
        return t;
    };
    var w = function(e) {
        var t = e.split("&"), n = {};
        return t.length > 0 && c(t, function(e) {
            var t = e.split("=");
            2 === t.length && (n[t[0]] = p.tryToEncodeURIComponent(t[1]));
        }), n;
    };
    t.autoUserFnHandler = function(e, t, n, a, o) {
        var r = {
            userdata: {},
            spm: "",
            scm: ""
        };
        try {
            var i = e(t, n, a, o);
            i && ("string" == typeof i ? r.userdata = w(i) : "object" == typeof i && "object" == typeof i.userdata && (l(i.userdata, function(e, t) {
                aplus.globalConfig && aplus.globalConfig.isUM ? r.userdata[e] = t : r.userdata[e] = p.tryToEncodeURIComponent(t);
            }), r.spm = i.spm, r.scm = i.scm));
        } catch (e) {
            s().w(e);
        }
        return r;
    };
    var A = function(e, t) {
        var n = "";
        if (e && t) {
            var a = [ e.getAttribute(t.filter) ], o = t.props || [];
            if (o) for (var r = 0; r < o.length; r++) a.push(e.getAttribute(o[r]));
            n = a.join("_");
        }
        return n;
    }, E = function(e) {
        var t = e.getAttribute("data-spm-anchor-id");
        if (t) {
            var n = t.split(".");
            return {
                a: n[0],
                b: n[1],
                c: n[2],
                d: n[3],
                e: n[4]
            };
        }
    };
    t.getSpmObj = E, t.getElementHash = function(e, t) {
        var n = {};
        "aplus_webvt" !== e.source && (n = E(t.ele) || (window.g_SPM ? window.g_SPM.getParam(t.ele) : {}));
        var a = "", o = "x" + t.index;
        if (n.a && n.b && n.c && n.d) {
            var r = /^i/.test(n.d) ? o : n.d;
            a = n.a + "_" + n.b + "_" + n.c + "_" + r, n.e && (a += "_" + n.e);
        } else a = o, aplus.pvid && (a += aplus.pvid);
        t.ignore_attr || (a += e.logkey + "_", a += e.elementSelector + "_", a += A(t.ele, e));
        var i = o + "_" + u.hash(a);
        return i;
    }, t.filterUnloadAttr = function(e) {
        return e && (e = e.replace(/(href|style|data-spm-anchor-id)=[\'|\"][\w|\W|\.]+[\'|\"]/, ""), 
        e = e.replace(/\s\>/g, ">"), e = e.replace(new RegExp(f.DATA_APLUS_AE_KEY + "=[\\'|\\\"]\\w+[\\'|\\\"]"), ""), 
        e = e.replace(new RegExp(f.DATA_APLUS_AC_KEY + "=[\\'|\\\"]\\w+[\\'|\\\"]"), "")), 
        e;
    };
    var S = function(e, t) {
        for (var n, a = 0, o = e.length; a < o; ) {
            var r = e[a] || {};
            if (r.hash_value === t.hash_value) return e[a] = t, n = !0, e;
            a++;
        }
        return n || e.push(t), e;
    }, T = function(e, t, n, o) {
        if (n || (n = "ADD"), e && "object" == typeof t) {
            var r = i.getGoldlogVal(o) || {}, s = r._acHashMap || {}, u = s[e] || [], c = function() {
                for (var e = 0, n = u.length; e < n; ) {
                    var a = u[e] || {};
                    if (a.hash_value === t.hash_value) return e;
                    e++;
                }
                return -1;
            }, l = c();
            "ADD" === n && l === -1 ? (u.push(t), a(e, t, o)) : "CLEAR" === n && l > -1 ? u.splice(l, 1) : "UPDATE" === n && (u = S(u, t)), 
            s[e] = u, r._acHashMap = s, i.setGoldlogVal(o, r);
        }
    };
    t.updateExpHashMap = function(e, t, n) {
        T(e, t, n, "_aplus_auto_exp");
    }, t.updateClkHashMap = function(e, t, n) {
        T(e, t, n, "_aplus_ac");
    };
    var P = function() {
        return new Date().getTime();
    };
    t.throttle = function(e, t, n) {
        var a, o, r, i, s = 0;
        n || (n = {});
        var u = function() {
            s = n.leading === !1 ? 0 : P(), a = null, i = e.apply(o, r), a || (o = r = null);
        }, c = function() {
            var c = P();
            s || n.leading !== !1 || (s = c);
            var l = t - (c - s);
            return o = this, r = arguments, l <= 0 || l > t ? (a && (clearTimeout(a), a = null), 
            s = c, i = e.apply(o, r), a || (o = r = null)) : a || n.trailing === !1 || (a = setTimeout(u, l)), 
            i;
        };
        return c.cancel = function() {
            clearTimeout(a), s = 0, a = o = r = null;
        }, c;
    }, t.checkIsInHashMap = function(e) {
        var t = i.getGoldlogVal(e.aplusKey) || {}, n = t.hash_value || {}, a = n[e.logkey] || (r.Map ? new r.Map() : {}), o = a && a.get ? a.get(e.hash_value) : a[e.hash_value];
        if (o > 1) return !0;
        for (var s = t._acHashMap || {}, u = s[e.logkey] || [], c = u.length, l = 0; l < c; l++) if (u[l].hash_value === e.hash_value) return !0;
        return !1;
    }, t.setRecordSuccess = function(e, t) {
        try {
            var n = e ? e.element : {}, a = e.hash_value || "";
            n && n.setAttribute && n.setAttribute(t, a);
        } catch (e) {}
    };
}, function(e, t) {
    "use strict";
    t.hash = function(e, t) {
        var n, a, o = 1315423911, r = t || o;
        for (n = e.length - 1; n >= 0; n--) a = e.charCodeAt(n), r ^= (r << 5) + a + (r >> 2);
        var i = (2147483647 & r).toString(16);
        return i;
    };
}, function(e, t) {
    "use strict";
    t.tryToEncodeURIComponent = function(e) {
        var t = e || "";
        if (e) try {
            t = encodeURIComponent(decodeURIComponent(e));
        } catch (e) {}
        return t;
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        return aplus && aplus.getMetaInfo ? aplus.getMetaInfo(e) : r.getMetaCnt(e);
    }
    var o = n(48), r = n(28), i = n(8);
    t.DATA_APLUS_AE_KEY = "data-aplus-ae", t.DATA_APLUS_AC_KEY = "data-aplus-clk", t.DATA_APLUS_SPM_ANCHOR_ID_KEY = "data-spm-anchor-id", 
    t.DATA_APLUS_VT_ITEM_INDEX_KEY = "data-aplus-vt-pos", t.LOOP_TIME = 1e3, t.getDefaultRequestCfg = function() {
        return {
            method: "POST",
            pkgSize: 10
        };
    };
    var s = function(e) {
        var t = e;
        try {
            var n = a("aplus-auto-exp-visible");
            n && (t = parseFloat(n)), t <= 0 && (t = e);
        } catch (n) {
            t = e;
        } finally {
            return t;
        }
    };
    t.AUTO_AT_VIEW_RATE = s(.3);
    var u = function(e) {
        var t = e;
        try {
            var n = a("aplus-auto-exp-duration"), o = parseInt(n);
            o + "" != "NaN" && (t = o);
        } catch (e) {} finally {
            return t;
        }
    };
    t.EXP_DURATION = u(300);
    var c = function(e, t) {
        var n, r = [], s = [];
        try {
            n = t || a(e);
            var u = [];
            if (n && "string" == typeof n) try {
                u = JSON.parse(n);
            } catch (e) {
                u = JSON.parse(n.replace(/'/g, '"'));
            } else "object" == typeof n && n.constructor === Array && (u = n);
            if (u && u.constructor === Array) for (var c = 0; c < u.length; c++) {
                var l = u[c] || {}, p = l.logkey || "", f = l.tag ? l.tag : "", g = l.filter, d = l.cssSelector, _ = d || f && g;
                if (!p || !_) throw new Error("meta " + e + " config error, " + JSON.stringify(l));
                g = "string" == typeof g ? g.split("=") : [];
                var h = f;
                if (g.length >= 2 ? h += "[" + g.shift() + '="' + decodeURIComponent(g.join("")) + '"]' : 1 == g.length && g[0] && (h += "[" + decodeURIComponent(g[0]) + "]"), 
                d && (h += d), l.elementSelector = h, o.indexof(s, h) > -1) throw new Error("meta " + e + " config error, tag_filter_cssSelector " + h + " repeated");
                s.push(h), r.push(l);
            }
        } catch (e) {
            i().w(e);
        } finally {
            return r;
        }
    };
    t.getAutoExpConfig = function(e) {
        return c("aplus-auto-exp", e) || [];
    }, t.getAutoExpUserFn = function() {
        var e = a("aplus-auto-exp-userfn");
        if (e) {
            var t = window[e] || e;
            if ("function" == typeof t) return t;
        }
        return null;
    }, t.isThrottleWatchDom = function() {
        var e = !1;
        try {
            e = "throttle" === a("aplus-auto-exp-watchdom");
        } catch (e) {}
        return e;
    }, t.getAutoClkConfig = function(e) {
        return c("aplus-auto-clk", e) || [];
    }, t.getAutoClkUserFn = function() {
        var e = a("aplus-auto-clk-userfn");
        if (e) {
            var t = window[e] || e;
            if ("function" == typeof t) return t;
        }
        return null;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(21), o = n(46), r = n(8), i = n(51), s = n(52), u = n(55), c = window, l = document, p = a.extend({
        eachElements: function(e, t) {
            for (var n = t.logkey || "", a = 0; a < e.length; a++) {
                var o = e[a];
                t._pos_id && !o.getAttribute("data-aplus-pos-id") && o.setAttribute("data-aplus-pos-id", t._pos_id);
                var r = o.getAttribute(u.DATA_APLUS_AC_KEY);
                if (!(r && r.indexOf("_") > 0)) {
                    isNaN(parseInt(r)) && (r = aplus._aplus_ac.elementSelectorSizeMap[t.elementSelector]++, 
                    o.setAttribute(u.DATA_APLUS_AC_KEY, r)), !aplus.globalConfig.isAli && t.spmB && t.spmC && t.spmD && (o.setAttribute(u.DATA_APLUS_SPM_ANCHOR_ID_KEY, [ t.spmB, t.spmC, t.spmD + "_" + (a + 1) ].join(".")), 
                    o.setAttribute(u.DATA_APLUS_VT_ITEM_INDEX_KEY, "" + (a + 1)));
                    var i = s.getElementHash(t, {
                        ignore_attr: !1,
                        index: r,
                        ele: o
                    });
                    if (!s.checkIsInHashMap({
                        logkey: n,
                        hash_value: i,
                        aplusKey: "_aplus_ac"
                    })) {
                        var c = {
                            clkConfig: t,
                            hash_value: i,
                            element: o,
                            status: 0,
                            elementSelector: t.elementSelector
                        };
                        s.updateClkHashMap(n, c, "ADD"), s.setRecordSuccess(c, u.DATA_APLUS_AC_KEY);
                    }
                }
            }
        },
        handler_dom_change: function() {
            for (var e = this, t = e.autoClkConfig || [], n = 0; n < t.length; n++) {
                var a = t[n];
                aplus._aplus_ac.elementSelectorSizeMap[a.elementSelector] || (aplus._aplus_ac.elementSelectorSizeMap[a.elementSelector] = 1);
                var o = s.getElements(a, l);
                e.eachElements(o, a);
            }
        },
        throttle_handler_dom_change: s.throttle(function() {
            this.handler_dom_change();
        }, 200),
        init_observer: function(e, t) {
            var n = new e(function() {
                o.wrap(function() {
                    var e = aplus._aplus_ac || {};
                    ++e.observer_times, t();
                }, "init_observer_init_elements");
            }), a = {
                attributes: !0,
                childList: !0,
                characterData: !0,
                subtree: !0
            };
            n.observe(l.body, a), s.IS_DEBUG && r().w("aplus_ac init MutationObserver success!"), 
            this._observer = n;
        },
        init_watch_dom: function() {
            var e = this, t = aplus._aplus_ac || {};
            e._loop_observer = setTimeout(function() {
                "blur" !== t.current_win_status ? (s.IS_DEBUG && r().w("watch_dom in ac LOOP_TIME is " + u.LOOP_TIME + "ms total: " + ++t.watch_times), 
                e.throttle_handler_dom_change(), e.init_watch_dom()) : t.watch_dom_running = !1;
            }, u.LOOP_TIME);
        },
        onFocusHandler: function() {
            var e = this, t = aplus._aplus_ac || {};
            t.current_win_status = "focus", t.watch_dom_running || e.init_watch_dom();
        },
        onBlurHandler: function() {
            var e = aplus._aplus_ac || {};
            e.current_win_status = "blur";
        },
        onVisibilityChange: function() {
            var e = this;
            "visible" === l.visibilityState ? e.onFocusHandler() : "hidden" === l.visibilityState && e.onBlurHandler();
        },
        addAllListener: function() {
            var e = this, t = aplus._aplus_ac || {};
            t.watch_times = 0, t.watch_dom_running = !0, e.init_watch_dom(), c.WindVane && l.addEventListener && (i.on(l, "WV.Event.APP.Active", e.onFocusHandler, !1), 
            i.on(l, "WV.Event.APP.Background", e.onBlurHandler, !1)), "hidden" in l ? i.on(c, "visibilitychange", e.onVisibilityChange) : (i.on(c, "blur", e.onBlurHandler), 
            i.on(c, "focus", e.onFocusHandler));
        },
        removeAllListener: function() {
            var e = this;
            c.WindVane && l.removeEventListener && (i.un(l, "WV.Event.APP.Active", e.onFocusHandler, !1), 
            i.un(l, "WV.Event.APP.Background", e.onBlurHandler, !1)), "hidden" in l ? i.un(c, "visibilitychange", e.onVisibilityChange) : (i.un(c, "blur", e.onBlurHandler), 
            i.un(c, "focus", e.onFocusHandler));
        },
        init: function() {
            var e = this, t = aplus._aplus_ac || {};
            e.throttle_handler_dom_change();
            var n = c.MutationObserver || c.WebKitMutationObserver || c.MozMutationObserver;
            n ? (t.observer_times = 0, e.init_observer(n, function() {
                e.throttle_handler_dom_change();
            })) : e.addAllListener();
        },
        clearDom: function(e, t) {
            var n = this.autoClkConfig || [];
            if (t && "appendMetaInfo" !== t.from) for (var a = 0; a < n.length; a++) try {
                for (var o = n[a].elementSelector, r = l.querySelectorAll(o), i = 0; i < r.length; i++) r[i].setAttribute(u.DATA_APLUS_AC_KEY, "");
            } catch (e) {}
            this.autoClkConfig = e && e.autoClkConfig;
        },
        clear: function(e) {
            if (!e || "appendMetaInfo" !== e.from) {
                var t = aplus._aplus_ac || {};
                t._acHashMap && (t._acHashMap = {}), t.hash_value && (t.hash_value = {}), aplus._aplus_ac = t, 
                this._loop_observer && (clearTimeout(this._loop_observer), this._loop_observer = null), 
                this._observer ? this._observer.disconnect() : this.removeAllListener();
            }
        },
        reset: function(e, t) {
            this.clearDom(e, t), this.init();
        }
    });
    e.exports = p;
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(58)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        r = n(59), i = n(window.IntersectionObserver ? 61 : 63), s = n(64), u = n(55);
    }
    function o(e) {
        var t, n = window.aplus || (window.aplus = {}), a = !1, o = !1, f = function(e) {
            o || (o = e, a || (c.wrap(function() {
                t = u.getAutoExpConfig() || [], p().w("aplus-auto-exp metaValue init: " + JSON.stringify(t));
                var e;
                t && t.length > 0 && (s.watch_data_change(), i.watch_exposure_change(t), e = r.create({
                    isThrottleWatch: u.isThrottleWatchDom(),
                    autoExpConfig: t
                }), e.init({
                    type: "init"
                })), n.aplus_pubsub.subscribe("setMetaInfo", function(n, a, o) {
                    if ("aplus-auto-exp" === n) {
                        p().w("aplus-auto-exp metaVaue change: " + JSON.stringify(a));
                        var c = u.getAutoExpConfig(a);
                        if (JSON.stringify(c) === JSON.stringify(t)) return;
                        if (t = c, s.clear(), o || (o = {
                            from: "setMetaInfo"
                        }), i.clear(t, o), e && e.clear(o), a && t && t.length > 0) {
                            s.watch_data_change(), i.watch_exposure_change(t);
                            var l = {
                                isThrottleWatch: u.isThrottleWatchDom(),
                                autoExpConfig: t
                            };
                            e ? e.reset(l, o) : (e = r.create(l), e.init({
                                type: "init"
                            }));
                        }
                    }
                });
            }, "do_init"), a = !0));
        };
        setTimeout(function() {
            a || p().w("aplus_auto_exp_init failed! please check whether aplusJs is loaded correctly!");
        }, 5e3);
        var g = n._$ || {}, d = window.g_SPM || {};
        "complete" === g.status && d.spm && f();
        var _ = window.aplus_queue || (window.aplus_queue = []);
        _.push({
            action: l.SUBSCRIBE,
            arguments: [ "aplusReady", function(e) {
                "complete" === e && f("aplusReady");
            } ]
        }), "function" == typeof e && e();
    }
    var r, i, s, u, c = n(46), l = n(3), p = n(8);
    e.exports = function() {
        var e = window.aplus || window.goldlog || (window.aplus = {});
        e._aplus_auto_exp || (e._aplus_auto_exp = {
            tags: {},
            status: "init",
            exp_times: 0,
            elementSelectorSizeMap: {}
        }, a(), o(function() {
            e._aplus_auto_exp.status = "complete";
        }));
    };
}, function(e, t, n) {
    "use strict";
    var a = n(21), o = n(46), r = n(8), i = n(51), s = n(60), u = n(52), c = n(55), l = window, p = document, f = a.extend({
        eachElements: function(e, t) {
            for (var n = t.logkey || "", a = 0; a < e.length; a++) {
                var o = e[a], r = o.getAttribute(c.DATA_APLUS_AE_KEY);
                if (!(r && r.indexOf("_") > 0)) {
                    isNaN(parseInt(r)) && (r = aplus._aplus_auto_exp.elementSelectorSizeMap[t.elementSelector]++, 
                    o.setAttribute(c.DATA_APLUS_AE_KEY, r)), !aplus.globalConfig.isAli && t.spmB && t.spmC && t.spmD && (o.setAttribute(c.DATA_APLUS_SPM_ANCHOR_ID_KEY, [ t.spmB, t.spmC, t.spmD + "_" + (a + 1) ].join(".")), 
                    o.setAttribute(c.DATA_APLUS_VT_ITEM_INDEX_KEY, "" + (a + 1)));
                    var i = u.getElementHash(t, {
                        ignore_attr: !1,
                        index: r,
                        ele: o
                    }), l = s.checkIsRecord(o, i, c.DATA_APLUS_AE_KEY), p = u.checkIsInHashMap({
                        logkey: n,
                        hash_value: i,
                        aplusKey: "_aplus_auto_exp"
                    });
                    if (!l && !p) {
                        var f = {
                            expConfig: t,
                            hash_value: i,
                            element: o,
                            status: 0,
                            elementSelector: t.elementSelector
                        };
                        u.updateExpHashMap(n, f, "ADD");
                    }
                }
            }
        },
        handler_dom_change: function(e, t) {
            try {
                for (var n = this.autoExpConfig || [], a = 0; a < n.length; a++) {
                    var o = n[a], i = u.getElements(o, p);
                    aplus._aplus_auto_exp.elementSelectorSizeMap[o.elementSelector] || (aplus._aplus_auto_exp.elementSelectorSizeMap[o.elementSelector] = 1), 
                    this.eachElements(i, o);
                }
                aplus.aplus_pubsub.publish("APLUS_AE_DOM_CHANGE", t || {});
            } catch (e) {
                r().w(e && e.message);
            }
        },
        throttle_handler_dom_change: u.throttle(function(e, t) {
            this.handler_dom_change(e, t);
        }, 200),
        init_watch_dom: function() {
            var e = this, t = aplus._aplus_auto_exp || {};
            e._loop_observer = setTimeout(function() {
                "blur" !== t.current_win_status ? (r().w("watch_dom in ae LOOP_TIME is " + c.LOOP_TIME + "ms total: " + ++t.watch_times), 
                e.handler_dom_change(null, {
                    type: "polling"
                }), e.init_watch_dom()) : t.watch_dom_running = !1;
            }, c.LOOP_TIME);
        },
        onFocusHandler: function() {
            var e = this, t = aplus._aplus_auto_exp || {};
            t.current_win_status = "focus", t.watch_dom_running || e.init_watch_dom();
        },
        onBlurHandler: function() {
            var e = aplus._aplus_auto_exp || {};
            e.current_win_status = "blur";
        },
        onVisibilityChange: function() {
            var e = this;
            "visible" === p.visibilityState ? e.onFocusHandler() : "hidden" === p.visibilityState && e.onBlurHandler();
        },
        addAllListener: function() {
            var e = this, t = aplus._aplus_auto_exp || {};
            t.watch_times = 0, t.watch_dom_running = !0, e.init_watch_dom(), l.WindVane && p.addEventListener && (i.on(p, "WV.Event.APP.Active", e.onFocusHandler, !1), 
            i.on(p, "WV.Event.APP.Background", e.onBlurHandler, !1)), "hidden" in p ? i.on(l, "visibilitychange", e.onVisibilityChange) : (i.on(l, "blur", e.onBlurHandler), 
            i.on(l, "focus", e.onFocusHandler));
        },
        removeAllListener: function() {
            var e = this;
            l.WindVane && p.removeEventListener && (i.un(p, "WV.Event.APP.Active", e.onFocusHandler, !1), 
            i.un(p, "WV.Event.APP.Background", e.onBlurHandler, !1)), "hidden" in p ? i.un(l, "visibilitychange", e.onVisibilityChange) : (i.un(l, "blur", e.onBlurHandler), 
            i.un(l, "focus", e.onFocusHandler));
        },
        init_observer: function(e, t) {
            var n = [ "IFRAME", "BODY", "OBJECT", "SCRIPT", "NOSCRIPT", "LINK", "STYLE", "#comment" ], a = [ "class", "style" ], i = function(e) {
                return "characterData" === e.type ? [ e.target ] : "attributes" === e.type && a.indexOf(e.attributeName) > -1 ? [ e.target ] : "childList" !== e.type ? [] : void 0;
            }, s = function(e, a) {
                if (e && e.length > 0) for (var r = 0; r < e.length; r++) {
                    var i = e[r] || {}, s = i.nodeName, u = aplus._aplus_auto_exp.tags || {};
                    u[s] || (u[s] = 0), u[s]++, aplus._aplus_auto_exp.tags = u, n.indexOf(s) === -1 && o.wrap(function() {
                        var e = aplus._aplus_auto_exp || {};
                        ++e.observer_times;
                        var n = a.attributeName;
                        t(i, {
                            type: a.type + (n ? "_" + n : "")
                        });
                    }, "init_observer_init_elements");
                }
            };
            this._observer || (this._observer = new e(function(e) {
                if (e && e.length > 0) for (var t = 0; t < e.length; t++) {
                    var n = e[t] || {}, a = u.nodelistToArray(n.addedNodes || []);
                    a = u.nodelistToArray(i(n), a), s(a, n);
                }
            }));
            var c = {
                attributes: !0,
                childList: !0,
                characterData: !0,
                subtree: !0
            };
            this._observer.observe(p.body, c), u.IS_DEBUG && r().w("aplus_auto_exp init MutationObserver success!");
        },
        init: function(e) {
            var t = this, n = aplus._aplus_auto_exp || {};
            e && "reset" !== e.type && !n.hash_value && (n.hash_value = {}), t.handler_dom_change(null, {
                type: "aplus_init"
            });
            var a = l.MutationObserver || l.WebKitMutationObserver || l.MozMutationObserver;
            a ? (n.observer_times = 0, t.init_observer(a, function(e, n) {
                var a = e && e.parentElement ? e.parentElement : e;
                t.throttle_handler_dom_change(a, n);
            })) : t.addAllListener();
        },
        clear: function(e) {
            if (!e || "appendMetaInfo" !== e.from) {
                var t = aplus._aplus_auto_exp || {};
                t._acHashMap && (t._acHashMap = {}), t.hash_value && (t.hash_value = {}), aplus._aplus_auto_exp = t, 
                this._loop_observer && (clearTimeout(this._loop_observer), this._loop_observer = null), 
                this._observer ? (this._observer.takeRecords(), this._observer.disconnect()) : this.removeAllListener();
            }
        },
        clearDom: function(e, t) {
            var n = this.autoExpConfig || [];
            if (t && "appendMetaInfo" !== t.from) for (var a = 0; a < n.length; a++) try {
                for (var o = n[a].elementSelector, r = p.querySelectorAll(o), i = 0; i < r.length; i++) r[i].setAttribute(c.DATA_APLUS_AE_KEY, "");
            } catch (e) {}
            this.autoExpConfig = e && e.autoExpConfig ? e.autoExpConfig : [];
        },
        reset: function(e, t) {
            this.clearDom(e, t), this.init({
                type: "reset"
            });
        }
    });
    e.exports = f;
}, function(e, t) {
    "use strict";
    var n = document, a = function(e, t) {
        return t.x >= e.pLeftTop[0] && t.x <= e.pRightBottom[0] && t.y >= e.pLeftTop[1] && t.y <= e.pRightBottom[1];
    }, o = function(e, t) {
        var n = 0, o = a(e, t), r = a(e, {
            x: t.x + t.width,
            y: t.y
        }), i = a(e, {
            x: t.x,
            y: t.y + t.height
        }), s = a(e, {
            x: t.x + t.width,
            y: t.y + t.height
        }), u = function() {
            var e = 0;
            return o && s && (e = t.size / t.size), e;
        }, c = function() {
            var n = 0, a = 0;
            return o && r && !i && !s ? (n = t.width, a = e.pLeftBottom[1] - t.y) : !o && r && !i && s ? (n = e.pLeftTop[0] - t.x, 
            a = t.y) : !o && !r && i && s ? (n = t.width, a = t.height - Math.abs(e.pLeftTop[1] - t.y)) : o && !r && i && !s && (n = e.pRightTop[0] - t.x, 
            a = t.height), t.size > 0 ? Math.abs(n * a) / t.size : 0;
        }, l = function() {
            var n = 0, a = 0;
            return !o || r || i || s ? o || !r || i || s ? o || r || !i || s ? o || r || i || !s || (n = e.pLeftTop[0] - t.x, 
            a = e.pLeftTop[1] - t.y) : (n = e.pRightTop[0] - t.x, a = e.pRightTop[1] - t.y) : (n = e.pLeftBottom[0] - t.x, 
            a = e.pLeftBottom[1] - t.y) : (n = e.pRightBottom[0] - t.x, a = e.pRightBottom[1] - t.y), 
            t.size > 0 ? Math.abs(n * a) / t.size : 0;
        };
        return n = u(), n > 0 ? n : (n = c(), n > 0 ? n : (n = l(), n > 0 ? n : n));
    };
    t.wrapViewabilityRate = function(e, t, n) {
        var a = 0;
        if (e) for (var r = 0; r < e.length; r++) if (a = o(e[r], t), a < n) return !1;
        return a;
    };
    var r = function(e) {
        return "number" == typeof e && NaN !== e;
    }, i = function(e) {
        var t = {};
        return e && ("function" == typeof e.getBoundingClientRect && (t = e.getBoundingClientRect() || {}), 
        r(t.x) || r(t.left) && (t.x = t.left), r(t.y) || r(t.top) && (t.y = t.top), r(t.width) || (t.width = e.offsetWidth), 
        r(t.height) || (t.height = e.offsetHeight)), t;
    };
    t.getElementPosition = i, t.getWinPositions = function(e) {
        var t = [];
        if (e && "function" == typeof document.querySelector) {
            var a = document.querySelector(e);
            if (a) {
                var o = i(a) || {};
                r(o.x) && r(o.y) && r(o.width) && r(o.height) && t.push({
                    pLeftTop: [ o.x, o.y ],
                    pRightTop: [ o.x + o.width, o.y ],
                    pLeftBottom: [ o.x, o.y + o.height ],
                    pRightBottom: [ o.x + o.width, o.y + o.height ]
                });
            }
        }
        var s = n.documentElement, u = n.body, c = s.clientWidth || u.offsetWidth || 0, l = s.clientHeight || u.offsetHeight || 0;
        return t.push({
            pLeftTop: [ 0, 0 ],
            pRightTop: [ c, 0 ],
            pLeftBottom: [ 0, l ],
            pRightBottom: [ c, l ]
        }), t;
    }, t.checkIsRecord = function(e, t, n) {
        var a;
        try {
            if (e && e.getAttribute) {
                var o = e.getAttribute(n) || "";
                a = t ? o === t : !!o;
            }
        } catch (e) {}
        return a;
    }, t.getViewabilityRateInWindow = function(e, t, n) {
        var a = 0;
        if (e) for (var o = 0; o < e.length; o++) if (a = t / e[o].size, a >= n) return a;
        return a;
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t, n) {
        var a = p.getWinPositions(), o = 0, r = u.getGoldlogVal("_aplus_auto_exp") || {}, i = r._acHashMap || {};
        for (var c in i) for (var l = i[c] || [], h = 0; h < l.length; h++) {
            var m = l[h] || {};
            m.eventType = "IObserver";
            var v = !!n || m.element === t.target;
            if (0 === m.status && m.expConfig && v) {
                var y = t.boundingClientRect || {};
                if (y.width || y.height || (y = t.target.getBoundingClientRect() || {}), y.width && y.height) {
                    m = s.assign(m, y), m.x = y.x || y.left, m.y = y.y || y.top, m.width = y.width, 
                    m.height = y.height, m.size = y.width * y.height;
                    var b = p.checkIsRecord(m.element, m.hash_value, "_aplus_auto_exp"), w = m.width * m.height * t.intersectionRatio, A = p.getViewabilityRateInWindow(a, w, _);
                    if (!b) {
                        var E = t.intersectionRatio >= d;
                        if (E || A >= _) {
                            m.exposureTime = e, m.status = 1;
                            var S = f.getAutoExpUserFn();
                            S && (m.userParams = g.autoUserFnHandler(S, m.element, m.elementSelector, m.expConfig)), 
                            m.viewabilityRate = E ? t.intersectionRatio : A, m.viewability = E ? "intersection" : "fillwindow", 
                            f.EXP_DURATION || (m.status = 2), g.updateExpHashMap(c, m, "UPDATE"), ++o;
                        } else A && g.updateExpHashMap(c, s.assign(l[h], {
                            lastEventType: m.eventType
                        }), "UPDATE");
                    }
                }
            }
        }
        return o;
    }
    function o(e, t) {
        var n = "APLUS_AE_EXPOSURE_CHANGE", o = e && e.type ? e.type : "IObserver", r = new Date().getTime(), i = 0;
        i = t ? l.filterStartExposureSize(r, e) : a(r, e), i > 0 && (f.EXP_DURATION ? setTimeout(function() {
            i = l.filterEndExposureSize(r, o), i > 0 && aplus.aplus_pubsub.publish(n, {
                size: i,
                eventType: o
            });
        }, f.EXP_DURATION) : aplus.aplus_pubsub.publish(n, {
            size: i,
            eventType: o
        }));
    }
    function r(e) {
        var t = {
            root: null,
            rootMargin: "0px",
            threshold: d
        };
        return new m(function(e) {
            c(e, function(e) {
                e.intersectionRatio > 0 && o(e);
            });
        }, s.assign(t, e));
    }
    function i(e) {
        if (m) {
            v.io_base || (v.io_base = r());
            var t = u.getGoldlogVal("_aplus_auto_exp") || {}, n = t._acHashMap || {};
            for (var a in n) for (var o = n[a] || [], i = 0; i < o.length; i++) {
                var s = o[i] || {};
                if (!s.inObserver) {
                    var c, l = "io_v_" + encodeURIComponent(s.positionSelector);
                    s.positionSelector && !v[l] && (c = r({
                        root: document.querySelector(s.positionSelector),
                        expConfig: e
                    }), v[l] = c), c ? c.observe(s.element) : v.io_base.observe(s.element), s.inObserver = !0;
                }
            }
        }
        return !0;
    }
    var s = n(34), u = n(2), c = n(10), l = n(62), p = n(60), f = n(55), g = n(52), d = f.AUTO_AT_VIEW_RATE, _ = f.AUTO_AT_VIEW_RATE_IN_WINDOW, h = window, m = h.IntersectionObserver, v = {};
    aplus._aplus_auto_exp.iobserverMap = v, t.watch_exposure_change = function(e) {
        aplus.aplus_pubsub.subscribe("APLUS_AE_DOM_CHANGE", function() {
            i(e);
        }), i(e);
    }, t.clear = function(e, t) {
        if (t && "appendMetaInfo" !== t.from) for (var n in v) {
            var a = v[n];
            a.disconnect();
        }
    };
}, function(e, t, n) {
    "use strict";
    var a, o = n(2), r = n(60), i = n(55), s = n(52), u = i.AUTO_AT_VIEW_RATE, c = i.AUTO_AT_VIEW_RATE_IN_WINDOW, l = function(e) {
        for (var t; e && "HTML" !== e.tagName; ) {
            t = e.style.display;
            {
                if ("none" === t) break;
                e = e.parentNode;
            }
        }
        return "none" === t;
    };
    t.filterStartExposureSize = function(e, t) {
        var n = 0, a = r.getWinPositions(), p = o.getGoldlogVal("_aplus_auto_exp") || {}, f = p._acHashMap || {};
        for (var g in f) for (var d = f[g] || [], _ = 0; _ < d.length; _++) {
            var h = d[_] || {};
            if (0 === h.status && h.expConfig && !l(h.element)) {
                var m = r.getElementPosition(h.element);
                if (m.width && m.height) {
                    h.x = m.x, h.y = m.y, h.eventType = t, h.width = m.width, h.height = m.height, h.size = m.width * m.height;
                    var v;
                    h.expConfig.positionSelector && (v = r.getWinPositions(h.expConfig.positionSelector));
                    var y = r.wrapViewabilityRate(v || a, h, u), b = y >= u, w = y;
                    v && (w = r.wrapViewabilityRate(a, h, u));
                    var A = h.width * h.height * w, E = r.getViewabilityRateInWindow(a, A, c), S = r.checkIsRecord(h.element, h.hash_value, "_aplus_auto_exp");
                    if ((b || E >= c) && !S) {
                        h.exposureTime = e, h.status = 1;
                        var T = i.getAutoExpUserFn();
                        T && (h.userParams = s.autoUserFnHandler(T, h.element, h.elementSelector, h.expConfig)), 
                        i.EXP_DURATION || (h.viewabilityRate = b ? y : E, h.viewability = b ? "intersection" : "fillwindow", 
                        h.status = 2), s.updateExpHashMap(g, h, "UPDATE"), ++n;
                    }
                }
            }
        }
        return n;
    }, t.filterEndExposureSize = function(e, t) {
        var n = 0;
        a || (a = r.getWinPositions());
        var i = o.getGoldlogVal("_aplus_auto_exp") || {}, c = i._acHashMap || {};
        for (var l in c) for (var p = c[l] || [], f = 0; f < p.length; f++) {
            var g = p[f] || {};
            if (1 === g.status && g.exposureTime === e && g.expConfig) {
                g.eventType = t, g.expConfig.positionSelector && (a = r.getWinPositions(g.expConfig.positionSelector));
                var d = r.wrapViewabilityRate(a, g, u), _ = r.checkIsRecord(g.element, g.hash_value, "_aplus_auto_exp");
                d && !_ ? (g.viewabilityRate = d, g.status = 2, s.updateExpHashMap(l, g, "UPDATE"), 
                ++n) : (g.status = 0, g.exposureTime = "", s.updateExpHashMap(l, g, "UPDATE"));
            }
        }
        return n;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(51), o = n(62), r = n(52), i = n(55), s = function(e) {
        var t = "APLUS_AE_EXPOSURE_CHANGE", n = e && e.type ? e.type : "init", a = new Date().getTime(), r = o.filterStartExposureSize(a, n);
        r > 0 && (i.EXP_DURATION ? setTimeout(function() {
            r = o.filterEndExposureSize(a, n), r > 0 && aplus.aplus_pubsub.publish(t, {
                size: r,
                eventType: n
            });
        }, i.EXP_DURATION) : aplus.aplus_pubsub.publish(t, {
            size: r,
            eventType: n
        }));
    }, u = r.throttle(function(e) {
        s(e);
    }, 100), c = {}, l = function(e, t) {
        if (e && e.forEach && Object.keys && document.querySelector) {
            e.forEach(function(e) {
                e.positionSelector && document.querySelector(e.positionSelector) && (c[e.positionSelector] = !0);
            });
            var n = Object.keys(c);
            n.forEach(function(e) {
                a[t] && a[t](document.querySelector(e), "scroll", function(e) {
                    u(e);
                });
            });
        }
    };
    t.watch_exposure_change = function(e) {
        aplus.aplus_pubsub.subscribe("APLUS_AE_DOM_CHANGE", s), a.on(window, "touchmove", u), 
        a.on(window, "scroll", u), a.on(window, "resize", s), l(e, "on");
    }, t.clear = function(e) {
        a.un(window, "touchmove", u), a.un(window, "scroll", u), a.un(window, "resize", s), 
        l(e, "un");
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t, n) {
        var a = "0";
        if (n) {
            if ("spmc" === e) {
                var o = n.split(".");
                a = o[2] ? o[2] : o[3], /^(\i|\d)[0-9]+$/.test(a) && (a = "0"), n = [ o[0], o[1], a ].join(".");
            }
        } else {
            n = "";
            var r = window.g_SPM || {};
            if ("function" == typeof r.getParam) {
                var i = r.getParam(t);
                "spmc" === e ? (a = t.getAttribute("data-spm") || "0", n = [ i.a, i.b, a ].join(".")) : n = [ i.a, i.b, i.c, i.d ].join(".");
            }
        }
        return n;
    }
    function o() {
        i || (i = !0, aplus.on(window, "beforeunload", function() {
            clearInterval(r);
            for (var e = 0; e < m.length; e++) aplus_queue.push(m[e]);
        }));
    }
    var r, i, s = n(46), u = n(34), c = n(2), l = n(8), p = n(50), f = n(52), g = n(55), d = function() {
        var e = aplus.aplusDebug, t = {}, n = g.getDefaultRequestCfg(), o = c.getGoldlogVal("_aplus_auto_exp") || {}, r = o._acHashMap || {};
        return p(r, function(r, i) {
            for (var s = i || [], c = 0, p = s.length; c < p; c++) {
                var g = s[c] || {};
                if (2 === g.status) {
                    g.status = 3, f.updateExpHashMap(r, g, "UPDATE"), o.exp_times++;
                    var d, _ = g.expConfig || {}, h = goldlog.spm_ab ? goldlog.spm_ab.join(".") : "0.0.0.0", m = a(_.eltype, g.element) || h, v = "";
                    try {
                        var y = new Number(g.viewabilityRate);
                        d = y.toFixed(2);
                    } catch (e) {
                        d = g.viewabilityRate;
                    }
                    var b = {
                        _w: g.width,
                        _h: g.height,
                        _x: g.x,
                        _y: g.y,
                        _rate: d,
                        _viewability: g.viewability
                    };
                    "object" == typeof g.userParams && ("object" == typeof g.userParams.userdata && (b = u.assign(b, g.userParams.userdata)), 
                    g.userParams.spm && (m = a(_.eltype, "", g.userParams.spm)), g.userParams.scm && (v = g.userParams.scm)), 
                    (f.isMethod(_.method) || f.isPkgSize(_.pkgSize)) && (n = f.filterExpConfigRequestCfg(_));
                    var w = {
                        scm: v,
                        spm: m,
                        aplusContentId: ""
                    }, A = f.fillPropsData(_, g.element, b);
                    if (A = f.fillFilterData(_, g.element, b), A = u.assign(A, f.getDataTrackerParams(g.element)), 
                    aplus.globalConfig.isAli) w.exargs = A; else {
                        var E = f.fillSpmData(_, g.element, b);
                        A = u.assign(A, E), w = A;
                    }
                    t[r] || (t[r] = []), t[r].push(w), e && l().w("logkey = " + r + ", params = " + decodeURIComponent(JSON.stringify(w)));
                }
            }
        }), {
            logkeyContainer: t,
            request_cfg: n
        };
    }, _ = function(e) {
        for (var t = [], n = 0, a = e.length; n < a; n++) {
            var o = e[n] || {}, r = {};
            p(o, function(e, t) {
                "element" !== e && (r[e] = t);
            });
            var i = u.cloneDeep(r);
            i.element = o.element, t.push(i);
        }
        return t;
    }, h = function(e) {
        var t = c.getGoldlogVal("_aplus_auto_exp") || {}, n = t._acHashMap || {}, a = [];
        p(n, function(t, n) {
            for (var o = _(n) || [], r = 0, i = o.length; r < i; r++) {
                var s = o[r] || {}, u = n[r] || {};
                if (3 === s.status) try {
                    f.setRecordSuccess(u, g.DATA_APLUS_AE_KEY), aplus.aplus_pubsub.publish("APLUS_ELEMENT_EXPOSURE", {
                        logkey: t,
                        v_origin: u,
                        options: e
                    }), a.push(u);
                } catch (e) {
                    l().w(e && e.message);
                }
            }
            for (;a.length > 0; ) f.updateExpHashMap(t, a.pop(), "CLEAR");
        });
    }, m = [], v = function() {
        r = setInterval(function() {
            m.length > 0 ? aplus_queue.push(m.pop()) : (clearInterval(r), r = null);
        }, 200);
    }, y = function(e, t, n) {
        var a = e.logkeyContainer || [], o = e.request_cfg || {};
        s.wrap(function() {
            p(a, function(e, a) {
                if (a && a.length > 0) {
                    for (var r = 0; r < a.length; ) {
                        var i = [], s = JSON.stringify(a.slice(r, r + o.pkgSize));
                        i.push("expdata=" + s), i.push("_is_auto_exp=1"), i.push("_eventType=" + t.eventType), 
                        i.push("_method=" + o.method), i.push("_pkgSize=" + o.pkgSize);
                        var u = o.method || "POST";
                        m.push({
                            action: "aplus.record",
                            arguments: [ e, "EXP", i.join("&"), u ]
                        }), r += o.pkgSize;
                    }
                    n(t);
                }
            });
        }, "recordAplusAtForAli");
    }, b = function(e, t, n) {
        var a = e.logkeyContainer || [], o = e.request_cfg || {};
        s.wrap(function() {
            p(a, function(e, a) {
                if (a && a.length > 0) {
                    for (var r = 0; r < a.length; ) {
                        var i = {
                            _is_auto_exp: 1,
                            _eventType: t.eventType,
                            _method: o.method,
                            is_auto: 1
                        }, s = a[r];
                        for (var u in s) i[u] = s[u];
                        var c = o.method || "POST";
                        aplus_queue.push({
                            action: "aplus.record",
                            arguments: [ e, "EXP", i, c ]
                        }), r += 1;
                    }
                    n(t);
                }
            });
        }, "recordAplusAtForAliyun");
    }, w = function(e) {
        if (e.size > 0) {
            r || v();
            var t = d() || {};
            "on" === aplus.getMetaInfo("aplus-track-combine") ? y(t, e, h) : b(t, e, h);
        }
    };
    t.watch_data_change = function() {
        aplus.aplus_pubsub.subscribe("APLUS_AE_EXPOSURE_CHANGE", w), o();
    }, t.clear = function() {
        aplus.aplus_pubsub.unsubscribe("APLUS_AE_EXPOSURE_CHANGE", w);
    };
}, function(e, t, n) {
    "use strict";
    var a = n(13), o = n(3), r = n(31).nameStorage, i = n(43);
    e.exports = function() {
        return {
            recordValInWindowName: function() {
                var e, t, n = o.HTTPS == location.protocol, a = aplus.globalConfig.NAMESTORAGE_KEYS || {}, s = parent !== self;
                if (!s && n) {
                    var u = location.href, c = n && (u.indexOf("login.taobao.com") >= 0 || u.indexOf("login.tmall.com") >= 0), l = i.getRefer(a);
                    c && l ? (e = l, t = r.getItem(a.REFERRER_PV_ID)) : (e = u, t = aplus.pvid), r.setItem(a.REFERRER, e), 
                    r.setItem(a.REFERRER_PV_ID, t);
                }
            },
            run: function() {
                var e = this;
                a.on(window, "beforeunload", function() {
                    e.recordValInWindowName();
                });
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(13), o = n(67);
    e.exports = function() {
        return {
            do_tracker_lostpv: function(e) {
                if (e && e.page) {
                    var t = e.spm_ab ? e.spm_ab.split(".") : [], n = navigator && navigator.sendBeacon ? "post" : "get", a = "record_lostpv_by" + n + "_" + e.msg, r = new o({
                        ratio: e.ratio || this.options.config.lostPvRecordRatio
                    });
                    r.run({
                        code: 102,
                        page: e.page,
                        msg: a,
                        spm_a: t[0],
                        spm_b: t[1],
                        c1: e.duration,
                        c2: e.page_url
                    });
                }
            },
            recordLostPv: function(e) {
                var t = window.aplus || {}, n = t._$ = t._$ || {}, a = t.spm_ab ? t.spm_ab.join(".") : "0.0", o = n.send_pv_count || 0;
                if (o < 1 && navigator && navigator.sendBeacon) {
                    var r = location.hostname + location.pathname;
                    this.do_tracker_lostpv({
                        page: r,
                        page_url: location.protocol + "//" + r,
                        duration: e,
                        spm_ab: a,
                        msg: "dom_state=" + document.readyState
                    });
                }
            },
            run: function() {
                var e = this, t = new Date();
                a.on(window, "beforeunload", function() {
                    var n = new Date(), a = n.getTime() - t.getTime();
                    e.recordLostPv(a);
                });
            }
        };
    };
}, function(e, t, n) {
    var a = n(33), o = n(34), r = n(40), i = {
        ratio: 1,
        logkey: "fsp.1.1",
        gmkey: "",
        chksum: "H46747615"
    }, s = function(e) {
        e && "object" == typeof e || (e = i), this.opts = e, this.opts.ratio = e.ratio || i.ratio, 
        this.opts.logkey = e.logkey || i.logkey, this.opts.gmkey = e.gmkey || i.gmkey, this.opts.chksum = e.chksum || i.chksum;
    }, u = s.prototype;
    u.getRandom = function() {
        return Math.floor(100 * Math.random()) + 1;
    }, u.run = function(e, t) {
        var n, i, s = {
            pid: "aplus",
            code: 101,
            msg: "异常内容"
        }, u = "";
        try {
            var c = window.aplus || {}, l = c._$ || {}, p = l.meta_info || {}, f = parseFloat(p["aplus-tracker-rate"]);
            if (n = this.opts || {}, "number" == typeof f && f + "" != "NaN" || (f = n.ratio), 
            i = this.getRandom(), t || i <= 100 * f) {
                u = "//gm.mmstat.com/" + n.logkey, e.rel = c.globalConfig.script_name + "@" + c.globalConfig.lver, 
                e.type = e.code, e.uid = encodeURIComponent(c.getCookieCna("cna")), e = o.assign(s, e);
                var g = a.obj2param(e);
                c.tracker = c.send(u, {
                    cache: o.makeCacheNum(),
                    gokey: g,
                    logtype: "2"
                }, "POST");
            }
        } catch (e) {
            r.logger({
                msg: "tracker.run() exec error: " + e
            });
        }
    }, e.exports = s;
}, function(e, t, n) {
    "use strict";
    var a = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = a.getGlobalValue("aplus");
                if (!e._aplus_cplugin_m) {
                    var t = this.options.config;
                    e._aplus_cplugin_m = n(69).run(t);
                }
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(40), o = n(67), r = navigator && navigator.sendBeacon ? "post" : "get";
    t.run = function(e) {
        return {
            status: "complete",
            do_tracker_jserror: function(t) {
                try {
                    var n = new o({
                        logkey: t ? t.logkey : "",
                        ratio: t && "number" == typeof t.ratio && t.ratio > 0 ? t.ratio : e.jsErrorRecordRatio
                    }), i = [ "Message: " + t.message, "Error object: " + t.error ].join(" - "), s = aplus.spm_ab || [], u = location ? location.hostname + location.pathname : "";
                    n.run({
                        code: 110,
                        page: u,
                        msg: "record_jserror_by" + r + "_" + t.message,
                        spm_a: s[0],
                        spm_b: s[1],
                        c1: i,
                        c2: t.filename,
                        c3: location ? location.protocol + "//" + u : ""
                    });
                } catch (e) {
                    a.logger({
                        msg: e
                    });
                }
            },
            do_tracker_browser_support: function(t) {
                var n = !1;
                try {
                    if (t && t.page) {
                        var i = t.spm_ab ? t.spm_ab.split(".") : [], s = new o({
                            ratio: t.ratio || e.browserSupportRatio
                        }), u = aplus._aplus_client || {}, c = u.ua_info || {};
                        s.run({
                            code: 111,
                            page: t.page,
                            msg: t.msg + "_by" + r,
                            spm_a: i[0],
                            spm_b: i[1],
                            c1: [ c.o, c.b, c.w ].join("_"),
                            c2: t.etag || "",
                            c3: t.cna || ""
                        }), n = !0;
                    }
                } catch (e) {
                    a.logger({
                        msg: e
                    });
                }
                return n;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                var e = n(71), t = e.create({
                    WS: null,
                    CTX: window,
                    CTX_TYPE: "WEB"
                });
                t.run(this.options);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a, o = n(72), r = n(2), i = n(73), s = n(74), u = n(8), c = n(3), l = n(38), p = n(85);
    e.exports = i.extend({
        handlerMiddleware: function(e) {
            var t = r.getGlobalValue("aplus");
            if (!t.getMetaInfo(c.JSBRIDGE_ONLY)) {
                var n = o.changeToObj(e.what_to_send.logdata), i = location && location.href.match(/aplusDebug=(true|false)/) || [], f = t.getMetaInfo("DEBUG") || i[1];
                u().setDebug(!!f);
                var g, d = s(n, e.userdata);
                t._h5_share_enable ? g = "POST" : (g = e.where_to_send.method, "POST" === g && navigator && navigator.sendBeacon || (d = "d=" + encodeURIComponent(d))), 
                d && u().i("event before send to: ", e.where_to_send.url), a || (a = new Date().getTime()), 
                a && a - new Date().getTime() > c.SHARE_CACHE_INTERVAL && t._h5_share_enable && (l.remove("__sharefrom"), 
                l.remove("__fromappkey"), l.remove("_um_ssrc"), l.remove("_um_channel"), l.remove("_um_campaign")), 
                t._h5_share_enable ? p.request4um({
                    url: e.where_to_send.url,
                    method: g,
                    data: d,
                    success: function(e) {
                        e && e.imprint && l.set(c.IMPRINT, e.imprint);
                    },
                    error: function(e) {
                        u().w("aplus weblogs error: " + e);
                    }
                }) : t.send(e.where_to_send.url, d, g);
            }
        }
    });
}, function(e, t, n) {
    "use strict";
    var a = n(2);
    t.getKeyIndex = function(e) {
        var t = {
            protocol: 1,
            event_args: 25
        };
        return t[e];
    };
    var o = "-";
    t.changeToArray = function(e, t) {
        var n = a.getGlobalValue("aplus"), r = t.event_timestamp.getTime().toString(), i = t.client || {}, s = i.screenWidth || "", u = i.screenHeight || "", c = s + "*" + u, l = s && u ? c : o, p = i.language || o, f = t.gokey || {}, g = JSON.stringify(f), d = JSON.stringify({
            customSdkId: t.sdk_info.customSdkId || "",
            platform_type: t.sdk_info.platformType || ""
        }), _ = t.appKey || t.appId || o, h = JSON.stringify({
            appId: i.appId || n.getMetaInfo("miniAppId") || ""
        }), m = JSON.stringify(t.sessionArgs || {}), v = JSON.stringify(t.globalArgs || {}), y = t.arg1 || t.logkey || o;
        0 === y.indexOf("/$$_") && (y = y.substring(1, y.length)), "2001" === t.event_code && t.trackerEventCode && (y = t.trackerEventCode);
        var b = [ t.cache, t.method || "GET", o, l, _, h, t._dev_id || o, "{}", t._user_nick || o, t._user_id || o, t._anony_id || o, "{}", p, t.timeZone || o, i.os || o, i.os_version || o, d, t._session_id || o, t.cna || o, r, encodeURIComponent(t.url) || o, t.event_code || o, encodeURIComponent(t.pre) || o, v, m, g, y, t.sdk_info.jsver, t.sdk_info.lver, i.appVersion || "devtools" || o, i.brand || o, o, i.networkType || o ];
        return b;
    }, t.changeToObj = function(e) {
        var t = a.getGlobalValue("aplus"), n = e.event_timestamp.getTime().toString(), r = e.client || {}, i = r.language || o, s = e.gokey || {}, u = JSON.stringify(s), c = JSON.stringify({
            customSdkId: e.sdk_info.customSdkId || "",
            platform_type: e.sdk_info.platformType || ""
        }), l = e.appKey || e.appId || o, p = JSON.stringify({
            appId: r.appId || t.getMetaInfo("miniAppId") || ""
        }), f = JSON.stringify(e.sessionArgs || {}), g = JSON.stringify(e.globalArgs || {}), d = e.arg1 || e.logkey || o;
        0 === d.indexOf("/$$_") && (d = d.substring(1, d.length)), "2001" === e.event_code && e.trackerEventCode && (d = e.trackerEventCode);
        var _ = {};
        _.platform = e.sdk_info.platformType || "", _.sdk_type = _.platform ? _.platform + "mp" : "", 
        _.appkey = l, _.sdk_version = e.sdk_info.lver, _.device_type = r.device_model || "", 
        _.os = r.os || "", _.os_version = r.os_version || "", _.jsver = e.sdk_info.jsver, 
        _.pixel_ratio = window.devicePixelRatio || "";
        var h = Math.round(r.screenWidth * (window.devicePixelRatio || 1)), m = Math.round(r.screenHeight * (window.devicePixelRatio || 1));
        _.resolution = h > m ? h + "*" + m : m + "*" + h, _.language = i, _.app_version = t.getMetaInfo("appVersion") || "devtools", 
        _.arg1 = d, _.event_args = u, _.event_code = e.event_code || "", _.sessionArgs = f, 
        _.global_args = g, _.app_ext_info = p, _.time = n, _.cna = e.cna || "", _.url = e.url || "", 
        _.pre = e.pre || "", _.method = e.method || "GET", _.log_id = e.cache || "", _.sdk_info = c, 
        _.is_auto = e.is_auto, _.track_type = e.track_type;
        var v = t.getMetaInfo("aplus-exdata");
        return v && v.aplus_track_debug_id && (_.track_debug_id = v.aplus_track_debug_id), 
        _;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(21), o = n(27), r = n(3);
    e.exports = a.extend({
        subscribeLogs: function(e, t) {
            o.pushIntoGoldlogQueue(r.SUBSCRIBE, [ e, function(e) {
                e.status === r.COMPLETE && t(e);
            } ]);
        },
        getLogicSymbol: function() {
            return "ALI" === this.format ? "&" : "||";
        },
        handlerMiddleware: function() {},
        watchLOG: function() {
            var e = this;
            e.subscribeLogs(r.MW_CHANGE_PV, function(t) {
                e.handlerMiddleware(t, "pv");
            }), e.subscribeLogs(r.MW_CHANGE_HJLJ, function(t) {
                e.handlerMiddleware(t, r.APLUS);
            });
        },
        run: function() {
            this.watchLOG();
        }
    });
}, function(e, t, n) {
    function a() {
        var e = {}, t = m.getUrlParams();
        try {
            y(t, function(t, n) {
                0 === t.indexOf("utm_") && (e[t] = n);
            });
            var n = v.get(g.APLUS_LATEAST_UTM);
            m.isEmptyObject(e) ? e = d.parse(n) || {} : n && d.stringfy(e) === n || v.set(g.APLUS_LATEAST_UTM, d.stringfy(e));
        } catch (e) {}
        return e;
    }
    function o() {
        var e = c.getGlobalValue("aplus");
        if (e._h5_share_enable) {
            var t = {}, n = v.get("__sharefrom"), a = v.get("__fromappkey"), o = v.get("_um_ssrc"), r = v.get("_um_channel"), i = v.get("_um_campaign");
            return n && (t.sharefrom = n), a && (t.fromappkey = a), o && (t._um_ssrc = o), r && (t._um_channel = r), 
            i && (t._um_campaign = i), t;
        }
    }
    function r(e, t) {
        var n = c.getGlobalValue("aplus");
        try {
            var a = {}, r = n.getMetaInfo("globalproperty");
            a.gp = r;
            var i, u = t.gokey;
            i = "string" == typeof u ? w.arr2obj(w.param2arr(u)) : "object" == typeof u ? s(u) : {}, 
            i.targetAppKey && (a.targetAppKey = i.targetAppKey, delete i.targetAppKey), i.is_auto ? (a.is_auto = 1, 
            a.track_type = "1", delete i.is_auto, delete i["aplus-ae"], delete i["aplus-clk"], 
            delete i.auto_element, e.event_code && (a.event_type_id = e.event_code)) : (a.is_auto = 0, 
            a.track_type = "0"), i.ap && (a.ap = i.ap, delete i.ap), a.page_title = i.page_title || A.getPageTitle(location.pathname) || document.title || "", 
            i.page_title && delete i.page_title, e.url && (a.page_name = A.getPageName(location.pathname, i), 
            a.url = e.url || "-", a.page_name && i.spmC && (a["spm-cnt"] = [ encodeURIComponent(a.page_name), encodeURIComponent(i.spmC), encodeURIComponent(i.spmD) ].filter(function(e) {
                return !!e;
            }).join("."), delete i.spmC, delete i.spmD, delete i.spmB));
            var p = s(i);
            for (var f in p) "string" == typeof f && l.startsWith(f, "_") && (a[f] = p[f], delete i[f]);
            a = m.assign(a, o() || {}), a.rank = b.rank(), t.logkey === g.PAGE_LEAVE && (a.amount = a.rank);
            var d = _(t.logkey, m.assign(a, {
                cusp: i
            }));
            return d;
        } catch (e) {
            return h().w("JSON parse failed", e), {};
        }
    }
    function i(e, t) {
        var n = c.getGlobalValue("aplus"), a = n.getMetaInfo("globalproperty"), r = {};
        r.r = e.arg1, r.gp = a, r.is_auto = e.is_auto ? 1 : 0, r.track_type = e.track_type;
        var i = t, u = s(l.deleteInfo(s(i), [ "_anony_id", "_dev_id", "_session_id", "_user_id", "_user_nick", "_src_pos_id", "cna", "_abfpc" ]));
        if (u.duration && (r.duration = u.duration, delete u.duration), r.page_title = u.page_title || A.getPageTitle(location.pathname) || document.title || "", 
        u.page_title && delete u.page_title, e.url && (r.page_name = A.getPageName(location.pathname, u), 
        r.url = e.url, r["spm-cnt"] = encodeURIComponent(r.page_name)), e.pre && (r.ref_url = e.pre || "-", 
        n._h5_share_enable && r.ref_url.length > 1)) {
            var p = r.ref_url.match(/(\w|-)+\.(\w|-)+\.(\w|-)+/);
            p && p.length > 0 && (r._um_referer_domain = p[0]);
        }
        return r.rank = b.rank(), r = m.assign(r, o() || {}), _(g.PAGE_START, m.assign(r, {
            cusp: u
        }));
    }
    var s = n(75), u = n(76), c = n(2), l = n(7), p = n(77), f = n(78), g = n(3), d = n(9), _ = n(79), h = n(8), m = n(34), v = n(38), y = n(50), b = n(80), w = n(39), A = n(81), E = n(7);
    e.exports = function(e, t) {
        var n = c.getGlobalValue("aplus"), o = n.getMetaInfo("aplus-globaldata") || {}, _ = a();
        if (n.appendMetaInfo("globalproperty", _), !e || !t || l.checkEmptyObj(e) || l.checkEmptyObj(t)) return {};
        var m = {}, y = s(u(e)), b = n.getMetaInfo(g._ANONY_ID) || e.cna;
        b && (y.id_tracking.anony_id = b), o._abfpc && (y.id_tracking._abfpc = o._abfpc);
        var w = n.getMetaInfo("_dev_id") || e.cna;
        if (w && (y.id_tracking.dev_id = w), n._h5_share_enable) {
            var A = n.getMetaInfo("uuid");
            A && (y.id_tracking.ud = A);
            var S = n.getMetaInfo("unionid");
            S && (y.id_tracking.unionid = S);
            var T = n.getMetaInfo("anouymousopenid");
            T && (y.id_tracking.anonymousid = T);
            var P = n.getMetaInfo("alipayid");
            P && (y.id_tracking.alipay_id = P);
            var I = n.getMetaInfo("swanid");
            I && (y.id_tracking.anonymousid = I);
            var x = n.getMetaInfo(g.USER_PROFILE_KEY);
            x && (y.user_info = x);
            var C = v.get(g.IMPRINT);
            C && (y.imprint = C);
            var M = n.getMetaInfo(g.ID_TYPE) || "cnaid";
            y.id_type = M;
        }
        var k = n.getMetaInfo("openid");
        k && (y.id_tracking.openid = k);
        var O = null;
        if (O = "2001" === e.event_code ? i(e, t) : r(e, t)) {
            m = {
                analytics: {
                    ekvs: {
                        sessionid: [ s(O) ]
                    }
                }
            };
            var N = n.getMetaInfo(g._USER_ID);
            N && m.analytics && (m.analytics.active_user = {
                puid: N,
                provider: n.getMetaInfo("_user_nick")
            }), m.header = l.assign(y, m.header, {
                ts: Date.now(),
                traceId: l.getRandomStr(10) + Date.now() + l.getRandomStr(9)
            });
            try {
                var R = window.sessionStorage.getItem(g.START_ID);
                R ? m.header.start_id = R : (R = E.getStartId(), window.sessionStorage.setItem(g.START_ID, R));
            } catch (e) {}
            var L = p(m), U = d.stringfy(L);
            return h().i("event data: ", L), f.encode(U);
        }
    };
}, function(e, t) {
    function n(e) {
        var t, a = Array.isArray(e) ? [] : {};
        if ("object" == typeof e) {
            if (JSON && JSON.parse) t = JSON.stringify(e), a = JSON.parse(t); else for (var o in e) a[o] = "object" == typeof e[o] ? n(e[o]) : e[o];
            return a;
        }
    }
    e.exports = n;
}, function(e, t) {
    e.exports = function(e) {
        var t = {};
        return t.sdk_type = e.sdk_type, t.appkey = e.appkey, t.sdk_version = e.sdk_version, 
        t.device_type = e.device_type, t.os = e.os, t.os_version = e.os_version, t.platform = e.platform, 
        t.pixel_ratio = e.pixel_ratio, t.resolution = e.resolution, t.language = e.language, 
        t.app_version = e.app_version, t.jsver = e.jsver, t.pre = e.pre, t.url = e.url, 
        t.debugId = e.track_debug_id, t.id_tracking = {}, t;
    };
}, function(e, t) {
    function n(e, t) {
        var n = a(e, t);
        return e && e.id_tracking && (n[t.id_tracking || "id_tracking"] = a(e.id_tracking, s)), 
        n;
    }
    function a(e, t) {
        var n = {};
        for (var a in e) t[a] ? n[t[a]] = e[a] : n[a] = e[a];
        return n;
    }
    function o(e, t) {
        var n = {};
        if (e) for (var a in e) e[a] && (n[t[a]] = e[a]);
        return n;
    }
    var r = {
        ekvs: "e",
        active_user: "active_user"
    }, i = {
        sdk_type: "sdt",
        device_model: "dm",
        language: "lang",
        device_type: "dt",
        os_version: "ov",
        appkey: "ak",
        sdk_version: "sv",
        resolution: "rl",
        testToken: "ttn",
        pixel_ratio: "pr",
        _id: "id",
        id_type: "it",
        id_tracking: "itr",
        imprint: "imp",
        debugId: "dk"
    }, s = {
        uuid: "ud",
        unionid: "und",
        openid: "od",
        anonymousid: "nd",
        alipay_id: "ad",
        device_id: "dd",
        userid: "puid"
    };
    e.exports = function(e) {
        return {
            h: n(e.header, i),
            a: o(e.analytics, r)
        };
    };
}, function(e, t) {
    var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = function(e) {
        for (var t = {}, n = 0, a = e.length; n < a; n++) t[e.charAt(n)] = n;
        return t;
    }(n), o = String.fromCharCode, r = function(e) {
        var t;
        return e.length < 2 ? (t = e.charCodeAt(0), t < 128 ? e : t < 2048 ? o(192 | t >>> 6) + o(128 | 63 & t) : o(224 | t >>> 12 & 15) + o(128 | t >>> 6 & 63) + o(128 | 63 & t)) : (t = 65536 + 1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320), 
        o(240 | t >>> 18 & 7) + o(128 | t >>> 12 & 63) + o(128 | t >>> 6 & 63) + o(128 | 63 & t));
    }, i = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, s = function(e) {
        return e.replace(i, r);
    }, u = function(e) {
        var t = [ 0, 2, 1 ][e.length % 3], a = e.charCodeAt(0) << 16 | (e.length > 1 ? e.charCodeAt(1) : 0) << 8 | (e.length > 2 ? e.charCodeAt(2) : 0), o = [ n.charAt(a >>> 18), n.charAt(a >>> 12 & 63), t >= 2 ? "=" : n.charAt(a >>> 6 & 63), t >= 1 ? "=" : n.charAt(63 & a) ];
        return o.join("");
    }, c = function(e) {
        return e.replace(/[\s\S]{1,3}/g, u);
    }, l = function(e) {
        return c(s(e));
    }, p = function(e, t) {
        return t ? l(String(e)).replace(/[+\/]/g, function(e) {
            return "+" == e ? "-" : "_";
        }).replace(/\=/g, "") : l(String(e));
    }, f = new RegExp([ "[À-ß][-¿]", "[à-ï][-¿]{2}", "[ð-÷][-¿]{3}" ].join("|"), "g"), g = function(e) {
        switch (e.length) {
          case 4:
            var t = (7 & e.charCodeAt(0)) << 18 | (63 & e.charCodeAt(1)) << 12 | (63 & e.charCodeAt(2)) << 6 | 63 & e.charCodeAt(3), n = t - 65536;
            return o((n >>> 10) + 55296) + o((1023 & n) + 56320);

          case 3:
            return o((15 & e.charCodeAt(0)) << 12 | (63 & e.charCodeAt(1)) << 6 | 63 & e.charCodeAt(2));

          default:
            return o((31 & e.charCodeAt(0)) << 6 | 63 & e.charCodeAt(1));
        }
    }, d = function(e) {
        return e.replace(f, g);
    }, _ = function(e) {
        var t = e.length, n = t % 4, r = (t > 0 ? a[e.charAt(0)] << 18 : 0) | (t > 1 ? a[e.charAt(1)] << 12 : 0) | (t > 2 ? a[e.charAt(2)] << 6 : 0) | (t > 3 ? a[e.charAt(3)] : 0), i = [ o(r >>> 16), o(r >>> 8 & 255), o(255 & r) ];
        return i.length -= [ 0, 0, 2, 1 ][n], i.join("");
    }, h = function(e) {
        return e.replace(/[\s\S]{1,4}/g, _);
    }, m = function(e) {
        return d(h(e));
    }, v = function(e) {
        return m(String(e).replace(/[-_]/g, function(e) {
            return "-" == e ? "+" : "/";
        }).replace(/[^A-Za-z0-9\+\/]/g, ""));
    };
    t.encode = p, t.decode = v;
}, function(e, t, n) {
    var a = n(8), o = n(9);
    e.exports = function(e, t) {
        if ("string" != typeof e || !e) return void a().w("event logkey is invalid, id =", e || "'' event properties = ", o.stringfy(t.cusp));
        var n = Object.create(null);
        n.id = e, t && t.ts || (n.ts = Date.now());
        var r = typeof t;
        if ("object" === r) for (var i in t) ({}).hasOwnProperty.call(t, i) && (n[i] = t[i]);
        return n;
    };
}, function(e, t) {
    function n() {
        return o++, r.hasOwnProperty(o) ? o++ : r[o] = o, o;
    }
    function a() {
        o = 0, r = {};
    }
    var o = 0, r = {};
    t.rank = n, t.clear = a;
}, function(e, t, n) {
    function a(e, t) {
        try {
            t = t || {};
            var n = r.getPageCode(e), a = i.getGlobalValue("aplus"), o = a.getMetaInfo && a.getMetaInfo("aplus-pagename") || "", p = a.getMetaInfo && a.getMetaInfo("aplus-dynamicpage"), f = location.href;
            p && c(p) && l(p()) && (f = p());
            var g = f.split("?")[0], d = g;
            if (f.split("?").length > 1) {
                var _ = f.split("?")[1], h = _.indexOf("/"), m = _.indexOf("#/"), v = -1;
                if (m > -1 && h > -1 ? m < h ? v = m : m > h && (v = h) : h > -1 ? v = h + 1 : m > -1 && (v = m), 
                v > -1) {
                    var y = _.substring(v), b = y.indexOf("?");
                    b > -1 && (y = y.substring(0, b)), d = u.isEndWith(g, "/") && u.isStartWith(y, "/") ? g + y.substring(1) : u.isEndWith(g, "/") || u.isStartWith(y, "/") ? g + y : g + "/" + y;
                }
            }
            return t.spmB || t.page_name || document && document.body && document.body.dataset && document.body.dataset.pagename || o || n || d || "-";
        } catch (e) {
            s().w("get pagename failed e =", e);
        }
    }
    function o(e) {
        return r.getPageTitle(e);
    }
    var r = n(82), i = n(2), s = n(8), u = n(34), c = n(20), l = n(84);
    t.getPageName = a, t.getPageTitle = o;
}, function(e, t, n) {
    function a(e, t) {
        if (!e || "-" === e) return "-";
        var n = [];
        for (var a in t) n.push(a + "=" + t[a]);
        var o = n.join("&");
        return o ? e + "?" + o : e;
    }
    var o = n(2), r = "", i = {};
    t.getCurrentPagePath = function() {
        return r;
    }, t.setCurrentPath = function(e) {
        e && (r = e);
    }, t.getPageQuery = function(e) {
        if (e) return i[e];
    }, t.setPageQuery = function(e, t) {
        e && (i[e] = t);
    }, t.getFullPath = function(e) {
        return a(e, i[e]);
    }, t.getPageName = function(e) {
        var t = o.getGlobalValue("aplus"), n = t.getMetaInfo("pageConfig") || {}, a = e || r;
        n.hashMode && (a = location.hash);
        try {
            if (n && "object" == typeof n) for (var i in n) {
                if (i === a) break;
                if (n[i] && n[i].regRule && n[i].regRule.test(a)) {
                    a = i;
                    break;
                }
            }
        } catch (e) {}
        return n[a];
    };
    var s = n(8), u = n(50);
    t.getWxTitle = function(e) {
        if (!e) return "";
        var t = n(83), a = t.getPlatformType(), r = "";
        try {
            if ("wx" === a && __wxConfig) {
                var i = __wxConfig, c = __wxConfig.page || {}, l = c[e] || c[e + ".html"], p = {}, f = {};
                if (i.global && i.global.window && i.global.window.navigationBarTitleText && (p.title = i.global.window.navigationBarTitleText), 
                l && l.window && l.window.navigationBarTitleText && (f.title = l.window.navigationBarTitleText), 
                !f.title && __wxAppCode__) {
                    var g = __wxAppCode__[e + ".json"];
                    g && g.navigationBarTitleText && (f.title = g.navigationBarTitleText);
                }
                var d = o.getContext();
                d.globalTitleMap && u(d.globalTitleMap, function(t, n) {
                    t === e && (r = n);
                }), 0 === r.length && (r = f.title || p.title || "");
            }
            return r;
        } catch (e) {
            return s().w("current platform can not track page title"), r;
        }
    }, t.getPageCode = function(e) {
        return (this.getPageName(e) || {}).pageName;
    }, t.getPageTitle = function(e) {
        return (this.getPageName(e) || {}).pageTitle || this.getWxTitle(e);
    }, t.getVTRealtimeCode = function() {
        if (r) {
            var e = i[r] || {}, t = /^\$vt_/, n = decodeURIComponent(e.scene);
            return n && t.test(n) && n.replace(t, "");
        }
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        if ("boolean" == typeof c) return c;
        var e = !1;
        try {
            var t = navigator ? navigator.userAgent || navigator.swuserAgent : "";
            if (e = !!/AliApp/i.test(t), /AliApp\((AP|DingTalk|AMAP|UC|QUARK)/i.test(t) && (e = !1), 
            /AliApp\(KB/i.test(t) && (e = !!/Mist/.test(t)), /AlipayIDE Taobao/.test(t) && (e = !0), 
            e) {
                var n = l().ctx;
                r(n.canIUse) && (e = !!n.canIUse("callUserTrack"));
            }
        } catch (e) {}
        return c = e, e;
    }
    function o() {
        return "boolean" == typeof c ? !!c : a();
    }
    var r = n(20), i = n(2), s = n(39), u = n(3);
    t.getCurrentPage = function() {
        var e = getCurrentPages();
        return e[e.length - 1] || {};
    }, t.getReferrerPage = function() {
        var e = getCurrentPages();
        return e[e.length - 2] || {};
    };
    var c;
    t.resetIsTB = function(e) {
        c = e;
    }, t.initIsTB = a;
    var l = function() {
        try {
            return {
                ctx: dd,
                platType: "dd",
                sdkType: "ddmp",
                logDomain: "/ddm_logs"
            };
        } catch (e) {
            try {
                return {
                    ctx: my,
                    platType: my && my.tb ? "taobao" : "my",
                    sdkType: my && my.tb ? "taobaomp" : "mymp",
                    logDomain: "/alipaym_logs"
                };
            } catch (e) {
                try {
                    return {
                        ctx: tt,
                        platType: "tt",
                        sdkType: "ttmp",
                        logDomain: "/bytedancem_logs"
                    };
                } catch (e) {
                    try {
                        return {
                            ctx: swan,
                            platType: "bd",
                            sdkType: "bdmp",
                            logDomain: "/baidum_logs"
                        };
                    } catch (e) {
                        try {
                            return {
                                ctx: wx,
                                platType: "wx",
                                sdkType: "wxmp",
                                logDomain: "/wxm_logs"
                            };
                        } catch (e) {
                            return {
                                ctx: {},
                                platType: "UNKNOW",
                                sdkType: "UNKNOW"
                            };
                        }
                    }
                }
            }
        }
    };
    t.isTB = o, t.getPlatformType = function() {
        return l().platType;
    }, t.getSdkType = function() {
        return l().sdkType;
    }, t.getContext = function() {
        return l().ctx;
    }, t.getLogDomain = function() {
        return l().logDomain;
    };
    var p = "httpRequest", f = "request", g = function() {};
    t.request = function(e, t, n, a) {
        var o = i.getGlobalValue("aplus"), c = l().ctx;
        r(a) || (a = g), r(n) || (n = g);
        var d = t.requestMethodName || f, _ = c[d];
        r(_) || d === f || (d = f, _ = c[d]), r(_) || d === p || (d = p, _ = c[d]);
        var h, m = t && t.dataType ? t.dataType : "base64", v = t && t.timeout ? t.timeout : 3e3, y = t.method || "GET", b = o.getMetaInfo(u.APLUS_MINI_REQUEST_TIMEOUT);
        e = s.fixDomain(e);
        var w;
        if (r(_)) {
            var A = {
                url: e,
                method: y,
                dataType: m,
                timeout: b || v,
                success: function(e) {
                    h || (h = !0, n(e));
                },
                fail: function(e) {
                    h || (h = !0, a({
                        failure: !0,
                        data: e
                    }));
                }
            };
            "POST" === y && t.data && (p === d ? (A.headers = {
                "Content-Type": "application/json"
            }, A.dataType = "json", A.data = JSON.stringify(t.data)) : A.data = t.data);
            var E = o.getMetaInfo("aplus-request-extinfo");
            "object" == typeof E && (A._extInfo = E), _(A);
        } else h || (h = !0, a({
            failure: !0,
            data: w
        }));
        setTimeout(function() {
            h || (h = !0, w = 'aplus log request"' + e + ' timeout", time spend' + v + "ms", 
            console && console.warn(w), a({
                failure: !0,
                data: w
            }));
        }, v);
    }, t.setStorageSync = function(e, t) {
        try {
            var n = l().platType, a = l().ctx;
            "my" === n || "taobao" === n ? a.setStorageSync({
                key: e,
                data: t
            }) : a.setStorageSync(e, t);
        } catch (e) {}
    }, t.getStorageSync = function(e) {
        try {
            var t = l().platType, n = l().ctx;
            return "my" === t || "taobao" === t ? n.getStorageSync({
                key: e
            }).data : n.getStorageSync(e);
        } catch (e) {}
    };
}, function(e, t) {
    function n(e) {
        return "[object String]" === Object.prototype.toString.call(e);
    }
    e.exports = n;
}, function(e, t, n) {
    "use strict";
    var a = n(3), o = n(20), r = {
        base: 1e4,
        timeout: 1e4
    }, i = function(e, t, n, i) {
        /^\/\//.test(e) && (e = a.HTTPS + e);
        var s = !0, u = i && i.timeout ? i.timeout : r.timeout;
        setTimeout(function() {
            s && (s = !1, o(n) && n({
                timeout: u
            }));
        }, u), window.fetch(e).then(function(e) {
            return /application\/json/.test(e.headers.get("content-type")) ? e.json() : e.text();
        }).then(function(e) {
            s && (t(e), s = !1);
        }).catch(function(e) {
            s && n(e);
        });
    }, s = function(e, t, n, a) {
        var o, i = "GET", s = function() {
            o.responseText ? t(o.responseText) : n();
        }, u = window.XMLHttpRequest && "withCredentials" in new XMLHttpRequest();
        u ? (o = new XMLHttpRequest(), o.open(i, e, !0)) : (o = new window.XDomainRequest(), 
        o.open(i, e));
        var c = a && a.timeout ? a.timeout : r.timeout;
        o.timeout = c, o.onload = s, o.onerror = n, o.ontimeout = n, o.send();
    }, u = function(e, t, n, a) {
        window.fetch ? i(e, t, n, a) : s(e, t, n, a);
    }, c = function(e, t) {
        e = e || {}, e.method = (e.method || "POST").toUpperCase(), e.url = e.url || "", 
        e.data = e.data || null, e.success = e.success || function() {}, e.error = e.error || function() {};
        var n = new XMLHttpRequest(), a = [];
        for (var o in e.data) a.push(o + "=" + encodeURIComponent(e.data[o]));
        var r = a.join("&"), i = JSON.stringify(e.data || {});
        "POST" === e.method ? (n.open(e.method, e.url, !0), n.setRequestHeader("Content-Type", t || "application/json")) : "GET" === e.method && n.open(e.method, e.url + "?" + r, !0), 
        n.withCredentials = !0, n.timeout = 3e3, n.onreadystatechange = function() {
            if (4 == n.readyState && 200 == n.status) {
                var t = {};
                try {
                    t = JSON.parse(n.responseText);
                } catch (e) {}
                e.success(t);
            } else 4 == n.readyState && e.error(n.staus);
        }, "POST" === e.method ? n.send(i) : n.send();
    };
    t.request = u, t.request4um = c;
}, function(e, t, n) {
    "use strict";
    var a = n(10);
    e.exports = function() {
        return {
            getLogConfig: function() {
                var e = {}, t = this.options.config.plugins;
                for (var n in t) e[n] = {
                    plugins: t[n],
                    context: {}
                }, a(t[n], function(t) {
                    e[n].context[t.name] = t.config || {};
                });
                return e;
            },
            run: function() {
                this.options.context.logConfig = this.getLogConfig(), this.options.context.logConfig.pageLoadTime = this.options.context.PAGE_LOAD_TIME;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(38), o = n(88), r = n(3), i = n(2), s = n(8), u = n(36), c = n(90), l = n(49), p = n(39), f = n(91);
    e.exports = function() {
        return {
            ABFPC: "_abfpc",
            VERSION: "2.0",
            IMPRINT_VERSION: "imprintVersion",
            APLUS_IMPRINT_VERSION: "APLUS_IMPRINT_VERSION",
            APLUS_REMOTE_CONFIG: "APLUS_REMOTE_CONFIG",
            tryGetStoreValue: function(e) {
                var t = a.get(e), n = o.getCookie(e);
                return {
                    lsValue: t,
                    cookieValue: n
                };
            },
            syncRcfg: function(e, t) {
                var n = aplus.getMetaInfo(r.APLUS_PV_DOMAIN);
                n = p.fixDomain(n);
                var a = l.loadScript, o = p.getAppKey();
                n && a(n + "/rcfg.js?_abfpc=" + e + "&ak=" + o, t);
            },
            setImprintVersion: function(e) {
                if (this.impv = e, e && u.getLsImpv(this.APLUS_IMPRINT_VERSION) !== e) {
                    u.setLsImpv(this.APLUS_IMPRINT_VERSION, c.getFormatDate(), e);
                    var t = aplus.getMetaInfo(r.APLUS_PV_DOMAIN);
                    t = p.fixDomain(t);
                    var n = t + e;
                    this.syncRemoteCfgData(n);
                } else {
                    var a = u.getLsRemoteCfg(this.APLUS_REMOTE_CONFIG);
                    f.enableCfg(a);
                }
            },
            syncRemoteCfgData: function(e) {
                var t = l.loadScript;
                t(e, function(e) {
                    var t, n;
                    if (e && "error" === e.type) s().w("quicktracking load remote config failed", e); else {
                        try {
                            t = i.getGoldlogVal("imprint"), n = "object" == typeof t ? t : JSON.parse(t), u.setLsRemoteCfg(r.APLUS_REMOTE_CONFIG, c.getFormatDate(), n);
                        } catch (e) {
                            n = null;
                        }
                        f.enableCfg(n);
                    }
                });
            },
            run: function() {
                var e = this, t = e.tryGetStoreValue(e.ABFPC), n = t.lsValue || t.cookieValue;
                n && (n = n.replace("_" + e.VERSION, ""));
                var a = window.aplus_queue || (window.aplus_queue = []);
                setTimeout(function() {
                    a.push({
                        action: r.SUBSCRIBE,
                        arguments: [ "aplusReady", function(t) {
                            "complete" === t && e.syncRcfg(n, function(t) {
                                if (t && "error" === t.type) s().w("remote configuration request failed, err msg:", t); else {
                                    var n = i.getGoldlogVal(e.IMPRINT_VERSION);
                                    e.setImprintVersion(n);
                                }
                            });
                        } ]
                    });
                }, 300);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        if (!document) return "";
        var t = document.cookie.match(new RegExp("(?:^|;)\\s*" + e + "=([^;]+)"));
        return t ? t[1] : "";
    }
    function o(e) {
        var t = new Date(), n = "";
        if ("session" === e.expires) ; else if (e.expires && ("number" == typeof e.expires || e.expires.toUTCString)) "number" == typeof e.expires ? t.setTime(t.getTime() + 24 * e.expires * 60 * 60 * 1e3) : t = e.expires, 
        n = "expires=" + t.toUTCString(); else {
            var a = 20;
            c.indexof([ "v.youku.com", "www.youku.com", "player.youku.com" ], location.hostname) > -1 && (a = 1), 
            t.setTime(t.getTime() + 365 * a * 24 * 60 * 60 * 1e3), n = "expires=" + t.toUTCString();
        }
        return n;
    }
    function r(e, t, n) {
        if (document) {
            n || (n = {}), t += ";" + (n.expires || o(n)), t += "; path=" + (n.path ? n.path : "/"), 
            t += "; domain=" + n.domain, document.cookie = e + "=" + t;
            var r = 0;
            try {
                var i = navigator.userAgent.match(/Chrome\/\d+/);
                i && i[0] && (r = i[0].split("/")[1], r && (r = parseInt(r)));
            } catch (e) {}
            return n.SameSite && r >= 80 && (t += "; SameSite=" + n.SameSite, t += "; Secure", 
            document.cookie = e + "=" + t), a(e);
        }
    }
    function i(e, t, n) {
        try {
            if (!document) return "";
            if (n || (n = {}), n.domain) r(e, t, n); else for (var a = u.getDomains(), o = 0; o < a.length; ) n.domain = a[o], 
            r(e, t, n) ? o = a.length : o++;
        } catch (e) {}
    }
    var s = n(10), u = n(89), c = n(48);
    t.getCookie = a, t.trySetCookie = r, t.setCookie = i;
    var l = [ "tracknick", "thw", "cna" ];
    t.getData = function() {
        var e = {};
        if (s(l, function(t) {
            e[t] = a(t);
        }), location) {
            var t = location.hostname;
            e.cnaui = /\btanx\.com$/.test(t) ? a("cnaui") : "";
        }
        return e;
    }, t.getHng = function() {
        return encodeURIComponent(a("hng") || "");
    }, t.getCookieCna = function(e) {
        return a(e) || a("_" + e);
    }, t.setCookieCna = function(e, t, n) {
        for (var a = u.getDomains(), i = 0; i < a.length; ) if (n.domain = a[i], r(e, t, n)) i = a.length; else {
            if (i === a.length - 1) {
                var s = t + ";" + o(n);
                s += "; path=/", document.cookie = "_" + e + "=" + s;
            }
            i++;
        }
    };
}, function(e, t) {
    "use strict";
    t.getDomains = function() {
        var e = [];
        try {
            for (var t = location.hostname, n = t.split("."), a = 2; a <= n.length; ) e.push(n.slice(n.length - a).join(".")), 
            a++;
        } catch (e) {}
        return e;
    };
}, function(e, t) {
    "use strict";
    function n(e, t, n) {
        var a = "" + Math.abs(e), o = t - a.length, r = e >= 0;
        return (r ? n ? "+" : "" : "-") + Math.pow(10, Math.max(0, o)).toString().substr(1) + a;
    }
    t.getFormatDate = function(e) {
        var t = new Date();
        try {
            return [ t.getFullYear(), n(t.getMonth() + 1, 2, 0), n(t.getDate(), 2, 0) ].join(e || "");
        } catch (e) {
            return "";
        }
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        var t;
        return t = l.isWeb() ? p.getLsRemoteCfg(g) : f().getSync(c.APLUS_REMOTE_CONFIG), 
        t && t[e];
    }
    function o(e) {
        var t = l.getContext();
        t.aplus_queue.push({
            action: "aplus.setMetaInfo",
            arguments: [ c.APLUS_DISABLE_AUTOEVENT_REMOTE, e ]
        });
    }
    function r(e) {
        var t = l.getContext();
        t.aplus_queue.push({
            action: "aplus.setMetaInfo",
            arguments: [ c.APLUS_DEVICE_ENABLE, e ]
        });
    }
    function i(e) {
        var t = l.getContext();
        t.aplus_queue.push({
            action: "aplus.setMetaInfo",
            arguments: [ c.APLUS_DISABLE_AUTOPV_REMOTE, e ]
        });
    }
    function s(e) {
        var t = l.getContext();
        t.aplus_queue.push({
            action: "aplus.setMetaInfo",
            arguments: [ c.APLUS_AUTOTRACK_ENABLED_REMOTE, e ]
        });
    }
    var u = n(39), c = n(3), l = n(2), p = n(36), f = n(92), g = "APLUS_REMOTE_CONFIG";
    t.getAutoEventStatus = function() {
        var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_DISABLE_AUTOEVENT_REMOTE) || a("codelessClickEventStatus");
        return t;
    }, t.getDeviceStatus = function() {
        var e = l.getGlobalValue("aplus");
        return a("currentDeviceEnable") || e.getMetaInfo(c.APLUS_DEVICE_ENABLE);
    }, t.getAutoPageStatus = function() {
        var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_DISABLE_AUTOPV_REMOTE) || a("codelessCollectorPageStatus");
        return t;
    }, t.getAutoTrackStatus = function() {
        var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_AUTOTRACK_ENABLED_REMOTE) || a("codelessStatus");
        return t;
    }, t.enableCfg = function(e) {
        var t = l.getContext();
        e && (o(e.codelessClickEventStatus), i(e.codelessCollectorPageStatus), s(e.codelessStatus), 
        r(e.currentDeviceEnable), e.eventSamplingRate && e.eventSamplingRate.length > 0 && t.aplus_queue.push({
            action: "aplus.setMetaInfo",
            arguments: [ c.APLUS_EVENT_LIMITRATES, u.mapEventSampleRates(e.eventSamplingRate) ]
        }), e.codelessIgnoreComponent && e.codelessIgnoreComponent.length > 0 && t.aplus_queue.push({
            action: "aplus.setMetaInfo",
            arguments: [ c.APLUS_AUTOTRACK_CONFIG_REMOTE, e.codelessIgnoreComponent ]
        }));
    };
}, function(e, t, n) {
    var a = n(83), o = n(20), r = n(9), i = n(39), s = n(3);
    e.exports = function() {
        function e() {
            var e = a.getContext();
            this.load = function(t) {
                u ? (e.removeStorage({
                    key: n
                }), o(t) && t()) : (n = "aplus_cache_" + i.getAppKey() || "", e.getStorage({
                    key: n,
                    success: function(a) {
                        u = a && a.data ? r.parse(a.data) || {} : {}, c = !0, e.removeStorage({
                            key: n
                        }), o(t) && t();
                    },
                    fail: function() {
                        u = {}, c = !0, e.removeStorage({
                            key: n
                        }), o(t) && t();
                    }
                }));
            }, this.save = function() {
                u && e.setStorage({
                    key: n,
                    data: r.stringfy(u)
                });
            }, this.set = function(e, t) {
                u && (u[e] = t);
            }, this.get = function(e) {
                return (u || {})[e];
            }, this.remove = function(e) {
                u && u[e] && delete u[e];
            }, this.getAll = function() {
                return u;
            }, this.clear = function() {
                u = null;
            }, this.has = function(e) {
                return !!this.get(e);
            }, this.isLoaded = function() {
                return c;
            }, this.getSync = function(e) {
                try {
                    var t = a.getStorageSync(e);
                    return e === s.APLUS_IMPRINT_VERSION ? t : "string" == typeof t ? r.parse(t) : t;
                } catch (e) {}
            }, this.setSync = function(e, t) {
                try {
                    "object" == typeof t ? a.setStorageSync(e, JSON.stringify(t)) : a.setStorageSync(e, t);
                } catch (e) {}
            };
        }
        var t = null, n = "", u = null, c = !1;
        return function() {
            return t || (t = new e()), t;
        };
    }();
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(3);
    e.exports = function() {
        return {
            getMetaInfo: function() {
                var e = a.getGoldlogVal("_$") || {}, t = e.meta_info;
                return t;
            },
            getAplusWaiting: function() {
                var e = this.getMetaInfo() || {};
                return e["aplus-waiting"];
            },
            run: function(e, t) {
                var n = this.options.config || {}, a = this.getAplusWaiting();
                if (a && n.is_auto) switch (a = this.getAplusWaiting() + "", this.options.context.when_to_sendpv = {
                    aplusWaiting: a
                }, a) {
                  case o._USER_ID:
                  case o._ANONY_ID:
                  case "MAN":
                    return "done";

                  case "1":
                    return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                        t();
                    }, 6e3), 6e3;

                  default:
                    var r = 1 * a;
                    if (r + "" != "NaN") return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                        t();
                    }, r), r;
                }
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(95), o = n(2), r = n(8), i = n(39), s = "POST", u = "GET";
    e.exports = function() {
        return {
            getMetaInfo: function() {
                var e = o.getGoldlogVal("_$") || {}, t = e.meta_info;
                return t;
            },
            getAplusMetaByKey: function(e) {
                var t = this.getMetaInfo() || {};
                return t[e];
            },
            getRhost: function() {
                var e = this.getAplusMetaByKey("aplus-rhost-v");
                return i.checkDomain(e) ? e : "";
            },
            getHjljHostUrl: function(e) {
                e = i.fixDomain(e);
                var t = "/web_logs", n = e + t;
                return n;
            },
            getPvHostUrl: function(e) {
                e = i.fixDomain(e);
                var t = /\/$/.test(e) ? "" : "/", n = "v.gif";
                return a.isMobile() && (n = "m.gif"), e + t + n;
            },
            getChannel: function(e) {
                var t, n = this.getAplusMetaByKey("aplus-channel"), a = [ "WS", "WS-ONLY", u, s ];
                return a.indexOf(e) > -1 && (t = e), !t && a.indexOf(n) > -1 && (t = n), t;
            },
            run: function() {
                var e = o.getGlobalValue("aplus"), t = !!this.options.context.is_single;
                if (!t) {
                    var n = this.options.config.recordType, a = this.getRhost(n);
                    if (!a) return r().w("current request domain invalid, please check your aplus-rhost-v value inside metainfo!"), 
                    "done";
                    var i;
                    i = "PV" !== n || e._h5_share_enable ? this.getHjljHostUrl(a) : this.getPvHostUrl(a);
                    var c = this.options.config || {}, l = this.getChannel(c.method) || s;
                    l !== s || navigator && navigator.sendBeacon || (l = u), this.options.context.where_to_send.method = c.method, 
                    this.options.context.where_to_send.url = i;
                }
            }
        };
    };
}, function(e, t) {
    "use strict";
    t.isMobile = function() {
        var e = navigator ? navigator.userAgent : "", t = /AliApp|Yunos|cyclone/i.test(e), n = /iPhone|iPad|iPod/i.test(e), a = /Android/i.test(e), o = /Windows Phone/i.test(e) || /IEMobile/i.test(e) || /WPDesktop/i.test(e), r = /BlackBerry/i.test(e), i = /Opera Mini/i.test(e);
        return t || n || a || o || r || i;
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        var e = {}, t = s.getUrlParams();
        try {
            f(t, function(t, n) {
                0 === t.indexOf("utm_") && (e[t] = n);
            });
        } catch (e) {}
        return e;
    }
    var o = n(88), r = n(8), i = n(97), s = n(34), u = n(95), c = n(2), l = n(3), p = n(98), f = n(50), g = n(35), d = s.getUrlParams();
    e.exports = function() {
        return {
            getCommonParams: function() {
                var e = c.getGlobalValue("aplus"), t = e.getMetaInfo("aplus-globaldata") || {}, n = this.options.context || {}, f = n.etag || {}, d = n.userdata || {}, _ = c.getGoldlogVal("_$") || {}, h = this.options.config || {}, m = u.isMobile() ? "WAP" : "PC", v = {
                    _dev_id: e.getMetaInfo("_dev_id"),
                    _anony_id: e.getMetaInfo(l._ANONY_ID),
                    _user_id: e.getMetaInfo(l._USER_ID),
                    _user_nick: e.getMetaInfo("_user_nick") || o.getCookie("tracknick"),
                    _session_id: e.getMetaInfo("_session_id")
                };
                e.globalConfig.isUM || (v._page_title = document.title || "");
                var y = h.pageUrl || (location ? location.href : "-"), b = h.title || document && document.title, w = (e.globalConfig.isDecodeUrl ? "DC_" : "") + i.getLogId(y, b), A = e.getMetaInfo("appKey") || e.getMetaInfo("appId");
                A || r().w("please set appId in aplus metaInfo before sendPV!");
                var E = s.assign({
                    appId: A,
                    cache: w,
                    cna: f.cna || o.getCookieCna("cna") || t.cna || "",
                    _abfpc: t._abfpc || "",
                    etag: f,
                    pre: _.page_referrer || "-",
                    sdk_info: {
                        jsver: e.globalConfig.script_name,
                        lver: e.globalConfig.lver,
                        customSdkId: e.getMetaInfo("customSdkId") || "",
                        platformType: m.toLowerCase()
                    },
                    trackerEventCode: h.trackerEventCode,
                    title: b,
                    url: y,
                    client: e._aplus_client || {},
                    timeZone: p.getTimeZone(),
                    gokey: v,
                    gmkey: d.gmkey || "",
                    method: this.options.context.where_to_send.method
                }, v);
                if (!e.globalConfig.isUM) {
                    var S = a(), T = e.getMetaInfo("aplus-global-args");
                    s.isEmptyObject(T) && s.isEmptyObject(S) || (E.globalArgs = g(T, S));
                }
                return E;
            },
            getPvParams: function() {
                var e = this.getCommonParams(), t = c.getGlobalValue("aplus");
                return this.options.config.is_auto || (e.sdk_info.mansndlog = 1), t.globalConfig.isUM || (e.gokey = s.assign(d, e.gokey)), 
                s.assign(e, {
                    event_code: "2001",
                    logtype: "1",
                    logkey: u.isMobile() ? "/m.gif" : "/v.gif",
                    event_timestamp: t._$.send_pv_count > 0 ? new Date() : t.logConfig.pageLoadTime,
                    is_auto: this.options.config.is_auto,
                    track_type: this.options.config.track_type
                });
            },
            getHjljParams: function() {
                var e = this.options.context || {}, t = e.userdata || {}, n = {
                    event_code: l.EVENT_ID_MAP[t.gmkey] || l.OTHER,
                    logtype: "2",
                    logkey: t.logkey,
                    event_timestamp: new Date()
                };
                return s.assign(this.getCommonParams(), n);
            },
            run: function() {
                var e = {};
                e = "PV" === this.options.config.recordType ? this.getPvParams() : this.getHjljParams(), 
                this.options.context.what_to_send.logdata = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t, n) {
        return e ? o.hash(encodeURIComponent(e)).substr(0, t) : n;
    }
    var o = n(53), r = function(e) {
        function t(e) {
            var t = "0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ", n = "0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ";
            return 1 == e ? t.substr(Math.floor(60 * Math.random()), 1) : 2 == e ? n.substr(Math.floor(60 * Math.random()), 1) : "0";
        }
        for (var n, a = "", o = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", r = !1; a.length < e; ) n = o.substr(Math.floor(62 * Math.random()), 1), 
        !r && a.length <= 2 && ("g" == n.toLowerCase() || "l" == n.toLowerCase()) && (0 === a.length && "g" == n.toLowerCase() ? Math.random() < .5 && (n = t(1), 
        r = !0) : 1 == a.length && "l" == n.toLowerCase() && "g" == a.charAt(0).toLowerCase() && (n = t(2), 
        r = !0)), a += n;
        return a;
    };
    t.getLogId = function(e, t) {
        var n = r(8), o = n.substr(0, 4), i = n.substr(0, 6);
        return [ a(e, 4, o), a(t, 4, o), i ].join("");
    };
}, function(e, t) {
    t.getTimeZone = function() {
        var e = -new Date().getTimezoneOffset() / 60, t = "+";
        e < 0 && (t = "-");
        var n = Math.abs(parseInt(e)), a = Math.abs(parseInt(e) - e), o = "00";
        return a > 0 && (o = 60 * a), "GMT" + t + (n > 9 ? n : "0" + n) + ":" + o;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(33), o = n(100), r = n(34), i = n(2);
    e.exports = function() {
        return {
            getUserdata: function() {
                var e = i.getGlobalValue("aplus"), t = this.options.config || {}, n = {};
                t && !t.is_auto && t.gokey && ("string" == typeof t.gokey ? n = a.param2obj(t.gokey) : "object" == typeof t.gokey && (n = t.gokey));
                var s = function(e) {
                    o(e) ? e.forEach(function(e) {
                        n = r.assign(n, e);
                    }) : n = r.assign(n, e);
                };
                s(e.getMetaInfo("aplus-globaldata")), s(e.getMetaInfo("aplus-cpvdata"));
                var u = this.options.context || {}, c = u.userdata || {};
                return s(c), n;
            },
            processLodashDollar: function() {
                var e = this.options.config || {}, t = i.getGoldlogVal("_$") || {};
                e && e.referrer && (t.page_referrer = e.referrer), i.setGoldlogVal("_$", t);
            },
            updatePre: function(e) {
                var t = i.getGoldlogVal("_$") || {};
                return t.page_referrer && (e.pre = t.page_referrer), e;
            },
            run: function() {
                var e = this.options.context.what_to_send.logdata, t = r.assign(this.getUserdata(), e.userdata || {});
                this.processLodashDollar(), e.gokey = r.assign(e.gokey, t), e = this.updatePre(e), 
                this.options.context.what_to_send.logdata = e, this.options.context.userdata = e.gokey;
            }
        };
    };
}, function(e, t) {
    "use strict";
    e.exports = function(e) {
        return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
    };
}, function(e, t, n) {
    "use strict";
    var a = n(102), o = n(103), r = n(35);
    e.exports = function() {
        return {
            getExParamsInfo: function() {
                var e = a.getExParams();
                return this.options.context.what_to_send.logdata.exparams = e, o(e);
            },
            run: function() {
                var e = this.options.context.what_to_send.logdata.gokey;
                e = r(this.getExParamsInfo(), e), this.options.context.what_to_send.logdata.gokey = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        for (var t, n = e.split("&"), a = 0, o = n.length, r = []; a < o; a++) t = n[a].split("="), 
        r.push([ t.shift(), t.join("=") ]);
        return r;
    }
    function o(e, t) {
        var n = "aplus&sidx=aplusSidex&ckx=aplusCkx", a = e || n;
        try {
            if (t) {
                var o = u.param2obj(t), r = [ d.APLUS, "cna", d.SPM_CNT, d.SPM_URL, d.SPM_PRE, "logtype", "pre", "uidaplus", "asid", "sidx", "trid", "gokey" ];
                s(r, function(e) {
                    o.hasOwnProperty(e) && (g().w("Can not inject keywords: " + e), delete o[e]);
                }), delete o[""];
                var i = "";
                if (e) {
                    var l = e.match(/aplus&/).index, p = l > 0 ? u.param2obj(e.substring(0, l)) : {};
                    delete p[""], i = u.obj2param(c.assign(p, o)) + "&" + e.substring(l, e.length);
                } else i = u.obj2param(o) + "&" + n;
                return i;
            }
            return a;
        } catch (e) {
            return a;
        }
    }
    function r() {
        var e = aplus && aplus._$ ? aplus._$ : {}, t = e.meta_info || {};
        return t["aplus-exparams"] || "";
    }
    function i() {
        var e = l.getCurrentNode(), t = p.tryToGetAttribute(e, "exparams"), n = o(t, r()) || "";
        return n && n.replace(/&amp;/g, "&").replace(/\buser(i|I)d=/, "uidaplus=");
    }
    var s = n(10), u = n(33), c = n(34), l = n(49), p = n(29), f = n(48), g = n(8), d = n(3);
    t.mergeExparams = o, t.getExParams = i, t.getExparamsInfos = function(e, t) {
        var n = {}, o = e || [ "uidaplus", "pc_i", "pu_i" ], r = i() || "";
        r = r.replace(/&aplus&/, "&");
        for (var s = a(r) || [], u = function(e) {
            return f.indexof(o, e) > -1;
        }, c = 0; c < s.length; c++) {
            var l = s[c], p = l[0] || "", g = l[1] || "";
            p && g && ("EXPARAMS" === t || u(p)) && (n[p] = g);
        }
        return n;
    };
}, function(e, t, n) {
    var a = n(33);
    e.exports = function(e) {
        var t = {};
        try {
            var n = a.param2obj(e.replace(/&amp;/g, "&").replace(/\buser(i|I)d=/, "uidaplus=").replace(/&aplus&/, "&"));
            n.uidaplus && (t.uidaplus = n.uidaplus), t.pc_i = n.pc_i, t.pu_i = n.pu_i;
        } catch (e) {
            console && console.log(e);
        }
        return t;
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        var t, n, a, o, i = [], s = {};
        for (t = e.length - 1; t >= 0; t--) n = e[t], a = n[0], a && a.indexOf(r.s_plain_obj) == -1 && s.hasOwnProperty(a) || (o = n[1], 
        ("aplus" == a || o) && (i.unshift([ a, o ]), s[a] = 1));
        return i;
    }
    function o(e) {
        var t, n, a, o, i = [], u = {
            logtype: !0,
            cache: !0,
            scr: !0,
            "spm-cnt": !0
        };
        for (t = e.length - 1; t >= 0; t--) if (n = e[t], a = n[0], o = n[1], !(s.isStartWith(a, r.s_plain_obj) && !s.isStartWith(a, r.mkPlainKeyForExparams()) || u[a])) if (s.isStartWith(a, r.mkPlainKeyForExparams())) {
            var c = r.param2arr(o);
            if ("object" == typeof c && c.length > 0) for (var l = c.length - 1; l >= 0; l--) {
                var p = c[l];
                p && p[1] && i.unshift([ p[0], p[1] ]);
            }
        } else i.unshift([ a, o ]);
        return i;
    }
    var r = n(39), i = n(48), s = n(34), u = n(2), c = n(88), l = n(26), p = n(3);
    e.exports = function() {
        return {
            keyIsAvailable: function(e) {
                var t = [ "functype", "funcId", "spm-cnt", "spm-url", "spm-pre", "_ish5", "_is_g2u", "_h5url", "cna", "isonepage", "lver", "jsver" ];
                return i.indexof(t, e) === -1;
            },
            valIsAvailable: function(e) {
                return "object" != typeof e && "function" != typeof e;
            },
            upUtData: function(e, t) {
                var n = this;
                if (e = e ? e : {}, t && "object" == typeof t) for (var a in t) {
                    var o = t[a];
                    a && n.valIsAvailable(o) && n.keyIsAvailable(a) && (e[a] = o);
                }
                return e;
            },
            getToUtData: function() {
                var e = u.getGoldlogVal("_$") || {}, t = u.getGlobalValue(p.APLUS), n = e.spm || {}, i = this.options.context || {}, s = this.options.config || {}, f = i.what_to_send || {}, g = f.logdata || {}, d = g.sdk_info || {}, _ = this.options.context.etag || {}, h = o(a(g.exparams || []));
                h = r.arr2obj(h);
                var m = i.userdata, v = location.href, y = {}, b = l.getParamFromUrl("scm", v) || "";
                b && (y.scm = b);
                var w = l.getParamFromUrl("pg1stepk", v) || "";
                w && (y.pg1stepk = w);
                var A = l.getParamFromUrl("point", v) || "";
                A && (y.issb = 1), d && d.mansndlog && (y.mansndlog = d.mansndlog), y = this.upUtData(y, h), 
                y = this.upUtData(y, g.gokey), y = this.upUtData(y, m), y.functype = "page", y.funcId = "2001", 
                t && t.globalConfig && t.globalConfig.isAli ? y.url = (location.protocol || "https:") + "//" + location.host + location.pathname : y.url = location.href, 
                s.pageName && (y.url = s.pageName), y._ish5 = "1", y._h5url = v, y._toUT = 2, y._bridgeName = "WindVane", 
                y._bridgeVersion = "3.0.7", n.spm_cnt && (y[p.SPM_CNT] = n.spm_cnt || ""), n.spm_url && (y[p.SPM_URL] = n.spm_url || ""), 
                n.spm_pre && (y[p.SPM_PRE] = n.spm_pre || ""), y.cna = _.cna || c.getCookieCna("cna"), 
                y.lver = d.lver, y.jsver = d.jsver, y.pver = "1.0.0", y.isonepage = -1;
                var E = t.getMetaInfo("aplus-utparam");
                return E && (y["utparam-cnt"] = JSON.stringify(E)), y._is_g2u_ = 1, y._slog = 1, 
                y;
            },
            run: function() {
                var e = this.options.context || {}, t = e.what_to_send || {};
                t.pvdataToUt = this.getToUtData(), this.options.context.what_to_send = t;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(34), o = n(7), r = n(3), i = n(81);
    e.exports = function() {
        return {
            getToNativeData: function() {
                var e = this.options.context || {}, t = a.cloneDeep(e.userdata) || {}, n = e.what_to_send || {}, s = n.logdata || {}, u = s.sdk_info || {}, c = this.options.context.etag || {}, l = {}, p = {}, f = {};
                return p.cna = c.cna, p.lver = u.lver, p.jsver = u.jsver, p.id = r.PAGE_START, p.ts = Date.now(), 
                p.r = s.arg1 || s.logkey || "-", p.is_h5 = "1", t.hasOwnProperty("autosend") || s.is_auto || "1" === s.track_type ? p.is_auto = 1 : p.is_auto = 0, 
                p.track_type = p.is_auto + "", f = a.cloneDeep(o.deleteInfo(t, [ "_anony_id", "_dev_id", "_session_id", "_src_pos_id", "_user_id", "_user_nick", "_abfpc", "cna" ])), 
                f.duration && (p.duration = f.duration, delete f.duration), f.page_start && (p.page_start = f.page_start, 
                delete f.page_start), s.url && (p.page_name = i.getPageName(location.pathname, f), 
                p.url = s.url || "-", p["spm-cnt"] = encodeURIComponent(p.page_name)), s.pre && (p.ref_url = s.pre || "-"), 
                f.ts && delete f.ts, l.sdkArgs = a.cloneDeep(p), l.cusp = f, l;
            },
            run: function() {
                var e = this.options.context || {}, t = e.what_to_send || {};
                t.pvdataToUmNative = this.getToNativeData(), this.options.context.what_to_send = t;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(107);
    e.exports = function() {
        return {
            run: function() {
                var e = a.getGoldlogVal("_$") || {}, t = this.options.context.can_to_sendpv || {}, n = e.send_pv_count || 0, r = this.options.config || {};
                return r.is_auto && n > 0 || !o.canSendPV(r.track_type) ? "done" : (t.flag = "YES", 
                this.options.context.can_to_sendpv = t, e.send_pv_count = ++n, void a.setGoldlogVal("_$", e));
            }
        };
    };
}, function(e, t, n) {
    function a(e) {
        var t = r.getGlobalValue(i.APLUS), n = t.getMetaInfo(i.APLUS_EVENT_LIMITRATES);
        if (n && n.length > 0) {
            var a = c.find(n, function(t) {
                return t.eventId === e;
            });
            if (a) {
                var o = Math.ceil(1e3 * Math.random());
                return o < 1e3 * a.samplingRate;
            }
            return !0;
        }
        return !0;
    }
    function o() {
        var e = r.getGlobalValue("aplus"), t = e.globalConfig.isUM;
        return !!t;
    }
    var r = n(2), i = n(3), s = n(91), u = n(108), c = n(48), l = n(83), p = n(34), f = n(39);
    t.canToSendHJLJ = function(e, t) {
        var n = s.getDeviceStatus();
        if (!n) try {
            var o = l.getContext();
            return p.isEmptyObject(o) ? void 0 : t === i.APP_START || t === i.APP_END;
        } catch (e) {}
        var r = s.getAutoTrackStatus(), c = s.getAutoEventStatus(), g = u.getAutoTrackStatus(), d = {};
        if (d = "string" == typeof e ? f.arr2obj(f.param2arr(e)) : e, d.auto_element) {
            if (2 === c || 2 === r) return;
            if (!r && !g) return;
        }
        if (a(t)) return !0;
    }, t.canSendPV = function(e) {
        if (!o()) return !0;
        var t = s.getDeviceStatus(), n = s.getAutoPageStatus(), a = u.localAutoPVDisabled(), r = !0;
        if (t) {
            if ("1" === e) return !(2 === n || !n && a);
        } else r = !1;
        return r;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(3), o = n(2);
    t.localAutoEventDisabled = function() {
        var e = o.getGlobalValue("aplus");
        return !!e.getMetaInfo(a.APLUS_DISABLE_AUTOEVENT);
    }, t.localAutoPVDisabled = function() {
        var e = o.getGlobalValue("aplus");
        return !(!e.getMetaInfo(a.APLUS_DISABLE_AUTOPV) && "MAN" !== e.getMetaInfo("aplus-waiting"));
    }, t.getAutoTrackStatus = function() {
        var e = o.getGlobalValue("aplus");
        return !!e.getMetaInfo(a.APLUS_AUTOTRACK_ENABLED);
    };
}, function(e, t, n) {
    "use strict";
    var a = n(42), o = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = o.getGlobalValue("aplus"), t = e._$ || {}, n = this.options.context || {};
                o.setGoldlogVal("pv_context", n);
                var r = e.spm_ab || [], i = r.join("."), s = t.send_pv_count, u = {
                    cna: n.etag ? n.etag.cna : "",
                    count: s,
                    spmab_pre: e.spmab_pre
                };
                a.doPubMsg([ "sendPV", "complete", i, u ]), a.doCachePubs([ "sendPV", "complete", i, u ]);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(33), o = n(100), r = n(34), i = n(2);
    e.exports = function() {
        return {
            getUserData: function() {
                var e = i.getGlobalValue("aplus"), t = this.options.context || {}, n = t.userdata || {}, s = t.what_to_send.logdata.gokey;
                s = r.assign(s, e.getMetaInfo("aplus-globaldata")), s = r.assign(s, a.param2obj(n.gokey));
                var u = e.getMetaInfo("aplus-exinfo");
                u && (s = r.assign(s, a.param2obj(u)));
                var c = e.getMetaInfo("aplus-exdata");
                return o(c) ? c.forEach(function(e) {
                    s = r.assign(s, e);
                }) : s = r.assign(s, e.getMetaInfo("aplus-exdata")), s;
            },
            run: function() {
                this.options.context.what_to_send.logdata.gokey = this.getUserData();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(102), o = n(103), r = n(34);
    e.exports = function() {
        return {
            getExParamsInfo: function() {
                var e = a.getExParams();
                return this.options.context.what_to_send.logdata.exparams = e, o(e);
            },
            run: function() {
                var e = this.options.context.what_to_send.logdata.gokey;
                e = r.assign(this.getExParamsInfo(), e), this.options.context.what_to_send.logdata.gokey = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(3);
    e.exports = function() {
        return {
            getToUtData: function() {
                var e = a.getGoldlogVal("_$") || {}, t = a.getGlobalValue(o.APLUS), n = e.spm || {}, r = this.options.context || {}, i = r.userdata || {}, s = r.etag || {}, u = r.what_to_send || {}, c = u.logdata || {}, l = c.sdk_info || {}, p = c.gokey || {}, f = [], g = "";
                for (var d in p) if ([ o.SPM_CNT, o.SPM_URL, o.SPM_PRE ].indexOf(d) === -1) {
                    var _ = p[d];
                    "undefined" !== p[d] && void 0 !== p[d] || (_ = ""), f.push(d + "=" + _);
                }
                f.length > 0 && (g = f.join("&"));
                var h = location.href, m = {};
                m.functype = "ctrl", m.funcId = c.event_code, t && t.globalConfig && t.globalConfig.isAli ? m.url = (location.protocol || "https:") + "//" + location.host + location.pathname : m.url = location.href, 
                p.pageName && (m.url = p.pageName), m.logkey = c.logkey, m.gokey = encodeURIComponent(g), 
                m.gmkey = c.gmkey, m._ish5 = "1", m._h5url = h, m._is_g2u_ = 1, m._slog = 1, m._toUT = 2, 
                m._bridgeName = "WindVane", m._bridgeVersion = "3.0.7", n.spm_cnt && (m[o.SPM_CNT] = n.spm_cnt || ""), 
                n.spm_url && (m[o.SPM_URL] = n.spm_url || ""), n.spm_pre && (m[o.SPM_PRE] = n.spm_pre || ""), 
                m.cna = s.cna, m.lver = l.lver, m.jsver = l.jsver, i.hasOwnProperty("autosend") && (m.autosend = i.autosend);
                var v = t.getMetaInfo("aplus-utparam");
                return v && (m["utparam-cnt"] = JSON.stringify(v)), m;
            },
            run: function() {
                var e = this.options.context || {}, t = e.what_to_send || {};
                t.pvdataToUt = this.getToUtData(), this.options.context.what_to_send = t;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(34), o = n(7), r = n(39), i = n(81);
    e.exports = function() {
        return {
            getToNativeData: function() {
                var e = this.options.context || {}, t = e.userdata || {}, n = e.etag || {}, s = e.what_to_send || {}, u = s.logdata || {}, c = u.sdk_info || {}, l = {}, p = {}, f = {};
                if (p.cna = n.cna, p.lver = c.lver, p.jsver = c.jsver, p.id = t.logkey || "-", p.ts = Date.now(), 
                p.is_h5 = "1", p.event_type_id = u.event_code, t.gokey) switch (typeof t.gokey) {
                  case "string":
                    p.is_auto = !!t.gokey.match("is_auto");
                    break;

                  case "object":
                    p.is_auto = t.gokey.is_auto;
                    break;

                  default:
                    p.is_auto = 0;
                } else p.is_auto = 0;
                p.track_type = p.is_auto || "0", f = "string" == typeof t.gokey ? r.arr2obj(r.param2arr(t.gokey || "")) : a.cloneDeep(o.deleteInfo(t.gokey, [ "_anony_id", "_dev_id", "_session_id", "_src_pos_id", "_user_id", "_user_nick" ])), 
                u.url && (p.page_name = i.getPageName(location.pathname, f), p.url = u.url || "-", 
                p.page_name && f.spmC && (p["spm-cnt"] = [ encodeURIComponent(p.page_name), encodeURIComponent(f.spmC), encodeURIComponent(f.spmD) ].filter(function(e) {
                    return !!e;
                }).join("."), delete f.spmC, delete f.spmB, delete f.spmD)), f.ts && delete f.ts;
                var g = a.cloneDeep(f);
                for (var d in g) "string" == typeof d && o.startsWith(d, "_") && (p[d] = g[d], delete f[d]);
                l.sdkArgs = a.cloneDeep(p);
                var _ = a.cloneDeep(f);
                return l.cusp = _, _.ap && (l.ap = _.ap, delete _.ap), l;
            },
            run: function() {
                var e = this.options.context || {}, t = e.what_to_send || {};
                t.hjljdataToUmNative = this.getToNativeData(), this.options.context.what_to_send = t;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(115)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(49), o = n(116);
    e.exports = function() {
        var e = {
            isTouchEnabled: a.isTouch()
        };
        o.run(e);
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        for (var t, n; e && (t = e.tagName); ) {
            if ("A" === t) {
                n = !0;
                break;
            }
            if ("BODY" == t || "HTML" == t) break;
            e = e.parentNode;
        }
        return n ? e : "";
    }
    function o(e) {
        var t, n = !1;
        try {
            for (var a; e && (a = e.tagName) && !(t = e && e.getAttribute ? e.getAttribute("data-aplus-pos-id") : ""); ) {
                if ("BODY" == a || "HTML" == a) {
                    t = "PAGE";
                    break;
                }
                e = e.parentNode;
            }
        } catch (e) {}
        return {
            _pos_id: t,
            alinkEl: e,
            isPage: n
        };
    }
    function r(e) {
        var t = aplus.getMetaInfo("aplus-auto-clk") || [], n = {};
        return "PAGE" === e ? t[0] || {} : (f(t, function(t) {
            if (t._pos_id === e) return n = t, "break";
        }), n);
    }
    function i(e, t) {
        if (e && /&?\b_src_pos_id=[^&#]*/.test(e) && (e = e.replace(/&?\b_src_pos_id=[^&#]*/g, "").replace(/&{2,}/g, "&").replace(/\?&/, "?").replace(/\?$/, "")), 
        !t) return e;
        var n, a, o, r, i, s, u, c = "&";
        e.indexOf("#") !== -1 && (o = e.split("#"), e = o.shift(), a = o.join("#")), r = e.split("?"), 
        i = r.length - 1, o = r[0].split("//"), o = o[o.length - 1].split("/"), s = o.length > 1 ? o.pop() : "", 
        i > 0 && (n = r.pop(), e = r.join("?")), n && i > 1 && n.indexOf("&") == -1 && n.indexOf("%") !== -1 && (c = "%26");
        var l = "";
        if (e = e + "?_src_pos_id=" + l + t + (n ? c + n : "") + (a ? "#" + a : ""), u = d.isContain(s, ".") ? s.split(".").pop().toLowerCase() : "") {
            if ({
                png: 1,
                jpg: 1,
                jpeg: 1,
                gif: 1,
                bmp: 1,
                swf: 1
            }.hasOwnProperty(u)) return 0;
            !n && i <= 1 && (a || {
                htm: 1,
                html: 1,
                php: 1,
                aspx: 1,
                shtml: 1,
                xhtml: 1
            }.hasOwnProperty(u) || (e += "&file=" + s));
        }
        return e;
    }
    function s(e, t) {
        var n = e.getElementsByTagName("a"), a = r(t) || {}, s = v.page || {}, u = a.spmB || s.spmB;
        if (u) {
            var c = 1;
            f(n, function(e) {
                var n = o(e), a = n._pos_id;
                if (t === a) {
                    var r = "PAGE" === t ? [ u, c++ ].join(".") : [ u, t, c++ ].join(".");
                    aplus._current_spm = r;
                    var s = window.aplus_queue || (window.aplus_queue = []);
                    s.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-cpvdata", {
                            _src_pos_id: r
                        } ]
                    });
                    try {
                        e && e.setAttribute && (e.getAttribute("aplus-anchor-id") || (e.setAttribute("aplus-anchor-id", r), 
                        e.href && "#" !== e.href && e.setAttribute("href", i(e.href, r))));
                    } catch (e) {
                        console.log(e);
                    }
                }
            });
        }
    }
    function u(e, t) {
        var n, r = a(t);
        if (r && (n = r.getAttribute("aplus-anchor-id"), !n)) {
            var i = o(r);
            n = i._pos_id, s(i.alinkEl, n);
        }
        return n;
    }
    function c(e) {
        var t = window.aplus_queue || (window.aplus_queue = []), n = e || _.getParamFromUrl("_src_pos_id", location.href);
        t.push({
            action: "aplus.appendMetaInfo",
            arguments: [ "aplus-cpvdata", {
                _src_pos_id: n
            } ]
        }), t.push({
            action: "aplus.appendMetaInfo",
            arguments: [ "aplus-exdata", {
                _src_pos_id: n
            } ]
        }), t.push({
            action: "aplus.aplus_pubsub.subscribe",
            arguments: [ m.MW_CHANGE_PV, function(e) {
                "complete" === e.status && aplus.appendMetaInfo("aplus-cpvdata", {
                    _src_pos_id: ""
                });
            } ]
        });
    }
    function l() {
        h.pushIntoGoldlogQueue(m.SUBSCRIBE, [ m.CURRENT_PAGE_CONFIG, function(e) {
            v = e || {};
        } ]);
    }
    function p() {
        if (aplus && aplus.globalConfig && aplus.globalConfig.isUM) ; else {
            var e = window.aplus_queue || (window.aplus_queue = []);
            e.push({
                action: "aplus.setMetaInfo",
                arguments: [ "aplus-auto-clk-userfn", function(e) {
                    var t = e ? e.getAttribute("aplus-anchor-id") : "";
                    if (t) return "_pos_id=" + t;
                    var n = e ? e.getAttribute("data-aplus-pos-id") : "", a = n ? r(n) : {};
                    if (a.spmB && a._pos_id) {
                        var o = [ a.spmB, n ].join(".");
                        return "_pos_id=" + o;
                    }
                    return "";
                } ]
            });
        }
    }
    var f = n(10), g = n(13), d = n(34), _ = n(26), h = n(27), m = n(3), v = {};
    t.run = function(e) {
        var t = document;
        c(), l(), p(), window.aplus.doTrace = u, e && e.isTouchEnabled ? g.on(t, "tapSpm", u) : (g.on(t, "mousedown", u), 
        g.on(t, "keydown", u));
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(118)(this.options.context.logConfig);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(42), o = n(2);
    e.exports = function(e) {
        var t = o.getGlobalValue("aplus");
        if (!t._aplus_api) {
            t._aplus_api = {
                status: "complete"
            };
            var r = n(119).run.create({
                logConfig: e
            });
            for (var i in r) t[i] = r[i];
            n(126).makePVId();
            var s = [ "aplusReady", "complete" ];
            a.doPubMsg(s), a.doCachePubs(s);
        }
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        var e = 5e3;
        try {
            var t = g.getGlobalValue("aplus"), n = t.getMetaInfo("aplus-mmstat-timeout");
            if (n) {
                var a = parseInt(n);
                a >= 1e3 && a <= 1e4 && (e = a);
            }
        } catch (e) {}
        return e;
    }
    function o(e, t, n) {
        var a = e[0], o = e[1], r = (n || {}).spm, i = (n || {}).logkey, s = 1;
        if (r && r[a]) {
            var u = r[a];
            s = u.cp, u[o] && (s = u[o].cp);
        } else i && i[t] && (s = i[t]);
        var c = Math.ceil(Math.random() * Math.floor(1 / s));
        return c;
    }
    var r = document, i = n(21), s = n(88), u = n(13), c = n(40), l = n(8), p = n(42), f = n(34), g = n(2), d = n(20), _ = n(3), h = n(27), m = n(120), v = n(48), y = n(107), b = n(123), w = n(32), A = n(124), E = [], S = [], T = [], P = [], I = function() {};
    t.run = i.extend({
        beforeSendPV: function(e) {
            E.push(e);
        },
        afterSendPV: function(e) {
            S.push(e);
        },
        launch: function() {
            c.logger({
                msg: "warning: This interface is deprecated, can not send pv log, please use goldlog.sendPV instead! API: http://log.alibaba-inc.com/log/info.htm?type=2277&id=31"
            });
        },
        send: function(e, t, n) {
            var o, r = g.getGlobalValue("aplus");
            if (/^\/\//.test(e)) {
                var i = _.HTTPS;
                /^\/\/(\d+\.){3,}\d+/.test(e) && (i = "http:"), e = i + e;
            }
            return o = "POST" === n && navigator && navigator.sendBeacon ? A.postData(e, t) : A.sendImg(e + "?" + t, a()), 
            r.req = o, o;
        },
        sendPV: function(e, t) {
            if (e = e || {}, f.any(E, function(t) {
                return t(n, e) === !1;
            })) return !1;
            var n = g.getGlobalValue("aplus"), a = n.getMetaInfo(_.APLUS_SKIP_APV_RULES) || [];
            if (!v.itemMatch(a, location.href) || !e.is_auto) {
                var o = new m();
                e.recordType = "PV";
                var r = n.globalConfig.isUM, i = n.globalConfig.isAli;
                (i || r) && "GET" !== e.method && (e.method = "POST");
                var s = n.logConfig.pv;
                return o.run({
                    plugins: s.plugins,
                    context: f.cloneDeep(s.context)
                }, {
                    config: e,
                    userdata: t,
                    pubsubType: "pv",
                    messageFnQueue: S,
                    middlewareMessageKey: "mw_change_pv"
                }), !0;
            }
        },
        pageEnter: function(e) {
            h.pushIntoGoldlogQueue(_.PUBLISH, [ _.PAGE_ENTER, e ]), h.pushIntoGoldlogQueue(_.CACHE_PUBS, [ _.PAGE_ENTER, e ]);
        },
        getParam: function(e) {
            var t = window.WindVane || {}, n = t && "function" == typeof t.getParam ? t.getParam(e) : "";
            return n;
        },
        beforeRecord: function(e) {
            T.push(e);
        },
        afterRecord: function(e) {
            P.push(e);
        },
        record: function(e, t, n, a, r) {
            var i = g.getGlobalValue("aplus"), s = i.globalConfig.isAli, u = i.globalConfig.isUM;
            if (e && 0 !== e.indexOf("/") && s && (e = "/" + e), f.any(T, function(e) {
                return e(i) === !1;
            })) return !1;
            var c = 1, l = i.spm_ab instanceof Array;
            if (s && l && i.spm_ab.length > 1 && (c = o(i.spm_ab, e, i.getMetaInfo("aplus-report-rate"))), 
            1 === c) {
                var p = new m(), _ = i.logConfig.hjlj;
                return u ? (y.canToSendHJLJ(n, e) && p.run({
                    plugins: _.plugins,
                    context: f.cloneDeep(_.context)
                }, {
                    config: {
                        recordType: "COMMON_HJLJ",
                        method: u ? a || "POST" : a
                    },
                    userdata: {
                        logkey: e,
                        gmkey: t,
                        gokey: n || {}
                    },
                    pubsubType: "hjlj",
                    messageFnQueue: P,
                    middlewareMessageKey: "mw_change_hjlj"
                }, function() {
                    d(r) && r();
                }), !0) : (p.run({
                    plugins: _.plugins,
                    context: f.cloneDeep(_.context)
                }, {
                    config: {
                        recordType: "COMMON_HJLJ",
                        method: u ? a || "POST" : a
                    },
                    userdata: {
                        logkey: e,
                        gmkey: t,
                        gokey: n || {}
                    },
                    pubsubType: "hjlj",
                    messageFnQueue: P,
                    middlewareMessageKey: "mw_change_hjlj"
                }, function() {
                    d(r) && r();
                }), !0);
            }
            return !1;
        },
        recordUdata: function(e, t, n, a, o) {
            var r = g.getGlobalValue("aplus"), i = new m(), s = r.logConfig.hjlj, u = r.globalConfig.isAli;
            return i.run({
                plugins: s.plugins,
                context: f.cloneDeep(s.context)
            }, {
                config: {
                    recordType: "DATACLICK_HJLJ",
                    method: u ? a : a || "POST"
                },
                userdata: {
                    logkey: e,
                    gmkey: t,
                    gokey: n || {}
                },
                pubsubType: "hjlj",
                messageFnQueue: P,
                middlewareMessageKey: "mw_change_hjlj"
            }, function() {
                d(o) && o();
            }), !0;
        },
        setPageSPM: function(e, t, n) {
            var a = g.getGlobalValue("aplus"), o = a.getMetaInfo("aplus-spm-fixed"), r = "function" == typeof n ? n : function() {};
            a.spm_ab = a.spm_ab || [];
            var i = f.cloneDeep(a.spm_ab);
            e && (a.spm_ab[0] = "" + e, a._$.spm.data.a = "" + e), t && (a.spm_ab[1] = "" + t, 
            a._$.spm.data.b = "" + t);
            var s = w.qGet();
            if (a.spmAPI && a.spmAPI.spaInit(a, s, i), "1" !== o) {
                var u = i.join(".");
                a.spmab_pre = u;
            }
            var c = [ "setPageSPM", {
                spmab_pre: a.spmab_pre,
                spmab: a.spm_ab.join(".")
            } ];
            p.doPubMsg(c), p.doCachePubs(c), b.resetMetaAndBody(), b.resetModules(), r();
        },
        getPageSPM: function() {
            var e = g.getGlobalValue("aplus");
            return e.spm_ab;
        },
        setMetaInfo: function(e, t, n) {
            var a, o, r = "OVERWRITE", i = r;
            if ("object" == typeof e ? (a = e.metaName, o = e.metaValue, i = e.mode || r) : (a = e, 
            o = t), i !== r) return this.appendMetaInfo(a, o);
            if (w.setMetaInfo(a, o, n)) {
                var s = g.getGoldlogVal("_$") || {};
                s.meta_info = w.qGet();
                var u = g.setGoldlogVal("_$", s), c = [ "setMetaInfo", a, o, n ];
                return p.doPubMsg(c), p.doCachePubs(c), u;
            }
        },
        appendMetaInfo: w.appendMetaInfo,
        updatePageProperties: function(e) {
            var t = g.getGlobalValue("aplus");
            e && "object" == typeof e ? (e._page && (e.pageName = e._page, t.setMetaInfo("aplus-pagename", e.pageName), 
            delete e._page), t.appendMetaInfo("aplus-cpvdata", e)) : l().w("warning: typeof updatePageProperties's params must be object");
        },
        updateNextPageProperties: function(e) {
            var t = g.getGlobalValue("aplus");
            "object" == typeof e ? t.appendMetaInfo("aplus-nextpage-properties", e) : l().w("warning: typeof updateNextPageProperties's params must be object");
        },
        getMetaInfo: function(e) {
            return w.getMetaInfo(e);
        },
        on: u.on,
        cloneDeep: f.cloneDeep,
        setCookie: s.setCookie,
        getCookie: s.getCookie,
        pageAppear: I,
        pageDisappear: I,
        updatePageUtparam: I,
        updateNextPageUtparam: I,
        updateSessionProperties: function(e) {
            var t = g.getGlobalValue("aplus");
            "object" == typeof e && t.setMetaInfo("_session_args", e);
        },
        setPageName: function(e) {
            if (!e || "string" != typeof e) return void l().w("setPageName failed:  pagename=" + e);
            var t = r.querySelector("body");
            try {
                t.setAttribute("data-pagename", e);
            } catch (e) {
                l().w("setPageName failed:  err=" + e);
            }
        },
        getPageName: function() {
            return window.document.body && window.document.body.dataset && window.document.body.dataset.pagename ? window.document.body.dataset.pagename : "";
        },
        getElementSPM: function(e) {
            if (e && e.dataset) return e.getAttribute("data-spm-anchor-id");
        },
        recordAppLink: function(e, t, n) {
            if (!e.targetAppKey) return l().w("send $$_app_link failed: targetAppKey is null"), 
            !1;
            var a = g.getGlobalValue("aplus");
            return a.record("$$_app_link", "OTHER", e, t, n);
        }
    });
}, function(e, t, n) {
    "use strict";
    var a = n(10), o = n(2), r = n(20), i = n(42), s = n(40), u = n(3), c = n(121), l = n(122), p = function() {};
    p.prototype.run = function(e, t, n) {
        var p = new l();
        p.init({
            middleware: [],
            config: t.config,
            plugins: e.plugins
        });
        var f = p.run(), g = r(e.context) ? new e.context() : e.context;
        g.userdata = t.userdata, g.logger = s.logger;
        var d = {
            context: g,
            pubsub: o.getGoldlogVal("aplus_pubsub"),
            pubsubType: t && t.pubsubType
        }, _ = new c();
        _.create(d), _.wrap(f, function() {
            d.context.status = u.COMPLETE, t && (t.middlewareMessageKey && i.doPubMsg([ t.middlewareMessageKey, d.context ]), 
            t.messageFnQueue && a(t.messageFnQueue, function(t) {
                t(o.getGlobalValue(u.APLUS), e);
            })), r(n) && n(d.context);
        })();
    }, e.exports = p;
}, function(e, t, n) {
    "use strict";
    function a() {}
    var o = n(20), r = n(48), i = n(8);
    a.prototype.create = function(e) {
        for (var t in e) "undefined" == typeof this[t] && (this[t] = e[t]);
        return this;
    }, a.prototype.calledList = [], a.prototype.setCalledList = function(e) {
        r.indexof(this.calledList, e) === -1 && this.calledList.push(e);
    }, a.prototype.resetCalledList = function() {
        this.calledList = [];
    }, a.prototype.wrap = function(e, t) {
        var n = this, a = this.context || {}, s = a.compose || {}, u = s.maxTimeout || 1e4;
        return function(a) {
            var s, c = e.length, l = 0, p = 0, f = function(g, d) {
                if (l === c) return a = "done", n.resetCalledList(), o(t) && d !== a && t.call(n, a), 
                void clearTimeout(s);
                if (r.indexof(n.calledList, l) === -1) {
                    if (n.setCalledList && n.setCalledList(l), !(e && e[l] && o(e[l][0]))) return;
                    try {
                        a = e[l][0].call(n, a, function() {
                            l++, p = 1, f(l);
                        });
                    } catch (e) {
                        i().w(e);
                    }
                }
                var _ = "number" == typeof a;
                if ("pause" === a || _) {
                    p = 0;
                    var h = _ ? a : u, m = e[l] ? e[l][1] : "";
                    s = setTimeout(function() {
                        0 === p && (i().w("jump the middleware about " + m + ", because waiting timeout maxTimeout = " + h), 
                        a = null, l++, f(l));
                    }, h);
                } else "done" === a ? (l = c, f(l, a)) : (l++, f(l));
            };
            return n.calledList && n.calledList.length > 0 && n.resetCalledList(), f(l);
        };
    }, e.exports = a;
}, function(e, t, n) {
    "use strict";
    var a = n(35), o = n(8);
    e.exports = function() {
        return {
            init: function(e) {
                this.opts = e, e && "object" == typeof e.middleware && e.middleware.length > 0 ? this.middleware = e.middleware : this.middleware = [], 
                this.plugins_name = [];
            },
            pubsubInfo: function(e, t) {
                try {
                    var n = e.pubsub;
                    n && n.publish("plugins_change_" + e.pubsubType, t);
                } catch (e) {
                    o().w(e);
                }
            },
            run: function(e) {
                e || (e = 0);
                var t = this, n = this.middleware, o = this.opts || {}, r = o.plugins;
                if (r && "object" == typeof r && r.length > 0) {
                    var i = r[e];
                    if (this.plugins_name.push(i.name), n.push([ function(e, n) {
                        t.pubsubInfo(this, i);
                        var r = new i.path();
                        return r.init || (r.init = function(e) {
                            this.options = e;
                        }), r.init({
                            context: this.context,
                            config: a(i.config || {}, o.config)
                        }), r.run(e, function(e) {
                            setTimeout(function() {
                                n(i, e);
                            }, 1);
                        });
                    }, i.name ]), e++, r[e]) return this.run(e);
                }
                return n;
            }
        };
    };
}, function(e, t, n) {
    function a(e) {
        var t, n, a, o, r = u.getElementsByTagName("meta");
        for (t = 0, n = r.length; t < n; t++) if (a = r[t], o = a.getAttribute("name"), 
        o === e) return a;
    }
    function o() {
        var e = u.createElement("meta");
        e.setAttribute("name", "data-spm");
        var t = u.getElementsByTagName("head")[0];
        return t && t.insertBefore(e, t.firstChild), e;
    }
    function r() {
        var e = s.getGlobalValue("aplus"), t = a("data-spm"), n = a("spm-id"), r = t || n;
        r || (t = o()), t && t.setAttribute("content", e.spm_ab[0] || ""), n && n.setAttribute("content", (e.spm_ab || []).join("."));
        var i = u.getElementsByTagName("body")[0];
        i && i.setAttribute("data-spm", e.spm_ab[1] || "");
    }
    function i() {
        var e, t, n, a = u.getElementsByTagName("*");
        for (e = 0, t = a.length; e < t; e++) n = a[e], n.getAttribute("data-spm-max-idx") && n.setAttribute("data-spm-max-idx", ""), 
        n.getAttribute("data-spm-anchor-id") && n.setAttribute("data-spm-anchor-id", "");
    }
    var s = n(2), u = document;
    t.resetMetaAndBody = r, t.resetModules = i;
}, function(e, t, n) {
    "use strict";
    function a(e, t, n, a) {
        var o = window || {}, r = new Image(), i = "_img_" + Math.random();
        o[i] = r;
        var s = function() {
            if (o[i]) try {
                delete o[i];
            } catch (e) {
                o[i] = void 0;
            }
        };
        return r.onload = function() {
            s(), n && n();
        }, r.onerror = function() {
            s(), a && a();
        }, setTimeout(function() {
            window[i] && (window[i].src = "", s());
        }, t || 5e3), r.src = e, r = null, e;
    }
    var o = n(125), r = n(40);
    t.sendImgCore = a, t.sendImg = function(e, t) {
        var n = function() {
            r.log("日志上报成功！");
        }, i = function() {
            o.toDynamicsNetwork();
        };
        a(e, t, n, i);
    }, t.postData = function(e, t) {
        return navigator.sendBeacon(e, t), e;
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        if ("dynamics" === t) {
            var n = [ "gm.mmstat.com", "wgo.mmstat.com" ];
            return n.indexOf(e) > -1 ? "d-" + e : e;
        }
    }
    function o(e) {
        function t() {
            var e = r.getGlobalValue("aplus"), t = e.getMetaInfo("aplus-rhost-g"), n = a(t, o);
            n !== t && e.setMetaInfo("aplus-rhost-g", n);
        }
        e = e || {};
        var n = e.maxCount || 1, o = e.networkType || "static", s = e.directSwitch || !1, u = 0;
        return function(e) {
            e = e || s, e ? t() : (++u, u >= n && (i.logger({
                lever: "warn",
                msg: "日志上报失败，注意，要切成动态网络啦!"
            }), t(), u = 0));
        };
    }
    var r = n(2), i = n(40);
    t.toDynamicsNetwork = o({
        maxCount: 1,
        networkType: "dynamics",
        directSwitch: !1
    });
}, function(e, t, n) {
    "use strict";
    function a() {
        var e, t = i.getGlobalValue("aplus");
        try {
            var n = t.getMetaInfo("aplus-disable-pvid") + "";
            "true" === n ? e = !0 : "false" === n && (e = !1);
        } catch (e) {}
        return e;
    }
    function o() {
        var e = i.getGlobalValue("aplus");
        return a() ? "" : e.pvid;
    }
    var r = n(42), i = n(2), s = n(97);
    t.isDisablePvid = a, t.makePVId = function() {
        var e = i.getGlobalValue("aplus"), t = e.pvid, n = location && location.href, u = document && document.title;
        e.pvid = s.getLogId(n, u), e.getPvId = o;
        var c = [ "pvidChange", {
            pre_pvid: t,
            pvid: e.pvid
        } ];
        return r.doPubMsg(c), r.doCachePubs(c), a() ? "" : e.pvid;
    }, t.getPvId = o;
}, function(e, t, n) {
    var a = n(13), o = n(102), r = n(38), i = n(35), s = n(88), u = n(49), c = n(3), l = n(128), p = n(39);
    e.exports = function() {
        return {
            ABFPC: "_abfpc",
            CNA: "cna",
            VERSION: "2.0",
            gl: "",
            canvas: "",
            writeCookie: function(e, t) {
                try {
                    var n = new Date();
                    n.setTime(n.getTime() + 31536e6), s.setCookie(e, t, {
                        SameSite: !0,
                        expires: "expires=" + n.toString()
                    });
                } catch (e) {
                    console.log(e);
                }
            },
            trySyncFp: function() {
                var e = this.tryGetStoreValue(this.ABFPC);
                this.syncLS2Cookie(this.ABFPC, e);
            },
            tryGetStoreValue: function(e) {
                var t = r.get(e), n = s.getCookie(e);
                return {
                    LSValue: t,
                    cookieValue: n
                };
            },
            getClientInfo: function() {
                var e = {};
                try {
                    e = goldlog ? goldlog._aplus_client : {};
                } catch (e) {}
                return e;
            },
            hasUsableSWF: function() {
                var e;
                try {
                    e = "undefined" != typeof window.ActiveXObject ? new ActiveXObject("ShockwaveFlash.ShockwaveFlash") : navigator.plugins["Shockwave Flash"];
                } catch (e) {}
                return e ? "true" : "false";
            },
            getCanvas: function() {
                try {
                    this.canvas || (this.canvas = document.createElement("canvas"));
                } catch (e) {}
                return this.canvas;
            },
            getWebGl: function() {
                try {
                    var e = this.getCanvas();
                    !this.gl && e && (this.gl = window.WebGLRenderingContext && (e.getContext("webgl") || e.getContext("experimental-webgl")));
                } catch (e) {}
                return this.gl;
            },
            initUint8ArrayHashCode2: function() {
                Uint8Array.prototype.hashCode2 || (Uint8Array.prototype.hashCode2 = function() {
                    var e, t, n, a = 0;
                    if (0 === this.length) return a;
                    for (e = 0, n = this.length; e < n; e++) t = this[e], a = (a << 5) - a + t, a |= 0;
                    return a;
                });
            },
            getWebGlPrinting: function() {
                var e = this.getWebGl();
                if (e) try {
                    this.initUint8ArrayHashCode2();
                    var t, n, a = e.getExtension("WEBGL_debug_renderer_info");
                    return a ? (t = e.getParameter(a.UNMASKED_VENDOR_WEBGL), n = e.getParameter(a.UNMASKED_RENDERER_WEBGL)) : (t = "No debug Info", 
                    n = "No debug Info"), {
                        myGl: e,
                        ven: t,
                        ren: n
                    };
                } catch (e) {}
            },
            getResolution: function() {
                var e = 1, t = screen.width * e, n = screen.height * e, a = screen.colorDepth + "_" + Math.round(t) + "_" + Math.round(n) + "_" + e + "_" + screen.width + "_" + screen.height + "_" + screen.colorDepth;
                return a;
            },
            generateWebGlPrint: function() {
                var e = "", t = this.getWebGl();
                if (t) {
                    try {
                        var n = "attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}", a = "precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}", o = t.createBuffer();
                        t.bindBuffer(t.ARRAY_BUFFER, o);
                        var r = new Float32Array([ -.2, -.9, 0, .4, -.26, 0, 0, .732134444, 0 ]);
                        t.bufferData(t.ARRAY_BUFFER, r, t.STATIC_DRAW), o.itemSize = 3, o.numItems = 3;
                        var i = t.createProgram(), s = t.createShader(t.VERTEX_SHADER);
                        t.shaderSource(s, n), t.compileShader(s);
                        var u = t.createShader(t.FRAGMENT_SHADER);
                        t.shaderSource(u, a), t.compileShader(u), t.attachShader(i, s), t.attachShader(i, u), 
                        t.linkProgram(i), t.useProgram(i), i.vertexPosAttrib = t.getAttribLocation(i, "attrVertex"), 
                        i.offsetUniform = t.getUniformLocation(i, "uniformOffset"), t.enableVertexAttribArray(i.vertexPosArray), 
                        t.vertexAttribPointer(i.vertexPosAttrib, o.itemSize, t.FLOAT, !1, 0, 0), t.uniform2f(i.offsetUniform, 1, 1), 
                        t.drawArrays(t.TRIANGLE_STRIP, 0, o.numItems), e = t.canvas.toDataURL();
                    } catch (e) {}
                    return e;
                }
            },
            audioFingerPrinting: function() {
                try {
                    var e = new (window.AudioContext || window.webkitAudioContext)(), t = e.destination;
                    return e.sampleRate.toString() + "_" + t.maxChannelCount + "_" + t.numberOfInputs + "_" + t.numberOfOutputs + "_" + t.channelCount + "_" + t.channelCountMode + "_" + t.channelInterpretation;
                } catch (e) {
                    return "not supported";
                }
            },
            getPluginsPrinting: function() {
                var e = "";
                if (navigator && navigator.plugins) {
                    for (var t = navigator.plugins.length, n = 0; n < t; n++) e += navigator.plugins[n].name + "_";
                    e = e.replace(/[^a-zA-Z ]/g, "");
                }
                return e;
            },
            checkIsTouch: function() {
                try {
                    return "ontouchend" in document.createElement("div") ? "true" : "false";
                } catch (e) {}
            },
            generateFp: function() {
                var e = this.getWebGlPrinting() || {}, t = s.getData(), n = o.getExparamsInfos(), a = aplus.getMetaInfo("_user_id") || aplus.getMetaInfo("_dev_id") || aplus.getMetaInfo("_anony_id"), u = n.uidaplus || new Date().getTime(), c = l.getCanvasHash(), p = i(this.getClientInfo(), {
                    WebGL: this.gl ? "true" : "false",
                    webglPrint: this.generateWebGlPrint(),
                    adBlock: "No",
                    audio: this.audioFingerPrinting(),
                    cookieEnabled: navigator ? !!navigator.cookieEnabled : "false",
                    cpu_cores: navigator && navigator.hardwareConcurrency ? navigator.hardwareConcurrency : -1,
                    fontlist: this.hasUsableSWF(),
                    gpu: e.ren,
                    hash: e.hash,
                    inc: e.inc,
                    isSupportLS: r.test() ? "true" : "false",
                    plugins: this.getPluginsPrinting(),
                    resolution: this.getResolution(),
                    timezone: -new Date().getTimezoneOffset() / 60,
                    isTouch: this.checkIsTouch(),
                    lang: navigator ? navigator.language : "",
                    tracknick: t.tracknick || n.pu_i || a || u
                }), f = [ c ];
                for (var g in p) p[g] && f.push(p[g]);
                var d = l.calcSHA1(f.join("_")) + "_" + this.VERSION;
                return r.set(this.ABFPC, d), this.writeCookie(this.ABFPC, d), d;
            },
            syncCNA: function(e, t) {
                var n = u.loadScript, a = aplus.getMetaInfo("aplus-rhost-v");
                a = p.fixDomain(a), a && n(a + "/pbe.js?_abfpc=" + e, t);
            },
            syncLS2Cookie: function(e, t) {
                var n = t.LSValue, a = t.cookieValue;
                n && n !== a && this.writeCookie(e, n), a && !n && r.set(e, a);
            },
            updateGlobalData: function(e) {
                e && e._abfpc && (e._abfpc = e._abfpc.replace("_" + this.VERSION, "")), aplus.appendMetaInfo("aplus-globaldata", e);
            },
            run: function() {
                var e = this, t = e.tryGetStoreValue(e.ABFPC), n = e.tryGetStoreValue(e.CNA);
                e.syncLS2Cookie(this.ABFPC, t), e.syncLS2Cookie(this.CNA, n);
                var o = t.LSValue || t.cookieValue, i = n.LSValue || n.cookieValue;
                if (o || (o = e.generateFp()), o = o.replace("_" + e.VERSION, ""), o && aplus && aplus.appendMetaInfo) {
                    var s = {
                        _abfpc: o
                    };
                    i && (s.cna = i), e.updateGlobalData(s);
                }
                a.on(window, "beforeunload", function() {
                    e.trySyncFp();
                }), i || setTimeout(function() {
                    aplus_queue.push({
                        action: c.SUBSCRIBE,
                        arguments: [ "aplusReady", function(t) {
                            "complete" === t && e.syncCNA(o, function() {
                                var t = goldlog.cna;
                                t && (e.updateGlobalData({
                                    _abfpc: o,
                                    cna: t
                                }), r.set(e.CNA, t), e.writeCookie(e.CNA, t));
                            });
                        } ]
                    });
                }, 300);
            }
        };
    };
}, function(e, t) {
    function n(e) {
        for (var t = "", n = 7; n >= 0; n--) t += c.charAt(e >> 4 * n & 15);
        return t;
    }
    function a(e) {
        for (var t = (e.length + 8 >> 6) + 1, n = new Array(16 * t), a = 0; a < 16 * t; a++) n[a] = 0;
        var o;
        for (o = 0; o < e.length; o++) n[o >> 2] |= e.charCodeAt(o) << 24 - o % 4 * 8;
        return n[o >> 2] |= 128 << 24 - o % 4 * 8, n[16 * t - 1] = 8 * e.length, n;
    }
    function o(e, t) {
        var n = (65535 & e) + (65535 & t), a = (e >> 16) + (t >> 16) + (n >> 16);
        return a << 16 | 65535 & n;
    }
    function r(e, t) {
        return e << t | e >>> 32 - t;
    }
    function i(e, t, n, a) {
        return e < 20 ? t & n | ~t & a : e < 40 ? t ^ n ^ a : e < 60 ? t & n | t & a | n & a : t ^ n ^ a;
    }
    function s(e) {
        return e < 20 ? 1518500249 : e < 40 ? 1859775393 : e < 60 ? -1894007588 : -899497514;
    }
    function u(e) {
        for (var t = a(e), u = new Array(80), c = 1732584193, p = -271733879, f = -1732584194, g = 271733878, d = -1009589776, _ = 0; _ < t.length; _ += 16) {
            for (var h = c, m = p, v = f, y = g, b = d, w = 0; w < 80; w++) {
                w < 16 ? u[w] = t[_ + w] : u[w] = r(u[w - 3] ^ u[w - 8] ^ u[w - 14] ^ u[w - 16], 1);
                var A = o(o(r(c, 5), i(w, p, f, g)), o(o(d, u[w]), s(w)));
                d = g, g = f, f = r(p, 30), p = c, c = A;
            }
            c = o(c, h), p = o(p, m), f = o(f, v), g = o(g, y), d = o(d, b);
        }
        return l(n(c) + n(p) + n(f) + n(g) + n(d));
    }
    var c = "0123456789abcdef", l = function(e) {
        return e.replace(/\+/g, "-").replace(/\//g, "_").replace(/\=+$/, "");
    }, p = function() {
        var e = "Not supported";
        try {
            var t = document.createElement("canvas"), n = t.getContext("2d");
            t.style.display = "inline", n.textBaseline = "alphabetic", n.fillStyle = "#f60", 
            n.fillRect(125, 1, 62, 20), n.fillStyle = "#069", n.font = "11pt no-real-font-123", 
            n.fillText("Cwm fjordbank glyphs vext quiz, 😃", 2, 15), n.fillStyle = "rgba(102, 204, 0, 0.7)", 
            n.font = "18pt Arial", n.fillText("Cwm fjordbank glyphs vext quiz, 😃", 4, 45), 
            e = t.toDataURL();
        } catch (e) {}
        return e;
    };
    t.calcSHA1 = u, t.getCanvasHash = function() {
        var e;
        e || (e = p());
        var t = u(e);
        return l(t);
    };
}, function(e, t, n) {
    "use strict";
    var a = n(130), o = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE, n = o.getContext(), r = n[t] || [], i = a.getFormatQueue(r, "metaQueue");
                n[t] = i.queue, a.processGoldlogQueue(i.formatQueue, this.options.config);
            }
        };
    };
}, function(e, t, n) {
    function a() {
        var e = u.getGoldlogVal("_$") || {}, t = e.meta_info;
        return t;
    }
    function o() {
        var e = a() || {}, t = e.uaid + "";
        return "1" !== t || e._anony_id ? e._hold || e["aplus-waiting"] : "BLOCK";
    }
    function r(e) {
        var t = o(), n = a() || {}, r = !0, i = e.arguments || [], s = i[0], u = i[1], c = "START";
        if ("_hold" === s && u === c) return c;
        if ("_anony_id" === s && u) return c;
        if (e && /sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(e.action)) switch (t) {
          case "BLOCK":
            n[t] || (h.push(e), r = !1);
        }
        return r;
    }
    function i(e) {
        g(d, e), g(_, e), g(h, e);
    }
    function s(e, t) {
        return t && f.openAPIs.indexOf(e) > -1 && (e = "_" + e), e;
    }
    var u = n(2), c = n(48), l = n(20), p = n(8), f = n(3), g = function(e, t) {
        function n() {
            if (e && c.isArray(e) && e.length) {
                for (var n = v(e).queue, a = {}, o = []; a = n.shift(); ) m(a, t, function(e) {
                    o.push(e);
                });
                o.length > 0 && setTimeout(function() {
                    for (;a = o.shift(); ) m(a, t);
                }, 100);
            }
        }
        try {
            n();
        } catch (e) {
            p().w(e);
        }
    };
    t.processGoldlogQueue = g;
    var d = [], _ = [], h = [];
    t.subscribeAndProcessQueue = function(e, t) {
        var n = u.getGlobalValue(e);
        n.push({
            action: f.SUBSCRIBE,
            arguments: [ f.SET_META_INFO, function(e, n) {
                e === f._USER_ID && n ? g(d, t) : e === f._ANONY_ID && n ? g(_, t) : "_hold" === e && "START" === n && i(t);
            } ]
        });
    };
    var m = function(e, t, n) {
        var a = !!t.isOpenApi, o = e ? e.action : "", f = e ? e.arguments : "", g = r(e);
        if (g) {
            var d = u.getContext();
            try {
                if (o && f && c.isArray(f)) {
                    var _, h = o.split("."), m = d, v = d;
                    if (3 === h.length) m = d[h[0]][h[1]] || {}, _ = s(h[2], a), v = m[_] ? m[_] : ""; else for (;h.length; ) if (_ = s(h.shift(), a), 
                    v = m = m[_], !m) return void (l(n) && n(e));
                    l(v) && v.apply(m, f), "START" === g && i(t);
                }
            } catch (e) {
                p().w(e);
            }
        }
    };
    t.processTask = m;
    var v = function(e, t) {
        for (var n = {
            subscribeMwChangeQueue: [],
            subscribeMetaQueue: [],
            subscribeQueue: [],
            metaQueue: [],
            othersQueue: []
        }, a = [], o = {}; o = e.shift(); ) try {
            var r = o.action, i = o.arguments[0];
            /subscribe/.test(r) ? "setMetaInfo" === i ? n.subscribeMetaQueue.push(o) : i === f.MW_CHANGE_PV || i === f.MW_CHANGE_HJLJ ? n.subscribeMwChangeQueue.push(o) : n.subscribeQueue.push(o) : /MetaInfo/.test(r) ? n.metaQueue.push(o) : n.othersQueue.push(o);
        } catch (e) {
            p().w(e), n.othersQueue.push(o);
        }
        var s;
        return t && n[t] && (s = n[t], n[t] = []), a = n.subscribeMwChangeQueue.concat(n.metaQueue), 
        a = a.concat(n.subscribeQueue), a = a.concat(n.subscribeMetaQueue, n.othersQueue), 
        {
            queue: a,
            formatQueue: s
        };
    };
    t.getFormatQueue = v;
}, function(e, t, n) {
    "use strict";
    function a(e) {
        var t = e.Promise, n = e.document, a = e.navigator.userAgent, r = /Windows\sPhone\s(?:OS\s)?[\d\.]+/i.test(a) || /Windows\sNT\s[\d\.]+/i.test(a), i = /iPhone|iPad|iPod/i.test(a), s = /Android/i.test(a), u = Math.floor(65536 * Math.random()), c = 1, l = [], p = 3, f = "iframe_", g = "param_", d = 6e5, _ = 6e4, h = {
            trace: function(e, t, n, a, o) {
                return h.call(e, t, n, a, o);
            },
            call: function(e, n, a, o, r) {
                var i, s;
                "number" == typeof arguments[arguments.length - 1] && (r = arguments[arguments.length - 1]), 
                "function" != typeof a && (a = null), !t || a || o || (s = new t(function(e, t) {
                    a = e, o = t;
                })), i = m.getSid();
                var u = {
                    success: a,
                    failure: o
                };
                return r > 0 && (u.timeout = setTimeout(function() {
                    h.onFailure(i, {
                        ret: "HY_TIMEOUT"
                    });
                }, r)), m.registerCall(i, u), m.registerGC(i, r), m.evokeNative(e, n, i), s;
            },
            fireEvent: function(e, t) {
                var a = n.createElement("HTMLEvents");
                a.initEvent(e, !1, !0), a.param = m.parseData(t), n.dispatchEvent(a);
            },
            getParam: function(e) {
                return m.getParam(e);
            },
            find: function(e, t) {
                t || m.unregisterCall(e, !1);
            },
            onSuccess: function(e, t, n) {
                m.onComplete(e, t, "success", n);
            },
            onFailure: function(e, t) {
                m.onComplete(e, t, "failure");
            }
        }, m = {
            params: {},
            calls: {},
            getSid: function() {
                return (u + c++) % 65536 + "";
            },
            buildParam: function(e) {
                return e && "object" == typeof e ? JSON.stringify(e) : e || "";
            },
            getParam: function(e) {
                return this.params[g + e] || "";
            },
            setParam: function(e, t) {
                this.params[g + e] = t;
            },
            parseData: function(e) {
                var t;
                if (e && "string" == typeof e) try {
                    t = JSON.parse(e);
                } catch (n) {
                    t = {
                        ret: "HY_RESULT_PARSE_ERROR",
                        originValue: e
                    };
                } else t = e || {};
                return t;
            },
            registerCall: function(e, t) {
                this.calls[e] = t;
            },
            unregisterCall: function(e, t) {
                var n = this.calls[e] || {}, a = n.timeout;
                return a && clearTimeout(a), t || delete this.calls[e], n;
            },
            useIframe: function(e, t) {
                var a = f + e, o = l.pop();
                o || (o = n.createElement("iframe"), o.setAttribute("frameborder", "0"), o.style.cssText = "width:0;height:0;border:0;display:none;"), 
                o.setAttribute("id", a), o.setAttribute("src", t), o.parentNode || setTimeout(function() {
                    n.body.appendChild(o);
                }, 5);
            },
            retrieveIframe: function(e) {
                var t = f + e, a = n.querySelector("#" + t);
                if (a) if (l.length >= p) try {
                    n.body.removeChild(a);
                } catch (e) {} else l.indexOf(a) < 0 && l.push(a);
            },
            evokeNative: function(e, t, n) {
                var a = {
                    className: "Umeng4Aplus",
                    methodName: e,
                    sid: n,
                    callback: "",
                    params: t
                }, u = JSON.stringify(a);
                o().i("Umeng4AplusFlutter ===== ", window.Umeng4AplusFlutter), r ? o().w("jsbridge not support windows os devices.") : i ? window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.Umeng4Aplus && window.webkit.messageHandlers.Umeng4Aplus.postMessage ? (o().i("jsbridge native logs: " + u), 
                window.webkit.messageHandlers.Umeng4Aplus.postMessage(u)) : window.Umeng4AplusFlutter ? window.Umeng4AplusFlutter.postMessage(u) : o().w("jsbridge iOS environment invalid") : s && (window.Umeng4Aplus ? window.Umeng4Aplus.CALL ? (o().i("jsbridge native logs: " + u), 
                window.Umeng4Aplus.CALL(u)) : window.Umeng4Aplus.call ? (o().i("jsbridge native hamonyos logs: " + u), 
                window.Umeng4Aplus.call(u)) : o().w("jsbridge Android environment error, Umeng4Aplus exists, but method not found") : window.Umeng4AplusFlutter ? window.Umeng4AplusFlutter.postMessage(u) : o().w("jsbridge Android environment invalid"));
            },
            registerGC: function(e, t) {
                var n = this, a = Math.max(t || 0, d), o = Math.max(t || 0, _);
                setTimeout(function() {
                    n.unregisterCall(e);
                }, a), i && setTimeout(function() {
                    n.params[g + e] && delete n.params[g + e];
                }, o);
            },
            onComplete: function(e, t, n, a) {
                var o = this.unregisterCall(e, a), r = o.success, s = o.failure;
                t = this.parseData(t);
                var u = t.ret;
                "string" == typeof u && (t = t.value || t, t.ret || (t.ret = [ u ])), "success" === n ? r && r(t) : "failure" === n && s && s(t), 
                i && (this.retrieveIframe(e), this.params[g + e] && delete this.params[g + e]);
            }
        };
        return h;
    }
    var o = n(8);
    e.exports = function() {
        return {
            subscribeLogs: function(e, t) {
                aplus.aplus_pubsub.subscribe(e, function(e) {
                    "complete" === e.status && t(e);
                });
            },
            isJsBridgeReady: function() {
                return window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.Umeng4Aplus && window.webkit.messageHandlers.Umeng4Aplus || window.Umeng4Aplus;
            },
            callUT: function(e, t) {
                t._bridgeName = this.options.bridgeName || "AtmBridge", t._bridgeVersion = this.options.bridgeVersion || "1.0.0";
                try {
                    window.AtmBridge.trace(e, t, function(e) {
                        o().i("SUCCESS:", e);
                    }, function(e) {
                        o().w("FAILURE:", e);
                    });
                } catch (e) {
                    o().w(e);
                }
            },
            callMergeToNativeGP: function(e, t) {
                o().i("current bridge gp: " + JSON.stringify(t));
            },
            watchLOG: function() {
                var e = this;
                e.subscribeLogs("mw_change_pv", function(t) {
                    var n = t.what_to_send || {}, a = n.pvdataToUmNative || {};
                    e.callUT("sendPV", a);
                }), e.subscribeLogs("mw_change_hjlj", function(t) {
                    var n = t.what_to_send || {}, a = n.hjljdataToUmNative || {};
                    e.callUT("sendEvent", a);
                });
            },
            run: function() {
                if (!window.AtmBridge) {
                    var e = a(window);
                    window.AtmBridge = e;
                }
                window.AtmBridge && this.watchLOG();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(21), o = n(2), r = n(130), i = a.extend({
        push: function(e) {
            this.length++, r.processTask(e, this.opts);
        }
    });
    e.exports = function() {
        return {
            processAplusQueue: function(e) {
                var t = this.options.config || {}, n = o.getGlobalValue(e);
                r.processGoldlogQueue(n, t), o.setGlobalValue(e, i.create({
                    opts: t,
                    startLength: n.length,
                    length: 0
                }));
            },
            run: function() {
                var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE;
                this.processAplusQueue(t), "aplus_queue" === t && this.processAplusQueue("goldlog_queue"), 
                r.subscribeAndProcessQueue(t, this.options.config);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(10), o = n(49), r = n(48);
    e.exports = function() {
        return {
            init: function(e) {
                this.options = e;
            },
            addStyle: function(e, t) {
                var n = e + "_style", a = document.getElementById(n);
                a || (a = document.createElement("link"), a.id = n, a.href = t, a.rel = "stylesheet", 
                a.type = "text/css", document.getElementsByTagName("head").item(0).appendChild(a));
            },
            run: function() {
                var e = this, t = parent !== self, n = this.options.config || {};
                !t && n.urlRules && a(n.urlRules, function(t) {
                    var n, i = new RegExp(t.rule);
                    try {
                        n = t.id ? window.sessionStorage.getItem(t.id) : "";
                    } catch (e) {}
                    if (i.test(location.href) || n) {
                        try {
                            window.sessionStorage.setItem(t.id, !0);
                        } catch (e) {}
                        r.isArray(t.cdnPath) ? a(t.cdnPath, function(n) {
                            /\.css$/.test(n) ? e.addStyle(t.id, n) : /\.js/.test(n) && o.addScript(n);
                        }) : o.addScript(t.cdnPath);
                    }
                });
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                aplus._aplus_vt_cfg || n(135)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        var e = window.aplus_queue || (window.aplus_queue = []);
        e.push({
            action: "aplus.sendPV",
            arguments: [ {
                is_auto: !1,
                track_type: "1"
            }, {} ]
        });
    }
    function o() {
        var e = i.getGlobalValue(s.APLUS), t = e && e.getMetaInfo("pageConfig");
        if (t) if (t.hashMode) {
            var n = location.hash;
            t[n] ? t[n].skipMe || a() : a();
        } else {
            var o = location.pathname;
            t[o] ? t[o].skipMe || a() : a();
        } else a();
    }
    function r() {
        aplus._aplus_apv ? aplus._aplus_apv = {
            status: "complete"
        } : o();
    }
    var i = n(2), s = n(3), u = n(26);
    e.exports = function() {
        r(), u.watchHistoryChange(o), u.watchHashChange(o);
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(137)();
            }
        };
    };
}, function(e, t, n) {
    function a() {
        var e = [], t = aplus.getMetaInfo(l.APLUS_AUTOTRACK_CONFIG);
        return t && t.collect_tags && g.isObject(t.collect_tags) && _(t.collect_tags, function(t, n) {
            n && e.push(t);
        }), e;
    }
    function o() {
        return aplus.getMetaInfo(l.APLUS_AUTOTRACK_CONFIG_REMOTE) || [];
    }
    function r(e) {
        var t = e;
        if ("object" != typeof t) return null;
        if ("string" != typeof t.tagName) return null;
        var n = t.tagName.toLowerCase();
        if ("body" === n.toLowerCase() || "html" === n.toLowerCase()) return null;
        if (!t || !t.parentNode || !t.parentNode.children) return null;
        var r = t.parentNode, i = a(), s = o();
        if (p.hasAttribute(e, "aplus-autotrack-off")) return null;
        if (!(s.length > 0 && d.indexof(s, n) > -1)) {
            if ("a" === n || "button" === n || "input" === n || "textarea" === n) return t;
            if ("button" === r.tagName.toLowerCase() || "a" === r.tagName.toLowerCase()) return r;
            if (d.indexof(i, n) > -1) return t;
            var u = p.getPrev(r);
            return "area" === n && "map" === r.tagName.toLowerCase() && u.tagName && "img" === u.tagName.toLowerCase() ? u : null;
        }
    }
    function i(e) {
        try {
            var t = window.aplus_queue || (window.aplus_queue = []), n = null;
            e["clk-logkey"] && (n = e["clk-logkey"], delete e["clk-logkey"]);
            var a, o = v.hash(y.getAppKey()) + v.hash(e.ap.element_selector, y.getAppKey());
            a = n || o, t.push({
                action: "aplus.record",
                arguments: [ a, "CLK", e || {} ]
            });
        } catch (e) {
            h().w("autotrack event send failed, e=", e);
        }
    }
    function s(e) {
        var t = {
            is_auto: 1,
            auto_element: 1
        };
        try {
            if (e && e.hasAttributes) for (var n = e.attributes, a = 0; a < n.length; a++) {
                var o = n[a].name || "", r = n[a].value;
                if (o && o.indexOf("data-") > -1) {
                    var i = o.toLowerCase().replace(/^data-/, "");
                    t[i] = encodeURIComponent(r);
                }
            }
        } catch (e) {
            h().w(e && e.message);
        }
        return t;
    }
    function u(e) {
        var t = s(e);
        return e && (t = m(t, {
            ap: {
                element_type: e.tagName.toLowerCase(),
                element_name: e.getAttribute && e.getAttribute("name") || "",
                element_id: e.getAttribute && e.getAttribute("id") || "",
                element_class_name: "string" == typeof e.className ? e.className : "",
                element_content: p.getElementContent(e, e.tagName) || "",
                element_selector: p.getDomSelector(e) || "",
                element_path: p.getElementPath(e)
            }
        })), t;
    }
    function c() {
        function e(e) {
            if (!e) return !1;
            var t = e.target, n = r(t);
            n && i(u(n));
        }
        f.addHandler(document, f.clickEvent(), e), document.addEventListener("unload", function() {
            f.removeHandler(document, f.clickEvent(), e);
        }, !1);
    }
    var l = n(3), p = n(138), f = n(139), g = n(140), d = n(48), _ = n(50), h = n(8), m = n(35), v = n(53), y = n(39);
    e.exports = function() {
        var e = window.aplus || (window.aplus = {});
        e._autotracked_enable || (e._autotracked_enable = !0, c());
    };
}, function(e, t, n) {
    function a(e, t) {
        return e && e[t] ? e[t].toLowerCase() : "";
    }
    function o(e) {
        return e && e.id && /^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.id);
    }
    function r(e) {
        var t = [];
        if (!e) return "";
        for (;e.parentNode; ) {
            if (o(e)) {
                t.unshift(a(e, "tagName") + "#" + e.id);
                break;
            }
            if (e === document.body) {
                t.unshift("body");
                break;
            }
            e.tagName && e.tagName.toLowerCase && (t.unshift(a(e, "tagName")), e = e.parentNode);
        }
        return t.join(" > ");
    }
    function i(e) {
        return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
    }
    t.siblings = function(e, t) {
        return "nextSibling" === t ? e.nextSibling : "previousSibling" === t ? e.previousSibling : null;
    }, t.sibling = function(e, t) {
        for (;(e = e[t]) && 1 !== e.nodeType; ) ;
        return e;
    }, t.previousElementSibling = function(e) {
        var t = e;
        if ("previousElementSibling" in document.documentElement) return this.getPrev(t);
        for (;t.previousSibling; ) if (t = t.previousSibling, 1 === t.nodeType) return t;
        return null;
    }, t.getSameTypeSiblings = function(e) {
        for (var t = e, n = t.parentNode, o = a(t, "tagName"), r = [], i = 0; i < n.children.length; ) {
            var s = n.children[i];
            1 === s.nodeType && o && a(s, "tagName") === o && r.push(n.children[i]), i++;
        }
        return r;
    }, t.getNext = function(e) {
        return this.sibling(e, "nextSibling");
    }, t.getPrev = function(e) {
        return this.sibling(e, "previousSibling");
    }, t.indexOf = function(e, t) {
        var n = e.indexOf;
        if (n) return n.call(e, t);
        for (var a = 0; a < e.length; a++) if (t === e[a]) return a;
        return -1;
    }, t.getClosestLi = function(e) {
        return function(e, t) {
            for (;e && e !== document && 1 === e.nodeType; e = e.parentNode) if (a(e, "tagName") === t) return e;
            return null;
        }(e, "li");
    }, t.getElementPath = r, t.getDomIndex = function(e) {
        if (!e.parentNode) return -1;
        for (var t = 0, n = a(e, "tagName"), o = e.parentNode.children, r = 0; r < o.length; ) {
            if (n && a(o[r], "tagName") === n) {
                if (e === o[r]) return t;
                t++;
            }
            r++;
        }
        return -1;
    }, t.selector = function(e) {
        var t = e.parentNode && 9 === e.parentNode.nodeType ? -1 : this.getDomIndex(e);
        return e.getAttribute && e.getAttribute("id") && /^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id")) ? "#" + e.getAttribute("id") : a(e, "tagName") + (~t ? ":nth-of-type(" + (t + 1) + ")" : "");
    }, t.getDomSelector = function(e, t) {
        if (!e || !e.parentNode || !e.parentNode.children) return null;
        t = t && t.join ? t : [];
        var n = a(e, "nodeName");
        return "body" !== n && 1 === e.nodeType ? (t.unshift(this.selector(e)), e.getAttribute && e.getAttribute("id") && /^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id")) ? t.join(" > ") : this.getDomSelector(e.parentNode, t)) : (t.unshift("body"), 
        t.join(" > "));
    };
    var s = n(48);
    t.hasAttributes = function(e, t) {
        if ("string" == typeof t) return this.hasAttribute(e, t);
        if (s.isArray(t)) {
            for (var n = !1, a = 0; a < t.length; a++) if (this.hasAttribute(e, t[a])) {
                n = !0;
                break;
            }
            return n;
        }
    }, t.hasAttribute = function(e, t) {
        if ("aplus-autotrack-off" === t) {
            for (var n = e, a = !1; n; ) {
                if (n.hasAttribute && n.hasAttribute(t)) {
                    a = "true" === n.getAttribute(t);
                    break;
                }
                n = n.parentNode;
            }
            return a;
        }
        return e.hasAttribute ? e.hasAttribute(t) : !(!e.attributes[t] || !e.attributes[t].specified);
    }, t.getElementContent = function(e, t) {
        var a = "";
        if (e.textContent) a = i(e.textContent); else if (e.innerText) a = i(e.innerText); else if ("input" === t || "INPUT" === t) {
            var o = n(3), r = aplus.getMetaInfo(o.APLUS_AUTOTRACK_CONFIG);
            r.collect_input && (a = encodeURIComponent(e.value) || "");
        } else "button" !== e.type && "submit" !== e.type || (a = e.value || "");
        return a && (a = a.replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255)), 
        a;
    };
}, function(e, t, n) {
    var a = n(3);
    e.exports = {
        addHandler: function(e, t, n) {
            if (e.addEventListener) {
                var o = window.aplus || (window.aplus = {}), r = o.getMetaInfo(a.APLUS_AUTOTRACK_CONFIG) || {};
                e.addEventListener(t, n, !!r.element_capture_enable || !1);
            } else e.attachEvent ? e.attachEvent("on" + t, n) : e["on" + t] = n;
        },
        removeHandler: function(e, t, n) {
            e.removeEventListener ? e.removeEventListener(t, n, !1) : e.detachEvent ? e.detachEvent("on" + t, n) : e["on" + t] = null;
        },
        clickEvent: function() {
            return "ontouchstart" in document.documentElement == !0 ? "touchstart" : "click";
        }
    };
}, function(e, t) {
    t.isObject = function(e) {
        return null !== e && "[object Object]" === Object.prototype.toString.call(e);
    }, t.isEmptyObject = function(e) {
        if (this.isObject(e)) for (var t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
        return !0;
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                var e = window.aplus || (window.aplus = {});
                e._aplus_plugin_xwj || (e._aplus_plugin_xwj = {
                    status: "init"
                }, n(142)());
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        function e() {
            for (var e = I.split("&"), t = {}, n = 0; n < e.length; n++) {
                var a = e[n], o = a.split("=");
                t[o[0]] = o[1];
            }
            return t;
        }
        function t(e, t) {
            return e && e.getAttribute ? e.getAttribute(t) || "" : "";
        }
        function a() {
            return g = g || r.getElementsByTagName("head")[0], d || (g ? d = g.getElementsByTagName("meta") : []);
        }
        function s(e) {
            var n, o, r, i = a(), s = i.length;
            for (n = 0; n < s; n++) if (o = i[n], t(o, "name") === e) {
                r = t(o, "content");
                break;
            }
            return r;
        }
        function u() {
            return s("ahot-aplus");
        }
        function c() {
            var e = n(2), t = e.getGlobalValue("aplus");
            return s("aplus-heatmap-enabled") || t.getMetaInfo("aplus-heatmap-enabled");
        }
        function l() {
            var e = n(2), t = e.getGlobalValue("aplus"), a = s("aplus-rate-ahot") || t.getMetaInfo("aplus-rate-ahot");
            return parseFloat(a || "");
        }
        function p() {
            return s("microscope-data");
        }
        var f = 6;
        if (!(o._ap_xwj_heat && f <= o._ap_xwj_heat.version)) {
            var g, d, _ = o.performance || o.mozPerformance || o.msPerformance || o.webkitPerformance || {
                _na: 1
            }, h = location, m = location.href, v = h.hostname, y = o.navigator, b = y.appVersion, w = y ? y.userAgent : "", A = u(), E = c(), S = l(), T = p(), P = r.getElementById("beacon-aplus"), I = t(P, "exparams"), x = {
                layout: 0,
                shouldBindMonitor: !1
            }, C = {
                RATE: {
                    RESOURCE_TIMING: isNaN(S) ? 1 : S
                }
            }, M = function(e) {
                return "number" == typeof e;
            }, k = function(e, t) {
                return e.indexOf(t) > -1;
            }, O = function() {
                return k(I, "atp_isdpp");
            }, N = function() {
                if (A) return !0;
                var e, t, n = [ "item.taobao.com", "detail.tmall.com", "s.taobao.com" ];
                for (t = n.length, e = 0; e < t; e++) if (k(v, n[e])) return !1;
                return !k(m, "/go/act/") && !O();
            }, R = o.addEventListener ? function(e) {
                o.addEventListener("load", e, !1);
            } : function() {}, L = o.attachEvent ? function(e) {
                o.attachEvent("onload", e);
            } : R, U = function(e) {
                var t, n, a, o, i, s, u = r.getElementsByTagName("*");
                for (t = []; e && 1 === e.nodeType; e = e.parentNode) if (e.id) {
                    for (s = e.id, o = 0, n = 0; n < u.length; n++) if (i = u[n], i.id && i.id === s) {
                        o++;
                        break;
                    }
                    if (e.tagName.toLowerCase && t.unshift(e.tagName.toLowerCase() + "[@id='" + s + "']"), 
                    1 === o) return t.unshift("/"), t.join("/");
                } else {
                    for (n = 1, a = e.previousSibling; a; a = a.previousSibling) a.tagName === e.tagName && n++;
                    e.tagName.toLowerCase && t.unshift(e.tagName.toLowerCase() + "[" + n + "]");
                }
                return t.length ? "/" + t.join("/") : null;
            }, D = function(e, t, n) {
                var a = Math.max(F.scrollWidth, F.clientWidth), o = F.scrollTop, r = F.scrollLeft, i = t.pageX, s = t.pageY;
                M(i) || (i = t.clientX + r, s = t.clientY + o);
                var u, c, l = -1;
                if (e && e.getBoundingClientRect && (c = e.getBoundingClientRect(), l = c.left + r, 
                u = c.top + o), 0 === n || "0" === n) {
                    var p = a >> 1;
                    i -= p, l -= p;
                } else 2 === n && (i -= a, l -= a);
                return {
                    x: i,
                    y: s,
                    ex: l,
                    ey: u,
                    sw: a
                };
            }, j = function(e) {
                var t = 0;
                return parseFloat(e.replace(/\./g, function() {
                    return 0 === t++ ? "." : "";
                }));
            }, V = function(e, t) {
                var n, a;
                t[n = "trident"] = .1, (a = e.match(/Trident\/([\d.]*)/)) && a[1] && (t[n] = j(a[1])), 
                t.core = n;
            }, G = function(e) {
                var t, n;
                return (t = e.match(/MSIE ([^;]*)|Trident.*; rv(?:\s|:)?([0-9.]+)/)) && (n = t[1] || t[2]) ? j(n) : 0;
            }, B = function(e) {
                return e || "other";
            }, H = function(e) {
                function t() {
                    for (var t = [ [ "Windows NT 5.1", "winXP" ], [ "Windows NT 6.1", "win7" ], [ "Windows NT 6.0", "winVista" ], [ "Windows NT 6.2", "win8" ], [ "iPad", "ios" ], [ "iPhone;", "ios" ], [ "iPod", "ios" ], [ "Macintosh", "mac" ], [ "Android", "android" ], [ "Ubuntu", "ubuntu" ], [ "Linux", "linux" ], [ "Windows NT 5.2", "win2003" ], [ "Windows NT 5.0", "win2000" ], [ "Windows", "winOther" ], [ "rhino", "rhino" ] ], n = 0, a = t.length; n < a; ++n) if (e.indexOf(t[n][0]) !== -1) return t[n][1];
                    return "other";
                }
                function n(e, t, n, a) {
                    var r, i = o.navigator.mimeTypes;
                    try {
                        for (r in i) if (i.hasOwnProperty(r) && i[r][e] === t) {
                            if (void 0 !== n && a.test(i[r][n])) return !0;
                            if (void 0 === n) return !0;
                        }
                        return !1;
                    } catch (e) {
                        return !1;
                    }
                }
                var a, i, s, u, c, l, p, f, g = "", d = g, _ = g, h = [ 6, 9 ], m = "{{version}}", v = "<!--[if IE " + m + "]><s></s><![endif]-->", y = r && r.createElement("div"), w = [], A = {
                    webkit: void 0,
                    trident: void 0,
                    gecko: void 0,
                    presto: void 0,
                    chrome: void 0,
                    safari: void 0,
                    firefox: void 0,
                    ie: void 0,
                    ieMode: void 0,
                    opera: void 0,
                    mobile: void 0,
                    core: void 0,
                    shell: void 0,
                    phantomjs: void 0,
                    os: void 0,
                    ipad: void 0,
                    iphone: void 0,
                    ipod: void 0,
                    ios: void 0,
                    android: void 0,
                    nodejs: void 0,
                    extraName: void 0,
                    extraVersion: void 0
                };
                if (y && y.getElementsByTagName && (y.innerHTML = v.replace(m, ""), w = y.getElementsByTagName("s")), 
                w.length > 0) {
                    for (V(e, A), u = h[0], c = h[1]; u <= c; u++) if (y.innerHTML = v.replace(m, u), 
                    w.length > 0) {
                        A[_ = "ie"] = u;
                        break;
                    }
                    !A.ie && (s = G(e)) && (A[_ = "ie"] = s);
                } else (i = e.match(/AppleWebKit\/([\d.]*)/)) && i[1] ? (A[d = "webkit"] = j(i[1]), 
                (i = e.match(/OPR\/(\d+\.\d+)/)) && i[1] ? A[_ = "opera"] = j(i[1]) : (i = e.match(/Chrome\/([\d.]*)/)) && i[1] ? A[_ = "chrome"] = j(i[1]) : (i = e.match(/\/([\d.]*) Safari/)) && i[1] && (A[_ = "safari"] = j(i[1])), 
                / Mobile\//.test(e) && e.match(/iPad|iPod|iPhone/) ? (A.mobile = "apple", i = e.match(/OS ([^\s]*)/), 
                i && i[1] && (A.ios = j(i[1].replace("_", "."))), a = "ios", i = e.match(/iPad|iPod|iPhone/), 
                i && i[0] && (A[i[0].toLowerCase()] = A.ios)) : / Android/i.test(e) ? (/Mobile/.test(e) && (a = A.mobile = "android"), 
                i = e.match(/Android ([^\s]*);/), i && i[1] && (A.android = j(i[1]))) : (i = e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/)) && (A.mobile = i[0].toLowerCase()), 
                (i = e.match(/PhantomJS\/([^\s]*)/)) && i[1] && (A.phantomjs = j(i[1]))) : (i = e.match(/Presto\/([\d.]*)/)) && i[1] ? (A[d = "presto"] = j(i[1]), 
                (i = e.match(/Opera\/([\d.]*)/)) && i[1] && (A[_ = "opera"] = j(i[1]), (i = e.match(/Opera\/.* Version\/([\d.]*)/)) && i[1] && (A[_] = j(i[1])), 
                (i = e.match(/Opera Mini[^;]*/)) && i ? A.mobile = i[0].toLowerCase() : (i = e.match(/Opera Mobi[^;]*/)) && i && (A.mobile = i[0]))) : (s = G(e)) ? (A[_ = "ie"] = s, 
                V(e, A)) : (i = e.match(/Gecko/)) && (A[d = "gecko"] = .1, (i = e.match(/rv:([\d.]*)/)) && i[1] && (A[d] = j(i[1]), 
                /Mobile|Tablet/.test(e) && (A.mobile = "firefox")), (i = e.match(/Firefox\/([\d.]*)/)) && i[1] && (A[_ = "firefox"] = j(i[1])));
                a || (a = t());
                var E, S;
                if (!n("type", "application/vnd.chromium.remoting-viewer")) {
                    E = "scoped" in r.createElement("style"), S = "v8Locale" in o;
                    try {
                        f = o.external || void 0;
                    } catch (e) {}
                    if (i = e.match(/360SE/)) l = "360"; else if ((i = e.match(/SE\s([\d.]*)/)) || f && "SEVersion" in f) l = "sougou", 
                    p = j(i[1]) || .1; else if ((i = e.match(/Maxthon(?:\/)+([\d.]*)/)) && f) {
                        l = "maxthon";
                        try {
                            p = j(f.max_version || i[1]);
                        } catch (e) {
                            p = .1;
                        }
                    } else E && S ? l = "360se" : E || S || !/Gecko\)\s+Chrome/.test(b) || A.opera || A.trident || (l = "360ee");
                }
                return (i = e.match(/TencentTraveler\s([\d.]*)|QQBrowser\/([\d.]*)/)) ? (l = "tt", 
                p = j(i[2]) || .1) : (i = e.match(/LBBROWSER/)) || f && "LiebaoGetVersion" in f ? l = "liebao" : (i = e.match(/TheWorld/)) ? (l = "theworld", 
                p = 3) : (i = e.match(/TaoBrowser\/([\d.]*)/)) && (l = "taobao", p = j(i[1]) || .1), 
                A.os = a, A.core = A.core || d, A.shell = _, A.ieMode = A.ie && r.documentMode || A.ie, 
                A.extraName = l, A.extraVersion = p, A.resolution = o.screen.width + "x" + o.screen.height, 
                A;
            }, F = "BackCompat" === r.compatMode ? r.body : r.documentElement, W = h.protocol, q = new Date().getTime(), K = 0, J = function(e) {
                this.config = e;
            };
            J.prototype = {
                startup: function() {
                    var e = this;
                    "complete" === document.readyState ? x.shouldBindMonitor && e.bindMonitor() : L(function() {
                        x.shouldBindMonitor && e.bindMonitor();
                    });
                },
                collectPerformanceTiming: function() {
                    var e = _.timing, t = {};
                    if (!e) return t;
                    var n, a, r, i = {
                        navigationStart: "ns",
                        unloadEventStart: "ues",
                        unloadEventEnd: "uee",
                        redirectStart: "rds",
                        redirectEnd: "rde",
                        fetchStart: "fs",
                        domainLookupStart: "dls",
                        domainLookupEnd: "dle",
                        connectStart: "cs",
                        connectEnd: "ce",
                        secureConnectionStart: "scs",
                        requestStart: "rqs",
                        responseStart: "rps",
                        responseEnd: "rpe",
                        domLoading: "dl",
                        domInteractive: "di",
                        domContentLoadedEventStart: "dcles",
                        domContentLoadedEventEnd: "dclee",
                        domComplete: "dc",
                        loadEventStart: "les",
                        loadEventEnd: "lee"
                    }, s = e.navigationStart;
                    for (n in e) a = e[n], r = i[n], r && (0 === a || void 0 === a ? t[r] = "na" : "number" == typeof a && (t[r] = a - s));
                    var u, c;
                    return "number" == typeof e.msFirstPaint ? u = e.msFirstPaint : o.chrome && o.chrome.loadTimes(c = o.chrome.loadTimes().firstPaintTime) && (u = Math.ceil(1e3 * c)), 
                    "number" == typeof u ? u -= s : u = "na", t.fp = u, t;
                },
                collectResourceTiming: function() {
                    if (!("performance" in o && "getEntriesByType" in _ && _.getEntriesByType("resource") instanceof Array)) return [];
                    var e = [], t = _.getEntriesByType("resource"), n = function(e) {
                        return void 0 === e || 0 === e ? 0 : Math.floor(e);
                    };
                    for (var a in t) if (t.hasOwnProperty(a)) {
                        var r = t[a];
                        r.initiatorType && e.push({
                            rs: n(r.redirectStart),
                            re: n(r.redirectEnd),
                            fs: n(r.fetchStart),
                            st: n(r.startTime),
                            dls: n(r.domainLookupStart),
                            dle: n(r.domainLookupEnd),
                            cs: n(r.connectStart),
                            ce: n(r.connectEnd),
                            scs: n(r.secureConnectionStart),
                            resqs: n(r.requestStart),
                            resps: n(r.responseStart),
                            respe: n(r.responseEnd),
                            restype: r.initiatorType,
                            n: r.name
                        });
                    }
                    return e;
                },
                sendPV: function() {
                    var t = this;
                    if (!this.initialized) {
                        var n, a, o, r, i, s, u, c, l, p, f, g, d, _ = 1;
                        try {
                            n = H(w), a = n.os, o = n.shell, r = n.core, i = n.resolution, s = n.extraName, 
                            u = n.extraVersion, c = a ? a + (n[a] ? n[a] : "") : "", l = o ? o + parseInt(n[o]) : "", 
                            p = r, f = i, g = s ? s + (u ? parseInt(u) : "") : "";
                        } catch (e) {}
                        var h = {
                            p: _,
                            o: B(c),
                            b: B(l),
                            w: B(p),
                            s: f,
                            mx: g
                        };
                        "https:" === W && (h.isps = 1), (d = e().trid) && (h.trid = d), setTimeout(function() {
                            var e, n, a = t.collectPerformanceTiming();
                            for (e in a) a.hasOwnProperty(e) && (n = a[e], h[e] || (h[e] = n));
                            t.initialized = !0, t.sendData(h, !0);
                        }, 0);
                    }
                },
                bindMonitor: function() {
                    var e = this, t = !!r.attachEvent, n = t ? "attachEvent" : "addEventListener";
                    r[n]((t ? "on" : "") + "mousedown", function(t) {
                        t = t || o.event;
                        var n = t.target || t.srcElement;
                        n && e.mousedown(n, t);
                    }, !1);
                },
                mousedown: function(e, t) {
                    var n, a = e.tagName, o = {
                        type: 1
                    };
                    if (!a || "HTML" !== a) {
                        "A" !== a && "AREA" !== a || (n = e.getAttribute("href", 2) || "", o.href = n);
                        var r = D(e, t, this.config.layout);
                        o.xpath = U(e), o.x = r.x, o.y = r.y, o.ex = r.ex, o.ey = r.ey, o.sw = r.sw, o.ew = e.offsetWidth, 
                        o.eh = e.offsetHeight, o.t = new Date().getTime() - q, o.n = ++K, A && T && (o.so = encodeURIComponent(T)), 
                        this.sendData(o);
                    }
                },
                sendData: function(e, t) {
                    var n = "$$_hotpoint", a = Math.ceil(1e3 * Math.random()), o = window.aplus_queue || (window.aplus_queue = []);
                    t ? o.push({
                        action: "aplus.sendPV",
                        arguments: [ {
                            is_auto: !0
                        }, e ]
                    }) : a < 1e3 * C.RATE.RESOURCE_TIMING && E && o.push({
                        action: "aplus.record",
                        arguments: [ n, "CLK", i({
                            is_auto: 1
                        }, e), "POST" ]
                    });
                }
            }, N() && (x.shouldBindMonitor = !0);
            var z = _.setResourceTimingBufferSize || _.webkitSetResourceTimingBufferSize;
            z && z.call(_, 200), o._ap_xwj_heat = {
                version: f
            };
            var $ = new J(x);
            $.startup();
        }
    }
    var o = window, r = document, i = n(35);
    e.exports = function() {
        try {
            a();
        } catch (t) {
            var e = window.aplus_queue || (window.aplus_queue = []);
            e.push({
                action: "aplus._aplus_cplugin_m.do_tracker_jserror",
                arguments: [ {
                    message: "headmapall",
                    error: encodeURIComponent(t.stack),
                    filename: "aplus_xwj_plugin"
                } ]
            });
        }
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(144)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(3), o = n(13), r = n(8), i = "hidden";
    e.exports = function() {
        o.on(window, "unload", function() {
            try {
                var e = window.aplus_queue || (window.aplus_queue = []);
                e.push({
                    action: "aplus.record",
                    arguments: [ a.PAGE_LEAVE, "OTHER", {} ]
                }), document.visibilityState === i && window.sessionStorage.removeItem(a.START_ID);
            } catch (e) {
                r().w("send browser close evnet failed");
            }
        });
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function(e) {
        try {
            var t = window, a = "g_tb_aplus_loaded";
            if (t[a]) return;
            t[a] = 1, n(146).isDebugAplus();
            var o = n(8), r = n(42), i = n(34), s = n(10), u = n(147), c = "running", l = [ "aplusReady", c ];
            r.doPubMsg(l), u.run({
                plugins: e.plugins,
                context: function() {
                    var t = {
                        PAGE_LOAD_TIME: new Date()
                    }, n = [];
                    return s(e.plugins, function(e) {
                        t[e.name] = e.config || {}, "aplus_log_inject" === e.name && e.config && e.config.plugins && (n = e.config.plugins.pv, 
                        s(n, function(e) {
                            t[e.name] = e.config;
                        }));
                    }), i.assign(t, {
                        aplus_config: e
                    });
                }
            }, function() {
                o().v("APLUS INIT SUCCESS");
            });
        } catch (e) {}
    };
}, function(e, t, n) {
    "use strict";
    var a, o = n(2), r = n(8);
    t.isDebugAplus = function(e) {
        if ("boolean" == typeof a) return a;
        if ("boolean" == typeof e && (a = e), localStorage && location) {
            var t = location.href.match(/aplusDebug=(true|false)/);
            t && t.length > 0 && localStorage.setItem("aplusDebug", t[1]), a = "true" === localStorage.getItem("aplusDebug");
        } else a = !1;
        return o.setGoldlogVal("aplusDebug", a), a && r().setDebug(a), a;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(120), o = n(20), r = n(42);
    t.run = function(e, t) {
        var n = new a();
        n.run({
            plugins: e.plugins,
            context: e.context
        }, {
            config: {},
            userdata: {},
            pubsubType: "aplusinit",
            messageFnQueue: [],
            middlewareMessageKey: "mw_change_aplusinit"
        }, function(e) {
            var n = [ "aplusInitContext", e ];
            r.doPubMsg(n), r.doCachePubs(n), o(t) && t(e);
        });
    };
} ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBsdXNfY2xvdWRfdW0uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGQwNjlhMzA1OWI5NDRiMDEwMWE1Iiwid2VicGFjazovLy8uL3NyYy9hcGx1c19jbG91ZF91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdvbGRsb2cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2FwbHVzU3RhdGljLmpzIiwid2VicGFjazovLy8uL3NyYy9hcGx1c19jbG91ZF91bV9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2FwbHVzX3Nlc3Npb25faW5qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfc2Vzc2lvbl9tYW5hZ2VyL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91bG9nLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9qc29uVXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvaXNQbGFpbk9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvYXBsdXNfdHJhY2tfZGVidWdfY2xvdWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvcGFzc2l2ZVN1cHBvcnRlZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvYXBsdXNUYXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2FwbHVzX2JvZHlfcmVhZHkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21lc3NhZ2VyL3B1YnN1Yl93ZWIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvUHViU3ViV2ViLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9CYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX2NsaWVudF93ZWIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2NsaWVudC9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX21ldGFfaW5qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxVcmwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbE1ldGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxOYXRpdmU0QXBsdXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxOYW1lU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tZXRhSW5mb0FsaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvZm9ybWF0LmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRGFzaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvYXNzaWduLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFRyaW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxTdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbExvZ2dlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tZXRhSW5mb01pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxQdWJzdWIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxSZWZlcnJlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvYXBsdXNfYWNfaW5qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfYWMvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdHJhY2tlclV0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2xpYl9hYy93YXRjaENMSy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEFycmF5LmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRG9tLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9lYWNoTWFwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfYWUvdXRpbC9ldmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2NvbW1vbi91dGlsX2FjX2FlLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsSGFzaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEVuY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2NvbW1vbi9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2xpYl9hYy93YXRjaERPTS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvYXBsdXNfYWVfaW5qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfYWUvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2FlL3dhdGNoRE9NLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfYWUvdXRpbC91dGlsRWxlbWVudEFjLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfYWUvd2F0Y2hFeHBvc3VyZUlPYnNlcnZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2FlL3V0aWwvdXRpbEV4cG9zdXJlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfYWUvd2F0Y2hFeHBvc3VyZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2FlL3dhdGNoUmVjb3JkLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9tb25pdG9yL25hbWVfc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbW9uaXRvci9yZWNvcmRfbG9zdF9wdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbW9uaXRvci90cmFja2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX21vbml0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21vbml0b3IvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9hcGx1c193ZWJfaHR0cF91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfY29ubmVjdGlvbi9tYWluX3dlYl9odHRwX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL2xvZ19jbG91ZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfY29ubmVjdGlvbi9tYWluX2Jhc2VfaHR0cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vYm9keV9idWlsZGVyX3dlYl91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvY2xvbmVEZWVwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9oZWFkZXJfYnVpbGRlcl93ZWJfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL21hbmdsZV93ZWIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2Jhc2U2NC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxNb25pdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsUGFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2lzU3RyaW5nLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9mZXRjaERhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3JjZmdfd2ViLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9jb29raWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3RsZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvZGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFJlbW90ZUNmZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vY2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doZW5fdG9fc2VuZHB2LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hlcmVfdG9fc2VuZF93ZWJfY2xvdWRfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxVQS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF93ZWJfY2xvdWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2xvZ0lkLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vdXRpbFBhcmFtcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2lzQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhX3dlYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEV4aW5mby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvZ2V0RXhwYXJhbXNPYmouanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3V0Mi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdW0ybmF0aXZlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2LmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRXZlbnRMaW1pdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbExvY2FsQ29uZmlnLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9hZnRlcl9wdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX3dlYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdXQyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91bTJuYXRpdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViX2Nsb3VkL2FwbHVzX3NwbV9jbG91ZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWJfY2xvdWQvbGliX3NwbV9jbG91ZC9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYl9jbG91ZC9saWJfc3BtX2Nsb3VkL3dhdGNoU1BNLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9hcGx1cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9SZWR1Y2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL2NvbXBvc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvcGx1Z2luc0xvYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFNwbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfYXBpL3JlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxOZXR3b3JrLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsUHZpZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2ZpbmdlcnByaW50L2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfZmluZ2VycHJpbnQvY2FudmFzLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2xpYl9qc0JyaWRnZS9BdG1CcmlkZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL2FwbHVzX3F1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfaG90L2hvdF9sb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2FwbHVzX2Fwdl9pbmplY3RfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2xpYl9hdXRvcHYvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvYXBsdXNfYXV0b3RyYWNrX2luamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2Nsa19hdXRvdHJhY2svbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2Nsa19hdXRvdHJhY2svZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2xpYl9jbGtfYXV0b3RyYWNrL2V2ZW50VXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxPYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2FwbHVzX2hlYXRtYXBfaW5qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfaGVhdG1hcC9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9hcGx1c19wYWdlbGVhdmVfaW5qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfcGFnZV9sZWF2ZS9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9hcGx1c193ZWJfYmFzaWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2RlYnVnLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL2FwbHVzaW5pdC5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJpbml0R2xvYmFsIiwid2luZG93IiwiYXBsdXNfY29uZmlnIiwiX2FwbHVzX2NvbnRleHQiLCJhcGx1c1N0YXRpYyIsIkFQTFVTIiwiQVBMVVNfUVVFVUUiLCJHT0xETE9HIiwiR09MRExPR19RVUVVRSIsImlzV2ViIiwiZSIsImdldENvbnRleHQiLCJjb250ZXh0IiwidiIsImFwbHVzIiwiYXBsdXNfcXVldWUiLCJfYXBsdXNEZWZhdWx0VmFsdWUiLCJfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSIsImdvbGRsb2ciLCJfZ29sZGxvZ19xdWV1ZSIsImdvbGRsb2dfcXVldWUiLCJjb25jYXQiLCJnZXRHbG9iYWxWYWx1ZSIsImtleSIsImciLCJxIiwic2V0R2xvYmFsVmFsdWUiLCJ2YWx1ZSIsImdldEdvbGRsb2dWYWwiLCJzZXRHb2xkbG9nVmFsIiwidmFsIiwiZiIsImdldENsaWVudEluZm8iLCJNV19DSEFOR0UiLCJNRVRBX0lORk8iLCJBUFBFTkRfTUVUQV9JTkZPIiwiU0VUX01FVEFfSU5GTyIsIkhUVFAiLCJfcHVic3ViIiwiZGVmYXVsdENvZGUiLCJDTEsiLCJFWFAiLCJJTVBFWFAiLCJPVEhFUiIsIkFQUF9TSE9XIiwiQVBQX0hJREVfT1JfVU5MT0FEIiwiU0VTU0lPTl9JTlRFUlZBTCIsIlNIQVJFX0NBQ0hFX0lOVEVSVkFMIiwiRUtWUyIsIkVWRU5UX01BWF9DT1VOVCIsIk1FTU9SWV9NQVhfQ09VTlQiLCJNQVhfUVVFVUVfQ09VTlQiLCJFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUwiLCJQQUdFX1NUQVJUIiwiUEFHRV9FTkQiLCJBUFBfU1RBUlQiLCJBUFBfRU5EIiwiVVNFUl9QUk9GSUxFX0tFWSIsIklNUFJJTlQiLCJJRF9UWVBFIiwiSlNCUklER0VfT05MWSIsIlBBR0VfQ09ORklHIiwiQVBMVVNfU0tJUF9BUFZfUlVMRVMiLCJBUExVU19QVl9ET01BSU4iLCJBUExVU19FS1ZfRE9NQUlOIiwiQVVUT19HRVRfT1BFTklEIiwiUEFHRV9FTlRFUiIsIkNVUlJFTlRfUEFHRV9DT05GSUciLCJfQU5PTllfSUQiLCJfREVWX0lEIiwiX1VTRVJfSUQiLCJERUZBVUxUX0NPREUiLCJFVkVOVF9NQVAiLCIyMTAxIiwiMjIwMSIsIjIyMDIiLCIxOTk5OSIsIjEwMjMiLCIxMDEwIiwiRVZFTlRfSURfTUFQIiwiU0hPVyIsIkhfT1JfVSIsIlVOU1VCU0NSSUJFIiwiU1VCU0NSSUJFIiwiUFVCTElTSCIsIkNBQ0hFX1BVQlMiLCJBUExVU19VTklWRVJTQUwiLCJDT01QTEVURSIsIlBWX0NPREUiLCJFWFBfQ09ERSIsIkNMS19DT0RFIiwiT1RIRVJfQ09ERSIsIlNQTV9DTlQiLCJTUE1fVVJMIiwiU1BNX1BSRSIsIk1XX0NIQU5HRV9QViIsIk1XX0NIQU5HRV9ISkxKIiwiSFRUUFMiLCJBUExVU19BUFBFTkRfTUVUQV9JTkZPIiwiQVBMVVNfU0VUX01FVEFfSU5GTyIsIlBWSUQiLCJBUExVU19MT0dfUElQRSIsIm9wZW5BUElzIiwiU0VTU0lPTl9QQVVTRV9USU1FIiwiQ1VSUkVOVF9TRVNTSU9OIiwiTUFYX0VWRU5USURfTEVOR1RIIiwiTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgiLCJNQVhfUFJPUEVSVFlfS0VZU19DT1VOVCIsIkZBSUxFRF9SRVFVRVNUUyIsIlJFUVVFU1RTIiwiU0hBUkVTIiwiQVBMVVNfU1NSQyIsIkdMT0JBTF9QUk9QRVJUWSIsIkFQTFVTX0lNUFJJTlRfVkVSU0lPTiIsIkFQTFVTX1JFTU9URV9DT05GSUciLCJSQU5LIiwiV0VCX0VWRU5UX1NVRkZJWCIsIldFQl9QQ19QVl9TVUZGSVgiLCJXRUJfV0FQX1BWX1NVRkZJWCIsIlBBR0VfTEVBVkUiLCJBUExVU19BVVRPVFJBQ0tfRU5BQkxFRCIsIkFQTFVTX0FVVE9UUkFDS19FTkFCTEVEX1JFTU9URSIsIkFQTFVTX0FVVE9UUkFDS19DT05GSUciLCJBUExVU19BVVRPVFJBQ0tfQ09ORklHX1JFTU9URSIsIkFQTFVTX0VWRU5UX0xJTUlUUkFURVMiLCJBUExVU19ESVNBQkxFX0FVVE9FVkVOVCIsIkFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UX1JFTU9URSIsIkFQTFVTX0RJU0FCTEVfQVVUT1BWIiwiQVBMVVNfRElTQUJMRV9BVVRPUFZfUkVNT1RFIiwiQVBMVVNfREVWSUNFX0VOQUJMRSIsIlBFUkZPUk1BTkNFX1dBUklORyIsIlNUQVJUX0lEIiwiQVBMVVNfQlJJREdFX05BTUUiLCJBUExVU19NSU5JX1JFUVVFU1RfVElNRU9VVCIsIkFQTFVTX0xBVEVBU1RfVVRNIiwibWV0YUluZm8iLCJhcGx1cy1pZnItcHYiLCJhcGx1cy1yaG9zdC12IiwiYXBsdXMtcmhvc3QtZyIsImFwbHVzLWNoYW5uZWwiLCJhcHBJZCIsInNka0lkIiwiYXBsdXMtY3B2ZGF0YSIsImFwbHVzLWV4ZGF0YSIsImFwbHVzLWdsb2JhbGRhdGEiLCJhcGx1cy1tbXN0YXQtdGltZW91dCIsImFwbHVzLXRvVVQiLCJhcGx1cy1kaXNhYmxlLWF1dG9ldmVudCIsImFwbHVzLWRpc2FibGUtYXB2IiwiYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWQiLCJhcGx1cy1kZXZpY2UtZW5hYmxlIiwiZ2xvYmFsQ29uZmlnIiwiaXNEZWNvZGVVcmwiLCJpc0FsaSIsImlzVU0iLCJFVEFHX1NUT1JBR0VfS0VZIiwic2NyaXB0X25hbWUiLCJsdmVyIiwiTkFNRV9TVE9SQUdFX0tFWVMiLCJSRUZFUlJFUiIsIlJFRkVSUkVSX1BWX0lEIiwiTE9TVF9QVl9QQUdFX0RVUkFUSU9OIiwiTE9TVF9QVl9QQUdFX1NQTUFCIiwiTE9TVF9QVl9QQUdFIiwiTE9TVF9QVl9QQUdFX01TRyIsInBsdWdpbnMiLCJuYW1lIiwicGF0aCIsImNvbmZpZyIsImxvc3RQdlJlY29yZFJhdGlvIiwib2Jzb2xldGVJbnRlclJlY29yZFJhdGlvIiwianNFcnJvclJlY29yZFJhdGlvIiwiYnJvd3NlclN1cHBvcnRSYXRpbyIsImRlcHMiLCJwdiIsImFwbHVzV2FpdGluZyIsInB2ZGF0YVRvVXQiLCJmbGFnIiwiaGpsaiIsInVybFJ1bGVzIiwicnVsZSIsImNkblBhdGgiLCJydW4iLCJ1bVV0aWxzIiwicmlkIiwiZ2V0U3RhcnRJZCIsInNlc3Npb25TdG9yYWdlIiwic2V0SXRlbSIsImdldFJhbmRvbVN0ciIsImxlbiIsInN0ciIsImFyciIsImkiLCJOdW1iZXIiLCJwb3MiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJsZW5ndGgiLCJzdGFydHNXaXRoIiwic2VhcmNoVmFsIiwic3Vic3RyIiwiYXNzaWduIiwidGFyZ2V0IiwidW5kZWZpbmVkIiwiVHlwZUVycm9yIiwib3V0cHV0IiwiT2JqZWN0IiwiaW5kZXgiLCJhcmd1bWVudHMiLCJzb3VyY2UiLCJuZXh0S2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjaGVja0V2ZW50IiwiZXZlbnRJZCIsInByb3BlcnRpZXMiLCJ1bG9nIiwianNvblV0aWwiLCJ3Iiwic3RyaW5nZnkiLCJjdXNwIiwicmVzZXJ2ZVdvcmRzIiwicmVzZXJ2ZVdvcmRNYXAiLCJmb3JFYWNoIiwid29yZCIsImpvaW4iLCJBcnJheSIsImlzQXJyYXkiLCJjb3VudCIsImVhY2giLCJkZWxldGVJbmZvIiwiZ29rZXkiLCJjaGVja0VtcHR5T2JqIiwiZGF0YSIsImtleXMiLCJEYXRlIiwibm93IiwiRGF0YVR5cGUiLCJIQUxGX1NFU1NJT04iLCJDTE9TRV9TRVNTSU9OIiwiRUtWIiwiRU5URVJfUEFHRSIsIkxFQVZFX1BBR0UiLCJBY2Nlc3NUeXBlIiwiTU9CSUxFX05FVFdPUktfMkciLCJNT0JJTEVfTkVUV09SS18zRyIsIk1PQklMRV9ORVRXT1JLXzRHIiwiTU9CSUxFX05FVFdPUktfTk9ORSIsIkxPR19QUkVGSVgiLCJVTG9nIiwidGhpcyIsInNldERlYnVnIiwiZGVidWciLCJfZGVidWciLCJjb25zb2xlIiwiaW5mbyIsImFwcGx5IiwiZXJyb3IiLCJ3YXJuIiwidGlwX3ciLCJtc2ciLCJsb2ciLCJyZXBlYXQiLCJjaGFyIiwicmVzIiwiX2luc3RhbmNlIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwianNvbiIsInBhcnNlVG9BcnJheSIsImlzUGxhaW5PYmplY3QiLCJmbiIsImF0dHIiLCJsIiwicnMiLCJvYmoiLCJwcm90byIsImdldFByb3RvdHlwZU9mIiwidXRpbEV2ZW50IiwiZG9jIiwiZG9jdW1lbnQiLCJfYXBsdXNfY3BsdWdpbl90cmFja19kZWIiLCJzdGF0dXMiLCJ3aW4iLCJpc1RyYWNrRGVidWciLCJMUyIsImxvY2FsU3RvcmFnZSIsIl90cmFja2lkIiwicmVnIiwiUmVnRXhwIiwibWF0Y2hfdmFsdWUiLCJsb2NhdGlvbiIsImhyZWYiLCJtYXRjaCIsIl9yIiwicmVmZXJyZXIiLCJtYXRjaF9yZWZlciIsIl9uIiwibWF0Y2hfbmFtZSIsIl90cmFja2lkVmFsdWUiLCJnZXRJdGVtIiwiZGF0ZSIsInZhbHVlcyIsInNwbGl0IiwicmVwbGFjZSIsImxvZ2RhdGUiLCJsb2dkYXRlVGltZSIsImdldFRpbWUiLCJub3dUaW1lIiwic2V0RnVsbFllYXIiLCJwYXJzZUludCIsInNldE1vbnRoIiwic2V0RGF0ZSIsInNldEhvdXJzIiwic2V0TWludXRlcyIsInNldFNlY29uZHMiLCJzZXRNaWxsaXNlY29uZHMiLCJsaW1pdCIsInNldFRyYWNrRGVidWdJbmZvIiwiZGVidWdJZCIsImFwbHVzX3RyYWNrX2RlYnVnX2lkIiwicHVzaCIsImFjdGlvbiIsIm9uIiwibWVzc2FnZSIsInBvc3RNZXNzYWdlIiwib3JpZ2luIiwidGFwRXZlbnRCaW5kIiwiZWxlbWVudCIsImV2ZW50X3R5cGUiLCJfJCIsIm1ldGFfaW5mbyIsImFwbHVzX2N0YXAiLCJhcGx1c1RvdWNoIiwiaXNUb3VjaCIsImNyZWF0ZUVsZW1lbnQiLCJhcGx1c1RhcCIsImRvU2Nyb2xsQ2hlY2siLCJjYiIsImRvY3VtZW50RWxlbWVudCIsImRvU2Nyb2xsIiwic2V0VGltZW91dCIsIkRPTVJlYWR5IiwiY2FsbGJhY2siLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsImRldGFjaEV2ZW50IiwidG9wbGV2ZWwiLCJmcmFtZUVsZW1lbnQiLCJvbmxvYWQiLCJoaXN0b3J5V3JhcCIsInR5cGUiLCJvcmkiLCJoaXN0b3J5IiwiRXZlbnQiLCJlcnIiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJydyIsImFyZ3MiLCJpbmRleE9mIiwib25ldmVudCIsImF0dGEiLCJldmVudCIsImVsIiwic3JjRWxlbWVudCIsInBhc3NpdmVTdXBwb3J0ZWQiLCJwYXNzaXZlIiwic3VwcG9ydGVkIiwidGVzdCIsIm9wdGlvbnMiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImdldFJhbmRvbSIsIm1pbiIsIm1heCIsImZsb29yIiwiZmlyZUV2ZW50IiwiZXh0cmEiLCJ0b3VjaHN0YXJ0SGFuZGxlciIsImRvY0VsIiwiZ2VzdHVyZXMiLCJUT1VSQ0hfTU9WRSIsInRvdWNobW92ZUhhbmRsZXIiLCJUT1VDSF9FTkQiLCJ0b3VjaGVuZEhhbmRsZXIiLCJUT1VDSF9DQU5DRUwiLCJjaGFuZ2VkVG91Y2hlcyIsInRvdWNoIiwidG91Y2hSZWNvcmQiLCJnZXN0dXJlIiwic3RhcnRUb3VjaCIsInN0YXJ0VGltZSIsIlRBUFBJTkciLCJpZGVudGlmaWVyIiwiZGlzcGxhY2VtZW50WCIsImNsaWVudFgiLCJkaXNwbGFjZW1lbnRZIiwiY2xpZW50WSIsImRpc3RhbmNlIiwic3FydCIsInBvdyIsInRpbWVzdGFtcCIsIkFQTFVTX1RBUCIsInRvdWNoRXZlbnQiLCJmaXhJT1NUb3VjaEJ1ZyIsIl9fZml4VG91Y2hFdmVudCIsIlRPVUNIX1NUQVJUIiwiaW5pdCIsImlzSW5pdGlhbGl6ZWQiLCJfYXBsdXNfdGFwX2NhbGxiYWNrIiwidW4iLCJzdGF0ZSIsImhhbmRsZXIiLCJzZXRJbnRlcnZhbCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiY2xlYXJJbnRlcnZhbCIsIlB1YlN1YldlYiIsInV0aWxHb2xkbG9nIiwiYXBsdXNfcHVic3ViIiwiY3JlYXRlIiwiUHViU3ViIiwiZXh0ZW5kIiwic3Vic2NyaWJlT25jZSIsImVUeXBlIiwiaCIsImNhbGxhYmxlIiwib25jZSIsIl9zZWxmIiwic3Vic2NyaWJlIiwidW5zdWJzY3JpYmUiLCJzbGljZSIsImlzRnVuY3Rpb24iLCJCYXNlIiwiZ2V0QXJncyIsIl9hcmdzIiwiaiIsInByb3BzIiwiaW5zdGFuY2UiLCJoYW5kbGVycyIsInB1YnMiLCJzZXRIYW5kbGVycyIsInMiLCJzcGxpY2UiLCJwdWJsaXNoIiwic2l6ZSIsImNhY2hlUHVicyIsIm8iLCJTdWJCYXNlIiwiRiIsImNvbnN0cnVjdG9yIiwiX2FwbHVzX2NsaWVudCIsImdldE9sZEZhc2hpb25Pc0luZm8iLCJ1YSIsInRva2VuIiwidG9rZW4wIiwib3MiLCJkZXZpY2VfbW9kZWwiLCJvc192ZXJzaW9uIiwiZ2V0TW9kZXJuT1NJbmZvIiwib3NJbmZvIiwic3Vic3RyaW5nIiwiZCIsInRvTG93ZXJDYXNlIiwiVUEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJtb2Rlcm5PUyIsIkRhcndpbk9TIiwiX29zIiwic2NyIiwic2NyZWVuIiwic2NyZWVuV2lkdGgiLCJ3aWR0aCIsInNjcmVlbkhlaWdodCIsImhlaWdodCIsImxhbmd1YWdlIiwidXNlckxhbmd1YWdlIiwiZ2V0Q2RuUGF0aCIsImN1cnJlbnRfbm9kZSIsImdldEVsZW1lbnRCeUlkIiwicGF0aF9vdGhlcnMiLCJzcmMiLCJpc0ludGVybmF0aW9uYWwiLCJpc0ludCIsImdldE1ldGFJbmZvIiwiaXNNb2JpbGUiLCJpc1Bob25lIiwiZ2V0VXRQYXJhbUZyb21VcmwiLCJ1dHBhcmFtY250IiwidXRpbFVybCIsImdldFBhcmFtRnJvbVVybCIsImRlY29kZVVSSUNvbXBvbmVudCIsInV0aWxOYXRpdmU0QXBsdXMiLCJ1dGlsTmFtZVN0b3JhZ2UiLCJyZWZlciIsImdldFJlZmVyIiwibmFtZVN0b3JhZ2UiLCJoYXZlTmF0aXZlRmxhZ0luVUEiLCJpc190ZXJtaW5hbCIsInNlbmRfcHZfY291bnQiLCJwYWdlX3JlZmVycmVyIiwic3BtIiwicUdldCIsImsiLCJtZXRhVmFsdWUiLCJhcHBlbmRNZXRhSW5mbyIsInNldE1ldGFJbmZvIiwidXJsIiwicGFyYW0iLCJyZWcxIiwicmVnMiIsInRtcF8xIiwidG1wXzIiLCJwYXJhbV8xIiwicGFyYW1fMiIsImFkZFBhcmFtc0ludG9VcmwiLCJwYXJhbXMiLCJzZWFyY2giLCJoYXNoIiwiYSIsInF1ZXJ5X3NwbGl0IiwicXVlcnlfY291bnQiLCJhbmRfY2hhciIsImFkZFF1ZXJ5U3RyQXJyIiwicGFyYW1LZXkiLCJwYXJhbVZhbHVlIiwic2hpZnQiLCJwb3AiLCJ3YXRjaEhhc2hDaGFuZ2UiLCJvcmlIYXNoIiwidXRpbEdRIiwicHVzaEludG9Hb2xkbG9nUXVldWUiLCJIQVNIIiwid2F0Y2hIaXN0b3J5Q2hhbmdlIiwiaGFuZGxlQ2hhbmdlIiwibmV3UGF0aCIsInByb3RvY29sIiwiaG9zdCIsIkhJU1RPUlkiLCJwYXRobmFtZSIsIm9yaVBhdGgiLCJwdXNoU3RhdGUiLCJuZWVkUlN0YXRlIiwidXRpbE1ldGEiLCJnZXRNZXRhQ250IiwiZ2V0U1BNRnJvbVVybCIsImdldFF1ZXJ5RnJvbVVybCIsInN0cjJwYXJhbXMiLCJ0Iiwic3RhcnRJZHgiLCJuYW1lcyIsImFwbHVzXzEiLCJhcGx1c18yIiwiZ2V0TWV0YVRhZ3MiLCJmb3JjZSIsIl9oZWFkX25vZGUiLCJfbWV0YV9ub2RlcyIsIm1ldGEiLCJjb250ZW50IiwibWV0YV9ub2RlcyIsInV0aWxBdHRyaWJ1dGUiLCJ0cnlUb0dldEF0dHJpYnV0ZSIsImdldE9uZVBhZ2VJbmZvIiwiaXNvbmVwYWdlIiwidXJscGFnZW5hbWUiLCJpc29uZXBhZ2VfZGF0YSIsImFycl9jb250ZW50IiwiYXR0cl9uYW1lIiwiZ2V0QXR0cmlidXRlIiwidHJ5VG9TZXRBdHRyaWJ1dGUiLCJhdHRyX3ZhbHVlIiwic2V0QXR0cmlidXRlIiwidHJ5VG9SZW1vdmVBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJVVEZMQUciLCJVTUZMQUciLCJpc05hdGl2ZTRBcGx1cyIsImNoYW5uZWwiLCJicmlkZ2VOYW1lIiwiYXBsdXNCcmlkZ2VOYW1lIiwibWF0Y2hSZXN1bHQiLCJzYXZlIiwicGFpcnMiLCJlbXB0eSIsIlNUT1JBR0UiLCJlbmNvZGUiLCJFUSIsIk9SSUdJTl9OQU1FIiwiU0NIRU1FIiwiUSIsIkFORCIsImV2ZW50TmFtZSIsImV2dCIsIl9uYW1lU3RvcmFnZSIsIlJFX1BBSVIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJkZWNvZGUiLCJwYWlyIiwiU3RyaW5nIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwidmFsdWVPZiIsInRvU3RyaW5nIiwiZ2V0TWV0YU1pY3Jvc2NvcGVEYXRhIiwiX21pY3Jvc2NvcGVfZGF0YSIsInV0aWxEYXRhIiwicGFyc2VTZW1pY29sb25Db250ZW50IiwiaXNfaGVhZF9oYXNfbWV0YV9taWNyb3Njb3BlX2RhdGEiLCJfbWljcm9zY29wZV9kYXRhX3BhcmFtcyIsImZvcm1hdCIsIm9iajJwYXJhbSIsIm1zX2RhdGFfcGFnZV9pZCIsIm1zX2RhdGFfc2hvcF9pZCIsIm1zX2RhdGFfaW5zdGFuY2VfaWQiLCJtc19kYXRhX3NpdGVDYXRlZ29yeUlkIiwibXNfcHJvdG90eXBlX2lkIiwic2l0ZV9pbnN0YW5jZV9pZF9vcl9zaG9wX2lkIiwiX2F0cF9iZWFjb25fZGF0YSIsIl9hdHBfYmVhY29uX2RhdGFfcGFyYW1zIiwiZ2V0U1BNUHJvdG9jb2xGcm9tTWV0YSIsIm1ldGFfc3BtX3Byb3RvY29sIiwiZ2V0TWV0YUJ5RGF0YXNwbSIsIl9tZXRhIiwicXVlcnlTZWxlY3RvciIsInBhcnNlT25lUGFnZSIsImdldEluZm8iLCJtZXRhTmFtZSIsIkFQTFVTX1hfU0VUVElOR1MiLCJwcmlvcml0eU1ldGFJbmZvIiwic3BtX3Byb3RvY29sIiwidXRpbERhc2giLCJmbG9hdF9rZXlzIiwicGFyc2VGbG9hdCIsImxhc3RfaW5mbyIsImxvZ2dlclByaW9yaXR5SW5mbyIsInV0aWxMb2dnZXIiLCJsb2dnZXIiLCJwYXJhbTJvYmoiLCJwcm9jZXNzT2JqZWN0Iiwib2xkX3ZhbHVlIiwibmV3X3ZhbHVlIiwidG9TZXRNZXRhSW5mbyIsInByb2Nlc3NBcnJheSIsInByb2Nlc3NPYmoiLCJmcm9tIiwicHJvY2Vzc0FwbHVzRXhpbmZvIiwiZXhpbmZvc19uZXciLCJfb2xkVmFsdWUiLCJ0bXBfcGFyc2UiLCJhcnIycGFyYW0iLCJza2lwRW5jb2RlIiwiaXNJblBsYW5PYmoiLCJzX3BsYWluX29iaiIsIl92YWx1ZSIsImFycjJvYmoiLCJyZXQiLCJpdGVtIiwiZnJhZ21lbnQiLCJjb21tVHJhbnNsYXRlIiwiX3YiLCJlbmNvZGVHb2tleVZhbHVlIiwibWFrZUNhY2hlTnVtIiwiaXNTdGFydFdpdGgiLCJzMSIsInMyIiwiaXNFbmRXaXRoIiwiZW5kc1dpdGgiLCJsMSIsImwyIiwiYW55IiwiaXNOdW1iZXIiLCJpc05hTiIsImlzQ29udGFpbiIsImNsb25lRGVlcCIsIm5ld29iaiIsImdldFVybFBhcmFtcyIsInJlZ2V4IiwiZXhlYyIsImlzRW1wdHlPYmplY3QiLCJ0YXJnZXRPYmoiLCJhcmdzT2JqIiwidG8iLCJuZXh0U291cmNlIiwidXRpbFRyaW0iLCJ1dGlsU3RvcmUiLCJhcGx1c1V0aWwiLCJ0cnlUb0RlY29kZVVSSUNvbXBvbmVudCIsImRlZmF1bHRfdmFsIiwiZGljdCIsInVuZGVjb2RlIiwiYTIiLCJhX2xlbiIsInRyaW0iLCJub2RlTGlzdFRvQXJyYXkiLCJub2RlcyIsImdldExzQ25hIiwiX2xzX2NuYSIsIl9hcnIiLCJzZXRMc0NuYSIsInRvZGF5IiwiY25hIiwic2V0IiwiZ2V0THNJbXB2IiwiSU1QUklOVF9TVE9SQUdFX0tFWSIsIl9sc19pbXB2Iiwic2V0THNJbXB2IiwiaW1wdiIsInNldExzUmVtb3RlQ2ZnIiwiUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSIsImNmZyIsImNsb25lQ2ZnIiwiZ2V0THNSZW1vdGVDZmciLCJfbHNfcmVtb3RlQ2ZnIiwiZ2V0VXJsIiwiZWdVcmwiLCJyaG9zdF92IiwiZml4RG9tYWluIiwidGVzdEtleSIsInJlbW92ZSIsIm1rUGxhaW5LZXkiLCJta1BsYWluS2V5Rm9yRXhwYXJhbXMiLCJrZXlfcHJlZml4IiwiX2tleSIsInBhcmFtMmFyciIsImpzb25MaWtlU3RyMkpTT04iLCJqc29uU3RyIiwiYXJyMSIsImFycjIiLCJyZXN1bHQiLCJnZXRBcHBLZXkiLCJjaGVja0RvbWFpbiIsIm1hdGNoZWQiLCJjaGVja09wZW5pZCIsIm9kIiwibWFwRXZlbnRTYW1wbGVSYXRlcyIsImV2ZW50SWRzIiwiZWt2Iiwic2FtcGxpbmdSYXRlIiwicHJlZml4IiwibGV2ZWwiLCJkZWJ1Z0xvZyIsImFwbHVzRGVidWciLCJjYXRjaEV4Y2VwdGlvbiIsInJlY29yZCIsInV0aWxQdWJzdWIiLCJPQkpFQ1QiLCJTVFJJTkciLCJnZXRVc2VySW5qZWN0R29rZXkiLCJvcHRzIiwidXNlckZuIiwiX3NldE1ldGFJbmZvIiwicGFnZVByb3BlcnRpZXMiLCJfayIsImFyZzEiLCJkZWZhdWx0TW9kZSIsIm1vZGUiLCJtc2dzIiwiZG9QdWJNc2ciLCJkb0NhY2hlUHVicyIsIkZOIiwiZ2V0UHVic3ViIiwicHVic3ViIiwiZG9TdWJNc2ciLCJfY29uZmlnIiwiYXBsdXNfYWNfaW5pdCIsImRvX2luaXQiLCJ0cmFja2VyVXRpbCIsIndyYXAiLCJnZXRBdXRvQ2xrQ29uZmlnIiwid2F0Y2hET00iLCJXYXRjaERPTSIsImF1dG9DbGtDb25maWciLCJ3YXRjaENMSyIsIndhdGNoX2NsayIsIm1ldGFLZXkiLCJtZXRhVmF1ZSIsIl9jb25maWcyIiwiY2xlYXJEb20iLCJyZXNldCIsImdfc3BtIiwiZ19TUE0iLCJfYXBsdXNfYWMiLCJlbGVtZW50U2VsZWN0b3JTaXplTWFwIiwiZG9fdHJhY2tlcjIiLCJtZXRob2RfbmFtZSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkb190cmFja2VyIiwiZG9fdHJhY2tlcl9qc2Vycm9yIiwidXRpbEFycmF5IiwidXRpbERvbSIsImVhY2hNYXAiLCJ1dGlsX2FjX2FlIiwidGFncyIsIkxPR0tFWV9BVFRSIiwiREFUQV9BUExVU19BQ19LRVkiLCJ0cnlHZXRQYXJhbXMiLCJjbGtDb25maWdzIiwiaGFzaF92YWx1ZSIsIl9hY0hhc2hNYXAiLCJsb2drZXkiLCJjbGtDb25maWciLCJnZXRQYXJhbXMiLCJwYXJlbnROb2RlIiwiaW5kZXhvZiIsInRhZ05hbWUiLCJoYW5kbGVyX2F1dG9fY2xrIiwic3BtX2FiIiwic2NtIiwiZXhhcmdzX29yaWdpbiIsImV4YXJncyIsImZpbGxQcm9wc0RhdGEiLCJmaWxsRmlsdGVyRGF0YSIsImZpbGxTcG1EYXRhIiwiZ2V0RGF0YVRyYWNrZXJQYXJhbXMiLCJhY0F1dG9Vc2VyRm4iLCJnZXRBdXRvQ2xrVXNlckZuIiwiYXV0b1VzZXJGbkhhbmRsZXIiLCJlbGVtZW50U2VsZWN0b3IiLCJ1c2VyZGF0YSIsImFwbHVzQ29udGVudElkIiwiX21ldGhvZCIsIm1ldGhvZCIsImZsYXQiLCJmaW5kIiwiaXRlbU1hdGNoIiwic29tZSIsImdldEN1cnJlbnROb2RlIiwiX2N1cnJlbnROb2RlIiwic2V0Tm9uY2UiLCJub2RlIiwibm9uY2UiLCJhZGRTY3JpcHQiLCJodHRwc19zcmMiLCJhc3luYyIsImhhc0Nyb3NzT3JpZ2luIiwiaGFzQXR0cmlidXRlIiwiY3Jvc3NPcmlnaW4iLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsImxvYWRTY3JpcHQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvbmVycm9yIiwiY2hhcnNldCIsInNzIiwicmVtb3ZlQ2hpbGQiLCJtYXAiLCJrMSIsImdldEN1c3RvbVRhcCIsImN1c3RvbVRhcCIsInRhcEV2ZW50VW5CaW5kIiwidXBkYXRlSGFzaHMiLCJhcGx1c0tleSIsIkdNIiwiTWFwIiwidG1wVmFsdWUiLCJ1dGlsSGFzaCIsInV0aWxFbmNvZGUiLCJnZXRYUGF0aCIsInNlZ3MiLCJzaWIiLCJ1bmlxdWVfaWRfY291bnQiLCJlbF9pZCIsImFsbF9ub2RlcyIsIm5vZGVUeXBlIiwidW5zaGlmdCIsInByZXZpb3VzU2libGluZyIsIm5vZGVsaXN0VG9BcnJheSIsIm5vZGVsaXN0IiwiZ2V0RWxlbWVudHMiLCJfZG9jdW1lbnQiLCJfZG9jIiwiZWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFnIiwiYXR0cnMiLCJmaWx0ZXIiLCJhdHRyX2tleSIsInRtcF90YWciLCJ0bXBfdmFsdWUiLCJoYXNLZXkiLCJpc0RlYnVnIiwiSVNfREVCVUciLCJleHBDb25maWciLCJfZXhwX3Byb3BzIiwiX3ZhbCIsImNLZXkiLCJ0bXBzIiwiREFUQV9UUkFDS0VSX1BBUkFNUyIsImRhdGFUcmFja2VyUGFyYW1zIiwic3BtQiIsInNwbUMiLCJzcG1EIiwiYm9keSIsImRhdGFzZXQiLCJwYWdlbmFtZSIsInNwbWMiLCJzcG1kIiwiYXBsdXNWdFBvcyIsImlzTWV0aG9kIiwiaXNQa2dTaXplIiwicGtnU2l6ZSIsImlzX3BrZ19zaXplIiwiZmlsdGVyRXhwQ29uZmlnUmVxdWVzdENmZyIsImdldERlZmF1bHRSZXF1ZXN0Q2ZnIiwic3RyaW5nVG9PYmplY3QiLCJwYXJhbXNBcnIiLCJ0bXAiLCJ0cnlUb0VuY29kZVVSSUNvbXBvbmVudCIsImF1dG9Vc2VyRm4iLCJhdXRvQ29uZmlnIiwidXNlclBhcmFtcyIsImdldEVsZUF0dHJpYnV0ZXMiLCJlbGUiLCJhdHRyaWJ1dGVzIiwiYXR0cl92YWx1ZXMiLCJnZXRTcG1PYmoiLCJzcG1BbmNob3JJZCIsImFuY2hvcl9pZCIsImIiLCJnZXRFbGVtZW50SGFzaCIsImdldFBhcmFtIiwiaGFzaF92YWx1ZV9pbmRleHMiLCJFSU5ERVgiLCJTUE1EIiwicHZpZCIsImlnbm9yZV9hdHRyIiwiX3RtcCIsImZpbHRlclVubG9hZEF0dHIiLCJEQVRBX0FQTFVTX0FFX0tFWSIsInVwZGF0ZU1hcFZhbHVlIiwidG1wSGFzaHMiLCJ1cEZsYWciLCJ0bXBPYmoiLCJ1cGRhdGVIYXNoTWFwIiwiY2hlY2tWYWx1ZUluZGV4IiwidXBkYXRlRXhwSGFzaE1hcCIsInVwZGF0ZUNsa0hhc2hNYXAiLCJnZXROb3ciLCJ0aHJvdHRsZSIsImZ1bmMiLCJ3YWl0IiwidGltZW91dCIsInByZXZpb3VzIiwibGF0ZXIiLCJsZWFkaW5nIiwidGhyb3R0bGVkIiwicmVtYWluaW5nIiwiY2xlYXJUaW1lb3V0IiwidHJhaWxpbmciLCJjYW5jZWwiLCJjaGVja0lzSW5IYXNoTWFwIiwiX2hhc2hzIiwiX2xvZ2tleUhhc2hzIiwiciIsInNldFJlY29yZFN1Y2Nlc3MiLCJlbGVtZW50T2JqIiwiYXBsdXNEb21BdHRyS2V5IiwiY2giLCJkZWZfdiIsImNoYXJDb2RlQXQiLCJnZXRNZXRhVmFsdWUiLCJEQVRBX0FQTFVTX1NQTV9BTkNIT1JfSURfS0VZIiwiREFUQV9BUExVU19WVF9JVEVNX0lOREVYX0tFWSIsIkxPT1BfVElNRSIsImdldEF1dG9FeHBWaWV3UmF0ZSIsImRlZmF1bHRfdmFsdWUiLCJyYXRlIiwidmlzaWJsZV9yYXRlIiwiQVVUT19BVF9WSUVXX1JBVEUiLCJnZXRBdXRvRXhwRHVyYXRpb24iLCJkdXJhdGlvbiIsInRtcF9kdXJhdGlvbiIsImR1cmF0aW9uX24iLCJFWFBfRFVSQVRJT04iLCJnZXRBdXRvQ29uZmlnIiwiY29uZmlnS2V5IiwibWV0YU9iaiIsImFwbHVzQXV0b0V4cCIsImNvbmZpZ3MiLCJ0bXBfdGFnX2ZpbHRlciIsInRlbXBzIiwiY3NzU2VsZWN0b3IiLCJ3aG9sZVNlbGVjdG9yIiwiRXJyb3IiLCJ0YWdfZmlsdGVyIiwiZ2V0QXV0b0V4cENvbmZpZyIsImdldEF1dG9FeHBVc2VyRm4iLCJhZUF1dG9Vc2VyRm4iLCJpc1Rocm90dGxlV2F0Y2hEb20iLCJXYXRjaERvbSIsImVhY2hFbGVtZW50cyIsIl9wb3NfaWQiLCJfaW5kZXgiLCJfb2JqIiwiaGFuZGxlcl9kb21fY2hhbmdlIiwidGhyb3R0bGVfaGFuZGxlcl9kb21fY2hhbmdlIiwiaW5pdF9vYnNlcnZlciIsIk1PYnNlcnZlciIsIl9vYnNlcnZlciIsIm9ic2VydmVyX3RpbWVzIiwiY2hpbGRMaXN0IiwiY2hhcmFjdGVyRGF0YSIsInN1YnRyZWUiLCJvYnNlcnZlIiwiaW5pdF93YXRjaF9kb20iLCJfbG9vcF9vYnNlcnZlciIsImN1cnJlbnRfd2luX3N0YXR1cyIsIndhdGNoX3RpbWVzIiwid2F0Y2hfZG9tX3J1bm5pbmciLCJvbkZvY3VzSGFuZGxlciIsIm9uQmx1ckhhbmRsZXIiLCJvblZpc2liaWxpdHlDaGFuZ2UiLCJ2aXNpYmlsaXR5U3RhdGUiLCJhZGRBbGxMaXN0ZW5lciIsIldpbmRWYW5lIiwicmVtb3ZlQWxsTGlzdGVuZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsIk1vek11dGF0aW9uT2JzZXJ2ZXIiLCJfY2xrQ29uZmlnIiwiX2RvY3MiLCJkaXNjb25uZWN0IiwiaW5pdEZuIiwid2F0Y2hFeHBvc3VyZSIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwid2F0Y2hSZWNvcmQiLCJhcGx1c19hdXRvX2V4cF9pbml0IiwiZG9faW5pdF9mbGFnIiwid2F0Y2hfZGF0YV9jaGFuZ2UiLCJ3YXRjaF9leHBvc3VyZV9jaGFuZ2UiLCJpc1Rocm90dGxlV2F0Y2giLCJhdXRvRXhwQ29uZmlnIiwiX3dhdGNoX2RvbV9jZmciLCJfYXBsdXNfYXV0b19leHAiLCJleHBfdGltZXMiLCJ1dGlsRWxlbWVudEFjIiwiaXNSZWNvcmQiLCJjaGVja0lzUmVjb3JkIiwiaXNJbkhhc2hNYXAiLCJfZWxlIiwiZXhwQ29uZmlncyIsIl9hZSIsImlnbm9yZXMiLCJnZXRBdHRyc0NoYXJzTm9kZXMiLCJtdXRhdGlvbiIsImF0dHJpYnV0ZU5hbWUiLCJlYWNoX25vZGVzIiwiX25vZGVOYW1lIiwibm9kZU5hbWUiLCJhdHRyTmFtZSIsIm11dGF0aW9ucyIsImFkZGVkTm9kZXMiLCJfY2ZnIiwicGFyZW50RWxlbWVudCIsInRha2VSZWNvcmRzIiwiX2V4cENvbmZpZyIsInBvc2l0aW9uSXNJbldpbiIsIndpblBvc2l0aW9ucyIsIngiLCJwTGVmdFRvcCIsInBSaWdodEJvdHRvbSIsInkiLCJnZXRWaWV3YWJpbGl0eVJhdGUiLCJlbGVMZWZ0VG9wSXNJbldpbiIsImVsZVJpZ2h0VG9wSXNJbldpbiIsImVsZUxlZnRCb3R0b21Jc0luV2luIiwiZWxlUmlnaHRCb3R0b21Jc0luV2luIiwiZnVsbCIsImhhbGYiLCJwTGVmdEJvdHRvbSIsImFicyIsInBSaWdodFRvcCIsImNvcm5lciIsIndyYXBWaWV3YWJpbGl0eVJhdGUiLCJBQ19SQVRFIiwibiIsIk5hTiIsImdldEVsZW1lbnRQb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJ0b3AiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsImdldFdpblBvc2l0aW9ucyIsInBvc2l0aW9uU2VsZWN0b3IiLCJwb3N0aW9ucyIsInNlbGVjdG9yRWxlIiwiX3BvcyIsImVsZTEiLCJlbGUyIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJvbGRfaGFzaF92YWx1ZSIsImdldFZpZXdhYmlsaXR5UmF0ZUluV2luZG93IiwiZWxlbWVudEFyZWEiLCJmaWx0ZXJTdGFydEV4cG9zdXJlU2l6ZSIsImV4cG9zdXJlVGltZSIsIm1vdmVPclNjcm9sbCIsImVsZV9zIiwiZXZlbnRUeXBlIiwiaXNUYXJnZXQiLCJfZWxlUG9zIiwiYm91bmRpbmdDbGllbnRSZWN0IiwiaW50ZXJzZWN0aW9uUmF0aW8iLCJ2aWV3YWJpbGl0eVJhdGVJbldpbmRvdyIsIkFDX1JBVEVfSU5fV0lORE9XIiwiaXNSZWxhdGVpdmVSYXRpbyIsInZpZXdhYmlsaXR5UmF0ZSIsInZpZXdhYmlsaXR5IiwibGFzdEV2ZW50VHlwZSIsImhhbmRsZXJfZG9tX2V4cG9zdXJlIiwiZW50cnkiLCJpc0ZpcnN0IiwiUFVCX0tFWSIsInV0aWxFeHBvc3VyZSIsImZpbHRlckVuZEV4cG9zdXJlU2l6ZSIsImNyZWF0ZUlPYnNlcnZlciIsImRlZmF1bHRPcHRzIiwicm9vdCIsInJvb3RNYXJnaW4iLCJ0aHJlc2hvbGQiLCJJT2JzZXJ2ZXIiLCJlbnRyaWVzIiwid2F0Y2hJbnRlcnNlY3Rpb25PYnNlcnZlciIsImlvYnNlcnZlck1hcCIsImlvX2Jhc2UiLCJpbk9ic2VydmVyIiwiaW9fdiIsIkFVVE9fQVRfVklFV19SQVRFX0lOX1dJTkRPVyIsImlvIiwiaXNEaXNwbGF5Tm9uZSIsImlzTm9uZSIsInN0eWxlIiwiZGlzcGxheSIsInJlbGF0aXZlU2VsZWN0b3JQb3NpdGlvbnMiLCJpc1ZpZXdhYmlsaXR5UmF0ZSIsInZpZXdhYmlsaXR5SW5XaW5kb3dSYXRlIiwidGhyb3R0bGVfaGFuZGxlcl9leHBvc3VyZSIsInNlbGVjdG9ycyIsIndhdGNoX3Bvc2l0aW9uc2VsZWN0b3JfY2hhbmdlIiwidG1wX3NlbGVjdG9ycyIsInByb2Nlc3NTUE1DRCIsImVsdHlwZSIsInNwbUFyciIsInNwbU9iaiIsIndhdGNoVW5sb2FkUmVjb3JkIiwicmVjb3JkUXVldWUiLCJmaWx0ZXJSZWNvcmRzIiwiaXNBcGx1c0RlYnVnIiwibG9na2V5Q29udGFpbmVyIiwicmVxdWVzdF9jZmciLCJfcmF0ZSIsIl9yYXRlTnVtIiwidG9GaXhlZCIsIl93IiwiX2giLCJfeCIsIl95IiwiX3ZpZXdhYmlsaXR5Iiwic3BtRGF0YSIsImRvX2Nsb25lX2FyciIsImVsZXMiLCJ0bXAyIiwiaGFuZGxlclJlY29yZCIsImNsZWFyX2xpc3QiLCJ2X29yaWdpbiIsInByb2Nlc3NSZWNvcmRRdWV1ZSIsInJlY29yZEFwbHVzQXRGb3JBbGkiLCJfbG9na2V5IiwibG9na2V5X3ZhbHVlcyIsImV4cG91c3VyZVBhcmFtcyIsInJlY29yZEFwbHVzQXRGb3JBbGl5dW4iLCJfaXNfYXV0b19leHAiLCJfZXZlbnRUeXBlIiwiaXNfYXV0byIsImhhbmRsZXJFeHBvc3VyZSIsInV0aWxSZWZlcnJlciIsInJlY29yZFZhbEluV2luZG93TmFtZSIsInJlZmVycmVyX3B2X2lkIiwiaXNfaHR0cHMiLCJOQU1FU1RPUkFHRV9LRVlTIiwiaXNfaW5faWZyYW1lIiwicGFyZW50Iiwic2VsZiIsInBhZ2VfdXJsIiwiaXNfbG9naW5fcGFnZSIsIlRyYWNrZXIiLCJkb190cmFja2VyX2xvc3RwdiIsInBhZ2UiLCJzcG1hYiIsIk1fVCIsInNlbmRCZWFjb24iLCJ0cmFja2VyIiwicmF0aW8iLCJjb2RlIiwic3BtX2EiLCJzcG1fYiIsImMxIiwiYzIiLCJyZWNvcmRMb3N0UHYiLCJwdkNvdW50IiwiX3BhZ2UiLCJob3N0bmFtZSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJERUZBVUxUX09QVFMiLCJnbWtleSIsImNoa3N1bSIsIm11c3RTZW5kIiwicmFuZG9tUmF0aW8iLCJkZWZhdWx0X29wdHMiLCJwaWQiLCJhcGx1c1RyYWNrZXJSYXRlIiwicmVsIiwidWlkIiwiZ2V0Q29va2llQ25hIiwiX3RyYWNrZXJPcHRzIiwic2VuZCIsImNhY2hlIiwibG9ndHlwZSIsIl9hcGx1c19jcGx1Z2luX20iLCJjb25maWdfdHJhY2tlciIsImVycm9yX21lc3NhZ2UiLCJmaWxlbmFtZSIsImMzIiwiZG9fdHJhY2tlcl9icm93c2VyX3N1cHBvcnQiLCJ1YV9pbmZvIiwiZXRhZyIsIk1haW4iLCJtYWluIiwiV1MiLCJDVFgiLCJDVFhfVFlQRSIsImluaXRUaW1lc3RhbXAiLCJsb2dfY2xvdWQiLCJtYWluX2Jhc2VfaHR0cCIsImJvZHlCdWlsZCIsImZldGNoRGF0YSIsImhhbmRsZXJNaWRkbGV3YXJlIiwiY2hhbmdlVG9PYmoiLCJ3aGF0X3RvX3NlbmQiLCJsb2dkYXRhIiwibWF0Y2hWYWx1ZSIsInBvc3REYXRhIiwiX2g1X3NoYXJlX2VuYWJsZSIsIndoZXJlX3RvX3NlbmQiLCJyZXF1ZXN0NHVtIiwic3VjY2VzcyIsImltcHJpbnQiLCJnZXRLZXlJbmRleCIsImV2ZW50X2FyZ3MiLCJITCIsImNoYW5nZVRvQXJyYXkiLCJ0aW1lIiwiZXZlbnRfdGltZXN0YW1wIiwiY2xpZW50IiwiX3Jlc29sdXRpb24iLCJyZXNvbHV0aW9uIiwiTEFORyIsInNka19pbmZvIiwiY3VzdG9tU2RrSWQiLCJwbGF0Zm9ybV90eXBlIiwicGxhdGZvcm1UeXBlIiwiYXBwS2V5IiwiYXBwX2V4dF9pbmZvIiwic2Vzc2lvbl9hcmdzIiwic2Vzc2lvbkFyZ3MiLCJnbG9iYWxfYXJncyIsImdsb2JhbEFyZ3MiLCJldmVudF9jb2RlIiwidHJhY2tlckV2ZW50Q29kZSIsIm1vZGVsIiwiX2Rldl9pZCIsIl91c2VyX25pY2siLCJfdXNlcl9pZCIsIl9hbm9ueV9pZCIsInRpbWVab25lIiwiX3Nlc3Npb25faWQiLCJwcmUiLCJqc3ZlciIsImFwcFZlcnNpb24iLCJicmFuZCIsIm5ldHdvcmtUeXBlIiwiT2JqIiwicGxhdGZvcm0iLCJzZGtfdHlwZSIsImFwcGtleSIsInNka192ZXJzaW9uIiwiZGV2aWNlX3R5cGUiLCJwaXhlbF9yYXRpbyIsImRldmljZVBpeGVsUmF0aW8iLCJhcHBfdmVyc2lvbiIsImxvZ19pZCIsInRyYWNrX3R5cGUiLCJleGRhdGEiLCJ0cmFja19kZWJ1Z19pZCIsInN1YnNjcmliZUxvZ3MiLCJvcmlEYXRhcyIsImdldExvZ2ljU3ltYm9sIiwid2F0Y2hMT0ciLCJnZXRVdG1QYXJhbXNPYmoiLCJ1cCIsInV0bVN0b3JhZ2UiLCJfYnVpbGRTaGFyZUluZm8iLCJzaGFyZUluZm8iLCJzaGFyZWZyb20iLCJmcm9tYXBwa2V5IiwiX3VtX3NzcmMiLCJfdW1fY2hhbm5lbCIsIl91bV9jYW1wYWlnbiIsIl9idWlsZEhKTEpFdmVudCIsImV2ZW50QXJncyIsImdwIiwiYXBsdXNVdGlscyIsInRhcmdldEFwcEtleSIsImF1dG9fZWxlbWVudCIsImV2ZW50X3R5cGVfaWQiLCJhcCIsInBhZ2VfdGl0bGUiLCJ1dGlsUGFnZSIsImdldFBhZ2VUaXRsZSIsInBhZ2VfbmFtZSIsImdldFBhZ2VOYW1lIiwiY2xvbmVQIiwidXRpbHMiLCJyYW5rIiwidXRpbE1vbml0b3IiLCJhbW91bnQiLCJfYnVpbGRQVkV2ZW50IiwicHZhcmdzIiwicmVmX3VybCIsIl91bV9yZWZlcmVyX2RvbWFpbiIsImJ1aWxkSGVhZGVyIiwibWFuZ2xlIiwiYmFzZTY0IiwiZ2xvYmFsZGF0YSIsInV0bU9iaiIsImhlYWRlciIsImFfYW5vbnlfaWQiLCJpZF90cmFja2luZyIsImFub255X2lkIiwiX2FiZnBjIiwiYV9kZXZfaWQiLCJkZXZfaWQiLCJ1dWlkIiwidWQiLCJ1bmlvbmlkIiwiYW5vdXltb3Vzb3BlbmlkIiwiYW5vbnltb3VzaWQiLCJhbGlwYXlfaWQiLCJzd2FuaWQiLCJ1c2VyUHJvZmlsZSIsInVzZXJfaW5mbyIsImltcCIsImlkX3R5cGUiLCJvcGVuaWQiLCJhbmFseXRpY3MiLCJla3ZzIiwic2Vzc2lvbmlkIiwidXNlcklkIiwiYWN0aXZlX3VzZXIiLCJwdWlkIiwicHJvdmlkZXIiLCJ0cyIsInRyYWNlSWQiLCJfc3RhcnRJZCIsInN0YXJ0X2lkIiwibWFuZ2xlRGF0YSIsInJlcXVlc3REYXRhIiwiX21hbmdsZUhlYWRlciIsIl9tYW5nbGVPYmoiLCJpZE1hcCIsIl9tYW5nbGVBbmFseXRpY3MiLCJwcm9wIiwiYW5hbHl0aWNzTWFwIiwiaGVhZGVyTWFwIiwidGVzdFRva2VuIiwiX2lkIiwiZGV2aWNlX2lkIiwidXNlcmlkIiwiYjY0Y2hhcnMiLCJiNjR0YWIiLCJiaW4iLCJjaGFyQXQiLCJmcm9tQ2hhckNvZGUiLCJjYl91dG9iIiwiY2MiLCJyZV91dG9iIiwidXRvYiIsInUiLCJjYl9lbmNvZGUiLCJjY2MiLCJwYWRsZW4iLCJvcmQiLCJjaGFycyIsImJ0b2EiLCJfZW5jb2RlIiwidXJpc2FmZSIsIm0wIiwicmVfYnRvdSIsImNiX2J0b3UiLCJjY2NjIiwiY3AiLCJvZmZzZXQiLCJidG91IiwiY2JfZGVjb2RlIiwiYXRvYiIsIl9kZWNvZGUiLCJwcm9wc1R5cGUiLCJla3ZSYW5rIiwiZWt2U2V0IiwicG5hbWUiLCJQYWdlTWFuYWdlciIsImdldFBhZ2VDb2RlIiwibWV0YVBhZ2VOYW1lIiwiZHluYW1pY1BhZ2VGdW5jIiwiaGFuZGxlVVJMIiwiaXNTdHJpbmciLCJmaXJzdCIsImRlZmF1bHRVcmwiLCJzZWNvbmQiLCJkYXNoUG9zIiwiaGFzaFRhZ1BvcyIsInBhdGhQb3MiLCJsb2NhdGlvblBhdGgiLCJwYXRoUGFyYW1JbmRleCIsImJ1aWxkUGF0aCIsInF1ZXJ5IiwicXMiLCJxc3MiLCJjdXJyZW50UGF0aCIsInBhZ2VPcHRpb25NYXAiLCJnZXRDdXJyZW50UGFnZVBhdGgiLCJzZXRDdXJyZW50UGF0aCIsImdldFBhZ2VRdWVyeSIsInNldFBhZ2VRdWVyeSIsImdldEZ1bGxQYXRoIiwicmVhbFBhdGgiLCJoYXNoTW9kZSIsInJlZ1J1bGUiLCJnZXRXeFRpdGxlIiwibWluaSIsInBsYXRUeXBlIiwiZ2V0UGxhdGZvcm1UeXBlIiwiX193eENvbmZpZyIsInd4Q29uZmlnIiwicm91dGUiLCJnbG9iYWwiLCJuYXZpZ2F0aW9uQmFyVGl0bGVUZXh0IiwiX193eEFwcENvZGVfXyIsImFwcEpTT04iLCJjdHgiLCJnbG9iYWxUaXRsZU1hcCIsInBhZ2VOYW1lIiwicGFnZVRpdGxlIiwiZ2V0VlRSZWFsdGltZUNvZGUiLCJyZWdFeHAiLCJzY2VuZSIsImluaXRJc1RCIiwiX2lzVGIiLCJzd3VzZXJBZ2VudCIsImNhbklVc2UiLCJpc1RCIiwidXRpbCIsImdldEN1cnJlbnRQYWdlIiwicGFnZXMiLCJnZXRDdXJyZW50UGFnZXMiLCJnZXRSZWZlcnJlclBhZ2UiLCJyZXNldElzVEIiLCJkZCIsInNka1R5cGUiLCJsb2dEb21haW4iLCJteSIsInRiIiwidHQiLCJzd2FuIiwid3giLCJnZXRTZGtUeXBlIiwiZ2V0TG9nRG9tYWluIiwiSFRUUF9SRVFVRVNUIiwiUkVRVUVTVCIsInJlcXVlc3QiLCJzdWNjZXNzQ2FsbGJhY2siLCJmYWlsdXJlQ2FsbGJhY2siLCJtZXRob2ROYW1lIiwicmVxdWVzdE1ldGhvZE5hbWUiLCJyZXEiLCJjYWxsYmFja2VkIiwiZGF0YVR5cGUiLCJjdXN0b21SZXF1ZXN0VGltZW91dCIsInJlcU9wdGlvbnMiLCJmYWlsIiwiZmFpbHVyZSIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJfZXh0SW5mbyIsInNldFN0b3JhZ2VTeW5jIiwicHQiLCJnZXRTdG9yYWdlU3luYyIsImJhc2UiLCJmZXRjaCIsInJlc29sdmUiLCJyZWplY3QiLCJwZW5kaW5nIiwidGhlbiIsInJlc3BvbnNlIiwidGV4dCIsImNhdGNoIiwiYWpheCIsInhociIsInJlc3BvbnNlVGV4dCIsIkNPUlMiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJYRG9tYWluUmVxdWVzdCIsIm9udGltZW91dCIsIm9wdCIsImNvbnRlbnRUeXBlIiwidG9VcHBlckNhc2UiLCJnZXREYXRhIiwic2V0UmVxdWVzdEhlYWRlciIsIndpdGhDcmVkZW50aWFscyIsImV4Iiwic3RhdXMiLCJnZXRMb2dDb25maWciLCJsb2dDb25maWciLCJwYWdlTG9hZFRpbWUiLCJQQUdFX0xPQURfVElNRSIsImNvb2tpZSIsInV0aWxSZW1vdGVDZmciLCJBQkZQQyIsIlZFUlNJT04iLCJJTVBSSU5UX1ZFUlNJT04iLCJ0cnlHZXRTdG9yZVZhbHVlIiwibHNWYWx1ZSIsImNvb2tpZVZhbHVlIiwiZ2V0Q29va2llIiwic3luY1JjZmciLCJkb21haW4iLCJfZm4iLCJhayIsInNldEltcHJpbnRWZXJzaW9uIiwiZ2V0Rm9ybWF0RGF0ZSIsInN5bmNSZW1vdGVDZmdEYXRhIiwibHNSZW1vdGVDZmciLCJlbmFibGVDZmciLCJJbXByaW50IiwiYWJmcGNPYmoiLCJpbXBWZXJzaW9uIiwiY29va2llX3ZhbCIsImdldEV4cGlyZXNUaW1lIiwiZGF0ZVN0ciIsImV4cGlyZXMiLCJ0b1VUQ1N0cmluZyIsInNldFRpbWUiLCJ5ZWFycyIsInRyeVNldENvb2tpZSIsImNocm9tZVZlcnNpb24iLCJjaHJvbWVJbmZvcyIsIlNhbWVTaXRlIiwic2V0Q29va2llIiwiZG9tYWlucyIsInRsZCIsImdldERvbWFpbnMiLCJjbmF1aSIsImdldEhuZyIsInNldENvb2tpZUNuYSIsInRvcHMiLCJmdWxsX2RvbWFpbiIsInplcm9GaWxsIiwibnVtYmVyIiwidGFyZ2V0TGVuZ3RoIiwiZm9yY2VTaWduIiwiYWJzTnVtYmVyIiwiemVyb3NUb0ZpbGwiLCJzaWduIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRMb2NhbFN0YXR1cyIsImxzY2ZnIiwiZ2V0U3luYyIsInNldEF1dG9FdmVudFN0YXR1cyIsInNldERldmljZVN0YXR1cyIsImVuYWJsZSIsInNldEF1dG9QYWdlU3RhdHVzIiwic2V0QXV0b1RyYWNrU3RhdHVzIiwiZ2V0QXV0b0V2ZW50U3RhdHVzIiwiZ2V0RGV2aWNlU3RhdHVzIiwiZ2V0QXV0b1BhZ2VTdGF0dXMiLCJnZXRBdXRvVHJhY2tTdGF0dXMiLCJjb2RlbGVzc0NsaWNrRXZlbnRTdGF0dXMiLCJjb2RlbGVzc0NvbGxlY3RvclBhZ2VTdGF0dXMiLCJjb2RlbGVzc1N0YXR1cyIsImN1cnJlbnREZXZpY2VFbmFibGUiLCJldmVudFNhbXBsaW5nUmF0ZSIsImNvZGVsZXNzSWdub3JlQ29tcG9uZW50IiwiQ2FjaGUiLCJsb2FkIiwiX2RhdGEiLCJyZW1vdmVTdG9yYWdlIiwiX25hbWUiLCJnZXRTdG9yYWdlIiwiX2xvYWRlZCIsInNldFN0b3JhZ2UiLCJnZXRBbGwiLCJoYXMiLCJpc0xvYWRlZCIsInNldFN5bmMiLCJnZXRBcGx1c1dhaXRpbmciLCJ3aGVuX3RvX3NlbmRwdiIsImlzV2FpdCIsInV0aWxVQSIsIlBPU1QiLCJHRVQiLCJnZXRBcGx1c01ldGFCeUtleSIsImdldFJob3N0IiwiZ2V0SGpsakhvc3RVcmwiLCJyaG9zdCIsImVuZGZpeCIsImdldFB2SG9zdFVybCIsImdpZiIsImdldENoYW5uZWwiLCJhcGx1c0NoYW5uZWwiLCJjaGFubmVscyIsImlzX3NpbmdsZSIsInJlY29yZFR5cGUiLCJpc0FsaUFwcCIsImlzSU9TIiwiaXNBbmRyb2lkIiwiaXNXaW5kb3dzUGhvbmUiLCJpc0JsYWNrQmVycnkiLCJpc09wZXJhTW9iaWxlIiwibG9nSWQiLCJ1dGlsUGFyYW1zIiwidXJsUGFyYW1zIiwiZ2V0Q29tbW9uUGFyYW1zIiwidXNlckluZm8iLCJfcGFnZV90aXRsZSIsInBhZ2VVcmwiLCJnZXRMb2dJZCIsImNvbW1vblBhcmFtcyIsImdldFRpbWVab25lIiwidXRtcyIsImdldFB2UGFyYW1zIiwibWFuc25kbG9nIiwiZ2V0SGpsalBhcmFtcyIsImhqbGpQYXJhbXMiLCJnZXRDaGFycyIsImRlZmF1bHRWYWwiLCJnZXRSYW5kb21JZCIsImhhbmRsZVBWSWQiLCJjaGFyUG9zIiwiY2hhcnNXaXRob3V0RyIsImNoYXJzV2l0aG91dEwiLCJybmRfc3RycyIsImhhbmRsZWQiLCJsb2dOYW1lIiwicmFuZG9tOENoYXJzIiwicmFuZG9tNENoYXJzIiwicmFuZG9tNkNoYXJzIiwiX3RpbWVab25lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJfYW5kIiwiem9uZSIsInJlbWFpbmRlciIsInJlbWFpbmRlclpvbmUiLCJnZXRVc2VyZGF0YSIsImNvbWJvVXNlcmRhdGEiLCJwcm9jZXNzTG9kYXNoRG9sbGFyIiwidXBkYXRlUHJlIiwidXRpbEV4aW5mbyIsImdldEV4UGFyYW1zT2JqIiwiZ2V0RXhQYXJhbXNJbmZvIiwiZ2V0RXhQYXJhbXMiLCJleHBhcmFtcyIsIm1lcmdlRXhwYXJhbXMiLCJiZWFjb25FeHBhcmFtcyIsIm1ldGFFeHBhcmFtcyIsImJleHBhcmFtcyIsImRlZmF1bHRFeHBhcmFtcyIsImJsYWNrcyIsInRtcFBhcmFtIiwiYmVhY29uT2JqIiwiZ2V0RXhQYXJhbXNGcm9tTWV0YSIsImJfZXhwYXJhbXMiLCJnZXRFeHBhcmFtc0luZm9zIiwiZXhwYXJhbXNfa2V5X25hbWVzIiwibWV0YV9leGluZm8iLCJ0bXBfaW5mbyIsInRtcF9hcnIiLCJjb25mIiwidG1wX29iaiIsInVpZGFwbHVzIiwicGNfaSIsInB1X2kiLCJjbGVhblBhcmFtcyIsIm5ld19wYXJhbXMiLCJjbGVhblBhcmFtc0ZvclRvVVQiLCJleGNsdWRlUGFybXMiLCJzcG0tY250IiwiZXhwYXJhbXNBcnIiLCJlSXRlbSIsImtleUlzQXZhaWxhYmxlIiwidmFsSXNBdmFpbGFibGUiLCJ1cFV0RGF0YSIsImdldFRvVXREYXRhIiwicGFnZXVybCIsInBnMXN0ZXBrIiwicG9pbnQiLCJmdW5jdHlwZSIsImZ1bmNJZCIsIl9pc2g1IiwiX2g1dXJsIiwiX3RvVVQiLCJfYnJpZGdlTmFtZSIsIl9icmlkZ2VWZXJzaW9uIiwic3BtX2NudCIsInNwbV91cmwiLCJzcG1fcHJlIiwicHZlciIsInV0cGFyYW1DbnQiLCJfaXNfZzJ1XyIsIl9zbG9nIiwiZ2V0VG9OYXRpdmVEYXRhIiwic2RrQXJncyIsImN1c3RvbUFyZ3MiLCJpc19oNSIsInBhZ2Vfc3RhcnQiLCJwdmRhdGFUb1VtTmF0aXZlIiwidXRpbEV2ZW50TGltaXQiLCJjYW5fdG9fc2VuZHB2IiwiY2FuU2VuZFBWIiwibmVlZExpbWl0U2VuZCIsImV2ZW50TGltaXRSYXRlcyIsImNlaWwiLCJ1dGlsTG9jYWxDZmciLCJjYW5Ub1NlbmRISkxKIiwiZGV2aWNlU3RhdHVzIiwicmVtb3RlQXV0b3RyYWNrU3RhdHVzIiwiYXV0b2V2ZW50U3RhdHVzIiwibG9jYWxBdXRvdHJhY2tFbmFibGVkIiwiYXV0b3B2U3RhdHVzIiwibG9jYWxBdXRvUHZEaXNhYmxlZCIsImxvY2FsQXV0b1BWRGlzYWJsZWQiLCJsb2NhbEF1dG9FdmVudERpc2FibGVkIiwiX3NwbWFiIiwiX2NvdW50IiwicHViT2JqIiwic3BtYWJfcHJlIiwiZ2V0VXNlckRhdGEiLCJhcGx1c0V4aW5mbyIsImdva2V5QXJyIiwiZ29rZXlTdHIiLCJfdG1wVmFsdWUiLCJhdXRvc2VuZCIsInRlbXBDdXNwIiwiaGpsamRhdGFUb1VtTmF0aXZlIiwid2F0Y2hTUE0iLCJpc1RvdWNoRW5hYmxlZCIsImZpbmRBbmNob3JFbGVtZW50IiwidGFnX25hbWUiLCJmaW5kQXBsdXNBbmNob3JCeUFsaW5rRWwiLCJhbGlua0VsIiwiaXNQYWdlIiwiZ2V0QXBsdXNDbGtDb25maWciLCJhcGx1c0F1dG9DbGtDb25maWciLCJzcG1fdXBkYXRlSHJlZldpdGhTUE1JZCIsInNwbV9pZCIsImZpbGVfZXh0Iiwic3BtX3ByZWZpeCIsInBuZyIsImpwZyIsImpwZWciLCJibXAiLCJzd2YiLCJodG0iLCJodG1sIiwicGhwIiwiYXNweCIsInNodG1sIiwieGh0bWwiLCJhcGx1c1RyYWNrZXIiLCJhcGx1c0FuY2hvciIsImFsaW5rcyIsImN1cnJlbnRQYWdlIiwiY3VycmVudFBhZ2VDb25maWciLCJteWluZGV4IiwiYWxpbmsiLCJyZWFsX3Bvc19pZCIsIl9jdXJyZW50X3NwbSIsIl9zcmNfcG9zX2lkIiwiZG9UcmFjZSIsImluaXRQYWdlU3BtIiwic291cmNlX3Bvc19pZCIsIndhdGNoUGFnZUNvbmZpZyIsIndhdGNoQXBsdXNBdXRvQ2xrIiwiYXBsdXNBbmNob3JJZCIsIl9hcGx1c19hcGkiLCJhcGx1c09iaiIsIm1ha2VQVklkIiwibXNnQXJyIiwiZ2V0TW1zdGF0VGltZW91dCIsImxvbmd0aW1lIiwidGltZUludCIsImdldFJhbmRvbUludCIsInNwbWEiLCJzcG1iIiwibG9na2V5T2JqIiwic3BtYU9iaiIsInJhbmRvbUludCIsIlJlZHVjZXIiLCJ1dGlsU3BtIiwiZm5fYmVmb3JlX3B2IiwiZm5fYWZ0ZXJfcHYiLCJmbl9iZWZvcmVfcmVjb3JkIiwiZm5fYWZ0ZXJfcmVjb3JkIiwiRU1QVFlfRk4iLCJiZWZvcmVTZW5kUFYiLCJhZnRlclNlbmRQViIsImxhdW5jaCIsImRhdGFTdHIiLCJwcm90b2NhbCIsInNlbmRJbWciLCJzZW5kUFYiLCJza2lwUnVsZXMiLCJyZWR1Y2VyIiwicHVic3ViVHlwZSIsIm1lc3NhZ2VGblF1ZXVlIiwibWlkZGxld2FyZU1lc3NhZ2VLZXkiLCJwYWdlRW50ZXIiLCJzaWQiLCJ3diIsImJlZm9yZVJlY29yZCIsImFmdGVyUmVjb3JkIiwicmVjb3JkVWRhdGEiLCJzZXRQYWdlU1BNIiwic3BtRmxhZyIsIm9sZF9zcG1hYiIsInNwbUFQSSIsInNwYUluaXQiLCJfc3BtYWJfcHJlIiwicmVzZXRNZXRhQW5kQm9keSIsInJlc2V0TW9kdWxlcyIsImdldFBhZ2VTUE0iLCJ1cGRhdGVQYWdlUHJvcGVydGllcyIsInVwZGF0ZU5leHRQYWdlUHJvcGVydGllcyIsInBhZ2VBcHBlYXIiLCJwYWdlRGlzYXBwZWFyIiwidXBkYXRlUGFnZVV0cGFyYW0iLCJ1cGRhdGVOZXh0UGFnZVV0cGFyYW0iLCJ1cGRhdGVTZXNzaW9uUHJvcGVydGllcyIsInNldFBhZ2VOYW1lIiwiZ2V0RWxlbWVudFNQTSIsInJlY29yZEFwcExpbmsiLCJDb21wb3NlIiwicGx1Z2luc0xvYWRlciIsIkNPTkZJRyIsInBsIiwibWlkZGxld2FyZSIsImFwcCIsImNvbXBvc2UiLCJjYWxsZWRMaXN0Iiwic2V0Q2FsbGVkTGlzdCIsInJlc2V0Q2FsbGVkTGlzdCIsIm13IiwibWF4VGltZW91dCIsInNsZWVwSGFuZGVyMSIsIl90aW1lX291dCIsIl9td19uYW1lIiwicGx1Z2luc19uYW1lIiwicHVic3ViSW5mbyIsInBsdWdpbiIsImdldFNQTUFNZXRhRWxlbWVudCIsIm1ldGFzIiwiY3JlYXRlU1BNTWV0YSIsImhlYWQiLCJmaXJzdENoaWxkIiwiZWxfbWV0YV9kYXRhX3NwbSIsImVsX21ldGFfc3BtX2lkIiwiZWxfbWV0YSIsImVscyIsInNlbmRJbWdDb3JlIiwic3VjY2Vzc0NhbGxCYWNrIiwiZXJyb3JDYWxsQmFjayIsImltZyIsIkltYWdlIiwicm5kX2lkIiwicmVtb3ZlUm5kSWQiLCJ1dGlsTmV0d29yayIsInRvRHluYW1pY3NOZXR3b3JrIiwiZ2V0SG9zdCIsInN0YXRpY0hvc3RzIiwiZ2V0TmV0d29ya1N3aXRjaCIsImNoYW5nZSIsIm1heENvdW50IiwiZGlyZWN0U3dpdGNoIiwiY3VyU3dpdGNoIiwibGV2ZXIiLCJpc0Rpc2FibGVQdmlkIiwiZGlzYWJsZVB2aWQiLCJtZXRhX3ZhbHVlIiwiZ2V0UHZJZCIsInByZV9wdmlkIiwidXRpbEFzc2lnbiIsIkNhbnZhcyIsIkNOQSIsImdsIiwiY2FudmFzIiwid3JpdGVDb29raWUiLCJ0cnlTeW5jRnAiLCJzeW5jTFMyQ29va2llIiwiTFNWYWx1ZSIsImhhc1VzYWJsZVNXRiIsIkFjdGl2ZVhPYmplY3QiLCJnZXRDYW52YXMiLCJnZXRXZWJHbCIsIldlYkdMUmVuZGVyaW5nQ29udGV4dCIsImluaXRVaW50OEFycmF5SGFzaENvZGUyIiwiVWludDhBcnJheSIsImhhc2hDb2RlMiIsImNociIsImdldFdlYkdsUHJpbnRpbmciLCJteUdsIiwidmVuIiwicmVuIiwiZGVidWdJbmZvIiwiZ2V0RXh0ZW5zaW9uIiwiZ2V0UGFyYW1ldGVyIiwiVU5NQVNLRURfVkVORE9SX1dFQkdMIiwiVU5NQVNLRURfUkVOREVSRVJfV0VCR0wiLCJnZXRSZXNvbHV0aW9uIiwiem9vbV9sZXZlbCIsImZpeGVkX3dpZHRoIiwiZml4ZWRfaGVpZ2h0IiwiY29sb3JEZXB0aCIsImdlbmVyYXRlV2ViR2xQcmludCIsInZTaGFkZXJUZW1wbGF0ZSIsImZTaGFkZXJUZW1wbGF0ZSIsInZlcnRleFBvc0J1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJ2ZXJ0aWNlcyIsIkZsb2F0MzJBcnJheSIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsIml0ZW1TaXplIiwibnVtSXRlbXMiLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsInZzaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwic2hhZGVyU291cmNlIiwiY29tcGlsZVNoYWRlciIsImZzaGFkZXIiLCJGUkFHTUVOVF9TSEFERVIiLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsInVzZVByb2dyYW0iLCJ2ZXJ0ZXhQb3NBdHRyaWIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsIm9mZnNldFVuaWZvcm0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInZlcnRleFBvc0FycmF5IiwidmVydGV4QXR0cmliUG9pbnRlciIsIkZMT0FUIiwidW5pZm9ybTJmIiwiZHJhd0FycmF5cyIsIlRSSUFOR0xFX1NUUklQIiwidG9EYXRhVVJMIiwiYXVkaW9GaW5nZXJQcmludGluZyIsImF1ZGlvQ3R4IiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwiZGVzdGluYXRpb24iLCJtYXhDaGFubmVsQ291bnQiLCJudW1iZXJPZklucHV0cyIsIm51bWJlck9mT3V0cHV0cyIsImNoYW5uZWxDb3VudCIsImNoYW5uZWxDb3VudE1vZGUiLCJjaGFubmVsSW50ZXJwcmV0YXRpb24iLCJnZXRQbHVnaW5zUHJpbnRpbmciLCJwbGdzIiwicGxnc19sZW4iLCJjaGVja0lzVG91Y2giLCJnZW5lcmF0ZUZwIiwid2ViZ2xQcmludGluZyIsImNvb2tpZURhdGEiLCJjYW52YXNfdGVzdCIsImdldENhbnZhc0hhc2giLCJXZWJHTCIsIndlYmdsUHJpbnQiLCJhZEJsb2NrIiwiYXVkaW8iLCJjb29raWVFbmFibGVkIiwiY3B1X2NvcmVzIiwiaGFyZHdhcmVDb25jdXJyZW5jeSIsImZvbnRsaXN0IiwiZ3B1IiwiaW5jIiwiaXNTdXBwb3J0TFMiLCJ0aW1lem9uZSIsImxhbmciLCJ0cmFja25pY2siLCJjYWxjU0hBMSIsInN5bmNDTkEiLCJ1cGRhdGVHbG9iYWxEYXRhIiwiY25hT2JqIiwiX2NuYSIsImhleCIsIm51bSIsImhleF9jaHIiLCJzdHIyYmxrc19TSEExIiwibmJsayIsImJsa3MiLCJhZGQiLCJsc3ciLCJtc3ciLCJyb2wiLCJjbnQiLCJmdCIsImt0Iiwib2xkYSIsIm9sZGIiLCJvbGRjIiwib2xkZCIsIm9sZGUiLCJCYXNlNjRFbmNvZGVVcmxTYWZlIiwiQ2FudmFzVGVzdCIsImNhbnZhc0RhdGEiLCJjYW52YXNDb250ZXh0IiwidGV4dEJhc2VsaW5lIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJmb250IiwiZmlsbFRleHQiLCJjdnNfdGVzdCIsIl9zaGExIiwicXVlIiwiZ2V0Rm9ybWF0UXVldWUiLCJxdWV1ZSIsInByb2Nlc3NHb2xkbG9nUXVldWUiLCJmb3JtYXRRdWV1ZSIsImdldEFwbHVzSG9sZFR5cGUiLCJ1YWlkIiwiZmlsdGVyVGFzayIsInRhc2siLCJob2xkVHlwZSIsIlNUQVJUIiwiQVBMVVNfSE9MRF9RVUVVRSIsInByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlIiwiQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUiLCJBUExVU19IT0xEX0FOT05ZX1FVRVVFIiwiZ2V0TWV0aG9kTmFtZSIsImlzT3BlbkFwaSIsIlFVRVVFIiwiZGVsYXlUYXNrcyIsInByb2Nlc3NUYXNrIiwic3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlIiwicXVldWVOYW1lIiwicXVldWVNYXAiLCJzdWJzY3JpYmVNd0NoYW5nZVF1ZXVlIiwic3Vic2NyaWJlTWV0YVF1ZXVlIiwic3Vic2NyaWJlUXVldWUiLCJtZXRhUXVldWUiLCJvdGhlcnNRdWV1ZSIsImFjIiwiaW5pdEpTQnJpZGdlIiwiUHJvbWlzZSIsImlzV2luIiwic2lkQmFzZSIsImlmcmFtZVBvb2wiLCJpZnJhbWVMaW1pdCIsIklGUkFNRV9QUkVGSVgiLCJQQVJBTV9QUkVGSVgiLCJDQUxMX0dDX1RJTUUiLCJQQVJBTV9HQ19USU1FIiwiSlNCcmlkZ2VfQ29yZSIsInRyYWNlIiwic3VjY2Vzc0NhbGwiLCJmYWlsQ2FsbCIsInByb21pc2UiLCJKU0JyaWRnZV9Qcml2YXRlIiwiZ2V0U2lkIiwiY2FsbEluZm8iLCJvbkZhaWx1cmUiLCJyZWdpc3RlckNhbGwiLCJyZWdpc3RlckdDIiwiZXZva2VOYXRpdmUiLCJldmVudG5hbWUiLCJldmVudGRhdGEiLCJldiIsInBhcnNlRGF0YSIsInJlcUlkIiwia2VlcEFsaXZlIiwidW5yZWdpc3RlckNhbGwiLCJvblN1Y2Nlc3MiLCJvbkNvbXBsZXRlIiwiY2FsbHMiLCJidWlsZFBhcmFtIiwic2V0UGFyYW0iLCJyc3QiLCJvcmlnaW5WYWx1ZSIsInVzZUlmcmFtZSIsImlmcmFtZWlkIiwiaWZyYW1lIiwiY3NzVGV4dCIsInJldHJpZXZlSWZyYW1lIiwiY21kIiwiY2xhc3NOYW1lIiwiVW1lbmc0QXBsdXNGbHV0dGVyIiwid2Via2l0IiwibWVzc2FnZUhhbmRsZXJzIiwiVW1lbmc0QXBsdXMiLCJDQUxMIiwidGhhdCIsImNhbGxHQ1RpbWUiLCJwYXJhbUdDVGltZSIsImlzSnNCcmlkZ2VSZWFkeSIsImNhbGxVVCIsImJyaWRnZVZlcnNpb24iLCJBdG1CcmlkZ2UiLCJjYWxsTWVyZ2VUb05hdGl2ZUdQIiwiUXVldWUiLCJwcm9jZXNzQXBsdXNRdWV1ZSIsInN0YXJ0TGVuZ3RoIiwiYWRkU3R5bGUiLCJzdHlsZVVybCIsInN0eWxlSWQiLCJzdHlsZU5vZGUiLCJtYXRjaGVkSW5MUyIsIl9hcGx1c192dF9jZmciLCJsb2dQViIsInBhZ2VDb25maWciLCJoYXNoVmFsIiwic2tpcE1lIiwic2VuZFBWSW5Jbml0IiwiX2FwbHVzX2FwdiIsIm90aGVyVGFncyIsImF1dG9FbGVtTWV0YSIsImNvbGxlY3RfdGFncyIsInV0aWxPYmplY3QiLCJpc09iamVjdCIsInJlbW90ZUlnbm9yZVRhZ3MiLCJnZXRUYXJnZXRFbGVtZW50IiwiY2hpbGRyZW4iLCJvVGFncyIsImlnbm9yZVRhZ3MiLCJkb21VdGlscyIsIm1hcFByZXZOb2RlIiwiZ2V0UHJldiIsInNlbmRFdmVudCIsInVzZXJFdmVudENvZGUiLCJla3ZfaGFzaF9jb2RlIiwiZWxlbWVudF9zZWxlY3RvciIsImdldEVsZW1lbnREYXRhQXR0cmlidXRlcyIsImhhc0F0dHJpYnV0ZXMiLCJyS2V5IiwiZ2V0RWxlbWVudEluZm8iLCJlbGVtZW50X3R5cGUiLCJlbGVtZW50X25hbWUiLCJlbGVtZW50X2lkIiwiZWxlbWVudF9jbGFzc19uYW1lIiwiZWxlbWVudF9jb250ZW50IiwiZ2V0RWxlbWVudENvbnRlbnQiLCJnZXREb21TZWxlY3RvciIsImVsZW1lbnRfcGF0aCIsImdldEVsZW1lbnRQYXRoIiwiZXZlbnRIYW5kbGVyIiwidGFyZ2V0Q2FuUmVjb3JkIiwiZXZlbnRVdGlscyIsImFkZEhhbmRsZXIiLCJjbGlja0V2ZW50IiwicmVtb3ZlSGFuZGxlciIsIl9hdXRvdHJhY2tlZF9lbmFibGUiLCJnZXROYW1lIiwiYXR0cmlidXRlIiwiY2hlY2tUYXJnZXRJZCIsInNpYmxpbmdzIiwibmV4dFNpYmxpbmciLCJzaWJsaW5nIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImdldFNhbWVUeXBlU2libGluZ3MiLCJ0YWduYW1lIiwiZ2V0TmV4dCIsImdldENsb3Nlc3RMaSIsImdldERvbUluZGV4Iiwic2VsZWN0b3IiLCJzcGVjaWZpZWQiLCJ0ZXh0Q29udGVudCIsImlubmVyVGV4dCIsImF1dG9fdHJhY2tfbWV0YSIsImNvbGxlY3RfaW5wdXQiLCJlbGVtZW50X2NhcHR1cmVfZW5hYmxlIiwiX2FwbHVzX3BsdWdpbl94d2oiLCJpbml0SGVhdE1hcCIsImdldEV4cGFyYW1zIiwiZXhwYXJhbXNBcnJheSIsImV4cGFyYW1zTWFwIiwiZXhwYXJhbSIsImdldE1ldGFDb250ZW50QnlOYW1lIiwiZ2V0TWV0YUFob3QiLCJnZXRNZXRhSGVhdG1hcEVuYWJsZWQiLCJnZXRNZXRhQWhvdFJlcyIsImdldE1ldGFNaWNyb3Njb3BlIiwidmVyc2lvbiIsInBlcmZvcm1hbmNlIiwibW96UGVyZm9ybWFuY2UiLCJtc1BlcmZvcm1hbmNlIiwid2Via2l0UGVyZm9ybWFuY2UiLCJfbmEiLCJsb2MiLCJuYXYiLCJpc19haG90IiwiaXNfaGVhdG1hcF9lbmFibGUiLCJyYXRlX2Fob3RfcmVzIiwibWljcm9zY29wZV9kYXRhIiwiYXBsdXNfbm9kZSIsImRlZmF1bHRfY29uZmlnIiwibGF5b3V0Iiwic2hvdWxkQmluZE1vbml0b3IiLCJSQVRFIiwiUkVTT1VSQ0VfVElNSU5HIiwiaXNEcHAiLCJibGFja19saXN0IiwiZ2V0UG9zaXRpb24iLCJkb2Nfd2lkdGgiLCJzY3JvbGxXaWR0aCIsInNjcm9sbF90b3AiLCJzY3JvbGxUb3AiLCJzY3JvbGxfbGVmdCIsInNjcm9sbExlZnQiLCJwYWdlWCIsInBhZ2VZIiwiZXkiLCJkb2Nfd2lkdGhfMiIsInN3IiwibnVtYmVyaWZ5Iiwic2V0VHJpZGVudFZlcnNpb24iLCJjb3JlIiwiZ2V0SUVWZXJzaW9uIiwiZGVhbERlZmF1bHQiLCJnZXREZXNjcmlwdG9yRnJvbVVzZXJBZ2VudCIsImdldE9TSW5mbyIsIl9taW1lIiwid2hlcmUiLCJuYW1lUmVnIiwibWltZVR5cGVzIiwiaWVWZXJzaW9uIiwiZW5kIiwiZXh0cmFfbmFtZSIsImV4dHJhX3ZlcnNpb24iLCJleHRlcm5hbCIsIkVNUFRZIiwic2hlbGwiLCJJRV9ERVRFQ1RfUkFOR0UiLCJWRVJTSU9OX1BMQUNFSE9MREVSIiwiSUVfREVURUNUX1RQTCIsImRpdiIsInRyaWRlbnQiLCJnZWNrbyIsInByZXN0byIsImNocm9tZSIsInNhZmFyaSIsImZpcmVmb3giLCJpZSIsImllTW9kZSIsIm9wZXJhIiwibW9iaWxlIiwicGhhbnRvbWpzIiwiaXBhZCIsImlwaG9uZSIsImlwb2QiLCJpb3MiLCJhbmRyb2lkIiwibm9kZWpzIiwiZXh0cmFOYW1lIiwiZXh0cmFWZXJzaW9uIiwiaW5uZXJIVE1MIiwiX3N0eWxlIiwiX3Y4bG9jYWxlIiwiZG9jdW1lbnRNb2RlIiwiY29tcGF0TW9kZSIsImxvY19wcm90b2NvbCIsInN0YXJ0IiwiblRpbWVzIiwiRW5naW5lIiwic3RhcnR1cCIsImJpbmRNb25pdG9yIiwiY29sbGVjdFBlcmZvcm1hbmNlVGltaW5nIiwidGltaW5nIiwibWFwcGluZ0tleSIsIm1hcHBpbmciLCJuYXZpZ2F0aW9uU3RhcnQiLCJ1bmxvYWRFdmVudFN0YXJ0IiwidW5sb2FkRXZlbnRFbmQiLCJyZWRpcmVjdFN0YXJ0IiwicmVkaXJlY3RFbmQiLCJmZXRjaFN0YXJ0IiwiZG9tYWluTG9va3VwU3RhcnQiLCJkb21haW5Mb29rdXBFbmQiLCJjb25uZWN0U3RhcnQiLCJjb25uZWN0RW5kIiwic2VjdXJlQ29ubmVjdGlvblN0YXJ0IiwicmVxdWVzdFN0YXJ0IiwicmVzcG9uc2VTdGFydCIsInJlc3BvbnNlRW5kIiwiZG9tTG9hZGluZyIsImRvbUludGVyYWN0aXZlIiwiZG9tQ29udGVudExvYWRlZEV2ZW50U3RhcnQiLCJkb21Db250ZW50TG9hZGVkRXZlbnRFbmQiLCJkb21Db21wbGV0ZSIsImxvYWRFdmVudFN0YXJ0IiwibG9hZEV2ZW50RW5kIiwibnMiLCJmcCIsImNocm9tZV9mcCIsIm1zRmlyc3RQYWludCIsImxvYWRUaW1lcyIsImZpcnN0UGFpbnRUaW1lIiwiY29sbGVjdFJlc291cmNlVGltaW5nIiwiZ2V0RW50cmllc0J5VHlwZSIsInJlc1RpbWluZ09ianMiLCJyZXNvdXJjZXMiLCJmb3JtYXRNaWxsU2Vjb25kIiwibWlsbHNlY29uZHMiLCJyZXNvdXJjZSIsImluaXRpYXRvclR5cGUiLCJyZSIsImZzIiwic3QiLCJkbHMiLCJkbGUiLCJjcyIsImNlIiwic2NzIiwicmVzcXMiLCJyZXNwcyIsInJlc3BlIiwicmVzdHlwZSIsImluaXRpYWxpemVkIiwiZGVzY3JpcHRvciIsIm9fb3MiLCJvX3NoZWxsIiwib19jb3JlIiwib19yZXNvIiwib19leHRyYSIsIm9fZXh0cmFWIiwidHJpZCIsIm14IiwidGltaW5nUGFyYW1zIiwic2VuZERhdGEiLCJtb3VzZWRvd24iLCJ4cGF0aCIsImV3IiwiZWgiLCJpc1BWIiwicmFuZG9tTnVtIiwic3RiIiwic2V0UmVzb3VyY2VUaW1pbmdCdWZmZXJTaXplIiwid2Via2l0U2V0UmVzb3VyY2VUaW1pbmdCdWZmZXJTaXplIiwiZW5naW5lIiwic3RhY2siLCJISURERU4iLCJpc0RlYnVnQXBsdXMiLCJhcGx1c2luaXQiLCJSVU5OSU5HIiwiYXBsdXNTdGF0dXMiLCJjb25maWdfcHZfY29udGV4dCIsIlBMVUdJTlNfUFYiXSwibWFwcGluZ3MiOiI7Q0FBUyxTQUFVQTtJQ0luQixTQUFBQyxFQUFBQztRQUdBLElBQUFDLEVBQUFELElBQ0EsT0FBQUMsRUFBQUQsR0FBQUU7UUFHQSxJQUFBQyxJQUFBRixFQUFBRDtZQUNBRTtZQUNBRSxJQUFBSjtZQUNBSyxTQUFBOztRQVVBLE9BTkFQLEVBQUFFLEdBQUFNLEtBQUFILEVBQUFELFNBQUFDLEtBQUFELFNBQUFILElBR0FJLEVBQUFFLFVBQUEsR0FHQUYsRUFBQUQ7O0lBdkJBLElBQUFEO0lBcUNBLE9BVEFGLEVBQUFRLElBQUFULEdBR0FDLEVBQUFTLElBQUFQLEdBR0FGLEVBQUFVLElBQUEsSUFHQVYsRUFBQTtJRE1NLFNBQVVJLEdBQVFELEdBQVNIO0lBRWhDSSxFQUFPRCxVQUFVSCxFQUFvQjtHQUtoQyxTQUFVSSxHQUFRRCxHQUFTSDtJRXpDakM7SUFFQUEsRUFBQSxHQUFBVyxXQUFBQyxTQUNBO1FBQ0EsSUFBQUMsSUFBQWIsRUFBQTtRQUNBQSxFQUFBLEtBQUFhOztHRjJETSxTQUFVVCxHQUFRRCxHQUFTSDtJR2pFakM7SUFFQSxJQVFBYyxHQVJBQyxJQUFBZixFQUFBLElBRUFnQixJQUFBRCxFQUFBQyxPQUNBQyxJQUFBRixFQUFBRSxhQUVBQyxJQUFBSCxFQUFBRyxTQUNBQyxJQUFBSixFQUFBSSxlQUdBQyxLQUFBO0lBQ0E7UUFDQVIsV0FDQUUsSUFBQUYsUUFDQVEsS0FBQTtNQUVDLE9BQUFDO1FBQ0RQLFFBQ0FNLEtBQUE7O0lBR0FqQixFQUFBbUIsYUFBQTtRQUNBLE9BQUFSO09BR0FYLEVBQUFpQixRQUFBO1FBQ0EsT0FBQVI7T0FHQVQsRUFBQVEsYUFBQSxTQUFBWTtRQUVBVCxJQURBUyxJQUNBQTtZQUdBQyxHQUFBO1lBQ0FDO1lBQ0FDOztRQUdBLElBQUFDLEdBQ0FDO1FBQ0EsSUFBQVIsR0FDQTtZQUNBTyxJQUFBYixFQUFBVyxT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QUNBLElBQUFELElBQUFDLFNBQUFDLEtBQUFDLE1BQUE7WUFDQUgsT0FBQTlGLFNBQUEsS0FDQTBGLGFBQUFyRyxRQUFBLGNBQUF5RyxFQUFBLEtBRUFtbEIsSUFBQSxXQUFBdmxCLGFBQUFjLFFBQUE7ZUFFQXlrQixLQUFBO1FBTUEsT0FKQWhkLEVBQUExWSxjQUFBLGNBQUEwMUIsSUFDQUEsS0FDQTlwQixJQUFBbUMsU0FBQTJuQixJQUVBQTs7R25KdTNpQk0sU0FBVTkzQixHQUFRRCxHQUFTSDtJb0pyNWlCakM7SUFFQSxJQUFBcXlELElBQUFyeUQsRUFBQSxNQUNBZ2MsSUFBQWhjLEVBQUEsS0FDQXl2QixJQUFBenZCLEVBQUE7SUFZQUcsRUFBQThMLE1BQUEsU0FBQTRqQixHQUFBelo7UUFDQSxJQUFBZzlDLElBQUEsSUFBQWY7UUFDQWUsRUFBQW5uRDtZQUNBakIsU0FBQTZrQixFQUFBN2tCO1lBQ0F6SixTQUFBc3VCLEVBQUF0dUI7O1lBRUE0SjtZQUNBaXBCO1lBQ0FpL0IsWUFBQTtZQUNBQztZQUNBQyxzQkFBQTtXQUNHLFNBQUExWDtZQUNILElBQUF4ckIsTUFBQSxvQkFBQXdyQjtZQUNBcHNCLEVBQUFhLFNBQUFELElBQ0FaLEVBQUFjLFlBQUFGLElBQ0FyVSxFQUFBNUYsTUFDQUEsRUFBQXlsQyIsImZpbGUiOiJhcGx1c19jbG91ZF91bS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHQvKipcblx0ICogYWxpbG9nL2FwbHVzL3NyYy9hcGx1cy5qc1xuXHQgKiDmqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyByZXF1aXJlKCcuLi9idWlsZF9hbGkvYXBsdXNfc3BhX2F1dG9fcHYuanMnKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyKS5pbml0R2xvYmFsKHdpbmRvdyk7XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGFwbHVzX2NvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpKGFwbHVzX2NvbmZpZyk7XG5cdH0pKCk7XG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDmk43kvZxhcGx1c+eahOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgQVBMVVMgPSBhcGx1c1N0YXRpYy5BUExVUztcblx0dmFyIEFQTFVTX1FVRVVFID0gYXBsdXNTdGF0aWMuQVBMVVNfUVVFVUU7XG5cdFxuXHR2YXIgR09MRExPRyA9IGFwbHVzU3RhdGljLkdPTERMT0c7XG5cdHZhciBHT0xETE9HX1FVRVVFID0gYXBsdXNTdGF0aWMuR09MRExPR19RVUVVRTtcblx0XG5cdHZhciBfYXBsdXNfY29udGV4dDtcblx0dmFyIGlzV2ViID0gZmFsc2U7XG5cdHRyeSB7XG5cdCAgaWYgKHdpbmRvdykge1xuXHQgICAgX2FwbHVzX2NvbnRleHQgPSB3aW5kb3c7XG5cdCAgICBpc1dlYiA9IHRydWU7XG5cdCAgfVxuXHR9IGNhdGNoIChlKSB7XG5cdCAgX2FwbHVzX2NvbnRleHQgPSB7fTtcblx0ICBpc1dlYiA9IGZhbHNlO1xuXHR9XG5cdFxuXHRleHBvcnRzLmdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc1dlYiA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB3aW5kb3c7XG5cdH07XG5cdFxuXHRleHBvcnRzLmluaXRHbG9iYWwgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuXHQgIGlmIChjb250ZXh0KSB7XG5cdCAgICBfYXBsdXNfY29udGV4dCA9IGNvbnRleHQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIF9hcGx1c19jb250ZXh0ID0ge1xuXHQgICAgICB2OiAxLFxuXHQgICAgICBhcGx1czoge30sXG5cdCAgICAgIGFwbHVzX3F1ZXVlOiBbXVxuXHQgICAgfTtcblx0ICB9XG5cdCAgdmFyIF9hcGx1c0RlZmF1bHRWYWx1ZTtcblx0ICB2YXIgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWU7XG5cdCAgaWYgKGlzV2ViKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXMgfHwgX2FwbHVzX2NvbnRleHQuZ29sZGxvZyB8fCAoX2FwbHVzX2NvbnRleHQuYXBsdXMgPSB7fSkpO1xuXHQgICAgICB2YXIgX2dvbGRsb2dfcXVldWUgPSAoX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSB8fCAoX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSA9IFtdKSk7XG5cdCAgICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gKF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlIHx8IChfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSA9IFtdKSk7XG5cdCAgICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gX2dvbGRsb2dfcXVldWUuY29uY2F0KF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlKTsgIFxuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9IGVsc2Uge1xuXHQgICAgX2FwbHVzRGVmYXVsdFZhbHVlID0gX2FwbHVzX2NvbnRleHQuYXBsdXM7XG5cdCAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlO1xuXHQgIH1cblx0ICBcblx0ICBfYXBsdXNfY29udGV4dC5hcGx1cyA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2cgPSBfYXBsdXNEZWZhdWx0VmFsdWU7XG5cdCAgX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgPSBfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlID0gX2FwbHVzUXVldWVEZWZhdWx0VmFsdWU7XG5cdCAgXG5cdCAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xuXHR9O1xuXHRcblx0dmFyIGdldEdsb2JhbFZhbHVlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgIGlmIChrZXkgPT09IEFQTFVTIHx8IGtleSA9PT0gR09MRExPRykge1xuXHQgICAgdmFyIGcgPSBfYXBsdXNfY29udGV4dFtBUExVU10gfHwgX2FwbHVzX2NvbnRleHRbR09MRExPR107XG5cdCAgICBpZiAoIWcpIHtcblx0ICAgICAgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSA9IF9hcGx1c19jb250ZXh0W0dPTERMT0ddID0ge307XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZztcblx0ICB9XG5cdCAgdmFyIGdvbGRsb2dfcXVldWUgPSBHT0xETE9HX1FVRVVFO1xuXHQgIHZhciBhcGx1c19xdWV1ZSA9IEFQTFVTX1FVRVVFO1xuXHQgIGlmIChrZXkgPT09IGFwbHVzX3F1ZXVlIHx8IGtleSA9PT0gZ29sZGxvZ19xdWV1ZSkge1xuXHQgICAgdmFyIHEgPSBfYXBsdXNfY29udGV4dFthcGx1c19xdWV1ZV0gfHwgX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV07XG5cdCAgICBpZiAoIXEpIHtcblx0ICAgICAgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSA9IF9hcGx1c19jb250ZXh0W2dvbGRsb2dfcXVldWVdID0gW107XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuZ2V0R2xvYmFsVmFsdWUgPSBnZXRHbG9iYWxWYWx1ZTtcblx0XG5cdGV4cG9ydHMuc2V0R2xvYmFsVmFsdWUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgIF9hcGx1c19jb250ZXh0W2tleV0gPSB2YWx1ZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDojrflj5ZhcGx1c+WGhemDqOWPmOmHj1xuXHQgKiBAcGFyYW1zIFtTdHJpbmddIGtleVxuXHQgKiBAcmV0dXJuIFtPYmplY3R8U3RyaW5nfE51bWJlcnxCb29sZWFuXVxuXHQgKi9cblx0dmFyIGdldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXkpIHtcblx0ICB2YXIgdjtcblx0ICB0cnkge1xuXHQgICAgdmFyIGFwbHVzID0gZ2V0R2xvYmFsVmFsdWUoQVBMVVMpO1xuXHQgICAgdiA9IGFwbHVzW2tleV07XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgdiA9ICcnO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gdjtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuZ2V0R29sZGxvZ1ZhbCA9IGdldEdvbGRsb2dWYWw7XG5cdC8qKlxuXHQgKiDorr7nva5hcGx1c+WGhemDqOWPmOmHj1xuXHQgKiBAcGFyYW1zIFtTdHJpbmddIGtleVxuXHQgKiBAcGFyYW1zIFtPYmplY3R8U3RyaW5nfE51bWJlcnxCb29sZWFuXSB2YWxcblx0ICogQHJldHVybiBbQm9vbGVhbl1cblx0ICovXG5cdHZhciBzZXRHb2xkbG9nVmFsID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcblx0ICB2YXIgZiA9IGZhbHNlO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG5cdCAgICBpZiAoa2V5KSB7XG5cdCAgICAgIGFwbHVzW2tleV0gPSB2YWw7XG5cdCAgICAgIGYgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGYgPSBmYWxzZTtcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcmV0dXJuIGY7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLnNldEdvbGRsb2dWYWwgPSBzZXRHb2xkbG9nVmFsO1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPlmNsaWVudEluZm8o5rWP6KeI5Zmo44CB6K6+5aSH562J5L+h5oGvKVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqICAgdmVyc2lvbjogMixcblx0ICogICB1YV9pbmZvOiB7XG5cdCAqICAgICBiOiBcImNocm9tZTU4XCJcblx0ICogICAgIGlzbTogXCJtYWNcIlxuXHQgKiAgICAgbXg6IFwiMzYwZWVcIlxuXHQgKiAgICAgbzogXCJtYWNcIlxuXHQgKiAgICAgcDogMVxuXHQgKiAgICAgczogXCIxOTIweDEwODBcIlxuXHQgKiAgICAgdzogXCJ3ZWJraXRcIlxuXHQgKiAgIH1cblx0ICogfVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRDbGllbnRJbmZvID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGdldEdvbGRsb2dWYWwoJ19hcGx1c19jbGllbnQnKSB8fCB7fTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgQVBMVVMgPSAnYXBsdXMnO1xuXHR2YXIgR09MRExPRyA9ICdnb2xkbG9nJztcblx0dmFyIEFQTFVTX1FVRVVFID0gQVBMVVMgKyAnX3F1ZXVlJztcblx0dmFyIEdPTERMT0dfUVVFVUUgPSBHT0xETE9HICsgJ19xdWV1ZSc7XG5cdHZhciBNV19DSEFOR0UgPSAnbXdfY2hhbmdlJztcblx0dmFyIE1FVEFfSU5GTyA9ICdNZXRhSW5mbyc7XG5cdHZhciBBUFBFTkRfTUVUQV9JTkZPID0gJ2FwcGVuZCcgKyBNRVRBX0lORk87XG5cdHZhciBTRVRfTUVUQV9JTkZPID0gJ3NldCcgKyBNRVRBX0lORk87XG5cdHZhciBIVFRQID0gJ2h0dHAnO1xuXHR2YXIgX3B1YnN1YiA9ICdfcHVic3ViJztcblx0XG5cdHZhciBkZWZhdWx0Q29kZSA9ICdvdGhlcic7XG5cdHZhciBDTEsgPSAnMjEwMSc7XG5cdHZhciBFWFAgPSAnMjIwMSc7XG5cdHZhciBJTVBFWFAgPSAnMjIwMic7XG5cdHZhciBPVEhFUiA9ICcxOTk5OSc7XG5cdHZhciBBUFBfU0hPVyA9ICcxMDIzJztcblx0dmFyIEFQUF9ISURFX09SX1VOTE9BRCA9ICcxMDEwJzsgXG5cdHZhciBTRVNTSU9OX0lOVEVSVkFMID0gMzAwMDA7IC8vIHNlc3Npb25JZOi/h+acn+aXtumXtCAzMOenklxuXHR2YXIgU0hBUkVfQ0FDSEVfSU5URVJWQUwgPSAxMDAwICogNjAgKiAzMDtcblx0dmFyIEVLVlMgPSAnZWt2cyc7XG5cdHZhciBFVkVOVF9NQVhfQ09VTlQgPSAxMDAwMDsgLy8g5pys5Zyw5pyA5aSa5a2Y5YKo6L+Z5LmI5aSaZWt25pWw5o2uXG5cdHZhciBNRU1PUllfTUFYX0NPVU5UID0gMTsgLy8g5YaF5a2Y5Lit5a2Y5YKo55qE5pyA5aSn5pWw5o2u5pWw6YeP77yM6LaF6L+H5YiZ57yT5a2Y5Yiw5pys5ZywXG5cdHZhciBNQVhfUVVFVUVfQ09VTlQgPSAxOyAvLyDkuLrpmLLmraLlm6DnvZHnu5zlvILluLjlr7zoh7TnvJPlrZjov4flpKfvvIzorr7nva7nvJPlrZjkuKrmlbDkuIrpmZBcblx0dmFyIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCA9IDMwMDA7IC8vIGVrdum7mOiupOWPkemAgemXtOmalOaXtumXtDogM+enklxuXHR2YXIgUEFHRV9TVEFSVCA9ICckJF9wYWdlX3N0YXJ0Jztcblx0dmFyIFBBR0VfRU5EID0gJyQkX3BhZ2VfZW5kJztcblx0dmFyIEFQUF9TVEFSVCA9ICckJF9hcHBfc3RhcnQnO1xuXHR2YXIgQVBQX0VORCA9ICckJF9hcHBfZW5kJztcblx0dmFyIFVTRVJfUFJPRklMRV9LRVkgPSAnYXBsdXNfdXNlcl9wcm9maWxlJztcblx0dmFyIElNUFJJTlQgPSAnaW1wcmludCc7XG5cdHZhciBJRF9UWVBFID0gJ2FwbHVzLWlkdHlwZSc7XG5cdHZhciBKU0JSSURHRV9PTkxZID0gJ2FwbHVzLWpzYnJpZGdlLW9ubHknO1xuXHR2YXIgUEFHRV9DT05GSUcgPSAnYXBsdXMtcGFnZS1jb25maWcnOyBcblx0dmFyIEFQTFVTX1NLSVBfQVBWX1JVTEVTID0gJ2FwbHVzLXNraXAtYXB2LXJ1bGVzJztcblx0dmFyIEFQTFVTX1BWX0RPTUFJTiA9ICdhcGx1cy1yaG9zdC12Jztcblx0dmFyIEFQTFVTX0VLVl9ET01BSU4gPSAnYXBsdXMtcmhvc3QtZyc7XG5cdHZhciBBVVRPX0dFVF9PUEVOSUQgPSAnYXV0b0dldE9wZW5pZCc7XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIFBBR0VfRU5URVI6ICdQQUdFX0VOVEVSJyxcblx0ICBDVVJSRU5UX1BBR0VfQ09ORklHOiAnQ1VSUkVOVF9QQUdFX0NPTkZJRycsXG5cdCAgX0FOT05ZX0lEOiAnX2Fub255X2lkJyxcblx0ICBfREVWX0lEOiAnX2Rldl9pZCcsXG5cdCAgX1VTRVJfSUQ6ICdfdXNlcl9pZCcsXG5cdCAgREVGQVVMVF9DT0RFOiBkZWZhdWx0Q29kZSxcblx0ICBPVEhFUjogT1RIRVIsXG5cdCAgRVZFTlRfTUFQOiB7XG5cdCAgICAnMjEwMSc6ICdjbGljaycsXG5cdCAgICAnMjIwMSc6ICdleHBvc3VyZScsXG5cdCAgICAnMjIwMic6ICdleHBvc3VyZScsXG5cdCAgICAnMTk5OTknOiBkZWZhdWx0Q29kZSxcblx0ICAgICcxMDIzJzogJ2FwcF9zaG93Jyxcblx0ICAgICcxMDEwJzogJ2FwcF9oaWRlX29yX3VubG9hZCdcblx0ICB9LFxuXHQgIEVWRU5UX0lEX01BUDoge1xuXHQgICAgJ0VYUCc6IEVYUCxcblx0ICAgICdJTVBFWFAnOiBJTVBFWFAsXG5cdCAgICAnQ0xLJzogQ0xLLFxuXHQgICAgJ09USEVSJzogT1RIRVIsXG5cdCAgICAnU0hPVyc6IEFQUF9TSE9XLFxuXHQgICAgJ0hfT1JfVSc6IEFQUF9ISURFX09SX1VOTE9BRFxuXHQgIH0sXG5cdCAgQVBMVVM6IEFQTFVTLFxuXHQgIEdPTERMT0c6IEdPTERMT0csXG5cdCAgVU5TVUJTQ1JJQkU6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy51bnN1YnNjcmliZScsXG5cdCAgU1VCU0NSSUJFOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuc3Vic2NyaWJlJyxcblx0ICBQVUJMSVNIOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcucHVibGlzaCcsXG5cdCAgQ0FDSEVfUFVCUzogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLmNhY2hlUHVicycsXG5cdCAgQVBMVVNfVU5JVkVSU0FMOiBBUExVUyArICdfdW5pdmVyc2FsJyxcblx0ICBBUExVU19RVUVVRTogQVBMVVNfUVVFVUUsXG5cdCAgR09MRExPR19RVUVVRTogR09MRExPR19RVUVVRSxcblx0ICBDT01QTEVURTogJ2NvbXBsZXRlJyxcblx0ICBQVl9DT0RFOiAnMjAwMScsXG5cdCAgRVhQX0NPREU6IEVYUCxcblx0ICBDTEtfQ09ERTogQ0xLLFxuXHQgIE9USEVSX0NPREU6IE9USEVSLFxuXHQgIENMSzogJ0NMSycsXG5cdCAgRVhQOiAnRVhQJyxcblx0ICAvLyBPVEhFUjogJ09USEVSJyxcblx0ICBTUE1fQ05UOiAnc3BtLWNudCcsXG5cdCAgU1BNX1VSTDogJ3NwbS11cmwnLFxuXHQgIFNQTV9QUkU6ICdzcG0tcHJlJyxcblx0ICBNV19DSEFOR0VfUFY6IE1XX0NIQU5HRSArICdfcHYnLFxuXHQgIE1XX0NIQU5HRV9ISkxKOiBNV19DSEFOR0UgKyAnX2hqbGonLFxuXHQgIEhUVFA6IEhUVFAgKyAnOicsXG5cdCAgSFRUUFM6ICdodHRwczonLFxuXHQgIEFQUEVORF9NRVRBX0lORk86IEFQUEVORF9NRVRBX0lORk8sXG5cdCAgU0VUX01FVEFfSU5GTzogU0VUX01FVEFfSU5GTyxcblx0ICBBUExVU19BUFBFTkRfTUVUQV9JTkZPOiBBUExVUyArICcuJyArIEFQUEVORF9NRVRBX0lORk8sXG5cdCAgQVBMVVNfU0VUX01FVEFfSU5GTzogQVBMVVMgKyAnLicgKyBTRVRfTUVUQV9JTkZPLFxuXHQgIFBWSUQ6J3B2aWQnLFxuXHQgIEFQTFVTX0xPR19QSVBFOidhcGx1cy1sb2ctcGlwZScsXG5cdCAgb3BlbkFQSXM6IFtcblx0ICAgICdzZW5kJywgJ2VudGVyJywgJ3NlbmRQVicsICdyZWNvcmQnLCBcblx0ICAgICdjb21iaW5lUmVjb3JkJywgJ3JlY29yZFVkYXRhJywgJ3JlcXVlc3RWVENvbmZpZycsICdyZXF1ZXN0UmVtb3RlQ29uZmlnJyxcblx0ICAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcblx0ICAgICd1cGRhdGVQYWdlUHJvcGVydGllcycsIFxuXHQgICAgJ3VwZGF0ZU5leHRQYWdlUHJvcGVydGllcycsXG5cdCAgICAndXBkYXRlUGFnZVV0cGFyYW0nLFxuXHQgICAgJ3VwZGF0ZU5leHRQYWdlVXRwYXJhbScsXG5cdCAgICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJywgJ3NraXBQYWdlJyxcblx0ICAgICd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsICdnZXRQYWdlU3BtVXJsJywgJ2dldFBhZ2VTcG1QcmUnLFxuXHQgICAgJ3NldFBhZ2VOYW1lJywgJ2dldEVsZW1lbnRTUE0nLCAncmVjb3JkQXBwTGluaydcblx0ICBdLFxuXHQgIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG5cdCAgU0VTU0lPTl9QQVVTRV9USU1FOiAnc2Vzc2lvbl9wYXVzZV90aW1lJyxcblx0ICBJTVBSSU5UOiAnaW1wcmludCcsXG5cdCAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcblx0ICBNQVhfRVZFTlRJRF9MRU5HVEg6IDEyOCxcblx0ICBNQVhfUFJPUEVSVFlfS0VZX0xFTkdUSDogMjU2LFxuXHQgIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG5cdCAgRkFJTEVEX1JFUVVFU1RTOiAnZmFpbGVkX3JlcXVlc3RzJyxcblx0ICBSRVFVRVNUUzogJ3JlcXVlc3RzJyxcblx0ICBTSEFSRVM6ICdzaGFyZXMnLFxuXHQgIEFQTFVTX1NTUkM6ICdfYXBsdXNfc3NyYycsXG5cdCAgRUtWUzogRUtWUyxcblx0ICBFVkVOVF9NQVhfQ09VTlQ6IEVWRU5UX01BWF9DT1VOVCxcblx0ICBNRU1PUllfTUFYX0NPVU5UOiBNRU1PUllfTUFYX0NPVU5ULFxuXHQgIE1BWF9RVUVVRV9DT1VOVDogTUFYX1FVRVVFX0NPVU5ULFxuXHQgIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTDogRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMLFxuXHQgIFBBR0VfU1RBUlQ6IFBBR0VfU1RBUlQsXG5cdCAgUEFHRV9FTkQ6IFBBR0VfRU5ELFxuXHQgIEFQUF9TVEFSVDogQVBQX1NUQVJULFxuXHQgIEFQUF9FTkQ6IEFQUF9FTkQsXG5cdCAgVVNFUl9QUk9GSUxFX0tFWTogVVNFUl9QUk9GSUxFX0tFWSxcblx0ICBTSEFSRV9DQUNIRV9JTlRFUlZBTDogU0hBUkVfQ0FDSEVfSU5URVJWQUwsXG5cdCAgSU1QUklOVDogSU1QUklOVCxcblx0ICBJRF9UWVBFOiBJRF9UWVBFLFxuXHQgIEdMT0JBTF9QUk9QRVJUWTogJ2dsb2JhbHByb3BlcnR5Jyxcblx0ICAvLyBVVE1fS0VZUzogWyd1dG1fc291cmNlJywgJ3V0bV9jb250ZW50JywgJ3V0bV9tZWRpdW0nLCAndXRtX2NhbXBhaWduJywgJ3V0bV90ZXJtJ10sXG5cdCAgSlNCUklER0VfT05MWTogSlNCUklER0VfT05MWSxcblx0ICBQQUdFX0NPTkZJRzogUEFHRV9DT05GSUcsXG5cdCAgQVBMVVNfU0tJUF9BUFZfUlVMRVM6IEFQTFVTX1NLSVBfQVBWX1JVTEVTLFxuXHQgIEFQTFVTX1BWX0RPTUFJTjogQVBMVVNfUFZfRE9NQUlOLFxuXHQgIEFQTFVTX0VLVl9ET01BSU46IEFQTFVTX0VLVl9ET01BSU4sXG5cdCAgQVBMVVNfSU1QUklOVF9WRVJTSU9OOiAnQVBMVVNfSU1QUklOVF9WRVJTSU9OJyxcblx0ICBBUExVU19SRU1PVEVfQ09ORklHOiAnQVBMVVNfUkVNT1RFX0NPTkZJRycsXG5cdCAgUkFOSzogJ2Vrdl9yYW5rJyxcblx0ICBXRUJfRVZFTlRfU1VGRklYOiAnL3dlYl9sb2dzJyxcblx0ICBXRUJfUENfUFZfU1VGRklYOiAndi5naWYnLFxuXHQgIFdFQl9XQVBfUFZfU1VGRklYOiAnbS5naWYnLFxuXHQgIFBBR0VfTEVBVkU6ICckJF9wYWdlX2xlYXZlJyxcblx0ICBBUExVU19BVVRPVFJBQ0tfRU5BQkxFRDogJ2FwbHVzLWF1dG90cmFjay1lbmFibGVkJyxcblx0ICBBUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEU6ICdhcGx1cy1hdXRvdHJhY2stZW5hYmxlZC1yZW1vdGUnLFxuXHQgIEFQTFVTX0FVVE9UUkFDS19DT05GSUc6ICdhcGx1cy1hdXRvdHJhY2stY29uZmlnJyxcblx0ICBBUExVU19BVVRPVFJBQ0tfQ09ORklHX1JFTU9URTogJ2FwbHVzLWF1dG90cmFjay1jb25maWctcmVtb3RlJyxcblx0ICBBUExVU19FVkVOVF9MSU1JVFJBVEVTOiAnYXBsdXMtZXZlbnQtbGltaXRyYXRlcycsXG5cdCAgQVBMVVNfRElTQUJMRV9BVVRPRVZFTlQ6ICdhcGx1cy1kaXNhYmxlLWF1dG9ldmVudCcsXG5cdCAgQVBMVVNfRElTQUJMRV9BVVRPRVZFTlRfUkVNT1RFOiAnYXBsdXMtZGlzYWJsZS1hdXRvZXZlbnQnLFxuXHQgIEFQTFVTX0RJU0FCTEVfQVVUT1BWOiAnYXBsdXMtZGlzYWJsZS1hcHYnLFxuXHQgIEFQTFVTX0RJU0FCTEVfQVVUT1BWX1JFTU9URTogJ2FwbHVzLWRpc2FibGUtYXB2LXJlbW90ZScsXG5cdCAgQVBMVVNfREVWSUNFX0VOQUJMRTogJ2FwbHVzLWRldmljZS1lbmFibGUnLFxuXHQgIFBFUkZPUk1BTkNFX1dBUklORzogJyQkX3BlcmZfd2FybmluZycsXG5cdCAgU1RBUlRfSUQ6ICdTVEFSVF9JRCcsXG5cdCAgQVVUT19HRVRfT1BFTklEOiBBVVRPX0dFVF9PUEVOSUQsXG5cdCAgQVBMVVNfQlJJREdFX05BTUU6ICdhcGx1cy1icmlkZ2UtbmFtZScsXG5cdCAgQVBMVVNfTUlOSV9SRVFVRVNUX1RJTUVPVVQ6ICdhcGx1cy1yZXF1ZXN0LXRpbWVvdXQnLFxuXHQgIEFQTFVTX0xBVEVBU1RfVVRNOiAnQVBMVVNfTEFURUFTVF9VVE0nLFxuXHR9O1xuXHRcblx0Ly8gdmFyIG9wZW5BUElzID0gW1xuXHQvLyAgICdzZW5kJywgJ2VudGVyJywgJ3NlbmRQVicsICdyZWNvcmQnLFxuXHQvLyAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcblx0Ly8gICBVUERBVEUgKyAnUGFnZVByb3BlcnRpZXMnLFxuXHQvLyAgIFVQREFURSArICdOZXh0UGFnZVByb3BlcnRpZXMnLFxuXHQvLyAgIFVQREFURSArICdQYWdlVXRwYXJhbScsXG5cdC8vICAgVVBEQVRFICsgJ05leHRQYWdlVXRwYXJhbScsXG5cdC8vICAgJ3BhZ2VBcHBlYXInLCAncGFnZURpc2FwcGVhcicsXG5cdC8vICAgJ3NraXBQYWdlJ1xuXHQvLyBdO1xuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBcIm1ldGFJbmZvXCI6IHtcblx0ICAgIFwiYXBsdXMtaWZyLXB2XCI6IFwiMVwiLFxuXHQgICAgXCJhcGx1cy1yaG9zdC12XCI6IFwiXCIsXG5cdCAgICBcImFwbHVzLXJob3N0LWdcIjogXCJcIixcblx0ICAgIFwiYXBsdXMtY2hhbm5lbFwiOiBcIlwiLFxuXHQgICAgXCJhcHBJZFwiOiBcIlwiLFxuXHQgICAgXCJzZGtJZFwiOiBcImFwbHVzX2Nsb3VkX3VtXCIsXG5cdCAgICBcImFwbHVzLWNwdmRhdGFcIjoge30sXG5cdCAgICBcImFwbHVzLWV4ZGF0YVwiOiB7fSxcblx0ICAgIFwiYXBsdXMtZ2xvYmFsZGF0YVwiOiB7fSxcblx0ICAgIFwiYXBsdXMtbW1zdGF0LXRpbWVvdXRcIjogXCIxMDAwMFwiLFxuXHQgICAgXCJhcGx1cy10b1VUXCI6IFwiXCIsXG5cdCAgICBcImFwbHVzLWRpc2FibGUtYXV0b2V2ZW50XCI6IGZhbHNlLFxuXHQgICAgXCJhcGx1cy1kaXNhYmxlLWFwdlwiOiBmYWxzZSxcblx0ICAgIFwiYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWRcIjogZmFsc2UsXG5cdCAgICBcImFwbHVzLWRldmljZS1lbmFibGVcIjogdHJ1ZVxuXHQgIH0sXG5cdCAgXCJnbG9iYWxDb25maWdcIjoge1xuXHQgICAgXCJpc0RlY29kZVVybFwiOiB0cnVlLFxuXHQgICAgXCJpc0FsaVwiOiBmYWxzZSxcblx0ICAgIFwiaXNVTVwiOiB0cnVlLFxuXHQgICAgXCJBUExVU19RVUVVRVwiOiBcImFwbHVzX3F1ZXVlXCIsXG5cdCAgICBcIkVUQUdfU1RPUkFHRV9LRVlcIjogXCJfX0VUQUdfX0NOQV9fSURfX1wiLFxuXHQgICAgXCJzY3JpcHRfbmFtZVwiOiBcImFwbHVzLmpzXCIsXG5cdCAgICBcImx2ZXJcIjogXCIxLjkuNTFcIixcblx0ICAgIFwiTkFNRV9TVE9SQUdFX0tFWVNcIjoge1xuXHQgICAgICBcIlJFRkVSUkVSXCI6IFwid21fcmVmZXJyZXJcIixcblx0ICAgICAgXCJSRUZFUlJFUl9QVl9JRFwiOiBcInJlZmVyX3B2X2lkXCIsXG5cdCAgICAgIFwiTE9TVF9QVl9QQUdFX0RVUkFUSU9OXCI6IFwibG9zdF9wdl9wYWdlX2R1cmF0aW9uXCIsXG5cdCAgICAgIFwiTE9TVF9QVl9QQUdFX1NQTUFCXCI6IFwibG9zdF9wdl9wYWdlX3NwbWFiXCIsXG5cdCAgICAgIFwiTE9TVF9QVl9QQUdFXCI6IFwibG9zdF9wdl9wYWdlXCIsXG5cdCAgICAgIFwiTE9TVF9QVl9QQUdFX01TR1wiOiBcImxvc3RfcHZfcGFnZV9tc2dcIlxuXHQgICAgfVxuXHQgIH0sXG5cdCAgXCJwbHVnaW5zXCI6IFtcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfc2Vzc2lvbl9tYW5hZ2VyXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c190cmFja19kZWJ1Z1wiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMilcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2JvZHlfcmVhZHlcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMTYpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJwdWJzdWJcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMTcpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19jbGllbnRcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMjIpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19tZXRhX2luamVjdFwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygyNClcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FjXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYWVcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTcpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJuYW1lX3N0b3JhZ2VcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjUpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJyZWNvcmRfbG9zdF9wdlwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2NiksXG5cdCAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICBcImxvc3RQdlJlY29yZFJhdGlvXCI6IDAuMDFcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbW9uaXRvclwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2OCksXG5cdCAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICBcIm9ic29sZXRlSW50ZXJSZWNvcmRSYXRpb1wiOiBcIjAuMDFcIixcblx0ICAgICAgICBcImpzRXJyb3JSZWNvcmRSYXRpb1wiOiBcIjAuMDFcIixcblx0ICAgICAgICBcImJyb3dzZXJTdXBwb3J0UmF0aW9cIjogXCIwLjAxXCJcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfd2ViX2h0dHBfdW1cIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzApXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19sb2dfaW5qZWN0XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImFwbHVzX21ldGFfaW5qZWN0XCJcblx0ICAgICAgXSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwicGx1Z2luc1wiOiB7XG5cdCAgICAgICAgICBcInB2XCI6IFtcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcInJlbW90ZV9jb25maWdcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg4Nylcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZW5fdG9fc2VuZHB2XCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oOTMpLFxuXHQgICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICAgICAgICAgIFwiYXBsdXNXYWl0aW5nXCI6IFwiXCJcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oOTQpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg5NiksXG5cdCAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgICAgICAgICAgXCJwdmRhdGFUb1V0XCI6IHt9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdXNlcmRhdGFcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg5OSksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRwdl91c2VyZGF0YV93ZWJcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpLFxuXHQgICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRwdl91c2VyZGF0YVwiXG5cdCAgICAgICAgICAgICAgXVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdXQyXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMTA0KSxcblx0ICAgICAgICAgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIlxuXHQgICAgICAgICAgICAgIF1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZHB2X3VtMm5hdGl2ZVwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJjYW5fdG9fc2VuZHB2XCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMTA2KSxcblx0ICAgICAgICAgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgICAgICAgICBcImZsYWdcIjogXCJOT1wiXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiYWZ0ZXJfcHZcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIF0sXG5cdCAgICAgICAgICBcImhqbGpcIjogW1xuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwicmVtb3RlX2NvbmZpZ1wiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlcmVfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KSxcblx0ICAgICAgICAgICAgICBcImRlcHNcIjogW11cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSxcblx0ICAgICAgICAgICAgICBcImRlcHNcIjogW11cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91c2VyZGF0YVwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMCksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX2hqbGpfdXNlcmRhdGFfd2ViXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMTExKSxcblx0ICAgICAgICAgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19oamxqX3VzZXJkYXRhXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX2hqbGpfdXQyXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMTEyKSxcblx0ICAgICAgICAgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIlxuXHQgICAgICAgICAgICAgIF1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91bTJuYXRpdmVcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMTMpLFxuXHQgICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG5cdCAgICAgICAgICAgICAgXVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICBdXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19zcG1faW5qZWN0XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNClcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FwaVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19maW5nZXJwaW50XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNylcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcIm1ldGFfcXVldWVcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMTI5KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNVbUJyaWRnZVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMzEpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19xdWV1ZVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMzIpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJob3RfbG9hZGVyXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMyksXG5cdCAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICBcInVybFJ1bGVzXCI6IFtcblx0ICAgICAgICAgIHtcblx0ICAgICAgICAgICAgXCJydWxlXCI6IFwiYXBsdXNfd2VidnRfbWVzc2FnZXJcIixcblx0ICAgICAgICAgICAgXCJjZG5QYXRoXCI6IFtcblx0ICAgICAgICAgICAgICBcImh0dHBzOi8vZC5hbGljZG4uY29tL2FsaWxvZy9tbG9nL2FwbHVzX3dlYnZ0X21lc3NhZ2VyLmpzXCJcblx0ICAgICAgICAgICAgXVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIF1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYXB2XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNCksXG5cdCAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgXCJhcGx1c19sb2dfaW5qZWN0XCIsXG5cdCAgICAgICAgXCJhcGx1c19hcGlcIlxuXHQgICAgICBdXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19hdXRvdHJhY2tcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMTM2KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfaGVhdG1hcFwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxNDEpLFxuXHQgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgIFwiYXBsdXNfbG9nX2luamVjdFwiLFxuXHQgICAgICAgIFwiYXBsdXNfYXBpXCJcblx0ICAgICAgXVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfcGFnZWxlYXZlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MyksXG5cdCAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgXCJhcGx1c19sb2dfaW5qZWN0XCIsXG5cdCAgICAgICAgXCJhcGx1c19hcGlcIlxuXHQgICAgICBdXG5cdCAgICB9XG5cdCAgXVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBhcGx1c19zZXNzaW9uX2luamVjdC5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uKCkgeyAgICAgIFxuXHQgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogbWFpbi5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRcblx0Ly8gdmFyIHV0aWxHUSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR1EnKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHVtVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciByaWQgPSB1bVV0aWxzLmdldFN0YXJ0SWQoKTtcblx0ICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGFwbHVzU3RhdGljLlNUQVJUX0lELCByaWQpO1xuXHQgIH0gY2F0Y2ggKGUpIHt9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGZ1bmN0aW9uIGdldFJhbmRvbVN0cihsZW4pIHtcblx0ICB2YXIgc3RyID0gJyc7XG5cdCAgdmFyIGFyciA9IFsnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaScsICdqJywgJ2snLCAnbCcsICdtJywgJ24nLCAnbycsICdwJywgJ3EnLCAncicsICdzJywgJ3QnLCAndScsICd2JywgJ3cnLCAneCcsICd5JywgJ3onLCAnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ107XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBOdW1iZXIobGVuKTsgaSsrKSB7XG5cdCAgICB2YXIgcG9zID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGFyci5sZW5ndGggLSAxKSk7XG5cdCAgICBzdHIgKz0gYXJyW3Bvc107XG5cdCAgfVxuXHQgIHJldHVybiBzdHI7XG5cdH07XG5cdGV4cG9ydHMuZ2V0UmFuZG9tU3RyID0gZ2V0UmFuZG9tU3RyO1xuXHRcblx0ZXhwb3J0cy5zdGFydHNXaXRoID0gZnVuY3Rpb24oc3RyLCBzZWFyY2hWYWwpIHtcblx0ICBpZiAoIXN0ciB8fCAhc2VhcmNoVmFsIHx8IHNlYXJjaFZhbC5sZW5ndGggPT09IDAgfHwgc2VhcmNoVmFsLmxlbmd0aCA+IHN0ci5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgc2VhcmNoVmFsLmxlbmd0aCkgPT09IHNlYXJjaFZhbDtcblx0fTtcblx0XG5cdGV4cG9ydHMuYXNzaWduID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG5cdCAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuXHQgICAgaWYgKHNvdXJjZSkge1xuXHQgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuXHQgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuXHQgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gb3V0cHV0O1xuXHR9O1xuXHRcblx0Ly8gMS5la3bkuK3lrZjlnKjop4TliJnkuI3lkIjms5Xmg4XlhrXvvIzkuKLlvIPmlbTmnaHkuovku7Zcblx0Ly8gMi5ldmVudGlk6ZW/5bqm5LiN6IO96LaF6L+HMTI45Liq5a2X56ymXG5cdC8vIDMua2V56ZW/5bqm5LiN6IO96LaF6L+HMjU25Liq5a2X56ymXG5cdC8vIDQu5q+P5LiqZXZlbnTmkLrluKZrZXnkuKrmlbDkuI3og73otoXov4cxMDDkuKpcblx0ZXhwb3J0cy5jaGVja0V2ZW50ID0gZnVuY3Rpb24oZXZlbnRJZCwgcHJvcGVydGllcykge1xuXHQgIHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdCAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHQgIHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdCAgaWYgKCEoZXZlbnRJZCAmJiB0eXBlb2YgZXZlbnRJZCA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICB1bG9nKCkudygnZXZlbnQgbG9na2V5IGlzIGludmFsaWQsIGlkID0nLCBldmVudElkIHx8IFwiJycgZXZlbnQgcHJvcGVydGllcyA9IFwiLCBqc29uVXRpbC5zdHJpbmdmeShwcm9wZXJ0aWVzLmN1c3ApKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIC8vIOS/neeVmeWFs+mUruWtl1xuXHQgIHZhciByZXNlcnZlV29yZHMgPSBbJ2lkJywgJ2R1J107XG5cdCAgdmFyIHJlc2VydmVXb3JkTWFwID0ge307XG5cdFxuXHQgIHJlc2VydmVXb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7XG5cdCAgICByZXNlcnZlV29yZE1hcFt3b3JkXSA9IDE7XG5cdCAgfSk7XG5cdFxuXHQgIC8vIOajgOafpWV2ZW50SWTmmK/lkKbkuI7kv53nlZnlhbPplK7lrZflhrLnqoFcblx0ICBpZiAocmVzZXJ2ZVdvcmRNYXBbZXZlbnRJZF0pIHtcblx0ICAgIHVsb2coKS5lKCdldmVudElkIGhhcyBjb25mbGljdCB3aXRoIHJlc2VydmV3b3JkczogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGV2ZW50SWQubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKSB7XG5cdCAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIGV2ZW50IGlkIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyBwcm9wZXJ0aWVz55qE5ZCI5rOV57G75Z6L5Li6IHN0cmluZyB8IG9iamVjdChub3QgaW5jbHVkZSBBcnJheSlcblx0ICBpZiAocHJvcGVydGllc1xuXHQgICAgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHByb3BlcnRpZXMpKVxuXHQgICAgJiYgdHlwZW9mIHByb3BlcnRpZXMgIT09ICdzdHJpbmcnKSB7XG5cdCAgICB1bG9nKCkuZSgncGxlYXNlIGNoZWNrIHRyYWNrRXZlbnQgcHJvcGVydGllcy4gcHJvcGVydGllcyBzaG91bGQgYmUgc3RyaW5nIG9yIG9iamVjdChub3QgaW5jbHVkZSBBcnJheSknKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHZhciBjb3VudCA9IDA7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuXHQgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG5cdCAgICAgICAgaWYgKGtleS5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBwcm9wZXJ0eSBrZXkgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvdW50ID49IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKSB7XG5cdCAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gY291bnQgb2YgcHJvcGVydGllcyBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAocmVzZXJ2ZVdvcmRNYXBba2V5XSkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ3Byb3BlcnR5IGtleSBoYXMgY29uZmxpY3Qgd2l0aCByZXNlcnZlV29yZHM6ICcgKyByZXNlcnZlV29yZHMuam9pbignLCcpKTtcblx0ICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNvdW50ICs9IDE7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHRleHBvcnRzLmRlbGV0ZUluZm8gPSBmdW5jdGlvbihnb2tleSwgYXJyKSB7XG5cdCAgZWFjaChhcnIsIGZ1bmN0aW9uKHYpIHtcblx0ICAgIGRlbGV0ZSBnb2tleVt2XTtcblx0ICB9KTtcblx0ICByZXR1cm4gZ29rZXk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmNoZWNrRW1wdHlPYmogPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0U3RhcnRJZCA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBnZXRSYW5kb21TdHIoMTApICsgRGF0ZS5ub3coKSArIGdldFJhbmRvbVN0cig5KTtcblx0fTtcblx0XG5cdGV4cG9ydHMuRGF0YVR5cGUgPSB7XG5cdCAgSEFMRl9TRVNTSU9OOiAnaGFsZl9zZXNzaW9uJyxcblx0ICBDTE9TRV9TRVNTSU9OOiAnY2xvc2Vfc2Vzc2lvbicsXG5cdCAgRUtWOiAnZWt2Jyxcblx0ICBFTlRFUl9QQUdFOiAnZW50ZXJfcGFnZScsXG5cdCAgTEVBVkVfUEFHRTogJ2xlYXZlX3BhZ2UnXG5cdH07XG5cdFxuXHRleHBvcnRzLkFjY2Vzc1R5cGUgPSB7XG5cdCAgTU9CSUxFX05FVFdPUktfMkc6ICcyZycsXG5cdCAgTU9CSUxFX05FVFdPUktfM0c6ICczZycsXG5cdCAgTU9CSUxFX05FVFdPUktfNEc6ICc0ZycsXG5cdCAgTU9CSUxFX05FVFdPUktfTk9ORTogJ25vbmUnXG5cdH07XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdHZhciBMT0dfUFJFRklYID0gJ1tBUExVU10gLS0gJztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX2luc3RhbmNlID0gbnVsbDtcblx0ICB2YXIgX2RlYnVnID0gZmFsc2U7XG5cdFxuXHQgIGZ1bmN0aW9uIFVMb2coKSB7XG5cdCAgICB0aGlzLnNldERlYnVnID0gZnVuY3Rpb24gKGRlYnVnKSB7XG5cdCAgICAgIF9kZWJ1ZyA9IGRlYnVnO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChfZGVidWcpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBjb25zb2xlLmluZm8uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIC8vIGVcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy52ID0gZnVuY3Rpb24gKCkgeyAgICAgIFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy50aXBfdyA9IGZ1bmN0aW9uIChtc2cpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBjb25zb2xlLmxvZyhcblx0ICAgICAgICAgICclYyAnICsgTE9HX1BSRUZJWCArIG1zZyxcblx0ICAgICAgICAgICdiYWNrZ3JvdW5kOnJlZDsgcGFkZGluZzogNHB4OyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY29sb3I6ICNmZmY7J1xuXHQgICAgICAgICk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5yZXBlYXQgPSBmdW5jdGlvbihjaGFyKSB7XG5cdCAgICAgIHZhciByZXMgPSBjaGFyO1xuXHQgICAgICB3aGlsZSAocmVzLmxlbmd0aCA8IDg2KSB7XG5cdCAgICAgICAgcmVzID0gcmVzICsgY2hhcjtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoX2luc3RhbmNlID09PSBudWxsKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IG5ldyBVTG9nKCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2luc3RhbmNlO1xuXHQgIH07XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFxuXHRleHBvcnRzLnN0cmluZ2Z5ID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgIGlmIChkYXRhKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8vIGVtcHR5XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAnJztcblx0fTtcblx0XG5cdGV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbihqc29uKSB7XG5cdCAgaWYgKGpzb24pIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAvLyBlbXB0eVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblx0XG5cdGV4cG9ydHMucGFyc2VUb0FycmF5ID0gZnVuY3Rpb24oanNvbikge1xuXHQgIGlmIChqc29uKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgLy8gZW1wdHlcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIFtdO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdHZhciBpc1BsYWluT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIsIGZuKSB7XG5cdCAgaWYoaXNQbGFpbk9iamVjdChhcnIpICYmIGFyci5sZW5ndGggPT09IHZvaWQgMCl7XG5cdCAgICBmb3IodmFyIGF0dHIgaW4gYXJyKXtcblx0ICAgICAgaWYoYXJyLmhhc093blByb3BlcnR5KGF0dHIpKXtcblx0ICAgICAgICBmbihhdHRyLGFyclthdHRyXSxhcnIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfWVsc2Uge1xuXHQgICAgdmFyIGk7XG5cdCAgICB2YXIgbCA9IGFyci5sZW5ndGg7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBycyA9IGZuKGFycltpXSwgaSk7XG5cdCAgICAgIGlmIChycyA9PT0gJ2JyZWFrJykge1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmope1xuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgdmFyIHByb3RvID0gb2JqO1xuXHQgIHdoaWxlIChPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pICE9PSBudWxsKSB7XG5cdCAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgPT09IHByb3RvO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDkupHkuIp3ZWLln4vngrnpqozor4FhcGx1c190cmFja19kZWJ1Z19pZOazqOWFpemAu+i+kVxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgdXRpbEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBkb2MgPSBkb2N1bWVudDtcblx0ICAgICAgdmFyIGFwbHVzID0gKHdpbmRvdy5hcGx1cyB8fCAod2luZG93LmFwbHVzID0ge30pKTtcblx0ICAgICAgLy8g5L+d6K+B5Y+q5Lya5pyJ5LiA5LiqYXBsdXNfcGx1Z2luX21vbml0b3Lov5DooYxcblx0ICAgICAgaWYgKGFwbHVzLl9hcGx1c19jcGx1Z2luX3RyYWNrX2RlYikge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBhcGx1cy5fYXBsdXNfY3BsdWdpbl90cmFja19kZWIgPSB7XG5cdCAgICAgICAgJ3N0YXR1cyc6ICdpbml0J1xuXHQgICAgICB9O1xuXHQgICAgICB2YXIgd2luID0gd2luZG93O1xuXHQgICAgICB2YXIgaXNUcmFja0RlYnVnID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB2YXIgTFMgPSB3aW4ubG9jYWxTdG9yYWdlO1xuXHQgICAgICAgICAgdmFyIF90cmFja2lkID0gJ2FwbHVzX3RyYWNrX2RlYnVnX2lkJztcblx0ICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCdbP3wmXScgKyBfdHJhY2tpZCArICc9KFxcXFx3KiknKTtcblx0ICAgICAgICAgIHZhciBtYXRjaF92YWx1ZSA9IGxvY2F0aW9uLmhyZWYubWF0Y2gocmVnKTtcblx0ICAgICAgICAgIGlmIChtYXRjaF92YWx1ZSAmJiBtYXRjaF92YWx1ZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgIExTLnNldEl0ZW0oX3RyYWNraWQsIG1hdGNoX3ZhbHVlWzFdKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciBfciA9IGRvYy5yZWZlcnJlciB8fCAnJztcblx0ICAgICAgICAgICAgdmFyIG1hdGNoX3JlZmVyID0gX3IubWF0Y2gocmVnKTtcblx0ICAgICAgICAgICAgaWYgKG1hdGNoX3JlZmVyICYmIG1hdGNoX3JlZmVyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgICBMUy5zZXRJdGVtKF90cmFja2lkLCBtYXRjaF9yZWZlclsxXSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdmFyIF9uID0gd2luLm5hbWUgfHwgJyc7XG5cdCAgICAgICAgICAgICAgdmFyIG1hdGNoX25hbWUgPSBfbi5tYXRjaChyZWcpO1xuXHQgICAgICAgICAgICAgIGlmIChtYXRjaF9uYW1lICYmIG1hdGNoX25hbWUubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgICAgTFMuc2V0SXRlbShfdHJhY2tpZCwgbWF0Y2hfbmFtZVsxXSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICB2YXIgX3RyYWNraWRWYWx1ZSA9IExTLmdldEl0ZW0oX3RyYWNraWQpIHx8ICcnO1xuXHQgICAgICAgICAgaWYgKF90cmFja2lkVmFsdWUgJiYgX3RyYWNraWRWYWx1ZS5sZW5ndGggPiA1MCkge1xuXHQgICAgICAgICAgICB2YXIgdmFsdWVzID0gX3RyYWNraWRWYWx1ZS5zcGxpdCgnXycpO1xuXHQgICAgICAgICAgICB2YXIgZGF0ZTtcblx0ICAgICAgICAgICAgaWYgKHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgIGRhdGUgPSB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdLnJlcGxhY2UoL2xvZy8sICcnKTtcblx0ICAgICAgICAgICAgICB2YXIgbG9nZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgICAgICAgICAgICAgdmFyIGxvZ2RhdGVUaW1lID0gbG9nZGF0ZS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG5cdCAgICAgICAgICAgICAgdmFyIG5vd1RpbWUgPSBub3cuZ2V0VGltZSgpO1xuXHQgICAgICAgICAgICAgIGxvZ2RhdGUuc2V0RnVsbFllYXIocGFyc2VJbnQoZGF0ZS5zdWJzdHIoMCwgNCkpKTtcblx0ICAgICAgICAgICAgICBsb2dkYXRlLnNldE1vbnRoKHBhcnNlSW50KGRhdGUuc3Vic3RyKDQsIDIpIC0gMSkpO1xuXHQgICAgICAgICAgICAgIGxvZ2RhdGUuc2V0RGF0ZShwYXJzZUludChkYXRlLnN1YnN0cig2LCAyKSkpO1xuXHQgICAgICAgICAgICAgIGxvZ2RhdGUuc2V0SG91cnMocGFyc2VJbnQoZGF0ZS5zdWJzdHIoOCwgMikpKTtcblx0ICAgICAgICAgICAgICBsb2dkYXRlLnNldE1pbnV0ZXMocGFyc2VJbnQoZGF0ZS5zdWJzdHIoMTAsIDIpKSk7XG5cdCAgICAgICAgICAgICAgbG9nZGF0ZS5zZXRTZWNvbmRzKHBhcnNlSW50KGRhdGUuc3Vic3RyKDEyLCAyKSkpO1xuXHQgICAgICAgICAgICAgIGxvZ2RhdGUuc2V0TWlsbGlzZWNvbmRzKDApO1xuXHQgICAgICAgICAgICAgIGxvZ2RhdGVUaW1lID0gbG9nZGF0ZS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgICAgbm93VGltZSA9IG5vdy5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgICAgdmFyIGxpbWl0ID0gbm93VGltZSAtIGxvZ2RhdGVUaW1lO1xuXHQgICAgICAgICAgICAgIHJldHVybiBsaW1pdCA8PSAzNjAwMDAwID8gKF90cmFja2lkVmFsdWUgfHwgbWF0Y2hfdmFsdWVbMV0pIDogZmFsc2U7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgICB2YXIgc2V0VHJhY2tEZWJ1Z0luZm8gPSBmdW5jdGlvbihkZWJ1Z0lkKSB7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX2NwbHVnaW5fdHJhY2tfZGViLnN0YXR1cyA9ICdzdGFydCc7XG5cdCAgICAgICAgdmFyIG9iaiA9IHtcblx0ICAgICAgICAgIGFwbHVzX3RyYWNrX2RlYnVnX2lkOiBkZWJ1Z0lkLFxuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIHEgPSB3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKTtcblx0ICAgICAgICBxLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWV4ZGF0YScsIG9ial1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBxLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCBvYmpdXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGFwbHVzLl9hcGx1c19jcGx1Z2luX3RyYWNrX2RlYi5zdGF0dXMgPSAnY29tcGxldGUnO1xuXHQgICAgICB9O1xuXHQgICAgICBcblx0ICAgICAgdXRpbEV2ZW50Lm9uKHdpbiwgJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBkYXRhID0gZSAmJiBlLmRhdGE7XG5cdCAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5tZXNzYWdlID09PSBcInF0X3ZlcmlmeV9tc2dcIikge1xuXHQgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhcGx1c190cmFja19kZWJ1Z19pZCcsIGRhdGEuZGF0YSk7XG5cdCAgICAgICAgICBzZXRUcmFja0RlYnVnSW5mbyhkYXRhLmRhdGEpO1xuXHQgICAgICAgICAgaWYgKGUuc291cmNlKSB7XG5cdCAgICAgICAgICAgIGUuc291cmNlLnBvc3RNZXNzYWdlKHtcblx0ICAgICAgICAgICAgICBtZXNzYWdlOiAncXRfbXNnX3Nkaydcblx0ICAgICAgICAgICAgfSwgZS5vcmlnaW4pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHZhciBhcGx1c190cmFja19kZWJ1Z19pZCA9IGlzVHJhY2tEZWJ1ZygpO1xuXHQgICAgICBpZiAoYXBsdXNfdHJhY2tfZGVidWdfaWQpIHtcblx0ICAgICAgICBzZXRUcmFja0RlYnVnSW5mbyhhcGx1c190cmFja19kZWJ1Z19pZCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOS6i+S7tuexu+W3peWFt+mbhuWQiFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBwYXNzaXZlU3VwcG9ydGVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciBhcGx1c1RhcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0LyoqXG5cdCAqIHRhcCBtZXRob2RzXG5cdCAqIHRoeCB0byBA54G1546JXG5cdCAqL1xuXHRmdW5jdGlvbiB0YXBFdmVudEJpbmQgKGVsZW1lbnQsIGZuLCBldmVudF90eXBlKSB7XG5cdCAgdmFyIF8kID0gYXBsdXMuXyQgfHwge307XG5cdCAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbyB8fCB7fTtcblx0ICB2YXIgYXBsdXNfY3RhcCA9IG1ldGFfaW5mby5hcGx1c19jdGFwIHx8IHt9O1xuXHQgIHZhciBhcGx1c1RvdWNoID0gbWV0YV9pbmZvWydhcGx1cy10b3VjaCddO1xuXHQgIC8vIOWmguaenOS4muWKoeaWueacieiHquWumuS5ieWunueOsOeahHRhcOS6i+S7tuaPkuS7tu+8jOS8mOWFiOaMieivpeS6i+S7tuaJp+ihjFxuXHQgIGlmIChhcGx1c19jdGFwICYmIHR5cGVvZiBhcGx1c19jdGFwLm9uID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBhcGx1c19jdGFwLm9uKGVsZW1lbnQsIGZuKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGlzVG91Y2ggPSAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBpZiAoaXNUb3VjaCAmJiAoYXBsdXNUb3VjaCA9PT0gJ3RhcCcgfHwgZXZlbnRfdHlwZSA9PT0gJ3RhcFNwbScgfHwgZXZlbnRfdHlwZSA9PT0gJ3RhcCcpKSB7XG5cdCAgICAgIGFwbHVzVGFwLm9uKGVsZW1lbnQsIGZuKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9uKGVsZW1lbnQsIGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgZm4pO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGRvU2Nyb2xsQ2hlY2sgKGNiKSB7XG5cdCAgdHJ5IHtcblx0ICAgIC8vIElmIElFIGlzIHVzZWQsIHVzZSB0aGUgdHJpY2sgYnkgRGllZ28gUGVyaW5pXG5cdCAgICAvLyBodHRwOi8vamF2YXNjcmlwdC5ud2JveC5jb20vSUVDb250ZW50TG9hZGVkL1xuXHQgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKCdsZWZ0Jyk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICBkb1Njcm9sbENoZWNrKGNiKTtcblx0ICAgIH0sIDEpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICAvLyBhbmQgZXhlY3V0ZSBhbnkgd2FpdGluZyBmdW5jdGlvbnNcblx0ICBjYigpO1xuXHR9O1xuXHRcblx0Ly8gdGhhbmtzIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvMS4xMi40L3NyYy9jb3JlL3JlYWR5LmpzXG5cdGZ1bmN0aW9uIERPTVJlYWR5IChjYWxsYmFjaykge1xuXHQgIHZhciBpID0gMDtcblx0ICB2YXIgY2IgPSBmdW5jdGlvbigpIHtcblx0ICAgIGlmIChpID09PSAwKSB7XG5cdCAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICB9XG5cdCAgICBpKys7XG5cdCAgfTtcblx0ICAvLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvYykucmVhZHkoKSBpcyBjYWxsZWQgYWZ0ZXIgdGhlXG5cdCAgLy8gYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cblx0ICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuXHQgICAgLy8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdCAgICBjYigpO1xuXHQgIH1cblx0ICB2YXIgbG9hZGVkO1xuXHQgIC8vIE1vemlsbGEsIE9wZXJhIGFuZCB3ZWJraXQgbmlnaHRsaWVzIGN1cnJlbnRseSBzdXBwb3J0IHRoaXMgZXZlbnRcblx0ICBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHQgICAgLy8gVXNlIHRoZSBoYW5keSBldmVudCBjYlxuXHQgICAgbG9hZGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBsb2FkZWQsIGZhbHNlKTtcblx0ICAgICAgY2IoKTtcblx0ICAgIH07XG5cdCAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbG9hZGVkLCBmYWxzZSk7XG5cdFxuXHQgICAgLy8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0ICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2IsIGZhbHNlKTtcblx0XG5cdCAgICAvLyBJZiBJRSBldmVudCBtb2RlbCBpcyB1c2VkXG5cdCAgfSBlbHNlIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCkge1xuXHQgICAgbG9hZGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIC8vIE1ha2Ugc3VyZSBib2R5IGV4aXN0cywgYXQgbGVhc3QsIGluIGNhc2UgSUUgZ2V0cyBhIGxpdHRsZSBvdmVyemVhbG91cyAodGlja2V0ICM1NDQzKS5cblx0ICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcblx0ICAgICAgICBkb2N1bWVudC5kZXRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgbG9hZGVkKTtcblx0ICAgICAgICBjYigpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgLy8gZW5zdXJlIGZpcmluZyBiZWZvcmUgb25sb2FkLFxuXHQgICAgLy8gbWF5YmUgbGF0ZSBidXQgc2FmZSBhbHNvIGZvciBpZnJhbWVzXG5cdCAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgbG9hZGVkKTtcblx0XG5cdCAgICAvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHQgICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbmxvYWQnLCBjYik7XG5cdFxuXHQgICAgLy8gSWYgSUUgYW5kIG5vdCBhIGZyYW1lXG5cdCAgICAvLyBjb250aW51YWxseSBjaGVjayB0byBzZWUgaWYgdGhlIGRvYyBpcyByZWFkeVxuXHQgICAgdmFyIHRvcGxldmVsID0gZmFsc2U7XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgdG9wbGV2ZWwgPSB3aW5kb3cuZnJhbWVFbGVtZW50ID09PSBudWxsO1xuXHQgICAgfSBjYXRjaChlKSB7fVxuXHRcblx0ICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwgJiYgdG9wbGV2ZWwpIHtcblx0ICAgICAgZG9TY3JvbGxDaGVjayhjYik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyDnm7TmjqXnlKjljp/nlJ/nmoRET01yZWFkee+8jOS4jeWOu+S+nei1luWklumDqOeahGpxdWVyee+8jGtpc3N5IEDosIvlo6sgaW4gMjAxNi0xMi0yN1xuXHRleHBvcnRzLkRPTVJlYWR5ID0gRE9NUmVhZHk7XG5cdFxuXHRmdW5jdGlvbiBvbmxvYWQgKGNhbGxiYWNrKSB7XG5cdCAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcblx0ICAgIGNhbGxiYWNrKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9uKHdpbmRvdywgJ2xvYWQnLCBjYWxsYmFjayk7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLm9ubG9hZCA9IG9ubG9hZDtcblx0XG5cdGZ1bmN0aW9uIGhpc3RvcnlXcmFwKHR5cGUpIHtcblx0ICB2YXIgb3JpID0gaGlzdG9yeVt0eXBlXTtcblx0ICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgZTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGUgPSBuZXcgRXZlbnQodHlwZSk7XG5cdCAgICAgIGUuYXJndW1lbnRzID0gYXJndW1lbnRzO1xuXHQgICAgfSBjYXRjaChlcnIpeyAgICAgIFxuXHQgICAgICBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG5cdCAgICAgIGUuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpO1xuXHQgICAgfVxuXHQgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZSk7XG5cdCAgICAvL+azqOaEj+S6i+S7tuebkeWQrOWcqHVybOWPmOabtOaWueazleiwg+eUqOS5i+WJjSDkuZ/lsLHmmK/lnKjkuovku7bnm5HlkKznmoTlm57osIPlh73mlbDkuK3ojrflj5bnmoTpobXpnaLpk77mjqXkuLrot7PovazliY3nmoTpk77mjqVcblx0ICAgIHZhciBydyA9IG9yaS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgcmV0dXJuIHJ3OyBcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICog57uR5a6a5LqL5Lu2XG5cdCAqIEBwYXJhbSBvYmoge1dpbmRvd3xFbGVtZW50fSBET00g5YWD57SgXG5cdCAqIEBwYXJhbSBldmVudF90eXBlXG5cdCAqIEBwYXJhbSBmXG5cdCAqL1xuXHRmdW5jdGlvbiBvbigpIHtcblx0ICB2YXIgd2luID0gd2luZG93O1xuXHQgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuXHQgICAgaWYgKGFyZ3NbMF0gPT09ICdET01SZWFkeScpIHtcblx0ICAgICAgRE9NUmVhZHkoYXJnc1sxXSk7XG5cdCAgICB9XG5cdCAgICBpZiAoYXJnc1swXSA9PT0gJ29ubG9hZCcpIHtcblx0ICAgICAgb25sb2FkKGFyZ3NbMV0pO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDMpIHtcblx0ICAgIHZhciBvYmogPSBhcmdzWzBdO1xuXHQgICAgdmFyIGV2ZW50X3R5cGUgPSBhcmdzWzFdO1xuXHQgICAgdmFyIGYgPSBhcmdzWzJdO1xuXHQgICAgaWYgKGV2ZW50X3R5cGUgPT09ICd0YXAnIHx8IGV2ZW50X3R5cGUgPT09ICd0YXBTcG0nKSB7XG5cdCAgICAgIHRhcEV2ZW50QmluZChvYmosIGYsIGV2ZW50X3R5cGUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8g5b2T5YmN5rWP6KeI5Zmo5piv5ZCm5Li6IElF77yI5piv5ZCm5pSv5oyBIGRvY3VtZW50LmF0dGFjaEV2ZW5077yJICAgICAgXG5cdCAgICAgIGlmIChbXCJwdXNoU3RhdGVcIiwgXCJyZXBsYWNlU3RhdGVcIl0uaW5kZXhPZihldmVudF90eXBlKSA+IC0xKSB7XG5cdCAgICAgICAgaGlzdG9yeVtldmVudF90eXBlXSA9IGhpc3RvcnlXcmFwKGV2ZW50X3R5cGUpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBvbmV2ZW50ID0gISFkb2N1bWVudC5hdHRhY2hFdmVudCA/ICdhdHRhY2hFdmVudCcgOiAnYWRkRXZlbnRMaXN0ZW5lcic7XG5cdCAgICAgIHZhciBhdHRhID0gISFkb2N1bWVudC5hdHRhY2hFdmVudDtcblx0ICAgICAgb2JqW29uZXZlbnRdKFxuXHQgICAgICAgIChhdHRhID8gJ29uJyA6ICcnKSArIGV2ZW50X3R5cGUsXG5cdCAgICAgICAgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgIGUgPSBlIHx8IHdpbi5ldmVudDtcblx0ICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBmKGUsIGVsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LFxuXHQgICAgICAgIHBhc3NpdmVTdXBwb3J0ZWQoZXZlbnRfdHlwZSkgPyB7IHBhc3NpdmU6IHRydWUgfSA6IGZhbHNlXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLm9uID0gb247XG5cblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDpgJrov4fooqvliqjkuovku7bkvqblkKzlmajmj5DljYfmu5rliqjmgKfog71cblx0ICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3VwZGF0ZXMvMjAxNi8wNi9wYXNzaXZlLWV2ZW50LWxpc3RlbmVycz9obD16aC1jblxuXHQgKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdG9vbHMvbGlnaHRob3VzZS9hdWRpdHMvcGFzc2l2ZS1ldmVudC1saXN0ZW5lcnM/aGw9emgtY25cblx0ICovXG5cdHZhciBzdXBwb3J0ZWQ7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV2ZW50X3R5cGUpIHtcblx0ICBpZiAodHlwZW9mIHN1cHBvcnRlZCA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gc3VwcG9ydGVkO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyDku4V0b3VjaOOAgW1vdXNl44CBc2Nyb2xs44CBd2hlZWznm7jlhbPnmoTkuovku7bpnIDopoHlsJ3or5XlvIDlkK8ncGFzc2l2ZSdcblx0ICAgIGlmICghL3RvdWNofG1vdXNlfHNjcm9sbHx3aGVlbC9pLnRlc3QoZXZlbnRfdHlwZSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgc3VwcG9ydGVkID0gZmFsc2U7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIHN1cHBvcnRlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRpb25zKTtcblx0ICAgIH0gY2F0Y2goZXJyKSB7fVxuXHQgICAgcmV0dXJuIHN1cHBvcnRlZDtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiB0YXBcblx0ICogdGhhbmtzIEDomY7niZlcblx0ICogaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2FwbHVzX3BsdWdpbl9hbGl0cmlwL3RyZWUvbWFzdGVyL3NyYy9saWJfdGFwXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6JmO54mZIDxodXlhLm56YkBhbGliYWJhLWluYy5jb20+XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuXHRcblx0Ly8gdmFyIGRvYyA9IHdpbmRvdy5kb2N1bWVudDtcblx0Ly8gdmFyIGRvY0VsID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0dmFyIGdlc3R1cmVzID0ge307XG5cdHZhciBUT1VDSF9TVEFSVCA9ICd0b3VjaHN0YXJ0Jztcblx0dmFyIFRPVUNIX0VORCA9ICd0b3VjaGVuZCc7XG5cdHZhciBUT1VSQ0hfTU9WRSA9ICd0b3VjaG1vdmUnO1xuXHR2YXIgVEFQUElORyA9ICd0YXBwaW5nJztcblx0dmFyIFRPVUNIX0NBTkNFTCA9ICd0b3VjaGNhbmNlbCc7XG5cdFxuXHRmdW5jdGlvbiBnZXRSYW5kb20obWluLCBtYXgpIHtcblx0ICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcblx0fTtcblx0dmFyIEFQTFVTX1RBUCA9ICdhcGx1c190YXAnICsgZ2V0UmFuZG9tKDEsIDEwMDAwMCk7XG5cdFxuXHRmdW5jdGlvbiBmaXJlRXZlbnQoZWxlbWVudCwgdHlwZSwgZXh0cmEpIHtcblx0ICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuXHQgIGV2ZW50LmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcblx0XG5cdCAgaWYgKHR5cGVvZiBleHRyYSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gZXh0cmEpIHtcblx0ICAgICAgZXZlbnRbcF0gPSBleHRyYVtwXTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvdWNoc3RhcnRIYW5kbGVyKGV2ZW50KSB7XG5cdCAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHQgIGlmIChPYmplY3Qua2V5cyhnZXN0dXJlcykubGVuZ3RoID09PSAwKSB7XG5cdCAgICBkb2NFbC5hZGRFdmVudExpc3RlbmVyKFRPVVJDSF9NT1ZFLCB0b3VjaG1vdmVIYW5kbGVyLCBmYWxzZSk7XG5cdCAgICBkb2NFbC5hZGRFdmVudExpc3RlbmVyKFRPVUNIX0VORCwgdG91Y2hlbmRIYW5kbGVyLCBmYWxzZSk7XG5cdCAgICBkb2NFbC5hZGRFdmVudExpc3RlbmVyKFRPVUNIX0NBTkNFTCwgdG91Y2hlbmRIYW5kbGVyLCBmYWxzZSk7XG5cdCAgfVxuXHRcblx0ICAvLyByZWNvcmQgZXZlcnkgdG91Y2hcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcblx0ICAgIHZhciB0b3VjaFJlY29yZCA9IHt9O1xuXHRcblx0ICAgIGZvciAodmFyIHAgaW4gdG91Y2gpIHtcblx0ICAgICAgdG91Y2hSZWNvcmRbcF0gPSB0b3VjaFtwXTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZ2VzdHVyZSA9IHtcblx0ICAgICAgc3RhcnRUb3VjaDogdG91Y2hSZWNvcmQsXG5cdCAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcblx0ICAgICAgc3RhdHVzOiBUQVBQSU5HLFxuXHQgICAgICBlbGVtZW50OiBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50LnRhcmdldFxuXHQgICAgfTtcblx0ICAgIGdlc3R1cmVzW3RvdWNoLmlkZW50aWZpZXJdID0gZ2VzdHVyZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvdWNobW92ZUhhbmRsZXIoZXZlbnQpIHtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcblx0ICAgIHZhciBnZXN0dXJlID0gZ2VzdHVyZXNbdG91Y2guaWRlbnRpZmllcl07XG5cdFxuXHQgICAgaWYgKCFnZXN0dXJlKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGlzcGxhY2VtZW50WCA9IHRvdWNoLmNsaWVudFggLSBnZXN0dXJlLnN0YXJ0VG91Y2guY2xpZW50WDtcblx0ICAgIHZhciBkaXNwbGFjZW1lbnRZID0gdG91Y2guY2xpZW50WSAtIGdlc3R1cmUuc3RhcnRUb3VjaC5jbGllbnRZO1xuXHQgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KGRpc3BsYWNlbWVudFgsIDIpICsgTWF0aC5wb3coZGlzcGxhY2VtZW50WSwgMikpO1xuXHRcblx0ICAgIC8vIG1hZ2ljIG51bWJlciAxMDogbW92aW5nIDEwcHggbWVhbnMgcGFuLCBub3QgdGFwXG5cdCAgICBpZiAoKGdlc3R1cmUuc3RhdHVzID09PSBUQVBQSU5HIHx8IGdlc3R1cmUuc3RhdHVzID09PSAncHJlc3NpbmcnKSAmJiBkaXN0YW5jZSA+IDEwKSB7XG5cdCAgICAgIGdlc3R1cmUuc3RhdHVzID0gJ3Bhbm5pbmcnO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdG91Y2hlbmRIYW5kbGVyKGV2ZW50KSB7XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xuXHQgICAgdmFyIGlkID0gdG91Y2guaWRlbnRpZmllcjtcblx0ICAgIHZhciBnZXN0dXJlID0gZ2VzdHVyZXNbaWRdO1xuXHRcblx0ICAgIGlmICghZ2VzdHVyZSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZ2VzdHVyZS5zdGF0dXMgPT09IFRBUFBJTkcgJiYgZXZlbnQudHlwZSA9PT0gVE9VQ0hfRU5EKSB7XG5cdCAgICAgIGdlc3R1cmUudGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblx0ICAgICAgLy8gZmlyZSBjbGljaywgbm90IHRhcC5cblx0ICAgICAgZmlyZUV2ZW50KGdlc3R1cmUuZWxlbWVudCwgQVBMVVNfVEFQLCB7XG5cdCAgICAgICAgdG91Y2g6IHRvdWNoLFxuXHQgICAgICAgIHRvdWNoRXZlbnQ6IGV2ZW50XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGRlbGV0ZSBnZXN0dXJlc1tpZF07XG5cdCAgfVxuXHRcblx0ICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgaWYgKE9iamVjdC5rZXlzKGdlc3R1cmVzKS5sZW5ndGggPT09IDApIHtcblx0ICAgIGRvY0VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoVE9VUkNIX01PVkUsIHRvdWNobW92ZUhhbmRsZXIsIGZhbHNlKTtcblx0ICAgIGRvY0VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoVE9VQ0hfRU5ELCB0b3VjaGVuZEhhbmRsZXIsIGZhbHNlKTtcblx0ICAgIGRvY0VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoVE9VQ0hfQ0FOQ0VMLCB0b3VjaGVuZEhhbmRsZXIsIGZhbHNlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZpeElPU1RvdWNoQnVnKGVsZW1lbnQpIHtcblx0ICBpZiAoIWVsZW1lbnQuX19maXhUb3VjaEV2ZW50KSB7XG5cdCAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uICgpIHtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGVsZW1lbnQuX19maXhUb3VjaEV2ZW50ID0gdHJ1ZTtcblx0ICB9XG5cdH1cblx0ZnVuY3Rpb24gaW5pdCAoKSB7XG5cdCAgaWYgKCFpc0luaXRpYWxpemVkKSB7XG5cdCAgICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgICBkb2NFbC5hZGRFdmVudExpc3RlbmVyKFRPVUNIX1NUQVJULCB0b3VjaHN0YXJ0SGFuZGxlciwgZmFsc2UpO1xuXHQgICAgaXNJbml0aWFsaXplZCA9IHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBvbjogZnVuY3Rpb24oZWxlbWVudCwgY2FsbGJhY2spIHtcblx0ICAgIGluaXQoKTtcblx0ICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiBjYWxsYmFjaykge1xuXHQgICAgICBmaXhJT1NUb3VjaEJ1ZyhlbGVtZW50KTtcblx0ICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEFQTFVTX1RBUCwgKGNhbGxiYWNrLl9hcGx1c190YXBfY2FsbGJhY2sgPSBmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgY2FsbGJhY2soZSwgZS50YXJnZXQpO1xuXHQgICAgICB9KSwgZmFsc2UpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgdW46IGZ1bmN0aW9uKGVsZW1lbnQsIGNhbGxiYWNrKSB7XG5cdCAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgY2FsbGJhY2sgJiYgY2FsbGJhY2suX2FwbHVzX3RhcF9jYWxsYmFjaykge1xuXHQgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoQVBMVVNfVEFQLCBjYWxsYmFjay5fYXBsdXNfdGFwX2NhbGxiYWNrLCBmYWxzZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICog562J5b6FYm9keSByZWFkeVxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uIChzdGF0ZSwgY2IpIHtcblx0ICAgICAgdmFyIGhhbmRsZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuXHQgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpLmxlbmd0aCkge1xuXHQgICAgICAgICAgY2xlYXJJbnRlcnZhbChoYW5kbGVyKTtcblx0ICAgICAgICAgIGhhbmRsZXIgPSBudWxsO1xuXHQgICAgICAgICAgY2IoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIDUwKTtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGhhbmRsZXIpIHtcblx0ICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAxMDAwKTtcblx0ICAgICAgcmV0dXJuIDEwMDA7XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHR2YXIgUHViU3ViV2ViID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46ICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICAvLyDkv53or4Hlj6rkvJrmnInkuIDkuKpwdWJzdWLov5DooYxcblx0ICAgICAgaWYgKGFwbHVzLmFwbHVzX3B1YnN1Yikge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICAvLyBhcGx1cy5hcGx1c19wdWJzdWLmmK/kuIDkuKrnm5HlkKzogIXvvIzlnKjmj5Lku7bljJblhoXpg6jkvJrnlKjliLDku5bvvIzmnInmlbDmja7lj5jljJblsIbkvJrlj5HlsITnm7jlupTnmoRkYXRhY2hhbmdl5LqL5Lu2XG5cdCAgICAgIGFwbHVzLmFwbHVzX3B1YnN1YiA9IFB1YlN1YldlYi5jcmVhdGUoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgUHViU3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFB1YlN1Yi5leHRlbmQoe1xuXHQgIC8qKlxuXHQgICAqIOiuoumYheWIsOS4gOasoeWbnuiwg+WQjuWPlua2iOiuoumYhVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4Rcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuXHQgICAqIEByZXR1cm4gY29udGV4dFxuXHQgICAqL1xuXHQgIHN1YnNjcmliZU9uY2U6IGZ1bmN0aW9uKGVUeXBlLCBoKSB7XG5cdCAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcblx0ICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cdFxuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIHZhciBvbmNlO1xuXHQgICAgdGhpcy5zdWJzY3JpYmUuY2FsbCh0aGlzLCBlVHlwZSwgb25jZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBfc2VsZi51bnN1YnNjcmliZS5jYWxsKF9zZWxmLCBlVHlwZSwgb25jZSk7XG5cdCAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0ICAgICAgaC5hcHBseShfc2VsZiwgYXJncyk7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0fSk7XG5cblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy9zcmMvbGliX3UvY29yZS9QdWJTdWIuanNcblx0ICog5raI5oGv6K6i6ZiF5qih5Z6LXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBnZXRBcmdzID0gZnVuY3Rpb24oYXJncykge1xuXHQgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcblx0ICB2YXIgX2FyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG5cdCAgZm9yICh2YXIgaiA9IDE7IGogPCBsZW47IGorKykge1xuXHQgICAgX2FyZ3NbaiAtIDFdID0gYXJnc1tqXTtcblx0ICB9XG5cdCAgcmV0dXJuIF9hcmdzO1xuXHR9O1xuXHRcblx0dmFyIFB1YlN1YiA9IEJhc2UuZXh0ZW5kKHtcblx0ICAvKipcblx0ICAgKiDlr7lmbui/m+ihjOaWreiogO+8jOS4jeaYr+KAmGZ1bmN0aW9u4oCZ57G75Z6L5oql6ZSZ77yM5ZCm5YiZ6L+U5ZueZm5cblx0ICAgKi9cblx0ICBjYWxsYWJsZTogZnVuY3Rpb24gKGZuKSB7XG5cdCAgICBpZiAoIWlzRnVuY3Rpb24oZm4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuXHQgICAgcmV0dXJuIGZuO1xuXHQgIH0sXG5cdFxuXHQgIGNyZWF0ZTogZnVuY3Rpb24gKHByb3BzKSB7XG5cdCAgICB2YXIgaW5zdGFuY2UgPSBuZXcgdGhpcygpO1xuXHQgICAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG5cdCAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG5cdCAgICAgIGluc3RhbmNlW25hbWVdID0gcHJvcHNbbmFtZV07XG5cdCAgICB9XG5cdFxuXHQgICAgaW5zdGFuY2UuaGFuZGxlcnMgPSBbXTtcblx0ICAgIGluc3RhbmNlLnB1YnMgPSB7fTtcblx0ICAgIHJldHVybiBpbnN0YW5jZTtcblx0ICB9LFxuXHRcblx0ICBzZXRIYW5kbGVyczogZnVuY3Rpb24oaGFuZGxlcnMpIHtcblx0ICAgIHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVycztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDorqLpmIXlj6Xmn4TkuLrigJxlVHlwZeKAneeahOa2iOaBr++8jOW9k+aciea2iOaBr+i/h+adpeaJp+ihjOWbnuiwg+WHveaVsO+8muKAnGjigJ1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg6K6i6ZiF55qE5raI5oGv5Y+l5p+EXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcblx0ICAgKiBAcmV0dXJuIGNvbnRleHRcblx0ICAgKi9cblx0ICBzdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKXtcblx0ICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuXHQgICAgdGhpcy5jYWxsYWJsZShoKTtcblx0XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHB1YnMgPSBfc2VsZi5wdWJzIHx8IHt9O1xuXHQgICAgdmFyIGhhbmRsZXJzID0gX3NlbGYuaGFuZGxlcnMgfHwgW107XG5cdCAgICBpZighKGVUeXBlIGluIGhhbmRsZXJzKSkge1xuXHQgICAgICBoYW5kbGVyc1tlVHlwZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIGhhbmRsZXJzW2VUeXBlXS5wdXNoKGgpO1xuXHQgICAgX3NlbGYuc2V0SGFuZGxlcnMoaGFuZGxlcnMpO1xuXHQgICAgdmFyIGFyciA9IHB1YnNbZVR5cGVdIHx8IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIF9hcmdzID0gYXJyW2ldKCk7XG5cdCAgICAgIGguYXBwbHkoX3NlbGYsIF9hcmdzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfc2VsZjtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlj5bmtojorqLpmIXvvIzlsIbkvJrlj5bmtojigJxlVHlwZeKAneWPpeafhOWvueW6lOeahOKAnGjigJ3lm57osIPlh73mlbDkuIvnmoTmiYDmnInorqLpmIVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg6K6i6ZiF55qE5raI5oGv5Y+l5p+EXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcblx0ICAgKiBAcmV0dXJuIGNvbnRleHRcblx0ICAgKi9cblx0ICB1bnN1YnNjcmliZTogZnVuY3Rpb24oZVR5cGUsIGgpIHtcblx0ICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuXHQgICAgdGhpcy5jYWxsYWJsZShoKTtcblx0XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcyA9IHRoaXMuaGFuZGxlcnNbZVR5cGVdO1xuXHQgICAgICBpZiAoIXMpIHJldHVybiB0aGlzO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBzID09PSAnb2JqZWN0JyAmJiBzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgaWYgKGggPT09IHNbaV0pIHtcblx0ICAgICAgICAgICAgcy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgKiDliY3pnaLmtojmga/orqLpmIXmnKrlgZrpkojlr7nlkIzkuIDkuKrmtojmga/lkIzkuIDkuKrmtojmga/lm57osIPnmoTmg4XlhrXlgZrlpITnkIbvvIzov5nph4zms6jplIDorqLpmIXml7bkuI7lhbbkv53mjIHkuIDoh7TvvIzkuI3lgZrorqLpmIUt5Y+W5raI6K6i6ZiF5LiA5LiA5a+55bqU77yM5ZCO57ut5pyJ6ZyA5rGC5YaN5aSE55CGXG5cdCAgICAgICAgICAgICAqL1xuXHQgICAgICAgICAgICAvLyBicmVhaztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5oYW5kbGVyc1tlVHlwZV0gPSBzO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGRlbGV0ZSB0aGlzLmhhbmRsZXJzW2VUeXBlXTtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOa2iOaBr+WIhuWPke+8jOWwhuS8muWIhuWPkeWIsOaJgOacieiuoumYhWVUeXBl5Y+l5p+E55qE6K6i6ZiF6ICFXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOWIhuWPkea2iOaBr+WPpeafhFxuXHQgICAqL1xuXHQgIHB1Ymxpc2g6IGZ1bmN0aW9uIChlVHlwZSkge1xuXHRcblx0ICAgIHZhciBhcmdzID0gZ2V0QXJncyhhcmd1bWVudHMpO1xuXHQgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycyB8fCBbXTtcblx0XG5cdCAgICB2YXIgc2l6ZSA9IGhhbmRsZXJzW2VUeXBlXSA/IGhhbmRsZXJzW2VUeXBlXS5sZW5ndGggOiAwO1xuXHQgICAgaWYgKHNpemUgPiAwKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGZuID0gaGFuZGxlcnNbZVR5cGVdW2ldO1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuXHQgICAgICAgICAgZm4uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0XG5cdCAgY2FjaGVQdWJzOiBmdW5jdGlvbiAoZVR5cGUpIHtcblx0ICAgIHZhciBwdWJzID0gdGhpcy5wdWJzIHx8IHt9O1xuXHQgICAgdmFyIGFyZ3MgPSBnZXRBcmdzKGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoIXB1YnNbZVR5cGVdKSB7XG5cdCAgICAgIHB1YnNbZVR5cGVdID0gW107XG5cdCAgICB9XG5cdCAgICBwdWJzW2VUeXBlXS5wdXNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmV0dXJuIGFyZ3M7XG5cdCAgICB9KTtcblx0ICB9XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBQdWJTdWI7XG5cblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBvID09PSAnZnVuY3Rpb24nO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL0Jhc2UuanNcblx0ICog5Z+657G777yM5o+Q5L6b57G75omA6ZyA6KaB55qE5Z+656GA5bGe5oCnXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdC8vIOWfuuexu1xuXHRmdW5jdGlvbiBCYXNlKCkge31cblx0XG5cdC8vIOWwhmV4dGVuZOWSjGNyZWF0Zee9ruS6jnByb3RvdHlwZeWvueixoeS4re+8jOS7peS+v+WtkOexu+e7p+aJv1xuXHRCYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbigpIHt9O1xuXHRCYXNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcblx0Ly8g5Li65LqG6IO95Zyo5Z+657G75LiK55u05o6l5LulLmV4dGVuZOeahOaWueW8j+i/m+ihjOiwg+eUqFxuXHRCYXNlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgcmV0dXJuIHRoaXMucHJvdG90eXBlLmV4dGVuZC5jYWxsKHRoaXMsIHByb3BzKTtcblx0fTtcblx0XG5cdEJhc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgLyoqXG5cdCAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG5cdCAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG5cdCAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuXHQgICAqL1xuXHQgIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG5cdCAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG5cdCAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuXHQgICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICB9XG5cdCAgcmV0dXJuIGluc3RhbmNlO1xuXHR9O1xuXHRcblx0QmFzZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24ocHJvcHMpIHtcblx0ICAvLyDmtL7nlJ/lh7rmnaXnmoTmlrDnmoTlrZDnsbtcblx0ICB2YXIgU3ViQmFzZSA9IGZ1bmN0aW9uKCkge307XG5cdCAgdHJ5IHtcblx0ICAgIC8qKlxuXHQgICAgICog57un5om/54i257G755qE5bGe5oCn5ZKM5pa55rOV77yMXG5cdCAgICAgKiDlvZPnhLbliY3mj5DmmK/niLbnsbvnmoTlsZ7mgKfpg73mlL7lnKhwcm90b3R5cGXkuK1cblx0ICAgICAqIOiAjOmdnuS4iumdomNyZWF0ZeaWueazleeahOKAnOWunuS+i+WxnuaAp+KAneS4rVxuXHQgICAgICovXG5cdCAgICBpZiAoIWlzRnVuY3Rpb24oT2JqZWN0LmNyZWF0ZSkpIHtcblx0ICAgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgZnVuY3Rpb24gRigpIHt9XG5cdCAgICAgICAgRi5wcm90b3R5cGUgPSBvO1xuXHQgICAgICAgIHJldHVybiBuZXcgRigpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgICAgU3ViQmFzZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHRoaXMucHJvdG90eXBlKTtcblx0XG5cdCAgICAvLyDlubbkuJTmt7vliqDoh6rlt7HnmoTmlrnms5XlkozlsZ7mgKdcblx0ICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgICAgU3ViQmFzZS5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICAgIH1cblx0ICAgIFN1YkJhc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViQmFzZTtcblx0XG5cdCAgICAvLyDpnIDopoHku6UuZXh0ZW5k55qE5pa55byP5ZKMLmNyZWF0ZeeahOaWueW8j+iwg+eUqO+8mlxuXHQgICAgU3ViQmFzZS5leHRlbmQgPSBTdWJCYXNlLnByb3RvdHlwZS5leHRlbmQ7XG5cdCAgICBTdWJCYXNlLmNyZWF0ZSA9IFN1YkJhc2UucHJvdG90eXBlLmNyZWF0ZTtcblx0ICB9IGNhdGNoKGVycikge1xuXHQgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlcnIpO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gU3ViQmFzZTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEJhc2U7XG5cblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5a6i5oi356uv5L6m5rWL6ISa5pysXG5cdCAqICBAcmVmOiBodHRwczovL2dpdGh1Yi5jb20va2lzc3l0ZWFtL2tpc3N5L2Jsb2IvMS40Lngvc3JjL3NlZWQvc3JjL3VhLmpzXG5cdCAqICAgICAgICBodHRwczovL2dpdGh1Yi5jb20veXV5dTE5MTEvTWFnbmV0by9ibG9iL21hc3Rlci9zcmMvcGx1Z2lucy9jbGllbnQvdWEuanNcblx0ICogICAgICAgIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL3RiL2FwL2Jsb2IvbWFzdGVyL2J1aWxkLzEuMC9wb2MvbS9vcy5qc1xuXHQgKiAgICAgICAgaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vdGIvYXAvYmxvYi9tYXN0ZXIvYnVpbGQvMS4wL20vbS91YS5qc1xuXHQgKiAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkY29tZS9qcXVlcnkudWEvYmxvYi9tYXN0ZXIvanF1ZXJ5LnVhLmpzXG5cdCAqXG5cdCAqIOaUr+aMgeeahOWbveS6p+a1j+iniOWZqO+8mlxuXHQgKiAzNjBzZSAgICAgICAg5p6B6YCf5qih5byPXG5cdCAqIDM2MGVlICAgICAgICDmnoHpgJ/mqKHlvI9cblx0ICog54yO6LG5ICAgICAgICAgIOWPjOaooeW8j1xuXHQgKiBRUSAgICAgICAgICAg5Y+M5qih5byPXG5cdCAqIOWCsua4uFxuXHQgKiDmt5jlrp0gICAgICAgICAg5p6B6YCf5qih5byPXG5cdCAqXG5cdCAqICog55uu5YmNMzYwZWXnmoTmtYvor5XmmK/mvI/psbzms5XvvIzlpoLmnpzlhbbku5bljLnphY3kuI3kuIrlsLHmmK/lroPvvIzlm6DmraTkvJror6/liKRcblx0ICpcblx0ICog546w5Zyo6L+Y5LiN6IO95qOA5rWL55qE5rWP6KeI5Zmo77yaXG5cdCAqIDM2MHNlICAgICAgICAgICAg5YW85a655qih5byPXG5cdCAqIDM2MGVlICAgICAgICAgICAg5YW85a655qih5byPXG5cdCAqIOa3mOWunea1j+iniOWZqCAgICAgICAgIOWFvOWuueaooeW8j1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgZ29uZ2hhby5naFxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9ICh3aW5kb3cuYXBsdXMgfHwgKHdpbmRvdy5hcGx1cyA9IHt9KSk7XG5cdCAgICAgIGFwbHVzLl9hcGx1c19jbGllbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSgpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5a6i5oi356uv5L6m5rWL6ISa5pysXG5cdCAqICBAcmVmOiBodHRwczovL2dpdGh1Yi5jb20va2lzc3l0ZWFtL2tpc3N5L2Jsb2IvMS40Lngvc3JjL3NlZWQvc3JjL3VhLmpzXG5cdCAqICAgICAgICBodHRwczovL2dpdGh1Yi5jb20veXV5dTE5MTEvTWFnbmV0by9ibG9iL21hc3Rlci9zcmMvcGx1Z2lucy9jbGllbnQvdWEuanNcblx0ICogICAgICAgIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL3RiL2FwL2Jsb2IvbWFzdGVyL2J1aWxkLzEuMC9wb2MvbS9vcy5qc1xuXHQgKiAgICAgICAgaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vdGIvYXAvYmxvYi9tYXN0ZXIvYnVpbGQvMS4wL20vbS91YS5qc1xuXHQgKiAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkY29tZS9qcXVlcnkudWEvYmxvYi9tYXN0ZXIvanF1ZXJ5LnVhLmpzXG5cdCAqXG5cdCAqIOaUr+aMgeeahOWbveS6p+a1j+iniOWZqO+8mlxuXHQgKiAzNjBzZSAgICAgICAg5p6B6YCf5qih5byPXG5cdCAqIDM2MGVlICAgICAgICDmnoHpgJ/mqKHlvI9cblx0ICog54yO6LG5ICAgICAgICAgIOWPjOaooeW8j1xuXHQgKiBRUSAgICAgICAgICAg5Y+M5qih5byPXG5cdCAqIOWCsua4uFxuXHQgKiDmt5jlrp0gICAgICAgICAg5p6B6YCf5qih5byPXG5cdCAqXG5cdCAqICog55uu5YmNMzYwZWXnmoTmtYvor5XmmK/mvI/psbzms5XvvIzlpoLmnpzlhbbku5bljLnphY3kuI3kuIrlsLHmmK/lroPvvIzlm6DmraTkvJror6/liKRcblx0ICpcblx0ICog546w5Zyo6L+Y5LiN6IO95qOA5rWL55qE5rWP6KeI5Zmo77yaXG5cdCAqIDM2MHNlICAgICAgICAgICAg5YW85a655qih5byPXG5cdCAqIDM2MGVlICAgICAgICAgICAg5YW85a655qih5byPXG5cdCAqIOa3mOWunea1j+iniOWZqCAgICAgICAgIOWFvOWuueaooeW8j1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgZ29uZ2hhby5naFxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBnZXRPbGRGYXNoaW9uT3NJbmZvKHVhKSB7XG5cdCAgdmFyIHRva2VuID0gW1xuXHQgICAgWydXaW5kb3dzIE5UIDUuMScsICd3aW5YUCddLFxuXHQgICAgWydXaW5kb3dzIE5UIDYuMScsICd3aW43J10sXG5cdCAgICBbJ1dpbmRvd3MgTlQgNi4wJywgJ3dpblZpc3RhJ10sXG5cdCAgICBbJ1dpbmRvd3MgTlQgNi4yJywgJ3dpbjgnXSxcblx0ICAgIFsnV2luZG93cyBOVCA2LjMnLCAnd2luOC4xJ10sXG5cdCAgICBbJ1dpbmRvd3MgTlQgMTAuMCcsICd3aW4xMCddLFxuXHQgICAgWydVYnVudHUnLCAndWJ1bnR1J10sXG5cdCAgICBbJ0xpbnV4JywgJ2xpbnV4J10sXG5cdCAgICBbJ1dpbmRvd3MgTlQgNS4yJywgJ3dpbjIwMDMnXSxcblx0ICAgIFsnV2luZG93cyBOVCA1LjAnLCAnd2luMjAwMCddLFxuXHQgICAgWydXaW5kb3dzJywgJ3dpbk90aGVyJ10sXG5cdCAgICBbJ3JoaW5vJywgJ3JoaW5vJ11cblx0ICBdO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b2tlbi5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuXHQgICAgdmFyIHRva2VuMCA9IHRva2VuW2ldWzBdO1xuXHQgICAgaWYgKHVhLmluZGV4T2YodG9rZW4wKSAhPT0gLTEpIHtcblx0ICAgICAgdmFyIG9zID0gdG9rZW4wLnNwbGl0KCcgJylbMF07XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgZGV2aWNlX21vZGVsOiBvcyxcblx0ICAgICAgICBvczogb3MsXG5cdCAgICAgICAgb3NfdmVyc2lvbjogdG9rZW5baV1bMV1cblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIE9USEVSID0gJ290aGVyJztcblx0ICByZXR1cm4ge1xuXHQgICAgZGV2aWNlX21vZGVsOiBPVEhFUixcblx0ICAgIG9zOiBPVEhFUixcblx0ICAgIG9zX3ZlcnNpb246IE9USEVSXG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0TW9kZXJuT1NJbmZvICh1YSwgZGV2aWNlX21vZGVsKSB7XG5cdCAgLyoqXG5cdCAgICogaVBhZDsgQ1BVIE9TIDExXzAgbGlrZSBNYWMgT1MgWFxuXHQgICAqIGlQaG9uZTsgQ1BVIGlQaG9uZSBPUyAxMV8wIGxpa2UgTWFjIE9TIFhcblx0ICAgKiBNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzE0XzRcblx0ICAgKiBMaW51eDsgQW5kcm9pZCA1LjA7IFNNLUc5MDBQIEJ1aWxkL0xSWDIxVFxuXHQgICAqL1xuXHQgIHZhciBvc0luZm8gPSB1YS5zdWJzdHJpbmcodWEuaW5kZXhPZignKCcpICsgMSwgdWEuaW5kZXhPZignKScpKTtcblx0ICB2YXIgcnMgPSB7XG5cdCAgICBkZXZpY2VfbW9kZWw6IGRldmljZV9tb2RlbCxcblx0ICB9O1xuXHQgIHZhciBkID0gZGV2aWNlX21vZGVsLnRvTG93ZXJDYXNlKCk7XG5cdCAgc3dpdGNoIChkKSB7XG5cdCAgY2FzZSAnaXBhZCc6XG5cdCAgY2FzZSAnaXBob25lJzpcblx0ICBjYXNlICdpcG9kJzpcblx0ICBjYXNlICdtYWNpbnRvc2gnOlxuXHQgICAgaWYgKGQgPT09ICdtYWNpbnRvc2gnKSB7XG5cdCAgICAgIGlmICgvTWFjIE9TIFgvLnRlc3Qob3NJbmZvKSkge1xuXHQgICAgICAgIHJzLm9zID0gJ01hYyBPUyBYJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBycy5vcyA9ICdNYWMgT1MnO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBycy5vcyA9ICdJT1MnO1xuXHQgICAgfVxuXHQgICAgcnMub3NfdmVyc2lvbiA9IG9zSW5mby5tYXRjaCgvWzAtOV8uXSsvKVswXTtcblx0ICAgIGJyZWFrO1xuXHQgIGNhc2UgJ2FuZHJvaWQnOlxuXHQgICAgcnMub3MgPSAnQW5kcm9pZCc7XG5cdCAgICBycy5vc192ZXJzaW9uID0gb3NJbmZvLm1hdGNoKC9bMC05Ll0rLylbMF07XG5cdCAgICBicmVhaztcblx0ICBkZWZhdWx0OlxuXHQgICAgYnJlYWs7XG5cdCAgfVxuXHQgIHJzLm9zX3ZlcnNpb24gPSBycy5vc192ZXJzaW9uLnJlcGxhY2UoL18vZywgJy4nKTtcblx0ICByZXR1cm4gcnM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBVQSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cdCAgdmFyIGluZm8gPSB7fTtcblx0ICB2YXIgbW9kZXJuT1MgPSBVQS5tYXRjaCgvaXBob25lfGlwYWR8YW5kcm9pZHxtYWNpbnRvc2gvaSk7XG5cdCAgdmFyIERhcndpbk9TID0gVUEubWF0Y2goL0Rhcndpbi9pKTtcblx0ICBpZiAobW9kZXJuT1MpIHtcblx0ICAgIGluZm8gPSBnZXRNb2Rlcm5PU0luZm8oVUEsIG1vZGVybk9TWzBdKTtcblx0ICB9IGVsc2UgaWYgKERhcndpbk9TKSB7XG5cdCAgICB2YXIgX29zID0gVUEuc3BsaXQoJyAnKVsyXTtcblx0ICAgIGluZm8gPSB7XG5cdCAgICAgIG9zOiAnRGFyd2luJyxcblx0ICAgICAgb3NfdmVyc2lvbjogX29zLm1hdGNoKC9bMC05Ll0rLylbMF0sXG5cdCAgICAgIGRldmljZV9tb2RlbDogJ0Rhcndpbidcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIGluZm8gPSBnZXRPbGRGYXNoaW9uT3NJbmZvKFVBKTtcblx0ICB9XG5cdCAgdmFyIHNjciA9IHNjcmVlbiB8fCB7fTtcblx0ICBpbmZvLnNjcmVlbldpZHRoID0gc2NyLndpZHRoO1xuXHQgIGluZm8uc2NyZWVuSGVpZ2h0ID0gc2NyLmhlaWdodDtcblx0XG5cdCAgaWYgKG5hdmlnYXRvcikge1xuXHQgICAgaW5mby51c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8ICctJztcblx0ICAgIGluZm8ubGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZSB8fCAnLSc7XG5cdCAgfVxuXHQgIHJldHVybiBpbmZvO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNSkodGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcblx0ICogbWV0YemFjee9ruaPkuS7tu+8jOiiq2FwaeaPkuS7tuS+nei1llxuXHQgKlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gdmFyIGFzc2lnbiA9IHJlcXVpcmUoJ0B1dGlscy9hc3NpZ24nKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0dmFyIHV0aWxOYXRpdmU0QXBsdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0dmFyIHV0aWxOYW1lU3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHR2YXIgbWV0YUluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0XG5cdGZ1bmN0aW9uIGdldENkblBhdGggKCkge1xuXHQgIHZhciBkb2MgPSBkb2N1bWVudDtcblx0ICB2YXIgcGF0aCA9ICcvL2cuYWxpY2RuLmNvbSc7XG5cdCAgaWYgKGRvYykge1xuXHQgICAgdmFyIGN1cnJlbnRfbm9kZSA9IGRvYy5nZXRFbGVtZW50QnlJZCgnYmVhY29uLWFwbHVzJykgfHwgZG9jLmdldEVsZW1lbnRCeUlkKCd0Yi1iZWFjb24tYXBsdXMnKTtcblx0ICAgIHZhciBwYXRoX290aGVycyA9IFsnLy9hc3NldHMuYWxpY2RuLmNvbS9nJywgJy8vZy1hc3NldHMuZGFpbHkudGFvYmFvLm5ldCcsICcvL2FsaWR0Lm9zcy1jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20nXTtcblx0ICAgIGlmIChjdXJyZW50X25vZGUpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoX290aGVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKHBhdGhfb3RoZXJzW2ldKTtcblx0ICAgICAgICBpZiAocmVnLnRlc3QoY3VycmVudF9ub2RlLnNyYykpIHtcblx0ICAgICAgICAgIHBhdGggPSBwYXRoX290aGVyc1tpXTtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSAgXG5cdCAgfVxuXHQgIHJldHVybiBwYXRoO1xuXHR9XG5cdFxuXHR2YXIgY2RuUGF0aDtcblx0Ly8g5piv5ZCm5Zu96ZmF546v5aKDXG5cdGZ1bmN0aW9uIGlzSW50ZXJuYXRpb25hbCAoKSB7XG5cdCAgaWYgKCFjZG5QYXRoKSB7XG5cdCAgICBjZG5QYXRoID0gZ2V0Q2RuUGF0aCgpO1xuXHQgIH1cblx0ICB2YXIgaXNJbnQgPSBjZG5QYXRoID09PSAnLy9hc3NldHMuYWxpY2RuLmNvbS9nJyB8fCBjZG5QYXRoID09PSAnLy9sYXotZy1jZG4uYWxpY2RuLmNvbSc7XG5cdCAgcmV0dXJuIGlzSW50IHx8IG1ldGFJbmZvLmdldE1ldGFJbmZvKCdhcGx1cy1lbnYnKSA9PT0gJ2ludCc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzTW9iaWxlICgpIHtcblx0ICBpZiAobmF2aWdhdG9yICYmIG5hdmlnYXRvci51c2VyQWdlbnQpIHtcblx0ICAgIHZhciBpc1Bob25lID0gKC9pcGhvbmV8YW5kcm9pZC9pKS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXHQgICAgdmFyIGlzTW9iaWxlID0gaXNQaG9uZSB8fCAoL1RCXFwtUEQvaSkudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblx0ICAgIHJldHVybiBpc01vYmlsZTtcblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFV0UGFyYW1Gcm9tVXJsICgpIHtcblx0ICAvLyBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtdXRwYXJhbScpO1xuXHQgIHZhciBycztcblx0ICB2YXIgdXRwYXJhbWNudCA9IHV0aWxVcmwuZ2V0UGFyYW1Gcm9tVXJsKCd1dHBhcmFtY250JywgbG9jYXRpb24uaHJlZik7XG5cdCAgaWYgKHV0cGFyYW1jbnQpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJzID0gdXRwYXJhbWNudCA9IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHV0cGFyYW1jbnQpKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgfVxuXHQgIHJldHVybiBycztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIE5BTUVfU1RPUkFHRV9LRVlTID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5OQU1FX1NUT1JBR0VfS0VZUztcblx0ICB2YXIgcmVmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKS5nZXRSZWZlcihOQU1FX1NUT1JBR0VfS0VZUyk7XG5cdCAgLy8gYXBsdXMubHZlciA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcubHZlcjtcblx0ICBhcGx1cy5uYW1lU3RvcmFnZSA9IHV0aWxOYW1lU3RvcmFnZS5uYW1lU3RvcmFnZTsgLy8g5Y6G5Y+y5Y6f5Zug77yM5ZyoIGFwbHVzIOS4iuaatOmcsuWHuiBuYW1lU3RvcmFnZVxuXHQgIHV0aWxOYXRpdmU0QXBsdXMuaGF2ZU5hdGl2ZUZsYWdJblVBKCk7XG5cdCAgdmFyIF8kID0gKGFwbHVzLl8kID0gYXBsdXMuXyQgfHwge30pOyAvLyDlhoXpg6jkvb/nlKjnmoTlj5jph49cblx0ICBfJC5pc190ZXJtaW5hbCA9IGlzTW9iaWxlKCk7XG5cdCAgXyQuc2VuZF9wdl9jb3VudCA9IDA7XG5cdCAgXyQucGFnZV9yZWZlcnJlciA9IHJlZmVyO1xuXHQgIF8kLnNwbSA9IHtcblx0ICAgIGRhdGE6IHt9LFxuXHQgICAgcGFnZV9yZWZlcnJlcjogcmVmZXJcblx0ICB9O1xuXHQgIGFwbHVzLmdsb2JhbENvbmZpZyA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWc7XG5cdCAgdmFyIHV0cGFyYW1jbnQgPSBnZXRVdFBhcmFtRnJvbVVybCgpO1xuXHRcblx0ICBfJC5tZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCkgfHwge307XG5cdCAgZm9yICh2YXIgayBpbiBhcGx1c19jb25maWcubWV0YUluZm8pIHtcblx0ICAgIGlmICghXyQubWV0YV9pbmZvLmhhc093blByb3BlcnR5KGspKSB7XG5cdCAgICAgIHZhciBtZXRhVmFsdWUgPSBhcGx1c19jb25maWcubWV0YUluZm9ba107XG5cdCAgICAgIGlmIChrID09PSAnYXBsdXMtdXRwYXJhbScpIHtcblx0ICAgICAgICAvLyDov5nph4znlKjnlKjmiLflnKjpobXpnaLkuIrphY3nva7nmoRhcGx1cy11dHBhcmFt5Y67bWVyZ2UgdXRwYXJhbWNudFxuXHQgICAgICAgIHV0cGFyYW1jbnQgJiYgbWV0YUluZm8uYXBwZW5kTWV0YUluZm8oaywgdXRwYXJhbWNudCk7XG5cdCAgICAgICAgbWV0YUluZm8uYXBwZW5kTWV0YUluZm8oaywgbWV0YVZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBtZXRhSW5mby5zZXRNZXRhSW5mbyhrLCBtZXRhVmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIFxuXHRcblx0ICBhcGx1cy5fJCA9IF8kO1xuXHQgIGFwbHVzLmlzSW50ZXJuYXRpb25hbCA9IGlzSW50ZXJuYXRpb25hbDtcblx0ICBhcGx1cy5nZXRDZG5QYXRoID0gZ2V0Q2RuUGF0aDtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gLyoqXG5cdC8vICAqIOS7jiB1cmwg5Lit5Y+W5Ye65a+55bqU55qEIHNwbSDlj4LmlbBcblx0Ly8gICogQHBhcmFtIHVybCB7U3RyaW5nfVxuXHQvLyAgKiBAcmV0dXJuIHtTdHJpbmd9IHNwbSBhLmIuYy5kLnB2aWTvvIzkuIDlhbHkupTkvY1cblx0Ly8gICovXG5cdC8vIGZ1bmN0aW9uIGdldFNQTUZyb21VcmwodXJsKSB7XG5cdC8vICAgdmFyIG0gPSB1cmwubWF0Y2gobmV3IFJlZ0V4cCgnXFxcXD8uKnNwbT0oW1xcXFx3XFxcXC5cXFxcLVxcXFwqL10rKScpKTtcblx0Ly8gICB2YXIgc3BtO1xuXHQvLyAgIHJldHVybiAobSAmJiAoc3BtID0gbVsxXSkgJiYgc3BtLnNwbGl0KCcuJykubGVuZ3RoID09IDUpID8gc3BtIDogbnVsbDtcblx0Ly8gfVxuXHQvLyBleHBvcnRzLmdldFNQTUZyb21VcmwgPSBnZXRTUE1Gcm9tVXJsO1xuXHRcblx0LyoqXG5cdCAqIEBhdXRob3Igaml6aGEud3lqIChvbGRqKVxuXHQgKiBAYmxvZyBodHRwOi8vb2xkai5uZXRcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBlYWNoID0gIF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0ZnVuY3Rpb24gZ2V0UGFyYW1Gcm9tVXJsKGtleSwgdXJsKSB7XG5cdCAgaWYgKGtleSAmJiB1cmwpIHtcblx0ICAgIHZhciBwYXJhbSA9ICcnO1xuXHQgICAgdmFyIG07XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcmVnMSA9IG5ldyBSZWdFeHAoa2V5ICsgJz0oW14mfCN8P3xcXC9dKyknKTtcblx0ICAgICAgaWYgKGtleSA9PT0gJ3NwbScgfHwga2V5ID09PSAnc2NtJykge1xuXHQgICAgICAgIHZhciByZWcyID0gbmV3IFJlZ0V4cCgnXFxcXD8uKicgKyBrZXkgKyAnPShbXFxcXHdcXFxcLlxcXFwtXFxcXCovXSspJyk7XG5cdCAgICAgICAgdmFyIHRtcF8xID0gdXJsLm1hdGNoKHJlZzEpO1xuXHQgICAgICAgIHZhciB0bXBfMiA9IHVybC5tYXRjaChyZWcyKTtcblx0ICAgICAgICB2YXIgcGFyYW1fMSA9IHRtcF8xICYmIHRtcF8xLmxlbmd0aCA9PT0gMiA/IHRtcF8xWzFdIDogJyc7XG5cdCAgICAgICAgdmFyIHBhcmFtXzIgPSB0bXBfMiAmJiB0bXBfMi5sZW5ndGggPT09IDIgPyB0bXBfMlsxXSA6ICcnO1xuXHQgICAgICAgIHBhcmFtID0gcGFyYW1fMSA+IHBhcmFtXzIgPyBwYXJhbV8xIDogcGFyYW1fMjtcblx0ICAgICAgICBwYXJhbSA9IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbSA9IHVybC5tYXRjaChyZWcxKTtcblx0ICAgICAgICBwYXJhbSA9IG0gJiYgbS5sZW5ndGggPT09IDIgPyBtWzFdIDogJyc7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAvLyBUT0RPXG5cdCAgICB9IGZpbmFsbHkge1xuXHQgICAgICByZXR1cm4gcGFyYW07XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAnJztcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBhZGRQYXJhbXNJbnRvVXJsKHBhcmFtcywgdXJsKXtcblx0ICB2YXIgaHJlZiA9IHVybCB8fCBsb2NhdGlvbi5ocmVmO1xuXHQgIHZhciBzZWFyY2g7XG5cdCAgdmFyIGhhc2g7XG5cdCAgdmFyIGE7XG5cdCAgdmFyIGFuZF9jaGFyID0gJyYnO1xuXHQgIHZhciBxdWVyeV9zcGxpdDtcblx0ICB2YXIgcXVlcnlfY291bnQ7XG5cdCAgdmFyIGFkZFF1ZXJ5U3RyQXJyID0gW107XG5cdCAgLy8g5Y+C5pWw5aSE55CGXG5cdCAgZWFjaChwYXJhbXMsZnVuY3Rpb24ocGFyYW1LZXkscGFyYW1WYWx1ZSl7XG5cdCAgICBpZighbmV3IFJlZ0V4cChwYXJhbUtleSsnPScpLnRlc3QoaHJlZikpe1xuXHQgICAgICBhZGRRdWVyeVN0ckFyci5wdXNoKHBhcmFtS2V5ICsgJz0nICsgcGFyYW1WYWx1ZSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgaWYoYWRkUXVlcnlTdHJBcnIubGVuZ3RoPT09MCl7XG5cdCAgICByZXR1cm4gaHJlZjsgXG5cdCAgfVxuXHQgIC8vIHVybOWkhOeQhlxuXHQgIGlmIChocmVmLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcblx0ICAgIGEgPSBocmVmLnNwbGl0KCcjJyk7XG5cdCAgICBocmVmID0gYS5zaGlmdCgpO1xuXHQgICAgaGFzaCA9IGEuam9pbignIycpOyAvLyDlj5bnrKzkuIDkuKogIyDlkI7nmoTpg6jliIZcblx0ICB9XG5cdCAgcXVlcnlfc3BsaXQgPSBocmVmLnNwbGl0KCc/Jyk7XG5cdCAgcXVlcnlfY291bnQgPSBxdWVyeV9zcGxpdC5sZW5ndGggLSAxO1xuXHRcblx0ICAvLyDkuIvpnaLlpITnkIblvaLlpoLigJxodHRwOi8vd3d3LnRhb2Jhby5jb23igJ3ov5nmoLfnmoTmnKvlsL7kuI3luKbigJwv4oCd55qE6ZO+5o6lXG5cdCAgYSA9IHF1ZXJ5X3NwbGl0WzBdLnNwbGl0KCcvLycpO1xuXHQgIGEgPSBhW2EubGVuZ3RoIC0gMV0uc3BsaXQoJy8nKTtcblx0XG5cdCAgaWYgKHF1ZXJ5X2NvdW50ID4gMCkge1xuXHQgICAgLyoqXG5cdCAgICAgKiDnlLHkuo7lrZjlnKjnsbvkvLwgaHR0cDovL2p1LmF0cGFuZWwuY29tLz9zY209MTAwNS4xMC4xLjcwMyZ1cmw9aHR0cDovL3d3dy50bWFsbC5jb20vZ28vYWN0L3RtYWxsL215bXgteW0ucGhwP3NwbT0xLjEwMDAzODYuMjIyMDE3LjIwJmFkX2lkPSZhbV9pZD0mY21faWQ9JnBtX2lkPTE1MDEwMDgyNzI2MzM2ODA4NWY4XG5cdCAgICAgKiDov5nmoLfnmoTpk77mjqXvvIzms6jmhI/lhbbkuK3mnInkuKTkuKrigJw/4oCd77yMXG5cdCAgICAgKiDov5nmmK/kuIDnp43ot7Povazpk77mjqXvvIzlhbbkuK0gc3BtIOWPguaVsOmcgOimgeWKoOWcqOWQjumdouS4gOS4qiA/IOS5i+WQju+8jFxuXHQgICAgICog57uP5LiO5qK15piT5ZWG6YeP77yIMjAxMi0wMy0zMO+8ie+8jOWGs+Wumue7n+S4gOWwhiBzcG0g5Y+C5pWw5Yqg5YiwIGhyZWYg55qE5pyA5ZCO5LiA5LiqID8g5LmL5ZCOXG5cdCAgICAgKi9cblx0ICAgIHNlYXJjaCA9IHF1ZXJ5X3NwbGl0LnBvcCgpOyAvLyDlj5bmnIDlkI7kuIDkuKogPyDlkI7nmoTpg6jliIZcblx0ICAgIGhyZWYgPSBxdWVyeV9zcGxpdC5qb2luKCc/Jyk7IC8vIOacgOWQjuS4gOS4qiA/IOS5i+WJjeeahOmDqOWIhlxuXHQgIH1cblx0XG5cdCAgaWYgKHNlYXJjaCAmJlxuXHQgICAgcXVlcnlfY291bnQgPiAxICYmIC8vICMg5Y+q5a+55Lik5Liq5Y+K5Lul5LiK55qE4oCcP+KAneeahCB1cmwg5omn6KGM6L+Z5qC355qE5qOA5rWLXG5cdCAgICBzZWFyY2guaW5kZXhPZignJicpID09IC0xICYmXG5cdCAgICAvLyBzZWFyY2guaW5kZXhPZignPScpID09IC0xICYmXG5cdCAgICBzZWFyY2guaW5kZXhPZignJScpICE9PSAtMSkge1xuXHQgICAgLyoqXG5cdCAgICAgKiDmnInkuIDkupvpobXpnaLvvIzlpoIgaHR0cDovL2xvZ2luLnRhb2Jhby5jb20vbWVtYmVyL2xvZ291dC5qaHRtbD9mPXRvcCZyZWRpcmVjdFVSTD1odHRwOi8vbG9naW4udG1hbGwuY29tLz9zcG09MTAwNy4xMDAzNjEuMC4xODAlMjZyZWRpcmVjdF91cmw9aHR0cCUyNTNBJTI1MkYlMjUyRnRlbWFpLnRtYWxsLmNvbSUyNTJGJTI1M0ZzcG0lMjUzRDMuMTAwMDQ3My4xOTc1NjIuMiUyNTI2cHJ0JTI1M0QxMzM2MzY3NDI1MTk2JTI1MjZwcmMlMjUzRDRcblx0ICAgICAqIHNwbSDlj4LmlbDliqDlnKjnrKzkuozkuKogPyDkuYvlkI7vvIzkvYbmmK/nrKzkuozkuKogPyDkuYvlkI7nmoQgJiDpg73lt7Lnu4/lgZrkuobop4TojIPnmoTovaznoIHvvIzmiYDku6XmlrDmt7vliqDnmoQgc3BtIOWQjumdoueahCAmIOS5n+imgei/m+ihjOi9rOeggVxuXHQgICAgICovXG5cdCAgICBhbmRfY2hhciA9ICclMjYnO1xuXHQgIH1cblx0XG5cdCAgaHJlZiA9IGhyZWYgKyAnPycgKyBhZGRRdWVyeVN0ckFyci5qb2luKCcmJylcblx0ICAgICsgKHNlYXJjaCA/IChhbmRfY2hhciArIHNlYXJjaCkgOiAnJylcblx0ICAgICsgKGhhc2ggPyAoJyMnICsgaGFzaCkgOiAnJylcblx0ICA7XG5cdCAgcmV0dXJuIGhyZWY7XG5cdH1cblx0XG5cdGV4cG9ydHMuYWRkUGFyYW1zSW50b1VybCA9IGFkZFBhcmFtc0ludG9Vcmw7XG5cdGV4cG9ydHMuZ2V0UGFyYW1Gcm9tVXJsID0gZ2V0UGFyYW1Gcm9tVXJsO1xuXHRcblx0LyoqXG5cdCAqIOS7jiB1cmwg5Lit5Y+W5Ye65a+55bqU55qEIHNwbSDlj4LmlbBcblx0ICog5LyY5bqT5Zyf6LGGc3BtQ+S9jeWPr+iDveWtmOWcqOeJueauiuWtl+espu+8jOWmgu+8muKAnHNwbT0wLjAuaXRlbV9YTVRZNE9URXlOVEEwTUE9PS5BLkJpaU5TMeKAnVxuXHQgKiBAcGFyYW0gdXJsIHtTdHJpbmd9XG5cdCAqIEByZXR1cm4ge1N0cmluZ30gc3BtIGEuYi5jLmQucHZpZO+8jOS4gOWFseS6lOS9jVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRTUE1Gcm9tVXJsID0gZnVuY3Rpb24odXJsKSB7XG5cdCAgcmV0dXJuIGdldFBhcmFtRnJvbVVybCgnc3BtJywgdXJsKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UXVlcnlGcm9tVXJsID0gZnVuY3Rpb24oKSB7XG5cdCAgZnVuY3Rpb24gc3RyMnBhcmFtcyh0YXJnZXQpIHtcblx0ICAgIHZhciB0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHRhcmdldCk7XG5cdCAgICB2YXIgc3RhcnRJZHggPSB0LmluZGV4T2YoJz8nKSArIDE7XG5cdCAgICB2YXIgc3RyID0gdC5zdWJzdHJpbmcoc3RhcnRJZHgpO1xuXHQgICAgdmFyIG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICB2YXIgYXJyID0gc3RyLnNwbGl0KCcmJyk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICBvYmpbYXJyW2ldLnNwbGl0KCc9JylbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KGFycltpXS5zcGxpdCgnPScpWzFdKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvYmo7XG5cdCAgfVxuXHRcblx0ICB0cnkge1xuXHQgICAgdmFyIGhhc2ggPSBsb2NhdGlvbiAmJiBsb2NhdGlvbi5oYXNoO1xuXHQgICAgdmFyIHNlYXJjaCA9IGxvY2F0aW9uICYmIGxvY2F0aW9uLnNlYXJjaDtcblx0XG5cdCAgICBpZiAoaGFzaCAmJiBoYXNoLmluZGV4T2YoJz8nKSAhPT0gLTEpIHtcblx0ICAgICAgcmV0dXJuIHN0cjJwYXJhbXMoaGFzaCk7XG5cdCAgICB9IFxuXHQgICAgaWYgKHNlYXJjaCAmJiBzZWFyY2guaW5kZXhPZignPycpICE9PSAtMSkge1xuXHQgICAgICByZXR1cm4gc3RyMnBhcmFtcyhzZWFyY2gpO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSl7XG5cdCAgICB2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdCAgICB1bG9nKCkudygndXJsIGVycm9yID09PSAnLCBsb2NhdGlvbi5ocmVmKTtcblx0ICB9IFxuXHR9O1xuXHRcblx0XG5cdFxuXHR2YXIgdXRpbEdRID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciB1dGlsTWV0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIEhBU0ggPSAnaGFzaCc7XG5cdHZhciBISVNUT1JZID0gJ2hpc3RvcnknO1xuXHRcblx0ZnVuY3Rpb24gd2F0Y2hIYXNoQ2hhbmdlKGNiKSB7XG5cdCAgdmFyIG9yaUhhc2ggPSBsb2NhdGlvbi5oYXNoICsgXCJcIjtcblx0ICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoJ2FwbHVzLm9uJywgW3dpbmRvdywgJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAob3JpSGFzaCAhPT0gbG9jYXRpb24uaGFzaCkge1xuXHQgICAgICBvcmlIYXNoID0gbG9jYXRpb24uaGFzaCArIFwiXCI7XG5cdCAgICAgIGNiICYmIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiBjYihvcmlIYXNoLCBIQVNIKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdH07XG5cdGV4cG9ydHMud2F0Y2hIYXNoQ2hhbmdlID0gd2F0Y2hIYXNoQ2hhbmdlO1xuXHRcblx0ZnVuY3Rpb24gd2F0Y2hIaXN0b3J5Q2hhbmdlKGNiKSB7XG5cdCAgdmFyIG9yaVBhdGggPSBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLnNlYXJjaDtcblx0XG5cdCAgaWYgKCFoaXN0b3J5LnB1c2hTdGF0ZSB8fCAhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHJldHVybjtcblx0ICBcblx0ICBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZSkge1xuXHQgICAgdmFyIG5ld1BhdGggPSAnJztcblx0ICAgIGlmIChlKSB7XG5cdCAgICAgIG5ld1BhdGggPSBlICYmIGUuYXJndW1lbnRzICYmIGUuYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgZS5hcmd1bWVudHNbMl07XG5cdCAgICAgIHZhciB1cmwgPSAvXmh0dHB8aHR0cHMvLnRlc3QobmV3UGF0aCkgPyBuZXdQYXRoIDogKGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyBuZXdQYXRoKTtcblx0ICAgICAgaWYgKGxvY2F0aW9uLmhyZWYgIT09IHVybCkge1xuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgIGNiICYmIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiBjYihuZXdQYXRoLCBISVNUT1JZKTtcblx0ICAgICAgICB9LCAwKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbmV3UGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoO1xuXHQgICAgICBpZiAobmV3UGF0aCAhPT0gb3JpUGF0aCkge1xuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgIGNiICYmIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiBjYihuZXdQYXRoLCBISVNUT1JZKTtcblx0ICAgICAgICB9LCAwKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgb3JpUGF0aCA9IG5ld1BhdGg7XG5cdCAgfVxuXHRcblx0ICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoJ2FwbHVzLm9uJywgW3dpbmRvdywgJ3B1c2hTdGF0ZScsIGZ1bmN0aW9uKGUpIHtcblx0ICAgIGhhbmRsZUNoYW5nZShlKTtcblx0ICB9XSk7XG5cdCAgXG5cdCAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKCdhcGx1cy5vbicsIFt3aW5kb3csICdwb3BzdGF0ZScsIGZ1bmN0aW9uKCkge1xuXHQgICAgaGFuZGxlQ2hhbmdlKCk7XG5cdCAgfV0pO1xuXHRcblx0ICB2YXIgbmVlZFJTdGF0ZSA9IHV0aWxNZXRhLmdldE1ldGFDbnQoJ2FwbHVzLXRyYWNrLXJlcGxhY2VzdGF0ZScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy10cmFjay1yZXBsYWNlc3RhdGUnKTtcblx0ICBuZWVkUlN0YXRlICYmIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZSgnYXBsdXMub24nLCBbd2luZG93LCAncmVwbGFjZVN0YXRlJywgZnVuY3Rpb24oZSkge1xuXHQgICAgaGFuZGxlQ2hhbmdlKGUpO1xuXHQgIH1dKTtcblx0XG5cdH07XG5cdGV4cG9ydHMud2F0Y2hIaXN0b3J5Q2hhbmdlID0gd2F0Y2hIaXN0b3J5Q2hhbmdlO1xuXHRcblx0Ly8gZnVuY3Rpb24gd2F0Y2hEb21DaGFuZ2UoY2IpIHtcblx0Ly8gICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoJ2FwbHVzLm9uJywgWydET01SZWFkeScsIGZ1bmN0aW9uIChlKSB7XG5cdC8vICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQvLyAgICAgLy8gd2F0Y2ggZG9tY2hhbmdlLCBiZWNhdXNlIGl0IHdpbGwgZG9uJ3QgdHJpZ2dlciBwb3BzdGF0ZSB3aGVuIGV4ZWMgaGlzdG9yeS5wdXNoc3RhdGVcblx0Ly8gICAgIHZhciBNT2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuTW96TXV0YXRpb25PYnNlcnZlcjtcblx0Ly8gICAgIGlmIChNT2JzZXJ2ZXIpIHtcblx0Ly8gICAgICAgX3NlbGYuX29ic2VydmVyID0gbmV3IE1PYnNlcnZlcihmdW5jdGlvbiAoKSB7XG5cdC8vICAgICAgICAgaWYgKF9zZWxmLnBhdGhuYW1lICE9PSBsb2NhdGlvbi5wYXRobmFtZSkge1xuXHQvLyAgICAgICAgICAgX3NlbGYucGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZSArICcnO1xuXHQvLyAgICAgICAgICAgY2IgJiYgdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nICYmIGNiKG5ld1BhdGgsIEhJU1RPUlkpO1xuXHQvLyAgICAgICAgICAgLy8gX3NlbGYudG9TZW5kUFYoX3NlbGYucGF0aG5hbWUsIEhJU1RPUlkpO1xuXHQvLyAgICAgICAgIH0gZWxzZSBpZiAoX3NlbGYuaGFzaCAhPT0gbG9jYXRpb24uaGFzaCkge1xuXHQvLyAgICAgICAgICAgX3NlbGYuaGFzaCA9IGxvY2F0aW9uLmhhc2ggKyAnJztcblx0Ly8gICAgICAgICAgIF9zZWxmLnRvU2VuZFBWKF9zZWxmLmhhc2gsIEhBU0gpO1xuXHQvLyAgICAgICAgIH1cblx0Ly8gICAgICAgfSk7XG5cdC8vICAgICAgIC8v5Lyg5YWl55uu5qCH6IqC54K55ZKM6KeC5a+f6YCJ6aG5XG5cdC8vICAgICAgIF9zZWxmLl9vYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcblx0Ly8gICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLCAgICAvLyDlsZ7mgKfnmoTlj5jliqhcblx0Ly8gICAgICAgICBjaGlsZExpc3Q6IHRydWUsICAgICAvLyDlrZDoioLngrnnmoTlj5jliqhcblx0Ly8gICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLCAvLyDoioLngrnlhoXlrrnmiJboioLngrnmlofmnKznmoTlj5jliqhcblx0Ly8gICAgICAgICBzdWJ0cmVlOiB0cnVlICAgICAgICAvLyDmiYDmnInlkI7ku6PoioLngrnnmoTlj5jliqhcblx0Ly8gICAgICAgfSk7ICBcblx0Ly8gICAgIH1cblx0Ly8gICB9XSk7XG5cdC8vIH07XG5cdFxuXHQvLyBleHBvcnRzLndhdGNoRG9tQ2hhbmdlID0gd2F0Y2hEb21DaGFuZ2U7XG5cbi8qKiovIH0pLFxuLyogMjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qc1xuXHQgKiDmk43kvZxhcGx1c19xdWV1ZeeahOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRleHBvcnRzLnB1c2hJbnRvR29sZGxvZ1F1ZXVlID0gZnVuY3Rpb24gKGFjdGlvbiwgYXJncykge1xuXHQgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBuYW1lcyA9IGFjdGlvbi5zcGxpdCgnLicpO1xuXHQgIHZhciBhcGx1c18xID0gYXBsdXNbbmFtZXNbMV1dO1xuXHQgIHZhciBhcGx1c18yID0gYXBsdXNfMSA/IGFwbHVzXzFbbmFtZXNbMl1dIDogbnVsbDtcblx0XG5cdCAgaWYgKGFwbHVzICYmIG5hbWVzLmxlbmd0aCA9PT0gMiAmJiBhcGx1c18xKSB7XG5cdCAgICBhcGx1c18xLmFwcGx5KGFwbHVzLCBhcmdzKTtcblx0ICB9IGVsc2UgaWYgKG5hbWVzLmxlbmd0aCA9PT0gMyAmJiBhcGx1c18yKSB7XG5cdCAgICBhcGx1c18yLmFwcGx5KGFwbHVzXzEsIGFyZ3MpOyAgXG5cdCAgfSBlbHNlIHtcblx0ICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICBhY3Rpb246IGFjdGlvbixcblx0ICAgICAgYXJndW1lbnRzOiBhcmdzXG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pON5L2cbWV0YeeahOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfaGVhZF9ub2RlO1xuXHR2YXIgX21ldGFfbm9kZXM7XG5cdFxuXHR2YXIgdXRpbEF0dHJpYnV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHQvKipcblx0ICog5Y+W5b6X6aG16Z2i5LiKIGhlYWQg5Lit55qE5omA5pyJIG1ldGEg5YWD57SgXG5cdCAqIEBwYXJhbSBbZm9yY2VdIHtib29sZWFufSDmmK/lkKblvLrliLbojrflj5bmlrDlhoXlrrlcblx0ICovXG5cdGZ1bmN0aW9uIGdldE1ldGFUYWdzKGZvcmNlKSB7XG5cdCAgX2hlYWRfbm9kZSA9IF9oZWFkX25vZGUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblx0XG5cdCAgaWYgKF9tZXRhX25vZGVzICYmICFmb3JjZSkge1xuXHQgICAgcmV0dXJuIF9tZXRhX25vZGVzO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIF9oZWFkX25vZGUgPyAoX21ldGFfbm9kZXMgPSBfaGVhZF9ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtZXRhJykpIDogW107XG5cdH07XG5cdGV4cG9ydHMuZ2V0TWV0YVRhZ3MgPSBnZXRNZXRhVGFncztcblx0XG5cdC8qKlxuXHQgKiDlj5blvpcgaGVhZCAvIG1ldGEg5Lit5oyH5a6aIG1ldGEg55qEIChhdHRyIHx8IGNvbnRlbnQpIOWAvFxuXHQgKiA8bWV0YSBuYW1lPVwiYXBsdXMtdGVybWluYWxcIiBjb250ZW50PVwiMVwiPlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWV0YUNudChuYW1lLCBhdHRyKSB7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIG1ldGE7XG5cdCAgdmFyIG1ldGFfbm9kZXMgPSBnZXRNZXRhVGFncygpO1xuXHQgIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG5cdCAgdmFyIGNvbnRlbnQ7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgIG1ldGEgPSBtZXRhX25vZGVzW2ldO1xuXHQgICAgaWYgKHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgJ25hbWUnKSA9PT0gbmFtZSkge1xuXHQgICAgICBjb250ZW50ID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCBhdHRyIHx8ICdjb250ZW50Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY29udGVudCB8fCAnJztcblx0fTtcblx0ZXhwb3J0cy5nZXRNZXRhQ250ID0gZ2V0TWV0YUNudDtcblx0XG5cdFxuXHQvKipcblx0ICog56Gu5a6aIGhlYWQgLyBtZXRhIOS4reeahCBpc29uZXBhZ2Ug55qE5pWw5o2uXG5cdCAqIOW9ouWmgu+8mlxuXHQgKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjBcIiAvPiDooajnpLrkuI3mmK9vbmVwYWdlXG5cdCAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMXxodHRwOi8vaDUubS50YW9iYW8uY29tL3dlL2luZGV4Lmh0bSNkZXRhaWxcIiAvPiDooajnpLrmmK9vbmVwYWdlXG5cdCAqL1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRmdW5jdGlvbiBnZXRPbmVQYWdlSW5mbyhtZXRhSW5mbykge1xuXHQgIHZhciBvYmogPSB7XG5cdCAgICBpc29uZXBhZ2U6ICctMScsXG5cdCAgICB1cmxwYWdlbmFtZTogJydcblx0ICB9O1xuXHQgIHZhciBtZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCk7XG5cdCAgaWYgKG1ldGFfaW5mbyAmJiBtZXRhX2luZm8uaGFzT3duUHJvcGVydHkoJ2lzb25lcGFnZV9kYXRhJykpIHtcblx0ICAgIG9iai5pc29uZXBhZ2UgPSBtZXRhX2luZm8uaXNvbmVwYWdlX2RhdGEuaXNvbmVwYWdlO1xuXHQgICAgb2JqLnVybHBhZ2VuYW1lID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLnVybHBhZ2VuYW1lO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGVudCA9IGdldE1ldGFDbnQoJ2lzb25lcGFnZScpIHx8ICctMSc7XG5cdCAgICB2YXIgYXJyX2NvbnRlbnQgPSBjb250ZW50LnNwbGl0KFwifFwiKTtcblx0ICAgIG9iai5pc29uZXBhZ2UgPSBhcnJfY29udGVudFswXTtcblx0ICAgIG9iai51cmxwYWdlbmFtZSA9IGFycl9jb250ZW50WzFdID8gYXJyX2NvbnRlbnRbMV0gOiBcIlwiO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRleHBvcnRzLmdldE9uZVBhZ2VJbmZvID0gZ2V0T25lUGFnZUluZm87XG5cblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMudHJ5VG9HZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyX25hbWUpIHtcblx0ICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSA/IChlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyX25hbWUpIHx8ICcnKSA6ICcnO1xuXHR9O1xuXHRcblx0dmFyIHRyeVRvU2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSwgYXR0cl92YWx1ZSkge1xuXHQgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyX25hbWUsIGF0dHJfdmFsdWUpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy50cnlUb1NldEF0dHJpYnV0ZSA9IHRyeVRvU2V0QXR0cmlidXRlO1xuXHRcblx0ZXhwb3J0cy50cnlUb1JlbW92ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyX25hbWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cl9uYW1lKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdHJ5VG9TZXRBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cl9uYW1lLCAnJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBVVEZMQUcgPSAnVVQ0QXBsdXMnO1xuXHR2YXIgVU1GTEFHID0gJ1VtZW5nNEFwbHVzJztcblx0XG5cdGV4cG9ydHMuaXNOYXRpdmU0QXBsdXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGNoYW5uZWwgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdG9VVCcpO1xuXHQgIHZhciBicmlkZ2VOYW1lID0gYXBsdXMuYXBsdXNCcmlkZ2VOYW1lO1xuXHQgIHJldHVybiAoYnJpZGdlTmFtZSA9PT0gVVRGTEFHICYmIGNoYW5uZWwgPT09IFVURkxBRykgfHwgYnJpZGdlTmFtZSA9PT0gVU1GTEFHO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5oYXZlTmF0aXZlRmxhZ0luVUEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGJyaWRnZU5hbWUgPSBhcGx1cy5hcGx1c0JyaWRnZU5hbWU7XG5cdCAgLy8g5b2TYnJpZGdlTmFtZeS4uuepuuWAvOaXtuaJjei/m+ihjOS7peS4i+eahOWIpOaWreWSjOWkhOeQhumAu+i+ke+8jOS7peaPkOWNh+Wkmuasoei/kOihjOeahOaAp+iDvVxuXHQgIGlmICghYnJpZGdlTmFtZSAmJiB0eXBlb2YgYnJpZGdlTmFtZSAhPT0gJ2Jvb2xlYW4nICYmIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50KSB7XG5cdCAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cChbVVRGTEFHLCBVTUZMQUddLmpvaW4oJ3wnKSwgJ2knKTtcblx0ICAgIHZhciBtYXRjaFJlc3VsdCA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2gocmVnKTtcblx0ICAgIGJyaWRnZU5hbWUgPSBtYXRjaFJlc3VsdCA/IG1hdGNoUmVzdWx0WzBdIDogZmFsc2U7XG5cdCAgICBhcGx1cy5hcGx1c0JyaWRnZU5hbWUgPSBicmlkZ2VOYW1lO1xuXHQgIH1cblx0ICByZXR1cm4gISFicmlkZ2VOYW1lO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdC8qKlxuXHQgKiBuYW1lU3RvcmFnZSDnmoTlrp7njrDmi7fotJ1cblx0ICpcblx0ICogaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vY29kZXYvbmFtZS1zdG9yYWdlL3RyZWUvbWFzdGVyXG5cdCAqL1xuXHR2YXIgbmFtZVN0b3JhZ2UgPSAoZnVuY3Rpb24gKCkge1xuXHRcblx0ICB2YXIgX25hbWVTdG9yYWdlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ25hbWVTdG9yYWdlJyk7XG5cdFxuXHQgIGlmIChfbmFtZVN0b3JhZ2UpIHtcblx0ICAgIHJldHVybiBfbmFtZVN0b3JhZ2U7XG5cdCAgfVxuXHRcblx0ICB2YXIgU0NIRU1FID0gXCJuYW1lU3RvcmFnZTpcIjtcblx0ICAvL3ZhciBSRV9OQU1FUyA9IC9ebmFtZVN0b3JhZ2U6KFteP10qKSg/OlxcPyg/OihbXj1dKyk9KFteJl0qKSkqKT8vZztcblx0ICB2YXIgUkVfUEFJUiA9IC9eKFtePV0rKSg/Oj0oLiopKT8kLztcblx0ICB2YXIgUSA9IFwiP1wiO1xuXHQgIHZhciBFUSA9IFwiPVwiO1xuXHQgIHZhciBBTkQgPSBcIiZcIjtcblx0XG5cdCAgdmFyIGVuY29kZSA9IGVuY29kZVVSSUNvbXBvbmVudDtcblx0ICB2YXIgZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50O1xuXHRcblx0ICB2YXIgU1RPUkFHRSA9IHt9O1xuXHQgIHZhciBPUklHSU5fTkFNRTtcblx0XG5cdCAgdmFyIG5hbWVTdG9yYWdlID0ge307XG5cdFxuXHQgIC8vIOino+aekOW5tuWIneWni+WMliBuYW1lIOaVsOaNruOAglxuXHQgIC8vIOagh+WHhueahCBuYW1lU3RvcmFnZSDmlbDmja7moLzlvI/kuLogYG5hbWVTdG9yYWdlOm9yaWdpbi1uYW1lP2tleT12YWx1ZWBcblx0ICAvLyBAcGFyYW0ge1N0cmluZ30gbmFtZS5cblx0ICAoZnVuY3Rpb24gcGFyc2UobmFtZSkge1xuXHRcblx0ICAgIGlmIChuYW1lICYmIG5hbWUuaW5kZXhPZihTQ0hFTUUpID09PSAwKSB7XG5cdFxuXHQgICAgICB2YXIgbWF0Y2ggPSBuYW1lLnNwbGl0KC9bOj9dLyk7XG5cdFxuXHQgICAgICBtYXRjaC5zaGlmdCgpOyAvLyBzY2hlbWU6IG1hdGNoWzBdO1xuXHQgICAgICBPUklHSU5fTkFNRSA9IGRlY29kZShtYXRjaC5zaGlmdCgpKSB8fCBcIlwiOyAvLyBtYXRjaFsxXVxuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IG1hdGNoLmpvaW4oXCJcIik7IC8vIG1hdGNoWzIsLi4uXVxuXHRcblx0ICAgICAgdmFyIHBhaXJzID0gcGFyYW1zLnNwbGl0KEFORCk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBwYWlyLCBrZXksIHZhbHVlLCBsID0gcGFpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgcGFpciA9IHBhaXJzW2ldLm1hdGNoKFJFX1BBSVIpO1xuXHQgICAgICAgIGlmICghcGFpciB8fCAhcGFpclsxXSkge1xuXHQgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBrZXkgPSBkZWNvZGUocGFpclsxXSk7XG5cdCAgICAgICAgdmFsdWUgPSBkZWNvZGUocGFpclsyXSkgfHwgXCJcIjtcblx0XG5cdCAgICAgICAgU1RPUkFHRVtrZXldID0gdmFsdWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICB9IGVsc2Uge1xuXHRcblx0ICAgICAgT1JJR0lOX05BTUUgPSBuYW1lIHx8IFwiXCI7XG5cdFxuXHQgICAgfVxuXHRcblx0ICB9KSh3aW5kb3cubmFtZSk7XG5cdFxuXHQgIC8vIOWGmeWFpeaVsOaNruOAglxuXHQgIC8vIEBwYXJhbSB7U3RyaW5nfSBrZXksIOmUruWQjeOAglxuXHQgIC8vIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSwg6ZSu5YC844CCXG5cdCAgbmFtZVN0b3JhZ2Uuc2V0SXRlbSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICBpZiAoIWtleSB8fCBcInVuZGVmaW5lZFwiID09PSB0eXBlb2YgdmFsdWUpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgU1RPUkFHRVtrZXldID0gU3RyaW5nKHZhbHVlKTtcblx0ICAgIHNhdmUoKTtcblx0ICB9O1xuXHRcblx0ICAvLyDor7vlj5bmlbDmja7jgIJcblx0ICAvLyBAcGFyYW0ge1N0cmluZ30ga2V5LCDplK7lkI3jgIJcblx0ICAvLyBAcmV0dXJuIHtTdHJpbmd9IOmUruWAvOOAguWmguaenOS4jeWtmOWcqO+8jOWImei/lOWbniBgbnVsbGDjgIJcblx0ICBuYW1lU3RvcmFnZS5nZXRJdGVtID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgcmV0dXJuIFNUT1JBR0UuaGFzT3duUHJvcGVydHkoa2V5KSA/IFNUT1JBR0Vba2V5XSA6IG51bGw7XG5cdCAgfTtcblx0XG5cdCAgLy8g56e76Zmk5pWw5o2u44CCXG5cdCAgLy8gQHBhcmFtIHtTdHJpbmd9IGtleSwg6ZSu5ZCN44CCXG5cdCAgbmFtZVN0b3JhZ2UucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghU1RPUkFHRS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIFNUT1JBR0Vba2V5XSA9IG51bGw7XG5cdCAgICBkZWxldGUgU1RPUkFHRVtrZXldO1xuXHQgICAgc2F2ZSgpO1xuXHQgIH07XG5cdFxuXHQgIC8vIOa4heepuiBuYW1lU3RvcmFnZeOAglxuXHQgIG5hbWVTdG9yYWdlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgU1RPUkFHRSA9IHt9O1xuXHQgICAgc2F2ZSgpO1xuXHQgIH07XG5cdFxuXHQgIG5hbWVTdG9yYWdlLnZhbHVlT2YgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gU1RPUkFHRTtcblx0ICB9O1xuXHRcblx0ICBuYW1lU3RvcmFnZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBuYW1lID0gd2luZG93Lm5hbWU7XG5cdCAgICByZXR1cm4gbmFtZS5pbmRleE9mKFNDSEVNRSkgPT09IDAgPyBuYW1lIDogU0NIRU1FICsgbmFtZTtcblx0ICB9O1xuXHRcblx0ICAvLyDkv53lrZjmlbDmja7liLAgd2luZG93Lm5hbWVcblx0ICAvLyDlpoLmnpzmsqHmnInlrZjlgqjmlbDmja7vvIzliJnmgaLlpI3ljp/lp4vnqpflj6PlkI3np7Aod2luZG93Lm5hbWUp44CCXG5cdCAgZnVuY3Rpb24gc2F2ZSgpIHtcblx0ICAgIHZhciBwYWlycyA9IFtdO1xuXHQgICAgdmFyIGVtcHR5ID0gdHJ1ZTtcblx0ICAgIHZhciB2YWx1ZTtcblx0XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gU1RPUkFHRSkge1xuXHQgICAgICBpZiAoU1RPUkFHRS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgZW1wdHkgPSBmYWxzZTtcblx0ICAgICAgICB2YWx1ZSA9IFNUT1JBR0Vba2V5XSB8fCBcIlwiO1xuXHQgICAgICAgIHBhaXJzLnB1c2goZW5jb2RlKGtleSkgKyBFUSArIGVuY29kZSh2YWx1ZSkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgd2luZG93Lm5hbWUgPSBlbXB0eSA/IE9SSUdJTl9OQU1FIDogU0NIRU1FICsgZW5jb2RlKE9SSUdJTl9OQU1FKSArIFEgKyBwYWlycy5qb2luKEFORCk7XG5cdCAgfTtcblx0XG5cdCAgLy8gYWRkRXZlbnRMaXN0ZXIgaW1wbGVtZW50YXRpb25cblx0ICAvLyBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50LlxuXHQgIC8vIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUuXG5cdCAgLy8gQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlci5cblx0ICBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikge1xuXHQgICAgaWYgKCFlbGVtZW50KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGZhbHNlKTtcblx0ICAgIH0gZWxzZSBpZiAoZWxlbWVudC5hdHRhY2hFdmVudCkge1xuXHQgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGZ1bmN0aW9uIChldnQpIHtcblx0ICAgICAgICBoYW5kbGVyLmNhbGwoZWxlbWVudCwgZXZ0KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLy8gU2F2ZSB0aGUgbGFzdCBkYXRhIGZvciB0aGUgbmV4dCBwYWdlLlxuXHQgIGFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnYmVmb3JldW5sb2FkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgc2F2ZSgpO1xuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gbmFtZVN0b3JhZ2U7XG5cdFxuXHR9KSgpO1xuXHRcblx0ZXhwb3J0cy5uYW1lU3RvcmFnZSA9IG5hbWVTdG9yYWdlO1xuXG5cbi8qKiovIH0pLFxuLyogMzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuXHQgKiDpmL/ph4zns7vkuJrliqHotbDov5nkuKrpgLvovpFcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHR2YXIgdXRpbERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxBdHRyaWJ1dGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dmFyIHV0aWxNZXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdC8vIHZhciB1dGlsRXhpbmZvID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFeGluZm8nKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBpbmZvID0ge307XG5cdHZhciBBUExVU19YX1NFVFRJTkdTID0gJ2FwbHVzLXgtc2V0dGluZ3MnO1xuXHR2YXIgcHJpb3JpdHlNZXRhSW5mbztcblx0XG5cdC8vIOWIoOmZpOWkp+mHj+eahEFycnJhee+8jOS/neeVmeWOhuWPsuS4jeinhOiMg+eahG1ldGFOYW1lIDIwMTgtMDEtMTAgQOiwi+Wjq1xuXHQvLyDor6bop4EgaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9kb2NzL2xweXZjbVxuXHR2YXIga2V5cyA9IFsnYWhvdC1hcGx1cycsICdpc29uZXBhZ2UnLCAnc3BtLWlkJywgJ2RhdGEtc3BtJywgJ21pY3Jvc2NvcGUtZGF0YSddO1xuXHRcblx0LyoqXG5cdCAqIOWPluW+lyBoZWFkIC8gbWV0YSDkuK3nmoTmmL7lvq7plZznmoTmlbDmja7vvIxcblx0ICog5b2i5aaC77yaXG5cdCAqIDxtZXRhIG5hbWU9XCJtaWNyb3Njb3BlLWRhdGFcIiBjb250ZW50PVwicGFnZUlkPTEyMzsgc2l0ZUlkPTQ1NlwiPlxuXHQgKiDlj6/og73mnInlpJrmnaEgbWV0YSDmlbDmja7jgIJcblx0ICpcblx0ICog55u45YWz5qC85byP5Y+K6K+05piO6KeB77yaXG5cdCAqIGh0dHA6Ly93aWtpLnVlZC50YW9iYW8ubmV0L2Rva3UucGhwP2lkPXRlYW06dWRjOmYyZTp3ZWJ0cmFjZXI6ZGV2LWRvY3M6ZXh0cmEtZGF0YVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWV0YU1pY3Jvc2NvcGVEYXRhIChtZXRhX25vZGVzKSB7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIG1ldGE7XG5cdCAgdmFyIGwgPSBtZXRhX25vZGVzLmxlbmd0aDtcblx0ICB2YXIgY29udGVudDtcblx0ICB2YXIgX21pY3Jvc2NvcGVfZGF0YSA9IHt9O1xuXHQgIGluZm8uX21pY3Jvc2NvcGVfZGF0YSA9IF9taWNyb3Njb3BlX2RhdGE7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgIG1ldGEgPSBtZXRhX25vZGVzW2ldO1xuXHQgICAgaWYgKHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgJ25hbWUnKSA9PT0gJ21pY3Jvc2NvcGUtZGF0YScpIHtcblx0ICAgICAgY29udGVudCA9IHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgJ2NvbnRlbnQnKTtcblx0ICAgICAgdXRpbERhdGEucGFyc2VTZW1pY29sb25Db250ZW50KGNvbnRlbnQsIF9taWNyb3Njb3BlX2RhdGEpO1xuXHQgICAgICBpbmZvLmlzX2hlYWRfaGFzX21ldGFfbWljcm9zY29wZV9kYXRhID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGluZm8uX21pY3Jvc2NvcGVfZGF0YV9wYXJhbXMgPSBmb3JtYXQub2JqMnBhcmFtKF9taWNyb3Njb3BlX2RhdGEpO1xuXHRcblx0ICBpbmZvLm1zX2RhdGFfcGFnZV9pZCA9IF9taWNyb3Njb3BlX2RhdGFbJ3BhZ2VJZCddO1xuXHQgIGluZm8ubXNfZGF0YV9zaG9wX2lkID0gX21pY3Jvc2NvcGVfZGF0YVsnc2hvcElkJ107XG5cdCAgaW5mby5tc19kYXRhX2luc3RhbmNlX2lkID0gX21pY3Jvc2NvcGVfZGF0YVsnc2l0ZUluc3RhbmNlSWQnXTtcblx0ICBpbmZvLm1zX2RhdGFfc2l0ZUNhdGVnb3J5SWQgPSBfbWljcm9zY29wZV9kYXRhWydzaXRlQ2F0ZWdvcnknXTtcblx0ICBpbmZvLm1zX3Byb3RvdHlwZV9pZCA9IF9taWNyb3Njb3BlX2RhdGFbJ3Byb3RvdHlwZUlkJ107XG5cdCAgaW5mby5zaXRlX2luc3RhbmNlX2lkX29yX3Nob3BfaWQgPSBpbmZvLm1zX2RhdGFfaW5zdGFuY2VfaWQgfHwgaW5mby5tc19kYXRhX3Nob3BfaWQ7XG5cdFxuXHQgIC8vIOenu+mZpOS6hiBhdHAtYmVhY29uIOWKn+iDve+8jOaaguaXtuS/neeVmeWFpeWPoyBA6LCL5aOrIDIwMTgtMDEtMTBcblx0ICBpbmZvLl9hdHBfYmVhY29uX2RhdGEgPSB7fTtcblx0ICBpbmZvLl9hdHBfYmVhY29uX2RhdGFfcGFyYW1zID0gJyc7XG5cdH07XG5cdFxuXHQvKipcblx0ICogPG1ldGEgbmFtZT1cImRhdGEtc3BtXCIgY29udGVudD1cIjFcIiBkYXRhLXNwbS1wcm90b2NvbD1cImlcIiAvPlxuXHQgKlxuXHQgKiDlj5blvpcgZGF0YS1zcG0g6L+Z5LiqIG1ldGEg5LiK55qEIGRhdGEtc3BtLXByb3RvY29sIOeahOWAvFxuXHQgKiDlpoLmnpzmnInorr7nva7kuJTlgLzkuLogJ2kn77yI5L2/55SoIGltZyDljY/orq7vvInvvIzliJnpobXpnaLkuIrmiYDmnInnmoQgPGE+LzxhcmVhPiDpk77mjqXooqvngrnlh7vml7bpg73kuI3mt7vliqAgc3BtIOWPguaVsO+8jOiAjOaYr1xuXHQgKiDlj5HpgIHkuIDkuKogbmV3IEltYWdlKCkg6K+35rGCXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRTUE1Qcm90b2NvbEZyb21NZXRhIChtZXRhX25vZGVzKSB7XG5cdCAgdmFyIG1ldGFfc3BtX3Byb3RvY29sO1xuXHQgIHZhciBnZXRNZXRhQnlEYXRhc3BtID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9tZXRhO1xuXHQgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcblx0ICAgICAgX21ldGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9ZGF0YS1zcG1dJyk7XG5cdCAgICB9XG5cdCAgICBlYWNoKG1ldGFfbm9kZXMsIGZ1bmN0aW9uIChtKSB7XG5cdCAgICAgIGlmICh1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG0sICduYW1lJykgPT09ICdkYXRhLXNwbScpIHtcblx0ICAgICAgICBfbWV0YSA9IG07XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIF9tZXRhO1xuXHQgIH07XG5cdCAgdmFyIG1ldGEgPSBnZXRNZXRhQnlEYXRhc3BtKCk7XG5cdCAgaWYgKG1ldGEpIHtcblx0ICAgIG1ldGFfc3BtX3Byb3RvY29sID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnZGF0YS1zcG0tcHJvdG9jb2wnKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1ldGFfc3BtX3Byb3RvY29sO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VPbmVQYWdlKGluZm8pIHtcblx0ICB2YXIgY29udGVudCA9IGluZm8uaXNvbmVwYWdlIHx8ICctMSc7XG5cdCAgdmFyIGFycl9jb250ZW50ID0gY29udGVudC5zcGxpdCgnfCcpO1xuXHQgIHZhciBpc29uZXBhZ2UgPSBhcnJfY29udGVudFswXTtcblx0ICB2YXIgdXJscGFnZW5hbWUgPSBhcnJfY29udGVudFsxXSA/IGFycl9jb250ZW50WzFdIDogJyc7XG5cdFxuXHQgIGluZm8uaXNvbmVwYWdlX2RhdGEgPSB7XG5cdCAgICBpc29uZXBhZ2U6IGlzb25lcGFnZSxcblx0ICAgIHVybHBhZ2VuYW1lOiB1cmxwYWdlbmFtZVxuXHQgIH07XG5cdH07XG5cdFxuXHQvKipcblx0ICogQHJldHVybnMge3t9fVxuXHQgKi9cblx0dmFyIGxhc3RfaW5mbztcblx0ZnVuY3Rpb24gZ2V0SW5mbygpIHtcblx0ICBpZiAoZG9jdW1lbnQpIHtcblx0ICAgIHZhciBtZXRhX25vZGVzID0gdXRpbE1ldGEuZ2V0TWV0YVRhZ3MoKTtcblx0ICAgIGdldE1ldGFNaWNyb3Njb3BlRGF0YShtZXRhX25vZGVzKTtcblx0XG5cdCAgICAvLyBzdGVwMeOAgeaLv+WIsOaJgOaciWFwbHVz5YWz6ZSu6K+N5byA5aS055qEbWV0YVZhbHVlXG5cdCAgICBlYWNoKG1ldGFfbm9kZXMsIGZ1bmN0aW9uKG0pe1xuXHQgICAgICB2YXIgbWV0YU5hbWUgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG0sICduYW1lJyk7XG5cdCAgICAgIGlmICgvXmFwbHVzLy50ZXN0KG1ldGFOYW1lKSkge1xuXHQgICAgICAgIGluZm9bbWV0YU5hbWVdID0gdXRpbE1ldGEuZ2V0TWV0YUNudChtZXRhTmFtZSk7XG5cdCAgICAgICAgaWYgKG1ldGFOYW1lID09PSBBUExVU19YX1NFVFRJTkdTKSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBwcmlvcml0eU1ldGFJbmZvID0gaW5mb1ttZXRhTmFtZV0gPSBKU09OLnBhcnNlKHV0aWxNZXRhLmdldE1ldGFDbnQobWV0YU5hbWUpKTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIC8vIHN0ZXAy44CB5ou/5Yiw6Zmk5LqGYXBsdXPlhbPplK7or43lvIDlpLTnmoTvvIzljoblj7LmmrTpnLLnmoTmjqXlj6NtZXRhVmFsdWVcblx0ICAgIGVhY2goa2V5cywgZnVuY3Rpb24gKGspIHtcblx0ICAgICAgaW5mb1trXSA9IHV0aWxNZXRhLmdldE1ldGFDbnQoayk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBpbmZvLnNwbV9wcm90b2NvbCA9IGdldFNQTVByb3RvY29sRnJvbU1ldGEobWV0YV9ub2Rlcyk7XG5cdCAgICBpZiAocHJpb3JpdHlNZXRhSW5mbykge1xuXHQgICAgICBpbmZvID0gdXRpbERhc2guYXNzaWduKGluZm8sIHByaW9yaXR5TWV0YUluZm8pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHN0ZXAz44CB5rWu54K55pWw54m55q6K5aSE55CGXG5cdCAgICB2YXIgZmxvYXRfa2V5cyA9IFsnYXBsdXMtcmF0ZS1haG90J107XG5cdCAgICB2YXIgaTtcblx0ICAgIHZhciBrO1xuXHQgICAgdmFyIGwgPSBmbG9hdF9rZXlzLmxlbmd0aDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpICsrKSB7XG5cdCAgICAgIGsgPSBmbG9hdF9rZXlzW2ldO1xuXHQgICAgICBpbmZvW2tdID0gcGFyc2VGbG9hdChpbmZvW2tdKTtcblx0ICAgIH1cblx0XG5cdCAgICBwYXJzZU9uZVBhZ2UoaW5mbyk7XG5cdCAgfVxuXHQgIGxhc3RfaW5mbyA9IGluZm8gfHwge307XG5cdCAgcmV0dXJuIGluZm87XG5cdH07XG5cdGV4cG9ydHMuZ2V0SW5mbyA9IGdldEluZm87XG5cdFxuXHQvLyDlpoLmnpzmnInnvJPlrZjvvIzkvb/nlKjnvJPlrZjnmoTlgLzvvIzmsqHmnInnvJPlrZjliJnku44gRE9NIOS4reivu+WPllxuXHRleHBvcnRzLnFHZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIGxhc3RfaW5mbyB8fCBnZXRJbmZvKCk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBsb2dnZXJQcmlvcml0eUluZm8gKGspIHtcblx0ICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICBtc2c6ICdwbGVhc2UgZG8gbm90IHJlcGVhdCBzZXRQcmlvcml0eU1ldGFJbmZvICcgKyBrXG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiDliqjmgIHphY3nva5tZXRhXG5cdCAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuXHQgKiDor6bop4HvvJpodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL3Byb2plY3QvcGVyZm9ybWFuY2Vcblx0ICpcblx0ICogQHBhcmFtcyB7U3RyaW5nfSBrXG5cdCAqIEBwYXJhbXMge09iamVjdH0gdlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMgeyBwcmlvcml0eTogMSB9IHx8IG51bGxcblx0ICovXG5cdGV4cG9ydHMuc2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoaywgdikge1xuXHQgIGlmICghbGFzdF9pbmZvKSB7XG5cdCAgICBsYXN0X2luZm8gPSB7fTtcblx0ICB9XG5cdCAgLy8g5YWo5bGA6YWN572u5Y+q6KaB5pyJ5bCx5LiN6IO95YaN5qyh6K6+572u77yM5pWF6L+Z6YeM55u05o6lcmV0dXJuXG5cdCAgaWYgKHR5cGVvZiBwcmlvcml0eU1ldGFJbmZvID09PSAnb2JqZWN0JyAmJiBwcmlvcml0eU1ldGFJbmZvW2tdKSB7XG5cdCAgICBsb2dnZXJQcmlvcml0eUluZm8oayk7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgaWYgKGsgPT09IEFQTFVTX1hfU0VUVElOR1MpIHtcblx0ICAgIGlmICghcHJpb3JpdHlNZXRhSW5mbykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHByaW9yaXR5TWV0YUluZm8gPSB0eXBlb2YgdiA9PT0gJ29iamVjdCcgPyB2IDogSlNPTi5wYXJzZSh2KTtcblx0ICAgICAgICBsYXN0X2luZm8gPSB1dGlsRGFzaC5hc3NpZ24obGFzdF9pbmZvLCBwcmlvcml0eU1ldGFJbmZvKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coZSk7XG5cdCAgICAgIH0gIFxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbG9nZ2VyUHJpb3JpdHlJbmZvKGspO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHRcblx0ICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcblx0ICAgIGxhc3RfaW5mb1trXSA9IHR5cGVvZiB2ID09PSAnb2JqZWN0JyA/IHYgOiBmb3JtYXQucGFyYW0yb2JqKHYpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBsYXN0X2luZm9ba10gPSB2O1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBnZXQgbWV0YUluZm8gYnkga2V5XG5cdCAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuXHQgKiDor6bop4HvvJpodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL3Byb2plY3QvcGVyZm9ybWFuY2Vcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9XG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdHZhciBnZXRNZXRhSW5mbyA9IGZ1bmN0aW9uKGspIHtcblx0ICBpZiAoIWxhc3RfaW5mbykge1xuXHQgICAgbGFzdF9pbmZvID0ge307XG5cdCAgfVxuXHQgIHJldHVybiBsYXN0X2luZm9ba10gfHwgJyc7XG5cdH07XG5cdGV4cG9ydHMuZ2V0TWV0YUluZm8gPSBnZXRNZXRhSW5mbztcblx0XG5cdFxuXHQvKipcblx0ICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG5cdCAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuXHQgKiAgLSBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgY2FsbGVkIG9uIEFycmF5IHZhbHVlcy5cblx0ICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuXHQgKiAgQHBhcmFtIGtcblx0ICogIEBwYXJhbSB2XG5cdCAqL1xuXHRleHBvcnRzLmFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICBpZiAoayAmJiB2KSB7XG5cdCAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG5cdCAgICB2YXIgcHJvY2Vzc09iamVjdCA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZSh2KSA6IHY7XG5cdCAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCB1dGlsRGFzaC5hc3NpZ24ob2xkX3ZhbHVlLCBuZXdfdmFsdWUpKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIH07XG5cdCAgICAvLyBhcGx1cy1hdXRvLWV4cCB8fCBhcGx1cy1hdXRvLWNsa1xuXHQgICAgdmFyIHByb2Nlc3NBcnJheSA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZSh2KSA6IHY7XG5cdCAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBvbGRfdmFsdWUuY29uY2F0KG5ld192YWx1ZSkpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgcHJvY2Vzc09iaiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICBpZiAodmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG5cdCAgICAgICAgcHJvY2Vzc0FycmF5KHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciB0b1NldE1ldGFJbmZvID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICAgICAgYXBsdXMuc2V0TWV0YUluZm8oa2V5LCB2YWx1ZSwge1xuXHQgICAgICAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvZG9jcy9tZXRhI21ldGEtYXBsdXMtZXhpbmZvXG5cdCAgICB2YXIgcHJvY2Vzc0FwbHVzRXhpbmZvID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuXHQgICAgICB2YXIgZXhpbmZvc19uZXcgPSBmb3JtYXQucGFyYW0yb2JqKHYpO1xuXHQgICAgICB0b1NldE1ldGFJbmZvKGssIHV0aWxEYXNoLmFzc2lnbihvbGRfdmFsdWUsIGV4aW5mb3NfbmV3KSk7IC8vIGV4aW5mb3Nfb2xkLmNvbmNhdChleGluZm9zX25ldykuam9pbignJicpXG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBmbGFnO1xuXHQgICAgdmFyIF9vbGRWYWx1ZSA9IGFwbHVzLmdldE1ldGFJbmZvKGspO1xuXHQgICAgaWYgKGsgPT09ICdhcGx1cy1leGluZm8nKSB7XG5cdCAgICAgIHByb2Nlc3NBcGx1c0V4aW5mbyhfb2xkVmFsdWUpO1xuXHQgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIGlmIChfb2xkVmFsdWUpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBfb2xkVmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgcHJvY2Vzc09iaihfb2xkVmFsdWUpO1xuXHQgICAgICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB2YXIgdG1wX3BhcnNlID0gSlNPTi5wYXJzZShfb2xkVmFsdWUpO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiB0bXBfcGFyc2UgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3NPYmoodG1wX3BhcnNlKTtcblx0ICAgICAgICAgICAgZmxhZyA9IHRydWU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKCFmbGFnKSB7XG5cdCAgICAgIHRvU2V0TWV0YUluZm8oaywgdik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDMzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3V0aWwvZm9ybWF0LmpzXG5cdCAqIOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB0cnlUb0RlY29kZSA9IHJlcXVpcmUoJy4vdHJ5VG9EZWNvZGUnKTtcblx0XG5cdGV4cG9ydHMuYXJyMm9iaiA9IGZ1bmN0aW9uIChhcnIpIHtcblx0ICB2YXIgcmV0ID0ge307XG5cdCAgdmFyIGs7XG5cdCAgdmFyIHY7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgayA9IGFycltpXVswXTtcblx0ICAgIHYgPSBhcnJbaV1bMV07XG5cdCAgICByZXRba10gPSB2O1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIHBhcmFtIHRvIG9iamVjdFxuXHQgKiDlsIbkuIDkuKrnroDljZXnmoTlvaLlpoIgYT0xJmI9MiZjPTMg6L+Z5qC355qE5Y+C5pWw6L2s5YyW5Li6566A5Y2V55qEIG9iamVjdCDmoLzlvI/vvIzlpoLvvJpcblx0ICoge1xuXHQgKiAgIGE6IFwiMVwiLFxuXHQgKiAgIGI6IFwiMlwiLFxuXHQgKiAgIGM6IFwiM1wiXG5cdCAqIH1cblx0ICogQHBhcmFtIHBhcmFtcyB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5wYXJhbTJvYmogPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm4gcGFyYW1zO1xuXHQgIH1cblx0ICB2YXIgb2JqID0ge307XG5cdCAgaWYgKCFwYXJhbXMgfHwgdHlwZW9mIHBhcmFtcyAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiBvYmo7XG5cdCAgfVxuXHQgIHZhciBhID0gcGFyYW1zLnNwbGl0KCcmJyk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgaXRlbSA9IGFbaV07XG5cdCAgICB2YXIgaW5kZXggPSBpdGVtLmluZGV4T2YoJz0nKTtcblx0ICAgIHZhciBmcmFnbWVudCA9IGl0ZW0uc3BsaXQoJz0nKTtcblx0ICAgIHZhciBsZW4gPSBpdGVtLmxlbmd0aDtcblx0ICAgIGlmIChmcmFnbWVudC5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgb2JqW2ZyYWdtZW50WzBdXSA9IGZyYWdtZW50WzFdIHx8ICcnOyAgXG5cdCAgICB9IGVsc2UgaWYgKGluZGV4ID4gMCkge1xuXHQgICAgICB2YXIga2V5ID0gaXRlbS5zbGljZSgwLCBpbmRleCk7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGl0ZW0uc2xpY2UoaW5kZXggKyAxLCBsZW4pIHx8ICcnO1xuXHQgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JqW2ZyYWdtZW50WzBdXSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRcblx0Ly8gY29uc29sZS5sb2coJ1RPRE8gZGVsZXRlIHNfcGxhaW5fb2JqJyk7XG5cdHZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5cdGV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblx0XG5cdC8qKlxuXHQgKiBhcnJheSB0byBwYXJhbVxuXHQgKiDlsIbkuIDkuKrnroDljZXnmoTmlbDnu4TovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j++8jFxuXHQgKiDlhbbkuK3mlbDnu4TkuLpcblx0ICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuXHQgKiDnmoTlvaLlvI/jgIJcblx0ICog5LiOIG9iajJwYXJhbSDnm7jmr5TvvIzov5nkuKrmlrnms5XnmoTlpb3lpITmmK/lj6/ku6Xkv53or4HmnIDlkI7lj4LmlbDnmoTpobrluo9cblx0ICogQHBhcmFtIGFyciB7QXJyYXl9XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGFycjJwYXJhbShhcnIsIHNraXBFbmNvZGUpIHtcblx0ICB2YXIgYSA9IFtdLFxuXHQgICAgayxcblx0ICAgIHYsXG5cdCAgICBpLFxuXHQgICAgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHZhciBpc0luUGxhbk9iaiA9IGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDA7XG5cdCAgICB2YXIgX3ZhbHVlID0gaXNJblBsYW5PYmogfHwgc2tpcEVuY29kZSA/IHYgOiBlbmNvZGVVUklDb21wb25lbnQodik7XG5cdCAgICBhLnB1c2goaXNJblBsYW5PYmogPyBfdmFsdWUgOiAoayArICc9JyArIF92YWx1ZSkpO1xuXHQgIH1cblx0ICByZXR1cm4gYS5qb2luKCcmJyk7XG5cdH07XG5cdGV4cG9ydHMuYXJyMnBhcmFtID0gYXJyMnBhcmFtO1xuXHRcblx0LyoqXG5cdCAqIG9iamVjdCB0byBwYXJhbVxuXHQgKiDlsIbkuIDkuKrnroDljZXlr7nosaHovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j1xuXHQgKiDlj4Lop4EgYXJyMnBhcmFtKCkg5pa55rOVXG5cdCAqIEBwYXJhbSBvYmoge09iamVjdH1cblx0ICogQHBhcmFtIGNvbW1UcmFuc2xhdGUge0Jvb2xlYW59IOaZrumAmui9rOaNouS4jeWBmmlzU3RhcnRXaXRo5qCh6aqMXG5cdCAqXG5cdCAqL1xuXHRleHBvcnRzLm9iajJwYXJhbSA9IGZ1bmN0aW9uIChvYmosIGNvbW1UcmFuc2xhdGUpIHtcblx0ICB2YXIgYSA9IFtdO1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHQgIHZhciBfdjtcblx0ICBmb3IgKGsgaW4gb2JqKVxuXHQgIC8vIFRPRE86IOWvueS6jmV4YXJncyBrZXksIHZhbHVlIOS5n+aYr29iauexu+Wei++8jOmcgOimgemAkuW9kuino+aekCBA6ZKw5pitXG5cdCAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBvYmpba10gPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgdiA9ICcnICsgdGhpcy5vYmoycGFyYW0ob2JqW2tdKTtcblx0ICAgICAgICBfdiA9IHY7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdiA9ICcnICsgb2JqW2tdO1xuXHQgICAgICAgIF92ID0gayArICc9JyArIHY7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFjb21tVHJhbnNsYXRlKSB7XG5cdCAgICAgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogX3YpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGEucHVzaChfdik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICByZXR1cm4gYS5qb2luKCcmJyk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmVuY29kZUdva2V5VmFsdWUgPSBmdW5jdGlvbiAoZ29rZXkpIHtcblx0ICAvLyB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAvLyAvLyDlr7lnb2tleeWGheeahHZhbHVl57uf5LiA5Yqg5LiA5bGC57yW56CBXG5cdCAgLy8gaWYgKHR5cGVvZiBnb2tleSA9PT0gJ29iamVjdCcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgLy8gICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG5cdCAgLy8gICAgIGlmICh0eXBlb2YgZ29rZXlba10gPT09ICdzdHJpbmcnKSB7XG5cdCAgLy8gICAgICAgdHJ5IHtcblx0ICAvLyAgICAgICAgIGdva2V5W2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChnb2tleVtrXSkpO1xuXHQgIC8vICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgLy8gICAgIH1cblx0ICAvLyAgIH1cblx0ICAvLyB9XG5cdCAgcmV0dXJuIGdva2V5O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5hc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdC8qKlxuXHQgKiDnlJ/miJDkuIDkuKrnlKjkuo7pgb/lhY3nvJPlrZjnmoTpmo/mnLrmlbBcblx0ICog5Li65LqG5YeP5bCRIHVybCDplb/luqbvvIzov5nkuKrpmo/mnLrmlbDmja7nmoTplb/luqblrprkuLogNyDkvY3vvIxcblx0ICog5Li65LqG5YeP5bCR56Kw5pKe77yM5L2/55SoIDE2IOi/m+WItuaVsOWtl1xuXHQgKlxuXHQgKiAyNjg0MzU0NTYgPSAyIF4gMjggPSAweGZmZmZmZmYgKyAxXG5cdCAqL1xuXHRleHBvcnRzLm1ha2VDYWNoZU51bSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjY4NDM1NDU2KS50b1N0cmluZygxNik7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+WQpuS7peWtl+espuS4siBzMiDlvIDlpLRcblx0ICogQHBhcmFtIHMxIHtTdHJpbmd9XG5cdCAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5pc1N0YXJ0V2l0aCA9IGZ1bmN0aW9uKHMxLCBzMikge1xuXHQgIHJldHVybiBzMS5pbmRleE9mKHMyKSA9PT0gMDtcblx0fTtcblx0LyoqXG5cdCAqIOWIpOaWreWtl+espuS4siBzMSDmmK/ku6XlrZfnrKbkuLIgczIg57uT5bC+XG5cdCAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuXHQgKiBAcGFyYW0gczIge1N0cmluZ31cblx0ICovXG5cdGV4cG9ydHMuaXNFbmRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG5cdCAgaWYgKCFTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoKSB7XG5cdCAgICB2YXIgbDEgPSBzMS5sZW5ndGgsIGwyID0gczIubGVuZ3RoO1xuXHQgICAgcmV0dXJuIGwxID49IGwyICYmIHMxLnN1YnN0cmluZyhsMSAtIGwyKSA9PT0gczI7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBzMS5lbmRzV2l0aChzMik7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5hbnkgPSBmdW5jdGlvbihhcnIsIGZuKSB7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIGwgPSBhcnIubGVuZ3RoO1xuXHQgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgIGlmIChmbihhcnJbaV0pKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzTnVtYmVyID0gZnVuY3Rpb24odikge1xuXHQgIHJldHVybiB0eXBlb2YgdiA9PT0gJ251bWJlcic7XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzTmFOID0gZnVuY3Rpb24odikge1xuXHQgIGlmKGlzTmFOKSB7XG5cdCAgICByZXR1cm4gaXNOYU4odik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB2ICE9PSB2O1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5ZCm5YyF5ZCr5a2X56ym5LiyIHMyXG5cdCAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuXHQgKiBAcGFyYW0gczIge1N0cmluZ31cblx0ICovXG5cdGV4cG9ydHMuaXNDb250YWluID0gZnVuY3Rpb24gKHMxLCBzMikge1xuXHQgIHJldHVybiBzMS5pbmRleE9mKHMyKSA+IC0xO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOWFi+mahuS4gOS4qm9iamVjdFxuXHQgKi9cblx0dmFyIGNsb25lRGVlcCA9IGZ1bmN0aW9uKG9iaikge1xuXHQgIHZhciBzdHI7XG5cdCAgdmFyIG5ld29iaiA9IG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyBbXSA6IHt9O1xuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG5cdCAgICBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopOyAvL+ezu+WIl+WMluWvueixoVxuXHQgICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmb3IgKHZhciBpIGluIG9iaikge1xuXHQgICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbmV3b2JqO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jbG9uZURlZXAgPSBjbG9uZURlZXA7XG5cdFxuXHQvKipcblx0ICog6I635Y+WdXJs5Y+C5pWwLOS7hemZkHdlYuOAgWg1XG5cdCAqL1xuXHR2YXIgZ2V0VXJsUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciByZWdleCA9IC9bPyZdKFtePSNdKyk9KFteJiNdKikvZztcblx0ICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG5cdCAgdmFyIHBhcmFtcyA9IHt9O1xuXHQgIHZhciBtYXRjaDtcblx0ICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKHVybCkpIHtcblx0ICAgIHBhcmFtc1ttYXRjaFsxXV0gPSBtYXRjaFsyXTtcblx0ICB9XG5cdCAgcmV0dXJuIHBhcmFtcztcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0VXJsUGFyYW1zID0gZ2V0VXJsUGFyYW1zO1xuXHRcblx0LyoqXG5cdCAqIOWIpOaWreepuuWvueixoVxuXHQgKi9cblx0dmFyIGlzRW1wdHlPYmplY3QgPSBmdW5jdGlvbihvKSB7XG5cdCAgaWYoIW8pIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH07XG5cdCAgZm9yICh2YXIgayBpbiBvKSB7XG5cdCAgICBpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgaykpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0ZXhwb3J0cy5pc0VtcHR5T2JqZWN0ID0gaXNFbXB0eU9iamVjdDtcblxuLyoqKi8gfSksXG4vKiAzNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFxuXHQvKipcblx0ICog5a+56LGhbWVyZ2Vcblx0ICogIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRhcmdldE9iaiwgYXJnc09iaikge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICAgICAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG5cdCAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgICAgdmFyIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuXHQgICAgICAgIGlmIChuZXh0U291cmNlICE9PSBudWxsKSB7IC8vIFNraXAgb3ZlciBpZiB1bmRlZmluZWQgb3IgbnVsbFxuXHQgICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBuZXh0U291cmNlKSB7XG5cdCAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobmV4dFNvdXJjZSwgbmV4dEtleSkpIHtcblx0ICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRvO1xuXHQgICAgfSh0YXJnZXRPYmosIGFyZ3NPYmopO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGFyZ2V0T2JqLCBhcmdzT2JqKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMzYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxUcmltID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdHZhciB1dGlsU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBhcGx1c1V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHRyeVRvRGVjb2RlVVJJQ29tcG9uZW50OiBmdW5jdGlvbiAodmFsLCBkZWZhdWx0X3ZhbCkge1xuXHQgICAgdmFyIHYgPSBkZWZhdWx0X3ZhbCB8fCAnJztcblx0ICAgIGlmICh2YWwpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbCk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHY7XG5cdCAgfSxcblx0ICBcblx0ICAvKipcblx0ICAgKiDlsIblvaLlpoIgXCJwYWdlSWQ9MTIzOyBzaXRlSWQ9NDU2XCIg55qE5YaF5a656Kej5p6Q5Li6IE9iamVjdFxuXHQgICAqIEBwYXJhbSBzIHtTdHJpbmd9XG5cdCAgICogQHBhcmFtIFtkaWN0XSB7T2JqZWN0fVxuXHQgICAqIEByZXR1cm4ge09iamVjdH1cblx0ICAgKi9cblx0ICBwYXJzZVNlbWljb2xvbkNvbnRlbnQ6IGZ1bmN0aW9uIChzLCBkaWN0LCB1bmRlY29kZSkge1xuXHQgICAgZGljdCA9IGRpY3QgfHwge307XG5cdCAgICB2YXIgYSA9IHMuc3BsaXQoJzsnKTtcblx0ICAgIHZhciBqO1xuXHQgICAgdmFyIGFfbGVuID0gYS5sZW5ndGg7XG5cdCAgICB2YXIgYTI7XG5cdFxuXHQgICAgZm9yIChqID0gMDsgaiA8IGFfbGVuOyBqKyspIHtcblx0ICAgICAgYTIgPSBhW2pdLnNwbGl0KCc9Jyk7XG5cdCAgICAgIHZhciBfdmFsdWUgPSB1dGlsVHJpbS50cmltKGEyLnNsaWNlKDEpLmpvaW4oJz0nKSk7XG5cdCAgICAgIGRpY3RbdXRpbFRyaW0udHJpbShhMlswXSkgfHwgJyddID0gdW5kZWNvZGUgPyBfdmFsdWUgOiB0aGlzLnRyeVRvRGVjb2RlVVJJQ29tcG9uZW50KF92YWx1ZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGRpY3Q7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5bCG5LiA5LiqIG5vZGUgbGlzdCDovazkuLrmlbDnu4Rcblx0ICAgKiBAcGFyYW0gbm9kZXMge05vZGVMaXN0fVxuXHQgICAqIOWPguinge+8mmh0dHA6Ly93d3cucGxhbmFiYy5uZXQvMjAxMC8wMS8wNi9hcmd1bWVudHNfdG9fYXJyYXkvXG5cdCAgICovXG5cdCAgbm9kZUxpc3RUb0FycmF5OiBmdW5jdGlvbiAobm9kZXMpIHtcblx0ICAgIHZhciBhcnI7XG5cdCAgICB2YXIgbGVuZ3RoO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIC8vIHdvcmtzIGluIGV2ZXJ5IGJyb3dzZXIgZXhjZXB0IElFXG5cdCAgICAgIGFyciA9IFtdLnNsaWNlLmNhbGwobm9kZXMpO1xuXHQgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgIC8vIHNsb3dlciwgYnV0IHdvcmtzIGluIElFXG5cdCAgICAgIGFyciA9IFtdO1xuXHQgICAgICBsZW5ndGggPSBub2Rlcy5sZW5ndGg7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYXJyLnB1c2gobm9kZXNbaV0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGdldExzQ25hOiBmdW5jdGlvbiAoRVRBR19TVE9SQUdFX0tFWSwgZGF0ZSkge1xuXHQgICAgaWYgKHV0aWxTdG9yZS5nZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICB2YXIgX2xzX2NuYSA9ICcnO1xuXHQgICAgICB2YXIgX3ZhbHVlID0gdXRpbFN0b3JlLmdldChFVEFHX1NUT1JBR0VfS0VZKTtcblx0ICAgICAgaWYgKF92YWx1ZSkge1xuXHQgICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCdfJykgfHwgW107XG5cdCAgICAgICAgaWYgKGRhdGUpIHtcblx0ICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgJiYgZGF0ZSA9PT0gX2FyclswXSA/IF9hcnJbMV0gOiAnJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgX2xzX2NuYSA9IF9hcnIubGVuZ3RoID4gMSA/IF9hcnJbMV0gOiAnJztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChfbHNfY25hKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvLyB1dGlsU3RvcmUuc2V0KHRoaXMuRVRBR19TVE9SQUdFX0tFWSwgIHRoaXMudG9kYXkgKyAnXycgKyBlbmNvZGVVUklDb21wb25lbnQoY25hKSk7XG5cdCAgc2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCB0b2RheSwgY25hKSB7XG5cdCAgICBpZiAoY25hICYmIHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICB1dGlsU3RvcmUuc2V0KEVUQUdfU1RPUkFHRV9LRVksICB0b2RheSArICdfJyArIGVuY29kZVVSSUNvbXBvbmVudChjbmEpKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIFxuXHQgIGdldExzSW1wdjogZnVuY3Rpb24oSU1QUklOVF9TVE9SQUdFX0tFWSwgZGF0ZSkge1xuXHQgICAgaWYgKHV0aWxTdG9yZS5nZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICB2YXIgX2xzX2ltcHYgPSAnJztcblx0ICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoSU1QUklOVF9TVE9SQUdFX0tFWSk7XG5cdCAgICAgIGlmIChfdmFsdWUpIHtcblx0ICAgICAgICB2YXIgX2FyciA9IF92YWx1ZS5zcGxpdCgnfHwnKSB8fCBbXTtcblx0ICAgICAgICBpZiAoZGF0ZSkge1xuXHQgICAgICAgICAgX2xzX2ltcHYgPSBfYXJyLmxlbmd0aCA+IDEgJiYgZGF0ZSA9PT0gX2FyclswXSA/IF9hcnJbMV0gOiAnJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgX2xzX2ltcHYgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoX2xzX2ltcHYpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHNldExzSW1wdjogZnVuY3Rpb24oSU1QUklOVF9TVE9SQUdFX0tFWSwgdG9kYXksIGltcHYpIHtcblx0ICAgIGlmIChpbXB2ICYmIHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICB1dGlsU3RvcmUuc2V0KElNUFJJTlRfU1RPUkFHRV9LRVksIHRvZGF5ICsgJ3x8JyArIGVuY29kZVVSSUNvbXBvbmVudChpbXB2KSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdFxuXHQgIHNldExzUmVtb3RlQ2ZnOiBmdW5jdGlvbihSRU1PVEVfQ09ORklHX1NUT1JBR0VfS0VZLCB0b2RheSwgY2ZnKSB7XG5cdCAgICBpZiAoY2ZnICYmIHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICB2YXIgY2xvbmVDZmcgPSB1dGlsRGFzaC5jbG9uZURlZXAoY2ZnKTtcblx0ICAgICAgaWYgKHR5cGVvZiBjbG9uZUNmZyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBjbG9uZUNmZyA9IEpTT04uc3RyaW5naWZ5KGNsb25lQ2ZnKTtcblx0ICAgICAgfVxuXHQgICAgICB1dGlsU3RvcmUuc2V0KFJFTU9URV9DT05GSUdfU1RPUkFHRV9LRVksIHRvZGF5ICsgJ3x8JyArIGVuY29kZVVSSUNvbXBvbmVudChjbG9uZUNmZykpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHRcblx0ICBnZXRMc1JlbW90ZUNmZzogZnVuY3Rpb24oUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSwgZGF0ZSkge1xuXHQgICAgaWYgKHV0aWxTdG9yZS5nZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICB2YXIgX2xzX3JlbW90ZUNmZyA9ICcnO1xuXHQgICAgICB2YXIgX3ZhbHVlID0gdXRpbFN0b3JlLmdldChSRU1PVEVfQ09ORklHX1NUT1JBR0VfS0VZKTtcblx0ICAgICAgaWYgKF92YWx1ZSkge1xuXHQgICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCd8fCcpIHx8IFtdO1xuXHQgICAgICAgIGlmIChkYXRlKSB7XG5cdCAgICAgICAgICBfbHNfcmVtb3RlQ2ZnID0gX2Fyci5sZW5ndGggPiAxICYmIGRhdGUgPT09IF9hcnJbMF0gPyBfYXJyWzFdIDogJyc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIF9sc19yZW1vdGVDZmcgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBqc29uVXRpbC5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoX2xzX3JlbW90ZUNmZykpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGdldFVybDogZnVuY3Rpb24gKHVybCkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQgICAgdmFyIGVnVXJsID0gdXJsIHx8ICcvL2xvZy5tbXN0YXQuY29tL2VnLmpzJztcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciByaG9zdF92ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcblx0ICAgICAgcmhvc3RfdiA9IGFwbHVzVXRpbC5maXhEb21haW4ocmhvc3RfdikucmVwbGFjZSgvXFwvXFx3Ky5naWYkLywnJyk7XG5cdCAgICAgIC8vIHZhciByZWcgPSAvW1thLXp8XFwtfFxcX3wwLTlcXC5dK1thLXp8XFwtfFxcX3wwLTldKDpcXGQqKT8vO1xuXHQgICAgICAvLyB2YXIgY3VzdG9tX2hvc3QgPSByaG9zdF92Lm1hdGNoKHJlZyk7XG5cdCAgICAgIC8vIGlmIChjdXN0b21faG9zdCAmJiBjdXN0b21faG9zdFswXSkge1xuXHQgICAgICAvLyAgIC8vIGVnVXJsID0gZWdVcmwucmVwbGFjZShyZWcsIGN1c3RvbV9ob3N0WzBdKTtcblx0ICAgICAgLy8gfVxuXHQgICAgICBlZ1VybCA9IHJob3N0X3YgKyAnL2VnLmpzJztcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIH1cblx0ICAgIHJldHVybiBlZ1VybDtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5a+55a2X56ym5Liy6L+b6KGMdHJpbeWkhOeQhlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiDljrvmjonlrZfnrKbkuLIgcyDliY3lkI7nmoTnqbrmoLxcblx0ICogQHBhcmFtIHMge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIHRyaW0ocykge1xuXHQgIHJldHVybiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSA/IHMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpIDogJyc7XG5cdH07XG5cdGV4cG9ydHMudHJpbSA9IHRyaW07XG5cblxuLyoqKi8gfSksXG4vKiAzOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBzZXQ6IGZ1bmN0aW9uIChrLCB2KSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrLCB2KTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8vIOe7j+i/h3Rlc3TkuYvlkI5nZXTlupTor6XkuI3kvJrmnInpl67pophcblx0ICBnZXQ6IGZ1bmN0aW9uIChrKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oayk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICB9LFxuXHQgIHRlc3Q6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciB0ZXN0S2V5ID0gJ2dyZXlfdGVzdF9rZXknO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGVzdEtleSwgMSk7XG5cdCAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRlc3RLZXkpO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiAoaykge1xuXHQgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oayk7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOagh+WHhuW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuXHQvLyB2YXIgZm9ybWF0ID0gcmVxdWlyZSgnLi9mb3JtYXQnKTtcblx0XG5cdHZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5cdGV4cG9ydHMubWtQbGFpbktleSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gc19wbGFpbl9vYmogKyBNYXRoLnJhbmRvbSgpO1xuXHR9O1xuXHRleHBvcnRzLnNfcGxhaW5fb2JqID0gc19wbGFpbl9vYmo7XG5cdFxuXHQvLyAyMDE2LTA4LTI0IOeQrOWtkOmcgOaxgu+8jGV4cGFyYW1z5Y2V54us5aSE55CG77yMd2luZHZhbmXph4zpnIDopoEgQOiwi+Wjq1xuXHRleHBvcnRzLm1rUGxhaW5LZXlGb3JFeHBhcmFtcyA9IGZ1bmN0aW9uKGtleV9wcmVmaXgpIHtcblx0ICB2YXIgX2tleSA9IGtleV9wcmVmaXggfHwgc19wbGFpbl9vYmo7XG5cdCAgcmV0dXJuIF9rZXkgKyAnZXhwYXJhbXMnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGFycmF5IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG5cdCAqIOWFtuS4reaVsOe7hOS4ulxuXHQgKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG5cdCAqIOeahOW9ouW8j+OAglxuXHQgKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuXHQgKiBAcGFyYW0gYXJyIHtBcnJheX1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyMnBhcmFtKGFycikge1xuXHQgIHZhciBhID0gW10sXG5cdCAgICBrLFxuXHQgICAgdixcblx0ICAgIGksXG5cdCAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogKGsgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodikpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGEuam9pbignJicpO1xuXHR9O1xuXHRleHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblx0XG5cdFxuXHQvKipcblx0ICogcGFyYW0gdG8gYXJyYXlcblx0ICogMjAxNi0wOC0yNCDmlL7lvIDvvIznlKjmnaXlpITnkIZleHBhcmFtcyBA6LCL5aOrXG5cdCAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG5cdCAqIFtbXCJhXCIsIFwiMVwiXSwgW1wiYlwiLCBcIjJcIl0sIFtcImNcIiwgXCIzXCJdXVxuXHQgKlxuXHQgKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLnBhcmFtMmFyciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG5cdCAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuXHQgICAgaXRlbSxcblx0ICAgIGFyciA9IFtdO1xuXHQgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYVtpXS5zcGxpdChcIj1cIik7XG5cdCAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYXJyO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgaTtcblx0ICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHJldFtrXSA9IHY7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdC8vIOS7heaUr+aMgeS4gOe6p2pzb27nu5PmnoRcblx0ZXhwb3J0cy5qc29uTGlrZVN0cjJKU09OID0gZnVuY3Rpb24oanNvblN0cikge1xuXHQgIGlmICghanNvblN0ciB8fCB0eXBlb2YganNvblN0ciAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdCAgdmFyIHN0ciA9IGpzb25TdHIucmVwbGFjZSgvWydcInt9XSsvZywgJycpO1xuXHQgIHZhciBhcnIxID0gc3RyLnNwbGl0KCcsJyk7IFxuXHQgIHZhciBhcnIyID0gW107IFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuXHQgICAgYXJyMi5wdXNoKGFycjFbaV0uc3BsaXQoJzonKSk7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB0aGlzLmFycjJvYmooYXJyMik7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZml4RG9tYWluID0gZnVuY3Rpb24odXJsKSB7ICBcblx0ICBpZiAodXJsLmluZGV4T2YoJ2h0dHBzOi8vJykgIT09IC0xIHx8IHVybC5pbmRleE9mKCdodHRwOi8vJykgIT09IC0xKSB7XG5cdCAgICByZXR1cm4gdXJsO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB1cmwgPSAoL15cXC9cXC8vLnRlc3QodXJsKSA/ICcnIDogJy8vJykgKyB1cmw7ICAgIFxuXHQgICAgaWYgKC9eXFwvXFwvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICByZXR1cm4gJ2h0dHA6JyArIHVybDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnaHR0cHM6JyArIHVybDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEFwcEtleSA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IF9fd2VicGFja19yZXF1aXJlX18oMikuZ2V0R2xvYmFsVmFsdWUoXCJhcGx1c1wiKTtcblx0ICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcGtleScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJZCcpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBLZXknKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jaGVja0RvbWFpbiA9IGZ1bmN0aW9uKHVybCkge1xuXHQgIHZhciByZWcgPSBuZXcgUmVnRXhwKC9eKChodHRwfGh0dHBzfCcnKTpcXC9cXC8pPyhbYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfShcXC5bYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfSkrKDpbMC05XXsxLDV9KSopJC8pO1xuXHQgIHZhciBtYXRjaGVkID0gKHVybC5tYXRjaChyZWcpIHx8IFtdKVswXTsgIFxuXHQgIGlmICghdXJsIHx8ICFtYXRjaGVkKSB7XG5cdCAgICB2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdCAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdChcIiFcIikpO1xuXHQgICAgdWxvZygpLnRpcF93KFwidHJhY2tEb21haW4gZXJyb3IsIHBsZWFzZSBjaGVjayBhcGx1cy1yaG9zdC12IHNldHRpbmcsIGN1cnJlbnQgdmFsdWUgaXM6IFwiICsgdXJsIHx8ICd1bmRlZmluZWQnKTtcblx0ICAgIHVsb2coKS50aXBfdyhcIndlIGFjY2VwdCB0aGVzZSB0aHJlZSBwYXR0ZXJuczpcIik7XG5cdCAgICB1bG9nKCkudGlwX3coXCJlZzE6IGh0dHBzOi8vdGVzdC1xdHJhY2tpbmcteHh4LmNvbTpwb3J0LCBwb3J0IGlzIG9wdGlvbmFsXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KFwiZWcyOiBodHRwOi8vdGVzdC1xdHJhY2tpbmcteHh4LmNvbTpwb3J0LCBwb3J0IGlzIG9wdGlvbmFsXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KFwiZWczOiB0ZXN0LXF0cmFja2luZy14eHguY29tOnBvcnQsIHBvcnQgaXMgb3B0aW9uYWxcIik7XG5cdCAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdChcIiFcIikpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH0gXG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHRleHBvcnRzLmNoZWNrT3BlbmlkID0gZnVuY3Rpb24ob2QpIHtcblx0ICBpZiAoIW9kKSB7XG5cdCAgICB2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdCAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdCgnIScpKTtcblx0ICAgIHVsb2coKS50aXBfdyhcIlFUIG5lZWQgYW4gdW5pcXVlIGlkIGFzIFFUJ3MgZGV2aWNlaWQhIVwiKTtcblx0ICAgIHVsb2coKS50aXBfdyhcInNldHRpbmcgZXhhbXBsZXM6IGFwbHVzX3F1ZXVlLnB1c2goe2FjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJywgYXJndW1lbnRzOiBbJ19hbm9ueV9pZCcsIHh4eHh4eF19KTtcIik7XG5cdCAgICB1bG9nKCkudGlwX3coXCJyZWZlcnJlbmNlIGRvY3VtZW50OiBodHRwczovL3QudGIuY24vMWRUSGpUVFFGMFVqT1ROSGlDa2FDU1wiKTtcblx0ICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KCchJykpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdGV4cG9ydHMubWFwRXZlbnRTYW1wbGVSYXRlcyA9IGZ1bmN0aW9uKGFycikge1xuXHQgIHZhciByZXN1bHQgPSBbXTtcblx0ICBlYWNoKGFyciwgZnVuY3Rpb24oaXRlbSl7XG5cdCAgICBpZiAoaXRlbS5ldmVudElkcyAmJiBpdGVtLmV2ZW50SWRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgZWFjaChpdGVtLmV2ZW50SWRzLCBmdW5jdGlvbihla3Ype1xuXHQgICAgICAgIHJlc3VsdC5wdXNoKHtcblx0ICAgICAgICAgIGV2ZW50SWQ6IGVrdixcblx0ICAgICAgICAgIHNhbXBsaW5nUmF0ZTogaXRlbS5zYW1wbGluZ1JhdGVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDml6Xlv5fnsbvlt6Xlhbfpm4blkIhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvIDp7XG5cdCAqICAgbGV2ZWw6ICd3YXJuL2luZm8vbG9nJyBkZWZhdWx0IGlzIHdhcm5cblx0ICogICBtc2c6ICdtc2cnXG5cdCAqIH1cblx0ICovXG5cdHZhciBtZXRhSW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgcHJlZml4ID0gJ1tBUExVU10gLS0gJztcblx0ZXhwb3J0cy5sb2dnZXIgPSBmdW5jdGlvbiAobykge1xuXHQgIGlmICghbykge1xuXHQgICAgbyA9IHt9O1xuXHQgIH1cblx0ICB2YXIgbGV2ZWwgPSBvLmxldmVsIHx8ICd3YXJuJztcblx0ICBjb25zb2xlICYmIGNvbnNvbGVbbGV2ZWxdICYmIGNvbnNvbGVbbGV2ZWxdKHByZWZpeCtvLm1zZyk7XG5cdH07XG5cdGV4cG9ydHMubG9nID0gZnVuY3Rpb24oKXtcblx0ICB2YXIgZGVidWcgPSBtZXRhSW5mbyAmJiBtZXRhSW5mby5nZXRNZXRhSW5mbygnZGVidWcnKTtcblx0ICBkZWJ1ZyAmJiBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLFtwcmVmaXhdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWJ1Z0xvZyA9IGZ1bmN0aW9uKG8pIHtcblx0ICB2YXIgYXBsdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnKSB7XG5cdCAgICB0aGlzLmxvZ2dlcihvKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog6I635Y+W6aG16Z2i5LiK55qEIDxtZXRhPiDkuK3kuI4gYXBsdXMg5omT54K555u45YWz55qE5YC8XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHRcblx0dmFyIGluZm8gPSB7fTtcblx0XG5cdHZhciBPQkpFQ1QgPSAnb2JqZWN0Jztcblx0dmFyIFNUUklORyA9ICdzdHJpbmcnO1xuXHRcblx0LyoqXG5cdCAqIEByZXR1cm5zIHt7fX1cblx0ICovXG5cdHZhciBsYXN0X2luZm87XG5cdGZ1bmN0aW9uIGdldEluZm8oKSB7XG5cdCAgbGFzdF9pbmZvID0gaW5mbyB8fCB7fTtcblx0ICByZXR1cm4gaW5mbztcblx0fTtcblx0ZXhwb3J0cy5nZXRJbmZvID0gZ2V0SW5mbztcblx0XG5cdC8vIOWmguaenOaciee8k+WtmO+8jOS9v+eUqOe8k+WtmOeahOWAvO+8jOayoeaciee8k+WtmOWImeS7jiBET00g5Lit6K+75Y+WXG5cdGZ1bmN0aW9uIHFHZXQgKCkge1xuXHQgIHJldHVybiBsYXN0X2luZm8gfHwgZ2V0SW5mbygpO1xuXHR9O1xuXHRleHBvcnRzLnFHZXQgPSBxR2V0O1xuXHRcblx0LyoqXG5cdCAqIOWKqOaAgemFjee9rm1ldGFcblx0ICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG5cdCAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga1xuXHQgKiBAcGFyYW0ge09iamVjdH0gdlxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0TWV0YUluZm8gKGssIHYpIHtcblx0ICBpZiAoIWxhc3RfaW5mbykge1xuXHQgICAgbGFzdF9pbmZvID0ge307XG5cdCAgfVxuXHQgIGlmKGsgPT09ICdhcGx1cy1pbmplY3QtcmVjb3JkLWdva2V5Jyl7XG5cdCAgICBjYXRjaEV4Y2VwdGlvbigndGhlIEFQSSBhcGx1cy1pbmplY3QtcmVjb3JkLWdva2V5IGlzIGRlcHJlY2F0ZWQsIGlmIG5lZWRlZCBwbGVhc2UgY29uY2F0IEFQTFVTIFNESyBzdXBwb3J0ZXInKTtcblx0ICAgIGFwbHVzLnJlY29yZCgnL2luamVjdC5yZWNvcmQuZ29rZXknLCdPVEhFUicsJycpO1xuXHQgIH1cblx0ICBsYXN0X2luZm9ba10gPSB2O1xuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRleHBvcnRzLnNldE1ldGFJbmZvID0gc2V0TWV0YUluZm87XG5cdFxuXHRcblx0dmFyIGNhdGNoRXhjZXB0aW9uID0gZnVuY3Rpb24gKG1zZykge1xuXHQgIHRyeSB7XG5cdCAgICBjb25zb2xlICYmIGNvbnNvbGUuZXJyb3IobXNnKTtcblx0ICB9IGNhdGNoIChlKSB7fVxuXHR9O1xuXHRleHBvcnRzLmNhdGNoRXhjZXB0aW9uID0gY2F0Y2hFeGNlcHRpb247XG5cdFxuXHQvKipcblx0ICogZ2V0IG1ldGFJbmZvIGJ5IGtleVxuXHQgKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcblx0ICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHR2YXIgZ2V0TWV0YUluZm8gPSBmdW5jdGlvbihrKSB7XG5cdCAgaWYgKCFsYXN0X2luZm8pIHtcblx0ICAgIGxhc3RfaW5mbyA9IHt9O1xuXHQgIH1cblx0ICByZXR1cm4gbGFzdF9pbmZvW2tdIHx8ICcnO1xuXHR9O1xuXHRleHBvcnRzLmdldE1ldGFJbmZvID0gZ2V0TWV0YUluZm87XG5cdFxuXHRcblx0LyoqXG5cdCAqIOivhuWIq+S4muWKoeWKqOaAgeaLk+WxleWPguaVsFxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgICBsb2drZXk6IGxvZ2tleSxcblx0ICogICAgZ21rZXk6IGdta2V5LFxuXHQgKiAgICBnb2tleTogZ29rZXlcblx0ICogfVxuXHQgKi9cblx0dmFyIGdldFVzZXJJbmplY3RHb2tleSA9IGZ1bmN0aW9uIChvcHRzKSB7XG5cdCAgdmFyIHVzZXJGbiA9IGdldE1ldGFJbmZvKCdhcGx1cy1pbmplY3QtcmVjb3JkLWdva2V5Jyk7XG5cdCAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiB1c2VyRm4ob3B0cyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBvcHRzLmdva2V5O1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRVc2VySW5qZWN0R29rZXkgPSBnZXRVc2VySW5qZWN0R29rZXk7XG5cdFxuXHQvKipcblx0ICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG5cdCAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuXHQgKiAgLSBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgY2FsbGVkIG9uIEFycmF5IHZhbHVlcy5cblx0ICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuXHQgKiAgQHBhcmFtIGtcblx0ICogIEBwYXJhbSB2XG5cdCAqL1xuXHR2YXIgYXBwZW5kTWV0YUluZm8gPSBmdW5jdGlvbiAoaywgdikge1xuXHQgIC8vIGNvbnNvbGUubG9nKGssIHYpO1xuXHQgIGlmIChrICYmIHYpIHtcblx0ICAgIC8vIGFwbHVzLXV0cGFyYW0gfHwgYXBsdXMtbmV4dHBhZ2UtdXRwYXJhbSB8fCBhcGx1cy1leGRhdGFcblx0ICAgIHZhciBwcm9jZXNzT2JqZWN0ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBuZXdfdmFsdWUgPSB0eXBlb2YgdiA9PT0gU1RSSU5HID8gSlNPTi5wYXJzZSh2KSA6IHY7XG5cdCAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBPYmplY3QuYXNzaWduKHt9LCBvbGRfdmFsdWUsIG5ld192YWx1ZSkpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgfTtcblx0ICAgIC8vIGFwbHVzLWF1dG8tZXhwIHx8IGFwbHVzLWF1dG8tY2xrXG5cdCAgICB2YXIgcHJvY2Vzc0FycmF5ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBuZXdfdmFsdWUgPSB0eXBlb2YgdiA9PT0gU1RSSU5HID8gSlNPTi5wYXJzZSh2KSA6IHY7XG5cdCAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBvbGRfdmFsdWUuY29uY2F0KG5ld192YWx1ZSkpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgcHJvY2Vzc09iaiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICBpZiAodmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG5cdCAgICAgICAgcHJvY2Vzc0FycmF5KHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciB0b1NldE1ldGFJbmZvID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICAgICAgX3NldE1ldGFJbmZvKGtleSwgdmFsdWUsIHtcblx0ICAgICAgICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgZmxhZztcblx0ICAgIHZhciBfb2xkVmFsdWUgPSBnZXRNZXRhSW5mbyhrKTtcblx0ICAgIGlmIChrID09PSAnYXBsdXMtZXhpbmZvJykge1xuXHQgICAgICB0b1NldE1ldGFJbmZvKGssIE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZSwgZm9ybWF0LnBhcmFtMm9iaih2KSkpO1xuXHQgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIGlmIChrID09PSAnYXBsdXMtcGFnZS1wcm9wZXJ0aWVzJykge1xuXHQgICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSB2O1xuXHQgICAgICBpZiAoX29sZFZhbHVlKSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2sgaW4gX29sZFZhbHVlKSB7XG5cdCAgICAgICAgICBpZiAodltfa10pIHtcblx0ICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gT2JqZWN0LmFzc2lnbih7fSwgX29sZFZhbHVlW19rXSwgdltfa10pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gX29sZFZhbHVlW19rXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCBwYWdlUHJvcGVydGllcyk7XG5cdCAgICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgaWYgKF9vbGRWYWx1ZSkge1xuXHQgICAgICBpZiAodHlwZW9mIF9vbGRWYWx1ZSA9PT0gT0JKRUNUKSB7XG5cdCAgICAgICAgcHJvY2Vzc09iaihfb2xkVmFsdWUpO1xuXHQgICAgICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB2YXIgdG1wX3BhcnNlID0gSlNPTi5wYXJzZShfb2xkVmFsdWUpO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiB0bXBfcGFyc2UgPT09IE9CSkVDVCkge1xuXHQgICAgICAgICAgICBwcm9jZXNzT2JqKHRtcF9wYXJzZSk7XG5cdCAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICghZmxhZykge1xuXHQgICAgICB0b1NldE1ldGFJbmZvKGssIHYpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5hcHBlbmRNZXRhSW5mbyA9IGFwcGVuZE1ldGFJbmZvO1xuXHRcblx0dmFyIF9zZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChhcmcxLCB2YWx1ZSkge1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHQgIHZhciBkZWZhdWx0TW9kZSA9ICdPVkVSV1JJVEUnO1xuXHQgIHZhciBtb2RlID0gZGVmYXVsdE1vZGU7XG5cdCAgaWYgKHR5cGVvZiBhcmcxID09PSAnb2JqZWN0Jykge1xuXHQgICAgayA9IGFyZzEubWV0YU5hbWU7XG5cdCAgICB2ID0gYXJnMS5tZXRhVmFsdWU7XG5cdCAgICBtb2RlID0gYXJnMS5tb2RlIHx8IGRlZmF1bHRNb2RlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBrID0gYXJnMTtcblx0ICAgIHYgPSB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKG1vZGUgPT09IGRlZmF1bHRNb2RlKSB7XG5cdCAgICBpZiAoc2V0TWV0YUluZm8oaywgdikpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgXyQubWV0YV9pbmZvID0gcUdldCgpO1xuXHQgICAgICB2YXIgcnMgPSB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblx0XG5cdCAgICAgIHZhciBtc2dzID0gWydzZXRNZXRhSW5mbycsIGssIHYsIHt9XTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgICAgcmV0dXJuIHJzO1xuXHQgICAgfSBcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGFwcGVuZE1ldGFJbmZvKGssIHYpO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5fc2V0TWV0YUluZm8gPSBfc2V0TWV0YUluZm87XG5cbi8qKiovIH0pLFxuLyogNDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBGTiA9ICdmdW5jdGlvbic7XG5cdFxuXHR2YXIgZ2V0UHVic3ViID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHB1YnN1YiA9IGFwbHVzLmFwbHVzX3B1YnN1YiB8fCB7fTtcblx0ICB2YXIgZmxhZyA9IHR5cGVvZiBwdWJzdWIucHVibGlzaCA9PT0gRk47XG5cdCAgcmV0dXJuIGZsYWcgPyBwdWJzdWIgOiAnJztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDliIblj5Hmtojmga/lt6Xlhbflh73mlbBcblx0ICogQHBhcmFtcyB7QXJyYXl9IGFyZ3MgW2tleSwgbXNnVmFsdWUxLCBtc2dWYWx1ZTIsIG1zZ1ZhbHVlMywgbXNnVmFsdWVOLCAuLi5dXG5cdCAqL1xuXHRleHBvcnRzLmRvUHViTXNnID0gZnVuY3Rpb24oYXJncykge1xuXHQgIHZhciBwdWJzdWIgPSBnZXRQdWJzdWIoKTtcblx0ICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIucHVibGlzaCA9PT0gRk4pIHtcblx0ICAgIHB1YnN1Yi5wdWJsaXNoLmFwcGx5KHB1YnN1YiwgYXJncyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGNhY2hl5b2T5YmN55qE5YiG5Y+R5Ye95pWw55qE5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuXHQgKi9cblx0ZXhwb3J0cy5kb0NhY2hlUHVicyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG5cdCAgaWYgKHB1YnN1YiAmJiB0eXBlb2YgcHVic3ViLmNhY2hlUHVicyA9PT0gRk4pIHtcblx0ICAgIHB1YnN1Yi5jYWNoZVB1YnMuYXBwbHkocHVic3ViLCBhcmdzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog6K6i6ZiF5raI5oGv5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYihbIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXSlcblx0ICovXG5cdGV4cG9ydHMuZG9TdWJNc2cgPSBmdW5jdGlvbihrZXksIGNiKSB7XG5cdCAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuXHQgIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5zdWJzY3JpYmUgPT09IEZOKSB7XG5cdCAgICBwdWJzdWIuc3Vic2NyaWJlKGtleSwgY2IpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiByZWZlcnJlcuW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBuYW1lU3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpLm5hbWVTdG9yYWdlO1xuXHRcblx0ZXhwb3J0cy5nZXRSZWZlciA9IGZ1bmN0aW9uIChOQU1FX1NUT1JBR0VfS0VZUykge1xuXHQgIHJldHVybiBkb2N1bWVudC5yZWZlcnJlciB8fCBuYW1lU3RvcmFnZS5nZXRJdGVtKE5BTUVfU1RPUkFHRV9LRVlTLlJFRkVSUkVSKSB8fCAnJztcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQ0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2FwbHVzX2F1dG9fY2xrLmpzXG5cdCAqIGFwbHVz5LiT6aG56YeH6ZuGOiDpobXpnaLlhYPntKDngrnlh7voh6rliqjph4fpm4Zcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyA8bWV0YSBuYW1lPVwiYXBsdXMtYXV0by1jbGtcIiBjb250ZW50PVwie3tsb2drZXk6XCIvYS5iLmNcIix0YWc6XCJkaXZcIixmaWx0ZXI6XCJzY209MTIzNFwifX1cIj5cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDQ1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB0cmFja2VyVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIHdhdGNoQ0xLID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cdHZhciBXYXRjaERPTSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXHRcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHRcblx0ZnVuY3Rpb24gaW5pdCAoY2IpIHtcblx0ICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuXHRcblx0ICB2YXIgYXBsdXNfYWNfaW5pdCA9IGZhbHNlO1xuXHQgIHZhciBfY29uZmlnOyAvLyBsYXN0Q29uZmlnXG5cdCAgdmFyIGRvX2luaXQgPSBmdW5jdGlvbigpIHtcblx0ICAgIGlmICghYXBsdXNfYWNfaW5pdCkge1xuXHQgICAgICB0cmFja2VyVXRpbC53cmFwKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgLy8g6aG65bqP5LiN6IO95Lmx77yM546v546v55u45omjIVxuXHQgICAgICAgIC8vIDHjgIHnm5HlkKxkb23lj5jljJZcblx0ICAgICAgICBfY29uZmlnID0gY29uZmlnLmdldEF1dG9DbGtDb25maWcoKTtcblx0ICAgICAgICB2YXIgd2F0Y2hET007XG5cdCAgICAgICAgaWYgKF9jb25maWcgJiYgX2NvbmZpZy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB3YXRjaERPTSA9IFdhdGNoRE9NLmNyZWF0ZSh7XG5cdCAgICAgICAgICAgIGF1dG9DbGtDb25maWc6IF9jb25maWdcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgd2F0Y2hET00uaW5pdCgpO1xuXHQgICAgICAgICAgLy8gMuOAgeebkeWQrOeCueWHu+W5tuaXpeW/l+WPkemAgVxuXHQgICAgICAgICAgd2F0Y2hDTEsud2F0Y2hfY2xrKCk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdzZXRNZXRhSW5mbycsIGZ1bmN0aW9uIChtZXRhS2V5LCBtZXRhVmF1ZSwgb3B0cykge1xuXHQgICAgICAgICAgaWYgKG1ldGFLZXkgPT09ICdhcGx1cy1hdXRvLWNsaycpIHtcblx0ICAgICAgICAgICAgLy8gMuOAgeiOt+WPlumFjee9ruW5tuWIpOaWremFjee9ruato+ehruaAp++8jGdldEF1dG9FeHBDb25maWflhoXlgZrkuoblvLrmoKHpqozvvIzlh7rplJnlkI7kvJrmiZPljbDplJnor6/kv6Hmga9cblx0ICAgICAgICAgICAgdmFyIF9jb25maWcyID0gY29uZmlnLmdldEF1dG9DbGtDb25maWcobWV0YVZhdWUpO1xuXHQgICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoX2NvbmZpZzIpID09PSBKU09OLnN0cmluZ2lmeShfY29uZmlnKSkge1xuXHQgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBfY29uZmlnID0gX2NvbmZpZzI7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHdhdGNoQ0xLLmNsZWFyKCk7XG5cdCAgICAgICAgICAgIGlmICghb3B0cykge1xuXHQgICAgICAgICAgICAgIG9wdHMgPSB7XG5cdCAgICAgICAgICAgICAgICBmcm9tOiAnc2V0TWV0YUluZm8nXG5cdCAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB3YXRjaERPTSAmJiB3YXRjaERPTS5jbGVhcihvcHRzKTtcblx0ICAgICAgICAgICAgd2F0Y2hET00gJiYgd2F0Y2hET00uY2xlYXJEb20oe1xuXHQgICAgICAgICAgICAgIGF1dG9DbGtDb25maWc6IF9jb25maWdcblx0ICAgICAgICAgICAgfSwgb3B0cyk7XG5cdCAgICAgICAgICAgIGlmIChtZXRhVmF1ZSkge1xuXHQgICAgICAgICAgICAgIGlmICh3YXRjaERPTSkge1xuXHQgICAgICAgICAgICAgICAgd2F0Y2hET00ucmVzZXQoe1xuXHQgICAgICAgICAgICAgICAgICBhdXRvQ2xrQ29uZmlnOiBfY29uZmlnXG5cdCAgICAgICAgICAgICAgICB9LCBvcHRzKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgd2F0Y2hET00gPSBXYXRjaERPTS5jcmVhdGUoe1xuXHQgICAgICAgICAgICAgICAgICBhdXRvQ2xrQ29uZmlnOiBfY29uZmlnXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIHdhdGNoRE9NLmluaXQoKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgd2F0Y2hDTEsud2F0Y2hfY2xrKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSwgJ2RvX2luaXQnKTtcblx0ICAgICAgYXBsdXNfYWNfaW5pdCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLy8gdXRpbEV2ZW50LkRPTVJlYWR5KGZ1bmN0aW9uKCkge1xuXHQgIC8vIDVz5ZCO6L+Y5rKh5pyJ5a6M5oiQ5Yqg6L2977yM5o6n5Yi25Y+w5omT5Ye65LiA5p2h6K2m5ZGK77yMVE9ETyDnm5Hmjqfov5nlnZflhoXlrrlcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICBpZiAoIWFwbHVzX2FjX2luaXQpIHtcblx0ICAgICAgdWxvZygpLncoJ2FwbHVzX2FjX2luaXQgZmFpbGVkISBwbGVhc2UgY2hlY2sgd2hldGhlciBhcGx1c0pzIGlzIGxvYWRlZCBjb3JyZWN0bHkhJyk7XG5cdCAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgLy8gICBtc2c6ICdhcGx1c19hY19pbml0IGZhaWxlZCEgcGxlYXNlIGNoZWNrIHdoZXRoZXIgYXBsdXNKcyBpcyBsb2FkZWQgY29ycmVjdGx5ISdcblx0ICAgICAgLy8gfSk7XG5cdCAgICB9XG5cdCAgfSwgNTAwMCk7XG5cdCAgLy8g5pyJYXBsdXNfcHVic3Vi5LqL5Lu255uR5ZCs6ICF5qih5Z6L55qE5oOF5Ya15LiL77yM55uR5ZCsYXBsdXNSZWFkeeS6i+S7tlxuXHQgIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuXHQgIHZhciBnX3NwbSA9IHdpbmRvdy5nX1NQTSB8fCB7fTtcblx0ICBpZiAoXyQuc3RhdHVzID09PSAnY29tcGxldGUnICYmIGdfc3BtLnNwbSkge1xuXHQgICAgZG9faW5pdCgpO1xuXHQgIH1cblx0ICAvLyBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdhcGx1c1JlYWR5JywgZnVuY3Rpb24oc3RhdHVzKSB7XG5cdCAgLy8gICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG5cdCAgLy8gICAgIGRvX2luaXQoKTtcblx0ICAvLyAgIH1cblx0ICAvLyB9KTtcblx0ICB2YXIgcSA9ICh3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKSk7XG5cdCAgcS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG5cdCAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcblx0ICAgICAgICBkb19pbml0KCdhcGx1c1JlYWR5Jyk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdCAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgY2IoKTtcblx0ICB9XG5cdCAgLy8gfSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBhcGx1cyA9ICh3aW5kb3cuYXBsdXMgfHwgd2luZG93LmdvbGRsb2cgfHwgKHdpbmRvdy5hcGx1cyA9IHt9KSk7XG5cdCAgaWYgKGFwbHVzLl9hcGx1c19hYykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBhcGx1cy5fYXBsdXNfYWMgPSB7XG5cdCAgICAgIHN0YXR1czogJ2luaXQnLFxuXHQgICAgICBlbGVtZW50U2VsZWN0b3JTaXplTWFwOiB7fVxuXHQgICAgfTtcblx0ICAgIGluaXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBhcGx1cy5fYXBsdXNfYWMuc3RhdHVzID0gJ2NvbXBsZXRlJztcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQ2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L21vbml0b3IvdHJhY2tlclV0aWwuanNcblx0ICogdHJhY2tlclV0aWxcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0LyoqXG5cdCAqIGFwbHVz5Zyo57q/6LCD6K+V77yM5pel5b+X5Lya5Ye6546w5Zyo5Zyo57q/6LCD6K+V5bmz5Y+w5LitXG5cdCAqIGh0dHBzOi8vbWxvZy5hbGliYWJhLWluYy5jb20vYXBsdXN0cmFja1xuXHQgKiBAcGFyYW1zIG8ge09iamVjdH0ge1xuXHQgKiAgIG1ldGhvZE5hbWU6IHVwZGF0ZU5leHRQYWdlVXRwYXJhbS9wYWdlQXBwZWFyL29uVVRDYWxsQmFjay4uLlxuXHQgKiAgIHBhcmFtczogey4uLn1cblx0ICogfVxuXHQgKi9cblx0dmFyIGRvX3RyYWNrZXIyID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHBhcmFtcywgbWV0aG9kX25hbWUpIHtcblx0ICB2YXIgcSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScsIFtdKTtcblx0ICBxLnB1c2goe1xuXHQgICAgYWN0aW9uOiAnYXBsdXMuX2FwbHVzX2NwbHVnaW5fdHJhY2tfZGViLm1vbml0b3InLFxuXHQgICAgYXJndW1lbnRzOiBbe1xuXHQgICAgICBrZXk6ICdBUExVU19QTFVHSU5fREVCVUcnLFxuXHQgICAgICB0aXRsZTogJ2FwbHVzX2NvcmUnLFxuXHQgICAgICBtc2c6IFtcblx0ICAgICAgICAnX2Vycm9yXzptZXRob2ROYW1lPScgKyBtZXRob2RfbmFtZSArICcscGFyYW1zPScgKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG5cdCAgICAgIF0sXG5cdCAgICAgIHR5cGU6ICd1cGRhdGVNc2cnLFxuXHQgICAgICBkZXNjcmlwdGlvbjogbWV0aG9kX25hbWUgfHwgJ2FwbHVzX2NvcmUnXG5cdCAgICB9XVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0dmFyIGRvX3RyYWNrZXIgPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocGFyYW1zLCBtZXRob2RfbmFtZSwgY2IpIHtcblx0ICB2YXIgcSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScsIFtdKTtcblx0ICBxLnB1c2goe1xuXHQgICAgYWN0aW9uOiBbJ2FwbHVzJywgJ19hcGx1c19jcGx1Z2luX20nLCBtZXRob2RfbmFtZV0uam9pbignLicpLFxuXHQgICAgYXJndW1lbnRzOiBbcGFyYW1zLCBjYl1cblx0ICB9KTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDorrDlvZXigJ1KU+mUmeivr+KAnFxuXHQgKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IGNvbmZpZyA6IHtcblx0ICogICBsb2drZXk6ICdmc3AuMS4xJyxcblx0ICogICBtZXNzYWdlOiAnJyxcblx0ICogICBlcnJvcjogZXJyb3IsXG5cdCAqICAgZmlsZW5hbWU6ICdmaWxlbmFtZScsXG5cdCAqIH1cblx0ICpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGV4cG9ydHMuZG9fdHJhY2tlcl9qc2Vycm9yID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFyYW1zLCBjYikge1xuXHQgIHZhciBuYW1lID0gJ2RvX3RyYWNrZXJfanNlcnJvcic7XG5cdCAgZG9fdHJhY2tlcihwYXJhbXMsIG5hbWUsIGNiKTtcblx0ICBkb190cmFja2VyMihwYXJhbXMsIG5hbWUpO1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnICYmIGNvbnNvbGUpIHtcblx0ICAgIGNvbnNvbGUud2FybihwYXJhbXMpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDljIXoo7nmlrnms5XvvIznu5nmlrnms5XliqB0cnkgY2F0Y2gg5ZKM6ZSZ6K+v55uR5o6nXG5cdCAqIEBwYXJhbSBmbiB7RnVuY3Rpb259XG5cdCAqIEBwYXJhbSBmbl9uYW1lIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLndyYXAgPSBmdW5jdGlvbihmbikge1xuXHQgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGZuKCk7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgZG9fdHJhY2tlcjIoe1xuXHQgICAgICAgIG1zZzogZXJyLm1lc3NhZ2UgfHwgZXJyXG5cdCAgICAgIH0sICdleGNlcHRpb24nKTtcblx0ICAgIH0gZmluYWxseSB7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDQ3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0dmFyIHV0aWxBdHRyaWJ1dGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dmFyIHV0aWxEb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdHZhciBlYWNoTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0XG5cdHZhciB1dGlsRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIHV0aWxfYWNfYWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTtcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHRcblx0Ly8gdmFyIGlzVG91Y2hFbmFibGVkID0gZnVuY3Rpb24oKSB7XG5cdC8vICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0Ly8gICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvIHx8IHt9O1xuXHQvLyAgIHZhciBhcGx1c1RvdWNoID0gbWV0YV9pbmZvWydhcGx1cy10b3VjaCddO1xuXHQvLyAgIHJldHVybiB1dGlsRG9tLmlzVG91Y2goKSAmJiAoYXBsdXNUb3VjaCA9PT0gJzEnIHx8IGFwbHVzVG91Y2ggPT09ICd0YXAnKTtcblx0Ly8gfTtcblx0XG5cdHZhciB3aW4gPSB3aW5kb3c7XG5cdHZhciB0YWdzID0gWydpZnJhbWUnLCAnaHRtbCcsICdib2R5JywgJ2hlYWQnXTtcblx0dmFyIExPR0tFWV9BVFRSID0gY29uZmlnLkRBVEFfQVBMVVNfQUNfS0VZO1xuXHRcblx0dmFyIHRyeUdldFBhcmFtcyA9IGZ1bmN0aW9uKGVsKSB7XG5cdCAgdmFyIGNsa0NvbmZpZ3MgPSBbXTtcblx0ICB2YXIgaGFzaF92YWx1ZSA9IGVsID8gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShlbCwgTE9HS0VZX0FUVFIpIDogJyc7XG5cdCAgaWYgKGhhc2hfdmFsdWUpIHtcblx0ICAgIHZhciBfYXBsdXNfYWMgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYWMnKSB8fCB7fTtcblx0ICAgIHZhciBfYWNIYXNoTWFwID0gX2FwbHVzX2FjLl9hY0hhc2hNYXAgfHwge307XG5cdCAgICBlYWNoTWFwKF9hY0hhc2hNYXAsIGZ1bmN0aW9uIChsb2drZXksIGFycikge1xuXHQgICAgICBlYWNoKGFyciwgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICBpZiAodi5oYXNoX3ZhbHVlID09PSBoYXNoX3ZhbHVlKSB7XG5cdCAgICAgICAgICBjbGtDb25maWdzLnB1c2godi5jbGtDb25maWcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgcmV0dXJuIHtcblx0ICAgIGNsa0NvbmZpZ3M6IGNsa0NvbmZpZ3MsXG5cdCAgICBlbDogZWxcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIGdldFBhcmFtcyA9IGZ1bmN0aW9uKGVsKSB7XG5cdCAgdmFyIHBhcmFtcyA9IHRyeUdldFBhcmFtcyhlbCk7XG5cdCAgaWYgKHBhcmFtcyAmJiBwYXJhbXMuY2xrQ29uZmlncyAmJiBwYXJhbXMuY2xrQ29uZmlncy5sZW5ndGggPiAwKSB7XG5cdCAgICByZXR1cm4gcGFyYW1zO1xuXHQgIH1cblx0XG5cdCAgd2hpbGUgKChlbCA9IGVsLnBhcmVudE5vZGUpICYmIHV0aWxBcnJheS5pbmRleG9mKHRhZ3MsIGVsLnRhZ05hbWUgPyBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgOiAnaHRtbCcpID09PSAtMSkge1xuXHQgICAgcGFyYW1zID0gdHJ5R2V0UGFyYW1zKGVsKTtcblx0ICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLmNsa0NvbmZpZ3MgJiYgcGFyYW1zLmNsa0NvbmZpZ3MubGVuZ3RoID4gMCkge1xuXHQgICAgICByZXR1cm4gcGFyYW1zO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdFxuXHRcblx0dmFyIGhhbmRsZXJfYXV0b19jbGsgPSBmdW5jdGlvbihlKSB7XG5cdCAgZSA9IGUgfHwgd2luLmV2ZW50O1xuXHQgIHZhciBlbCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcblx0XG5cdCAgdmFyIHBhcmFtcyA9IGdldFBhcmFtcyhlbCkgfHwge307XG5cdCAgdmFyIGNsa0NvbmZpZ3MgPSBwYXJhbXMuY2xrQ29uZmlncztcblx0ICBpZiAocGFyYW1zICYmIGNsa0NvbmZpZ3MgJiYgcGFyYW1zLmVsKXtcblx0ICAgIGVhY2goY2xrQ29uZmlncywgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgXG5cdCAgICAgIHZhciBjbGtDb25maWcgPSB2O1xuXHQgICAgICBlbCA9IHBhcmFtcy5lbDtcblx0ICAgICAgdmFyIHNwbV9hYiA9IGFwbHVzLnNwbV9hYiA/IGFwbHVzLnNwbV9hYi5qb2luKCcuJykgOiAnMC4wJzsgLy8g5L+d5bqVc3BtQUJcblx0ICAgICAgdmFyIHNwbSA9IHNwbV9hYiArICcuMC4wJztcblx0ICAgICAgdmFyIHNjbSA9ICcnO1xuXHQgICAgICBpZiAod2luLmdfU1BNICYmIHR5cGVvZiB3aW4uZ19TUE0uc3BtID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgc3BtID0gd2luLmdfU1BNLnNwbShlbCk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGdva2V5ID0gW107XG5cdCAgICAgIHZhciBleGFyZ3Nfb3JpZ2luID0ge1xuXHQgICAgICAgIC8vIF94cGF0aDogdXRpbF9hY19hZS5nZXRYUGF0aChlbCksXG5cdCAgICAgIH07XG5cdCAgICAgIC8vIOivu+WPluiiq+abneWFieWFg+e0oOS4iueahOeJueWumuWxnuaAp++8jOi/meS6m+eJueWumuWxnuaAp+aYr+mAmui/h+abneWFieWfi+eCueS6i+WFiOWfi+i/m+WOu+eahFxuXHQgICAgICB2YXIgZXhhcmdzID0gdXRpbF9hY19hZS5maWxsUHJvcHNEYXRhKGNsa0NvbmZpZywgZWwsIGV4YXJnc19vcmlnaW4pO1xuXHQgICAgICBleGFyZ3MgPSB1dGlsX2FjX2FlLmZpbGxGaWx0ZXJEYXRhKGNsa0NvbmZpZywgZWwsIGV4YXJnc19vcmlnaW4pO1xuXHQgICAgICBleGFyZ3MgPSB1dGlsX2FjX2FlLmZpbGxTcG1EYXRhKGNsa0NvbmZpZywgZWwsIGV4YXJnc19vcmlnaW4pO1xuXHQgICAgICBleGFyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oZXhhcmdzLCB1dGlsX2FjX2FlLmdldERhdGFUcmFja2VyUGFyYW1zKGVsKSk7XG5cdFxuXHQgICAgICB2YXIgYWNBdXRvVXNlckZuID0gY29uZmlnLmdldEF1dG9DbGtVc2VyRm4oKTtcblx0ICAgICAgaWYgKGFjQXV0b1VzZXJGbikge1xuXHQgICAgICAgIC8vIHRvZG/vvJrmiorphY3nva7lhoXlrrnov5Tlm57lh7rljrtcblx0ICAgICAgICB2YXIgcnMgPSB1dGlsX2FjX2FlLmF1dG9Vc2VyRm5IYW5kbGVyKGFjQXV0b1VzZXJGbiwgZWwsIGNsa0NvbmZpZy5lbGVtZW50U2VsZWN0b3IsIGNsa0NvbmZpZywgZSk7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBycyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgcnMudXNlcmRhdGEgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgIGV4YXJncyA9IHV0aWxEYXNoLmFzc2lnbihleGFyZ3MsIHJzLnVzZXJkYXRhKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIOWPr+inhuWMluWfi+eCueS8muWKqOaAgeazqOWFpXNwbeOAgXNjbe+8jOivpuingSAvcy9zcmMvcGx1Z2lucy9saWJfd2VidnQvTG9nRy5qczogZ2V0QXR0ckFyZ3Ncblx0ICAgICAgICAgIGlmIChycy5zcG0pIHtcblx0ICAgICAgICAgICAgc3BtID0gcnMuc3BtO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKHJzLnNjbSkge1xuXHQgICAgICAgICAgICBzY20gPSBycy5zY207XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmIChycyA9PT0gZmFsc2UpIHsgLy8g6L+U5ZueIGZhbHNlIOWImeS4jeS4iuaKpeWfi+eCuVxuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXRyYWNrLWNvbWJpbmUnKSA9PT0gJ29uJykge1xuXHQgICAgICAgIGdva2V5LnB1c2goJ2Nsa2RhdGE9JyArIEpTT04uc3RyaW5naWZ5KFt7XG5cdCAgICAgICAgICBleGFyZ3M6IGV4YXJncyxcblx0ICAgICAgICAgIHNjbTogc2NtLFxuXHQgICAgICAgICAgc3BtOiBzcG0sXG5cdCAgICAgICAgICBhcGx1c0NvbnRlbnRJZDogJycsXG5cdCAgICAgICAgfV0pKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmb3IgKHZhciBrIGluIGV4YXJncykge1xuXHQgICAgICAgICAgZ29rZXkucHVzaChrICsgJz0nICsgZXhhcmdzW2tdKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgZ29rZXkucHVzaCgnX2lzX2F1dG9fY2xrPTEnKTtcblx0ICAgICAgdmFyIF9tZXRob2QgPSBjbGtDb25maWcubWV0aG9kIHx8ICdQT1NUJztcblx0ICAgICAgaWYgKGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy10cmFjay1jb21iaW5lJykgIT09ICdvbicpIHtcblx0ICAgICAgICAvLyBfbWV0aG9kID0gJ0dFVCc7XG5cdCAgICAgICAgZ29rZXkucHVzaCgnaXNfYXV0bz0xJyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGNsa0NvbmZpZy5sb2drZXkgIT09ICckJF9BUExVUycpIHtcblx0ICAgICAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcblx0ICAgICAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuXHQgICAgICAgICAgICBhcmd1bWVudHM6IFtjbGtDb25maWcubG9na2V5LCAnQ0xLJywgZm9ybWF0LnBhcmFtMm9iaihnb2tleS5qb2luKCcmJykpLCBfbWV0aG9kXVxuXHQgICAgICAgICAgfSk7ICBcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgICAgIGFyZ3VtZW50czogW2Nsa0NvbmZpZy5sb2drZXksICdDTEsnLCBnb2tleS5qb2luKCcmJyksIF9tZXRob2RdXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gY29uc29sZS5sb2coJ2Nsa0NvbmZpZy5sb2drZXkgPT09ICcsIGNsa0NvbmZpZy5sb2drZXkpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLndhdGNoX2NsayA9IGZ1bmN0aW9uKCkge1xuXHQgIC8qKlxuXHQgICAqIOe7keWumiBkb2N1bWVudCDnmoQgbW91c2Vkb3du44CBdG91Y2gg5LqL5Lu277yM5b2T5YWD57Sg6KKr54K55Ye75oiWdG91Y2jml7boh6rliqjlj5HpgIHlj6/op4bljJbku6Tnrq1cblx0ICAgKi9cblx0ICBpZiAodXRpbERvbS5pc1RvdWNoKCkpIHtcblx0ICAgIHV0aWxFdmVudC5vbihkb2N1bWVudCwgJ3RhcCcsIGhhbmRsZXJfYXV0b19jbGspO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB1dGlsRXZlbnQub24oZG9jdW1lbnQsICdtb3VzZWRvd24nLCBoYW5kbGVyX2F1dG9fY2xrKTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmNsZWFyID0gZnVuY3Rpb24oKSB7XG5cdCAgaWYgKHV0aWxEb20uaXNUb3VjaCgpKSB7XG5cdCAgICB1dGlsRXZlbnQudW4oZG9jdW1lbnQsICd0YXAnLCBoYW5kbGVyX2F1dG9fY2xrKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdXRpbEV2ZW50LnVuKGRvY3VtZW50LCAnbW91c2Vkb3duJywgaGFuZGxlcl9hdXRvX2Nsayk7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOaVsOe7hOW3peWFt1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBJRTjkuI3mlK/mjIHmlbDnu4Tljp/nlJ/nmoRpbmRleE9m77yM5pWF6Ieq6KGM5a6e546w5LiA5LiqaW5kZXhvZlxuXHQgKiBAcGFyYW0gW0FycmF5XSBhcnJcblx0ICogQHBhcmFtIFtPYmplY3RdIGl0ZW1cblx0ICogQHJldHVybiBbTnVtYmVyXSBpbmRleFxuXHQgKi9cblx0ZXhwb3J0cy5pbmRleG9mID0gZnVuY3Rpb24oYXJyLCBpdGVtKSB7XG5cdCAgdmFyIGluZGV4ID0gLTE7XG5cdCAgdHJ5IHtcblx0ICAgIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgaWYgKGFycltqXSA9PT0gaXRlbSkge1xuXHQgICAgICAgIGluZGV4ID0gajtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gaW5kZXg7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLml0ZW1NYXRjaCA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuXHQgIHZhciBtYXRjaGVkID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIGlmICghdGhpcy5pc0FycmF5KGFycikpIHtcblx0ICAgICAgcmV0dXJuIG1hdGNoZWQ7XG5cdCAgICB9XG5cdCAgICBtYXRjaGVkID0gYXJyLnNvbWUoZnVuY3Rpb24ocykge1xuXHQgICAgICByZXR1cm4gKHMgJiYgcy5sZW5ndGggPiAwKSAmJiBpdGVtLmluZGV4T2YocykgIT09IC0xO1xuXHQgICAgfSk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuXHQgICAgICBpZiAoaXRlbS5pbmRleE9mKGFycltqXSkgIT09IC0xKSB7XG5cdCAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG1hdGNoZWQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpc0FycmF5KG8pIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAvQXJyYXkvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gZmxhdChhcnIpIHtcblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgaWYgKGlzQXJyYXkoYXJyKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHYgPSBhcnJbaV07XG5cdCAgICAgIGlmIChpc0FycmF5KHYpKSB7XG5cdCAgICAgICAgLy/pgJLlvZLmiYHlubPljJbmlbDnu4Rcblx0ICAgICAgICBhcnJbaV0gPSBmbGF0KHYpO1xuXHQgICAgICAgIC8vIOmAkuW9kuWQjiDov57mjqXmlbDnu4Rcblx0ICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGFycltpXSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzdWx0LnB1c2godik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0ZXhwb3J0cy5mbGF0ID0gZmxhdDtcblx0XG5cdGZ1bmN0aW9uIGZpbmQoYXJyLCBjYWxsYmFjaykge1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gYXJyLmZpbmQoY2FsbGJhY2spO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIG1hdGNoID0gY2FsbGJhY2soYXJyW2ldKTtcblx0ICAgICAgaWYgKG1hdGNoKSB7XG5cdCAgICAgICAgcmV0dXJuIGFycltpXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZXhwb3J0cy5maW5kID0gZmluZDtcblxuLyoqKi8gfSksXG4vKiA0OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxBdHRyaWJ1dGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciBfaGVhZF9ub2RlO1xuXHR2YXIgX2N1cnJlbnROb2RlO1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q3VycmVudE5vZGUgKCkge1xuXHQgIGlmICghX2N1cnJlbnROb2RlKSB7XG5cdCAgICBfY3VycmVudE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmVhY29uLWFwbHVzJykgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RiLWJlYWNvbi1hcGx1cycpO1xuXHQgIH1cblx0ICByZXR1cm4gX2N1cnJlbnROb2RlO1xuXHR9XG5cdGV4cG9ydHMuZ2V0Q3VycmVudE5vZGUgPSBnZXRDdXJyZW50Tm9kZTtcblx0XG5cdC8qKlxuXHQgKiBBcGx1c+aUr+aMgemHh+mbhkNTUOino+WGs+aWueahiFxuXHQgKiBmcm9tIOS6keadsCAgMjAxOC0xMi0xNyAgaHR0cHM6Ly9hb25lLmFsaWJhYmEtaW5jLmNvbS9yZXEvMTgyNDExNTQ/ZnJvbT1hayZmcm9tPWFrJlxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0Tm9uY2UgKG5vZGUpIHtcblx0ICB2YXIgY3VycmVudF9ub2RlID0gZ2V0Q3VycmVudE5vZGUoKTtcblx0ICB2YXIgbm9uY2UgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKGN1cnJlbnRfbm9kZSwgJ2NzcHgnKTtcblx0ICBpZiAobm9kZSAmJiBub25jZSkge1xuXHQgICAgbm9kZS5ub25jZSA9IG5vbmNlO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIOWcqOW9k+WJjemhtemdoua3u+WKoOS4gOS4qiBqc1xuXHQgKiBAcGFyYW0gc3JjXG5cdCAqIEBwYXJhbSBbaHR0cHNfc3JjXVxuXHQgKi9cblx0ZXhwb3J0cy5hZGRTY3JpcHQgPSBmdW5jdGlvbiAoc3JjLCBodHRwc19zcmMsIGlkKSB7XG5cdCAgdmFyIHMgPSAnc2NyaXB0Jztcblx0ICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocyk7XG5cdCAgdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG5cdCAgdC5hc3luYyA9IHRydWU7XG5cdCAgdmFyIGN1cnJlbnRfbm9kZSA9IGdldEN1cnJlbnROb2RlKCk7XG5cdCAgdmFyIGhhc0Nyb3NzT3JpZ2luID0gY3VycmVudF9ub2RlICYmIGN1cnJlbnRfbm9kZS5oYXNBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJyk7XG5cdCAgaWYgKGhhc0Nyb3NzT3JpZ2luKSB7XG5cdCAgICB0LmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XG5cdCAgfVxuXHRcblx0ICB2YXIgdXJsID0gYXBsdXNTdGF0aWMuSFRUUFMgPT09IGxvY2F0aW9uLnByb3RvY29sID8gKGh0dHBzX3NyYyB8fCBzcmMpIDogc3JjO1xuXHQgIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuXHQgICAgdXJsID0gYXBsdXNTdGF0aWMuSFRUUFMgKyB1cmw7XG5cdCAgfVxuXHQgIHQuc3JjID0gdXJsO1xuXHQgIGlmIChpZCkge1xuXHQgICAgdC5pZCA9IGlkO1xuXHQgIH1cblx0ICBzZXROb25jZSh0KTtcblx0ICB2YXIgbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdO1xuXHQgIF9oZWFkX25vZGUgPSBfaGVhZF9ub2RlIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG5cdCAgaWYgKG0pIHtcblx0ICAgIG0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodCwgbSk7XG5cdCAgfSBlbHNlIGlmIChfaGVhZF9ub2RlKSB7XG5cdCAgICBfaGVhZF9ub2RlLmFwcGVuZENoaWxkKHQpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDlnKjlvZPliY3pobXpnaLmt7vliqDkuIDkuKoganPvvIzlubbmiafooYzlm57osINcblx0ICogQHBhcmFtIHNyY1xuXHQgKiBAcGFyYW0gW2h0dHBzX3NyY11cblx0ICovXG5cdGV4cG9ydHMubG9hZFNjcmlwdCA9IGZ1bmN0aW9uKHVybCwgY2FsbGJhY2spIHtcblx0ICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHQgIF9oZWFkX25vZGUgPSBfaGVhZF9ub2RlIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG5cdCAgbm9kZS5hc3luYyA9IHRydWU7XG5cdFxuXHQgIGlmIChcIm9ubG9hZFwiIGluIG5vZGUpIHtcblx0ICAgIG5vZGUub25sb2FkID0gb25sb2FkO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgb25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICgvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG5vZGUucmVhZHlTdGF0ZSkpIHtcblx0ICAgICAgICBvbmxvYWQoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIG5vZGUub25yZWFkeXN0YXRlY2hhbmdlID0gb25yZWFkeXN0YXRlY2hhbmdlO1xuXHRcblx0ICAgIC8vIOS4gOW8gOWni+S5n+WIpOaWreS4gOasoeeKtuaAgVxuXHQgICAgb25yZWFkeXN0YXRlY2hhbmdlKCk7XG5cdCAgfVxuXHRcblx0ICBub2RlLm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG5cdCAgICBvbmxvYWQoZSk7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gb25sb2FkKGVycm9yKSB7XG5cdCAgICBub2RlLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG5vZGUub25sb2FkID0gbm9kZS5vbmVycm9yID0gbnVsbDtcblx0ICAgIG5vZGUgPSBudWxsO1xuXHRcblx0ICAgIGNhbGxiYWNrKGVycm9yKTtcblx0ICB9XG5cdFxuXHQgIG5vZGUuc3JjID0gdXJsO1xuXHQgIHNldE5vbmNlKG5vZGUpO1xuXHQgIC8vIGVnLmpzIG9yIHJjZmcuanMg5aSa5qyh6KKr5o+S5YWl5pe277yM5bqU6K+l5Y+q5L+d55WZ5LiA5LiqIGJ5IOmAn+i/kCBcblx0ICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcblx0ICAgIG5vZGUuaWQgPSAnYXBsdXMtc2V0dGluZyc7XG5cdCAgICBub2RlLnR5cGUgPVwidGV4dC9qYXZhc2NyaXB0XCI7XG5cdCAgICBub2RlLmNoYXJzZXQgPSBcInV0Zi04XCI7XG5cdFxuXHQgICAgdmFyIHNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xuXHQgICAgaWYgKHNzICYmIHNzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgZWFjaChzcywgZnVuY3Rpb24oaXRlbSkge1xuXHQgICAgICAgIGlmIChpdGVtICYmIGl0ZW0uaWQgPT09ICdhcGx1cy1zZXR0aW5nJykge1xuXHQgICAgICAgICAgX2hlYWRfbm9kZS5yZW1vdmVDaGlsZChpdGVtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICBfaGVhZF9ub2RlLmFwcGVuZENoaWxkKG5vZGUpOyAgXG5cdH07XG5cdFxuXHQvKipcblx0ICog5Yik5pat5piv5ZCm5pSv5oyBdG91Y2jkuovku7Zcblx0ICogQHJldHVybiBbQm9vbGVhbl1cblx0ICovXG5cdGV4cG9ydHMuaXNUb3VjaCA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogNTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOWvuW1hcOi/m+ihjOmrmOaAp+iDveeahOmBjeWOhlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1hcCwgY2FsbGJhY2spIHtcblx0ICBpZiAoT2JqZWN0ICYmIE9iamVjdC5rZXlzKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG1hcCk7XG5cdCAgICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgIHZhciBrMSA9IGtleXNbaV07XG5cdCAgICAgIGNhbGxiYWNrKGsxLCBtYXBbazFdKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgZm9yICh2YXIgayBpbiBtYXApIHtcblx0ICAgICAgY2FsbGJhY2soaywgbWFwW2tdKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYXR0YSA9ICEhZG9jdW1lbnQuYXR0YWNoRXZlbnQ7XG5cdHZhciBhcGx1c1RhcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q3VzdG9tVGFwICgpIHtcblx0ICB2YXIgXyQgPSBhcGx1cy5fJCB8fCB7fTtcblx0ICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvIHx8IHt9O1xuXHQgIHZhciBhcGx1c19jdGFwID0gbWV0YV9pbmZvLmFwbHVzX2N0YXAgfHwge307XG5cdCAgaWYgKGFwbHVzX2N0YXAgJiYgdHlwZW9mIGFwbHVzX2N0YXAub24gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBhcGx1c19jdGFwO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiB0YXBFdmVudEJpbmQoZWxlbWVudCwgZm4pIHtcblx0ICAvLyDlpoLmnpzkuJrliqHmlrnmnInoh6rlrprkuYnlrp7njrDnmoR0YXDkuovku7bmj5Lku7bvvIzkvJjlhYjmjInor6Xkuovku7bmiafooYxcblx0ICB2YXIgY3VzdG9tVGFwID0gZ2V0Q3VzdG9tVGFwKCk7XG5cdCAgaWYgKGN1c3RvbVRhcCkge1xuXHQgICAgY3VzdG9tVGFwLm9uKGVsZW1lbnQsIGZuKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgYXBsdXNUYXAub24oZWxlbWVudCwgZm4pO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIHRhcEV2ZW50VW5CaW5kKGVsZW1lbnQsIGZuKSB7XG5cdCAgLy8g5aaC5p6c5Lia5Yqh5pa55pyJ6Ieq5a6a5LmJ5a6e546w55qEdGFw5LqL5Lu25o+S5Lu277yM5LyY5YWI5oyJ6K+l5LqL5Lu25omn6KGMXG5cdCAgdmFyIGN1c3RvbVRhcCA9IGdldEN1c3RvbVRhcCgpO1xuXHQgIGlmIChjdXN0b21UYXApIHtcblx0ICAgIGN1c3RvbVRhcC51bihlbGVtZW50LCBmbik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGFwbHVzVGFwLnVuKGVsZW1lbnQsIGZuKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog57uR5a6a5LqL5Lu2XG5cdCAqIEBwYXJhbSBvYmoge1dpbmRvd3xFbGVtZW50fSBET00g5YWD57SgXG5cdCAqIEBwYXJhbSBldmVudF90eXBlXG5cdCAqIEBwYXJhbSBmXG5cdCAqL1xuXHRleHBvcnRzLm9uID0gZnVuY3Rpb24ob2JqLCBldmVudF90eXBlLCBmKSB7XG5cdCAgaWYgKGV2ZW50X3R5cGUgPT09ICd0YXAnKSB7XG5cdCAgICB0YXBFdmVudEJpbmQob2JqLCBmKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKGF0dGEpIHtcblx0ICAgIG9ialsnYXR0YWNoRXZlbnQnXShldmVudF90eXBlLCBmKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqWydhZGRFdmVudExpc3RlbmVyJ10oZXZlbnRfdHlwZSwgZik7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOenu+mZpOe7keWumuS6i+S7tlxuXHQgKiBAcGFyYW0gb2JqIHtXaW5kb3d8RWxlbWVudH0gRE9NIOWFg+e0oFxuXHQgKiBAcGFyYW0gZXZlbnRfdHlwZVxuXHQgKiBAcGFyYW0gZlxuXHQgKi9cblx0ZXhwb3J0cy51biA9IGZ1bmN0aW9uKG9iaiwgZXZlbnRfdHlwZSwgZikge1xuXHQgIGlmIChldmVudF90eXBlID09PSAndGFwJykge1xuXHQgICAgdGFwRXZlbnRVbkJpbmQob2JqLCBmKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKGF0dGEpIHtcblx0ICAgIG9ialsnZGV0YWNoRXZlbnQnXShldmVudF90eXBlLCBmKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqWydyZW1vdmVFdmVudExpc3RlbmVyJ10oZXZlbnRfdHlwZSwgZik7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGRvYyA9IGRvY3VtZW50O1xuXHR2YXIgd2luID0gd2luZG93O1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciB1dGlsSGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpO1xuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgZWFjaE1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgdXRpbEVuY29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHRcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHRcblx0dmFyIGlzQXJyYXkgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0fTtcblx0ZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblx0XG5cdC8qKlxuXHQgKiBAc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjY2MTgxOC9qYXZhc2NyaXB0LWdldC14cGF0aC1vZi1hLW5vZGVcblx0ICogQHBhcmFtIGVsXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdGV4cG9ydHMuZ2V0WFBhdGggPSBmdW5jdGlvbiAoZWwpIHtcblx0ICB2YXIgYWxsX25vZGVzID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSxcblx0ICAgIHNlZ3MsIGksIHNpYiwgdW5pcXVlX2lkX2NvdW50LFxuXHQgICAgbm9kZSwgZWxfaWQ7XG5cdCAgZm9yIChzZWdzID0gW107IGVsICYmIGVsLm5vZGVUeXBlID09IDE7IGVsID0gZWwucGFyZW50Tm9kZSkge1xuXHQgICAgaWYgKGVsLmlkKSB7XG5cdCAgICAgIGVsX2lkID0gZWwuaWQ7XG5cdCAgICAgIHVuaXF1ZV9pZF9jb3VudCA9IDA7XG5cdCAgICAgIGZvciAoaSA9IDA7IGkgPCBhbGxfbm9kZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBub2RlID0gYWxsX25vZGVzW2ldO1xuXHQgICAgICAgIGlmIChub2RlLmlkICYmIG5vZGUuaWQgPT0gZWxfaWQpIHtcblx0ICAgICAgICAgIHVuaXF1ZV9pZF9jb3VudCsrO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHNlZ3MudW5zaGlmdChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyBcIltAaWQ9XFxcIlwiICsgZWxfaWQgKyBcIlxcXCJdXCIpO1xuXHQgICAgICBpZiAodW5pcXVlX2lkX2NvdW50ID09IDEpIHtcblx0ICAgICAgICBzZWdzLnVuc2hpZnQoXCIvXCIpO1xuXHQgICAgICAgIHJldHVybiBzZWdzLmpvaW4oXCIvXCIpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmb3IgKGkgPSAxLCBzaWIgPSBlbC5wcmV2aW91c1NpYmxpbmc7IHNpYjsgc2liID0gc2liLnByZXZpb3VzU2libGluZykge1xuXHQgICAgICAgIGlmIChzaWIudGFnTmFtZSA9PSBlbC50YWdOYW1lKSAgaSsrO1xuXHQgICAgICB9XG5cdCAgICAgIHNlZ3MudW5zaGlmdChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyBcIltcIiArIGkgKyBcIl1cIik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzZWdzLmxlbmd0aCA/IFwiL1wiICsgc2Vncy5qb2luKFwiL1wiKSA6IG51bGw7XG5cdH07XG5cdFxuXHR2YXIgbm9kZWxpc3RUb0FycmF5ID0gZnVuY3Rpb24gKG5vZGVsaXN0LCBub2Rlcykge1xuXHQgIGlmICghbm9kZXMgfHwgbm9kZXMubGVuZ3RoID09PSAwKSB7XG5cdCAgICBub2RlcyA9IFtdO1xuXHQgIH1cblx0ICBpZiAobm9kZWxpc3QgJiYgbm9kZWxpc3QubGVuZ3RoID4gMCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlbGlzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgICBub2Rlcy5wdXNoKG5vZGVsaXN0W2ldKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG5vZGVzO1xuXHR9O1xuXHRleHBvcnRzLm5vZGVsaXN0VG9BcnJheSA9IG5vZGVsaXN0VG9BcnJheTtcblx0XG5cdC8qKlxuXHQgKiDmoLnmja7lupTnlKjln4vnmoTlhYPntKDpgInmi6nlmajojrflj5blhYPntKBcblx0ICogQHBhcmFtIHtPYmplY3R9IHtcblx0ICogICAgbG9na2V5OiAvYS5iLmMzLFxuXHQgKiAgICBlbGVtZW50U2VsZWN0b3I6ICdwW2RhdGEtc3BtLWNsaWNrXScsXG5cdCAqICAgIHRhZzogcCxcblx0ICogICAgZmlsdGVyOiBkYXRhLXNwbS1jbGlja1xuXHQgKiB9XG5cdCAqIEByZXR1cm4ge0FycmF5fSBlbGVtZW50c1xuXHQgKi9cblx0ZXhwb3J0cy5nZXRFbGVtZW50cyA9IGZ1bmN0aW9uKG8sIF9kb2N1bWVudCkge1xuXHQgIHZhciBfZG9jID0gX2RvY3VtZW50IHx8IGRvYztcblx0ICB2YXIgZWxlbWVudHMgPSBbXTtcblx0ICAvLyDmlK/mjIFxdWVyeVNlbGVjdG9yQWxs55qE5rWP6KeI5Zmo5oyJ6L+Z5Liq5p2l5Y+W77yM5ZCm5YiZ5oyJ5Lyg57uf55qE5pa55rOVXG5cdCAgaWYgKF9kb2MucXVlcnlTZWxlY3RvckFsbCkge1xuXHQgICAgZWxlbWVudHMgPSBub2RlbGlzdFRvQXJyYXkoX2RvYy5xdWVyeVNlbGVjdG9yQWxsKG8uZWxlbWVudFNlbGVjdG9yKSB8fCBbXSk7XG5cdCAgICAvLyB2YXIgZWxlX3NlbGVjdG9yX3NlbGYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG8uZWxlbWVudFNlbGVjdG9yKTtcblx0ICAgIC8vIGlmIChfZG9jdW1lbnQgJiYgZWxlX3NlbGVjdG9yX3NlbGYgPT09IF9kb2N1bWVudCkge1xuXHQgICAgLy8gICBlbGVtZW50cy5wdXNoKF9kb2N1bWVudCk7XG5cdCAgICAvLyB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciB0YWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoby50YWcpO1xuXHQgICAgdmFyIGF0dHJzID0gby5maWx0ZXIuc3BsaXQoJz0nKTtcblx0ICAgIHZhciBhdHRyX2tleSA9IGF0dHJzLmxlbmd0aCA+IDAgPyBhdHRyc1swXS50cmltKCkgOiAnJztcblx0ICAgIHZhciBhdHRyX3ZhbHVlID0gYXR0cnMubGVuZ3RoID4gMSA/IGF0dHJzWzFdLnRyaW0oKSA6ICcnO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgdG1wX3RhZyA9IHRhZ3NbaV07XG5cdCAgICAgIHZhciB0bXBfdmFsdWUgPSB0bXBfdGFnLmdldEF0dHJpYnV0ZShhdHRyX2tleSk7XG5cdCAgICAgIHZhciBoYXNLZXkgPSB0bXBfdGFnLmhhc0F0dHJpYnV0ZShhdHRyX2tleSk7XG5cdCAgICAgIGlmIChoYXNLZXkgJiYgKGF0dHJfdmFsdWUgPyBhdHRyX3ZhbHVlID09PSB0bXBfdmFsdWUgOiB0cnVlKSkge1xuXHQgICAgICAgIGVsZW1lbnRzLnB1c2godG1wX3RhZyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGVsZW1lbnRzO1xuXHR9O1xuXHRcblx0dmFyIGlzRGVidWcgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gL2FwbHVzRGVidWc9dHJ1ZS8udGVzdChsb2NhdGlvbi5zZWFyY2gpO1xuXHR9O1xuXHR2YXIgSVNfREVCVUcgPSBpc0RlYnVnKCk7XG5cdFxuXHRleHBvcnRzLklTX0RFQlVHID0gSVNfREVCVUc7XG5cdFxuXHQvKipcblx0ICog6K+75Y+W6KKr5pud5YWJL+eCueWHu+WFg+e0oOS4iueahOeJueWumuWxnuaAp++8jOi/meS6m+eJueWumuWxnuaAp+aYr+mAmui/h+abneWFieWfi+eCueS6i+WFiOWfi+i/m+WOu+eahO+8jOWmgui/meS4quS+i+WtkOmHjOeahHByb3Bz77yaXG5cdCAqIDxtZXRhIG5hbWU9XCJhcGx1cy1hdXRvLWV4cFwiIGNvbnRlbnQ9J1t7XCJsb2drZXlcIjpcIi9hYmMxXCIsXCJ0YWdcIjpcImFcIixcImZpbHRlclwiOlwiZGF0YS1zY21cIixcInByb3BzXCI6W1wiY2F0ZVwiLCBcIm5hbWVcIl19XSc+XG5cdCAqIDxtZXRhIG5hbWU9XCJhcGx1cy1hdXRvLWNsa1wiIGNvbnRlbnQ9J1t7XCJsb2drZXlcIjpcIi9hYmMxXCIsXCJ0YWdcIjpcImFcIixcImZpbHRlclwiOlwiZGF0YS1zY21cIixcInByb3BzXCI6W1wiY2F0ZVwiLCBcIm5hbWVcIl19XSc+XG5cdCAqIOi/meS4quaWueazleS8muivu+WPlmVsZW1lbnTkuIrnmoRuYW1l5bGe5oCn5ZKMY2F0ZeWxnuaAp+eahOWAvFxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IG9ialxuXHQgKi9cblx0ZXhwb3J0cy5maWxsUHJvcHNEYXRhID0gZnVuY3Rpb24gKGV4cENvbmZpZywgZWxlbWVudCwgb2JqKSB7XG5cdCAgaWYgKCFvYmopIHtcblx0ICAgIG9iaiA9IHt9O1xuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgdmFyIF9leHBfcHJvcHMgPSBleHBDb25maWcucHJvcHMgfHwgW107XG5cdCAgICBpZiAoX2V4cF9wcm9wcyAmJiBpc0FycmF5KF9leHBfcHJvcHMpICYmIF9leHBfcHJvcHMubGVuZ3RoID4gMCkge1xuXHQgICAgICBmb3IgKHZhciBrID0gMDsgayA8IF9leHBfcHJvcHMubGVuZ3RoOyBrKyspIHtcblx0ICAgICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xuXHQgICAgICAgICAgdmFyIGtleSA9IF9leHBfcHJvcHNba107XG5cdCAgICAgICAgICB2YXIgX3ZhbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGtleSk7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIF92YWwgIT09IHVuZGVmaW5lZCAmJiBfdmFsICE9PSBudWxsICYmIF92YWwgIT09ICcnKSB7XG5cdCAgICAgICAgICAgIHZhciBjS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXmRhdGEtLywgJycpO1xuXHQgICAgICAgICAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc1VNKSB7XG5cdCAgICAgICAgICAgICAgb2JqW2NLZXldID0gX3ZhbDtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBvYmpbY0tleV0gPSBlbmNvZGVVUklDb21wb25lbnQoX3ZhbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB1bG9nKCkudyhlICYmIGUubWVzc2FnZSk7XG5cdCAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAvLyAgIG1zZzogZSAmJiBlLm1lc3NhZ2Vcblx0ICAgIC8vIH0pO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOivu+WPluiiq+abneWFiS/ngrnlh7vlhYPntKDkuIrnmoRmaWx0ZXLlsZ7mgKfvvIzlpoLov5nkuKrkvovlrZDvvJpcblx0ICogPG1ldGEgbmFtZT1cImFwbHVzLWF1dG8tZXhwXCIgY29udGVudD0nW3tcImxvZ2tleVwiOlwiL2FiYzFcIixcInRhZ1wiOlwiYVwiLFwiZmlsdGVyXCI6XCJkYXRhLXNjbVwiLFwicHJvcHNcIjpbXCJjYXRlXCIsIFwibmFtZVwiXX1dJz5cblx0ICogPG1ldGEgbmFtZT1cImFwbHVzLWF1dG8tY2xrXCIgY29udGVudD0nW3tcImxvZ2tleVwiOlwiL2FiYzFcIixcInRhZ1wiOlwiYVwiLFwiZmlsdGVyXCI6XCJkYXRhLXNjbVwiLFwicHJvcHNcIjpbXCJjYXRlXCIsIFwibmFtZVwiXX1dJz5cblx0ICog6L+Z5Liq5pa55rOV5Lya6K+75Y+WZWxlbWVudOS4iueahGRhdGEtc2Nt5bGe5oCn55qE5YC8XG5cdCAqIEByZXR1cm4ge09iamVjdH0gb2JqXG5cdCAqL1xuXHR2YXIgZmlsbEZpbHRlckRhdGEgPSBmdW5jdGlvbiAoZXhwQ29uZmlnLCBlbGVtZW50LCBvYmopIHtcblx0ICBpZiAoIW9iaikge1xuXHQgICAgb2JqID0ge307XG5cdCAgfVxuXHQgIHRyeSB7XG5cdCAgICB2YXIgZmlsdGVyID0gZXhwQ29uZmlnLmZpbHRlciB8fCAnJztcblx0ICAgIHZhciB0bXBzID0gZmlsdGVyLnNwbGl0KCc9Jyk7XG5cdFxuXHQgICAgaWYgKGlzQXJyYXkodG1wcykgJiYgdG1wc1sxXSkge1xuXHQgICAgICBvYmpbdG1wc1swXV0gPSB0bXBzWzFdO1xuXHQgICAgfSBlbHNlIGlmICh0bXBzWzBdICYmIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHtcblx0ICAgICAgdmFyIF92YWwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSh0bXBzWzBdKSB8fCAnJztcblx0ICAgICAgaWYgKHR5cGVvZiBfdmFsICE9PSB1bmRlZmluZWQgJiYgX3ZhbCAhPT0gbnVsbCAmJiBfdmFsICE9PSAnJykge1xuXHQgICAgICAgIG9ialt0bXBzWzBdXSA9IF92YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB1bG9nKCkudyhlICYmIGUubWVzc2FnZSk7XG5cdCAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAvLyAgIG1zZzogZSAmJiBlLm1lc3NhZ2Vcblx0ICAgIC8vIH0pO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRleHBvcnRzLmZpbGxGaWx0ZXJEYXRhID0gZmlsbEZpbHRlckRhdGE7XG5cdFxuXHR2YXIgREFUQV9UUkFDS0VSX1BBUkFNUyA9ICdkYXRhLXRyYWNrZXItcGFyYW1zJztcblx0ZXhwb3J0cy5nZXREYXRhVHJhY2tlclBhcmFtcyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdCAgdmFyIHJzID0ge307XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBkYXRhVHJhY2tlclBhcmFtcyA9IGZpbGxGaWx0ZXJEYXRhKHtcblx0ICAgICAgZmlsdGVyOiBEQVRBX1RSQUNLRVJfUEFSQU1TXG5cdCAgICB9LCBlbGVtZW50KTtcblx0ICAgIGlmIChkYXRhVHJhY2tlclBhcmFtcyAmJiBkYXRhVHJhY2tlclBhcmFtc1tEQVRBX1RSQUNLRVJfUEFSQU1TXSkge1xuXHQgICAgICBycyA9IEpTT04ucGFyc2UoZGF0YVRyYWNrZXJQYXJhbXNbREFUQV9UUkFDS0VSX1BBUkFNU10pOyAgXG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgIH1cblx0ICByZXR1cm4gcnM7XG5cdH07XG5cdFxuXHQvKipcblx0ICog6K+75Y+WZXhwQ29uZmln5Lit55qEc3BtQ+OAgXNwbUTkv6Hmga/liLBvYmrkuK1cblx0ICogQHBhcmFtIHsqfSBleHBDb25maWcgXG5cdCAqIEBwYXJhbSB7Kn0gZWxlbWVudCBcblx0ICogQHBhcmFtIHsqfSBvYmogXG5cdCAqL1xuXHRleHBvcnRzLmZpbGxTcG1EYXRhID0gZnVuY3Rpb24gKGV4cENvbmZpZywgZWxlbWVudCwgb2JqKSB7XG5cdCAgaWYgKCFvYmopIHtcblx0ICAgIG9iaiA9IHt9O1xuXHQgIH1cblx0ICB2YXIgc3BtQiwgc3BtQywgc3BtRDtcblx0ICBpZiAoZXhwQ29uZmlnICYmIGV4cENvbmZpZy5zcG1CKSB7XG5cdCAgICBzcG1CID0gZXhwQ29uZmlnLnNwbUI7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHNwbUIgPSBkb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnBhZ2VuYW1lO1xuXHQgIH1cblx0XG5cdCAgaWYgKGV4cENvbmZpZyAmJiBleHBDb25maWcuc3BtQykge1xuXHQgICAgc3BtQyA9IGV4cENvbmZpZy5zcG1DO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzcG1DID0gZWxlbWVudC5wYXJlbnROb2RlICYmIGVsZW1lbnQucGFyZW50Tm9kZS5kYXRhc2V0ICYmIGVsZW1lbnQucGFyZW50Tm9kZS5kYXRhc2V0LnNwbWM7XG5cdCAgfVxuXHRcblx0ICBpZiAoZXhwQ29uZmlnICYmIGV4cENvbmZpZy5zcG1EKSB7XG5cdCAgICBzcG1EID0gZXhwQ29uZmlnLnNwbUQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHNwbUQgPSBlbGVtZW50LmRhdGFzZXQgJiYgZWxlbWVudC5kYXRhc2V0LnNwbWQ7XG5cdCAgfVxuXHRcblx0ICBpZiAoZWxlbWVudC5kYXRhc2V0ICYmIGVsZW1lbnQuZGF0YXNldC5hcGx1c1Z0UG9zKSB7XG5cdCAgICBzcG1EICs9ICgnXycgKyBlbGVtZW50LmRhdGFzZXQuYXBsdXNWdFBvcyk7XG5cdCAgfVxuXHRcblx0ICBpZiAoc3BtQikge1xuXHQgICAgb2JqWydzcG1CJ10gPSBzcG1CO1xuXHQgIH1cblx0ICBpZiAoc3BtQykge1xuXHQgICAgb2JqWydzcG1DJ10gPSBzcG1DO1xuXHQgIH1cblx0ICBpZiAoc3BtRCkge1xuXHQgICAgb2JqWydzcG1EJ10gPSBzcG1EO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRcblx0dmFyIGlzTWV0aG9kID0gZnVuY3Rpb24gKG1ldGhvZCkge1xuXHQgIHJldHVybiAhIS9eUE9TVHxHRVQkL2kudGVzdChtZXRob2QpO1xuXHR9O1xuXHRleHBvcnRzLmlzTWV0aG9kID0gaXNNZXRob2Q7XG5cdFxuXHR2YXIgaXNQa2dTaXplID0gZnVuY3Rpb24gKHBrZ1NpemUpIHtcblx0ICB2YXIgaXNfcGtnX3NpemUgPSAhIS9eXFxkKyQvLnRlc3QocGtnU2l6ZSk7XG5cdCAgaWYgKGlzX3BrZ19zaXplICYmIHBhcnNlSW50KHBrZ1NpemUpID4gMCkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fTtcblx0ZXhwb3J0cy5pc1BrZ1NpemUgPSBpc1BrZ1NpemU7XG5cdFxuXHQvKipcblx0ICogYWRkZWQgYnkgQFJpY2hhcmR86LCL5aOrIGluIDIwMTctMTEtMjgg5aKe5Yqg5pel5b+X5omT5YyF5p2h5pWwXCJwa2dTaXplXCIsIOaXpeW/l+WPkemAgeaWueW8j1wibWV0aG9kXCLkuKTkuKrphY3nva7poblcblx0ICogQHBhcmFtcyBleHBDb25maWcge09iamVjdH1cblx0ICogICAgZWc6IHtcblx0ICogICAgICAgXCJsb2drZXlcIjpcIi9hYmMxXCIsXCJ0YWdcIjpcImFcIixcImZpbHRlclwiOlwiZGF0YS1zY21cIixcInByb3BzXCI6W1wibmFtZVwiLFwiYWdlXCJdLFwicGtnU2l6ZVwiOjksXCJtZXRob2RcIjpcIkdFVFwiXG5cdCAqICAgICB9XG5cdCAqIEByZXR1cm4ge09iamVjdH0ge21ldGhvZDogJ0dFVC9QT1NUJywgcGtnU2l6ZTogbnVtYmVyfVxuXHQgKi9cblx0ZXhwb3J0cy5maWx0ZXJFeHBDb25maWdSZXF1ZXN0Q2ZnID0gZnVuY3Rpb24gKGV4cENvbmZpZykge1xuXHQgIHZhciBjZmcgPSBjb25maWcuZ2V0RGVmYXVsdFJlcXVlc3RDZmcoKSB8fCB7fTtcblx0ICB0cnkge1xuXHQgICAgdmFyIG9iaiA9IGV4cENvbmZpZyB8fCB7fTtcblx0ICAgIGlmIChpc01ldGhvZChvYmoubWV0aG9kKSkge1xuXHQgICAgICBjZmcubWV0aG9kID0gb2JqLm1ldGhvZDtcblx0ICAgIH1cblx0ICAgIGlmIChpc1BrZ1NpemUob2JqLnBrZ1NpemUpKSB7XG5cdCAgICAgIGNmZy5wa2dTaXplID0gcGFyc2VJbnQob2JqLnBrZ1NpemUpO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHVsb2coKS53KGUgJiYgZS5tZXNzYWdlKTtcblx0ICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgIC8vICAgbXNnOiBlICYmIGUubWVzc2FnZVxuXHQgICAgLy8gfSk7XG5cdCAgfVxuXHQgIHJldHVybiBjZmc7XG5cdH07XG5cdFxuXHR2YXIgc3RyaW5nVG9PYmplY3QgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgdmFyIHBhcmFtc0FyciA9IHBhcmFtcy5zcGxpdCgnJicpO1xuXHQgIHZhciBvYmogPSB7fTtcblx0ICBpZiAocGFyYW1zQXJyLmxlbmd0aCA+IDApIHtcblx0ICAgIGVhY2gocGFyYW1zQXJyLCBmdW5jdGlvbiAodikge1xuXHQgICAgICB2YXIgdG1wID0gdi5zcGxpdCgnPScpO1xuXHQgICAgICBpZiAodG1wLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICAgIG9ialt0bXBbMF1dID0gdXRpbEVuY29kZS50cnlUb0VuY29kZVVSSUNvbXBvbmVudCh0bXBbMV0pO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgcmV0dXJuIG9iajtcblx0fTtcblx0XG5cdGV4cG9ydHMuYXV0b1VzZXJGbkhhbmRsZXIgPSBmdW5jdGlvbiAoYXV0b1VzZXJGbiwgZWwsIGVsZW1lbnRTZWxlY3RvciwgYXV0b0NvbmZpZywgZSl7XG5cdCAgdmFyIHJzID0ge1xuXHQgICAgdXNlcmRhdGE6IHt9LFxuXHQgICAgc3BtOiAnJyxcblx0ICAgIHNjbTogJydcblx0ICB9O1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgdXNlclBhcmFtcyA9IGF1dG9Vc2VyRm4oZWwsIGVsZW1lbnRTZWxlY3RvciwgYXV0b0NvbmZpZywgZSk7XG5cdCAgICBpZiAodXNlclBhcmFtcykge1xuXHQgICAgICBpZiAodHlwZW9mIHVzZXJQYXJhbXMgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgLy8gcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh1c2VyUGFyYW1zKTtcblx0ICAgICAgICBycy51c2VyZGF0YSA9IHN0cmluZ1RvT2JqZWN0KHVzZXJQYXJhbXMpOyAvLyDlrZfnrKbkuLLkvKDpgJLkuI3mlK/mjIHms6jlhaVzcG3jgIFzY21cblx0ICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXNlclBhcmFtcyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHVzZXJQYXJhbXMudXNlcmRhdGEgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgLy8gcnMudXNlcmRhdGEgPSB0eXBlb2YgdXNlclBhcmFtcy51c2VyZGF0YSA9PT0gJ29iamVjdCcgPyB1c2VyUGFyYW1zLnVzZXJkYXRhIDogIHt9O1xuXHQgICAgICAgIGVhY2hNYXAodXNlclBhcmFtcy51c2VyZGF0YSwgZnVuY3Rpb24gKGssIHYpIHtcblx0ICAgICAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcblx0ICAgICAgICAgICAgcnMudXNlcmRhdGFba10gPSB2O1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcnMudXNlcmRhdGFba10gPSB1dGlsRW5jb2RlLnRyeVRvRW5jb2RlVVJJQ29tcG9uZW50KHYpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJzLnNwbSA9IHVzZXJQYXJhbXMuc3BtO1xuXHQgICAgICAgIHJzLnNjbSA9IHVzZXJQYXJhbXMuc2NtO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICAvLyBjb25zb2xlLmxvZyhlKTtcblx0ICAgIHVsb2coKS53KGUpO1xuXHQgIH1cblx0ICByZXR1cm4gcnM7XG5cdH07XG5cdFxuXHR2YXIgZ2V0RWxlQXR0cmlidXRlcyA9IGZ1bmN0aW9uKGVsZSwgY29uZmlnKSB7XG5cdCAgdmFyIGF0dHJpYnV0ZXMgPSAnJztcblx0ICBpZiAoZWxlICYmIGNvbmZpZykge1xuXHQgICAgdmFyIGF0dHJfdmFsdWVzID0gW2VsZS5nZXRBdHRyaWJ1dGUoY29uZmlnLmZpbHRlcildO1xuXHQgICAgdmFyIHByb3BzID0gY29uZmlnLnByb3BzIHx8IFtdO1xuXHQgICAgaWYgKHByb3BzKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhdHRyX3ZhbHVlcy5wdXNoKGVsZS5nZXRBdHRyaWJ1dGUocHJvcHNbaV0pKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgYXR0cmlidXRlcyA9IGF0dHJfdmFsdWVzLmpvaW4oJ18nKTtcblx0ICB9XG5cdCAgcmV0dXJuIGF0dHJpYnV0ZXM7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQHJldHVybiB7T2JqZWN0fSBzcG0ge1xuXHQgKiAgIGE6IGFhYSxcblx0ICogICBiOiBiYmIsXG5cdCAqICAgYzogY2NjLFxuXHQgKiAgIGQ6IGRkZCxcblx0ICogICBlOiBwdmlkLFxuXHQgKiB9XG5cdCAqL1xuXHR2YXIgZ2V0U3BtT2JqID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblx0ICAvLyBjb25zb2xlLnRpbWUoJ2dldFNwbU9iaicpO1xuXHQgIHZhciBzcG1BbmNob3JJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNwbS1hbmNob3ItaWQnKTtcblx0ICBpZiAoc3BtQW5jaG9ySWQpIHtcblx0ICAgIHZhciBhbmNob3JfaWQgPSBzcG1BbmNob3JJZC5zcGxpdCgnLicpO1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgYTogYW5jaG9yX2lkWzBdLFxuXHQgICAgICBiOiBhbmNob3JfaWRbMV0sXG5cdCAgICAgIGM6IGFuY2hvcl9pZFsyXSxcblx0ICAgICAgZDogYW5jaG9yX2lkWzNdLFxuXHQgICAgICBlOiBhbmNob3JfaWRbNF0sXG5cdCAgICB9O1xuXHQgIH1cblx0ICAvLyBjb25zb2xlLnRpbWVFbmQoJ2dldFNwbU9iaicpO1xuXHQgIHJldHVybjtcblx0fTtcblx0ZXhwb3J0cy5nZXRTcG1PYmogPSBnZXRTcG1PYmo7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBjb25maWcgOiB7XG5cdCAqICAgY3NzU2VsZWN0b3I6IFwiW2RhdGEtdHJhY2tlcj1cImx6ZG1vZC1semQtYWN0LXByb2R1Y3Qtc2xvdDNcIl1cIlxuXHQgKiAgIGVsZW1lbnRTZWxlY3RvcjogXCJbZGF0YS10cmFja2VyPVwibHpkbW9kLWx6ZC1hY3QtcHJvZHVjdC1zbG90M1wiXVwiXG5cdCAqICAgbG9na2V5OiBcIi96YWMudGVzdC5wcm9kdWN0MVwiXG5cdCAqICAgc291cmNlOiBcImFwbHVzX3dlYnZ0XCIgIC8vIOihqOekuuadpeiHquWPr+inhuWMluWfi+eCuVxuXHQgKiB9XG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyA6IHtcblx0ICogICAgaWdub3JlX2F0dHI6IHRydWUsXG5cdCAqICAgIGluZGV4OiBpLFxuXHQgKiAgICBlbGU6IGVsZVxuXHQgKiAgfVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRFbGVtZW50SGFzaCA9IGZ1bmN0aW9uIChjb25maWcsIG9wdGlvbnMpIHtcblx0ICB2YXIgc3BtID0ge307XG5cdCAgaWYgKGNvbmZpZy5zb3VyY2UgIT09ICdhcGx1c193ZWJ2dCcpIHtcblx0ICAgIHNwbSA9IGdldFNwbU9iaihvcHRpb25zLmVsZSkgfHwgKHdpbmRvdy5nX1NQTSAgPyB3aW5kb3cuZ19TUE0uZ2V0UGFyYW0ob3B0aW9ucy5lbGUpIDoge30pOyAvLyBUT0RPIOatpOWkhOaAp+iDveaNn+iAl+i+g+Wkp1xuXHQgIH1cblx0XG5cdCAgdmFyIGhhc2hfdmFsdWVfaW5kZXhzID0gJyc7XG5cdCAgLy8gc3Bt5oiWeHBhdGhcblx0ICB2YXIgRUlOREVYID0gJ3gnICsgb3B0aW9ucy5pbmRleDtcblx0ICBpZiAoc3BtLmEgJiYgc3BtLmIgJiYgc3BtLmMgJiYgc3BtLmQpIHtcblx0ICAgIHZhciBTUE1EID0gL15pLy50ZXN0KHNwbS5kKSA/IEVJTkRFWCA6IHNwbS5kO1xuXHQgICAgaGFzaF92YWx1ZV9pbmRleHMgPSBzcG0uYSArICdfJyArIHNwbS5iICsgJ18nICsgc3BtLmMgKyAnXycgKyBTUE1EO1xuXHQgICAgaWYgKHNwbS5lKSB7XG5cdCAgICAgIGhhc2hfdmFsdWVfaW5kZXhzICs9ICdfJyArIHNwbS5lO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBUT0RPIOWmguaenHhwYXRo5rKh5pyJ5oCn6IO96Zeu6aKY77yM55SoeHBhdGjku6Pmm7/lpoLkuIvov5nmrrXku6PnoIEgQOiwi+WjqyBpbiAyMDE4LTExLTE5XG5cdCAgICBoYXNoX3ZhbHVlX2luZGV4cyA9IEVJTkRFWDtcblx0ICAgIGlmIChhcGx1cy5wdmlkKSB7XG5cdCAgICAgIGhhc2hfdmFsdWVfaW5kZXhzICs9IGFwbHVzLnB2aWQ7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIOihpeWFhWVsZW1lbnRTZWxlY3RvcuOAgeWxnuaAp+WPmOWMllxuXHQgIGlmICghb3B0aW9ucy5pZ25vcmVfYXR0cikge1xuXHQgICAgaGFzaF92YWx1ZV9pbmRleHMgKz0gY29uZmlnLmxvZ2tleSArICdfJztcblx0ICAgIGhhc2hfdmFsdWVfaW5kZXhzICs9IGNvbmZpZy5lbGVtZW50U2VsZWN0b3IgKyAnXyc7XG5cdCAgICBoYXNoX3ZhbHVlX2luZGV4cyArPSBnZXRFbGVBdHRyaWJ1dGVzKG9wdGlvbnMuZWxlLCBjb25maWcpOyAgXG5cdCAgfVxuXHQgIHZhciBfdG1wID0gRUlOREVYICsgJ18nICsgdXRpbEhhc2guaGFzaChoYXNoX3ZhbHVlX2luZGV4cyk7XG5cdCAgcmV0dXJuIF90bXA7XG5cdH07XG5cdC8vIGNvcHkgZnJvbSB1dGlsQWMuanNcblx0XG5cdC8vIOi/h+a7pOS4jeaDs+S4iuS8oOeahOWxnuaAp1xuXHRleHBvcnRzLmZpbHRlclVubG9hZEF0dHIgPSBmdW5jdGlvbihzdHIpIHtcblx0ICBpZiAoc3RyKSB7XG5cdCAgICBzdHIgPSBzdHIucmVwbGFjZSgvKGhyZWZ8c3R5bGV8ZGF0YS1zcG0tYW5jaG9yLWlkKT1bXFwnfFxcXCJdW1xcd3xcXFd8XFwuXStbXFwnfFxcXCJdLywgJycpO1xuXHQgICAgc3RyID0gc3RyLnJlcGxhY2UoL1xcc1xcPi9nLCAnPicpO1xuXHQgICAgc3RyID0gc3RyLnJlcGxhY2UobmV3IFJlZ0V4cChjb25maWcuREFUQV9BUExVU19BRV9LRVkgKyAnPVtcXFxcXFwnfFxcXFxcXFwiXVxcXFxcXHcrW1xcXFxcXCd8XFxcXFxcXCJdJyksICcnKTtcblx0ICAgIHN0ciA9IHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoY29uZmlnLkRBVEFfQVBMVVNfQUNfS0VZICsgJz1bXFxcXFxcJ3xcXFxcXFxcIl1cXFxcXFx3K1tcXFxcXFwnfFxcXFxcXFwiXScpLCAnJyk7XG5cdCAgfVxuXHQgIHJldHVybiBzdHI7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5pu05pawYXBsdXMuX2FjSGFzaE1hcFxuXHQgKi9cblx0dmFyIHVwZGF0ZU1hcFZhbHVlID0gZnVuY3Rpb24odG1wSGFzaHMsIG9iaikge1xuXHQgIHZhciB1cEZsYWc7XG5cdCAgdmFyIGkgPSAwO1xuXHQgIHZhciBsZW4gPSB0bXBIYXNocy5sZW5ndGg7XG5cdCAgd2hpbGUgKGkgPCBsZW4pIHtcblx0ICAgIHZhciB0bXBPYmogPSB0bXBIYXNoc1tpXSB8fCB7fTtcblx0ICAgIGlmICh0bXBPYmouaGFzaF92YWx1ZSA9PT0gb2JqLmhhc2hfdmFsdWUpIHtcblx0ICAgICAgdG1wSGFzaHNbaV0gPSBvYmo7XG5cdCAgICAgIHVwRmxhZyA9IHRydWU7XG5cdCAgICAgIHJldHVybiB0bXBIYXNocztcblx0ICAgIH1cblx0ICAgIGkrKztcblx0ICB9XG5cdCAgLy8gZm9yKHZhciBpID0gMDsgaSA8IHRtcEhhc2hzLmxlbmd0aDsgaSsrKSB7XG5cdCAgLy8gfVxuXHQgIGlmICghdXBGbGFnKSB7XG5cdCAgICB0bXBIYXNocy5wdXNoKG9iaik7XG5cdCAgfVxuXHQgIHJldHVybiB0bXBIYXNocztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUhhc2hzIChsb2drZXksIG9wdHMsIGFwbHVzS2V5KSB7XG5cdCAgdmFyIGhhc2hfdmFsdWUgPSBvcHRzLmhhc2hfdmFsdWU7XG5cdCAgdmFyIEdNID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbChhcGx1c0tleSkgfHwge307XG5cdCAgaWYgKCFHTS5oYXNoX3ZhbHVlKSB7XG5cdCAgICBHTS5oYXNoX3ZhbHVlID0ge307XG5cdCAgfVxuXHQgIGlmICghR00uaGFzaF92YWx1ZVtsb2drZXldKSB7XG5cdCAgICBHTS5oYXNoX3ZhbHVlW2xvZ2tleV0gPSB3aW4uTWFwID8gbmV3IHdpbi5NYXAoKSA6IHt9O1xuXHQgIH1cblx0ICBpZiAod2luLk1hcCkge1xuXHQgICAgdmFyIHRtcFZhbHVlID0gR00uaGFzaF92YWx1ZVtsb2drZXldLmdldChoYXNoX3ZhbHVlKTtcblx0ICAgIGlmICh0bXBWYWx1ZSkge1xuXHQgICAgICArK3RtcFZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdG1wVmFsdWUgPSAxO1xuXHQgICAgfVxuXHQgICAgR00uaGFzaF92YWx1ZVtsb2drZXldLnNldChoYXNoX3ZhbHVlLCB0bXBWYWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmIChHTS5oYXNoX3ZhbHVlW2xvZ2tleV1baGFzaF92YWx1ZV0pIHtcblx0ICAgICAgKytHTS5oYXNoX3ZhbHVlW2xvZ2tleV1baGFzaF92YWx1ZV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBHTS5oYXNoX3ZhbHVlW2xvZ2tleV1baGFzaF92YWx1ZV0gPSAxO1xuXHQgICAgfVxuXHQgIH1cblx0ICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKGFwbHVzS2V5LCBHTSk7IFxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOabtOaWsFwiYXBsdXMuX2FjSGFzaE1hcFwi77yMXCJhcGx1cy5fYWNIYXNoTWFwXCLmoLzlvI/lpoLkuItcblx0ICoge1xuXHQgKiAgICcvYS5iLmMxJzogWyczNTU4NWI0YycsICczNTU4NWI0ZCcsICczNTU4NWI0ZSddLFxuXHQgKiAgICcvYS5iLmMyJzogWyczNTU4NWI1YycsICczNTU4NWI1ZCcsICczNTU4NWI1ZSddLFxuXHQgKiAgICcvYS5iLmMzJzogWyczNTU4NWI1YycsICczNTU4NWI1ZCcsICczNTU4NWI1ZSddLFxuXHQgKiB9XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBsb2drZXkgPT4gJy9hLmIuYzEnXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmo6IHtcblx0ICAgICAgIGhhc2hfdmFsdWUgPT4gJzM1NTg1YjRjJ1xuXHQgICAgICAgZWxlOiB4eHhcblx0ICAgfVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSA9PiBDTEVBUi9BREQvVVBEQVRFIGRlZmF1bHQgdmFsdWUgaXMgQUREXG5cdCAqL1xuXHR2YXIgdXBkYXRlSGFzaE1hcCA9IGZ1bmN0aW9uKGxvZ2tleSwgb2JqLCB0eXBlLCBhcGx1c0tleSkge1xuXHQgIGlmKCF0eXBlKSB7XG5cdCAgICB0eXBlID0gJ0FERCc7XG5cdCAgfVxuXHQgIGlmICghbG9na2V5IHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBHTSA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoYXBsdXNLZXkpIHx8IHt9O1xuXHQgIHZhciBfYWNIYXNoTWFwID0gR00uX2FjSGFzaE1hcCB8fCB7fTtcblx0ICB2YXIgdG1wSGFzaHMgPSBfYWNIYXNoTWFwW2xvZ2tleV0gfHwgW107XG5cdFxuXHQgIHZhciBjaGVja1ZhbHVlSW5kZXggPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBpID0gMDtcblx0ICAgIHZhciBsZW4gPSB0bXBIYXNocy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaSA8IGxlbikge1xuXHQgICAgICB2YXIgdG1wT2JqID0gdG1wSGFzaHNbaV0gfHwge307XG5cdCAgICAgIGlmICh0bXBPYmouaGFzaF92YWx1ZSA9PT0gb2JqLmhhc2hfdmFsdWUpIHtcblx0ICAgICAgICByZXR1cm4gaTtcblx0ICAgICAgfVxuXHQgICAgICBpKys7XG5cdCAgICB9XG5cdCAgICAvLyBmb3IodmFyIGkgPSAwOyBpIDwgdG1wSGFzaHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIC8vIH1cblx0ICAgIHJldHVybiAtMTtcblx0ICB9O1xuXHRcblx0ICB2YXIgaW5kZXggPSBjaGVja1ZhbHVlSW5kZXgoKTtcblx0XG5cdCAgaWYgKHR5cGUgPT09ICdBREQnICYmIGluZGV4ID09PSAtMSkge1xuXHQgICAgdG1wSGFzaHMucHVzaChvYmopO1xuXHQgICAgdXBkYXRlSGFzaHMobG9na2V5LCBvYmosIGFwbHVzS2V5KTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09ICdDTEVBUicgJiYgaW5kZXggPiAtMSkge1xuXHQgICAgdG1wSGFzaHMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgIC8vIHRtcEhhc2hzW2luZGV4XSA9IG51bGw7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSAnVVBEQVRFJykge1xuXHQgICAgdG1wSGFzaHMgPSB1cGRhdGVNYXBWYWx1ZSh0bXBIYXNocywgb2JqKTtcblx0ICB9XG5cdFxuXHQgIF9hY0hhc2hNYXBbbG9na2V5XSA9IHRtcEhhc2hzO1xuXHQgIEdNLl9hY0hhc2hNYXAgPSBfYWNIYXNoTWFwO1xuXHQgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoYXBsdXNLZXksIEdNKTtcblx0fTtcblx0XG5cdFxuXHRleHBvcnRzLnVwZGF0ZUV4cEhhc2hNYXAgPSBmdW5jdGlvbihsb2drZXksIG9iaiwgdHlwZSkge1xuXHQgIHVwZGF0ZUhhc2hNYXAobG9na2V5LCBvYmosIHR5cGUsICdfYXBsdXNfYXV0b19leHAnKTtcblx0fTtcblx0ZXhwb3J0cy51cGRhdGVDbGtIYXNoTWFwID0gZnVuY3Rpb24obG9na2V5LCBvYmosIHR5cGUpIHtcblx0ICB1cGRhdGVIYXNoTWFwKGxvZ2tleSwgb2JqLCB0eXBlLCAnX2FwbHVzX2FjJyk7XG5cdH07XG5cdFxuXHQvLyBleHBvcnRzLmRlYm91bmNlID0gZnVuY3Rpb24gKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuXHQvLyAgIHZhciB0aW1lb3V0O1xuXHQvLyAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0Ly8gICAgIHRyeSB7XG5cdC8vICAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcblx0Ly8gICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdC8vICAgICAgICAgdGltZW91dCA9IG51bGw7XG5cdC8vICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdC8vICAgICAgIH07XG5cdC8vICAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuXHQvLyAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdC8vICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0Ly8gICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdC8vICAgICB9IGNhdGNoIChlKSB7XG5cdC8vICAgICB9XG5cdC8vICAgfTtcblx0Ly8gfTtcblx0XG5cdHZhciBnZXROb3cgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHR9O1xuXHRcblx0Ly8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG5cdC8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuXHQvLyBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG5cdC8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG5cdC8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuXHRleHBvcnRzLnRocm90dGxlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgb3B0aW9ucykge1xuXHQgIHZhciB0aW1lb3V0LCBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XG5cdCAgdmFyIHByZXZpb3VzID0gMDtcblx0ICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcblx0XG5cdCAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogZ2V0Tm93KCk7XG5cdCAgICB0aW1lb3V0ID0gbnVsbDtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdCAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0ICB9O1xuXHRcblx0ICB2YXIgdGhyb3R0bGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgbm93ID0gZ2V0Tm93KCk7XG5cdCAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuXHQgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuXHQgICAgY29udGV4dCA9IHRoaXM7XG5cdCAgICBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcblx0ICAgICAgaWYgKHRpbWVvdXQpIHtcblx0ICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdCAgICAgICAgdGltZW91dCA9IG51bGw7XG5cdCAgICAgIH1cblx0ICAgICAgcHJldmlvdXMgPSBub3c7XG5cdCAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdCAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHQgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuXHQgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0XG5cdCAgdGhyb3R0bGVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHQgICAgcHJldmlvdXMgPSAwO1xuXHQgICAgdGltZW91dCA9IGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0ICB9O1xuXHRcblx0ICByZXR1cm4gdGhyb3R0bGVkO1xuXHR9O1xuXHRcblx0XG5cdC8qKlxuXHQgKiDpqozor4FoYXNoX3ZhbHVl5piv5ZCm5ZyoXCJhcGx1cy5fYWNIYXNoTWFwXCLkuK3vvIxcImFwbHVzLl9hY0hhc2hNYXBcIuagvOW8j+WmguS4i1xuXHQgKiBAcGFyYW0gb3B0cyB7XG5cdCAqICAgbG9na2V5OiAnL2F1dG9sb2cuYWlndWFuZ2ppZS5ob21lX2Jhbm5lcl9hcHAnLFxuXHQgKiAgIGhhc2hfdmFsdWU6ICc1ODE1NTViOCdcblx0ICogICBhMzEwcF83NDAzMzcwX2lzaG9wcGluZ19pbmRleF9pMF8zMWE3NjZmOFhPc2hwb18qW2RhdGEtc3BtPWlzaG9wcGluZ19pbmRleF0gLmlzaG9wcGluZ19zbGlkZV9cblx0ICogICBhcGx1c0tleTogJ19hcGx1c19hdXRvX2V4cCcgfHwgJ19hcGx1c19hYydcblx0ICogfVxuXHQgKi9cblx0ZXhwb3J0cy5jaGVja0lzSW5IYXNoTWFwID0gZnVuY3Rpb24gKG9wdHMpIHtcblx0ICB2YXIgR00gPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKG9wdHMuYXBsdXNLZXkpIHx8IHt9O1xuXHQgIHZhciBfaGFzaHMgPSBHTS5oYXNoX3ZhbHVlIHx8IHt9O1xuXHQgIHZhciBfbG9na2V5SGFzaHMgPSBfaGFzaHNbb3B0cy5sb2drZXldIHx8ICh3aW4uTWFwID8gbmV3IHdpbi5NYXAoKSA6IHt9KTtcblx0XG5cdCAgdmFyIHIgPSBfbG9na2V5SGFzaHMgJiYgX2xvZ2tleUhhc2hzLmdldCA/IF9sb2drZXlIYXNocy5nZXQob3B0cy5oYXNoX3ZhbHVlKSA6IF9sb2drZXlIYXNoc1tvcHRzLmhhc2hfdmFsdWVdO1xuXHQgIGlmIChyID4gMSkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHZhciBfYWNIYXNoTWFwID0gR00uX2FjSGFzaE1hcCB8fCB7fTtcblx0ICB2YXIgdmFsdWVzID0gX2FjSGFzaE1hcFtvcHRzLmxvZ2tleV0gfHwgW107XG5cdCAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgaWYgKHZhbHVlc1tpXS5oYXNoX3ZhbHVlID09PSBvcHRzLmhhc2hfdmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fTtcblx0XG5cdFxuXHQvLyDmm53lhYnmiJDlip/miZPkuKrmoIdcblx0ZXhwb3J0cy5zZXRSZWNvcmRTdWNjZXNzID0gZnVuY3Rpb24oZWxlbWVudE9iaiwgYXBsdXNEb21BdHRyS2V5KSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBlbGVtZW50ID0gZWxlbWVudE9iaiA/IGVsZW1lbnRPYmouZWxlbWVudCA6IHt9O1xuXHQgICAgdmFyIGhhc2hfdmFsdWUgPSBlbGVtZW50T2JqLmhhc2hfdmFsdWUgfHwgJyc7XG5cdCAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSkge1xuXHQgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhcGx1c0RvbUF0dHJLZXksIGhhc2hfdmFsdWUpO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSkge31cblx0fTtcblx0XG5cdC8vIGV4cG9ydHMuZWFjaE1hcCA9IGZ1bmN0aW9uIChtYXAsIGNhbGxiYWNrKSB7XG5cdC8vICAgaWYgKE9iamVjdCAmJiBPYmplY3Qua2V5cykge1xuXHQvLyAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhtYXApO1xuXHQvLyAgICAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xuXHQvLyAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQvLyAgICAgICB2YXIgazEgPSBrZXlzW2ldO1xuXHQvLyAgICAgICBjYWxsYmFjayhrMSwgbWFwW2sxXSk7XG5cdC8vICAgICB9XG5cdC8vICAgfSBlbHNlIHtcblx0Ly8gICAgIGZvciAodmFyIGsgaW4gbWFwKSB7XG5cdC8vICAgICAgIGNhbGxiYWNrKGssIG1hcFtrXSk7XG5cdC8vICAgICB9XG5cdC8vICAgfVxuXHQvLyB9O1xuXG5cbi8qKiovIH0pLFxuLyogNTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8g5qC55o2u5a+G6ZKlc+WvueWtl+espuS4snN0cui/m+ihjOi9rOS5iVxuXHRleHBvcnRzLmhhc2ggPSBmdW5jdGlvbihzdHIsIHMpIHtcblx0ICB2YXIgZGVmX3YgPSAxMzE1NDIzOTExO1xuXHQgIHZhciBoYXNoID0gcyB8fCBkZWZfdiwgaSwgY2g7XG5cdCAgZm9yIChpID0gc3RyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBjaCA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHQgICAgaGFzaCBePSAoKGhhc2ggPDwgNSkgKyBjaCArIChoYXNoID4+IDIpKTtcblx0ICB9XG5cdCAgdmFyIHJzID0gKGhhc2ggJiAweDdGRkZGRkZGKS50b1N0cmluZygxNik7XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICog5Y+v6KeG5YyW5Z+L54K5IC0gd2F0Y2ggU2luZ2xlIFBhZ2UgQXBwbGljYXRpb24gXG5cdCAqIHdhdGNoIFNQQSdzIGhpc3Rvcnkgb3IgaGFzaCBjaGFuZ2UsIHRoZW4gYXV0byBzZW5kUFZcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMudHJ5VG9FbmNvZGVVUklDb21wb25lbnQgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgdmFyIHYgPSB2YWwgfHwgJyc7XG5cdCAgaWYgKHZhbCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdiA9IGVuY29kZVVSSUNvbXBvbmVudChkZWNvZGVVUklDb21wb25lbnQodmFsKSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB2O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDU1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0dmFyIHV0aWxNZXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRleHBvcnRzLkRBVEFfQVBMVVNfQUVfS0VZID0gJ2RhdGEtYXBsdXMtYWUnO1xuXHRleHBvcnRzLkRBVEFfQVBMVVNfQUNfS0VZID0gJ2RhdGEtYXBsdXMtY2xrJztcblx0ZXhwb3J0cy5EQVRBX0FQTFVTX1NQTV9BTkNIT1JfSURfS0VZID0gJ2RhdGEtc3BtLWFuY2hvci1pZCc7XG5cdGV4cG9ydHMuREFUQV9BUExVU19WVF9JVEVNX0lOREVYX0tFWSA9ICdkYXRhLWFwbHVzLXZ0LXBvcyc7XG5cdFxuXHQvLyDkuI3mlK/mjIFvYnNlcnZlcueahOaDheWGteS4i++8jOi9ruivoumXtOmalO+8iG1zKVxuXHRleHBvcnRzLkxPT1BfVElNRSA9IDEwMDA7XG5cdFxuXHRleHBvcnRzLmdldERlZmF1bHRSZXF1ZXN0Q2ZnID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBtZXRob2Q6ICdQT1NUJyxcblx0ICAgIHBrZ1NpemU6IDEwXG5cdCAgfTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGdldE1ldGFWYWx1ZSAoa2V5KSB7XG5cdCAgaWYgKGFwbHVzICYmIGFwbHVzLmdldE1ldGFJbmZvKSB7XG5cdCAgICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oa2V5KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHV0aWxNZXRhLmdldE1ldGFDbnQoa2V5KTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIOiHquWKqOabneWFieaJk+eCuSAtIOWIpOWumuWPr+inhueahOavlOS+i+eOh1xuXHR2YXIgZ2V0QXV0b0V4cFZpZXdSYXRlID0gZnVuY3Rpb24oZGVmYXVsdF92YWx1ZSkge1xuXHQgIHZhciByYXRlID0gZGVmYXVsdF92YWx1ZTtcblx0ICB0cnkge1xuXHQgICAgdmFyIHZpc2libGVfcmF0ZSA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtdmlzaWJsZScpO1xuXHQgICAgaWYgKHZpc2libGVfcmF0ZSkge1xuXHQgICAgICByYXRlID0gcGFyc2VGbG9hdCh2aXNpYmxlX3JhdGUpO1xuXHQgICAgfVxuXHQgICAgaWYgKHJhdGUgPD0gMCkge1xuXHQgICAgICByYXRlID0gZGVmYXVsdF92YWx1ZTtcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gcmF0ZTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuQVVUT19BVF9WSUVXX1JBVEUgPSBnZXRBdXRvRXhwVmlld1JhdGUoMC4zKTtcblx0XG5cdC8vIHZhciBFWFBfREVCT1VOQ0VfRFVSQVRJT04gPSAxMDA7IC8vIGRlYm91Y2UgZHVyYXRpb24gMTAwbXNcblx0XG5cdC8qKlxuXHQgKiDmnInmlYjmm53lhYnml7bplb/lupXnur8gLSDmr6vnp5LmlbAobXMpXG5cdCAqIEBwYXJhbXMge051bWJlcn0gZGVmYXVsdF92YWx1ZSBpcyAzMDBtc1xuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IGR1cmF0aW9uXG5cdCAqL1xuXHR2YXIgZ2V0QXV0b0V4cER1cmF0aW9uID0gZnVuY3Rpb24oZGVmYXVsdF92YWx1ZSkge1xuXHQgIHZhciBkdXJhdGlvbiA9IGRlZmF1bHRfdmFsdWU7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB0bXBfZHVyYXRpb24gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLWR1cmF0aW9uJyk7XG5cdCAgICB2YXIgZHVyYXRpb25fbiA9IHBhcnNlSW50KHRtcF9kdXJhdGlvbik7XG5cdCAgICBpZiAoKGR1cmF0aW9uX24gKyAnJykgIT09ICdOYU4nKSB7XG5cdCAgICAgIGR1cmF0aW9uID0gZHVyYXRpb25fbjtcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcmV0dXJuIGR1cmF0aW9uO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5FWFBfRFVSQVRJT04gPSBnZXRBdXRvRXhwRHVyYXRpb24oMzAwKTsgLy/pu5jorqQzMDBtc1xuXHRcblx0Ly8gZGVib3VjZSBkdXJhdGlvbiAxMDBtc1xuXHQvLyBleHBvcnRzLmdldERlYm91bmNlRHVyYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdC8vICAgcmV0dXJuIEVYUF9ERUJPVU5DRV9EVVJBVElPTjtcblx0Ly8gfTtcblx0XG5cdC8qKlxuXHQgKiDojrflj5boh6rliqjmm53lhYnphY3nva7pobnvvIzlubblsIZmaWx0ZXLjgIF0YWflkoxjc3NTZWxlY3RvcuWQiOW5tuS4umVsZW1lbnRTZWxlY3RvclxuXHQgKiBUT0RPIEpTT04ucGFyc2Ug5LuF5pSv5oyBSUU45Y+K5Lul5LiK5rWP6KeI5ZmoID0+IGpzIGFwaVxuXHQgKiBAcGFyYW1zIGtleSB7U3RyaW5nfSAnYXBsdXMtYXV0by1leHAnLydhcGx1cy1hdXRvLWNsaydcblx0ICogQHJldHVybiB7QXJyYXl9IFt7XG5cdCAqICAgIGxvZ2tleTogL2EuYi5jMSxcblx0ICogICAgZWxlbWVudFNlbGVjdG9yOiAnZGl2W3NjbT0xMjM0XScsXG5cdCAqICAgIHRhZzogZGl2LFxuXHQgKiAgICBmaWx0ZXI6IHNjbT0xMjM0XG5cdCAqICAgIHBvc2l0aW9uU2VsZWN0b3I6IHRydWUvLnBhcmVudENsYXNzbmFtZSAvLyDnm7jlr7nlrprkvY3kuJrliqHln4vngrlcblx0ICogfSwge1xuXHQgKiAgICBsb2drZXk6IC9hLmIuYzIsXG5cdCAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ3Bbc2NtPTIzNDVdLm9uZScsXG5cdCAqICAgIHRhZzogcCxcblx0ICogICAgZmlsdGVyOiBzY209MjM0NSxcblx0ICogICAgY3NzU2VsZWN0b3I6IC5vbmVcblx0ICogfSwge1xuXHQgKiAgICBsb2drZXk6IC9hLmIuYzMsXG5cdCAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ3BbZGF0YS1zcG0tY2xpY2tdJyxcblx0ICogICAgdGFnOiBwLFxuXHQgKiAgICBmaWx0ZXI6IGRhdGEtc3BtLWNsaWNrXG5cdCAqIH1dXG5cdCAqL1xuXHR2YXIgZ2V0QXV0b0NvbmZpZyA9IGZ1bmN0aW9uKGNvbmZpZ0tleSwgbWV0YU9iaikge1xuXHQgIHZhciBjb25maWdzID0gW107XG5cdCAgLy8gdmFyIHRtcF9sb2drZXlzID0gW107XG5cdCAgdmFyIHRtcF90YWdfZmlsdGVyID0gW107XG5cdCAgdmFyIGFwbHVzQXV0b0V4cDtcblx0ICB0cnkge1xuXHQgICAgYXBsdXNBdXRvRXhwID0gbWV0YU9iaiB8fCBnZXRNZXRhVmFsdWUoY29uZmlnS2V5KTtcblx0ICAgIHZhciB0ZW1wcyA9IFtdO1xuXHQgICAgaWYgKGFwbHVzQXV0b0V4cCAmJiB0eXBlb2YgYXBsdXNBdXRvRXhwID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHRlbXBzID0gSlNPTi5wYXJzZShhcGx1c0F1dG9FeHApO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdGVtcHMgPSBKU09OLnBhcnNlKGFwbHVzQXV0b0V4cC5yZXBsYWNlKC8nL2csICdcIicpKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgYXBsdXNBdXRvRXhwID09PSAnb2JqZWN0JyAmJiBhcGx1c0F1dG9FeHAuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG5cdCAgICAgIHRlbXBzID0gYXBsdXNBdXRvRXhwO1xuXHQgICAgfVxuXHQgICAgaWYgKHRlbXBzICYmIHRlbXBzLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXBzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHRtcCA9IHRlbXBzW2ldIHx8IHt9O1xuXHQgICAgICAgIHZhciBsb2drZXkgPSB0bXAubG9na2V5IHx8ICcnO1xuXHQgICAgICAgIHZhciB0YWcgPSB0bXAudGFnID8gdG1wLnRhZyA6ICcnO1xuXHQgICAgICAgIHZhciBmaWx0ZXIgPSB0bXAuZmlsdGVyO1xuXHQgICAgICAgIHZhciBjc3NTZWxlY3RvciA9IHRtcC5jc3NTZWxlY3Rvcjtcblx0ICAgICAgICB2YXIgd2hvbGVTZWxlY3RvciA9IGNzc1NlbGVjdG9yIHx8ICh0YWcgJiYgZmlsdGVyKTtcblx0ICAgICAgICBpZiAoIWxvZ2tleSB8fCAhd2hvbGVTZWxlY3Rvcikge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgJyArIEpTT04uc3RyaW5naWZ5KHRtcCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyAyMDE3LTExLTIzIOaJi+a3mOaOpeWFpeWSjGxhemFkYeS4muWKoemcgOaxgu+8jOWFgeiuuGxvZ2tleemHjeWkjVxuXHQgICAgICAgIC8vIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0bXBfbG9na2V5cywgbG9na2V5KSA+IC0xKSB7XG5cdCAgICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCBsb2drZXkgJyArIGxvZ2tleSArICcgcmVwZWF0ZWQnKTtcblx0ICAgICAgICAvLyB9XG5cdCAgICAgICAgZmlsdGVyID0gdHlwZW9mIGZpbHRlciA9PT0gJ3N0cmluZycgPyBmaWx0ZXIuc3BsaXQoXCI9XCIpIDogW107XG5cdCAgICAgICAgdmFyIHRhZ19maWx0ZXIgPSB0YWc7XG5cdCAgICAgICAgaWYgKGZpbHRlci5sZW5ndGggPj0gMikge1xuXHQgICAgICAgICAgdGFnX2ZpbHRlciArPSAnWycgKyBmaWx0ZXIuc2hpZnQoKSArICc9XCInICsgZGVjb2RlVVJJQ29tcG9uZW50KGZpbHRlci5qb2luKCcnKSkgKyAnXCJdJztcblx0ICAgICAgICB9IGVsc2UgaWYgKGZpbHRlci5sZW5ndGggPT0gMSAmJiBmaWx0ZXJbMF0pIHtcblx0ICAgICAgICAgIHRhZ19maWx0ZXIgKz0gJ1snICsgZGVjb2RlVVJJQ29tcG9uZW50KGZpbHRlclswXSkgKyAnXSc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChjc3NTZWxlY3Rvcikge1xuXHQgICAgICAgICAgdGFnX2ZpbHRlciArPSBjc3NTZWxlY3Rvcjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRtcC5lbGVtZW50U2VsZWN0b3IgPSB0YWdfZmlsdGVyO1xuXHQgICAgICAgIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0bXBfdGFnX2ZpbHRlciwgdGFnX2ZpbHRlcikgPiAtMSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgdGFnX2ZpbHRlcl9jc3NTZWxlY3RvciAnICsgdGFnX2ZpbHRlciArICcgcmVwZWF0ZWQnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gdG1wX2xvZ2tleXMucHVzaChsb2drZXkpO1xuXHQgICAgICAgIHRtcF90YWdfZmlsdGVyLnB1c2godGFnX2ZpbHRlcik7XG5cdCAgICAgICAgY29uZmlncy5wdXNoKHRtcCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoIChlcnIpIHtcblx0ICAgIC8vIFRPRE8g55uR5o6n6L+Z5Z2X5YaF5a65XG5cdCAgICB1bG9nKCkudyhlcnIpO1xuXHQgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgLy8gICBtc2c6IGVyclxuXHQgICAgLy8gfSk7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiBjb25maWdzO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDojrflj5bmm53lhYnoh6rliqjph4fpm4bnmoTphY3nva7poblcblx0ICovXG5cdGV4cG9ydHMuZ2V0QXV0b0V4cENvbmZpZyA9IGZ1bmN0aW9uKG1ldGFPYmopIHtcblx0ICByZXR1cm4gZ2V0QXV0b0NvbmZpZygnYXBsdXMtYXV0by1leHAnLCBtZXRhT2JqKSB8fCBbXTtcblx0fTtcblx0LyoqXG5cdCAqIOiOt+WPluabneWFieiHquWKqOmHh+mbhueahOmFjee9rumhuVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRBdXRvRXhwVXNlckZuID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFlQXV0b1VzZXJGbiA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtdXNlcmZuJyk7XG5cdCAgaWYgKGFlQXV0b1VzZXJGbikge1xuXHQgICAgdmFyIGZuID0gd2luZG93W2FlQXV0b1VzZXJGbl0gfHwgYWVBdXRvVXNlckZuO1xuXHQgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICByZXR1cm4gZm47XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBudWxsO1xuXHR9O1xuXHRcblx0Ly8gPG1ldGEgbmFtZT1cImFwbHVzLWF1dG8tZXhwLXdhdGNoZG9tXCIgY29udGVudD1cInRocm90dGxlXCIgLz5cblx0ZXhwb3J0cy5pc1Rocm90dGxlV2F0Y2hEb20gPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHJzID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIHJzID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC13YXRjaGRvbScpID09PSAndGhyb3R0bGUnO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICB9XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXHQvKipcblx0ICog6I635Y+W54K55Ye76Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG5cdCAqL1xuXHRleHBvcnRzLmdldEF1dG9DbGtDb25maWcgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG5cdCAgcmV0dXJuIGdldEF1dG9Db25maWcoJ2FwbHVzLWF1dG8tY2xrJywgbWV0YU9iaikgfHwgW107XG5cdH07XG5cdC8qKlxuXHQgKiDojrflj5bngrnlh7voh6rliqjph4fpm4bnmoTphY3nva7poblcblx0ICovXG5cdGV4cG9ydHMuZ2V0QXV0b0Nsa1VzZXJGbiA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhY0F1dG9Vc2VyRm4gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tY2xrLXVzZXJmbicpO1xuXHQgIGlmKCBhY0F1dG9Vc2VyRm4gKXtcblx0ICAgIHZhciBmbiA9IHdpbmRvd1thY0F1dG9Vc2VyRm5dIHx8IGFjQXV0b1VzZXJGbjtcblx0ICAgIGlmKCB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgKXtcblx0ICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDnm5HlkKxkb23lj5jljJbvvIzmlLbpm4blvoXmm53lhYnlhYPntKBcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRcblx0dmFyIHRyYWNrZXJVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgdXRpbEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdHZhciB1dGlsX2FjX2FlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0XG5cdHZhciB3aW4gPSB3aW5kb3c7XG5cdHZhciBkb2MgPSBkb2N1bWVudDtcblx0XG5cdC8qKlxuXHQgKiDlhoXpg6jlr7nosaFcblx0ICogQG9iamVjdCAgdGhpcy5fb2JzZXJ2ZXIgICAgICAvLyBNdXRhdGlvbk9ic2VydmVy55uR5ZCs6ICFXG5cdCAqIEBvYmplY3QgIHRoaXMuX2xvb3Bfb2JzZXJ2ZXIgLy8g5LiN5pSv5oyBTXV0YXRpb25PYnNlcnZlcueahOa1j+iniOWZqO+8jOi9ruivouebkeWQrOiAhVxuXHQgKiBAb2JqZWN0ICB0aGlzLmF1dG9DbGtDb25maWcgIC8vIOmFjee9ruWPguaVsFxuXHQgKlxuXHQgKiBAcGFyYW0ge2hhbmRsZXJfZG9tX2NoYW5nZX0gY2Jcblx0ICovXG5cdHZhciBXYXRjaERvbSA9IEJhc2UuZXh0ZW5kKHtcblx0ICBlYWNoRWxlbWVudHM6IGZ1bmN0aW9uIChlbGVtZW50cywgY2xrQ29uZmlnKSB7XG5cdCAgICAvLyBjb25zb2xlLmxvZygnY2xrQ29uZmlnID09PT0gJywgY2xrQ29uZmlnKTtcblx0ICAgIHZhciBsb2drZXkgPSBjbGtDb25maWcubG9na2V5IHx8ICcnO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZWxlID0gZWxlbWVudHNbaV07XG5cdCAgICAgIGlmIChjbGtDb25maWcuX3Bvc19pZCAmJiAhZWxlLmdldEF0dHJpYnV0ZSgnZGF0YS1hcGx1cy1wb3MtaWQnKSkge1xuXHQgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtYXBsdXMtcG9zLWlkJywgY2xrQ29uZmlnLl9wb3NfaWQpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBfaW5kZXggPSBlbGUuZ2V0QXR0cmlidXRlKGNvbmZpZy5EQVRBX0FQTFVTX0FDX0tFWSk7XG5cdCAgICAgIGlmIChfaW5kZXggJiYgX2luZGV4LmluZGV4T2YoJ18nKSA+IDApIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoaXNOYU4ocGFyc2VJbnQoX2luZGV4KSkpIHtcblx0ICAgICAgICBfaW5kZXggPSBhcGx1cy5fYXBsdXNfYWMuZWxlbWVudFNlbGVjdG9yU2l6ZU1hcFtjbGtDb25maWcuZWxlbWVudFNlbGVjdG9yXSsrO1xuXHQgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoY29uZmlnLkRBVEFfQVBMVVNfQUNfS0VZLCBfaW5kZXgpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIGNsa0NvbmZpZy5zcG1CICYmIGNsa0NvbmZpZy5zcG1DICYmIGNsa0NvbmZpZy5zcG1EKSB7ICAgICAgICBcblx0ICAgICAgICBlbGUuc2V0QXR0cmlidXRlKGNvbmZpZy5EQVRBX0FQTFVTX1NQTV9BTkNIT1JfSURfS0VZLCBbY2xrQ29uZmlnLnNwbUIsIGNsa0NvbmZpZy5zcG1DLCBjbGtDb25maWcuc3BtRCArICdfJyArIChpKzEpXS5qb2luKCcuJykpO1xuXHQgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoY29uZmlnLkRBVEFfQVBMVVNfVlRfSVRFTV9JTkRFWF9LRVksICcnICsgKGkrMSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgaGFzaF92YWx1ZSA9IHV0aWxfYWNfYWUuZ2V0RWxlbWVudEhhc2goY2xrQ29uZmlnLCB7XG5cdCAgICAgICAgaWdub3JlX2F0dHI6IGZhbHNlLFxuXHQgICAgICAgIGluZGV4OiBfaW5kZXgsXG5cdCAgICAgICAgZWxlOiBlbGVcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyDpqozor4HmmK/lkKblt7Lnu4/orrDlvZXov4fkuobvvIzlpoLmnpzmsqHmnInorrDlvZXmiY3nu6fnu61cblx0ICAgICAgLy8gdmFyIGlzUmVjb3JkID0gdXRpbEVsZW1lbnRBYy5jaGVja0lzUmVjb3JkKGVsZSwgaGFzaF92YWx1ZSwgY29uZmlnLkRBVEFfQVBMVVNfQUNfS0VZKTtcblx0ICAgICAgaWYgKCF1dGlsX2FjX2FlLmNoZWNrSXNJbkhhc2hNYXAoe1xuXHQgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgIGhhc2hfdmFsdWU6IGhhc2hfdmFsdWUsXG5cdCAgICAgICAgYXBsdXNLZXk6ICdfYXBsdXNfYWMnXG5cdCAgICAgIH0pKSB7XG5cdCAgICAgICAgdmFyIF9vYmogPSB7XG5cdCAgICAgICAgICBjbGtDb25maWc6IGNsa0NvbmZpZyxcblx0ICAgICAgICAgIGhhc2hfdmFsdWU6IGhhc2hfdmFsdWUsXG5cdCAgICAgICAgICBlbGVtZW50OiBlbGUsXG5cdCAgICAgICAgICBzdGF0dXM6IDAsICAgLy8g5Yid5aeL54q25oCBXG5cdCAgICAgICAgICBlbGVtZW50U2VsZWN0b3I6IGNsa0NvbmZpZy5lbGVtZW50U2VsZWN0b3IsXG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyDlsIblvoXngrnlh7vlhYPntKDlrZjlhaVhcGx1cy5fYXBsdXNfYWMuX2FjSGFzaE1hcFxuXHQgICAgICAgIHV0aWxfYWNfYWUudXBkYXRlQ2xrSGFzaE1hcChsb2drZXksIF9vYmosICdBREQnKTtcblx0ICAgICAgICB1dGlsX2FjX2FlLnNldFJlY29yZFN1Y2Nlc3MoX29iaiwgY29uZmlnLkRBVEFfQVBMVVNfQUNfS0VZKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgLyoqXG5cdCAgICog6K+l5pa55rOV6KKrb2JzZXJ2ZXLmiJbova7or6LosIPnlKhcblx0ICAgKiDlop7ph4/mm7TmlrDlvoXmm53lhYnnmoTlhYPntKDvvIzliJ3lp4vljJblhYPntKDlnZDmoIdcblx0ICAgKiDlubblsIblvoXmm53lhYnlhYPntKDlrZjlhaVhcGx1cy5fYXBsdXNfYWMuX3RvZG9fYWNfZWxlbWVudHPvvIjlubPooYznmoR3YXRjaEV4cG9zdXJlLmpz5Lya55uR5ZCs56qX5Y+j5Y+Y5YyW5p2l55uR5o6n6L+Z5Lqb5b6F5pud5YWJ5YWD57Sg5piv5ZCm5pud5YWJ77yJXG5cdCAgICovXG5cdCAgaGFuZGxlcl9kb21fY2hhbmdlOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgYXV0b0Nsa0NvbmZpZyA9IF9zZWxmLmF1dG9DbGtDb25maWcgfHwgW107XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGF1dG9DbGtDb25maWcubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgdmFyIGNsa0NvbmZpZyA9IGF1dG9DbGtDb25maWdbal07XG5cdCAgICAgIGlmICghYXBsdXMuX2FwbHVzX2FjLmVsZW1lbnRTZWxlY3RvclNpemVNYXBbY2xrQ29uZmlnLmVsZW1lbnRTZWxlY3Rvcl0pIHtcblx0ICAgICAgICBhcGx1cy5fYXBsdXNfYWMuZWxlbWVudFNlbGVjdG9yU2l6ZU1hcFtjbGtDb25maWcuZWxlbWVudFNlbGVjdG9yXSA9IDE7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGVsZW1lbnRzID0gdXRpbF9hY19hZS5nZXRFbGVtZW50cyhjbGtDb25maWcsIGRvYyk7IC8vIOiOt+WPluaJgOaciXh4eOagh+etvuS4i+W4puaciXl5eeWxnuaAp+eahOWFg+e0oFxuXHQgICAgICBfc2VsZi5lYWNoRWxlbWVudHMoZWxlbWVudHMsIGNsa0NvbmZpZyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdGhyb3R0bGVfaGFuZGxlcl9kb21fY2hhbmdlOiB1dGlsX2FjX2FlLnRocm90dGxlKGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuaGFuZGxlcl9kb21fY2hhbmdlKCk7XG5cdCAgfSwgMjAwKSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Yid5aeL5YyWb2JzZXJ2ZXLnm5HlkKzvvIznm5HlkKxkb23lj5jljJZcblx0ICAgKiBAcGFyYW0ge01PYnNlcnZlcn0gTU9ic2VydmVyXG5cdCAgICogQHBhcmFtIHtoYW5kbGVyX2RvbV9jaGFuZ2V9IGNiXG5cdCAgICovXG5cdCAgaW5pdF9vYnNlcnZlcjogZnVuY3Rpb24oTU9ic2VydmVyLCBjYikge1xuXHQgICAgLy8g5Yib5bu66KeC5a+f6ICF5a+56LGhXG5cdCAgICB2YXIgX29ic2VydmVyID0gbmV3IE1PYnNlcnZlcihmdW5jdGlvbigpIHsgLy8gVE9ET+W9ouWPgm11dGF0aW9uc1xuXHQgICAgICAvLyBUT0RP5aKe6YeP5pu05pawIFZTIOWFqOmHj+abtOaWsFxuXHQgICAgICAvLyBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtdXRhdGlvbikge1xuXHQgICAgICAvLyB9KTtcblx0ICAgICAgdHJhY2tlclV0aWwud3JhcChmdW5jdGlvbigpe1xuXHQgICAgICAgIHZhciBfYXBsdXNfYWMgPSBhcGx1cy5fYXBsdXNfYWMgfHwge307XG5cdCAgICAgICAgKytfYXBsdXNfYWMub2JzZXJ2ZXJfdGltZXM7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfSwgJ2luaXRfb2JzZXJ2ZXJfaW5pdF9lbGVtZW50cycpO1xuXHQgICAgfSk7XG5cdCAgICAvLyDphY3nva7op4Llr5/pgInpobk6XG5cdCAgICB2YXIgY29uZmlnID0ge1xuXHQgICAgICBhdHRyaWJ1dGVzOiB0cnVlLCAgICAvLyDlsZ7mgKfnmoTlj5jliqggIFRPRE8g6aqM6K+BYXBsdXPoh6rouqvmj5LlhaXnmoTnmoTkuIDkupvlsZ7mgKflj5jljJZcblx0ICAgICAgY2hpbGRMaXN0OiB0cnVlLCAgICAgLy8g5a2Q6IqC54K555qE5Y+Y5YqoXG5cdCAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsIC8vIOiKgueCueWGheWuueaIluiKgueCueaWh+acrOeahOWPmOWKqFxuXHQgICAgICBzdWJ0cmVlOiB0cnVlLCAgICAgICAvLyDmiYDmnInlkI7ku6PoioLngrnnmoTlj5jliqhcblx0ICAgIH07XG5cdFxuXHQgICAgLy8g5Lyg5YWl55uu5qCH6IqC54K55ZKM6KeC5a+f6YCJ6aG5XG5cdCAgICBfb2JzZXJ2ZXIub2JzZXJ2ZShkb2MuYm9keSwgY29uZmlnKTtcblx0ICAgIGlmICh1dGlsX2FjX2FlLklTX0RFQlVHKSB7XG5cdCAgICAgIHVsb2coKS53KCdhcGx1c19hYyBpbml0IE11dGF0aW9uT2JzZXJ2ZXIgc3VjY2VzcyEnKTtcblx0ICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAvLyAgIG1zZzogJ2FwbHVzX2FjIGluaXQgTXV0YXRpb25PYnNlcnZlciBzdWNjZXNzISdcblx0ICAgICAgLy8gfSk7XG5cdCAgICB9XG5cdCAgICB0aGlzLl9vYnNlcnZlciA9IF9vYnNlcnZlcjtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDpkojlr7nkuI3mlK/mjIFvYnNlcnZlcueahOa1j+iniOWZqOeUqOi9ruivoueahOaWueW8j+ebkeWQrGRvbeWPmOWMllxuXHQgICAqIEBwYXJhbSB7aGFuZGxlcl9kb21fY2hhbmdlfSBjYlxuXHQgICAqL1xuXHQgIGluaXRfd2F0Y2hfZG9tOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgX2FwbHVzX2FjID0gYXBsdXMuX2FwbHVzX2FjIHx8IHt9O1xuXHQgICAgX3NlbGYuX2xvb3Bfb2JzZXJ2ZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgIGlmIChfYXBsdXNfYWMuY3VycmVudF93aW5fc3RhdHVzICE9PSAnYmx1cicpIHtcblx0ICAgICAgICBpZiAodXRpbF9hY19hZS5JU19ERUJVRykge1xuXHQgICAgICAgICAgdWxvZygpLncoJ3dhdGNoX2RvbSBpbiBhYyBMT09QX1RJTUUgaXMgJyArIGNvbmZpZy5MT09QX1RJTUUgKyAnbXMgdG90YWw6ICcgKyArK19hcGx1c19hYy53YXRjaF90aW1lcyk7XG5cdCAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICAvLyAgIG1zZzogJ3dhdGNoX2RvbSBpbiBhYyBMT09QX1RJTUUgaXMgJyArIGNvbmZpZy5MT09QX1RJTUUgKyAnbXMgdG90YWw6ICcgKyArK19hcGx1c19hYy53YXRjaF90aW1lc1xuXHQgICAgICAgICAgLy8gfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIF9zZWxmLnRocm90dGxlX2hhbmRsZXJfZG9tX2NoYW5nZSgpOyAvLyDlop7ph4/mm7TmlrDlvoXmm53lhYnnmoTlhYPntKDvvIzlubbliJ3lp4vljJblhYPntKDlnZDmoIdcblx0ICAgICAgICBfc2VsZi5pbml0X3dhdGNoX2RvbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIF9hcGx1c19hYy53YXRjaF9kb21fcnVubmluZyA9IGZhbHNlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgfSwgY29uZmlnLkxPT1BfVElNRSk7XG5cdCAgfSxcblx0XG5cdCAgb25Gb2N1c0hhbmRsZXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgX2FwbHVzX2FjID0gYXBsdXMuX2FwbHVzX2FjIHx8IHt9O1xuXHQgICAgX2FwbHVzX2FjLmN1cnJlbnRfd2luX3N0YXR1cyA9ICdmb2N1cyc7XG5cdCAgICBpZiAoIV9hcGx1c19hYy53YXRjaF9kb21fcnVubmluZykge1xuXHQgICAgICBfc2VsZi5pbml0X3dhdGNoX2RvbSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIG9uQmx1ckhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfYXBsdXNfYWMgPSBhcGx1cy5fYXBsdXNfYWMgfHwge307XG5cdCAgICBfYXBsdXNfYWMuY3VycmVudF93aW5fc3RhdHVzID0gJ2JsdXInO1xuXHQgIH0sXG5cdFxuXHQgIG9uVmlzaWJpbGl0eUNoYW5nZTogZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgaWYgKGRvYy52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJykge1xuXHQgICAgICBfc2VsZi5vbkZvY3VzSGFuZGxlcigpO1xuXHQgICAgfSBlbHNlIGlmIChkb2MudmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykge1xuXHQgICAgICBfc2VsZi5vbkJsdXJIYW5kbGVyKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8g5aKe5Yqg5ZCE56eN55uR5ZCsXG5cdCAgYWRkQWxsTGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgX2FwbHVzX2FjID0gYXBsdXMuX2FwbHVzX2FjIHx8IHt9O1xuXHRcblx0ICAgIF9hcGx1c19hYy53YXRjaF90aW1lcyA9IDA7XG5cdCAgICBfYXBsdXNfYWMud2F0Y2hfZG9tX3J1bm5pbmcgPSB0cnVlO1xuXHQgICAgX3NlbGYuaW5pdF93YXRjaF9kb20oKTtcblx0XG5cdCAgICAvLyDpkojlr7nmiYvmt5jjgIHmiYvnjKvnmoTnibnmrorlpITnkIbpgLvovpFcblx0ICAgIGlmICh3aW4uV2luZFZhbmUgJiYgZG9jLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgdXRpbEV2ZW50Lm9uKGRvYywgJ1dWLkV2ZW50LkFQUC5BY3RpdmUnLCBfc2VsZi5vbkZvY3VzSGFuZGxlciwgZmFsc2UpO1xuXHQgICAgICB1dGlsRXZlbnQub24oZG9jLCAnV1YuRXZlbnQuQVBQLkJhY2tncm91bmQnLCBfc2VsZi5vbkJsdXJIYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8g5rWP6KeI5Zmo5LiN5pSv5oyBTXV0YXRpb25PYnNlcnZlcu+8jOaUueeUqOi9ruivoueahOiAgeWKnuazle+8jOS9huWPquacieWcqOeql+WPo+a/gOa0u+aXtuaJjeaJp+ihjFxuXHQgICAgaWYgKCdoaWRkZW4nIGluIGRvYykge1xuXHQgICAgICAvLyB3ZWJraXTlhoXmoLhcblx0ICAgICAgdXRpbEV2ZW50Lm9uKHdpbiwgJ3Zpc2liaWxpdHljaGFuZ2UnLCBfc2VsZi5vblZpc2liaWxpdHlDaGFuZ2UpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gSUXlhoXmoLhcblx0ICAgICAgdXRpbEV2ZW50Lm9uKHdpbiwgJ2JsdXInLCBfc2VsZi5vbkJsdXJIYW5kbGVyKTtcblx0ICAgICAgdXRpbEV2ZW50Lm9uKHdpbiwgJ2ZvY3VzJywgX3NlbGYub25Gb2N1c0hhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8vIOenu+mZpOWQhOenjeebkeWQrFxuXHQgIHJlbW92ZUFsbExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgLy8g6ZKI5a+55omL5reY44CB5omL54yr55qE54m55q6K5aSE55CG6YC76L6RXG5cdCAgICBpZiAod2luLldpbmRWYW5lICYmIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgIHV0aWxFdmVudC51bihkb2MsICdXVi5FdmVudC5BUFAuQWN0aXZlJywgX3NlbGYub25Gb2N1c0hhbmRsZXIsIGZhbHNlKTtcblx0ICAgICAgdXRpbEV2ZW50LnVuKGRvYywgJ1dWLkV2ZW50LkFQUC5CYWNrZ3JvdW5kJywgX3NlbGYub25CbHVySGFuZGxlciwgZmFsc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIOa1j+iniOWZqOS4jeaUr+aMgU11dGF0aW9uT2JzZXJ2ZXLvvIzmlLnnlKjova7or6LnmoTogIHlip7ms5XvvIzkvYblj6rmnInlnKjnqpflj6Pmv4DmtLvml7bmiY3miafooYxcblx0ICAgIGlmICgnaGlkZGVuJyBpbiBkb2MpIHtcblx0ICAgICAgLy8gd2Via2l05YaF5qC4XG5cdCAgICAgIHV0aWxFdmVudC51bih3aW4sICd2aXNpYmlsaXR5Y2hhbmdlJywgX3NlbGYub25WaXNpYmlsaXR5Q2hhbmdlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIElF5YaF5qC4XG5cdCAgICAgIHV0aWxFdmVudC51bih3aW4sICdibHVyJywgX3NlbGYub25CbHVySGFuZGxlcik7XG5cdCAgICAgIHV0aWxFdmVudC51bih3aW4sICdmb2N1cycsIF9zZWxmLm9uRm9jdXNIYW5kbGVyKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDnm5HlkKxkb23lj5jljJbvvIzmnInlj5jljJbmiafooYzlm57osINcblx0ICAgKiBAcGFyYW0ge2hhbmRsZXJfZG9tX2NoYW5nZX0gY2Jcblx0ICAgKi9cblx0ICBpbml0OiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgX2FwbHVzX2FjID0gYXBsdXMuX2FwbHVzX2FjIHx8IHt9O1xuXHQgICAgLy8gc3RlcDFcblx0ICAgIF9zZWxmLnRocm90dGxlX2hhbmRsZXJfZG9tX2NoYW5nZSgpO1xuXHQgICAgLy8gc3RlcDIg55uR5ZCsZG9t5Y+Y5YyWXG5cdCAgICB2YXIgTU9ic2VydmVyID0gd2luLk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luLk1vek11dGF0aW9uT2JzZXJ2ZXI7XG5cdCAgICBpZiAoTU9ic2VydmVyKSB7XG5cdCAgICAgIF9hcGx1c19hYy5vYnNlcnZlcl90aW1lcyA9IDA7XG5cdCAgICAgIF9zZWxmLmluaXRfb2JzZXJ2ZXIoTU9ic2VydmVyLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3NlbGYudGhyb3R0bGVfaGFuZGxlcl9kb21fY2hhbmdlKCk7XG5cdCAgICAgIH0pOyAvLyDlop7ph4/mm7TmlrDlvoXmm53lhYnnmoTlhYPntKDvvIzlubbliJ3lp4vljJblhYPntKDlnZDmoIdcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIOWinuWKoOWQhOenjeebkeWQrFxuXHQgICAgICBfc2VsZi5hZGRBbGxMaXN0ZW5lcigpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGNsZWFyRG9tOiBmdW5jdGlvbihvYmosIG9wdHMpIHtcblx0ICAgIHZhciBfY2xrQ29uZmlnID0gdGhpcy5hdXRvQ2xrQ29uZmlnIHx8IFtdO1xuXHQgICAgaWYgKG9wdHMgJiYgb3B0cy5mcm9tICE9PSAnYXBwZW5kTWV0YUluZm8nKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2Nsa0NvbmZpZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB2YXIgZWxlbWVudFNlbGVjdG9yID0gX2Nsa0NvbmZpZ1tpXS5lbGVtZW50U2VsZWN0b3I7XG5cdCAgICAgICAgICB2YXIgX2RvY3MgPSBkb2MucXVlcnlTZWxlY3RvckFsbChlbGVtZW50U2VsZWN0b3IpO1xuXHQgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9jcy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICBfZG9jc1tqXS5zZXRBdHRyaWJ1dGUoY29uZmlnLkRBVEFfQVBMVVNfQUNfS0VZLCAnJyk7ICBcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLmF1dG9DbGtDb25maWcgPSBvYmogJiYgb2JqLmF1dG9DbGtDb25maWc7XG5cdCAgfSxcblx0XG5cdCAgY2xlYXI6IGZ1bmN0aW9uIChvcHRzKSB7XG5cdCAgICBpZiAob3B0cyAmJiBvcHRzLmZyb20gPT09ICdhcHBlbmRNZXRhSW5mbycpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIF9hcGx1c19hYyA9IGFwbHVzLl9hcGx1c19hYyB8fCB7fTtcblx0ICAgIGlmIChfYXBsdXNfYWMuX2FjSGFzaE1hcCkge1xuXHQgICAgICBfYXBsdXNfYWMuX2FjSGFzaE1hcCA9IHt9O1xuXHQgICAgfVxuXHQgICAgaWYgKF9hcGx1c19hYy5oYXNoX3ZhbHVlKSB7XG5cdCAgICAgIF9hcGx1c19hYy5oYXNoX3ZhbHVlID0ge307XG5cdCAgICB9XG5cdCAgICBhcGx1cy5fYXBsdXNfYWMgPSBfYXBsdXNfYWM7XG5cdCAgICAvLyDmuIXpmaTova7or6Lnm5HlkKxcblx0ICAgIGlmICh0aGlzLl9sb29wX29ic2VydmVyKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9sb29wX29ic2VydmVyKTtcblx0ICAgICAgdGhpcy5fbG9vcF9vYnNlcnZlciA9IG51bGw7XG5cdCAgICB9XG5cdCAgICAvLyDorqnor6Xop4Llr5/ogIXlr7nosaHlgZzmraLop4Llr5/mjIflrprnm67moIfnmoRET03lj5jljJYu55u05Yiw5YaN5qyh6LCD55So5YW2b2JzZXJ2ZSgp5pa55rOVLOivpeinguWvn+iAheWvueixoeWMheWQq+eahOWbnuiwg+WHveaVsOmDveS4jeS8muWGjeiiq+iwg+eUqC5cblx0ICAgIGlmICh0aGlzLl9vYnNlcnZlcikge1xuXHQgICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVyKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8g5Y+C5pWw5pu05pS577yM5YGa5LiA5Lqb6YeN572u5bel5L2cXG5cdCAgcmVzZXQ6IGZ1bmN0aW9uIChvYmosIG9wdHMpIHtcblx0ICAgIHRoaXMuY2xlYXJEb20ob2JqLCBvcHRzKTtcblx0ICAgIHRoaXMuaW5pdCgpO1xuXHQgIH1cblx0XG5cdH0pO1xuXHRtb2R1bGUuZXhwb3J0cyA9IFdhdGNoRG9tO1xuXG5cbi8qKiovIH0pLFxuLyogNTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvYXBsdXNfYXV0b19leHAuanNcblx0ICogYXBsdXPkuJPpobnph4fpm4Y6IOmhtemdouWFg+e0oOabneWFieiHquWKqOmHh+mbhlxuXHQgKiDkvp3otZZhcGx1c+WSjGFwbHVzX3BsdWdpbl9zcG0uanPmj5Lku7Zcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyA8bWV0YSBuYW1lPVwiYXBsdXMtYXV0by1leHBcIiBjb250ZW50PVwie3tsb2drZXk6XCIvYS5iLmNcIix0YWc6XCJkaXZcIixmaWx0ZXI6XCJzY209MTIzNFwifX1cIj5cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDU4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB0cmFja2VyVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB2YXIgZGVidWcgPSByZXF1aXJlKCdAdXRpbHMvZGVidWcnKTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBXYXRjaERPTTtcblx0dmFyIHdhdGNoRXhwb3N1cmU7XG5cdHZhciB3YXRjaFJlY29yZDtcblx0dmFyIGNvbmZpZztcblx0XG5cdGZ1bmN0aW9uIGluaXRGbiAoKSB7XG5cdCAgV2F0Y2hET00gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblx0ICBpZiAod2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyKSB7XG5cdCAgICB3YXRjaEV4cG9zdXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHdhdGNoRXhwb3N1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0ICB9XG5cdCAgd2F0Y2hSZWNvcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblx0ICBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdCAoY2IpIHtcblx0ICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuXHRcblx0ICB2YXIgYXBsdXNfYXV0b19leHBfaW5pdCA9IGZhbHNlO1xuXHQgIHZhciBkb19pbml0X2ZsYWcgPSBmYWxzZTtcblx0ICB2YXIgX2NvbmZpZzsgLy8gbGFzdENvbmZpZ1xuXHRcblx0ICB2YXIgZG9faW5pdCA9IGZ1bmN0aW9uIChmbGFnKSB7XG5cdCAgICBpZiAoZG9faW5pdF9mbGFnKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRvX2luaXRfZmxhZyA9IGZsYWc7XG5cdCAgICBpZiAoIWFwbHVzX2F1dG9fZXhwX2luaXQpIHtcblx0ICAgICAgdHJhY2tlclV0aWwud3JhcChmdW5jdGlvbigpe1xuXHQgICAgICAgIC8vIOmhuuW6j+S4jeiDveS5se+8jOeOr+eOr+ebuOaJoyFcblx0ICAgICAgICAvLyAw44CB6I635Y+W6YWN572u5bm25Yik5pat6YWN572u5q2j56Gu5oCn77yMZ2V0QXV0b0V4cENvbmZpZ+WGheWBmuS6huW8uuagoemqjO+8jOWHuumUmeWQjuS8muaJk+WNsOmUmeivr+S/oeaBr1xuXHQgICAgICAgIF9jb25maWcgPSBjb25maWcuZ2V0QXV0b0V4cENvbmZpZygpIHx8IFtdO1xuXHQgICAgICAgIC8vIGlmIChkZWJ1Zy5pc0RlYnVnQXBsdXMoKSkge1xuXHQgICAgICAgIHVsb2coKS53KCdhcGx1cy1hdXRvLWV4cCBtZXRhVmFsdWUgaW5pdDogJyArIEpTT04uc3RyaW5naWZ5KF9jb25maWcpKTtcblx0ICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgLy8gICBtc2c6ICdhcGx1cy1hdXRvLWV4cCBtZXRhVmF1ZSBpbml0OiAnICsgSlNPTi5zdHJpbmdpZnkoX2NvbmZpZylcblx0ICAgICAgICAvLyB9KTtcblx0ICAgICAgICAvLyB9XG5cdCAgICAgICAgdmFyIHdhdGNoRE9NO1xuXHRcblx0ICAgICAgICBpZiAoX2NvbmZpZyAmJiBfY29uZmlnLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgIC8vIDHjgIHnm5HlkKzml6Xlv5flj5HpgIFcblx0ICAgICAgICAgIHdhdGNoUmVjb3JkLndhdGNoX2RhdGFfY2hhbmdlKCk7XG5cdCAgICAgICAgICAvLyAy44CB55uR5ZCs5pud5YWJXG5cdCAgICAgICAgICB3YXRjaEV4cG9zdXJlLndhdGNoX2V4cG9zdXJlX2NoYW5nZShfY29uZmlnKTtcblx0ICAgICAgICAgIC8vIDPjgIHnm5HlkKxkb23lj5jljJZcblx0ICAgICAgICAgIHdhdGNoRE9NID0gV2F0Y2hET00uY3JlYXRlKHtcblx0ICAgICAgICAgICAgaXNUaHJvdHRsZVdhdGNoOiBjb25maWcuaXNUaHJvdHRsZVdhdGNoRG9tKCksXG5cdCAgICAgICAgICAgIGF1dG9FeHBDb25maWc6IF9jb25maWdcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgd2F0Y2hET00uaW5pdCh7dHlwZTogJ2luaXQnfSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdzZXRNZXRhSW5mbycsIGZ1bmN0aW9uIChtZXRhS2V5LCBtZXRhVmF1ZSwgb3B0cykge1xuXHQgICAgICAgICAgaWYgKG1ldGFLZXkgPT09ICdhcGx1cy1hdXRvLWV4cCcpIHtcblx0ICAgICAgICAgICAgLy8gaWYgKGRlYnVnLmlzRGVidWdBcGx1cygpKSB7XG5cdCAgICAgICAgICAgIHVsb2coKS53KCdhcGx1cy1hdXRvLWV4cCBtZXRhVmF1ZSBjaGFuZ2U6ICcgKyBKU09OLnN0cmluZ2lmeShtZXRhVmF1ZSkpO1xuXHQgICAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICAgIC8vICAgbXNnOiAnYXBsdXMtYXV0by1leHAgbWV0YVZhdWUgY2hhbmdlOiAnICsgSlNPTi5zdHJpbmdpZnkobWV0YVZhdWUpXG5cdCAgICAgICAgICAgIC8vIH0pO1xuXHQgICAgICAgICAgICAvLyB9XG5cdCAgICAgICAgICAgIFxuXHQgICAgICAgICAgICAvLyAy44CB6I635Y+W6YWN572u5bm25Yik5pat6YWN572u5q2j56Gu5oCn77yMZ2V0QXV0b0V4cENvbmZpZ+WGheWBmuS6huW8uuagoemqjO+8jOWHuumUmeWQjuS8muaJk+WNsOmUmeivr+S/oeaBr1xuXHQgICAgICAgICAgICB2YXIgX2NvbmZpZzIgPSBjb25maWcuZ2V0QXV0b0V4cENvbmZpZyhtZXRhVmF1ZSk7XG5cdCAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShfY29uZmlnMikgPT09IEpTT04uc3RyaW5naWZ5KF9jb25maWcpKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIF9jb25maWcgPSBfY29uZmlnMjtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgLy8gMeOAgWNsZWFyIC0g5YWB6K64572u56m6bWV0YVZhbHVl5Lul5YGc5q2i5pud5YWJ55uR5ZCsXG5cdCAgICAgICAgICAgIHdhdGNoUmVjb3JkLmNsZWFyKCk7XG5cdCAgICAgICAgICAgIGlmICghb3B0cykge1xuXHQgICAgICAgICAgICAgIG9wdHMgPSB7XG5cdCAgICAgICAgICAgICAgICBmcm9tOiAnc2V0TWV0YUluZm8nXG5cdCAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB3YXRjaEV4cG9zdXJlLmNsZWFyKF9jb25maWcsIG9wdHMpO1xuXHQgICAgICAgICAgICB3YXRjaERPTSAmJiB3YXRjaERPTS5jbGVhcihvcHRzKTtcblx0XG5cdCAgICAgICAgICAgIGlmIChtZXRhVmF1ZSAmJiBfY29uZmlnICYmIF9jb25maWcubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgIC8vIDIuMeOAgeebkeWQrOaXpeW/l+WPkemAgVxuXHQgICAgICAgICAgICAgIHdhdGNoUmVjb3JkLndhdGNoX2RhdGFfY2hhbmdlKCk7XG5cdCAgICAgICAgICAgICAgLy8gMi4y44CB55uR5ZCs5pud5YWJXG5cdCAgICAgICAgICAgICAgd2F0Y2hFeHBvc3VyZS53YXRjaF9leHBvc3VyZV9jaGFuZ2UoX2NvbmZpZyk7XG5cdFxuXHQgICAgICAgICAgICAgIHZhciBfd2F0Y2hfZG9tX2NmZyA9IHtcblx0ICAgICAgICAgICAgICAgIGlzVGhyb3R0bGVXYXRjaDogY29uZmlnLmlzVGhyb3R0bGVXYXRjaERvbSgpLFxuXHQgICAgICAgICAgICAgICAgYXV0b0V4cENvbmZpZzogX2NvbmZpZ1xuXHQgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgaWYgKHdhdGNoRE9NKSB7XG5cdCAgICAgICAgICAgICAgICB3YXRjaERPTS5yZXNldChfd2F0Y2hfZG9tX2NmZywgb3B0cyk7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHdhdGNoRE9NID0gV2F0Y2hET00uY3JlYXRlKF93YXRjaF9kb21fY2ZnKTtcblx0ICAgICAgICAgICAgICAgIHdhdGNoRE9NLmluaXQoe3R5cGU6ICdpbml0J30pO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9LCAnZG9faW5pdCcpO1xuXHQgICAgICBhcGx1c19hdXRvX2V4cF9pbml0ID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvLyB1dGlsRXZlbnQuRE9NUmVhZHkoZnVuY3Rpb24oKSB7XG5cdCAgLy8gNXPlkI7ov5jmsqHmnInlrozmiJDliqDovb3vvIzmjqfliLblj7DmiZPlh7rkuIDmnaHorablkYrvvIxUT0RPIOebkeaOp+i/meWdl+WGheWuuVxuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgIGlmICghYXBsdXNfYXV0b19leHBfaW5pdCkge1xuXHQgICAgICB1bG9nKCkudygnYXBsdXNfYXV0b19leHBfaW5pdCBmYWlsZWQhIHBsZWFzZSBjaGVjayB3aGV0aGVyIGFwbHVzSnMgaXMgbG9hZGVkIGNvcnJlY3RseSEnKTtcblx0ICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAvLyAgIG1zZzogJ2FwbHVzX2F1dG9fZXhwX2luaXQgZmFpbGVkISBwbGVhc2UgY2hlY2sgd2hldGhlciBhcGx1c0pzIGlzIGxvYWRlZCBjb3JyZWN0bHkhJ1xuXHQgICAgICAvLyB9KTtcblx0ICAgIH1cblx0ICB9LCA1MDAwKTtcblx0ICAvLyDmnIlhcGx1c19wdWJzdWLkuovku7bnm5HlkKzogIXmqKHlnovnmoTmg4XlhrXkuIvvvIznm5HlkKxhcGx1c1JlYWR55LqL5Lu2XG5cdCAgdmFyIF8kID0gYXBsdXMuXyQgfHwge307XG5cdCAgdmFyIGdfc3BtID0gd2luZG93LmdfU1BNIHx8IHt9O1xuXHQgIGlmIChfJC5zdGF0dXMgPT09ICdjb21wbGV0ZScgJiYgZ19zcG0uc3BtKSB7XG5cdCAgICBkb19pbml0KCk7XG5cdCAgfVxuXHQgIC8vIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ2FwbHVzUmVhZHknLCBmdW5jdGlvbihzdGF0dXMpIHtcblx0ICAvLyAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcblx0ICAvLyAgICAgZG9faW5pdCgnYXBsdXNSZWFkeScpO1xuXHQgIC8vICAgfVxuXHQgIC8vIH0pO1xuXHQgIHZhciBxID0gKHdpbmRvdy5hcGx1c19xdWV1ZSB8fCAod2luZG93LmFwbHVzX3F1ZXVlID0gW10pKTtcblx0ICBxLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0ICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuXHQgICAgICAgIGRvX2luaXQoJ2FwbHVzUmVhZHknKTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0ICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBjYigpO1xuXHQgIH1cblx0ICAvLyB9KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGFwbHVzID0gKHdpbmRvdy5hcGx1cyB8fCB3aW5kb3cuZ29sZGxvZyB8fCAod2luZG93LmFwbHVzID0ge30pKTtcblx0ICBpZiAoYXBsdXMuX2FwbHVzX2F1dG9fZXhwKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfSBlbHNlIHtcblx0ICAgIGFwbHVzLl9hcGx1c19hdXRvX2V4cCA9IHtcblx0ICAgICAgdGFnczoge30sXG5cdCAgICAgIHN0YXR1czogJ2luaXQnLFxuXHQgICAgICBleHBfdGltZXM6IDAsXG5cdCAgICAgIGVsZW1lbnRTZWxlY3RvclNpemVNYXA6IHt9XG5cdCAgICB9OyAgICBcblx0ICAgIGluaXRGbigpO1xuXHQgICAgaW5pdChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGFwbHVzLl9hcGx1c19hdXRvX2V4cC5zdGF0dXMgPSAnY29tcGxldGUnO1xuXHQgICAgfSk7XG5cdCAgfSAgXG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog55uR5ZCsZG9t5Y+Y5YyW77yM5pS26ZuG5b6F5pud5YWJ5YWD57SgXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHRyYWNrZXJVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgdXRpbEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdHZhciB1dGlsRWxlbWVudEFjID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdFxuXHR2YXIgdXRpbF9hY19hZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpO1xuXHR2YXIgY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdFxuXHR2YXIgd2luID0gd2luZG93O1xuXHR2YXIgZG9jID0gZG9jdW1lbnQ7XG5cdFxuXHQvKipcblx0ICog5YaF6YOo5a+56LGhXG5cdCAqIEBvYmplY3QgIHRoaXMuX29ic2VydmVyICAgICAgLy8gTXV0YXRpb25PYnNlcnZlcuebkeWQrOiAhVxuXHQgKiBAb2JqZWN0ICB0aGlzLl9sb29wX29ic2VydmVyIC8vIOS4jeaUr+aMgU11dGF0aW9uT2JzZXJ2ZXLnmoTmtY/op4jlmajvvIzova7or6Lnm5HlkKzogIVcblx0ICogQG9iamVjdCAgdGhpcy5hdXRvRXhwQ29uZmlnICAvLyDphY3nva7lj4LmlbBcblx0ICpcblx0ICogQHBhcmFtIHtoYW5kbGVyX2RvbV9jaGFuZ2V9IGNiXG5cdCAqL1xuXHRcblx0XG5cdHZhciBXYXRjaERvbSA9IEJhc2UuZXh0ZW5kKHtcblx0XG5cdCAgZWFjaEVsZW1lbnRzOiBmdW5jdGlvbiAoZWxlbWVudHMsIGV4cENvbmZpZykge1xuXHQgICAgdmFyIGxvZ2tleSA9IGV4cENvbmZpZy5sb2drZXkgfHwgJyc7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBlbGUgPSBlbGVtZW50c1tpXTtcblx0ICAgICAgdmFyIF9pbmRleCA9IGVsZS5nZXRBdHRyaWJ1dGUoY29uZmlnLkRBVEFfQVBMVVNfQUVfS0VZKTtcblx0ICAgICAgaWYgKF9pbmRleCAmJiBfaW5kZXguaW5kZXhPZignXycpID4gMCkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChpc05hTihwYXJzZUludChfaW5kZXgpKSkge1xuXHQgICAgICAgIF9pbmRleCA9IGFwbHVzLl9hcGx1c19hdXRvX2V4cC5lbGVtZW50U2VsZWN0b3JTaXplTWFwW2V4cENvbmZpZy5lbGVtZW50U2VsZWN0b3JdKys7XG5cdCAgICAgICAgZWxlLnNldEF0dHJpYnV0ZShjb25maWcuREFUQV9BUExVU19BRV9LRVksIF9pbmRleCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgZXhwQ29uZmlnLnNwbUIgJiYgZXhwQ29uZmlnLnNwbUMgJiYgZXhwQ29uZmlnLnNwbUQpIHsgICAgICAgIFxuXHQgICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoY29uZmlnLkRBVEFfQVBMVVNfU1BNX0FOQ0hPUl9JRF9LRVksIFtleHBDb25maWcuc3BtQiwgZXhwQ29uZmlnLnNwbUMsIGV4cENvbmZpZy5zcG1EICsgJ18nICsgKGkrMSldLmpvaW4oJy4nKSk7XG5cdCAgICAgICAgZWxlLnNldEF0dHJpYnV0ZShjb25maWcuREFUQV9BUExVU19WVF9JVEVNX0lOREVYX0tFWSwgJycgKyAoaSsxKSk7XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIHZhciBoYXNoX3ZhbHVlID0gdXRpbF9hY19hZS5nZXRFbGVtZW50SGFzaChleHBDb25maWcsIHtcblx0ICAgICAgICBpZ25vcmVfYXR0cjogZmFsc2UsXG5cdCAgICAgICAgaW5kZXg6IF9pbmRleCxcblx0ICAgICAgICBlbGU6IGVsZVxuXHQgICAgICB9KTtcblx0ICAgICAgLy8g6aqM6K+B5piv5ZCm5bey57uP6K6w5b2V6L+H5LqG77yM5aaC5p6c5rKh5pyJ6K6w5b2V5omN57un57utXG5cdCAgICAgIHZhciBpc1JlY29yZCA9IHV0aWxFbGVtZW50QWMuY2hlY2tJc1JlY29yZChlbGUsIGhhc2hfdmFsdWUsIGNvbmZpZy5EQVRBX0FQTFVTX0FFX0tFWSk7XG5cdCAgICAgIHZhciBpc0luSGFzaE1hcCA9IHV0aWxfYWNfYWUuY2hlY2tJc0luSGFzaE1hcCh7XG5cdCAgICAgICAgbG9na2V5OiBsb2drZXksXG5cdCAgICAgICAgaGFzaF92YWx1ZTogaGFzaF92YWx1ZSxcblx0ICAgICAgICBhcGx1c0tleTogJ19hcGx1c19hdXRvX2V4cCdcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmICghaXNSZWNvcmQgJiYgIWlzSW5IYXNoTWFwKSB7XG5cdCAgICAgICAgdmFyIF9vYmogPSB7XG5cdCAgICAgICAgICBleHBDb25maWc6IGV4cENvbmZpZyxcblx0ICAgICAgICAgIGhhc2hfdmFsdWU6IGhhc2hfdmFsdWUsXG5cdCAgICAgICAgICBlbGVtZW50OiBlbGUsXG5cdCAgICAgICAgICBzdGF0dXM6IDAsICAgLy8g5Yid5aeL54q25oCBXG5cdCAgICAgICAgICBlbGVtZW50U2VsZWN0b3I6IGV4cENvbmZpZy5lbGVtZW50U2VsZWN0b3IsXG5cdCAgICAgICAgfTtcblx0ICAgICAgICAvLyDlsIblvoXmm53lhYnlhYPntKDlrZjlhaVhcGx1cy5fYXBsdXNfYXV0b19leHAuX2FjSGFzaE1hcFxuXHQgICAgICAgIHV0aWxfYWNfYWUudXBkYXRlRXhwSGFzaE1hcChsb2drZXksIF9vYmosICdBREQnKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBpZiAoIWVsZS5nZXRBdHRyaWJ1dGUoY29uZmlnLkRBVEFfQVBMVVNfQUVfS0VZKSkge1xuXHQgICAgICAvLyAgIGNvbnNvbGUuZXJyb3IoJ2lzUmVjb3JkID0gJyArIGlzUmVjb3JkICsgJywgaXNJbkhhc2hNYXAgPSAnICsgaXNJbkhhc2hNYXAgKyAnLCBfaW5kZXggPSAnICsgX2luZGV4KTtcblx0ICAgICAgLy8gICBjb25zb2xlLmxvZyhlbGUpO1xuXHQgICAgICAvLyB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6K+l5pa55rOV6KKrb2JzZXJ2ZXLmiJbova7or6LosIPnlKhcblx0ICAgKiDlop7ph4/mm7TmlrDlvoXmm53lhYnnmoTlhYPntKDvvIzliJ3lp4vljJblhYPntKDlnZDmoIdcblx0ICAgKiDlubblsIblvoXmm53lhYnlhYPntKDlrZjlhaVhcGx1cy5fYXBsdXNfYXV0b19leHAuX3RvZG9fYWNfZWxlbWVudHPvvIjlubPooYznmoR3YXRjaEV4cG9zdXJlLmpz5Lya55uR5ZCs56qX5Y+j5Y+Y5YyW5p2l55uR5o6n6L+Z5Lqb5b6F5pud5YWJ5YWD57Sg5piv5ZCm5pud5YWJ77yJXG5cdCAgICogQHBhcmFtcyBfZWxlIHtFbGVtZW50fVxuXHQgICAqIEBwYXJhbXMgb3B0cyB7T2JqZWN0fSB7XG5cdCAgICogICB0eXBlOiAncG9sbGluZycvJ2NoaWxkTGlzdCcvJ2NoYXJhY3RlckRhdGEnLydzdWJ0cmVlJy8nYXR0cmlidXRlc18oY2xhc3N8c3R5bGUpJ1xuXHQgICAqIH1cblx0ICAgKi9cblx0ICBoYW5kbGVyX2RvbV9jaGFuZ2U6IGZ1bmN0aW9uKF9lbGUsIG9wdHMpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBleHBDb25maWdzID0gdGhpcy5hdXRvRXhwQ29uZmlnIHx8IFtdO1xuXHQgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGV4cENvbmZpZ3MubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICB2YXIgZXhwQ29uZmlnID0gZXhwQ29uZmlnc1tqXTtcblx0ICAgICAgICB2YXIgZWxlbWVudHMgPSB1dGlsX2FjX2FlLmdldEVsZW1lbnRzKGV4cENvbmZpZywgZG9jKTsgLy8g6I635Y+W5omA5pyJeHh45qCH562+5LiL5bim5pyJeXl55bGe5oCn55qE5YWD57SgXG5cdCAgICAgICAgXG5cdCAgICAgICAgaWYgKCFhcGx1cy5fYXBsdXNfYXV0b19leHAuZWxlbWVudFNlbGVjdG9yU2l6ZU1hcFtleHBDb25maWcuZWxlbWVudFNlbGVjdG9yXSkge1xuXHQgICAgICAgICAgYXBsdXMuX2FwbHVzX2F1dG9fZXhwLmVsZW1lbnRTZWxlY3RvclNpemVNYXBbZXhwQ29uZmlnLmVsZW1lbnRTZWxlY3Rvcl0gPSAxO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmVhY2hFbGVtZW50cyhlbGVtZW50cywgZXhwQ29uZmlnKTtcblx0ICAgICAgfVxuXHQgICAgICBhcGx1cy5hcGx1c19wdWJzdWIucHVibGlzaCgnQVBMVVNfQUVfRE9NX0NIQU5HRScsIG9wdHMgfHwge30pO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB1bG9nKCkudyhlICYmIGUubWVzc2FnZSk7XG5cdCAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgLy8gICBtc2c6IGUgJiYgZS5tZXNzYWdlXG5cdCAgICAgIC8vIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHRocm90dGxlX2hhbmRsZXJfZG9tX2NoYW5nZTogdXRpbF9hY19hZS50aHJvdHRsZShmdW5jdGlvbiAoX2VsZSwgb3B0cykge1xuXHQgICAgdGhpcy5oYW5kbGVyX2RvbV9jaGFuZ2UoX2VsZSwgb3B0cyk7XG5cdCAgfSwgMjAwKSxcblx0XG5cdCAgLyoqXG5cdCAgICog6ZKI5a+55LiN5pSv5oyBb2JzZXJ2ZXLnmoTmtY/op4jlmajnlKjova7or6LnmoTmlrnlvI/nm5HlkKxkb23lj5jljJZcblx0ICAgKiBAcGFyYW0ge2hhbmRsZXJfZG9tX2NoYW5nZX0gY2Jcblx0ICAgKi9cblx0ICBpbml0X3dhdGNoX2RvbTogZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IGFwbHVzLl9hcGx1c19hdXRvX2V4cCB8fCB7fTtcblx0ICAgIF9zZWxmLl9sb29wX29ic2VydmVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICBpZiAoX2FwbHVzX2F1dG9fZXhwLmN1cnJlbnRfd2luX3N0YXR1cyAhPT0gJ2JsdXInKSB7XG5cdCAgICAgICAgdWxvZygpLncoJ3dhdGNoX2RvbSBpbiBhZSBMT09QX1RJTUUgaXMgJyArIGNvbmZpZy5MT09QX1RJTUUgKyAnbXMgdG90YWw6ICcgKyArK19hcGx1c19hdXRvX2V4cC53YXRjaF90aW1lcyk7XG5cdCAgICAgICAgLy8gaWYgKGFwbHVzLmFwbHVzRGVidWcpIHtcblx0ICAgICAgICAvLyAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAvLyAgICAgbXNnOiAnd2F0Y2hfZG9tIGluIGFlIExPT1BfVElNRSBpcyAnICsgY29uZmlnLkxPT1BfVElNRSArICdtcyB0b3RhbDogJyArICsrX2FwbHVzX2F1dG9fZXhwLndhdGNoX3RpbWVzXG5cdCAgICAgICAgLy8gICB9KTtcblx0ICAgICAgICAvLyB9XG5cdCAgICAgICAgX3NlbGYuaGFuZGxlcl9kb21fY2hhbmdlKG51bGwsIHtcblx0ICAgICAgICAgIHR5cGU6ICdwb2xsaW5nJ1xuXHQgICAgICAgIH0pOyAvLyDlop7ph4/mm7TmlrDlvoXmm53lhYnnmoTlhYPntKDvvIzlubbliJ3lp4vljJblhYPntKDlnZDmoIdcblx0ICAgICAgICBfc2VsZi5pbml0X3dhdGNoX2RvbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIF9hcGx1c19hdXRvX2V4cC53YXRjaF9kb21fcnVubmluZyA9IGZhbHNlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgfSwgY29uZmlnLkxPT1BfVElNRSk7XG5cdCAgfSxcblx0XG5cdCAgb25Gb2N1c0hhbmRsZXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgX2FlID0gYXBsdXMuX2FwbHVzX2F1dG9fZXhwIHx8IHt9O1xuXHQgICAgX2FlLmN1cnJlbnRfd2luX3N0YXR1cyA9ICdmb2N1cyc7XG5cdCAgICBpZiAoIV9hZS53YXRjaF9kb21fcnVubmluZykge1xuXHQgICAgICBfc2VsZi5pbml0X3dhdGNoX2RvbSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIG9uQmx1ckhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfYWUgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG5cdCAgICBfYWUuY3VycmVudF93aW5fc3RhdHVzID0gJ2JsdXInO1xuXHQgIH0sXG5cdFxuXHQgIG9uVmlzaWJpbGl0eUNoYW5nZTogZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgaWYgKGRvYy52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJykge1xuXHQgICAgICBfc2VsZi5vbkZvY3VzSGFuZGxlcigpO1xuXHQgICAgfSBlbHNlIGlmIChkb2MudmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykge1xuXHQgICAgICBfc2VsZi5vbkJsdXJIYW5kbGVyKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8g5aKe5Yqg5ZCE56eN55uR5ZCsXG5cdCAgYWRkQWxsTGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgX2FlID0gYXBsdXMuX2FwbHVzX2F1dG9fZXhwIHx8IHt9O1xuXHQgICAgX2FlLndhdGNoX3RpbWVzID0gMDtcblx0ICAgIF9hZS53YXRjaF9kb21fcnVubmluZyA9IHRydWU7XG5cdCAgICBfc2VsZi5pbml0X3dhdGNoX2RvbSgpO1xuXHRcblx0ICAgIC8vIOmSiOWvueaJi+a3mOOAgeaJi+eMq+eahOeJueauiuWkhOeQhumAu+i+kVxuXHQgICAgaWYgKHdpbi5XaW5kVmFuZSAmJiBkb2MuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHQgICAgICB1dGlsRXZlbnQub24oZG9jLCAnV1YuRXZlbnQuQVBQLkFjdGl2ZScsIF9zZWxmLm9uRm9jdXNIYW5kbGVyLCBmYWxzZSk7XG5cdCAgICAgIHV0aWxFdmVudC5vbihkb2MsICdXVi5FdmVudC5BUFAuQmFja2dyb3VuZCcsIF9zZWxmLm9uQmx1ckhhbmRsZXIsIGZhbHNlKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyDmtY/op4jlmajkuI3mlK/mjIFNdXRhdGlvbk9ic2VydmVy77yM5pS555So6L2u6K+i55qE6ICB5Yqe5rOV77yM5L2G5Y+q5pyJ5Zyo56qX5Y+j5r+A5rS75pe25omN5omn6KGMXG5cdCAgICBpZiAoJ2hpZGRlbicgaW4gZG9jKSB7XG5cdCAgICAgIC8vIHdlYmtpdOWGheaguFxuXHQgICAgICB1dGlsRXZlbnQub24od2luLCAndmlzaWJpbGl0eWNoYW5nZScsIF9zZWxmLm9uVmlzaWJpbGl0eUNoYW5nZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBJReWGheaguFxuXHQgICAgICB1dGlsRXZlbnQub24od2luLCAnYmx1cicsIF9zZWxmLm9uQmx1ckhhbmRsZXIpO1xuXHQgICAgICB1dGlsRXZlbnQub24od2luLCAnZm9jdXMnLCBfc2VsZi5vbkZvY3VzSGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8g56e76Zmk5ZCE56eN55uR5ZCsXG5cdCAgcmVtb3ZlQWxsTGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAvLyDpkojlr7nmiYvmt5jjgIHmiYvnjKvnmoTnibnmrorlpITnkIbpgLvovpFcblx0ICAgIGlmICh3aW4uV2luZFZhbmUgJiYgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgdXRpbEV2ZW50LnVuKGRvYywgJ1dWLkV2ZW50LkFQUC5BY3RpdmUnLCBfc2VsZi5vbkZvY3VzSGFuZGxlciwgZmFsc2UpO1xuXHQgICAgICB1dGlsRXZlbnQudW4oZG9jLCAnV1YuRXZlbnQuQVBQLkJhY2tncm91bmQnLCBfc2VsZi5vbkJsdXJIYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8g5rWP6KeI5Zmo5LiN5pSv5oyBTXV0YXRpb25PYnNlcnZlcu+8jOaUueeUqOi9ruivoueahOiAgeWKnuazle+8jOS9huWPquacieWcqOeql+WPo+a/gOa0u+aXtuaJjeaJp+ihjFxuXHQgICAgaWYgKCdoaWRkZW4nIGluIGRvYykge1xuXHQgICAgICAvLyB3ZWJraXTlhoXmoLhcblx0ICAgICAgdXRpbEV2ZW50LnVuKHdpbiwgJ3Zpc2liaWxpdHljaGFuZ2UnLCBfc2VsZi5vblZpc2liaWxpdHlDaGFuZ2UpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gSUXlhoXmoLhcblx0ICAgICAgdXRpbEV2ZW50LnVuKHdpbiwgJ2JsdXInLCBfc2VsZi5vbkJsdXJIYW5kbGVyKTtcblx0ICAgICAgdXRpbEV2ZW50LnVuKHdpbiwgJ2ZvY3VzJywgX3NlbGYub25Gb2N1c0hhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWIneWni+WMlm9ic2VydmVy55uR5ZCs77yM55uR5ZCsZG9t5Y+Y5YyWXG5cdCAgICogQHBhcmFtIHtNT2JzZXJ2ZXJ9IE1PYnNlcnZlclxuXHQgICAqIEBwYXJhbSB7aGFuZGxlcl9kb21fY2hhbmdlfSBjYlxuXHQgICAqL1xuXHQgIGluaXRfb2JzZXJ2ZXI6IGZ1bmN0aW9uKE1PYnNlcnZlciwgY2FsbGJhY2spIHtcblx0ICAgIC8vIHZhciBpZ25vcmVzID0gWydJRlJBTUUnLCAnQk9EWScsICdPQkpFQ1QnLCAnU0NSSVBUJywgJ05PU0NSSVBUJywgJ0xJTksnLCAnU1RZTEUnXTtcblx0ICAgIHZhciBpZ25vcmVzID0gWydJRlJBTUUnLCAnQk9EWScsICdPQkpFQ1QnLCAnU0NSSVBUJywgJ05PU0NSSVBUJywgJ0xJTksnLCAnU1RZTEUnLCAnI2NvbW1lbnQnXTtcblx0ICAgIHZhciBhdHRycyA9IFsnY2xhc3MnLCAnc3R5bGUnXTtcblx0XG5cdCAgICB2YXIgZ2V0QXR0cnNDaGFyc05vZGVzID0gZnVuY3Rpb24gKG11dGF0aW9uKSB7XG5cdCAgICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hhcmFjdGVyRGF0YScpIHtcblx0ICAgICAgICByZXR1cm4gW211dGF0aW9uLnRhcmdldF07XG5cdCAgICAgIH0gZWxzZSBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIGF0dHJzLmluZGV4T2YobXV0YXRpb24uYXR0cmlidXRlTmFtZSkgPiAtMSkge1xuXHQgICAgICAgIHJldHVybiBbbXV0YXRpb24udGFyZ2V0XTtcblx0ICAgICAgfSBlbHNlIGlmIChtdXRhdGlvbi50eXBlICE9PSAnY2hpbGRMaXN0Jykge1xuXHQgICAgICAgIC8vIGxvZ2dlcignaWdub3JlIGF1dG8tZXhwIG11dGF0aW9uLnR5cGUgPSAnICsgbXV0YXRpb24udHlwZSArICcsIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPSAnICsgbXV0YXRpb24uYXR0cmlidXRlTmFtZSk7XG5cdCAgICAgICAgcmV0dXJuIFtdO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBlYWNoX25vZGVzID0gZnVuY3Rpb24gKG5vZGVzLCBtdXRhdGlvbikge1xuXHQgICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbm9kZXMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgIHZhciBlbGUgPSBub2Rlc1tqXSB8fCB7fTtcblx0ICAgICAgICAgIHZhciBfbm9kZU5hbWUgPSBlbGUubm9kZU5hbWU7XG5cdCAgICAgICAgICB2YXIgdGFncyA9IGFwbHVzLl9hcGx1c19hdXRvX2V4cC50YWdzIHx8IHt9O1xuXHQgICAgICAgICAgaWYoIXRhZ3NbX25vZGVOYW1lXSl7XG5cdCAgICAgICAgICAgIHRhZ3NbX25vZGVOYW1lXSA9IDA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICB0YWdzW19ub2RlTmFtZV0rKztcblx0ICAgICAgICAgIGFwbHVzLl9hcGx1c19hdXRvX2V4cC50YWdzID0gdGFncztcblx0ICAgICAgICAgIGlmIChpZ25vcmVzLmluZGV4T2YoX25vZGVOYW1lKSA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgdHJhY2tlclV0aWwud3JhcChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG5cdCAgICAgICAgICAgICAgKytfYXBsdXNfYXV0b19leHAub2JzZXJ2ZXJfdGltZXM7XG5cdCAgICAgICAgICAgICAgdmFyIGF0dHJOYW1lID0gbXV0YXRpb24uYXR0cmlidXRlTmFtZTtcblx0ICAgICAgICAgICAgICBjYWxsYmFjayhlbGUsIHtcblx0ICAgICAgICAgICAgICAgIHR5cGU6IG11dGF0aW9uLnR5cGUgKyAoYXR0ck5hbWUgPyAnXycgKyBhdHRyTmFtZSA6ICcnKVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9LCAnaW5pdF9vYnNlcnZlcl9pbml0X2VsZW1lbnRzJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIOWIm+W7uuinguWvn+iAheWvueixoe+8jOazqOaEj+S4jeiDveWkmuasoW5ldyBNT2JzZXJ2ZXLvvIzkvJrmnInmgKfog73pl67popggQOiwi+WjqyAyMDE4LTA0LTEwXG5cdCAgICBpZiAoIXRoaXMuX29ic2VydmVyKSB7XG5cdCAgICAgIHRoaXMuX29ic2VydmVyID0gbmV3IE1PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XG5cdCAgICAgICAgLy8g5aKe6YeP5pu05pawIGluIDIwMTctMTEtMTdcblx0ICAgICAgICBpZiAobXV0YXRpb25zICYmIG11dGF0aW9ucy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBtdXRhdGlvbnNbaV0gfHwge307XG5cdCAgICAgICAgICAgIC8vIOWinumHj+abtOaWsCDnm5HlkKzlsZ7mgKflj5jljJbku6XlhbzlrrlkaXNwbGF5Om5vbmUvYmxvY2vnrYnlhYPntKDlj5jljJYgaW4gMjAxNy0xMS0yN1xuXHQgICAgICAgICAgICB2YXIgbm9kZXMgPSB1dGlsX2FjX2FlLm5vZGVsaXN0VG9BcnJheShtdXRhdGlvbi5hZGRlZE5vZGVzIHx8IFtdKTtcblx0ICAgICAgICAgICAgbm9kZXMgPSB1dGlsX2FjX2FlLm5vZGVsaXN0VG9BcnJheShnZXRBdHRyc0NoYXJzTm9kZXMobXV0YXRpb24pLCBub2Rlcyk7XG5cdCAgICAgICAgICAgIGVhY2hfbm9kZXMobm9kZXMsIG11dGF0aW9uKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0pOyAgXG5cdCAgICB9XG5cdCAgICBcblx0ICAgIC8vIOmFjee9ruinguWvn+mAiemhuTpcblx0ICAgIHZhciBfY2ZnID0ge1xuXHQgICAgICBhdHRyaWJ1dGVzOiB0cnVlLCAgICAvLyDlsZ7mgKfnmoTlj5jliqhcblx0ICAgICAgY2hpbGRMaXN0OiB0cnVlLCAgICAgLy8g5a2Q6IqC54K555qE5Y+Y5YqoXG5cdCAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsIC8vIOiKgueCueWGheWuueaIluiKgueCueaWh+acrOeahOWPmOWKqFxuXHQgICAgICBzdWJ0cmVlOiB0cnVlLCAgICAgICAvLyDmiYDmnInlkI7ku6PoioLngrnnmoTlj5jliqhcblx0ICAgIH07XG5cdFxuXHQgICAgLy8g5Lyg5YWl55uu5qCH6IqC54K55ZKM6KeC5a+f6YCJ6aG5XG5cdCAgICB0aGlzLl9vYnNlcnZlci5vYnNlcnZlKGRvYy5ib2R5LCBfY2ZnKTtcblx0ICAgIGlmICh1dGlsX2FjX2FlLklTX0RFQlVHKSB7XG5cdCAgICAgIHVsb2coKS53KCdhcGx1c19hdXRvX2V4cCBpbml0IE11dGF0aW9uT2JzZXJ2ZXIgc3VjY2VzcyEnKTtcblx0ICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAvLyAgIG1zZzogJ2FwbHVzX2F1dG9fZXhwIGluaXQgTXV0YXRpb25PYnNlcnZlciBzdWNjZXNzISdcblx0ICAgICAgLy8gfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaW5pdDogZnVuY3Rpb24ob3B0cykge1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIHZhciBfYWUgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG5cdCAgICBpZiAob3B0cyAmJiBvcHRzLnR5cGUgIT09ICdyZXNldCcgJiYgIV9hZS5oYXNoX3ZhbHVlKSB7XG5cdCAgICAgIF9hZS5oYXNoX3ZhbHVlID0ge307XG5cdCAgICB9XG5cdFxuXHQgICAgX3NlbGYuaGFuZGxlcl9kb21fY2hhbmdlKG51bGwsIHtcblx0ICAgICAgdHlwZTogJ2FwbHVzX2luaXQnXG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyBzdGVwMiDnm5HlkKxkb23lj5jljJZcblx0ICAgIHZhciBNT2JzZXJ2ZXIgPSB3aW4uTXV0YXRpb25PYnNlcnZlciB8fCB3aW4uV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fCB3aW4uTW96TXV0YXRpb25PYnNlcnZlcjtcblx0ICAgIGlmIChNT2JzZXJ2ZXIpIHtcblx0ICAgICAgX2FlLm9ic2VydmVyX3RpbWVzID0gMDtcblx0ICAgICAgLy8g5aKe6YeP5pu05paw5b6F5pud5YWJ55qE5YWD57Sg77yM5bm25Yid5aeL5YyW5YWD57Sg5Z2Q5qCHXG5cdCAgICAgIF9zZWxmLmluaXRfb2JzZXJ2ZXIoTU9ic2VydmVyLCBmdW5jdGlvbiAoZWxlLCBvcHRzKSB7XG5cdCAgICAgICAgdmFyIF9lbGUgPSBlbGUgJiYgZWxlLnBhcmVudEVsZW1lbnQgPyBlbGUucGFyZW50RWxlbWVudCA6IGVsZTtcblx0ICAgICAgICAvLyBjb25zb2xlLmxvZygnX3NlbGYuaXNUaHJvdHRsZVdhdGNoID0gJyArIF9zZWxmLmlzVGhyb3R0bGVXYXRjaCk7XG5cdCAgICAgICAgLy8gaWYgKF9zZWxmLmlzVGhyb3R0bGVXYXRjaCkge1xuXHQgICAgICAgIF9zZWxmLnRocm90dGxlX2hhbmRsZXJfZG9tX2NoYW5nZShfZWxlLCBvcHRzKTtcblx0ICAgICAgICAvLyB9IGVsc2Uge1xuXHQgICAgICAgIC8vICAgX3NlbGYuaGFuZGxlcl9kb21fY2hhbmdlKF9lbGUsIG9wdHMpO1xuXHQgICAgICAgIC8vIH1cblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyDlop7liqDlkITnp43nm5HlkKxcblx0ICAgICAgX3NlbGYuYWRkQWxsTGlzdGVuZXIoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBjbGVhcjogZnVuY3Rpb24ob3B0cykge1xuXHQgICAgaWYgKG9wdHMgJiYgb3B0cy5mcm9tID09PSAnYXBwZW5kTWV0YUluZm8nKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG5cdCAgICBpZiAoX2FwbHVzX2F1dG9fZXhwLl9hY0hhc2hNYXApIHtcblx0ICAgICAgX2FwbHVzX2F1dG9fZXhwLl9hY0hhc2hNYXAgPSB7fTtcblx0ICAgIH1cblx0ICAgIGlmIChfYXBsdXNfYXV0b19leHAuaGFzaF92YWx1ZSkge1xuXHQgICAgICBfYXBsdXNfYXV0b19leHAuaGFzaF92YWx1ZSA9IHt9O1xuXHQgICAgfVxuXHQgICAgYXBsdXMuX2FwbHVzX2F1dG9fZXhwID0gX2FwbHVzX2F1dG9fZXhwO1xuXHQgICAgLy8g5riF6Zmk6L2u6K+i55uR5ZCsXG5cdCAgICBpZiAodGhpcy5fbG9vcF9vYnNlcnZlcikge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGhpcy5fbG9vcF9vYnNlcnZlcik7XG5cdCAgICAgIHRoaXMuX2xvb3Bfb2JzZXJ2ZXIgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgLy8g6K6p6K+l6KeC5a+f6ICF5a+56LGh5YGc5q2i6KeC5a+f5oyH5a6a55uu5qCH55qERE9N5Y+Y5YyWLuebtOWIsOWGjeasoeiwg+eUqOWFtm9ic2VydmUoKeaWueazlSzor6Xop4Llr5/ogIXlr7nosaHljIXlkKvnmoTlm57osIPlh73mlbDpg73kuI3kvJrlho3ooqvosIPnlKguXG5cdCAgICBpZiAodGhpcy5fb2JzZXJ2ZXIpIHtcblx0ICAgICAgdGhpcy5fb2JzZXJ2ZXIudGFrZVJlY29yZHMoKTsgLy8g5riF56m66KeC5a+f6ICF5a+56LGh55qE6K6w5b2V6Zif5YiXLOW5tui/lOWbnumHjOmdoueahOWGheWuuS5cblx0ICAgICAgdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOyAvLyDlgZzmraLop4Llr5/mjIflrprnm67moIfnmoRET03lj5jljJYu55u05Yiw5YaN5qyh6LCD55So5YW2b2JzZXJ2ZSgp5pa55rOVXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyDnp7vpmaTlkITnp43nm5HlkKxcblx0ICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcigpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWwneivleWcqOmdnuWinumHj+abtOaWsOiHquWKqOabneWFieWfi+eCuemFjee9ruWcuuaZr+S4i+a4heeQhmRvbeiKgueCueS4iueahOiHquWKqOabneWFieagh+W/l1xuXHQgICAqIEBwYXJhbXMgb2JqIHtPYmplY3R9IHtcblx0ICAgKiAgIGF1dG9FeHBDb25maWc6IFt7XG5cdCAgICogICAgIGNzc1NlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG5cdCAgICogICAgIGVsZW1lbnRTZWxlY3RvcjogXCJESVZbbG9na2V5PVwiL2RhY3UuMS4xLjFcIl1cIlxuXHQgICAqICAgICBsb2drZXk6IFwiL2RhY3UuMS4xLjFcIlxuXHQgICAqICAgICBwcm9wczogW1wiX2xrYVwiXVxuXHQgICAqICAgfV0sXG5cdCAgICogICBpc1Rocm90dGxlV2F0Y2g6IGZhbHNlXG5cdCAgICogfVxuXHQgICAqIEBwYXJhbXMgb3B0cyB7T2JqZWN0fSB7XG5cdCAgICogICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG5cdCAgICogfVxuXHQgICAqL1xuXHQgIGNsZWFyRG9tOiBmdW5jdGlvbihvYmosIG9wdHMpIHtcblx0ICAgIHZhciBfZXhwQ29uZmlnID0gdGhpcy5hdXRvRXhwQ29uZmlnIHx8IFtdO1xuXHQgICAgaWYgKG9wdHMgJiYgb3B0cy5mcm9tICE9PSAnYXBwZW5kTWV0YUluZm8nKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2V4cENvbmZpZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB2YXIgZWxlbWVudFNlbGVjdG9yID0gX2V4cENvbmZpZ1tpXS5lbGVtZW50U2VsZWN0b3I7XG5cdCAgICAgICAgICB2YXIgX2RvY3MgPSBkb2MucXVlcnlTZWxlY3RvckFsbChlbGVtZW50U2VsZWN0b3IpO1xuXHQgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9jcy5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICBfZG9jc1tqXS5zZXRBdHRyaWJ1dGUoY29uZmlnLkRBVEFfQVBMVVNfQUVfS0VZLCAnJyk7ICBcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLmF1dG9FeHBDb25maWcgPSBvYmogJiYgb2JqLmF1dG9FeHBDb25maWcgPyBvYmouYXV0b0V4cENvbmZpZyA6IFtdO1xuXHQgICAgLy8gdGhpcy5pc1Rocm90dGxlV2F0Y2ggPSBvYmogPyBvYmouaXNUaHJvdHRsZVdhdGNoIDogZmFsc2U7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6YeN572uZG9t6IqC54K55LiK55qE6Ieq5Yqo5pud5YWJ5qCH5b+XICYmIOmHjeaWsOWIneWni+WMlndhdGNoRE9NXG5cdCAgICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuXHQgICAqICAgYXV0b0V4cENvbmZpZzogW3tcblx0ICAgKiAgICAgY3NzU2VsZWN0b3I6IFwiRElWW2xvZ2tleT1cIi9kYWN1LjEuMS4xXCJdXCJcblx0ICAgKiAgICAgZWxlbWVudFNlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG5cdCAgICogICAgIGxvZ2tleTogXCIvZGFjdS4xLjEuMVwiXG5cdCAgICogICAgIHByb3BzOiBbXCJfbGthXCJdXG5cdCAgICogICB9XSxcblx0ICAgKiAgIGlzVGhyb3R0bGVXYXRjaDogZmFsc2Vcblx0ICAgKiB9XG5cdCAgICogQHBhcmFtcyBvcHRzIHtPYmplY3R9IHtcblx0ICAgKiAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcblx0ICAgKiB9XG5cdCAgICovXG5cdCAgcmVzZXQ6IGZ1bmN0aW9uIChvYmosIG9wdHMpIHtcblx0ICAgIHRoaXMuY2xlYXJEb20ob2JqLCBvcHRzKTtcblx0ICAgIHRoaXMuaW5pdCh7dHlwZTogJ3Jlc2V0J30pO1xuXHQgIH1cblx0fSk7XG5cdG1vZHVsZS5leHBvcnRzID0gV2F0Y2hEb207XG5cblxuLyoqKi8gfSksXG4vKiA2MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyB2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vLi4vbGliX2NvbW1vbi9jb25maWcnKTtcblx0XG5cdHZhciBkb2MgPSBkb2N1bWVudDtcblx0XG5cdC8qKlxuXHQgKiDliKTmlq3mn5DkuIDkuKrlnZDmoIfmmK/lkKblnKjlj6/op4bnqpflhoXvvIzlj6rpnIDopoHliKTmlq3lj6/op4bnqpfnmoTlt6bkuIrop5LkuI7lj7PkuIvop5LljbPlj69cblx0ICogQHBhcmFtcyB7T2JqZWN0fSB3aW5Qb3NpdGlvbnNcblx0ICogQHBhcmFtcyB7T2JqZWN0fSB2IDogeyB4OiAxLCB5MSB9XG5cdCAqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHR2YXIgcG9zaXRpb25Jc0luV2luID0gZnVuY3Rpb24od2luUG9zaXRpb25zLCB2KSB7XG5cdCAgaWYgKHYueCA+PSB3aW5Qb3NpdGlvbnMucExlZnRUb3BbMF1cblx0ICAgJiYgdi54IDw9IHdpblBvc2l0aW9ucy5wUmlnaHRCb3R0b21bMF1cblx0ICAgJiYgdi55ID49IHdpblBvc2l0aW9ucy5wTGVmdFRvcFsxXVxuXHQgICAmJiB2LnkgPD0gd2luUG9zaXRpb25zLnBSaWdodEJvdHRvbVsxXSkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog5qC55o2u5Y+v6KeG56qX5Zub5Liq6aG254K555qE5Z2Q5qCH6ZuG5ZKM5b2T5YmN5YWD57Sg5YGa6K6h566X77yM5Yik5pat5b2T5YmN5YWD57Sg5Zyo5Y+v6KeG56qX5YaF55qE6Z2i56ev5LiO5YWD57Sg5pys6Lqr55qE6Z2i56ev5q+U5L6L77yM5Y2z5Y+v6KeG546HXG5cdCAqIEBwYXJhbXMge09iamVjdH0gd2luUG9zaXRpb25zXG5cdCAqIEBwYXJhbXMge0VsZW1lbnR9IHZcblx0ICpcblx0ICogQHJldHVybiB7RmxvYXR9IHJhdGUgMC4zXFwwLjFcXDAuOVxcMSAuLi4uLi5cblx0ICovXG5cdHZhciBnZXRWaWV3YWJpbGl0eVJhdGUgPSBmdW5jdGlvbih3aW5Qb3NpdGlvbnMsIHYpIHtcblx0ICB2YXIgcmF0ZSA9IDA7XG5cdCAgLy8gMeOAgeW3puS4iuinkuaYr+WQpuWcqOWPr+inhueql+WGhVxuXHQgIHZhciBlbGVMZWZ0VG9wSXNJbldpbiA9IHBvc2l0aW9uSXNJbldpbih3aW5Qb3NpdGlvbnMsIHYpO1xuXHRcblx0ICAvLyAy44CB5Y+z5LiK6KeS5piv5ZCm5Zyo5Y+v6KeG56qX5YaFXG5cdCAgdmFyIGVsZVJpZ2h0VG9wSXNJbldpbiA9IHBvc2l0aW9uSXNJbldpbih3aW5Qb3NpdGlvbnMsIHtcblx0ICAgICd4Jzogdi54ICsgdi53aWR0aCxcblx0ICAgICd5Jzogdi55XG5cdCAgfSk7XG5cdFxuXHQgIC8vIDPjgIHlt6bkuIvop5LmmK/lkKblnKjlj6/op4bnqpflhoVcblx0ICB2YXIgZWxlTGVmdEJvdHRvbUlzSW5XaW4gPSBwb3NpdGlvbklzSW5XaW4od2luUG9zaXRpb25zLCB7XG5cdCAgICAneCc6IHYueCxcblx0ICAgICd5Jzogdi55ICsgdi5oZWlnaHRcblx0ICB9KTtcblx0XG5cdCAgLy8gNOOAgeWPs+S4i+inkuaYr+WQpuWcqOWPr+inhueql+WGhVxuXHQgIHZhciBlbGVSaWdodEJvdHRvbUlzSW5XaW4gPSBwb3NpdGlvbklzSW5XaW4od2luUG9zaXRpb25zLCB7XG5cdCAgICAneCc6IHYueCArIHYud2lkdGgsXG5cdCAgICAneSc6IHYueSArIHYuaGVpZ2h0XG5cdCAgfSk7XG5cdFxuXHQgIC8vID09PT09PSAx44CB5pW05Liq5Ye6546wID09PT09PVxuXHQgIHZhciBmdWxsID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgcnMgPSAwO1xuXHQgICAgaWYgKGVsZUxlZnRUb3BJc0luV2luICYmIGVsZVJpZ2h0Qm90dG9tSXNJbldpbikge1xuXHQgICAgICAvLyBUT0RPIOebtOaOpeeul+abneWFiVxuXHQgICAgICBycyA9IHYuc2l6ZSAvIHYuc2l6ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBycztcblx0ICB9O1xuXHRcblx0ICAvLyA9PT09PT0gMuOAgeS4gOi+ueWHuueOsCA9PT09PT1cblx0ICB2YXIgaGFsZiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHdpZHRoID0gMCwgaGVpZ2h0ID0gMDtcblx0ICAgIGlmIChlbGVMZWZ0VG9wSXNJbldpbiAmJiBlbGVSaWdodFRvcElzSW5XaW4gJiYgIWVsZUxlZnRCb3R0b21Jc0luV2luICYmICFlbGVSaWdodEJvdHRvbUlzSW5XaW4pIHtcblx0ICAgICAgLy8gMi4x44CB5LiK5Y2K6YOo5YiG5Ye6546w5Zyo5Y+v6KeG56qX5YaFXG5cdCAgICAgIHdpZHRoID0gdi53aWR0aDtcblx0ICAgICAgaGVpZ2h0ID0gd2luUG9zaXRpb25zLnBMZWZ0Qm90dG9tWzFdIC0gdi55O1xuXHQgICAgfSBlbHNlIGlmICghZWxlTGVmdFRvcElzSW5XaW4gJiYgZWxlUmlnaHRUb3BJc0luV2luICYmICFlbGVMZWZ0Qm90dG9tSXNJbldpbiAmJiBlbGVSaWdodEJvdHRvbUlzSW5XaW4pIHtcblx0ICAgICAgLy8gMi4y44CB5Y+z5Y2K6YOo5YiG5Ye6546w5Zyo5Y+v6KeG56qX5YaFXG5cdCAgICAgIHdpZHRoID0gd2luUG9zaXRpb25zLnBMZWZ0VG9wWzBdIC0gdi54O1xuXHQgICAgICBoZWlnaHQgPSB2Lnk7XG5cdCAgICB9IGVsc2UgaWYgKCFlbGVMZWZ0VG9wSXNJbldpbiAmJiAhZWxlUmlnaHRUb3BJc0luV2luICYmIGVsZUxlZnRCb3R0b21Jc0luV2luICYmIGVsZVJpZ2h0Qm90dG9tSXNJbldpbikge1xuXHQgICAgICAvLyAyLjPjgIHkuIvljYrpg6jliIblh7rnjrDlnKjlj6/op4bnqpflhoVcblx0ICAgICAgd2lkdGggPSB2LndpZHRoO1xuXHQgICAgICAvLyBoZWlnaHQgPSB3aW5Qb3NpdGlvbnMucExlZnRUb3BbMV0gLSB2Lnk7XG5cdCAgICAgIGhlaWdodCA9IHYuaGVpZ2h0IC0gTWF0aC5hYnMod2luUG9zaXRpb25zLnBMZWZ0VG9wWzFdIC0gdi55KTtcblx0ICAgIH0gZWxzZSBpZiAoZWxlTGVmdFRvcElzSW5XaW4gJiYgIWVsZVJpZ2h0VG9wSXNJbldpbiAmJiBlbGVMZWZ0Qm90dG9tSXNJbldpbiAmJiAhZWxlUmlnaHRCb3R0b21Jc0luV2luKSB7XG5cdCAgICAgIC8vIDIuNOOAgeW3puWNiumDqOWIhuWHuueOsOWcqOWPr+inhueql+WGhVxuXHQgICAgICB3aWR0aCA9IHdpblBvc2l0aW9ucy5wUmlnaHRUb3BbMF0gLSB2Lng7XG5cdCAgICAgIC8vIGhlaWdodCA9IHYueTtcblx0ICAgICAgaGVpZ2h0ID0gdi5oZWlnaHQ7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdi5zaXplID4gMCA/IE1hdGguYWJzKHdpZHRoICogaGVpZ2h0KSAvIHYuc2l6ZSA6IDA7XG5cdCAgfTtcblx0XG5cdCAgLy8gPT09PT09IDPjgIHkuIDkuKrop5Llh7rnjrAgPT09PT09XG5cdCAgdmFyIGNvcm5lciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHdpZHRoID0gMCwgaGVpZ2h0ID0gMDtcblx0ICAgIGlmIChlbGVMZWZ0VG9wSXNJbldpbiAmJiAhZWxlUmlnaHRUb3BJc0luV2luICYmICFlbGVMZWZ0Qm90dG9tSXNJbldpbiAmJiAhZWxlUmlnaHRCb3R0b21Jc0luV2luKSB7XG5cdCAgICAgIC8vIDMuMeOAgeW3puS4iuinkuWHuueOsOWcqOWPr+inhueql+WGhVxuXHQgICAgICB3aWR0aCA9IHdpblBvc2l0aW9ucy5wUmlnaHRCb3R0b21bMF0gLSB2Lng7XG5cdCAgICAgIGhlaWdodCA9IHdpblBvc2l0aW9ucy5wUmlnaHRCb3R0b21bMV0gLSB2Lnk7XG5cdCAgICB9IGVsc2UgaWYgKCFlbGVMZWZ0VG9wSXNJbldpbiAmJiBlbGVSaWdodFRvcElzSW5XaW4gJiYgIWVsZUxlZnRCb3R0b21Jc0luV2luICYmICFlbGVSaWdodEJvdHRvbUlzSW5XaW4pIHtcblx0ICAgICAgLy8gMy4y44CB5Y+z5LiK6KeS5Ye6546w5Zyo5Y+v6KeG56qX5YaFXG5cdCAgICAgIHdpZHRoID0gd2luUG9zaXRpb25zLnBMZWZ0Qm90dG9tWzBdIC0gdi54O1xuXHQgICAgICBoZWlnaHQgPSB3aW5Qb3NpdGlvbnMucExlZnRCb3R0b21bMV0gLSB2Lnk7XG5cdCAgICB9IGVsc2UgaWYgKCFlbGVMZWZ0VG9wSXNJbldpbiAmJiAhZWxlUmlnaHRUb3BJc0luV2luICYmIGVsZUxlZnRCb3R0b21Jc0luV2luICYmICFlbGVSaWdodEJvdHRvbUlzSW5XaW4pIHtcblx0ICAgICAgLy8gMy4z44CB5bem5LiL6KeS5Ye6546w5Zyo5Y+v6KeG56qX5YaFXG5cdCAgICAgIHdpZHRoID0gd2luUG9zaXRpb25zLnBSaWdodFRvcFswXSAtIHYueDtcblx0ICAgICAgaGVpZ2h0ID0gd2luUG9zaXRpb25zLnBSaWdodFRvcFsxXSAtIHYueTtcblx0ICAgIH0gZWxzZSBpZiAoIWVsZUxlZnRUb3BJc0luV2luICYmICFlbGVSaWdodFRvcElzSW5XaW4gJiYgIWVsZUxlZnRCb3R0b21Jc0luV2luICYmIGVsZVJpZ2h0Qm90dG9tSXNJbldpbikge1xuXHQgICAgICAvLyAzLjTjgIHlj7PkuIvop5Llh7rnjrDlnKjlj6/op4bnqpflhoVcblx0ICAgICAgd2lkdGggPSB3aW5Qb3NpdGlvbnMucExlZnRUb3BbMF0gLSB2Lng7XG5cdCAgICAgIGhlaWdodCA9IHdpblBvc2l0aW9ucy5wTGVmdFRvcFsxXSAtIHYueTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2LnNpemUgPiAwID8gTWF0aC5hYnMod2lkdGggKiBoZWlnaHQpIC8gdi5zaXplIDogMDtcblx0ICB9O1xuXHRcblx0ICAvLyDov5nph4zku47lpKfliLDlsI/nmoTpobrluo/kuI3og73mlLkgMeOAgWZ1bGwgPT4gMuOAgWhhbGYgPT4gM+OAgWNvcm5lclxuXHQgIHJhdGUgPSBmdWxsKCk7XG5cdCAgaWYgKHJhdGUgPiAwKSB7XG5cdCAgICByZXR1cm4gcmF0ZTtcblx0ICB9XG5cdFxuXHQgIHJhdGUgPSBoYWxmKCk7XG5cdCAgaWYgKHJhdGUgPiAwKSB7XG5cdCAgICByZXR1cm4gcmF0ZTtcblx0ICB9XG5cdFxuXHQgIHJhdGUgPSBjb3JuZXIoKTtcblx0ICBpZiAocmF0ZSA+IDApIHtcblx0ICAgIHJldHVybiByYXRlO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJhdGU7XG5cdH07XG5cdFxuXHRleHBvcnRzLndyYXBWaWV3YWJpbGl0eVJhdGUgPSBmdW5jdGlvbih3aW5Qb3NpdGlvbnMsIHYsIEFDX1JBVEUpIHtcblx0ICB2YXIgcmF0ZSA9IDA7XG5cdCAgaWYgKHdpblBvc2l0aW9ucykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aW5Qb3NpdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgcmF0ZSA9IGdldFZpZXdhYmlsaXR5UmF0ZSh3aW5Qb3NpdGlvbnNbaV0sIHYpO1xuXHQgICAgICBpZiAocmF0ZSA8IEFDX1JBVEUpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJhdGU7XG5cdH07XG5cdFxuXHQvLyDojrflj5blvZPliY3lhYPntKDnmoRY5oiWWeWdkOaghywgVE9ET+azqOaEj3Bvc2l0aW9u5a6a5L2N6Zeu6aKYXG5cdC8vIHZhciBnZXRFbGVtZW50T2Zmc2V0ID0gZnVuY3Rpb24oZWxlbWVudCwgdHlwZSkge1xuXHQvLyAgIHZhciBhY3R1YWxPZmZzZXQgPSBlbGVtZW50W3R5cGVdO1xuXHQvLyAgIHZhciBjdXJyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG5cdFxuXHQvLyAgIHZhciBwb3NpdGlvbiA9IGN1cnJlbnQgJiYgY3VycmVudC5zdHlsZSA/IGN1cnJlbnQuc3R5bGUucG9zaXRpb24gOiAnc3RhdGljJztcblx0Ly8gICB3aGlsZSAoY3VycmVudCAhPT0gbnVsbCAmJiBwb3NpdGlvbiAhPT0gJ3JlbGF0aXZlJykge1xuXHQvLyAgICAgYWN0dWFsT2Zmc2V0ICs9IGN1cnJlbnRbdHlwZV07XG5cdC8vICAgICBjdXJyZW50ID0gY3VycmVudC5vZmZzZXRQYXJlbnQ7XG5cdC8vICAgfVxuXHQvLyAgIHJldHVybiBhY3R1YWxPZmZzZXQ7XG5cdC8vIH07XG5cdFxuXHR2YXIgaXNOdW1iZXIgPSBmdW5jdGlvbiAobikge1xuXHQgIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgJiYgbiAhPT0gTmFOO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMgZWxlbWVudFxuXHQgKiBAcmV0dXJuIHtcblx0ICAgICB3aWR0aDogMTU5Ljk4NDM3NSwgLy8gbXVzdFxuXHQgICAgIGhlaWdodDogMTYsICAgICAgICAvLyBtdXN0XG5cdCAgICAgeDogNjgsICAgICAgICAgICAgIC8vIG11c3Rcblx0ICAgICB5OiAxNDE5LCAgICAgICAgICAgLy8gbXVzdFxuXHQgICAgIGJvdHRvbTogMTQzNSwgICAgICAvLyBlbmFibGVcblx0ICAgICBsZWZ0OiA2OCwgICAgICAgICAgLy8gZW5hYmxlXG5cdCAgICAgcmlnaHQ6IDIyNy45ODQzNzUsIC8vIGVuYWJsZVxuXHQgICAgIHRvcDogMTQxOSwgICAgICAgICAvLyBlbmFibGVcblx0ICAgfVxuXHQgKi9cblx0dmFyIGdldEVsZW1lbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdCAgdmFyIHBvcyA9IHt9O1xuXHQgIGlmIChlbGVtZW50KSB7XG5cdCAgICBpZiAodHlwZW9mIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHBvcyA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgfHwge307XG5cdCAgICB9XG5cdCAgICAvLyDmqKrlnZDmoIdcblx0ICAgIGlmICghaXNOdW1iZXIocG9zLngpKSB7XG5cdCAgICAgIGlmIChpc051bWJlcihwb3MubGVmdCkpIHtcblx0ICAgICAgICBwb3MueCA9IHBvcy5sZWZ0O1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGVsc2Uge1xuXHQgICAgICAvLyAgIHBvcy54ID0gZ2V0RWxlbWVudE9mZnNldChlbGVtZW50LCAnb2Zmc2V0TGVmdCcpO1xuXHQgICAgICAvLyB9XG5cdCAgICB9XG5cdCAgICAvLyDnurXlnZDmoIdcblx0ICAgIGlmICghaXNOdW1iZXIocG9zLnkpKSB7XG5cdCAgICAgIGlmIChpc051bWJlcihwb3MudG9wKSkge1xuXHQgICAgICAgIHBvcy55ID0gcG9zLnRvcDtcblx0ICAgICAgfVxuXHQgICAgICAvLyBlbHNlIHtcblx0ICAgICAgLy8gICBwb3MueSA9IGdldEVsZW1lbnRPZmZzZXQoZWxlbWVudCwgJ29mZnNldFRvcCcpO1xuXHQgICAgICAvLyB9XG5cdCAgICB9XG5cdCAgICBpZiAoIWlzTnVtYmVyKHBvcy53aWR0aCkpIHtcblx0ICAgICAgcG9zLndpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcblx0ICAgIH1cblx0ICAgIGlmICghaXNOdW1iZXIocG9zLmhlaWdodCkpIHtcblx0ICAgICAgcG9zLmhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcG9zO1xuXHR9O1xuXHRleHBvcnRzLmdldEVsZW1lbnRQb3NpdGlvbiA9IGdldEVsZW1lbnRQb3NpdGlvbjtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IHBvc2l0aW9uU2VsZWN0b3IgKGVuYWJsZSkgLy8gZWc6IGRpdi5jbGFzc05hbWVcblx0ICog6I635Y+W5Y+v6KeG56qX55qE5Zub5Liq5Z+65pys5Y+C5pWwY2xpZW50V2lkdGjjgIFjbGllbnRIZWlnaHTjgIFzY3JvbGxUb3DjgIFzY3JvbGxMZWZ0XG5cdCAqXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdGV4cG9ydHMuZ2V0V2luUG9zaXRpb25zID0gZnVuY3Rpb24ocG9zaXRpb25TZWxlY3Rvcikge1xuXHQgIHZhciBwb3N0aW9ucyA9IFtdO1xuXHQgIGlmIChwb3NpdGlvblNlbGVjdG9yICYmIHR5cGVvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICB2YXIgc2VsZWN0b3JFbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvc2l0aW9uU2VsZWN0b3IpO1xuXHQgICAgaWYgKHNlbGVjdG9yRWxlKSB7XG5cdCAgICAgIHZhciBfcG9zID0gZ2V0RWxlbWVudFBvc2l0aW9uKHNlbGVjdG9yRWxlKSB8fCB7fTtcblx0ICAgICAgaWYgKGlzTnVtYmVyKF9wb3MueCkgJiYgaXNOdW1iZXIoX3Bvcy55KSAmJiBpc051bWJlcihfcG9zLndpZHRoKSAmJiBpc051bWJlcihfcG9zLmhlaWdodCkpIHtcblx0ICAgICAgICBwb3N0aW9ucy5wdXNoKHtcblx0ICAgICAgICAgIHBMZWZ0VG9wOiBbX3Bvcy54LCBfcG9zLnldLFxuXHQgICAgICAgICAgcFJpZ2h0VG9wOiBbX3Bvcy54ICsgX3Bvcy53aWR0aCwgX3Bvcy55XSxcblx0ICAgICAgICAgIHBMZWZ0Qm90dG9tOiBbX3Bvcy54LCBfcG9zLnkgKyBfcG9zLmhlaWdodF0sXG5cdCAgICAgICAgICBwUmlnaHRCb3R0b206IFtfcG9zLnggKyBfcG9zLndpZHRoLCBfcG9zLnkgKyBfcG9zLmhlaWdodF1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgZWxlMSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgdmFyIGVsZTIgPSBkb2MuYm9keTtcblx0ICB2YXIgY2xpZW50V2lkdGggPSBlbGUxLmNsaWVudFdpZHRoIHx8IGVsZTIub2Zmc2V0V2lkdGggfHwgMDtcblx0ICB2YXIgY2xpZW50SGVpZ2h0ID0gZWxlMS5jbGllbnRIZWlnaHQgfHwgZWxlMi5vZmZzZXRIZWlnaHQgfHwgMDtcblx0ICBwb3N0aW9ucy5wdXNoKHtcblx0ICAgIHBMZWZ0VG9wOiBbMCwgMF0sXG5cdCAgICBwUmlnaHRUb3A6IFtjbGllbnRXaWR0aCwgMF0sXG5cdCAgICBwTGVmdEJvdHRvbTogWzAsIGNsaWVudEhlaWdodF0sXG5cdCAgICBwUmlnaHRCb3R0b206IFtjbGllbnRXaWR0aCwgY2xpZW50SGVpZ2h0XVxuXHQgIH0pO1xuXHQgIHJldHVybiBwb3N0aW9ucztcblx0fTtcblx0XG5cdC8vIOmqjOivgeaYr+WQpuW3suabneWFiVxuXHRleHBvcnRzLmNoZWNrSXNSZWNvcmQgPSBmdW5jdGlvbihlbGVtZW50LCBvbGRfaGFzaF92YWx1ZSwgYXBsdXNEb21BdHRyS2V5KSB7XG5cdCAgdmFyIGlzUmVjb3JkO1xuXHQgIHRyeSB7XG5cdCAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xuXHQgICAgICB2YXIgYXR0cl92YWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGFwbHVzRG9tQXR0cktleSkgfHwgJyc7XG5cdCAgICAgIGlzUmVjb3JkID0gb2xkX2hhc2hfdmFsdWUgPyBhdHRyX3ZhbHVlID09PSBvbGRfaGFzaF92YWx1ZSA6ICEhYXR0cl92YWx1ZTtcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHt9XG5cdCAgLy8gY29uc29sZS5sb2coJ2lzUmVjb3JkID0gJyArIGlzUmVjb3JkKTtcblx0ICByZXR1cm4gaXNSZWNvcmQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFZpZXdhYmlsaXR5UmF0ZUluV2luZG93ID0gZnVuY3Rpb24od2luUG9zaXRpb25zLCBlbGVtZW50QXJlYSwgQUNfUkFURSkge1xuXHQgIHZhciByYXRlID0gMDtcblx0ICBpZiAod2luUG9zaXRpb25zKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpblBvc2l0aW9ucy5sZW5ndGg7IGkrKykge1xuXHQgICAgICByYXRlID0gZWxlbWVudEFyZWEgLyB3aW5Qb3NpdGlvbnNbaV0uc2l6ZTtcblx0ICAgICAgaWYgKHJhdGUgPj0gQUNfUkFURSkge1xuXHQgICAgICAgIHJldHVybiByYXRlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByYXRlO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gdmFyIHV0aWxFdmVudCA9IHJlcXVpcmUoJy4vdXRpbC9ldmVudCcpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciB1dGlsRXhwb3N1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTtcblx0dmFyIHV0aWxFbGVtZW50QWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKTtcblx0XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0dmFyIHV0aWxfYWNfYWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTtcblx0Ly8g6Ieq5Yqo5pud5YWJ5omT54K5IC0g5Yik5a6a5Y+v6KeG55qE5q+U5L6L546HXG5cdHZhciBBQ19SQVRFID0gY29uZmlnLkFVVE9fQVRfVklFV19SQVRFO1xuXHR2YXIgQUNfUkFURV9JTl9XSU5ET1cgPSBjb25maWcuQVVUT19BVF9WSUVXX1JBVEVfSU5fV0lORE9XO1xuXHR2YXIgd2luID0gd2luZG93O1xuXHR2YXIgSU9ic2VydmVyID0gd2luLkludGVyc2VjdGlvbk9ic2VydmVyO1xuXHR2YXIgaW9ic2VydmVyTWFwID0ge307XG5cdFxuXHQvLyB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuXHRhcGx1cy5fYXBsdXNfYXV0b19leHAuaW9ic2VydmVyTWFwID0gaW9ic2VydmVyTWFwO1xuXHQvKipcblx0ICog5qC55o2u5b6F5pud5YWJ55qE5YWD57Sg5YiX6KGo5qOA5p+l5pys5qyh5rua6L2u5oiW6ICF56qX5Y+j5aSn5bCP5Y+Y5YyW6Kem5Y+R55qE5YWD57Sg5piv5ZCm5Zyo5Y+v6KeG56qX5YaF77yI5pud5YWJ77yJXG5cdCAqIOWwhuafpeivouWIsOeahOWkhOS6juabneWFieeKtuaAgeeahOWFg+e0oOeKtuaAge+8iHN0YXR1c++8ieWxnuaAp+WAvOaUueS4uuKAnDHigJ3vvIzorr7nva7liJ3lp4vmm53lhYnml7bpl7RleHBvc3VyZVRpbWVcblx0ICog5bm26L+U5Zue5pys5qyh5LqL5Lu26Kem5Y+R55qE5pud5YWJ5YWD57Sg55qE5p2h5pWwXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIHtcblx0ICogIGJvdW5kaW5nQ2xpZW50UmVjdDoge1xuXHQgKiAgICAgYm90dG9tOiAxNDFcblx0ICogICAgIGhlaWdodDogNDUyXG5cdCAqICAgICBsZWZ0OiA0XG5cdCAqICAgICByaWdodDogMTg4XG5cdCAqICAgICB0b3A6IC0zMTFcblx0ICogICAgIHdpZHRoOiAxODRcblx0ICogICAgIHg6IDRcblx0ICogICAgIHk6IC0zMTFcblx0ICogIH0sXG5cdCAqICBpbnRlcnNlY3Rpb25SYXRpbzogMC4zMTE5NDY4OTg2OTg4MDY3Nixcblx0ICogIGludGVyc2VjdGlvblJlY3Q6IHtcblx0ICogICAgIGJvdHRvbTogNTIxXG5cdCAqICAgICBoZWlnaHQ6IDQwMFxuXHQgKiAgICAgbGVmdDogMFxuXHQgKiAgICAgcmlnaHQ6IDM3NVxuXHQgKiAgICAgdG9wOiAxMjFcblx0ICogICAgIHdpZHRoOiAzNzVcblx0ICogICAgIHg6IDBcblx0ICogICAgIHk6IDEyMVxuXHQgKiAgfSxcblx0ICogIGlzSW50ZXJzZWN0aW5nOiB0cnVlIHx8IGZhbHNlLFxuXHQgKiAgcm9vdEJvdW5kczoge1xuXHQgKiAgICAgYm90dG9tOiA4MTJcblx0ICogICAgIGhlaWdodDogODEyXG5cdCAqICAgICBsZWZ0OiAwXG5cdCAqICAgICByaWdodDogMzc1XG5cdCAqICAgICB0b3A6IDBcblx0ICogICAgIHdpZHRoOiAzNzVcblx0ICogICAgIHg6IDBcblx0ICogICAgIHk6IDBcblx0ICogIH0sXG5cdCAqICB0YXJnZXQ6IEVsZW1lbnQsXG5cdCAqICB0aW1lOiAxODc3LjQ5OTk5OTk0NDEyMDZcblx0ICogfVxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IHNpemUgLy8g5pys5qyh5LqL5Lu26Kem5Y+R55qE5pud5YWJ5YWD57Sg55qE5p2h5pWwXG5cdCAqL1xuXHRmdW5jdGlvbiBmaWx0ZXJTdGFydEV4cG9zdXJlU2l6ZShleHBvc3VyZVRpbWUsIG9wdHMsIG1vdmVPclNjcm9sbCkge1xuXHQgIHZhciB3aW5Qb3NpdGlvbnMgPSB1dGlsRWxlbWVudEFjLmdldFdpblBvc2l0aW9ucygpO1xuXHQgIHZhciBzaXplID0gMDtcblx0ICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG5cdCAgdmFyIF9hY0hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuX2FjSGFzaE1hcCB8fCB7fTtcblx0ICBmb3IgKHZhciBsb2drZXkgaW4gX2FjSGFzaE1hcCkge1xuXHQgICAgdmFyIGVsZV9zID0gX2FjSGFzaE1hcFtsb2drZXldIHx8IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVfcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuXHQgICAgICB2LmV2ZW50VHlwZSA9ICdJT2JzZXJ2ZXInO1xuXHQgICAgICB2YXIgaXNUYXJnZXQgPSAhbW92ZU9yU2Nyb2xsID8gdi5lbGVtZW50ID09PSBvcHRzLnRhcmdldCA6IHRydWU7XG5cdCAgICAgIGlmICh2LnN0YXR1cyA9PT0gMCAmJiB2LmV4cENvbmZpZyAmJiBpc1RhcmdldCkge1xuXHQgICAgICAgIHZhciBfZWxlUG9zID0gb3B0cy5ib3VuZGluZ0NsaWVudFJlY3QgfHwge307XG5cdCAgICAgICAgaWYgKCFfZWxlUG9zLndpZHRoICYmICFfZWxlUG9zLmhlaWdodCkge1xuXHQgICAgICAgICAgX2VsZVBvcyA9IG9wdHMudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIHx8IHt9O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoX2VsZVBvcy53aWR0aCAmJiBfZWxlUG9zLmhlaWdodCkge1xuXHQgICAgICAgICAgdiA9IHV0aWxEYXNoLmFzc2lnbih2LCBfZWxlUG9zKTtcblx0ICAgICAgICAgIHYueCA9IF9lbGVQb3MueCB8fCBfZWxlUG9zLmxlZnQ7XG5cdCAgICAgICAgICB2LnkgPSBfZWxlUG9zLnkgfHwgX2VsZVBvcy50b3A7XG5cdCAgICAgICAgICB2LndpZHRoID0gX2VsZVBvcy53aWR0aDtcblx0ICAgICAgICAgIHYuaGVpZ2h0ID0gX2VsZVBvcy5oZWlnaHQ7XG5cdCAgICAgICAgICB2LnNpemUgPSBfZWxlUG9zLndpZHRoICogX2VsZVBvcy5oZWlnaHQ7XG5cdCAgICAgICAgICB2YXIgaXNSZWNvcmQgPSB1dGlsRWxlbWVudEFjLmNoZWNrSXNSZWNvcmQodi5lbGVtZW50LCB2Lmhhc2hfdmFsdWUsICdfYXBsdXNfYXV0b19leHAnKTtcblx0ICAgICAgICAgIC8vIOWcqOWPr+inhueql+WGhe+8jOS4lGRvbeiKgueCueS4iuayoeacieW3suabneWFieagh+ivhu+8jOS4lOS4jeWcqOWGheWtmOS4reaIluWcqOWGheWtmOS4reS9hueKtuaAgeaYrzDvvIgw5Li65Yid5aeL54q25oCB77yJXG5cdCAgICAgICAgICAvLyDlj6/op4bljJbpnaLnp6/nm7jlr7nmr5TkuI7lsY/luZXpnaLnp6/mr5Tkvotcblx0ICAgICAgICAgIHZhciBlbGVtZW50QXJlYSA9IHYud2lkdGggKiB2LmhlaWdodCAqIG9wdHMuaW50ZXJzZWN0aW9uUmF0aW87XG5cdCAgICAgICAgICB2YXIgdmlld2FiaWxpdHlSYXRlSW5XaW5kb3cgPSB1dGlsRWxlbWVudEFjLmdldFZpZXdhYmlsaXR5UmF0ZUluV2luZG93KHdpblBvc2l0aW9ucywgZWxlbWVudEFyZWEsIEFDX1JBVEVfSU5fV0lORE9XKTtcblx0ICAgICAgICAgIGlmICghaXNSZWNvcmQpIHtcblx0ICAgICAgICAgICAgdmFyIGlzUmVsYXRlaXZlUmF0aW8gPSBvcHRzLmludGVyc2VjdGlvblJhdGlvID49IEFDX1JBVEU7XG5cdCAgICAgICAgICAgIGlmIChpc1JlbGF0ZWl2ZVJhdGlvIHx8IHZpZXdhYmlsaXR5UmF0ZUluV2luZG93ID49IEFDX1JBVEVfSU5fV0lORE9XKSB7XG5cdCAgICAgICAgICAgICAgdi5leHBvc3VyZVRpbWUgPSBleHBvc3VyZVRpbWU7XG5cdCAgICAgICAgICAgICAgdi5zdGF0dXMgPSAxOyAvLyDliJ3op4HlhYnnirbmgIFcblx0ICAgICAgICAgICAgICB2YXIgYWVBdXRvVXNlckZuID0gY29uZmlnLmdldEF1dG9FeHBVc2VyRm4oKTtcblx0ICAgICAgICAgICAgICBpZiAoYWVBdXRvVXNlckZuKSB7XG5cdCAgICAgICAgICAgICAgICB2LnVzZXJQYXJhbXMgPSB1dGlsX2FjX2FlLmF1dG9Vc2VyRm5IYW5kbGVyKGFlQXV0b1VzZXJGbiwgdi5lbGVtZW50LCB2LmVsZW1lbnRTZWxlY3Rvciwgdi5leHBDb25maWcpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB2LnZpZXdhYmlsaXR5UmF0ZSA9IGlzUmVsYXRlaXZlUmF0aW8gPyBvcHRzLmludGVyc2VjdGlvblJhdGlvIDogdmlld2FiaWxpdHlSYXRlSW5XaW5kb3c7XG5cdCAgICAgICAgICAgICAgdi52aWV3YWJpbGl0eSA9IGlzUmVsYXRlaXZlUmF0aW8gPyAnaW50ZXJzZWN0aW9uJyA6ICdmaWxsd2luZG93Jztcblx0ICAgICAgICAgICAgICAvLyDkuI3orr7nva7mm53lhYnml7bplb/ml7blsLHnm7TmjqXlj5Hlh7rml6Xlv5dcblx0ICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5FWFBfRFVSQVRJT04pIHtcblx0ICAgICAgICAgICAgICAgIHYuc3RhdHVzID0gMjtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgdXRpbF9hY19hZS51cGRhdGVFeHBIYXNoTWFwKGxvZ2tleSwgdiwgJ1VQREFURScpO1xuXHQgICAgICAgICAgICAgICsrc2l6ZTtcblx0ICAgICAgICAgICAgfSBlbHNlIGlmICh2aWV3YWJpbGl0eVJhdGVJbldpbmRvdykge1xuXHQgICAgICAgICAgICAgIC8vIOiiq2luc2VjdGlvbk9ic2VydmXmipPlj5bliLDlubblnKjlsY/luZXkuK3lh7rnjrDov4fnmoTlhYPntKDmiZNsYXN0RXZlbnRUeXBl5qCH77yM5pa55L6/5ZCO57utbW92ZeOAgXNjcm9sbOS6i+S7tuWGjeasoeaKk+WPllxuXHQgICAgICAgICAgICAgIHV0aWxfYWNfYWUudXBkYXRlRXhwSGFzaE1hcChsb2drZXksIHV0aWxEYXNoLmFzc2lnbihlbGVfc1tpXSwge1xuXHQgICAgICAgICAgICAgICAgbGFzdEV2ZW50VHlwZTogdi5ldmVudFR5cGVcblx0ICAgICAgICAgICAgICB9KSwgJ1VQREFURScpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzaXplO1xuXHR9XG5cdFxuXHQvKipcblx0ICog6K+l5pa55rOV6KKrb25zY3JvbGws5oiW6KKrb25yZXNpemXlm57osIPlh73mlbDosIPnlKjvvIzmo4DpqozlhYPntKDmmK/lkKbmm53lhYlcblx0ICovXG5cdGZ1bmN0aW9uIGhhbmRsZXJfZG9tX2V4cG9zdXJlIChlbnRyeSwgaXNGaXJzdCkge1xuXHQgIHZhciBQVUJfS0VZID0gJ0FQTFVTX0FFX0VYUE9TVVJFX0NIQU5HRSc7XG5cdCAgdmFyIGV2ZW50VHlwZSA9IGVudHJ5ICYmIGVudHJ5LnR5cGUgPyBlbnRyeS50eXBlIDogJ0lPYnNlcnZlcic7XG5cdCAgdmFyIGV4cG9zdXJlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQgIHZhciBzaXplID0gMDtcblx0ICBpZiAoaXNGaXJzdCkge1xuXHQgICAgLy8gd2luZG93LmNvbnNvbGUuY291bnQoJ2lzRmlyc3QnKTtcblx0ICAgIHNpemUgPSB1dGlsRXhwb3N1cmUuZmlsdGVyU3RhcnRFeHBvc3VyZVNpemUoZXhwb3N1cmVUaW1lLCBlbnRyeSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHdpbmRvdy5jb25zb2xlLmNvdW50KCdpc1NlY29uZCcpO1xuXHQgICAgc2l6ZSA9IGZpbHRlclN0YXJ0RXhwb3N1cmVTaXplKGV4cG9zdXJlVGltZSwgZW50cnkpO1xuXHQgIH1cblx0ICAvLyDlrZjlnKjmm53lhYnlhYPntKDvvIznrYnlvoUgeCDmr6vnp5LlkI7kuozmrKHliKTmlq3mm53lhYnmnInmlYjmgKdcblx0ICBpZiAoc2l6ZSA+IDApIHtcblx0ICAgIGlmIChjb25maWcuRVhQX0RVUkFUSU9OKSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICBzaXplID0gdXRpbEV4cG9zdXJlLmZpbHRlckVuZEV4cG9zdXJlU2l6ZShleHBvc3VyZVRpbWUsIGV2ZW50VHlwZSk7XG5cdCAgICAgICAgaWYgKHNpemUgPiAwKSB7XG5cdCAgICAgICAgICAvLyDlrZjlnKjmnInmlYjmm53lhYnlhYPntKDnmoTmg4XlhrXkuIvvvIzlj5HlsITmm53lhYnkuovku7bvvIznu5l3YXRjaFJlY29yZC5qc+i/meS4queOr+iKguWkhOeQhlxuXHQgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnB1Ymxpc2goUFVCX0tFWSwge1xuXHQgICAgICAgICAgICBzaXplOiBzaXplLFxuXHQgICAgICAgICAgICBldmVudFR5cGU6IGV2ZW50VHlwZVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBjb25maWcuRVhQX0RVUkFUSU9OKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5wdWJsaXNoKFBVQl9LRVksIHtcblx0ICAgICAgICBzaXplOiBzaXplLFxuXHQgICAgICAgIGV2ZW50VHlwZTogZXZlbnRUeXBlXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlSU9ic2VydmVyIChvcHRpb25zKSB7XG5cdCAgdmFyIGRlZmF1bHRPcHRzID0ge1xuXHQgICAgcm9vdDogbnVsbCwgLy8gZGVmYXVsdCB2YWx1ZSBpcyB3aW5kb3csIHlvdSBjYW4gcmV3cml0ZSBpdCBieSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2Nyb2xsQXJlYScpLFxuXHQgICAgcm9vdE1hcmdpbjogJzBweCcsXG5cdCAgICB0aHJlc2hvbGQ6IEFDX1JBVEVcblx0ICB9O1xuXHQgIHJldHVybiBuZXcgSU9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG5cdCAgICBlYWNoKGVudHJpZXMsIGZ1bmN0aW9uKGVudHJ5KXtcblx0ICAgICAgaWYgKGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMCkge1xuXHQgICAgICAgIGhhbmRsZXJfZG9tX2V4cG9zdXJlKGVudHJ5KTtcblx0ICAgICAgfSAgXG5cdCAgICB9KTtcblx0ICB9LCB1dGlsRGFzaC5hc3NpZ24oZGVmYXVsdE9wdHMsIG9wdGlvbnMpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHdhdGNoSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcblx0ICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuXHQgKiAgIGV4cENvbmZpZzogW3tcblx0ICogICAgIGNzc1NlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG5cdCAqICAgICBlbGVtZW50U2VsZWN0b3I6IFwiRElWW2xvZ2tleT1cIi9kYWN1LjEuMS4xXCJdXCJcblx0ICogICAgIGxvZ2tleTogXCIvZGFjdS4xLjEuMVwiXG5cdCAqICAgICBwcm9wczogW1wiX2xrYVwiXVxuXHQgKiAgIH1dLFxuXHQgKiAgIGlzVGhyb3R0bGVXYXRjaDogZmFsc2Vcblx0ICogfVxuXHQgKiBAcGFyYW1zIG9wdHMge09iamVjdH0ge1xuXHQgKiAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcblx0ICogfVxuXHQgKi9cblx0ZnVuY3Rpb24gd2F0Y2hJbnRlcnNlY3Rpb25PYnNlcnZlciAoZXhwQ29uZmlnKSB7XG5cdCAgLy8gY29uc29sZS5jb3VudCgnd2F0Y2hJbnRlcnNlY3Rpb25PYnNlcnZlcicpO1xuXHQgIGlmIChJT2JzZXJ2ZXIpIHtcblx0ICAgIGlmICghaW9ic2VydmVyTWFwLmlvX2Jhc2UpIHtcblx0ICAgICAgaW9ic2VydmVyTWFwLmlvX2Jhc2UgPSBjcmVhdGVJT2JzZXJ2ZXIoKTtcblx0ICAgIH1cblx0ICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICAgIHZhciBfYWNIYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLl9hY0hhc2hNYXAgfHwge307XG5cdCAgICBmb3IgKHZhciBsb2drZXkgaW4gX2FjSGFzaE1hcCkge1xuXHQgICAgICB2YXIgZWxlX3MgPSBfYWNIYXNoTWFwW2xvZ2tleV0gfHwgW107XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuXHQgICAgICAgIGlmICghdi5pbk9ic2VydmVyKSB7XG5cdCAgICAgICAgICB2YXIga2V5ID0gJ2lvX3ZfJyArIGVuY29kZVVSSUNvbXBvbmVudCh2LnBvc2l0aW9uU2VsZWN0b3IpO1xuXHQgICAgICAgICAgdmFyIGlvX3Y7XG5cdCAgICAgICAgICBpZiAodi5wb3NpdGlvblNlbGVjdG9yICYmICFpb2JzZXJ2ZXJNYXBba2V5XSkge1xuXHQgICAgICAgICAgICBpb192ID0gY3JlYXRlSU9ic2VydmVyKHtcblx0ICAgICAgICAgICAgICByb290OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHYucG9zaXRpb25TZWxlY3RvciksXG5cdCAgICAgICAgICAgICAgZXhwQ29uZmlnOiBleHBDb25maWdcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIGlvYnNlcnZlck1hcFtrZXldID0gaW9fdjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChpb192KSB7XG5cdCAgICAgICAgICAgIGlvX3Yub2JzZXJ2ZSh2LmVsZW1lbnQpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgaW9ic2VydmVyTWFwLmlvX2Jhc2Uub2JzZXJ2ZSh2LmVsZW1lbnQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgdi5pbk9ic2VydmVyID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiDnm5HlkKxkb23lj5jljJbvvIzmnInlj5jljJbmiafooYzlm57osINcblx0ICogQHBhcmFtIHtoYW5kbGVyX2RvbV9jaGFuZ2V9IGNiXG5cdCAqL1xuXHRleHBvcnRzLndhdGNoX2V4cG9zdXJlX2NoYW5nZSA9IGZ1bmN0aW9uKGV4cENvbmZpZykge1xuXHQgIC8vIHN0ZXAxIOebkeWQrOesrOS4gOasoWRvbWNoYW5nZeWPkeWwhOeahOa2iOaBr++8jOWBmuesrOS4gOasoemqjOivgeabneWFieeahOWkhOeQhlxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ0FQTFVTX0FFX0RPTV9DSEFOR0UnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB3YXRjaEludGVyc2VjdGlvbk9ic2VydmVyKGV4cENvbmZpZyk7XG5cdCAgfSk7XG5cdCAgLy8gc3RlcDIg55uR5ZCs5YWD57Sg5pud5YWJXG5cdCAgd2F0Y2hJbnRlcnNlY3Rpb25PYnNlcnZlcihleHBDb25maWcpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIHdhdGNoSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcblx0ICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuXHQgKiAgIGV4cENvbmZpZzogW3tcblx0ICogICAgIGNzc1NlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG5cdCAqICAgICBlbGVtZW50U2VsZWN0b3I6IFwiRElWW2xvZ2tleT1cIi9kYWN1LjEuMS4xXCJdXCJcblx0ICogICAgIGxvZ2tleTogXCIvZGFjdS4xLjEuMVwiXG5cdCAqICAgICBwcm9wczogW1wiX2xrYVwiXVxuXHQgKiAgIH1dLFxuXHQgKiAgIGlzVGhyb3R0bGVXYXRjaDogZmFsc2Vcblx0ICogfVxuXHQgKi9cblx0ZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uIChfY29uZmlnLCBvcHRzKSB7XG5cdCAgaWYgKG9wdHMgJiYgb3B0cy5mcm9tICE9PSAnYXBwZW5kTWV0YUluZm8nKSB7XG5cdCAgICBmb3IgKHZhciBrIGluIGlvYnNlcnZlck1hcCkge1xuXHQgICAgICB2YXIgaW8gPSBpb2JzZXJ2ZXJNYXBba107XG5cdCAgICAgIC8vIC8vIOWBnOatouinguWvn1xuXHQgICAgICAvLyBpby51bm9ic2VydmUoZWxlbWVudCk7XG5cdCAgICAgIC8vIOWFs+mXreinguWvn+WZqFxuXHQgICAgICBpby5kaXNjb25uZWN0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDYyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgdXRpbEVsZW1lbnRBYyA9IF9fd2VicGFja19yZXF1aXJlX18oNjApO1xuXHR2YXIgY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdHZhciB1dGlsX2FjX2FlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdC8vIOiHquWKqOabneWFieaJk+eCuSAtIOWIpOWumuWPr+inhueahOavlOS+i+eOh1xuXHR2YXIgQUNfUkFURSA9IGNvbmZpZy5BVVRPX0FUX1ZJRVdfUkFURTtcblx0dmFyIEFDX1JBVEVfSU5fV0lORE9XID0gY29uZmlnLkFVVE9fQVRfVklFV19SQVRFX0lOX1dJTkRPVztcblx0dmFyIHdpblBvc2l0aW9ucztcblx0XG5cdHZhciBpc0Rpc3BsYXlOb25lID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgdmFyIGlzTm9uZTtcblx0ICB3aGlsZSAoZWwgJiYgZWwudGFnTmFtZSAhPT0gJ0hUTUwnKSB7XG5cdCAgICBpc05vbmUgPSBlbC5zdHlsZS5kaXNwbGF5O1xuXHQgICAgaWYgKGlzTm9uZSAhPT0gJ25vbmUnKSB7XG5cdCAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICBicmVhaztcblx0ICB9XG5cdCAgcmV0dXJuIGlzTm9uZSA9PT0gJ25vbmUnO1xuXHR9O1xuXHRcblx0XG5cdC8qKlxuXHQgKiDmoLnmja7lvoXmm53lhYnnmoTlhYPntKDliJfooajmo4Dmn6XmnKzmrKHmu5rova7miJbogIXnqpflj6PlpKflsI/lj5jljJbop6blj5HnmoTlhYPntKDmmK/lkKblnKjlj6/op4bnqpflhoXvvIjmm53lhYnvvIlcblx0ICog5bCG5p+l6K+i5Yiw55qE5aSE5LqO5pud5YWJ54q25oCB55qE5YWD57Sg54q25oCB77yIc3RhdHVz77yJ5bGe5oCn5YC85pS55Li64oCcMeKAne+8jOiuvue9ruWIneWni+abneWFieaXtumXtGV4cG9zdXJlVGltZVxuXHQgKiDlubbov5Tlm57mnKzmrKHkuovku7bop6blj5HnmoTmm53lhYnlhYPntKDnmoTmnaHmlbBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cG9zdXJlVGltZSAvLyBvbnNjcm9sbCxvbnJlc2l6ZeWIneWni+abneWFieaXtumXtFxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IHNpemUgLy8g5pys5qyh5LqL5Lu26Kem5Y+R55qE5pud5YWJ5YWD57Sg55qE5p2h5pWwXG5cdCAqL1xuXHRleHBvcnRzLmZpbHRlclN0YXJ0RXhwb3N1cmVTaXplID0gZnVuY3Rpb24oZXhwb3N1cmVUaW1lLCBldmVudFR5cGUpIHtcblx0ICB2YXIgc2l6ZSA9IDA7XG5cdCAgLy8gdmFyIHdpblBhcmFtcyA9IHV0aWxFbGVtZW50QWMuZ2V0V2luUGFyYW1zKCk7IC8vIFRPRE8gLSDpqozor4HmgKfog73pl67popjvvIzlgZrmiJDlj6/phY3vvIzpg6jliIbkuJrliqHlpoLmraTlpITnkIZcblx0ICAvLyB2YXIgd2luUG9zaXRpb25zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5Qb3NpdGlvbnMod2luUGFyYW1zKTtcblx0ICB2YXIgd2luUG9zaXRpb25zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5Qb3NpdGlvbnMoKTtcblx0XG5cdCAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuXHQgIHZhciBfYWNIYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLl9hY0hhc2hNYXAgfHwge307XG5cdCAgZm9yICh2YXIgbG9na2V5IGluIF9hY0hhc2hNYXApIHtcblx0ICAgIHZhciBlbGVfcyA9IF9hY0hhc2hNYXBbbG9na2V5XSB8fCBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHYgPSBlbGVfc1tpXSB8fCB7fTtcblx0ICAgICAgaWYgKHYuc3RhdHVzID09PSAwICYmIHYuZXhwQ29uZmlnKSB7XG5cdCAgICAgICAgaWYgKCFpc0Rpc3BsYXlOb25lKHYuZWxlbWVudCkpIHtcblx0ICAgICAgICAgIHZhciBfZWxlUG9zID0gdXRpbEVsZW1lbnRBYy5nZXRFbGVtZW50UG9zaXRpb24odi5lbGVtZW50KTtcblx0ICAgICAgICAgIGlmIChfZWxlUG9zLndpZHRoICYmIF9lbGVQb3MuaGVpZ2h0KSB7XG5cdCAgICAgICAgICAgIHYueCA9IF9lbGVQb3MueDtcblx0ICAgICAgICAgICAgdi55ID0gX2VsZVBvcy55O1xuXHQgICAgICAgICAgICB2LmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcblx0ICAgICAgICAgICAgdi53aWR0aCA9IF9lbGVQb3Mud2lkdGg7XG5cdCAgICAgICAgICAgIHYuaGVpZ2h0ID0gX2VsZVBvcy5oZWlnaHQ7XG5cdCAgICAgICAgICAgIHYuc2l6ZSA9IF9lbGVQb3Mud2lkdGggKiBfZWxlUG9zLmhlaWdodDtcblx0ICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIC8vIOWIpOaWreWIsOaciXBvc2l0aW9uU2VsZWN0b3LvvIzlubbkuJTlvZPliY3lhYPntKDlpITkuo7nm7jlr7nlrprkvY3jgIHnu53lr7nlrprkvY3nrYnlhYPntKDlhoXmu5rliqjml7bvvIhjbGllbnRIZWlnaHQgPiBzY3JvbGxIZWlnaHQpXG5cdCAgICAgICAgICAgIHZhciByZWxhdGl2ZVNlbGVjdG9yUG9zaXRpb25zO1xuXHQgICAgICAgICAgICBpZiAodi5leHBDb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgICAgICAgIHJlbGF0aXZlU2VsZWN0b3JQb3NpdGlvbnMgPSB1dGlsRWxlbWVudEFjLmdldFdpblBvc2l0aW9ucyh2LmV4cENvbmZpZy5wb3NpdGlvblNlbGVjdG9yKTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgLy8g6I635Y+W5YWD57Sg55qE5Y+v6KeG546H77yI5Zyo5Y+v6KeG56qX5YaF55qE5Y+v6KeB5q+U5L6L77yJXG5cdCAgICAgICAgICAgIHZhciB2aWV3YWJpbGl0eVJhdGUgPSB1dGlsRWxlbWVudEFjLndyYXBWaWV3YWJpbGl0eVJhdGUocmVsYXRpdmVTZWxlY3RvclBvc2l0aW9ucyB8fCB3aW5Qb3NpdGlvbnMsIHYsIEFDX1JBVEUpO1xuXHQgICAgICAgICAgICB2YXIgaXNWaWV3YWJpbGl0eVJhdGUgPSB2aWV3YWJpbGl0eVJhdGUgPj0gQUNfUkFURTtcblx0XG5cdCAgICAgICAgICAgIHZhciB2aWV3YWJpbGl0eUluV2luZG93UmF0ZSA9IHZpZXdhYmlsaXR5UmF0ZTtcblx0ICAgICAgICAgICAgaWYgKHJlbGF0aXZlU2VsZWN0b3JQb3NpdGlvbnMpIHtcblx0ICAgICAgICAgICAgICB2aWV3YWJpbGl0eUluV2luZG93UmF0ZSA9IHV0aWxFbGVtZW50QWMud3JhcFZpZXdhYmlsaXR5UmF0ZSh3aW5Qb3NpdGlvbnMsIHYsIEFDX1JBVEUpO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB2YXIgZWxlbWVudEFyZWEgPSB2LndpZHRoICogdi5oZWlnaHQgKiB2aWV3YWJpbGl0eUluV2luZG93UmF0ZTtcblx0ICAgICAgICAgICAgdmFyIHZpZXdhYmlsaXR5UmF0ZUluV2luZG93ID0gdXRpbEVsZW1lbnRBYy5nZXRWaWV3YWJpbGl0eVJhdGVJbldpbmRvdyh3aW5Qb3NpdGlvbnMsIGVsZW1lbnRBcmVhLCBBQ19SQVRFX0lOX1dJTkRPVyk7XG5cdCAgICAgICAgICAgIFxuXHQgICAgICAgICAgICB2YXIgaXNSZWNvcmQgPSB1dGlsRWxlbWVudEFjLmNoZWNrSXNSZWNvcmQodi5lbGVtZW50LCB2Lmhhc2hfdmFsdWUsICdfYXBsdXNfYXV0b19leHAnKTtcblx0ICAgICAgICAgICAgLy8g5Zyo5Y+v6KeG56qX5YaF77yM5LiUZG9t6IqC54K55LiK5rKh5pyJ5bey5pud5YWJ5qCH6K+G77yM5LiU5LiN5Zyo5YaF5a2Y5Lit5oiW5Zyo5YaF5a2Y5Lit5L2G54q25oCB5pivMO+8iDDkuLrliJ3lp4vnirbmgIHvvIlcblx0ICAgICAgICAgICAgaWYgKChpc1ZpZXdhYmlsaXR5UmF0ZSB8fCB2aWV3YWJpbGl0eVJhdGVJbldpbmRvdyA+PSBBQ19SQVRFX0lOX1dJTkRPVykgJiYgIWlzUmVjb3JkKSB7XG5cdCAgICAgICAgICAgICAgdi5leHBvc3VyZVRpbWUgPSBleHBvc3VyZVRpbWU7XG5cdCAgICAgICAgICAgICAgdi5zdGF0dXMgPSAxOyAvLyDliJ3op4HlhYnnirbmgIFcblx0ICAgICAgICAgICAgICB2YXIgYWVBdXRvVXNlckZuID0gY29uZmlnLmdldEF1dG9FeHBVc2VyRm4oKTtcblx0ICAgICAgICAgICAgICBpZiAoYWVBdXRvVXNlckZuKSB7XG5cdCAgICAgICAgICAgICAgICB2LnVzZXJQYXJhbXMgPSB1dGlsX2FjX2FlLmF1dG9Vc2VyRm5IYW5kbGVyKGFlQXV0b1VzZXJGbiwgdi5lbGVtZW50LCB2LmVsZW1lbnRTZWxlY3Rvciwgdi5leHBDb25maWcpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAvLyDkuI3orr7nva7mm53lhYnml7bplb/ml7blsLHnm7TmjqXlj5Hlh7rml6Xlv5dcblx0ICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5FWFBfRFVSQVRJT04pIHtcblx0ICAgICAgICAgICAgICAgIHYudmlld2FiaWxpdHlSYXRlID0gaXNWaWV3YWJpbGl0eVJhdGUgPyB2aWV3YWJpbGl0eVJhdGUgOiB2aWV3YWJpbGl0eVJhdGVJbldpbmRvdztcblx0ICAgICAgICAgICAgICAgIHYudmlld2FiaWxpdHkgPSBpc1ZpZXdhYmlsaXR5UmF0ZSA/ICdpbnRlcnNlY3Rpb24nIDogJ2ZpbGx3aW5kb3cnO1xuXHQgICAgICAgICAgICAgICAgdi5zdGF0dXMgPSAyO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB1dGlsX2FjX2FlLnVwZGF0ZUV4cEhhc2hNYXAobG9na2V5LCB2LCAnVVBEQVRFJyk7XG5cdCAgICAgICAgICAgICAgKytzaXplO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzaXplO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOWcqGZpbHRlclN0YXJ0RXhwb3N1cmVTaXpl5ou/5Yiw5Yiw55qE5Yid5aeL5pud5YWJ5YWD57Sg5YiX6KGo5Z+656GA5LiK77yM5LqM5qyh5Yik5pat5pud5YWJ5YWD57Sg5piv5ZCm5piv5pyJ5pWI5pud5YWJ77yM5aaC5oyB57ut5pud5YWJMjAw5q+r56eSXG5cdCAqIOacieaViOabneWFieeahOWFg+e0oOeKtuaAge+8iHN0YXR1c++8ieWxnuaAp+WAvOaUueS4uuKAnDLigJ3vvIzml6DmlYjmm53lhYnnmoTlhYPntKDnirbmgIHlsZ7mgKflgLzmlLnkuLrigJww4oCdXG5cdCAqIOW5tui/lOWbnuacrOasoeS6i+S7tuinpuWPkeeahOabneWFieWFg+e0oOeahOadoeaVsFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwb3N1cmVUaW1lIC8vIG9uc2Nyb2xsLG9ucmVzaXpl5Yid5aeL5pud5YWJ5pe26Ze0XG5cdCAqIEByZXR1cm4ge051bWJlcn0gc2l6ZSAvLyDmnKzmrKHkuovku7bop6blj5HnmoTmm53lhYnlhYPntKDnmoTmnaHmlbBcblx0ICovXG5cdGV4cG9ydHMuZmlsdGVyRW5kRXhwb3N1cmVTaXplID0gZnVuY3Rpb24oZXhwb3N1cmVUaW1lLCBldmVudFR5cGUpIHtcblx0ICB2YXIgc2l6ZSA9IDA7XG5cdCAgLy8gdmFyIHdpblBhcmFtcyA9IHV0aWxFbGVtZW50QWMuZ2V0V2luUGFyYW1zKCk7IC8vIFRPRE8gLSDpqozor4HmgKfog73pl67popjvvIzlgZrmiJDlj6/phY3vvIzpg6jliIbkuJrliqHlpoLmraTlpITnkIZcblx0ICAvLyB2YXIgd2luUG9zaXRpb25zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5Qb3NpdGlvbnMod2luUGFyYW1zKTtcblx0ICBpZiAoIXdpblBvc2l0aW9ucykge1xuXHQgICAgd2luUG9zaXRpb25zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5Qb3NpdGlvbnMoKTtcblx0ICB9XG5cdFxuXHQgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICB2YXIgX2FjSGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5fYWNIYXNoTWFwIHx8IHt9O1xuXHQgIGZvciAodmFyIGxvZ2tleSBpbiBfYWNIYXNoTWFwKSB7XG5cdCAgICB2YXIgZWxlX3MgPSBfYWNIYXNoTWFwW2xvZ2tleV0gfHwgW107XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZV9zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG5cdCAgICAgIGlmICh2LnN0YXR1cyA9PT0gMSAmJiB2LmV4cG9zdXJlVGltZSA9PT0gZXhwb3N1cmVUaW1lICYmIHYuZXhwQ29uZmlnKSB7XG5cdCAgICAgICAgdi5ldmVudFR5cGUgPSBldmVudFR5cGU7XG5cdCAgICAgICAgLy8g5Yik5pat5Yiw5pyJcG9zaXRpb25TZWxlY3Rvcu+8jOW5tuS4lOW9k+WJjeWFg+e0oOWkhOS6juebuOWvueWumuS9jeOAgee7neWvueWumuS9jeetieWFg+e0oOWGhea7muWKqOaXtu+8iGNsaWVudEhlaWdodCA+IHNjcm9sbEhlaWdodClcblx0ICAgICAgICBpZiAodi5leHBDb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgICAgLy8gd2luUGFyYW1zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5QYXJhbXModi5leHBDb25maWcucG9zaXRpb25TZWxlY3Rvcik7IC8vIFRPRE8gLSDpqozor4HmgKfog73pl67popjvvIzlgZrmiJDlj6/phY3vvIzpg6jliIbkuJrliqHlpoLmraTlpITnkIZcblx0ICAgICAgICAgIC8vIHdpblBvc2l0aW9ucyA9IHV0aWxFbGVtZW50QWMuZ2V0V2luUG9zaXRpb25zKHdpblBhcmFtcyk7XG5cdCAgICAgICAgICB3aW5Qb3NpdGlvbnMgPSB1dGlsRWxlbWVudEFjLmdldFdpblBvc2l0aW9ucyh2LmV4cENvbmZpZy5wb3NpdGlvblNlbGVjdG9yKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8g6I635Y+W5YWD57Sg55qE5Y+v6KeG546H77yI5Zyo5Y+v6KeG56qX5YaF55qE5Y+v6KeB5q+U5L6L77yJXG5cdCAgICAgICAgdmFyIHZpZXdhYmlsaXR5UmF0ZSA9IHV0aWxFbGVtZW50QWMud3JhcFZpZXdhYmlsaXR5UmF0ZSh3aW5Qb3NpdGlvbnMsIHYsIEFDX1JBVEUpO1xuXHQgICAgICAgIHZhciBpc1JlY29yZCA9IHV0aWxFbGVtZW50QWMuY2hlY2tJc1JlY29yZCh2LmVsZW1lbnQsIHYuaGFzaF92YWx1ZSwgJ19hcGx1c19hdXRvX2V4cCcpO1xuXHQgICAgICAgIC8vIOWcqOWPr+inhueql+WGhe+8jOS4lGRvbeiKgueCueS4iuayoeacieW3suabneWFieagh+ivhu+8jOS4lOS4jeWcqOWGheWtmOS4reaIluWcqOWGheWtmOS4reS9hueKtuaAgeaYrzDvvIgw5Li65Yid5aeL54q25oCB77yJXG5cdCAgICAgICAgaWYgKHZpZXdhYmlsaXR5UmF0ZSAmJiAhaXNSZWNvcmQpIHtcblx0ICAgICAgICAgIHYudmlld2FiaWxpdHlSYXRlID0gdmlld2FiaWxpdHlSYXRlO1xuXHQgICAgICAgICAgdi5zdGF0dXMgPSAyOyAvLyDliJ3op4HlhYl4eHjmr6vnp5LlkI7kvp3nhLbop4HlhYnnirbmgIFcblx0ICAgICAgICAgIHV0aWxfYWNfYWUudXBkYXRlRXhwSGFzaE1hcChsb2drZXksIHYsICdVUERBVEUnKTtcblx0ICAgICAgICAgICsrc2l6ZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdi5zdGF0dXMgPSAwOyAvLyDliJ3op4HlhYl4eHjmr6vnp5LlkI7kuI3lho3op4HlhYnvvIzmlLnkuLrliJ3lp4vnirbmgIFcblx0ICAgICAgICAgIHYuZXhwb3N1cmVUaW1lID0gJyc7XG5cdCAgICAgICAgICB1dGlsX2FjX2FlLnVwZGF0ZUV4cEhhc2hNYXAobG9na2V5LCB2LCAnVVBEQVRFJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzaXplO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgdXRpbEV4cG9zdXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7XG5cdHZhciB1dGlsX2FjX2FlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0XG5cdC8qKlxuXHQgKiDor6Xmlrnms5XooqtvbnNjcm9sbCzmiJbooqtvbnJlc2l6ZeWbnuiwg+WHveaVsOiwg+eUqO+8jOajgOmqjOWFg+e0oOaYr+WQpuabneWFiVxuXHQgKi9cblx0dmFyIGhhbmRsZXJfZG9tX2V4cG9zdXJlID0gZnVuY3Rpb24oZSkge1xuXHQgIHZhciBQVUJfS0VZID0gJ0FQTFVTX0FFX0VYUE9TVVJFX0NIQU5HRSc7XG5cdCAgdmFyIGV2ZW50VHlwZSA9IGUgJiYgZS50eXBlID8gZS50eXBlIDogJ2luaXQnO1xuXHQgIHZhciBleHBvc3VyZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0ICB2YXIgc2l6ZSA9IHV0aWxFeHBvc3VyZS5maWx0ZXJTdGFydEV4cG9zdXJlU2l6ZShleHBvc3VyZVRpbWUsIGV2ZW50VHlwZSk7XG5cdCAgLy8g5a2Y5Zyo5pud5YWJ5YWD57Sg77yM562J5b6FIHgg5q+r56eS5ZCO5LqM5qyh5Yik5pat5pud5YWJ5pyJ5pWI5oCnXG5cdCAgaWYgKHNpemUgPiAwICkge1xuXHQgICAgaWYgKGNvbmZpZy5FWFBfRFVSQVRJT04pIHtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgIHNpemUgPSB1dGlsRXhwb3N1cmUuZmlsdGVyRW5kRXhwb3N1cmVTaXplKGV4cG9zdXJlVGltZSwgZXZlbnRUeXBlKTtcblx0ICAgICAgICBpZiAoc2l6ZSA+IDApIHtcblx0ICAgICAgICAgIC8vIOWtmOWcqOacieaViOabneWFieWFg+e0oOeahOaDheWGteS4i++8jOWPkeWwhOabneWFieS6i+S7tu+8jOe7mXdhdGNoUmVjb3JkLmpz6L+Z5Liq546v6IqC5aSE55CGXG5cdCAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIucHVibGlzaChQVUJfS0VZLCB7XG5cdCAgICAgICAgICAgIHNpemU6IHNpemUsXG5cdCAgICAgICAgICAgIGV2ZW50VHlwZTogZXZlbnRUeXBlXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIGNvbmZpZy5FWFBfRFVSQVRJT04pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnB1Ymxpc2goUFVCX0tFWSwge1xuXHQgICAgICAgIHNpemU6IHNpemUsXG5cdCAgICAgICAgZXZlbnRUeXBlOiBldmVudFR5cGVcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRocm90dGxlX2hhbmRsZXJfZXhwb3N1cmUgPSB1dGlsX2FjX2FlLnRocm90dGxlKGZ1bmN0aW9uIChlKSB7XG5cdCAgaGFuZGxlcl9kb21fZXhwb3N1cmUoZSk7XG5cdH0sIDEwMCk7XG5cdFxuXHR2YXIgc2VsZWN0b3JzID0ge307XG5cdFxuXHQvKipcblx0ICog55uR5ZCsZG9t5Y+Y5YyW77yM5pyJ5Y+Y5YyW5omn6KGM5Zue6LCDXG5cdCAqIEBwYXJhbSB7aGFuZGxlcl9kb21fY2hhbmdlfSBjYlxuXHQgKi9cblx0dmFyIHdhdGNoX3Bvc2l0aW9uc2VsZWN0b3JfY2hhbmdlID0gZnVuY3Rpb24gKGV4cENvbmZpZywgdHlwZSkge1xuXHQgIGlmIChleHBDb25maWcgJiYgZXhwQ29uZmlnLmZvckVhY2ggJiYgT2JqZWN0LmtleXMgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcikge1xuXHQgICAgZXhwQ29uZmlnLmZvckVhY2goZnVuY3Rpb24odil7XG5cdCAgICAgIGlmICh2LnBvc2l0aW9uU2VsZWN0b3IgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih2LnBvc2l0aW9uU2VsZWN0b3IpKSB7XG5cdCAgICAgICAgc2VsZWN0b3JzW3YucG9zaXRpb25TZWxlY3Rvcl0gPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHZhciB0bXBfc2VsZWN0b3JzID0gT2JqZWN0LmtleXMoc2VsZWN0b3JzKTtcblx0ICAgIHRtcF9zZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbihzKXtcblx0ICAgICAgaWYgKHV0aWxFdmVudFt0eXBlXSkge1xuXHQgICAgICAgIHV0aWxFdmVudFt0eXBlXShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpLCAnc2Nyb2xsJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgIHRocm90dGxlX2hhbmRsZXJfZXhwb3N1cmUoZSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDnm5HlkKxkb23lj5jljJbvvIzmnInlj5jljJbmiafooYzlm57osINcblx0ICogQHBhcmFtIHtoYW5kbGVyX2RvbV9jaGFuZ2V9IGNiXG5cdCAqL1xuXHRleHBvcnRzLndhdGNoX2V4cG9zdXJlX2NoYW5nZSA9IGZ1bmN0aW9uKGV4cENvbmZpZykge1xuXHQgIC8vIHN0ZXAxIOebkeWQrOesrOS4gOasoWRvbWNoYW5nZeWPkeWwhOeahOa2iOaBr++8jOWBmuesrOS4gOasoemqjOivgeabneWFieeahOWkhOeQhlxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ0FQTFVTX0FFX0RPTV9DSEFOR0UnLCBoYW5kbGVyX2RvbV9leHBvc3VyZSk7XG5cdFxuXHQgIC8vIHN0ZXAyIOebkeWQrOWFg+e0oOabneWFiVxuXHQgIHV0aWxFdmVudC5vbih3aW5kb3csICd0b3VjaG1vdmUnLCB0aHJvdHRsZV9oYW5kbGVyX2V4cG9zdXJlKTtcblx0ICB1dGlsRXZlbnQub24od2luZG93LCAnc2Nyb2xsJywgdGhyb3R0bGVfaGFuZGxlcl9leHBvc3VyZSk7XG5cdCAgdXRpbEV2ZW50Lm9uKHdpbmRvdywgJ3Jlc2l6ZScsIGhhbmRsZXJfZG9tX2V4cG9zdXJlKTtcblx0ICB3YXRjaF9wb3NpdGlvbnNlbGVjdG9yX2NoYW5nZShleHBDb25maWcsICdvbicpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uKGV4cENvbmZpZykge1xuXHQgIHV0aWxFdmVudC51bih3aW5kb3csICd0b3VjaG1vdmUnLCB0aHJvdHRsZV9oYW5kbGVyX2V4cG9zdXJlKTtcblx0ICB1dGlsRXZlbnQudW4od2luZG93LCAnc2Nyb2xsJywgdGhyb3R0bGVfaGFuZGxlcl9leHBvc3VyZSk7XG5cdCAgdXRpbEV2ZW50LnVuKHdpbmRvdywgJ3Jlc2l6ZScsIGhhbmRsZXJfZG9tX2V4cG9zdXJlKTtcblx0ICB3YXRjaF9wb3NpdGlvbnNlbGVjdG9yX2NoYW5nZShleHBDb25maWcsICd1bicpO1xuXHR9O1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDY0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB0cmFja2VyVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBlYWNoTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdC8vIHZhciB1dGlsRWxlbWVudEFjID0gcmVxdWlyZSgnLi91dGlsL3V0aWxFbGVtZW50QWMnKTtcblx0dmFyIHV0aWxfYWNfYWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTtcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHRcblx0Ly8gc3Bt5Yy65Z2X6Ieq5Yqo5pud5YWJ6K6+572uIGh0dHBzOi8vYW9uZS5hbGliYWJhLWluYy5jb20vcmVxLzIxODAzMzk5XG5cdGZ1bmN0aW9uIHByb2Nlc3NTUE1DRCAoZWx0eXBlLCBlbGVtZW50LCBzcG0pIHtcblx0ICB2YXIgc3BtQyA9ICcwJztcblx0ICBpZiAoc3BtKSB7XG5cdCAgICBpZiAoZWx0eXBlID09PSAnc3BtYycpIHtcblx0ICAgICAgdmFyIHNwbUFyciA9IHNwbS5zcGxpdCgnLicpO1xuXHQgICAgICBzcG1DID0gc3BtQXJyWzJdID8gc3BtQXJyWzJdIDogc3BtQXJyWzNdO1xuXHQgICAgICAvLyDlj6/op4bljJbln4vngrnlnLrmma/kuIvlpJrliKTmlq3kuIDmraXkuI3og73mmK9p5oiW6ICFZOW8gOWktOaLvOaOpeaVsOWtl+eahOaDheWGte+8jOWboOS4uui/meS4quaYr3NwbURcblx0ICAgICAgaWYgKC9eKFxcaXxcXGQpWzAtOV0rJC8udGVzdChzcG1DKSkge1xuXHQgICAgICAgIHNwbUMgPSAnMCc7XG5cdCAgICAgIH1cblx0ICAgICAgc3BtID0gW3NwbUFyclswXSwgc3BtQXJyWzFdLCBzcG1DXS5qb2luKCcuJyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHNwbSA9ICcnO1xuXHQgICAgdmFyIGdfU1BNID0gd2luZG93LmdfU1BNIHx8IHt9O1xuXHQgICAgaWYgKHR5cGVvZiBnX1NQTS5nZXRQYXJhbSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB2YXIgc3BtT2JqID0gZ19TUE0uZ2V0UGFyYW0oZWxlbWVudCk7XG5cdCAgICAgIC8vIGh0dHBzOi8vYW9uZS5hbGliYWJhLWluYy5jb20vcmVxLzIxODAzMzk5IEDkupHmnbAgMjAxOS0wOC0wOemcgOaxglxuXHQgICAgICBpZiAoZWx0eXBlID09PSAnc3BtYycpIHtcblx0ICAgICAgICBzcG1DID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3BtJykgfHwgJzAnO1xuXHQgICAgICAgIHNwbSA9IFtzcG1PYmouYSwgc3BtT2JqLmIsIHNwbUNdLmpvaW4oJy4nKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzcG0gPSBbc3BtT2JqLmEsIHNwbU9iai5iLCBzcG1PYmouYywgc3BtT2JqLmRdLmpvaW4oJy4nKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gc3BtO1xuXHR9XG5cdFxuXHQvKipcblx0ICog57uE6KOF5omT54K55Y+C5pWwXG5cdCAqIGxvZ2tleUNvbnRhaW5lcuaVsOaNruagvOW8j1xuXHQgKiBsb2drZXkxOiBbcGFyYW1PYmoxMSwgcGFyYW1PYmoxMiwgLi4uXVxuXHQgKiBsb2drZXkyOiBbcGFyYW1PYmoyMSwgcGFyYW1PYmoyMiwgLi4uXVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IGxvZ2tleUNvbnRhaW5lclxuXHQgKi9cblx0dmFyIGZpbHRlclJlY29yZHMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgaXNBcGx1c0RlYnVnID0gYXBsdXMuYXBsdXNEZWJ1Zztcblx0ICB2YXIgbG9na2V5Q29udGFpbmVyID0ge307XG5cdCAgdmFyIHJlcXVlc3RfY2ZnID0gY29uZmlnLmdldERlZmF1bHRSZXF1ZXN0Q2ZnKCk7XG5cdFxuXHQgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICB2YXIgX2FjSGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5fYWNIYXNoTWFwIHx8IHt9O1xuXHQgIGVhY2hNYXAoX2FjSGFzaE1hcCwgZnVuY3Rpb24gKGxvZ2tleSwgYXJyKSB7XG5cdCAgICAvLyDmn6Xor6LmnInmlYjmm53lhYnlhYPntKDvvIjnirbmgIHkuLrigJwy4oCd77yJ77yM5pS+5YWl5b6F5omT54K56ZuG5ZCIbG9na2V5Q29udGFpbmVyXG5cdCAgICB2YXIgZWxlX3MgPSBhcnIgfHwgW107XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWxlX3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgdmFyIHYgPSBlbGVfc1tpXSB8fCB7fTtcblx0ICAgICAgaWYgKHYuc3RhdHVzID09PSAyKSB7XG5cdCAgICAgICAgdi5zdGF0dXMgPSAzOyAvLyDlh4blpIfmiZPngrnnirbmgIFcblx0ICAgICAgICB1dGlsX2FjX2FlLnVwZGF0ZUV4cEhhc2hNYXAobG9na2V5LCB2LCAnVVBEQVRFJyk7XG5cdCAgICAgICAgX2FwbHVzX2F1dG9fZXhwLmV4cF90aW1lcysrO1xuXHRcblx0ICAgICAgICAvLyDor7vlj5booqvmm53lhYnlhYPntKDkuIrnmoTnibnlrprlsZ7mgKfvvIzov5nkupvnibnlrprlsZ7mgKfmmK/pgJrov4fmm53lhYnln4vngrnkuovlhYjln4vov5vljrvnmoRcblx0ICAgICAgICB2YXIgZXhwQ29uZmlnID0gdi5leHBDb25maWcgfHwge307XG5cdCAgICAgICAgdmFyIHNwbV9hYiA9IGdvbGRsb2cuc3BtX2FiID8gZ29sZGxvZy5zcG1fYWIuam9pbignLicpIDogJzAuMC4wLjAnOyAvLyDkv53lupVzcG1BQlxuXHQgICAgICAgIHZhciBzcG0gPSBwcm9jZXNzU1BNQ0QoZXhwQ29uZmlnLmVsdHlwZSwgdi5lbGVtZW50KSB8fCBzcG1fYWI7XG5cdFxuXHQgICAgICAgIHZhciBzY20gPSAnJztcblx0ICAgICAgICB2YXIgX3JhdGU7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHZhciBfcmF0ZU51bSA9IG5ldyBOdW1iZXIodi52aWV3YWJpbGl0eVJhdGUpO1xuXHQgICAgICAgICAgX3JhdGUgPSBfcmF0ZU51bS50b0ZpeGVkKDIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIF9yYXRlID0gdi52aWV3YWJpbGl0eVJhdGU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBleGFyZ3Nfb3JpZ2luID0ge1xuXHQgICAgICAgICAgLy8gJ194cGF0aCc6IHV0aWxfYWNfYWUuZ2V0WFBhdGgodi5lbGVtZW50KSxcblx0ICAgICAgICAgICdfdyc6IHYud2lkdGgsXG5cdCAgICAgICAgICAnX2gnOiB2LmhlaWdodCxcblx0ICAgICAgICAgICdfeCc6IHYueCxcblx0ICAgICAgICAgICdfeSc6IHYueSxcblx0ICAgICAgICAgICdfcmF0ZSc6IF9yYXRlLFxuXHQgICAgICAgICAgJ192aWV3YWJpbGl0eSc6IHYudmlld2FiaWxpdHksXG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKHR5cGVvZiB2LnVzZXJQYXJhbXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIHYudXNlclBhcmFtcy51c2VyZGF0YSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgZXhhcmdzX29yaWdpbiA9IHV0aWxEYXNoLmFzc2lnbihleGFyZ3Nfb3JpZ2luLCB2LnVzZXJQYXJhbXMudXNlcmRhdGEpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8g5Y+v6KeG5YyW5Z+L54K55Lya5Yqo5oCB5rOo5YWlc3Bt44CBc2Nt77yM6K+m6KeBIC9zL3NyYy9hcGx1c19wbHVnaW4vbGliX3dlYnZ0L0xvZ0cuanM6IGdldEF0dHJBcmdzXG5cdCAgICAgICAgICBpZiAodi51c2VyUGFyYW1zLnNwbSkge1xuXHQgICAgICAgICAgICBzcG0gPSBwcm9jZXNzU1BNQ0QoZXhwQ29uZmlnLmVsdHlwZSwgJycsIHYudXNlclBhcmFtcy5zcG0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKHYudXNlclBhcmFtcy5zY20pIHtcblx0ICAgICAgICAgICAgc2NtID0gdi51c2VyUGFyYW1zLnNjbTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgXG5cdCAgICAgICAgaWYgKHV0aWxfYWNfYWUuaXNNZXRob2QoZXhwQ29uZmlnLm1ldGhvZCkgfHwgdXRpbF9hY19hZS5pc1BrZ1NpemUoZXhwQ29uZmlnLnBrZ1NpemUpKSB7XG5cdCAgICAgICAgICByZXF1ZXN0X2NmZyA9IHV0aWxfYWNfYWUuZmlsdGVyRXhwQ29uZmlnUmVxdWVzdENmZyhleHBDb25maWcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcGFyYW1zID0ge1xuXHQgICAgICAgICAgc2NtOiBzY20sXG5cdCAgICAgICAgICBzcG06IHNwbSxcblx0ICAgICAgICAgIGFwbHVzQ29udGVudElkOiAnJ1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIGV4YXJncyA9IHV0aWxfYWNfYWUuZmlsbFByb3BzRGF0YShleHBDb25maWcsIHYuZWxlbWVudCwgZXhhcmdzX29yaWdpbik7XG5cdCAgICAgICAgZXhhcmdzID0gdXRpbF9hY19hZS5maWxsRmlsdGVyRGF0YShleHBDb25maWcsIHYuZWxlbWVudCwgZXhhcmdzX29yaWdpbik7XG5cdCAgICAgICAgZXhhcmdzID0gdXRpbERhc2guYXNzaWduKGV4YXJncywgdXRpbF9hY19hZS5nZXREYXRhVHJhY2tlclBhcmFtcyh2LmVsZW1lbnQpKTtcblx0XG5cdCAgICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgICAgcGFyYW1zLmV4YXJncyA9IGV4YXJncztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdmFyIHNwbURhdGEgPSB1dGlsX2FjX2FlLmZpbGxTcG1EYXRhKGV4cENvbmZpZywgdi5lbGVtZW50LCBleGFyZ3Nfb3JpZ2luKTtcblx0ICAgICAgICAgIGV4YXJncyA9IHV0aWxEYXNoLmFzc2lnbihleGFyZ3MsIHNwbURhdGEpO1xuXHQgICAgICAgICAgcGFyYW1zID0gZXhhcmdzO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWxvZ2tleUNvbnRhaW5lcltsb2drZXldKSB7XG5cdCAgICAgICAgICBsb2drZXlDb250YWluZXJbbG9na2V5XSA9IFtdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBsb2drZXlDb250YWluZXJbbG9na2V5XS5wdXNoKHBhcmFtcyk7XG5cdCAgICAgICAgaXNBcGx1c0RlYnVnICYmIHVsb2coKS53KCdsb2drZXkgPSAnICsgbG9na2V5ICsgJywgcGFyYW1zID0gJyArIGRlY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShwYXJhbXMpKSk7XG5cdCAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgIC8vICAgbXNnOiAnbG9na2V5ID0gJyArIGxvZ2tleSArICcsIHBhcmFtcyA9ICcgKyBkZWNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSlcblx0ICAgICAgICAvLyB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiB7XG5cdCAgICBsb2drZXlDb250YWluZXI6IGxvZ2tleUNvbnRhaW5lcixcblx0ICAgIHJlcXVlc3RfY2ZnOiByZXF1ZXN0X2NmZ1xuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgZG9fY2xvbmVfYXJyID0gZnVuY3Rpb24gKGVsZXMpIHtcblx0ICB2YXIgcnMgPSBbXTtcblx0ICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWxlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgdmFyIG9iaiA9IGVsZXNbaV0gfHwge307XG5cdCAgICB2YXIgdG1wID0ge307XG5cdCAgICBlYWNoTWFwKG9iaiwgZnVuY3Rpb24gKGssIHZhbHVlKSB7XG5cdCAgICAgIGlmIChrICE9PSAnZWxlbWVudCcpIHtcblx0ICAgICAgICB0bXBba10gPSB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICB2YXIgdG1wMiA9IHV0aWxEYXNoLmNsb25lRGVlcCh0bXApO1xuXHQgICAgdG1wMi5lbGVtZW50ID0gb2JqLmVsZW1lbnQ7XG5cdCAgICBycy5wdXNoKHRtcDIpO1xuXHQgIH1cblx0ICByZXR1cm4gcnM7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyBvcHRpb25zXG5cdCAqL1xuXHR2YXIgaGFuZGxlclJlY29yZCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG5cdCAgdmFyIF9hY0hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuX2FjSGFzaE1hcCB8fCB7fTtcblx0ICB2YXIgY2xlYXJfbGlzdCA9IFtdO1xuXHQgIGVhY2hNYXAoX2FjSGFzaE1hcCwgZnVuY3Rpb24gKGxvZ2tleSwgb2JqKSB7XG5cdCAgICAvLyDmn6Xor6LmnInmlYjmm53lhYnlhYPntKDvvIjnirbmgIHkuLrigJwy4oCd77yJ77yM5pS+5YWl5b6F5omT54K56ZuG5ZCIbG9na2V5Q29udGFpbmVyXG5cdCAgICB2YXIgZWxlX3MgPSBkb19jbG9uZV9hcnIob2JqKSB8fCBbXTtcblx0ICAgIGZvciAodmFyIHggPSAwLCBsZW4gPSBlbGVfcy5sZW5ndGg7IHggPCBsZW47IHgrKykge1xuXHQgICAgICB2YXIgdiA9IGVsZV9zW3hdIHx8IHt9O1xuXHQgICAgICB2YXIgdl9vcmlnaW4gPSBvYmpbeF0gfHwge307XG5cdCAgICAgIC8vIOafpeivouW3suaIkOWKn+aJk+eCueeahOWFg+e0oO+8jOWwhuWFtuS7jmhhc2htYXDkuK3np7vpmaTvvIzlubbkv67mlLlkb23oioLngrlcblx0ICAgICAgaWYgKHYuc3RhdHVzID09PSAzKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIC8vIOabtOaWsOWFg+e0oOWxnuaAp1xuXHQgICAgICAgICAgdXRpbF9hY19hZS5zZXRSZWNvcmRTdWNjZXNzKHZfb3JpZ2luLCBjb25maWcuREFUQV9BUExVU19BRV9LRVkpO1xuXHQgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnB1Ymxpc2goJ0FQTFVTX0VMRU1FTlRfRVhQT1NVUkUnLCB7XG5cdCAgICAgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgICAgICB2X29yaWdpbjogdl9vcmlnaW4sXG5cdCAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgY2xlYXJfbGlzdC5wdXNoKHZfb3JpZ2luKTtcblx0ICAgICAgICB9IGNhdGNoIChlcnIpe1xuXHQgICAgICAgICAgdWxvZygpLncoZXJyICYmIGVyci5tZXNzYWdlKTtcblx0ICAgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgIC8vICAgbXNnOiBlcnIgJiYgZXJyLm1lc3NhZ2Vcblx0ICAgICAgICAgIC8vIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgd2hpbGUgKGNsZWFyX2xpc3QubGVuZ3RoID4gMCkge1xuXHQgICAgICB1dGlsX2FjX2FlLnVwZGF0ZUV4cEhhc2hNYXAobG9na2V5LCBjbGVhcl9saXN0LnBvcCgpLCAnQ0xFQVInKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblx0XG5cdHZhciBoYW5kbGVyO1xuXHR2YXIgcmVjb3JkUXVldWUgPSBbXTtcblx0dmFyIHByb2Nlc3NSZWNvcmRRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICBoYW5kbGVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHJlY29yZFF1ZXVlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaChyZWNvcmRRdWV1ZS5wb3AoKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjbGVhckludGVydmFsKGhhbmRsZXIpO1xuXHQgICAgICBoYW5kbGVyID0gbnVsbDtcblx0ICAgIH1cblx0ICB9LCAyMDApO1xuXHR9O1xuXHRcblx0dmFyIGZsYWc7XG5cdGZ1bmN0aW9uIHdhdGNoVW5sb2FkUmVjb3JkICgpIHtcblx0ICBpZiAoIWZsYWcpIHtcblx0ICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgYXBsdXMub24od2luZG93LCAnYmVmb3JldW5sb2FkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBjbGVhckludGVydmFsKGhhbmRsZXIpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29yZFF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYXBsdXNfcXVldWUucHVzaChyZWNvcmRRdWV1ZVtpXSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIOiusOW9leabneWFieWFg+e0oO+8jOaJk+WMheWPkemAgeaXpeW/lyjmr48xMOS4quS4gOe7hClcblx0ICogbW9kaWZ5IGJ5IEBSaWNoYXJkfOiwi+WjqyBpbiAyMDE3LTExLTI4IOWinuWKoOS4gOS4quWFpeWPgu+8mlxuXHQgKiAgICAgIHJlcXVlc3RfY2Zn77yaIOaPkOS+m++8muKAnTHjgIHml6Xlv5fmiZPljIXmnaHmlbBwa2dTaXplLCAy44CB5pel5b+X5Y+R6YCB5pa55byPbWV0aG9k5Lik5Liq6YWN572u6aG54oCcXG5cdCAqIEBwYXJhbXMgcGFyYW1zIHtcblx0ICogICAgbG9na2V5Q29udGFpbmVyIHtBcnJheX1cblx0ICogICAgcmVxdWVzdF9jZmcge09iamVjdH1cblx0ICogIH1cblx0ICogQHBhcmFtcyBvcHRpb25zIHtcblx0ICogICBzaXplIHtOdW1iZXJ9IGV4cG91c2UgZWxlbWVudHMgbnVtYmVyXG5cdCAqICAgZXZlbnRUeXBlIHtOdW1iZXJ9IGV4cG91c2UgZXZlbnQgdHlwZSAoaW5pdDp3YXRjaERPTSwgc2Nyb2xsLCB0b3VjaG1vdmUgLi4uKVxuXHQgKiB9XG5cdCAqXG5cdCAqL1xuXHR2YXIgcmVjb3JkQXBsdXNBdEZvckFsaSA9IGZ1bmN0aW9uKHBhcmFtcywgb3B0aW9ucywgY2IpIHtcblx0ICB2YXIgbG9na2V5Q29udGFpbmVyID0gcGFyYW1zLmxvZ2tleUNvbnRhaW5lciB8fCBbXTtcblx0ICB2YXIgcmVxdWVzdF9jZmcgPSBwYXJhbXMucmVxdWVzdF9jZmcgfHwge307XG5cdCAgdHJhY2tlclV0aWwud3JhcChmdW5jdGlvbigpe1xuXHQgICAgZWFjaE1hcChsb2drZXlDb250YWluZXIsIGZ1bmN0aW9uIChfbG9na2V5LCBsb2drZXlfdmFsdWVzKSB7XG5cdCAgICAgIGlmIChsb2drZXlfdmFsdWVzICYmIGxvZ2tleV92YWx1ZXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIHZhciBpID0gMDtcblx0ICAgICAgICB3aGlsZSAoaSA8IGxvZ2tleV92YWx1ZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgICB2YXIgZ29rZXkgPSBbXTtcblx0ICAgICAgICAgIC8vIHZhciBleHBvdXN1cmVQYXJhbXMgPSBKU09OLnN0cmluZ2lmeShsb2drZXlfdmFsdWVzKTsgLy8obG9na2V5X3ZhbHVlcy5zbGljZShpLCBpICsgU0laRSkpO1xuXHQgICAgICAgICAgdmFyIGV4cG91c3VyZVBhcmFtcyA9IEpTT04uc3RyaW5naWZ5KGxvZ2tleV92YWx1ZXMuc2xpY2UoaSwgaSArIHJlcXVlc3RfY2ZnLnBrZ1NpemUpKTtcblx0ICAgICAgICAgIGdva2V5LnB1c2goJ2V4cGRhdGE9JyArIGV4cG91c3VyZVBhcmFtcyk7XG5cdCAgICAgICAgICBnb2tleS5wdXNoKCdfaXNfYXV0b19leHA9MScpO1xuXHQgICAgICAgICAgZ29rZXkucHVzaCgnX2V2ZW50VHlwZT0nICsgb3B0aW9ucy5ldmVudFR5cGUpO1xuXHQgICAgICAgICAgZ29rZXkucHVzaCgnX21ldGhvZD0nICsgcmVxdWVzdF9jZmcubWV0aG9kKTtcblx0ICAgICAgICAgIGdva2V5LnB1c2goJ19wa2dTaXplPScgKyByZXF1ZXN0X2NmZy5wa2dTaXplKTtcblx0ICAgICAgICAgIFxuXHQgICAgICAgICAgdmFyIG1ldGhvZCA9IHJlcXVlc3RfY2ZnLm1ldGhvZCB8fCAnUE9TVCc7XG5cdCAgICAgICAgICByZWNvcmRRdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICAgICAgYXJndW1lbnRzOiBbX2xvZ2tleSwgJ0VYUCcsIGdva2V5LmpvaW4oJyYnKSwgbWV0aG9kXVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICBpICs9IHJlcXVlc3RfY2ZnLnBrZ1NpemU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNiKG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9LCAncmVjb3JkQXBsdXNBdEZvckFsaScpO1xuXHR9O1xuXHRcblx0dmFyIHJlY29yZEFwbHVzQXRGb3JBbGl5dW4gPSBmdW5jdGlvbiAocGFyYW1zLCBvcHRpb25zLCBjYikge1xuXHQgIHZhciBsb2drZXlDb250YWluZXIgPSBwYXJhbXMubG9na2V5Q29udGFpbmVyIHx8IFtdO1xuXHQgIHZhciByZXF1ZXN0X2NmZyA9IHBhcmFtcy5yZXF1ZXN0X2NmZyB8fCB7fTtcblx0ICB0cmFja2VyVXRpbC53cmFwKGZ1bmN0aW9uKCl7XG5cdCAgICBlYWNoTWFwKGxvZ2tleUNvbnRhaW5lciwgZnVuY3Rpb24gKF9sb2drZXksIGxvZ2tleV92YWx1ZXMpIHtcblx0ICAgICAgaWYgKGxvZ2tleV92YWx1ZXMgJiYgbG9na2V5X3ZhbHVlcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgdmFyIGkgPSAwO1xuXHQgICAgICAgIHdoaWxlIChpIDwgbG9na2V5X3ZhbHVlcy5sZW5ndGgpIHtcblx0ICAgICAgICAgIHZhciBnb2tleSA9IHtcblx0ICAgICAgICAgICAgX2lzX2F1dG9fZXhwOiAxLFxuXHQgICAgICAgICAgICBfZXZlbnRUeXBlOiBvcHRpb25zLmV2ZW50VHlwZSxcblx0ICAgICAgICAgICAgX21ldGhvZDogcmVxdWVzdF9jZmcubWV0aG9kLFxuXHQgICAgICAgICAgICBpc19hdXRvOiAxXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgICAgdmFyIGV4cG91c3VyZVBhcmFtcyA9IGxvZ2tleV92YWx1ZXNbaV07XG5cdCAgICAgICAgICBmb3IgKHZhciBrIGluIGV4cG91c3VyZVBhcmFtcykgeyAgXG5cdCAgICAgICAgICAgIGdva2V5W2tdID0gZXhwb3VzdXJlUGFyYW1zW2tdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgdmFyIG1ldGhvZCA9IHJlcXVlc3RfY2ZnLm1ldGhvZCB8fCAnUE9TVCc7XG5cdCAgICAgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICAgICAgYXJndW1lbnRzOiBbX2xvZ2tleSwgJ0VYUCcsIGdva2V5LCBtZXRob2RdXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGkgKz0gMTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2Iob3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH0sICdyZWNvcmRBcGx1c0F0Rm9yQWxpeXVuJyk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyBvcHRpb25zIHtcblx0ICogICBzaXplIHtOdW1iZXJ9IGV4cG91c2UgZWxlbWVudHMgbnVtYmVyXG5cdCAqICAgZXZlbnRUeXBlIHtOdW1iZXJ9IGV4cG91c2UgZXZlbnRUeXBlIChpbml0OndhdGNoRE9NLCBzY3JvbGwsIHRvdWNobW92ZSAuLi4pXG5cdCAqIH1cblx0ICovXG5cdHZhciBoYW5kbGVyRXhwb3N1cmUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgaWYgKG9wdGlvbnMuc2l6ZSA+IDApIHtcblx0ICAgIGlmICghaGFuZGxlcikge1xuXHQgICAgICBwcm9jZXNzUmVjb3JkUXVldWUoKTtcblx0ICAgIH1cblx0ICAgIHZhciByZXN1bHQgPSBmaWx0ZXJSZWNvcmRzKCkgfHwge307XG5cdCAgICBpZiAoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXRyYWNrLWNvbWJpbmUnKSA9PT0gJ29uJykge1xuXHQgICAgICByZWNvcmRBcGx1c0F0Rm9yQWxpKHJlc3VsdCwgb3B0aW9ucywgaGFuZGxlclJlY29yZCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZWNvcmRBcGx1c0F0Rm9yQWxpeXVuKHJlc3VsdCwgb3B0aW9ucywgaGFuZGxlclJlY29yZCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy53YXRjaF9kYXRhX2NoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ0FQTFVTX0FFX0VYUE9TVVJFX0NIQU5HRScsIGhhbmRsZXJFeHBvc3VyZSk7XG5cdCAgd2F0Y2hVbmxvYWRSZWNvcmQoKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2xlYXIgPSBmdW5jdGlvbigpIHtcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIudW5zdWJzY3JpYmUoJ0FQTFVTX0FFX0VYUE9TVVJFX0NIQU5HRScsIGhhbmRsZXJFeHBvc3VyZSk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvYXBsdXNfY3BsdWdpbi9zcmMvbGliX21vbml0b3IvdHJhY2tlcl9sb3N0cHYuanNcblx0ICog6K6w5b2V5Lii5aSxcHbnmoTlnLrmma9cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBuYW1lU3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpLm5hbWVTdG9yYWdlO1xuXHR2YXIgdXRpbFJlZmVycmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOWGmSByZWZlcnJlclxuXHQgICAgICpcblx0ICAgICAqIOWcqCB3aW5kb3cubmFtZSDkuK3orrDlvZXlvZPliY3pobXpnaLnmoQgdXJs77yM5Lul5L6/5LiL5LiA5Liq6aG16Z2i6K+75Y+WXG5cdCAgICAgKiB3aW5kb3cubmFtZSDnmoTor7vlhpkgQVBJIOWSjCBuYW1lIOWAvOeahOinhOiMg+WumuS5iemDvemHh+eUqCBuYW1lU3RvcmFnZVxuXHQgICAgICogaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vY29kZXYvbmFtZS1zdG9yYWdlL3RyZWUvbWFzdGVyXG5cdCAgICAgKi9cblx0ICAgIHJlY29yZFZhbEluV2luZG93TmFtZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgaXNfaHR0cHMgPSBhcGx1c1N0YXRpYy5IVFRQUyA9PSBsb2NhdGlvbi5wcm90b2NvbDtcblx0ICAgICAgdmFyIE5BTUVTVE9SQUdFX0tFWVMgPSBhcGx1cy5nbG9iYWxDb25maWcuTkFNRVNUT1JBR0VfS0VZUyB8fCB7fTtcblx0ICAgICAgdmFyIHJlZmVycmVyO1xuXHQgICAgICB2YXIgcmVmZXJyZXJfcHZfaWQ7XG5cdFxuXHQgICAgICAvLyDku4XlnKggdG9wIOmhtemdouaJjeWBmui/meS4quaTjeS9nFxuXHQgICAgICAvLyDku4XlnKggaHR0cHMg6aG16Z2i5ZyoIHdpbmRvdy5uYW1lIOS4reiusOW9leS4iyByZWZlcnJlciDnmoTlgLxcblx0ICAgICAgdmFyIGlzX2luX2lmcmFtZSA9IHBhcmVudCAhPT0gc2VsZjsgIC8vIOW9k+WJjemhtemdouaYr+WQpuWcqCBpZnJhbWUg5LitXG5cdCAgICAgIGlmIChpc19pbl9pZnJhbWUgfHwgIWlzX2h0dHBzKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcGFnZV91cmwgPSBsb2NhdGlvbi5ocmVmO1xuXHQgICAgICAvLyDmmK/lkKblnKjnmbvlvZXpobXpnaLkuIpcblx0ICAgICAgdmFyIGlzX2xvZ2luX3BhZ2UgPSBpc19odHRwcyAmJiAocGFnZV91cmwuaW5kZXhPZignbG9naW4udGFvYmFvLmNvbScpID49IDAgfHwgcGFnZV91cmwuaW5kZXhPZignbG9naW4udG1hbGwuY29tJykgPj0gMCk7XG5cdCAgICAgIHZhciBwYWdlX3JlZmVycmVyID0gdXRpbFJlZmVycmVyLmdldFJlZmVyKE5BTUVTVE9SQUdFX0tFWVMpO1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIOWmguaenOaYr+WcqOeZu+W9lemhtemdouS4iu+8jOW5tuS4lOW3sue7j+iusOW9leS6huS4gOS4qiByZWZlcnJlcu+8jOWImei/meWEv+WOu+aOiSByZWZlcnJlciDlj4LmlbBcblx0ICAgICAgICog5Zug5Li677yM5aaC5p6c55So5oi35piv5LuOIEEg6aG16Z2i54K55Ye75YiwIEIg6aG16Z2i77yM5Lit6Ze057uP6L+H5LqG55m75b2V6aG16Z2i77yMXG5cdCAgICAgICAqIOWQjuWPsOWcqOi/mOWOn+i3r+W+hOaXtu+8jOWPqumcgOimgeefpemBkyBBIC0+IELvvIzogIzkuI3pnIDopoHnn6XpgZMgQSAtPiBsb2dpbiAtPiBCXG5cdCAgICAgICAqL1xuXHQgICAgICBpZiAoaXNfbG9naW5fcGFnZSAmJiBwYWdlX3JlZmVycmVyKSB7XG5cdCAgICAgICAgcmVmZXJyZXIgPSBwYWdlX3JlZmVycmVyO1xuXHQgICAgICAgIHJlZmVycmVyX3B2X2lkID0gbmFtZVN0b3JhZ2UuZ2V0SXRlbShOQU1FU1RPUkFHRV9LRVlTWydSRUZFUlJFUl9QVl9JRCddKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWZlcnJlciA9IHBhZ2VfdXJsO1xuXHQgICAgICAgIHJlZmVycmVyX3B2X2lkID0gYXBsdXMucHZpZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgbmFtZVN0b3JhZ2Uuc2V0SXRlbShOQU1FU1RPUkFHRV9LRVlTWydSRUZFUlJFUiddLCByZWZlcnJlcik7XG5cdCAgICAgIG5hbWVTdG9yYWdlLnNldEl0ZW0oTkFNRVNUT1JBR0VfS0VZU1snUkVGRVJSRVJfUFZfSUQnXSwgcmVmZXJyZXJfcHZfaWQpO1xuXHQgICAgfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdXRpbEV2ZW50Lm9uKHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfc2VsZi5yZWNvcmRWYWxJbldpbmRvd05hbWUoKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDY2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9hcGx1c19jcGx1Z2luL3NyYy9saWJfbW9uaXRvci90cmFja2VyX2xvc3Rwdi5qc1xuXHQgKiDorrDlvZXkuKLlpLFwdueahOWcuuaZr1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIFRyYWNrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtcyB7T2JqZWN0fSBvcHRpb25zIHtcblx0ICAgICAqICAgbG9nQ29uZmlnOiB7bG9nQ29uZmlnfVxuXHQgICAgICogfVxuXHQgICAgICovXG5cdCAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG5cdCAgICAvLyAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgICAvLyB9LFxuXHQgICAgLyoqXG5cdCAgICAgKiDorrDlvZXigJ3kuKLlpLFQVuKAnFxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gcGFyYW1zIDoge1xuXHQgICAgICogICBwYWdlOiAnd3d3Lnh4eC5jb20nLFxuXHQgICAgICogICBwYWdlX3VybDogJ2h0dHA6Ly94eHgvPzIzMjMnXG5cdCAgICAgKiAgIGR1cmF0aW9uOiAxMTFcblx0ICAgICAqICAgc3BtX2FiOiAxLjJcblx0ICAgICAqIH1cblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgICAgICovXG5cdCAgICBkb190cmFja2VyX2xvc3RwdjogZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5wYWdlKSB7XG5cdCAgICAgICAgdmFyIHNwbWFiID0gcGFyYW1zLnNwbV9hYiA/IHBhcmFtcy5zcG1fYWIuc3BsaXQoJy4nKSA6IFtdO1xuXHQgICAgICAgIHZhciBNX1QgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnNlbmRCZWFjb24gPyAncG9zdCcgOiAnZ2V0Jztcblx0ICAgICAgICB2YXIgbWVzc2FnZSA9ICdyZWNvcmRfbG9zdHB2X2J5JyArIE1fVCArICdfJyArIHBhcmFtcy5tc2c7XG5cdCAgICAgICAgdmFyIHRyYWNrZXIgPSBuZXcgVHJhY2tlcih7XG5cdCAgICAgICAgICByYXRpbzogcGFyYW1zLnJhdGlvIHx8IHRoaXMub3B0aW9ucy5jb25maWcubG9zdFB2UmVjb3JkUmF0aW8gLy8g5Lii5aSxUFbnmoTorrDlvZXmpoLnjodcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB0cmFja2VyLnJ1bih7XG5cdCAgICAgICAgICAnY29kZSc6IDEwMixcblx0ICAgICAgICAgICdwYWdlJzogcGFyYW1zLnBhZ2UsXG5cdCAgICAgICAgICAnbXNnJzogbWVzc2FnZSxcblx0ICAgICAgICAgICdzcG1fYSc6IHNwbWFiWzBdLFxuXHQgICAgICAgICAgJ3NwbV9iJzogc3BtYWJbMV0sXG5cdCAgICAgICAgICAnYzEnOiBwYXJhbXMuZHVyYXRpb24sIC8vIOmhtemdouWBnOeVmeaXtumVv++8jOWtl+auteWumuS5ieingWZzcOW5s+WPsFxuXHQgICAgICAgICAgJ2MyJzogcGFyYW1zLnBhZ2VfdXJsIC8vIOmhtemdouWOn+Wni3VybO+8jOWtl+auteWumuS5ieingWZzcOW5s+WPsFxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgLyoqXG5cdCAgICAgKiDorrDlvZVwduayoeacieWPkemAgeeahOmhtemdolVSTOWPiueUqOaIt+etieW+heaXtumVv1xuXHQgICAgICogQHBhcmFtcyB7TnVtYmVyfSBkdXJhdGlvbiDpobXpnaLlgZznlZnml7bplb/vvIjmr6vnp5LvvIlcblx0ICAgICAqL1xuXHQgICAgcmVjb3JkTG9zdFB2OiBmdW5jdGlvbiAoZHVyYXRpb24pIHtcblx0ICAgICAgdmFyIGFwbHVzID0gd2luZG93LmFwbHVzIHx8IHt9O1xuXHQgICAgICB2YXIgXyQgPSAoYXBsdXMuXyQgPSBhcGx1cy5fJCB8fCB7fSk7IC8vIOWGhemDqOS9v+eUqOeahOWPmOmHj1xuXHQgICAgICB2YXIgc3BtX2FiID0gYXBsdXMuc3BtX2FiID8gYXBsdXMuc3BtX2FiLmpvaW4oJy4nKSA6ICcwLjAnO1xuXHQgICAgICB2YXIgcHZDb3VudCA9IF8kLnNlbmRfcHZfY291bnQgfHwgMDtcblx0XG5cdCAgICAgIC8vIOiusOW9leS4ouWksXB277yMVE9ETyDljZXpobXlupTnlKjpnIDopoHnm5HlkKxoYXNo5Y+Y5YyW5oiWaGlzdG9yeeWPmOWMluasoeaVsFxuXHQgICAgICBpZiAocHZDb3VudCA8IDEpIHtcblx0ICAgICAgICAvLyDmlK/mjIFzZW5kQmVhbmNvbueahOa1j+iniOWZqOi/memHjOWwseWPr+S7peaKiuaXpeW/l+WPkeWHuuWOu1xuXHQgICAgICAgIC8vIFRPRE/kuI3mlK/mjIFzZW5kQmVhY29u55qE5rWP6KeI5Zmo6ICD6JmR5a2Y5Yiw6Zmk5LqGd2luZG93Lm5hbWXkuYvlpJbnmoTliKvnmoTlnLDmlrnvvIzogIPomZHkuI7lj4LmlbDml6Dnl5XpgI/kvKDpobnnm67kuIDotbfmkJ5cblx0ICAgICAgICBpZiAobmF2aWdhdG9yICYmIG5hdmlnYXRvci5zZW5kQmVhY29uKSB7XG5cdCAgICAgICAgICB2YXIgX3BhZ2UgPSBsb2NhdGlvbi5ob3N0bmFtZSArIGxvY2F0aW9uLnBhdGhuYW1lO1xuXHQgICAgICAgICAgdGhpcy5kb190cmFja2VyX2xvc3Rwdih7XG5cdCAgICAgICAgICAgIHBhZ2U6IF9wYWdlLFxuXHQgICAgICAgICAgICBwYWdlX3VybDogbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgX3BhZ2UsXG5cdCAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcblx0ICAgICAgICAgICAgc3BtX2FiOiBzcG1fYWIsXG5cdCAgICAgICAgICAgIG1zZzogJ2RvbV9zdGF0ZT0nICsgZG9jdW1lbnQucmVhZHlTdGF0ZVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgc3RhcnREYXRlID0gbmV3IERhdGUoKTsgLy8g57uT5p2f5pe26Ze0XG5cdCAgICAgIHV0aWxFdmVudC5vbih3aW5kb3csICdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGVuZERhdGUgPSBuZXcgRGF0ZSgpOyAvLyDnu5PmnZ/ml7bpl7Rcblx0ICAgICAgICB2YXIgZHVyYXRpb24gPSBlbmREYXRlLmdldFRpbWUoKSAtIHN0YXJ0RGF0ZS5nZXRUaW1lKCk7IC8vIOaXtumXtOW3rueahOavq+enkuaVsFxuXHQgICAgICAgIF9zZWxmLnJlY29yZExvc3RQdihkdXJhdGlvbik7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl9vL21vbml0b3IvdHJhY2tlci5qc1xuXHQgKiDlr7noh6rouqtqc+eahOebkeaOpyAtIOi3n+i4qlxuXHQgKlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdFxuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHRcblx0dmFyIERFRkFVTFRfT1BUUyA9IHtcblx0ICByYXRpbzogMSxcblx0ICBsb2drZXk6ICdmc3AuMS4xJyxcblx0ICBnbWtleTogJycsXG5cdCAgY2hrc3VtOiAnSDQ2NzQ3NjE1J1xuXHR9O1xuXHRcblx0dmFyIFRyYWNrZXIgPSBmdW5jdGlvbiAob3B0cykge1xuXHQgIGlmICghb3B0cyB8fCB0eXBlb2Ygb3B0cyAhPT0gJ29iamVjdCcpIHtcblx0ICAgIG9wdHMgPSBERUZBVUxUX09QVFM7XG5cdCAgfVxuXHQgIHRoaXMub3B0cyA9IG9wdHM7XG5cdCAgdGhpcy5vcHRzLnJhdGlvID0gb3B0cy5yYXRpbyB8fCBERUZBVUxUX09QVFMucmF0aW87IC8vIOmHh+agt+amgueOh+m7mOiupDIwJVxuXHQgIHRoaXMub3B0cy5sb2drZXkgPSBvcHRzLmxvZ2tleSB8fCBERUZBVUxUX09QVFMubG9na2V5OyAvLyDpu5jorqTph4fmoLfov5nkuKrlgLzku6PooajmmK9qc+mUmeivr1xuXHQgIHRoaXMub3B0cy5nbWtleSA9IG9wdHMuZ21rZXkgfHwgREVGQVVMVF9PUFRTLmdta2V5O1xuXHQgIHRoaXMub3B0cy5jaGtzdW0gPSBvcHRzLmNoa3N1bSB8fCBERUZBVUxUX09QVFMuY2hrc3VtO1xuXHR9O1xuXHR2YXIgZm4gPSBUcmFja2VyLnByb3RvdHlwZTtcblx0XG5cdC8vIOmHh+agt+amgueOh+iwg+aVtFxuXHRmbi5nZXRSYW5kb20gPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKyAxO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiwg+eUqOm7hOmHkeS7pOeureeahHJlY29yZOaWueazle+8jOS4iuaKpWpz6ZSZ6K+vXG5cdCAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R8U3RyaW5nfSB7XG5cdCAqICAgbG9na2V5IHtTdHJpbmd9IOS7pOeurSBJRCDvvIjlpoIgL3RtYWxsYWMuMS4x77yM5b+F6aG75Lul4oCcL+KAneW8gOWktO+8ieaIluWbvueJh+WcsOWdgO+8iOWmgiAxLmdpZu+8ie+8jFxuXHQgKiAgIOabneWFieaXpeW/l+eahCBsb2drZXkg5Li6YWPmiJbku6VhYy3lvIDlpLTvvIzluLjop4Tml6Xlv5fnmoQgbG9na2V5IOaYryAqLmdpZu+8jOm7hOmHkeS7pOeureeahCBsb2drZXkg5byA5aS05LiA5a6a5piv4oCcL+KAnVxuXHQgKiAgIGdta2V5IHtTdHJpbmd9XG5cdCAqICAgZ29rZXkge1N0cmluZ30g5b2i5aaCIGE9MSZiPTImYz1jY2Ncblx0ICogICBjaGtzdW0ge051bWJlcnxTdHJpbmd9XG5cdCAqIH1cblx0ICovXG5cdGZuLnJ1biA9IGZ1bmN0aW9uIChvcHRpb25zLCBtdXN0U2VuZCkge1xuXHQgIHZhciBkZWZhdWx0X29wdHMgPSB7XG5cdCAgICBwaWQ6ICdhcGx1cycsIC8vIOW/hemhu+WMheWQqyBwaWQg5a2X5q6177yM5Y2z5ZyoIENsdWUg5bmz5Y+w5Lit55Sz6K+355qEIHBpZFxuXHQgICAgY29kZTogMTAxLCAvLyDlv4XpobvljIXlkKsgY29kZSDlrZfmrrXvvIznlKjkuo7ljLrliIbkuI3lkIznsbvlnovnmoTplJnor6/vvIzljbPlnKggQ2x1ZSDlubPlj7DkuK3nlLPor7fnmoToh6rlrprkuYnnm5HmjqcgY29kZVxuXHQgICAgbXNnOiAn5byC5bi45YaF5a65JyAvLyDlv4XpobvljIXlkKsgbXNnIOWtl+aute+8jOeugOimgeaPj+i/sOW9k+WJjemUmeivr++8jOWmguOAjuWKoOi9vSB1c2VySWQg5aSx6LSl44CP5oiW44COeHhGdW5jdGlvbiDmiafooYzlvILluLjjgI/jgIJcblx0ICB9O1xuXHQgIHZhciBvcHRzO1xuXHQgIHZhciByYW5kb21SYXRpbztcblx0ICB2YXIgdXJsID0gJyc7XG5cdFxuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXBsdXMgPSB3aW5kb3cuYXBsdXMgfHwge307XG5cdCAgICB2YXIgXyQgPSBhcGx1cy5fJCB8fCB7fTtcblx0ICAgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm8gfHwge307XG5cdCAgICB2YXIgYXBsdXNUcmFja2VyUmF0ZSA9IHBhcnNlRmxvYXQobWV0YV9pbmZvWydhcGx1cy10cmFja2VyLXJhdGUnXSk7XG5cdCAgICBvcHRzID0gdGhpcy5vcHRzIHx8IHt9O1xuXHQgICAgaWYgKHR5cGVvZiBhcGx1c1RyYWNrZXJSYXRlICE9PSAnbnVtYmVyJyB8fCAoYXBsdXNUcmFja2VyUmF0ZSArICcnKSA9PT0gJ05hTicpIHtcblx0ICAgICAgYXBsdXNUcmFja2VyUmF0ZSA9IG9wdHMucmF0aW87XG5cdCAgICB9XG5cdCAgICByYW5kb21SYXRpbyA9IHRoaXMuZ2V0UmFuZG9tKCk7XG5cdCAgICBpZiAobXVzdFNlbmQgfHwgKHJhbmRvbVJhdGlvIDw9IGFwbHVzVHJhY2tlclJhdGUgKiAxMDApKSB7XG5cdCAgICAgIHVybCA9ICcvL2dtLm1tc3RhdC5jb20vJyArIG9wdHMubG9na2V5O1xuXHQgICAgICBvcHRpb25zLnJlbCA9IGFwbHVzLmdsb2JhbENvbmZpZy5zY3JpcHRfbmFtZSArICdAJyArIGFwbHVzLmdsb2JhbENvbmZpZy5sdmVyO1xuXHQgICAgICBvcHRpb25zLnR5cGUgPSBvcHRpb25zLmNvZGU7XG5cdCAgICAgIG9wdGlvbnMudWlkID0gZW5jb2RlVVJJQ29tcG9uZW50KGFwbHVzLmdldENvb2tpZUNuYSgnY25hJykpO1xuXHQgICAgICBvcHRpb25zID0gdXRpbERhc2guYXNzaWduKGRlZmF1bHRfb3B0cywgb3B0aW9ucyk7XG5cdFxuXHQgICAgICB2YXIgX3RyYWNrZXJPcHRzID0gZm9ybWF0Lm9iajJwYXJhbShvcHRpb25zKTtcblx0ICAgICAgYXBsdXMudHJhY2tlciA9IGFwbHVzLnNlbmQodXJsLCB7XG5cdCAgICAgICAgY2FjaGU6IHV0aWxEYXNoLm1ha2VDYWNoZU51bSgpLFxuXHQgICAgICAgIGdva2V5OiBfdHJhY2tlck9wdHMsXG5cdCAgICAgICAgbG9ndHlwZTogJzInXG5cdCAgICAgIH0sICdQT1NUJyk7IC8vIOaMh+WumuS8mOWFiOaMiXBvc3Tor7fmsYLlj5HpgIFcblx0ICAgIH1cblx0ICB9IGNhdGNoIChlcnIpIHtcblx0ICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgbXNnOiAndHJhY2tlci5ydW4oKSBleGVjIGVycm9yOiAnICsgZXJyXG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFRyYWNrZXI7XG5cblxuLyoqKi8gfSksXG4vKiA2OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog6I635Y+W6aG16Z2i5LiK55qEIDxtZXRhPiDkuK3kuI4gYXBsdXMg5omT54K555u45YWz55qE5YC8XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIC8vIOS/neivgeWPquS8muacieS4gOS4qmFwbHVzX3BsdWdpbl9tb25pdG9y6L+Q6KGMXG5cdCAgICAgIGlmIChhcGx1cy5fYXBsdXNfY3BsdWdpbl9tKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHZhciBjb25maWcgPSB7XG5cdCAgICAgIC8vICAgb2Jzb2xldGVJbnRlclJlY29yZFJhdGlvOiAnMC4wMScsIC8vIOi/h+aXtueahOaOpeWPo+iiq+iwg+eUqOeahOiusOW9leamgueOh++8jDAuMDHkuLoxJe+8jDAuMeS4ujEwJe+8jOS7peatpOexu+aOqFxuXHQgICAgICAvLyAgIGpzRXJyb3JSZWNvcmRSYXRpbzogJzAuMDEnLCAvLyBqc+mUmeivr+eahOiusOW9leamgueOh++8jDAuMDHkuLoxJe+8jDAuMeS4ujEwJe+8jOS7peatpOexu+aOqFxuXHQgICAgICAvLyAgIGJyb3dzZXJTdXBwb3J0UmF0aW86ICcwLjAxJywgLy8g5rWP6KeI5Zmo5pSv5oyB5oCn6Zeu6aKY5pS26ZuGXG5cdCAgICAgIC8vIH07XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnO1xuXHQgICAgICBhcGx1cy5fYXBsdXNfY3BsdWdpbl9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSkucnVuKGNvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDY5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L21vbml0b3IvdHJhY2tlclV0aWwuanNcblx0ICogXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIFRyYWNrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTtcblx0XG5cdHZhciBNX1QgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnNlbmRCZWFjb24gPyAncG9zdCcgOiAnZ2V0Jztcblx0XG5cdGV4cG9ydHMucnVuID0gZnVuY3Rpb24gKGNvbmZpZ190cmFja2VyKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHN0YXR1czogJ2NvbXBsZXRlJyxcblx0ICAgIC8qKlxuXHQgICAgICog6K6w5b2V4oCdSlPplJnor6/igJxcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW1zIHtPYmplY3R9IGNvbmZpZyA6IHtcblx0ICAgICAqICAgbG9na2V5OiAnZnNwLjEuMScsXG5cdCAgICAgKiAgIG1lc3NhZ2U6ICcnLFxuXHQgICAgICogICBlcnJvcjogZXJyb3IsXG5cdCAgICAgKiAgIGZpbGVuYW1lOiAnZmlsZW5hbWUnLFxuXHQgICAgICogfVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAgICAgKi9cblx0ICAgIGRvX3RyYWNrZXJfanNlcnJvcjogZnVuY3Rpb24gKG9iaikge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciB0cmFja2VyID0gbmV3IFRyYWNrZXIoe1xuXHQgICAgICAgICAgbG9na2V5OiBvYmogPyBvYmoubG9na2V5IDogJycsXG5cdCAgICAgICAgICByYXRpbzogb2JqICYmIHR5cGVvZiBvYmoucmF0aW8gPT09ICdudW1iZXInICYmIG9iai5yYXRpbyA+IDAgPyBvYmoucmF0aW8gOiBjb25maWdfdHJhY2tlci5qc0Vycm9yUmVjb3JkUmF0aW8gLy8ganPplJnor6/orrDlvZXmpoLnjodcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB2YXIgZXJyb3JfbWVzc2FnZSA9IFtcblx0ICAgICAgICAgICdNZXNzYWdlOiAnICsgb2JqLm1lc3NhZ2UsXG5cdCAgICAgICAgICAnRXJyb3Igb2JqZWN0OiAnICsgb2JqLmVycm9yXG5cdCAgICAgICAgXS5qb2luKCcgLSAnKTtcblx0ICAgICAgICB2YXIgc3BtX2FiID0gYXBsdXMuc3BtX2FiIHx8IFtdO1xuXHQgICAgICAgIHZhciBfcGFnZSA9IGxvY2F0aW9uID8gbG9jYXRpb24uaG9zdG5hbWUgKyBsb2NhdGlvbi5wYXRobmFtZSA6ICcnO1xuXHQgICAgICAgIHRyYWNrZXIucnVuKHtcblx0ICAgICAgICAgICdjb2RlJzogMTEwLFxuXHQgICAgICAgICAgJ3BhZ2UnOiBfcGFnZSxcblx0ICAgICAgICAgICdtc2cnOiAncmVjb3JkX2pzZXJyb3JfYnknICsgTV9UICsgJ18nICsgb2JqLm1lc3NhZ2UsXG5cdCAgICAgICAgICAnc3BtX2EnOiBzcG1fYWJbMF0sXG5cdCAgICAgICAgICAnc3BtX2InOiBzcG1fYWJbMV0sXG5cdCAgICAgICAgICAnYzEnOiBlcnJvcl9tZXNzYWdlLCAvLyBlcnJvcl9tZXNzYWdl77yM5a2X5q615a6a5LmJ6KeBZnNw5bmz5Y+wXG5cdCAgICAgICAgICAnYzInOiBvYmouZmlsZW5hbWUsIC8vIOaKpemUmeaWh+S7tuWQje+8jOWtl+auteWumuS5ieingWZzcOW5s+WPsFxuXHQgICAgICAgICAgJ2MzJzogbG9jYXRpb24gPyBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBfcGFnZSA6ICcnIC8vIHBhZ2VfdXJs77yM5a2X5q615a6a5LmJ6KeBZnNw5bmz5Y+wXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgIG1zZzogZXJyXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDorrDlvZXigJ3mtY/op4jlmajkuI3lhbzlrrnnmoTlsZ7mgKfigJxcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW1zIHtPYmplY3R9IHBhcmFtcyA6IHtcblx0ICAgICAqICAgcGFnZTogJ3d3dy54eHguY29tJyxcblx0ICAgICAqICAgbXNnOiAndGhlIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBzZW5kQmVhY29uIGFuZCBYTUxIVFRQJyxcblx0ICAgICAqICAgYnJvd3Nlcl9hdHRyOiAnWE1MSFRUUCcsXG5cdCAgICAgKiAgIHNwbV9hYjogMS4yXG5cdCAgICAgKiB9XG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICAgICAqL1xuXHQgICAgZG9fdHJhY2tlcl9icm93c2VyX3N1cHBvcnQ6IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgICAgdmFyIHJzID0gZmFsc2U7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucGFnZSkge1xuXHQgICAgICAgICAgdmFyIHNwbWFiID0gcGFyYW1zLnNwbV9hYiA/IHBhcmFtcy5zcG1fYWIuc3BsaXQoJy4nKSA6IFtdO1xuXHQgICAgICAgICAgdmFyIHRyYWNrZXIgPSBuZXcgVHJhY2tlcih7XG5cdCAgICAgICAgICAgIHJhdGlvOiBwYXJhbXMucmF0aW8gfHwgY29uZmlnX3RyYWNrZXIuYnJvd3NlclN1cHBvcnRSYXRpbyAvLyDmtY/op4jlmajkuI3mlK/mjIHnmoTlvILluLjorrDlvZXmpoLnjodcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgdmFyIF9hcGx1c19jbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuXHQgICAgICAgICAgdmFyIHVhX2luZm8gPSBfYXBsdXNfY2xpZW50LnVhX2luZm8gfHwge307XG5cdCAgICAgICAgICB0cmFja2VyLnJ1bih7XG5cdCAgICAgICAgICAgICdjb2RlJzogMTExLFxuXHQgICAgICAgICAgICAncGFnZSc6IHBhcmFtcy5wYWdlLFxuXHQgICAgICAgICAgICAnbXNnJzogcGFyYW1zLm1zZyArICdfYnknICsgTV9ULFxuXHQgICAgICAgICAgICAnc3BtX2EnOiBzcG1hYlswXSxcblx0ICAgICAgICAgICAgJ3NwbV9iJzogc3BtYWJbMV0sXG5cdCAgICAgICAgICAgICdjMSc6IFt1YV9pbmZvLm8sIHVhX2luZm8uYiwgdWFfaW5mby53XS5qb2luKCdfJyksIC8vIOa1j+iniOWZqOWxnuaAp1xuXHQgICAgICAgICAgICAnYzInOiBwYXJhbXMuZXRhZyB8fCAnJyxcblx0ICAgICAgICAgICAgJ2MzJzogcGFyYW1zLmNuYSB8fCAnJ1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICBycyA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICBtc2c6IGVyclxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBycztcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogdW3pgJrpgZPvvIxhcGx1c+WPkemAgWh0dHDor7fmsYLml6Xlv5fmj5Lku7Zcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOmSsOaYrSA8Y2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gdmFyIG1pbmkgPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy9taW5pJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgTWFpbiA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpO1xuXHQgICAgICB2YXIgbWFpbiA9IE1haW4uY3JlYXRlKHtcblx0ICAgICAgICBXUzogbnVsbCxcblx0ICAgICAgICBDVFg6IHdpbmRvdyxcblx0ICAgICAgICBDVFhfVFlQRTogJ1dFQidcblx0ICAgICAgfSk7XG5cdCAgICAgIG1haW4ucnVuKHRoaXMub3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDcxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHVt6YCa6YGT77yM5oum5oiq5bm25oyJaHR0cOWNj+iuruWPkemAgeaXpeW/l1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQWFyb2586ZKw5pitIDxjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgbG9nX2Nsb3VkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHR2YXIgbWFpbl9iYXNlX2h0dHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcblx0dmFyIGJvZHlCdWlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0dmFyIGZldGNoRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oODUpO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciBpbml0VGltZXN0YW1wO1xuXHRtb2R1bGUuZXhwb3J0cyA9IG1haW5fYmFzZV9odHRwLmV4dGVuZCh7XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBkYXRhXG5cdCAgICogKi8gXG5cdCAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIGlmICghIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkpTQlJJREdFX09OTFkpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBwYXJhbXMgPSBsb2dfY2xvdWQuY2hhbmdlVG9PYmooZGF0YS53aGF0X3RvX3NlbmQubG9nZGF0YSk7XG5cdCAgICB2YXIgbWF0Y2hWYWx1ZSA9IGxvY2F0aW9uICYmIGxvY2F0aW9uLmhyZWYubWF0Y2goL2FwbHVzRGVidWc9KHRydWV8ZmFsc2UpLykgfHwgW107XG5cdCAgICB2YXIgaXNEZWJ1ZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdERUJVRycpIHx8IG1hdGNoVmFsdWVbMV07XG5cdCAgICB1bG9nKCkuc2V0RGVidWcoISFpc0RlYnVnKTtcblx0ICAgIHZhciBtZXRob2Q7XG5cdCAgICB2YXIgcG9zdERhdGEgPSBib2R5QnVpbGQocGFyYW1zLCBkYXRhLnVzZXJkYXRhKTtcblx0ICAgIGlmIChhcGx1cy5faDVfc2hhcmVfZW5hYmxlKSB7XG5cdCAgICAgIG1ldGhvZCA9ICdQT1NUJztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG1ldGhvZCA9IGRhdGEud2hlcmVfdG9fc2VuZC5tZXRob2Q7XG5cdCAgICAgIGlmIChtZXRob2QgIT09ICdQT1NUJyB8fCAhISEobmF2aWdhdG9yICYmIG5hdmlnYXRvci5zZW5kQmVhY29uKSkge1xuXHQgICAgICAgIHBvc3REYXRhID0gXCJkPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBvc3REYXRhKTtcblx0ICAgICAgfSBcblx0ICAgIH1cblx0ICAgIGlmIChwb3N0RGF0YSkge1xuXHQgICAgICB1bG9nKCkuaSgnZXZlbnQgYmVmb3JlIHNlbmQgdG86ICcsIGRhdGEud2hlcmVfdG9fc2VuZC51cmwpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpbml0VGltZXN0YW1wKSB7XG5cdCAgICAgIGluaXRUaW1lc3RhbXAgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChpbml0VGltZXN0YW1wICYmIGluaXRUaW1lc3RhbXAgLSAobmV3IERhdGUoKSkuZ2V0VGltZSgpID4gYXBsdXNTdGF0aWMuU0hBUkVfQ0FDSEVfSU5URVJWQUwgJiYgYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuXHQgICAgICB1dGlsU3RvcmUucmVtb3ZlKCdfX3NoYXJlZnJvbScpO1xuXHQgICAgICB1dGlsU3RvcmUucmVtb3ZlKCdfX2Zyb21hcHBrZXknKTtcblx0ICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX3VtX3NzcmMnKTtcblx0ICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX3VtX2NoYW5uZWwnKTtcblx0ICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX3VtX2NhbXBhaWduJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFhcGx1cy5faDVfc2hhcmVfZW5hYmxlKSB7XG5cdCAgICAgIGFwbHVzLnNlbmQoZGF0YS53aGVyZV90b19zZW5kLnVybCwgcG9zdERhdGEsIG1ldGhvZCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmZXRjaERhdGEucmVxdWVzdDR1bSh7XG5cdCAgICAgICAgdXJsOiBkYXRhLndoZXJlX3RvX3NlbmQudXJsLFxuXHQgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICAgIGRhdGE6IHBvc3REYXRhLFxuXHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuXHQgICAgICAgICAgaWYgKHJlcyAmJiByZXMuaW1wcmludCkge1xuXHQgICAgICAgICAgICAvLyB1bSBoNSDliIbkuqtcblx0ICAgICAgICAgICAgdXRpbFN0b3JlLnNldChhcGx1c1N0YXRpYy5JTVBSSU5ULCByZXMuaW1wcmludCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcblx0ICAgICAgICAgIHVsb2coKS53KCdhcGx1cyB3ZWJsb2dzIGVycm9yOiAnICsgZXJyb3IgKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0pLFxuLyogNzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogd2Vic29ja2V0IHV0aWxzXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0ZXhwb3J0cy5nZXRLZXlJbmRleCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICB2YXIgbWFwID0ge1xuXHQgICAgcHJvdG9jb2w6IDEsXG5cdCAgICBldmVudF9hcmdzOiAyNSxcblx0ICB9O1xuXHQgIHJldHVybiBtYXBba2V5XTtcblx0fTtcblx0dmFyIEhMID0gJy0nO1xuXHRleHBvcnRzLmNoYW5nZVRvQXJyYXkgPSBmdW5jdGlvbiAoZm9ybWF0LCBkYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdFxuXHQgIHZhciB0aW1lID0gZGF0YS5ldmVudF90aW1lc3RhbXAuZ2V0VGltZSgpLnRvU3RyaW5nKCk7XG5cdCAgdmFyIGNsaWVudCA9IGRhdGEuY2xpZW50IHx8IHt9O1xuXHQgIHZhciB3aWR0aCA9IGNsaWVudC5zY3JlZW5XaWR0aCB8fCAnJztcblx0ICB2YXIgaGVpZ2h0ID0gY2xpZW50LnNjcmVlbkhlaWdodCB8fCAnJztcblx0XG5cdCAgdmFyIF9yZXNvbHV0aW9uID0gd2lkdGggKyAnKicgKyBoZWlnaHQ7XG5cdCAgdmFyIHJlc29sdXRpb24gPSB3aWR0aCAmJiBoZWlnaHQgPyBfcmVzb2x1dGlvbiA6IEhMO1xuXHRcblx0ICAvLyB2YXIgVUEgPSBjbGllbnQudXNlckFnZW50IHx8IEhMO1xuXHQgIHZhciBMQU5HID0gY2xpZW50Lmxhbmd1YWdlIHx8IEhMO1xuXHQgIHZhciBnb2tleSA9IGRhdGEuZ29rZXkgfHwge307XG5cdCAgdmFyIGV2ZW50X2FyZ3MgPSBKU09OLnN0cmluZ2lmeShnb2tleSk7XG5cdCAgdmFyIHNka19pbmZvID0gSlNPTi5zdHJpbmdpZnkoe1xuXHQgICAgY3VzdG9tU2RrSWQ6IGRhdGEuc2RrX2luZm8uY3VzdG9tU2RrSWQgfHwgJycsXG5cdCAgICBwbGF0Zm9ybV90eXBlOiBkYXRhLnNka19pbmZvLnBsYXRmb3JtVHlwZSB8fCAnJywgLy93ZWNoYXQsICdhbGlwYXknLCAnYmFpZHUnLCAndGFvYmFvJ1xuXHQgIH0pO1xuXHQgIHZhciBhcHBLZXkgPSBkYXRhLmFwcEtleSB8fCBkYXRhLmFwcElkIHx8IEhMO1xuXHQgIC8vIOS4muWKoeW6lOeUqOeahOaJqeWxleS/oeaBr1xuXHQgIHZhciBhcHBfZXh0X2luZm8gPSBKU09OLnN0cmluZ2lmeSh7XG5cdCAgICAvLyBhcHBJZDogY2xpZW50LmFwcElkIHx8ICcnXG5cdCAgICBhcHBJZDogY2xpZW50LmFwcElkIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdtaW5pQXBwSWQnKSB8fCAnJ1xuXHQgIH0pO1xuXHQgIHZhciBzZXNzaW9uX2FyZ3MgPSBKU09OLnN0cmluZ2lmeShkYXRhLnNlc3Npb25BcmdzIHx8IHt9KTtcblx0ICB2YXIgZ2xvYmFsX2FyZ3MgPSBKU09OLnN0cmluZ2lmeShkYXRhLmdsb2JhbEFyZ3MgfHwge30pOyAvLyAyMDIxLTAxLTE0QOS5nemUoemcgOaxglxuXHQgIHZhciBhcmcxID0gZGF0YS5hcmcxIHx8IGRhdGEubG9na2V5IHx8IEhMO1xuXHQgIGlmIChhcmcxLmluZGV4T2YoJy8kJF8nKSA9PT0gMCkge1xuXHQgICAgYXJnMSA9IGFyZzEuc3Vic3RyaW5nKDEsIGFyZzEubGVuZ3RoKTtcblx0ICB9XG5cdCAgaWYgKGRhdGEuZXZlbnRfY29kZSA9PT0gJzIwMDEnICYmIGRhdGEudHJhY2tlckV2ZW50Q29kZSkge1xuXHQgICAgYXJnMSA9IGRhdGEudHJhY2tlckV2ZW50Q29kZTtcblx0ICB9XG5cdCAgdmFyIG1vZGVsID0gW1xuXHQgICAgZGF0YS5jYWNoZSwgICAgICAgICAgICAgICAgIC8vIGxvZ19pZCDmoIfor4bor6XmnaHml6Xlv5fnmoTllK/kuIBJRFxuXHQgICAgZGF0YS5tZXRob2QgfHwgJ0dFVCcsICAgICAgIC8vIHByb3RvY29sX2luZm8g5Y2P6K6u5L+h5oGvIOS4iemAieS5i+S4gO+8mldTL1BPU1QvR0VUXG5cdCAgICBITCwgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlcl9hZ2VudCAtIOWuouaIt+err1VB5L+h5oGvKOaUr+S7mOWuneWuouaIt+err+S8muacieerlue6v++8jOS8muWvvOiHtOacjeWKoeerr+ino+aekOWHuumUme+8jOaVheWJjeerr+S4jemHhylcblx0ICAgIHJlc29sdXRpb24sICAgICAgICAgICAgICAgICAvLyByZXNvbHV0aW9uIOWxj+W5leWuveW6pirlsY/luZXpq5jluqYgXG5cdCAgICBhcHBLZXksICAgICAgICAgICAgICAgICAgICAgLy8gYXBwX2tleVxuXHQgICAgYXBwX2V4dF9pbmZvLCAgICAgICAgICAgICAgIC8vIGFwcF9leHRfaW5mbyBBcHDmianlsZXkv6Hmga9cblx0ICAgIGRhdGEuX2Rldl9pZCB8fCBITCwgICAgICAgICAvLyBiaXpfZGV2aWNlX2lkIOS4muWKoeS4iuS8oOeahOiuvuWkh+ivhuWIq0lEXG5cdCAgICAne30nLCAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV2aWNlX2V4dF9pbmZvIOiuvuWkh+aJqeWxleS/oeaBryjlj4Lop4HkuIvmlofor7TmmI4pIFRPRE8g5b6F5a6aIGstdiBqc29u5LiyXG5cdCAgICBkYXRhLl91c2VyX25pY2sgfHwgSEwsICAgICAgLy8gYml6X3VzZXJfbmljayDkuJrliqHnq6/nlKjkuo7or4bliKvlt7LnmbvlvZXnlKjmiLfnmoTkvJrlkZjmoIfor4YgVE9ETyDkuJrliqHkvKDlhaVcblx0ICAgIGRhdGEuX3VzZXJfaWQgfHwgSEwsICAgICAgICAvLyBiaXpfdXNlcl9pZCDkuJrliqHnq6/nlKjkuo7or4bliKvlt7LnmbvlvZXnlKjmiLfnmoTkvJrlkZhJRFxuXHQgICAgZGF0YS5fYW5vbnlfaWQgfHwgSEwsICAgICAgIC8vIGJpel9hbm9ueV9pZCDkuJrliqHnq6/nlKjkuo7or4bliKvpnZ7nmbvlvZXnlKjmiLfnmoTljL/lkI1JRFxuXHQgICAgJ3t9JywgICAgICAgICAgICAgICAgICAgICAgIC8vIGJpel91c2VyX2V4dF9pbmZvIOS4muWKoeerr+S4iuS8oOeahOaJqeWxleeUqOaIt+S/oeaBryBUT0RPXG5cdCAgICBMQU5HLCAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9jYWxlIOWcsOWMui3or63oqIDkv6Hmga9cblx0ICAgIGRhdGEudGltZVpvbmUgfHwgSEwsICAgICAgICAvLyB0aW1lem9uZSDorr7lpIfkvb/nlKjnmoTml7bljLpcblx0ICAgIGNsaWVudC5vcyB8fCBITCwgICAgICAgICAgICAvLyBvcyDmk43kvZzns7vnu58g5aaC77yaXCJPUyBYXCJcblx0ICAgIGNsaWVudC5vc192ZXJzaW9uIHx8IEhMLCAgICAvLyBvc192ZXJzaW9uIOaTjeS9nOezu+e7n+eJiOacrOWPty9CdWlsZOegge+8jOWmgu+8mlwiMTBfMTRfNFwiXG5cdCAgICBzZGtfaW5mbywgICAgICAgICAgICAgICAgICAgLy8gc2RrX2luZm8gU0RL5L+h5oGvKOWPguingeivtOaYjikgay1257uT5p6E77yM6ZyA6Kej5p6QIFwianN2ZXI9YXBsdXNfdS5qcyZsdmVyPTguMTEuNVwiIFRPRE9cblx0ICAgIGRhdGEuX3Nlc3Npb25faWQgfHwgSEwsICAgICAvLyBiaXpfc2Vzc2lvbl9pZCDkuJrliqHnq6/nu7TmiqTnmoRzZXNzaW9uIGlkXG5cdCAgICBkYXRhLmNuYSB8fCBITCwgICAgICAgICAgICAgLy8gdXRkaWRcblx0ICAgIHRpbWUsICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudF90aW1lc3RhbXAg5LqL5Lu25pel5b+X55Sf5oiQ5pe26Ze0KOacrOWcsCksIHB25Li66aG16Z2i6L+b5YWl5pe26Ze0XG5cdCAgICBlbmNvZGVVUklDb21wb25lbnQoZGF0YS51cmwpIHx8IEhMLCAgICAgICAgICAgIC8vIHBhZ2Ug5a6M5pW055qEVVJM5oiW6ICFU2NyZWVuIE5hbWVcblx0ICAgIGRhdGEuZXZlbnRfY29kZSB8fCBITCwgICAgICAvLyBldmVudF9pZCDkuovku7bnsbvlnotJRCBUT0RPIEDkupHmnbBcblx0ICAgIGVuY29kZVVSSUNvbXBvbmVudChkYXRhLnByZSkgfHwgSEwsICAgICAgICAgICAgLy8gcmVmZXJfcGFnZSDmnaXmupBwYWdlXG5cdCAgICBnbG9iYWxfYXJncywgICAgICAgICAgICAgICAgLy8gZ2xvYmFsX2FyZ3Mg55So5oi36K6+572u55qE5YWo5bGA5Y+C5pWwLCDnlJ/lkb3lkajmnJ/nuqfliKtcblx0ICAgIHNlc3Npb25fYXJncywgICAgICAgICAgICAgICAvLyBzZXNzaW9uX2FyZ3Mg55So5oi36K6+572u55qEU2Vzc2lvbue6p+WPguaVsCzot6hTZXNzaW9u5riF56m6XG5cdCAgICBldmVudF9hcmdzLCAgICAgICAgICAgICAgICAgLy8gZXZlbnRfYXJncyDnlKjmiLforr7nva7nmoRQVue6p+WPguaVsCzot6hQVua4heepuiBrLXbnu5PmnoQgQOS6keadsFxuXHQgICAgYXJnMSwgICAgICAgICAgICAgICAgICAgICAgIC8vIGFyZzEg55So5oi35omp5bGV6aKE55WZXG5cdCAgICBkYXRhLnNka19pbmZvLmpzdmVyLCAgICAgICAgLy8gVE9ETyBzZGtfdHlwZSAoYXBsdXNfbWluaS5qcykgcmVzZXJ2ZV8xIOS6i+S7tuWxnuaAp++8mlBW57qn55qE5pel5b+X5Y+C5pWwLOi3qFBW6Ieq5Yqo5riF56m677yM6L+Z6YeM5pivanPlpKfniYjmnKzlj7fvvIxhcGx1cy5qcyB8fCBhcGx1c19taW5pLmpzXG5cdCAgICBkYXRhLnNka19pbmZvLmx2ZXIsICAgICAgICAgLy8gc2RrX3ZlcnNpb24gIFNES+eJiOacrO+8jOi/memHjOWvueW6lGFwbHVzSlPnmoTlhbfkvZPniYjmnKzlj7fvvIzlpoIxLjAuMFxuXHQgICAgY2xpZW50LmFwcFZlcnNpb24gfHwgJ2RldnRvb2xzJyB8fCBITCwgICAgICAgICAvLyBhcHBfdmVyc2lvblxuXHQgICAgY2xpZW50LmJyYW5kIHx8IEhMLCAgICAgICAgIC8vIGJyYW5kIOaJi+acuuWTgeeJjFxuXHQgICAgSEwsICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhcnJpZXIg6L+Q6JCl5ZWG77yI5YmN56uv5Lmf5Y+W5LiN5Yiw77yJXG5cdCAgICBjbGllbnQubmV0d29ya1R5cGUgfHwgSEwsICAgLy8gYWNjZXNzIOe9kee7nOexu+Wei1xuXHQgIF07XG5cdCAgLy8gY29uc29sZS5sb2cobW9kZWwpO1xuXHQgIHJldHVybiBtb2RlbDtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2hhbmdlVG9PYmogPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHRpbWUgPSBkYXRhLmV2ZW50X3RpbWVzdGFtcC5nZXRUaW1lKCkudG9TdHJpbmcoKTtcblx0ICB2YXIgY2xpZW50ID0gZGF0YS5jbGllbnQgfHwge307XG5cdFxuXHQgIC8vIHZhciBVQSA9IGNsaWVudC51c2VyQWdlbnQgfHwgSEw7XG5cdCAgdmFyIExBTkcgPSBjbGllbnQubGFuZ3VhZ2UgfHwgSEw7XG5cdCAgdmFyIGdva2V5ID0gZGF0YS5nb2tleSB8fCB7fTtcblx0ICB2YXIgZXZlbnRfYXJncyA9IEpTT04uc3RyaW5naWZ5KGdva2V5KTtcblx0ICB2YXIgc2RrX2luZm8gPSBKU09OLnN0cmluZ2lmeSh7XG5cdCAgICBjdXN0b21TZGtJZDogZGF0YS5zZGtfaW5mby5jdXN0b21TZGtJZCB8fCAnJyxcblx0ICAgIHBsYXRmb3JtX3R5cGU6IGRhdGEuc2RrX2luZm8ucGxhdGZvcm1UeXBlIHx8ICcnLCAvL3dlY2hhdCwgJ2FsaXBheScsICdiYWlkdScsICd0YW9iYW8nXG5cdCAgfSk7XG5cdCAgXG5cdCAgdmFyIGFwcEtleSA9IGRhdGEuYXBwS2V5IHx8IGRhdGEuYXBwSWQgfHwgSEw7XG5cdCAgLy8g5Lia5Yqh5bqU55So55qE5omp5bGV5L+h5oGvXG5cdCAgdmFyIGFwcF9leHRfaW5mbyA9IEpTT04uc3RyaW5naWZ5KHtcblx0ICAgIGFwcElkOiBjbGllbnQuYXBwSWQgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ21pbmlBcHBJZCcpIHx8ICcnXG5cdCAgfSk7XG5cdCAgdmFyIHNlc3Npb25fYXJncyA9IEpTT04uc3RyaW5naWZ5KGRhdGEuc2Vzc2lvbkFyZ3MgfHwge30pO1xuXHQgIHZhciBnbG9iYWxfYXJncyA9IEpTT04uc3RyaW5naWZ5KGRhdGEuZ2xvYmFsQXJncyB8fCB7fSk7IC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG5cdCAgdmFyIGFyZzEgPSBkYXRhLmFyZzEgfHwgZGF0YS5sb2drZXkgfHwgSEw7XG5cdCAgaWYgKGFyZzEuaW5kZXhPZignLyQkXycpID09PSAwKSB7XG5cdCAgICBhcmcxID0gYXJnMS5zdWJzdHJpbmcoMSwgYXJnMS5sZW5ndGgpO1xuXHQgIH1cblx0ICBpZiAoZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScgJiYgZGF0YS50cmFja2VyRXZlbnRDb2RlKSB7XG5cdCAgICBhcmcxID0gZGF0YS50cmFja2VyRXZlbnRDb2RlO1xuXHQgIH1cblx0XG5cdCAgdmFyIE9iaiA9IHt9O1xuXHQgIE9iai5wbGF0Zm9ybSA9ICBkYXRhLnNka19pbmZvLnBsYXRmb3JtVHlwZSB8fCAnJztcblx0ICBPYmouc2RrX3R5cGUgPSBPYmoucGxhdGZvcm0gPyBPYmoucGxhdGZvcm0gKyAnbXAnIDogJyc7XG5cdCAgT2JqLmFwcGtleSA9IGFwcEtleTtcblx0ICBPYmouc2RrX3ZlcnNpb24gPSBkYXRhLnNka19pbmZvLmx2ZXI7IC8vIHNka192ZXJzaW9uICBTREvniYjmnKzvvIzov5nph4zlr7nlupRhcGx1c0pT55qE5YW35L2T54mI5pys5Y+377yM5aaCMS4wLjBcblx0ICAvLyB2YXIgbW9kZXJuT1MgPSBVQS5tYXRjaCgvaXBob25lfGlwYWR8YW5kcm9pZHxtYWNpbnRvc2h8V2luZG93cy9pKTtcblx0ICBPYmouZGV2aWNlX3R5cGUgPSBjbGllbnQuZGV2aWNlX21vZGVsIHx8ICcnO1xuXHQgIE9iai5vcyA9IGNsaWVudC5vcyB8fCAnJztcblx0ICBPYmoub3NfdmVyc2lvbiA9IGNsaWVudC5vc192ZXJzaW9uIHx8ICcnO1xuXHQgIE9iai5qc3ZlciA9IGRhdGEuc2RrX2luZm8uanN2ZXI7IC8vIHNka190eXBlIChhcGx1c19taW5pLmpzKSByZXNlcnZlXzEg5LqL5Lu25bGe5oCn77yaUFbnuqfnmoTml6Xlv5flj4LmlbAs6LeoUFboh6rliqjmuIXnqbrvvIzov5nph4zmmK9qc+Wkp+eJiOacrOWPt++8jGFwbHVzLmpzIHx8IGFwbHVzX21pbmkuanMgfHwgYXBsdXNfY2xvdWQuanM7XG5cdCAgLy8gT2JqLmRldmljZV9tb2RlbCA9IFVBOyAvLyBzZXJ2ZXIg56uv6YCa6L+HIEhUVFAgcmVxdWVzdCBoZWFkZXIg6I635Y+WXG5cdCAgT2JqLnBpeGVsX3JhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgJyc7XG5cdCAgdmFyIHcgPSBNYXRoLnJvdW5kKGNsaWVudC5zY3JlZW5XaWR0aCAqICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKSk7XG5cdCAgdmFyIGggPSBNYXRoLnJvdW5kKGNsaWVudC5zY3JlZW5IZWlnaHQgKiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSkpO1xuXHQgIE9iai5yZXNvbHV0aW9uID0gdyA+IGggPyB3ICsgJyonICsgaCA6IGggKyAnKicgKyB3O1xuXHQgIE9iai5sYW5ndWFnZSA9IExBTkc7XG5cdCAgT2JqLmFwcF92ZXJzaW9uID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcFZlcnNpb24nKSB8fCAnZGV2dG9vbHMnO1xuXHQgIC8vIGVrdiDpnIDopoHlrZfmrrVcblx0ICBPYmouYXJnMSA9IGFyZzE7XG5cdCAgT2JqLmV2ZW50X2FyZ3MgPSBldmVudF9hcmdzOyAvL2V2ZW50X2FyZ3Mg55So5oi36K6+572u55qEUFbnuqflj4LmlbAs6LeoUFbmuIXnqbogay1257uT5p6EIEDkupHmnbBcblx0ICBPYmouZXZlbnRfY29kZSA9IGRhdGEuZXZlbnRfY29kZSB8fCAnJztcblx0ICBPYmouc2Vzc2lvbkFyZ3MgPSBzZXNzaW9uX2FyZ3M7IC8vIHNlc3Npb25fYXJncyDnlKjmiLforr7nva7nmoRTZXNzaW9u57qn5Y+C5pWwLOi3qFNlc3Npb27muIXnqbpcblx0ICBPYmouZ2xvYmFsX2FyZ3MgPSBnbG9iYWxfYXJnczsgLy8gZ2xvYmFsX2FyZ3Mg55So5oi36K6+572u55qE5YWo5bGA5Y+C5pWwLCDnlJ/lkb3lkajmnJ/nuqfliKtcblx0ICBPYmouYXBwX2V4dF9pbmZvID0gYXBwX2V4dF9pbmZvOyAvLyBhcHBfZXh0X2luZm8gQXBw5omp5bGV5L+h5oGvXG5cdCAgT2JqLnRpbWUgPSB0aW1lOyAvL2V2ZW50X3RpbWVzdGFtcCDkuovku7bml6Xlv5fnlJ/miJDml7bpl7Qo5pys5ZywKSwgcHbkuLrpobXpnaLov5vlhaXml7bpl7Rcblx0ICBPYmouY25hID0gZGF0YS5jbmEgfHwgJyc7XG5cdCAgT2JqLnVybCA9IGRhdGEudXJsIHx8ICcnO1xuXHQgIE9iai5wcmUgPSBkYXRhLnByZSB8fCAnJztcblx0ICBPYmoubWV0aG9kID0gZGF0YS5tZXRob2QgfHwgJ0dFVCc7XG5cdCAgT2JqLmxvZ19pZCA9IGRhdGEuY2FjaGUgfHwgJyc7IC8vIGxvZ19pZCDmoIfor4bor6XmnaHml6Xlv5fnmoTllK/kuIBJRFxuXHQgIE9iai5zZGtfaW5mbyA9IHNka19pbmZvO1xuXHQgIE9iai5pc19hdXRvID0gZGF0YS5pc19hdXRvO1xuXHQgIE9iai50cmFja190eXBlID0gZGF0YS50cmFja190eXBlO1xuXHQgIHZhciBleGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJyk7XG5cdCAgaWYgKGV4ZGF0YSAmJiBleGRhdGEuYXBsdXNfdHJhY2tfZGVidWdfaWQpIHtcblx0ICAgIE9iai50cmFja19kZWJ1Z19pZCA9IGV4ZGF0YS5hcGx1c190cmFja19kZWJ1Z19pZDtcblx0ICB9XG5cdCAgcmV0dXJuIE9iajtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA3MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiDmi6bmiKrlubbmjIlodHRw5Y2P6K6u5Y+R6YCB5pel5b+XXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHQvLyB2YXIgbG9nX2Nsb3VkID0gcmVxdWlyZSgnLi9sb2dfY2xvdWQnKTtcblx0dmFyIHV0aWxHUSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEJhc2UuZXh0ZW5kKHtcblx0XG5cdCAgc3Vic2NyaWJlTG9nczogZnVuY3Rpb24gKGFjdGlvbiwgY2FsbGJhY2spIHtcblx0ICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIFthY3Rpb24sIGZ1bmN0aW9uIChvcmlEYXRhcykge1xuXHQgICAgICBpZiAob3JpRGF0YXMuc3RhdHVzID09PSBhcGx1c1N0YXRpYy5DT01QTEVURSkge1xuXHQgICAgICAgIGNhbGxiYWNrKG9yaURhdGFzKTtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHQgIH0sXG5cdFxuXHQgIGdldExvZ2ljU3ltYm9sOiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5mb3JtYXQgPT09ICdBTEknID8gJyYnIDogJ3x8Jztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlnKjlrZDnsbvkuK3lrp7njrBcblx0ICAgKiBAcGFyYW1zIHtPYmplY3R9IGRhdGFcblx0ICAgKi9cblx0ICBoYW5kbGVyTWlkZGxld2FyZTogZnVuY3Rpb24gKCkge30sXG5cdCAgXG5cdFxuXHQgIHdhdGNoTE9HOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgXG5cdCAgICAvLyDorqLpmIVwduS6i+S7tlxuXHQgICAgX3NlbGYuc3Vic2NyaWJlTG9ncyhhcGx1c1N0YXRpYy5NV19DSEFOR0VfUFYsIGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsICdwdicpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8g6K6i6ZiFaGpsai9hcGx1c+S6i+S7tlxuXHQgICAgX3NlbGYuc3Vic2NyaWJlTG9ncyhhcGx1c1N0YXRpYy5NV19DSEFOR0VfSEpMSiwgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgX3NlbGYuaGFuZGxlck1pZGRsZXdhcmUoZGF0YSwgYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgfSk7XG5cdCAgfSxcblx0XG5cdCAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLndhdGNoTE9HKCk7XG5cdCAgfVxuXHR9KTtcblxuXG4vKioqLyB9KSxcbi8qIDc0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHVtIOmAmumBk++8jOaUtuaVsOivt+axguS4iuaKpeaVsOaNrlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQWFyb2586ZKw5pitIDxjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20+XG5cdCAqL1xuXHR2YXIgY2xvbmVEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7XG5cdHZhciBidWlsZEhlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgbWFuZ2xlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdHZhciBiYXNlNjQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBjcmVhdGVFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHR2YXIgdXRpbFN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdHZhciBlYWNoTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciB1dGlsTW9uaXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXHR2YXIgYXBsdXNVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgdXRpbFBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblx0dmFyIHVtVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0LyoqXG5cdCAqIOWQjHVt6YCa6YGT54mI5pys55qE5bCP56iL5bqP5pS25pWw5LiK5oql5pWw5o2u5L2T55u45q+U77yM5LiN6ZyA6KaBIHNlc3Npb27vvIxzZXNzaW9uIOeUseacjeWKoeerr+ino+WGs1xuXHQgKiDlubbkuJQgZWt2IOayoeaciee8k+WtmOacuuWItlxuXHQqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsb2dkYXRhLCB1c2VyZGF0YSkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBnbG9iYWxkYXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbGRhdGEnKSB8fCB7fTtcblx0ICB2YXIgdXRtT2JqID0gZ2V0VXRtUGFyYW1zT2JqKCk7XG5cdCAgYXBsdXMuYXBwZW5kTWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5JywgdXRtT2JqKTtcblx0ICBpZiAoIWxvZ2RhdGEgfHwgIXVzZXJkYXRhIHx8IHV0aWxzLmNoZWNrRW1wdHlPYmoobG9nZGF0YSkgfHwgdXRpbHMuY2hlY2tFbXB0eU9iaih1c2VyZGF0YSkpIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdCAgdmFyIGRhdGEgPSB7fTtcblx0ICB2YXIgaGVhZGVyID0gY2xvbmVEZWVwKGJ1aWxkSGVhZGVyKGxvZ2RhdGEpKTtcblx0ICB2YXIgYV9hbm9ueV9pZCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCkgfHwgbG9nZGF0YS5jbmE7XG5cdCAgaWYgKGFfYW5vbnlfaWQpIHtcblx0ICAgIC8vIGhlYWRlci5hbm9ueV9pZCA9IGFfYW5vbnlfaWQ7XG5cdCAgICBoZWFkZXIuaWRfdHJhY2tpbmcuYW5vbnlfaWQgPSBhX2Fub255X2lkO1xuXHQgIH1cblx0ICBpZiAoZ2xvYmFsZGF0YS5fYWJmcGMpIHtcblx0ICAgIGhlYWRlci5pZF90cmFja2luZy5fYWJmcGMgPSBnbG9iYWxkYXRhLl9hYmZwYztcblx0ICB9XG5cdCAgLy8gZml4IGlkdHJhY2luZyBidWcsIGlmIHVzZXIgZG9uJ3Qgc2V0IF9kZXZfaWRcblx0ICB2YXIgYV9kZXZfaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpIHx8IGxvZ2RhdGEuY25hO1xuXHQgIGlmIChhX2Rldl9pZCkge1xuXHQgICAgLy8gaGVhZGVyLmRldl9pZCA9IGFfZGV2X2lkO1xuXHQgICAgaGVhZGVyLmlkX3RyYWNraW5nLmRldl9pZCA9IGFfZGV2X2lkO1xuXHQgIH1cblx0ICBcblx0ICBpZiAoYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuXHQgICAgdmFyIHV1aWQgPSBhcGx1cy5nZXRNZXRhSW5mbygndXVpZCcpO1xuXHQgICAgaWYgKHV1aWQpIHtcblx0ICAgICAgaGVhZGVyLmlkX3RyYWNraW5nLnVkID0gdXVpZDtcblx0ICAgIH1cblx0ICAgIHZhciB1bmlvbmlkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3VuaW9uaWQnKTtcblx0ICAgIGlmICh1bmlvbmlkKSB7XG5cdCAgICAgIGhlYWRlci5pZF90cmFja2luZy51bmlvbmlkID0gdW5pb25pZDtcblx0ICAgIH1cblx0ICAgIHZhciBhbm91eW1vdXNvcGVuaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYW5vdXltb3Vzb3BlbmlkJyk7XG5cdCAgICBpZiAoYW5vdXltb3Vzb3BlbmlkKSB7XG5cdCAgICAgIGhlYWRlci5pZF90cmFja2luZy5hbm9ueW1vdXNpZCA9IGFub3V5bW91c29wZW5pZDtcblx0ICAgIH1cblx0ICAgIHZhciBhbGlwYXlfaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYWxpcGF5aWQnKTtcblx0ICAgIGlmIChhbGlwYXlfaWQpIHtcblx0ICAgICAgaGVhZGVyLmlkX3RyYWNraW5nLmFsaXBheV9pZCA9IGFsaXBheV9pZDtcblx0ICAgIH1cblx0ICAgIHZhciBzd2FuaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnc3dhbmlkJyk7XG5cdCAgICBpZiAoc3dhbmlkKSB7XG5cdCAgICAgIGhlYWRlci5pZF90cmFja2luZy5hbm9ueW1vdXNpZCA9IHN3YW5pZDtcblx0ICAgIH1cblx0ICAgIHZhciB1c2VyUHJvZmlsZSA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLlVTRVJfUFJPRklMRV9LRVkpO1xuXHQgICAgaWYgKHVzZXJQcm9maWxlKSB7XG5cdCAgICAgIGhlYWRlci51c2VyX2luZm8gPSB1c2VyUHJvZmlsZTtcblx0ICAgIH1cblx0ICAgIHZhciBpbXAgPSB1dGlsU3RvcmUuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuXHQgICAgaWYgKGltcCkge1xuXHQgICAgICBoZWFkZXIuaW1wcmludCA9IGltcDtcblx0ICAgIH1cblx0ICAgIHZhciBpZF90eXBlID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuSURfVFlQRSkgfHwgJ2NuYWlkJztcblx0ICAgIGhlYWRlci5pZF90eXBlID0gaWRfdHlwZTtcblx0ICB9XG5cdCAgdmFyIG9wZW5pZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdvcGVuaWQnKTtcblx0ICBpZiAob3BlbmlkKSB7XG5cdCAgICBoZWFkZXIuaWRfdHJhY2tpbmcub3BlbmlkID0gb3BlbmlkO1xuXHQgIH1cblx0XG5cdCAgdmFyIGVrdiA9IG51bGw7XG5cdCAgaWYgKGxvZ2RhdGEuZXZlbnRfY29kZSA9PT0gJzIwMDEnKSB7XG5cdCAgICBla3YgPSBfYnVpbGRQVkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZWt2ID0gX2J1aWxkSEpMSkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKTtcblx0ICB9XG5cdCAgaWYgKGVrdikge1xuXHQgICAgZGF0YSA9IHtcblx0ICAgICAgYW5hbHl0aWNzOiB7XG5cdCAgICAgICAgZWt2czoge1wic2Vzc2lvbmlkXCIgOiBbY2xvbmVEZWVwKGVrdildfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICB2YXIgdXNlcklkID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpO1xuXHQgIGlmICh1c2VySWQgJiYgZGF0YS5hbmFseXRpY3MpIHtcblx0ICAgIGRhdGEuYW5hbHl0aWNzLmFjdGl2ZV91c2VyID0ge1xuXHQgICAgICBwdWlkOiB1c2VySWQsXG5cdCAgICAgIHByb3ZpZGVyOiBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpXG5cdCAgICB9O1xuXHQgIH1cblx0ICBkYXRhLmhlYWRlciA9IHV0aWxzLmFzc2lnbihoZWFkZXIsIGRhdGEuaGVhZGVyLCB7XG5cdCAgICB0czogRGF0ZS5ub3coKSxcblx0ICAgIHRyYWNlSWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyBEYXRlLm5vdygpICsgdXRpbHMuZ2V0UmFuZG9tU3RyKDkpXG5cdCAgfSk7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBfc3RhcnRJZCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGFwbHVzU3RhdGljLlNUQVJUX0lEKTtcblx0ICAgIGlmIChfc3RhcnRJZCkge1xuXHQgICAgICBkYXRhLmhlYWRlci5zdGFydF9pZCA9IF9zdGFydElkO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgX3N0YXJ0SWQgPSB1bVV0aWxzLmdldFN0YXJ0SWQoKTtcblx0ICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oYXBsdXNTdGF0aWMuU1RBUlRfSUQsIF9zdGFydElkKTtcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHt9XG5cdCAgdmFyIG1hbmdsZURhdGEgPSBtYW5nbGUoZGF0YSk7XG5cdCAgdmFyIHJlcXVlc3REYXRhID0ganNvblV0aWwuc3RyaW5nZnkobWFuZ2xlRGF0YSk7XG5cdCAgdWxvZygpLmkoJ2V2ZW50IGRhdGE6ICcsbWFuZ2xlRGF0YSk7XG5cdCAgcmV0dXJuIGJhc2U2NC5lbmNvZGUocmVxdWVzdERhdGEpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0VXRtUGFyYW1zT2JqICgpIHtcblx0ICB2YXIgb2JqID0ge307XG5cdCAgdmFyIHVwID0gdXRpbERhc2guZ2V0VXJsUGFyYW1zKCk7XG5cdCAgdHJ5IHtcblx0ICAgIGVhY2hNYXAodXAsIGZ1bmN0aW9uIChrLCB2KSB7XG5cdCAgICAgIC8vIOmBv+WFjeS4uuepuuaXtumHjeWGmWdsb2JhbHByb3BlcnR55YaF55qE5bGe5oCnXG5cdCAgICAgIGlmKGsuaW5kZXhPZigndXRtXycpID09PSAwKSB7XG5cdCAgICAgICAgb2JqW2tdID0gdjtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICB2YXIgdXRtU3RvcmFnZSA9IHV0aWxTdG9yZS5nZXQoYXBsdXNTdGF0aWMuQVBMVVNfTEFURUFTVF9VVE0pO1xuXHQgICAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KG9iaikpIHtcblx0ICAgICAgaWYgKCF1dG1TdG9yYWdlIHx8IGpzb25VdGlsLnN0cmluZ2Z5KG9iaikgIT09IHV0bVN0b3JhZ2UpIHtcblx0ICAgICAgICB1dGlsU3RvcmUuc2V0KGFwbHVzU3RhdGljLkFQTFVTX0xBVEVBU1RfVVRNLCBqc29uVXRpbC5zdHJpbmdmeShvYmopKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JqID0ganNvblV0aWwucGFyc2UodXRtU3RvcmFnZSkgfHwge307XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge31cblx0ICByZXR1cm4gb2JqO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRTaGFyZUluZm8oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgaWYgKGFwbHVzLl9oNV9zaGFyZV9lbmFibGUpIHtcblx0ICAgIHZhciBzaGFyZUluZm8gPSB7fTtcblx0ICAgIHZhciBzaGFyZWZyb20gPSB1dGlsU3RvcmUuZ2V0KCdfX3NoYXJlZnJvbScpO1xuXHQgICAgdmFyIGZyb21hcHBrZXkgPSB1dGlsU3RvcmUuZ2V0KCdfX2Zyb21hcHBrZXknKTtcblx0ICAgIHZhciBfdW1fc3NyYyA9IHV0aWxTdG9yZS5nZXQoJ191bV9zc3JjJyk7IFxuXHQgICAgdmFyIF91bV9jaGFubmVsID0gdXRpbFN0b3JlLmdldCgnX3VtX2NoYW5uZWwnKTtcblx0ICAgIHZhciBfdW1fY2FtcGFpZ24gPSB1dGlsU3RvcmUuZ2V0KCdfdW1fY2FtcGFpZ24nKTtcblx0ICAgIGlmIChzaGFyZWZyb20pIHtcblx0ICAgICAgc2hhcmVJbmZvLnNoYXJlZnJvbSA9IHNoYXJlZnJvbTtcblx0ICAgIH1cblx0ICAgIGlmIChmcm9tYXBwa2V5KSB7XG5cdCAgICAgIHNoYXJlSW5mby5mcm9tYXBwa2V5ID0gZnJvbWFwcGtleTtcblx0ICAgIH1cblx0ICAgIGlmIChfdW1fc3NyYykge1xuXHQgICAgICBzaGFyZUluZm8uX3VtX3NzcmMgPSBfdW1fc3NyYztcblx0ICAgIH1cblx0ICAgIGlmIChfdW1fY2hhbm5lbCkge1xuXHQgICAgICBzaGFyZUluZm8uX3VtX2NoYW5uZWwgPSBfdW1fY2hhbm5lbDtcblx0ICAgIH1cblx0ICAgIGlmIChfdW1fY2FtcGFpZ24pIHtcblx0ICAgICAgc2hhcmVJbmZvLl91bV9jYW1wYWlnbiA9IF91bV9jYW1wYWlnbjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBzaGFyZUluZm87XG5cdCAgfVxuXHQgIHJldHVybjtcblx0fVxuXHRcblx0Ly8gZnVuY3Rpb24gZ2V0UGFnZU5hbWUocHJvcGVydGllcywgbG9nZGF0YSkge1xuXHQvLyAgIHZhciBwYWdlTWFuYWdlclBhZ2VOYW1lID0gcGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUobG9jYXRpb24ucGF0aG5hbWUpO1xuXHQvLyAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQvLyAgIC8vIOaWsOWinuWkmumhteW6lOeUqHBhZ2VuYW1l6K6+572uIEDosIvlo6sg55qE6ZyA5rGCXG5cdC8vICAgdmFyIG1ldGFQYWdlTmFtZSA9IGFwbHVzLmdldE1ldGFJbmZvICYmIGFwbHVzLmdldE1ldGFJbmZvKFwiYXBsdXMtcGFnZW5hbWVcIikgfHwgXCJcIjsgIFxuXHQvLyAgIHJldHVybiBwcm9wZXJ0aWVzLnNwbUIgfHwgcHJvcGVydGllcy5wYWdlX25hbWUgfHwgKGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5kYXRhc2V0ICYmIGRvY3VtZW50LmJvZHkuZGF0YXNldC5wYWdlbmFtZSkgfHwgbWV0YVBhZ2VOYW1lIHx8IHBhZ2VNYW5hZ2VyUGFnZU5hbWUgfHwgbG9nZGF0YS51cmwuc3BsaXQoJz8nKVswXSB8fCAnLSc7XG5cdC8vIH07XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRISkxKRXZlbnQobG9nZGF0YSwgdXNlcmRhdGEpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB0cnkge1xuXHQgICAgdmFyIGV2ZW50QXJncyA9IHt9O1xuXHQgICAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG5cdCAgICBldmVudEFyZ3MuZ3AgPSBncDtcblx0ICAgIHZhciBnb2tleSA9IHVzZXJkYXRhLmdva2V5O1xuXHQgICAgLy8gY29udmVydCB1cmwgcGFyYW1ldGVyIHRvIGEgamF2YXNjcmlwdCBvYmplY3Rcblx0ICAgIHZhciBwcm9wZXJ0aWVzO1xuXHQgICAgaWYgKHR5cGVvZiBnb2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgcHJvcGVydGllcyA9IGFwbHVzVXRpbHMuYXJyMm9iaihhcGx1c1V0aWxzLnBhcmFtMmFycihnb2tleSkpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgZ29rZXkgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHByb3BlcnRpZXMgPSBjbG9uZURlZXAoZ29rZXkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvcGVydGllcyA9IHt9O1xuXHQgICAgfVxuXHQgICAgLy8gJCRfYXBwX2xpbmvnmoR0YXJnZXRBcHBLZXlcblx0ICAgIGlmKHByb3BlcnRpZXMudGFyZ2V0QXBwS2V5KSB7XG5cdCAgICAgIGV2ZW50QXJncy50YXJnZXRBcHBLZXkgPSBwcm9wZXJ0aWVzLnRhcmdldEFwcEtleTtcblx0ICAgICAgZGVsZXRlIHByb3BlcnRpZXMudGFyZ2V0QXBwS2V5O1xuXHQgICAgfTtcblx0ICAgIC8vIEDmloflv4Mg5piv5ZCm5Li66Ieq5Yqo5Z+L54K5IGlzX2F1dG8gPSAxXG5cdCAgICAvLyBA5paH5b+DIOaYr+WQpuS4uuiHquWKqOWfi+eCuSjlhajln4vngrkpIHRyYWNrX3R5cGUgPSAxXG5cdCAgICBpZiAocHJvcGVydGllcy5pc19hdXRvKSB7XG5cdCAgICAgIGV2ZW50QXJncy5pc19hdXRvID0gMTtcblx0ICAgICAgZXZlbnRBcmdzLnRyYWNrX3R5cGUgPSBcIjFcIjtcblx0ICAgICAgZGVsZXRlIHByb3BlcnRpZXMuaXNfYXV0bztcblx0ICAgICAgZGVsZXRlIHByb3BlcnRpZXNbJ2FwbHVzLWFlJ107XG5cdCAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzWydhcGx1cy1jbGsnXTtcblx0ICAgICAgZGVsZXRlIHByb3BlcnRpZXMuYXV0b19lbGVtZW50O1xuXHQgICAgICAvLyBA5paH5b+DIEDpkrDmmK0g5LiK5oql5YWo5Z+L54K555qE5LqL5Lu257G75Z6LXG5cdCAgICAgIGlmIChsb2dkYXRhLmV2ZW50X2NvZGUpIHtcblx0ICAgICAgICBldmVudEFyZ3MuZXZlbnRfdHlwZV9pZCA9IGxvZ2RhdGEuZXZlbnRfY29kZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZXZlbnRBcmdzLmlzX2F1dG8gPSAwO1xuXHQgICAgICBldmVudEFyZ3MudHJhY2tfdHlwZSA9IFwiMFwiO1xuXHQgICAgfVxuXHQgICAgLy8gQOaWh+W/gyDlhajln4vngrnkuIrmiqXmjqfku7blsZ7mgKdcblx0ICAgIGlmIChwcm9wZXJ0aWVzLmFwKSB7XG5cdCAgICAgIGV2ZW50QXJncy5hcCA9IHByb3BlcnRpZXMuYXA7XG5cdCAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmFwO1xuXHQgICAgfVxuXHRcblx0XG5cdCAgICBldmVudEFyZ3MucGFnZV90aXRsZSA9IHByb3BlcnRpZXMucGFnZV90aXRsZSB8fCB1dGlsUGFnZS5nZXRQYWdlVGl0bGUobG9jYXRpb24ucGF0aG5hbWUpIHx8IGRvY3VtZW50LnRpdGxlIHx8ICcnO1xuXHQgICAgcHJvcGVydGllcy5wYWdlX3RpdGxlICYmIGRlbGV0ZSBwcm9wZXJ0aWVzLnBhZ2VfdGl0bGU7XG5cdCAgICBpZiAobG9nZGF0YS51cmwpIHtcblx0ICAgICAgZXZlbnRBcmdzLnBhZ2VfbmFtZSA9IHV0aWxQYWdlLmdldFBhZ2VOYW1lKGxvY2F0aW9uLnBhdGhuYW1lLCBwcm9wZXJ0aWVzKTtcblx0ICAgICAgZXZlbnRBcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcblx0ICAgICAgaWYgKGV2ZW50QXJncy5wYWdlX25hbWUgJiYgcHJvcGVydGllcy5zcG1DKSB7XG5cdCAgICAgICAgZXZlbnRBcmdzWydzcG0tY250J10gPSBbZW5jb2RlVVJJQ29tcG9uZW50KGV2ZW50QXJncy5wYWdlX25hbWUpLCBlbmNvZGVVUklDb21wb25lbnQocHJvcGVydGllcy5zcG1DKSwgZW5jb2RlVVJJQ29tcG9uZW50KHByb3BlcnRpZXMuc3BtRCldLmZpbHRlcihmdW5jdGlvbih2KXtcblx0ICAgICAgICAgIHJldHVybiAhIXY7XG5cdCAgICAgICAgfSkuam9pbignLicpO1xuXHQgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLnNwbUM7XG5cdCAgICAgICAgZGVsZXRlIHByb3BlcnRpZXMuc3BtRDtcblx0ICAgICAgICBkZWxldGUgcHJvcGVydGllcy5zcG1CO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgY2xvbmVQID0gY2xvbmVEZWVwKHByb3BlcnRpZXMpO1xuXHQgICAgZm9yICh2YXIgayBpbiBjbG9uZVApIHtcblx0ICAgICAgaWYgKHR5cGVvZiBrID09PSAnc3RyaW5nJyAmJiB1dGlscy5zdGFydHNXaXRoKGssICdfJykpIHtcblx0ICAgICAgICBldmVudEFyZ3Nba10gPSBjbG9uZVBba107XG5cdCAgICAgICAgZGVsZXRlIHByb3BlcnRpZXNba107XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGV2ZW50QXJncyA9IHV0aWxEYXNoLmFzc2lnbihldmVudEFyZ3MsIF9idWlsZFNoYXJlSW5mbygpIHx8IHt9KTtcblx0XG5cdCAgICBldmVudEFyZ3MucmFuayA9IHV0aWxNb25pdG9yLnJhbmsoKTtcblx0ICAgIGlmICh1c2VyZGF0YS5sb2drZXkgPT09IGFwbHVzU3RhdGljLlBBR0VfTEVBVkUpIHtcblx0ICAgICAgZXZlbnRBcmdzLmFtb3VudCA9IGV2ZW50QXJncy5yYW5rO1xuXHQgICAgfVxuXHQgICAgdmFyIGV2ZW50ID0gY3JlYXRlRXZlbnQodXNlcmRhdGEubG9na2V5LCB1dGlsRGFzaC5hc3NpZ24oZXZlbnRBcmdzLCB7IGN1c3A6IHByb3BlcnRpZXN9ICkpO1xuXHQgICAgcmV0dXJuIGV2ZW50O1xuXHQgIH0gY2F0Y2ggKGUpIHsgXG5cdCAgICB1bG9nKCkudygnSlNPTiBwYXJzZSBmYWlsZWQnLCBlKTtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRQVkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7ICBcblx0ICB2YXIgcHZhcmdzID0ge307XG5cdCAgcHZhcmdzLnIgPSBsb2dkYXRhLmFyZzE7XG5cdCAgcHZhcmdzLmdwID0gZ3A7XG5cdFxuXHQgIHB2YXJncy5pc19hdXRvID0gISFsb2dkYXRhLmlzX2F1dG8gPyAxIDogMDtcblx0ICBwdmFyZ3MudHJhY2tfdHlwZSA9IGxvZ2RhdGEudHJhY2tfdHlwZTtcblx0XG5cdCAgdmFyIGFyZ3MgPSB1c2VyZGF0YTtcblx0ICB2YXIgcHJvcGVydGllcyA9IGNsb25lRGVlcCh1dGlscy5kZWxldGVJbmZvKGNsb25lRGVlcChhcmdzKSwgWydfYW5vbnlfaWQnLCAnX2Rldl9pZCcsICdfc2Vzc2lvbl9pZCcsICdfdXNlcl9pZCcsICdfdXNlcl9uaWNrJywgJ19zcmNfcG9zX2lkJywgJ2NuYScsICdfYWJmcGMnXSkpO1xuXHQgIFxuXHQgIGlmIChwcm9wZXJ0aWVzLmR1cmF0aW9uKSB7XG5cdCAgICBwdmFyZ3MuZHVyYXRpb24gPSBwcm9wZXJ0aWVzLmR1cmF0aW9uO1xuXHQgICAgZGVsZXRlIHByb3BlcnRpZXMuZHVyYXRpb247XG5cdCAgfVxuXHRcblx0ICBwdmFyZ3MucGFnZV90aXRsZSA9IHByb3BlcnRpZXMucGFnZV90aXRsZSB8fCB1dGlsUGFnZS5nZXRQYWdlVGl0bGUobG9jYXRpb24ucGF0aG5hbWUpIHx8IGRvY3VtZW50LnRpdGxlIHx8ICcnO1xuXHQgIHByb3BlcnRpZXMucGFnZV90aXRsZSAmJiBkZWxldGUgcHJvcGVydGllcy5wYWdlX3RpdGxlO1xuXHRcblx0ICBpZiAobG9nZGF0YS51cmwpIHtcblx0ICAgIHB2YXJncy5wYWdlX25hbWUgPSB1dGlsUGFnZS5nZXRQYWdlTmFtZShsb2NhdGlvbi5wYXRobmFtZSwgcHJvcGVydGllcyk7XG5cdCAgICBwdmFyZ3MudXJsID0gbG9nZGF0YS51cmw7XG5cdCAgICBwdmFyZ3NbJ3NwbS1jbnQnXSA9IGVuY29kZVVSSUNvbXBvbmVudChwdmFyZ3MucGFnZV9uYW1lKTtcblx0ICB9XG5cdFxuXHQgIGlmIChsb2dkYXRhLnByZSkge1xuXHQgICAgcHZhcmdzLnJlZl91cmwgPSBsb2dkYXRhLnByZSB8fCAnLSc7XG5cdCAgICBpZiAoYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSAmJiBwdmFyZ3MucmVmX3VybC5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHZhciBycyA9IHB2YXJncy5yZWZfdXJsLm1hdGNoKC8oXFx3fC0pK1xcLihcXHd8LSkrXFwuKFxcd3wtKSsvKTtcblx0ICAgICAgaWYgKHJzICYmIHJzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBwdmFyZ3MuX3VtX3JlZmVyZXJfZG9tYWluID0gcnNbMF07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcHZhcmdzLnJhbmsgPSB1dGlsTW9uaXRvci5yYW5rKCk7XG5cdCAgcHZhcmdzID0gdXRpbERhc2guYXNzaWduKHB2YXJncywgX2J1aWxkU2hhcmVJbmZvKCkgfHwge30pO1xuXHQgIHJldHVybiBjcmVhdGVFdmVudChhcGx1c1N0YXRpYy5QQUdFX1NUQVJULCB1dGlsRGFzaC5hc3NpZ24ocHZhcmdzLCB7IGN1c3A6IHByb3BlcnRpZXMgfSkpO1xuXHR9XG5cblxuLyoqKi8gfSksXG4vKiA3NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDlhYvpmobkuIDkuKpvYmplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIGNsb25lRGVlcCAob2JqKSB7XG5cdCAgdmFyIHN0cjtcblx0ICB2YXIgbmV3b2JqID0gQXJyYXkuaXNBcnJheShvYmopID8gW10gOiB7fTsgLy9GaXggb2JqLmNvbnRydWN0b3IgdHlwZUVycm9yIGNvbnN0cnVjdG9yIHVuZGVmaW5lZFxuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG5cdCAgICBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopOyAvL+ezu+WIl+WMluWvueixoVxuXHQgICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmb3IgKHZhciBpIGluIG9iaikge1xuXHQgICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbmV3b2JqO1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gY2xvbmVEZWVwO1xuXG4vKioqLyB9KSxcbi8qIDc2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgdmFyIGhlYWRlciA9IHt9O1xuXHQgIGhlYWRlci5zZGtfdHlwZSA9IGRhdGEuc2RrX3R5cGU7XG5cdCAgaGVhZGVyLmFwcGtleSA9IGRhdGEuYXBwa2V5O1xuXHQgIGhlYWRlci5zZGtfdmVyc2lvbiA9IGRhdGEuc2RrX3ZlcnNpb247XG5cdCAgaGVhZGVyLmRldmljZV90eXBlID0gZGF0YS5kZXZpY2VfdHlwZTtcblx0ICBoZWFkZXIub3MgPSBkYXRhLm9zO1xuXHQgIGhlYWRlci5vc192ZXJzaW9uID0gZGF0YS5vc192ZXJzaW9uO1xuXHQgIGhlYWRlci5wbGF0Zm9ybSA9IGRhdGEucGxhdGZvcm07XG5cdCAgaGVhZGVyLnBpeGVsX3JhdGlvID0gZGF0YS5waXhlbF9yYXRpbztcblx0ICBoZWFkZXIucmVzb2x1dGlvbiA9IGRhdGEucmVzb2x1dGlvbjtcblx0ICBoZWFkZXIubGFuZ3VhZ2UgPSBkYXRhLmxhbmd1YWdlO1xuXHQgIGhlYWRlci5hcHBfdmVyc2lvbiA9IGRhdGEuYXBwX3ZlcnNpb247XG5cdCAgaGVhZGVyLmpzdmVyID0gZGF0YS5qc3Zlcjtcblx0ICBoZWFkZXIucHJlID0gZGF0YS5wcmU7XG5cdCAgaGVhZGVyLnVybCA9IGRhdGEudXJsO1xuXHQgIGhlYWRlci5kZWJ1Z0lkID0gZGF0YS50cmFja19kZWJ1Z19pZDtcblx0ICBoZWFkZXIuaWRfdHJhY2tpbmcgPSB7fTtcblx0ICByZXR1cm4gaGVhZGVyO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDc3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0dmFyIGFuYWx5dGljc01hcCA9IHtcblx0ICBla3ZzOiAnZScsXG5cdCAgYWN0aXZlX3VzZXI6ICdhY3RpdmVfdXNlcidcblx0fTtcblx0XG5cdHZhciBoZWFkZXJNYXAgPSB7XG5cdCAgc2RrX3R5cGU6ICdzZHQnLFxuXHQgIGRldmljZV9tb2RlbDogJ2RtJyxcblx0ICBsYW5ndWFnZTogJ2xhbmcnLFxuXHQgIGRldmljZV90eXBlOiAnZHQnLFxuXHQgIG9zX3ZlcnNpb246ICdvdicsXG5cdCAgYXBwa2V5OiAnYWsnLFxuXHQgIHNka192ZXJzaW9uOiAnc3YnLFxuXHQgIHJlc29sdXRpb246ICdybCcsXG5cdCAgdGVzdFRva2VuOiAndHRuJyxcblx0ICBwaXhlbF9yYXRpbzogJ3ByJyxcblx0ICBfaWQ6ICdpZCcsXG5cdCAgaWRfdHlwZTogJ2l0Jyxcblx0ICBpZF90cmFja2luZzogJ2l0cicsXG5cdCAgaW1wcmludDogJ2ltcCcsXG5cdCAgZGVidWdJZDogJ2RrJ1xuXHR9O1xuXHRcblx0dmFyIGlkTWFwID0ge1xuXHQgIHV1aWQ6ICd1ZCcsXG5cdCAgdW5pb25pZDogJ3VuZCcsXG5cdCAgb3BlbmlkOiAnb2QnLFxuXHQgIGFub255bW91c2lkOiAnbmQnLFxuXHQgIGFsaXBheV9pZDogJ2FkJyxcblx0ICBkZXZpY2VfaWQ6ICdkZCcsXG5cdCAgdXNlcmlkOiAncHVpZCdcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgIHJldHVybiB7XG5cdCAgICBoOiBfbWFuZ2xlSGVhZGVyKGRhdGEuaGVhZGVyLCBoZWFkZXJNYXApLFxuXHQgICAgYTogX21hbmdsZUFuYWx5dGljcyhkYXRhLmFuYWx5dGljcywgYW5hbHl0aWNzTWFwKVxuXHQgIH07XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfbWFuZ2xlSGVhZGVyKGhlYWRlciwgbWFwKSB7XG5cdCAgdmFyIHJlc3VsdCA9IF9tYW5nbGVPYmooaGVhZGVyLCBtYXApO1xuXHRcblx0ICBpZiAoaGVhZGVyICYmIGhlYWRlci5pZF90cmFja2luZykge1xuXHQgICAgcmVzdWx0W21hcC5pZF90cmFja2luZyB8fCAnaWRfdHJhY2tpbmcnXSA9IF9tYW5nbGVPYmooaGVhZGVyLmlkX3RyYWNraW5nLCBpZE1hcCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX21hbmdsZU9iaihvYmosIG1hcCkge1xuXHQgIHZhciByZXN1bHQgPSB7fTtcblx0XG5cdCAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgaWYgKG1hcFtrZXldKSB7XG5cdCAgICAgIHJlc3VsdFttYXBba2V5XV0gPSBvYmpba2V5XTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX21hbmdsZUFuYWx5dGljcyhhbmFseXRpY3MsIG1hcCkge1xuXHQgIHZhciByZXN1bHQgPSB7fTtcblx0XG5cdCAgaWYgKGFuYWx5dGljcykge1xuXHQgICAgZm9yICh2YXIgcHJvcCBpbiBhbmFseXRpY3MpIHtcblx0ICAgICAgaWYgKGFuYWx5dGljc1twcm9wXSkge1xuXHQgICAgICAgIHJlc3VsdFttYXBbcHJvcF1dID0gYW5hbHl0aWNzW3Byb3BdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cbi8qKiovIH0pLFxuLyogNzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHR2YXIgYjY0Y2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cdHZhciBiNjR0YWIgPSAoZnVuY3Rpb24gKGJpbikge1xuXHQgIHZhciB0ID0ge307XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBiaW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB0W2Jpbi5jaGFyQXQoaSldID0gaTtcblx0ICByZXR1cm4gdDtcblx0fSkoYjY0Y2hhcnMpO1xuXHR2YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcblx0dmFyIGNiX3V0b2IgPSBmdW5jdGlvbiAoYykge1xuXHQgIHZhciBjYztcblx0ICBpZiAoYy5sZW5ndGggPCAyKSB7XG5cdCAgICBjYyA9IGMuY2hhckNvZGVBdCgwKTtcblx0ICAgIHJldHVybiBjYyA8IDEyOCA/IGMgOiBjYyA8IDIwNDggPyBmcm9tQ2hhckNvZGUoMTkyIHwgY2MgPj4+IDYpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpIDogZnJvbUNoYXJDb2RlKDIyNCB8IGNjID4+PiAxMiAmIDE1KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgY2MgPSA2NTUzNiArIChjLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKiAxMDI0ICsgKGMuY2hhckNvZGVBdCgxKSAtIDU2MzIwKTtcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoMjQwIHwgY2MgPj4+IDE4ICYgNykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDEyICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuXHQgIH1cblx0fTtcblx0dmFyIHJlX3V0b2IgPSAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGRl18W15cXHgwMC1cXHg3Rl0vZztcblx0dmFyIHV0b2IgPSBmdW5jdGlvbiAodSkge1xuXHQgIHJldHVybiB1LnJlcGxhY2UocmVfdXRvYiwgY2JfdXRvYik7XG5cdH07XG5cdHZhciBjYl9lbmNvZGUgPSBmdW5jdGlvbiAoY2NjKSB7XG5cdCAgdmFyIHBhZGxlbiA9IFswLCAyLCAxXVtjY2MubGVuZ3RoICUgM10sXG5cdCAgICBvcmQgPSBjY2MuY2hhckNvZGVBdCgwKSA8PCAxNiB8IChjY2MubGVuZ3RoID4gMSA/IGNjYy5jaGFyQ29kZUF0KDEpIDogMCkgPDwgOCB8IChjY2MubGVuZ3RoID4gMiA/IGNjYy5jaGFyQ29kZUF0KDIpIDogMCksXG5cdCAgICBjaGFycyA9IFtiNjRjaGFycy5jaGFyQXQob3JkID4+PiAxOCksIGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDEyICYgNjMpLCBwYWRsZW4gPj0gMiA/ICc9JyA6IGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDYgJiA2MyksIHBhZGxlbiA+PSAxID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCAmIDYzKV07XG5cdCAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuXHR9O1xuXHR2YXIgYnRvYSA9IGZ1bmN0aW9uIChiKSB7XG5cdCAgcmV0dXJuIGIucmVwbGFjZSgvW1xcc1xcU117MSwzfS9nLCBjYl9lbmNvZGUpO1xuXHR9O1xuXHR2YXIgX2VuY29kZSA9IGZ1bmN0aW9uICh1KSB7XG5cdCAgcmV0dXJuIGJ0b2EodXRvYih1KSk7XG5cdH07XG5cdHZhciBlbmNvZGUgPSBmdW5jdGlvbiAodSwgdXJpc2FmZSkge1xuXHQgIHJldHVybiAhdXJpc2FmZSA/IF9lbmNvZGUoU3RyaW5nKHUpKSA6IF9lbmNvZGUoU3RyaW5nKHUpKS5yZXBsYWNlKC9bK1xcL10vZywgZnVuY3Rpb24gKG0wKSB7XG5cdCAgICByZXR1cm4gbTAgPT0gJysnID8gJy0nIDogJ18nO1xuXHQgIH0pLnJlcGxhY2UoL1xcPS9nLCAnJyk7XG5cdH07XG5cdC8vIHZhciBlbmNvZGVVUkkgPSBmdW5jdGlvbiAodSkge1xuXHQvLyAgIHJldHVybiBlbmNvZGUodSwgdHJ1ZSk7XG5cdC8vIH07XG5cdHZhciByZV9idG91ID0gbmV3IFJlZ0V4cChbJ1vDgC3Dn11bwoAtwr9dJywgJ1vDoC3Dr11bwoAtwr9dezJ9JywgJ1vDsC3Dt11bwoAtwr9dezN9J10uam9pbignfCcpLCAnZycpO1xuXHR2YXIgY2JfYnRvdSA9IGZ1bmN0aW9uIChjY2NjKSB7XG5cdCAgc3dpdGNoIChjY2NjLmxlbmd0aCkge1xuXHQgIGNhc2UgNDpcblx0ICAgIHZhciBjcCA9ICg3ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxOCB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMikpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgzKSwgb2Zmc2V0ID0gY3AgLSA2NTUzNjtcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKG9mZnNldCA+Pj4gMTApICsgNTUyOTYpICsgZnJvbUNoYXJDb2RlKChvZmZzZXQgJiAxMDIzKSArIDU2MzIwKTtcblx0ICBjYXNlIDM6XG5cdCAgICByZXR1cm4gZnJvbUNoYXJDb2RlKCgxNSAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSk7XG5cdCAgZGVmYXVsdDpcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDMxICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpO1xuXHQgIH1cblx0fTtcblx0dmFyIGJ0b3UgPSBmdW5jdGlvbiAoYikge1xuXHQgIHJldHVybiBiLnJlcGxhY2UocmVfYnRvdSwgY2JfYnRvdSk7XG5cdH07XG5cdHZhciBjYl9kZWNvZGUgPSBmdW5jdGlvbiAoY2NjYykge1xuXHQgIHZhciBsZW4gPSBjY2NjLmxlbmd0aCxcblx0ICAgIHBhZGxlbiA9IGxlbiAlIDQsXG5cdCAgICBuID0gKGxlbiA+IDAgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMCldIDw8IDE4IDogMCkgfCAobGVuID4gMSA/IGI2NHRhYltjY2NjLmNoYXJBdCgxKV0gPDwgMTIgOiAwKSB8IChsZW4gPiAyID8gYjY0dGFiW2NjY2MuY2hhckF0KDIpXSA8PCA2IDogMCkgfCAobGVuID4gMyA/IGI2NHRhYltjY2NjLmNoYXJBdCgzKV0gOiAwKSxcblx0ICAgIGNoYXJzID0gW2Zyb21DaGFyQ29kZShuID4+PiAxNiksIGZyb21DaGFyQ29kZShuID4+PiA4ICYgMjU1KSwgZnJvbUNoYXJDb2RlKG4gJiAyNTUpXTtcblx0ICBjaGFycy5sZW5ndGggLT0gWzAsIDAsIDIsIDFdW3BhZGxlbl07XG5cdCAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuXHR9O1xuXHR2YXIgYXRvYiA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGEucmVwbGFjZSgvW1xcc1xcU117MSw0fS9nLCBjYl9kZWNvZGUpO1xuXHR9O1xuXHR2YXIgX2RlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGJ0b3UoYXRvYihhKSk7XG5cdH07XG5cdHZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYSkge1xuXHQgIHJldHVybiBfZGVjb2RlKFN0cmluZyhhKS5yZXBsYWNlKC9bLV9dL2csIGZ1bmN0aW9uIChtMCkge1xuXHQgICAgcmV0dXJuIG0wID09ICctJyA/ICcrJyA6ICcvJztcblx0ICB9KS5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL10vZywgJycpKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZW5jb2RlID0gZW5jb2RlO1xuXHRleHBvcnRzLmRlY29kZSA9IGRlY29kZTtcblxuLyoqKi8gfSksXG4vKiA3OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IGV2ZW50LmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdC8vIHZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXHQvLyB2YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIganNvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgcHJvcGVydGllcykge1xuXHQgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnIHx8ICFpZCkge1xuXHQgICAgdWxvZygpLncoJ2V2ZW50IGxvZ2tleSBpcyBpbnZhbGlkLCBpZCA9JywgaWQgfHwgXCInJyBldmVudCBwcm9wZXJ0aWVzID0gXCIsIGpzb25VdGlsLnN0cmluZ2Z5KHByb3BlcnRpZXMuY3VzcCkpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgZXZlbnQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIGV2ZW50LmlkID0gaWQ7XG5cdCAgaWYgKCFwcm9wZXJ0aWVzIHx8ICFwcm9wZXJ0aWVzLnRzKSB7XG5cdCAgICBldmVudC50cyA9IERhdGUubm93KCk7XG5cdCAgfVxuXHQgIHZhciBwcm9wc1R5cGUgPSB0eXBlb2YgcHJvcGVydGllcztcblx0ICBpZiAocHJvcHNUeXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcblx0ICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSkge1xuXHQgICAgICAgIGV2ZW50W2tleV0gPSBwcm9wZXJ0aWVzW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gZml477ya5rig6YGT5bGe5oCn6KKr6KaG55uWXG5cdCAgLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgLy8gdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG5cdCAgLy8gaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuXHQgIC8vICAgZXZlbnRbJ2dwJ10gPSBncDsgXG5cdCAgLy8gfVxuXHQgIHJldHVybiBldmVudDtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA4MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHV0aWxNb25pdG9yLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdHZhciBla3ZSYW5rID0gMDtcblx0dmFyIGVrdlNldCA9IHt9O1xuXHRmdW5jdGlvbiByYW5rKCkge1xuXHQgIGVrdlJhbmsrKzsgXG5cdCAgaWYgKCFla3ZTZXQuaGFzT3duUHJvcGVydHkoZWt2UmFuaykpIHtcblx0ICAgIGVrdlNldFtla3ZSYW5rXSA9IGVrdlJhbms7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVrdlJhbmsrKztcblx0ICB9XG5cdCAgcmV0dXJuIGVrdlJhbms7XG5cdH07XG5cdGV4cG9ydHMucmFuayA9IHJhbms7XG5cdFxuXHRmdW5jdGlvbiBjbGVhcigpIHtcblx0ICBla3ZSYW5rID0gMDtcblx0ICBla3ZTZXQgPSB7fTtcblx0fVxuXHRleHBvcnRzLmNsZWFyID0gY2xlYXI7XG5cbi8qKiovIH0pLFxuLyogODEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsUGFnZS5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIGlzU3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG5cdC8qXG5cdCAgcGFnZUNvZGUgPSBodHRwOi8vd3d3LmFiYy5jb20vP2tleTE9dmFsdWUxJmtleTI9dmFsdWUyL3BhdGgxL3BhdGgyL3BhdGgzXG5cdCAgZml4X3BhZ2VDb2RlID0gaHR0cDovL3d3dy5hYmMuY29tL3BhdGgxL3BhdGgyL3BhdGgzXG5cdCAgcGFnZUNvZGUgPSBodHRwOi8vd3d3LmFiYy5jb20vP2tleTE9dmFsdWUxJmtleTI9dmFsdWUyLyMvcGF0aDEvcGF0aDIvcGF0aDNcblx0ICBmaXhfcGFnZUNvZGUgPSBodHRwOi8vd3d3LmFiYy5jb20vIy9wYXRoMS9wYXRoMi9wYXRoM1xuXHQgIHBhZ2VDb2RlPWh0dG86Ly93d3cuYWJjLmNvbS8/a2V2MT12YWx1ZTEma2V2Mj12YWx1ZTIjL3BhdGgxL3BhdGgyL3BhdGgzXG5cdCAgZml4X3BhZ2VDb2RlID0gaHR0cDovL3d3dy5hYmMuY29tLyMvcGF0aDEvcGF0aDIvcGF0aDNcblx0ICBwYWdlQ29kZT1odHRvOi8vd3d3LmFiYy5jb20vP2tldjE9dmFsdWUxJmtldjI9dmFsdWUyIy9wYXRoMS9wYXRoMi9wYXRoMz9rZXYzPXZhbHVlMyZrZXk0PXZhbHVlNFxuXHQgIGZpeF9wYWdlQ29kZT1odHRvOi8vd3d3LmFiYy5jb20vIy9wYXRoMS9wYXRoMi9wYXRoM1xuXHQgIGh0dHA6Ly9kb21haW4vdnRwYWdlP2tleTE9dmFsdWUxJmtleTI9dmFsdWUyL3BhdGgxL3BhdGgyL3BhdGgzXG5cdCAgZml4X3BhZ2VDb2RlPWh0dHA6Ly9kb21haW4vdnRwYWdlL3BhdGgxL3BhdGgyL3BhdGgzXG5cdCovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYWdlTmFtZShwYXRoLCBwcm9wZXJ0aWVzKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuXHQgICAgdmFyIHBuYW1lID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUocGF0aCk7IC8vcGFnZUNvbmZpZ1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgbWV0YVBhZ2VOYW1lID0gYXBsdXMuZ2V0TWV0YUluZm8gJiYgYXBsdXMuZ2V0TWV0YUluZm8oXCJhcGx1cy1wYWdlbmFtZVwiKSB8fCBcIlwiOyAvL21ldGFJbmZvIGFwbHVzLXBhZ2VuYW1lXG5cdCAgICB2YXIgZHluYW1pY1BhZ2VGdW5jID0gYXBsdXMuZ2V0TWV0YUluZm8gJiYgYXBsdXMuZ2V0TWV0YUluZm8oXCJhcGx1cy1keW5hbWljcGFnZVwiKTtcblx0ICAgIHZhciBoYW5kbGVVUkwgPSBsb2NhdGlvbi5ocmVmO1xuXHQgICAgaWYgKGR5bmFtaWNQYWdlRnVuYyAmJiBpc0Z1bmN0aW9uKGR5bmFtaWNQYWdlRnVuYykgJiYgaXNTdHJpbmcoZHluYW1pY1BhZ2VGdW5jKCkpKSB7XG5cdCAgICAgIGhhbmRsZVVSTCA9IGR5bmFtaWNQYWdlRnVuYygpOyBcblx0ICAgIH1cblx0ICAgIHZhciBmaXJzdCA9IGhhbmRsZVVSTC5zcGxpdCgnPycpWzBdO1xuXHQgICAgdmFyIGRlZmF1bHRVcmwgPSBmaXJzdDtcblx0ICAgIGlmIChoYW5kbGVVUkwuc3BsaXQoJz8nKS5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHZhciBzZWNvbmQgPSBoYW5kbGVVUkwuc3BsaXQoJz8nKVsxXTtcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIGNoZWNrZWRcblx0ICAgICAgICogIGh0dHA6Ly93d3cuYWJjLmNvbS8/a2V5MT12YWx1ZTEma2V5Mj12YWx1ZTIvcGF0aDEvcGF0aDIvcGF0aDNcblx0ICAgICAgICogIGZpeDogaHR0cDovL3d3dy5hYmMuY29tL3BhdGgxL3BhdGgyL3BhdGgzXG5cdCAgICAgICovXG5cdCAgICAgIHZhciBkYXNoUG9zID0gc2Vjb25kLmluZGV4T2YoJy8nKTtcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIGNoZWNrZWRcblx0ICAgICAgICogaHR0cDovL3d3dy5hYmMuY29tLz9rZXYxPXZhbHVlMSZrZXYyPXZhbHVlMiMvcGF0aDEvcGF0aDIvcGF0aDMgXG5cdCAgICAgICAqIGZpeDogaHR0cDovL3d3dy5hYmMuY29tLyMvcGF0aDEvcGF0aDIvcGF0aDNcblx0ICAgICAgICogKi8gXG5cdCAgICAgIHZhciBoYXNoVGFnUG9zID0gc2Vjb25kLmluZGV4T2YoJyMvJyk7XG5cdCAgICAgIHZhciBwYXRoUG9zID0gLTE7XG5cdCAgICAgIGlmIChoYXNoVGFnUG9zID4gLTEgJiYgZGFzaFBvcyA+IC0xKSB7XG5cdCAgICAgICAgaWYgKGhhc2hUYWdQb3MgPCBkYXNoUG9zKSB7XG5cdCAgICAgICAgICAvKipcblx0ICAgICAgICAgICogY2hlY2tlZFxuXHRcdFx0XHRcdFx0KiBodHRwOi8vZG9tYWluP2tleTE9dmFsdWUxJmtleTI9dmFsdWUyIy9wYXRoMS9wYXRoMi9wYXRoM1xuXHQgICAgICAgICAgKiBmaXg6IGh0dHA6Ly9kb21haW4vIy9wYXRoMS9wYXRoMi9wYXRoM1xuXHRcdFx0XHRcdFx0Ki9cblx0ICAgICAgICAgIHBhdGhQb3MgPSBoYXNoVGFnUG9zO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaGFzaFRhZ1BvcyA+IGRhc2hQb3MpIHtcblx0ICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICogY2hlY2tlZFxuXHRcdFx0XHRcdFx0ICogaHR0cDovL2RvbWFpbj9rZXkxPXZhbHVlMSZrZXkyPXZhbHVlMi8jL3BhdGgxL3BhdGgyL3BhdGgzXG5cdCAgICAgICAgICAgKiBmaXg6IGh0dHA6Ly9kb21haW4vIy9wYXRoMS9wYXRoMi9wYXRoM1xuXHRcdFx0XHRcdFx0ICovXG5cdCAgICAgICAgICBwYXRoUG9zID0gZGFzaFBvcztcblx0ICAgICAgICB9IFxuXHQgICAgICB9IGVsc2UgaWYgKGRhc2hQb3MgPiAtMSkge1xuXHQgICAgICAgIHBhdGhQb3MgPSBkYXNoUG9zICsgMTtcblx0ICAgICAgfSBlbHNlIGlmIChoYXNoVGFnUG9zID4gLTEpIHtcblx0ICAgICAgICBwYXRoUG9zID0gaGFzaFRhZ1Bvcztcblx0ICAgICAgfSBcblx0XG5cdCAgICAgIGlmIChwYXRoUG9zID4gLTEpIHtcblx0ICAgICAgICB2YXIgbG9jYXRpb25QYXRoID0gc2Vjb25kLnN1YnN0cmluZyhwYXRoUG9zKTtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBjaGVja2VkXG5cdFx0XHRcdFx0ICogaWYgaHR0cDovL2RvbWFpbj9rZXkxPXZhbHVlMSZrZXkyPXZhbHVlMiMvcGF0aDEvcGF0aDIvcGF0aDM/a2V5Mz12YWx1ZTMma2V5ND12YWx1ZTRcblx0ICAgICAgICAgKiBmaXg6IGh0dHA6Ly9kb21haW4vcGF0aDEvcGF0aDIvcGF0aDNcblx0XHRcdFx0XHQgKi9cblx0ICAgICAgICB2YXIgcGF0aFBhcmFtSW5kZXggPSBsb2NhdGlvblBhdGguaW5kZXhPZihcIj9cIik7XG5cdCAgICAgICAgaWYgKHBhdGhQYXJhbUluZGV4ID4gLTEpIHtcblx0ICAgICAgICAgIGxvY2F0aW9uUGF0aCA9IGxvY2F0aW9uUGF0aC5zdWJzdHJpbmcoMCwgcGF0aFBhcmFtSW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBcblx0ICAgICAgICBpZiAodXRpbERhc2guaXNFbmRXaXRoKGZpcnN0LCAnLycpICYmIHV0aWxEYXNoLmlzU3RhcnRXaXRoKGxvY2F0aW9uUGF0aCwgJy8nKSkge1xuXHQgICAgICAgICAgZGVmYXVsdFVybCA9IGZpcnN0ICsgbG9jYXRpb25QYXRoLnN1YnN0cmluZygxKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHV0aWxEYXNoLmlzRW5kV2l0aChmaXJzdCwgJy8nKSB8fCB1dGlsRGFzaC5pc1N0YXJ0V2l0aChsb2NhdGlvblBhdGgsICcvJykpIHtcblx0ICAgICAgICAgIGRlZmF1bHRVcmwgPSBmaXJzdCArIGxvY2F0aW9uUGF0aDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgKiBodHRwOi8vZG9tYWluL3Z0cGFnZT9rZXkxPXZhbHVlMSZrZXkyPXZhbHVlMi9wYXRoMS9wYXRoMi9wYXRoM1xuXHQgICAgICAgICAgICogZml4OiBodHRwOi8vZG9tYWluL3Z0cGFnZS9wYXRoMS9wYXRoMi9wYXRoM1xuXHQgICAgICAgICAgICogKi8gXG5cdCAgICAgICAgICBkZWZhdWx0VXJsID0gZmlyc3QgKyAnLycgKyBsb2NhdGlvblBhdGg7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIFxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHByb3BlcnRpZXMuc3BtQiB8fCBwcm9wZXJ0aWVzLnBhZ2VfbmFtZSB8fCAoZG9jdW1lbnQgJiYgZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnBhZ2VuYW1lKSB8fCBtZXRhUGFnZU5hbWUgfHwgcG5hbWUgfHwgZGVmYXVsdFVybCB8fCAnLSc7IC8vZGVmYXVsdCBwYWdlX25hbWUgPSAnJ1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ2dldCBwYWdlbmFtZSBmYWlsZWQgZSA9JywgZSk7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLmdldFBhZ2VOYW1lID0gZ2V0UGFnZU5hbWU7XG5cdFxuXHRmdW5jdGlvbiBnZXRQYWdlVGl0bGUocGF0aCkge1xuXHQgIHJldHVybiBQYWdlTWFuYWdlci5nZXRQYWdlVGl0bGUocGF0aCk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFBhZ2VUaXRsZSA9IGdldFBhZ2VUaXRsZTtcblxuLyoqKi8gfSksXG4vKiA4MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBjdXJyZW50UGF0aCA9IFwiXCI7XG5cdHZhciBwYWdlT3B0aW9uTWFwID0ge307XG5cdFxuXHRmdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgcXVlcnkpIHtcblx0ICBpZiAoIXBhdGggfHwgcGF0aCA9PT0gJy0nKSB7XG5cdCAgICByZXR1cm4gXCItXCI7XG5cdCAgfVxuXHQgIHZhciBxcyA9IFtdO1xuXHQgIGZvciAodmFyIHEgaW4gcXVlcnkpIHtcblx0ICAgIHFzLnB1c2gocSArICc9JyArIHF1ZXJ5W3FdKTtcblx0ICB9XG5cdCAgdmFyIHFzcyA9IHFzLmpvaW4oJyYnKTtcblx0ICByZXR1cm4gcXNzID8gcGF0aCArICc/JyArIHFzcyA6IHBhdGg7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEN1cnJlbnRQYWdlUGF0aCA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBjdXJyZW50UGF0aDtcblx0fTtcblx0XG5cdGV4cG9ydHMuc2V0Q3VycmVudFBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIGN1cnJlbnRQYXRoID0gcGF0aDtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgcmV0dXJuIHBhZ2VPcHRpb25NYXBbcGF0aF07XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5zZXRQYWdlUXVlcnkgPSBmdW5jdGlvbihwYXRoLCBxdWVyeSkge1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICBwYWdlT3B0aW9uTWFwW3BhdGhdID0gcXVlcnk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRGdWxsUGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICByZXR1cm4gYnVpbGRQYXRoKHBhdGgsIHBhZ2VPcHRpb25NYXBbcGF0aF0pO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRQYWdlTmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgbWV0YSA9IGFwbHVzLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykgfHwge307XG5cdCAgdmFyIHJlYWxQYXRoID0gcGF0aCB8fCBjdXJyZW50UGF0aDtcblx0ICBpZiAobWV0YS5oYXNoTW9kZSkge1xuXHQgICAgcmVhbFBhdGggPSBsb2NhdGlvbi5oYXNoO1xuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgLy8g5a+55LqO5Yqo5oCB6Lev55Sx77yM5pSv5oyB55So5oi35Lyg5YWl5q2j5YiZ6L+b6KGM5Yy56YWNXG5cdCAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PSAnb2JqZWN0Jykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YSkge1xuXHQgICAgICAgIGlmIChrZXkgPT09IHJlYWxQYXRoKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9IGVsc2UgaWYgKG1ldGFba2V5XSAmJiBtZXRhW2tleV0ucmVnUnVsZSAmJiBtZXRhW2tleV0ucmVnUnVsZS50ZXN0KHJlYWxQYXRoKSkge1xuXHQgICAgICAgICAgcmVhbFBhdGggPSBrZXk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIC8vXG5cdCAgfVxuXHQgIHJldHVybiBtZXRhW3JlYWxQYXRoXTtcblx0fTtcblx0XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIGVhY2hNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0LyogZXNsaW50LWRpc2FibGUgKi9cblx0ZXhwb3J0cy5nZXRXeFRpdGxlID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIGlmICghcGF0aCkgcmV0dXJuIFwiXCI7XG5cdCAgdmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKTtcblx0ICB2YXIgcGxhdFR5cGUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuXHQgIHZhciB0ID0gXCJcIjtcblx0ICB0cnkge1xuXHQgICAgaWYgKHBsYXRUeXBlID09PSAnd3gnICYmIF9fd3hDb25maWcpIHtcblx0ICAgICAgdmFyIHd4Q29uZmlnID0gX193eENvbmZpZzsgICAgICBcblx0ICAgICAgdmFyIHBhZ2UgPSBfX3d4Q29uZmlnLnBhZ2UgfHwge307XG5cdCAgICAgIHZhciByb3V0ZSA9IHBhZ2VbcGF0aF0gfHwgcGFnZVtwYXRoICsgXCIuaHRtbFwiXTtcblx0ICAgICAgdmFyIG4gPSB7fSwgaSA9IHt9O1xuXHQgICAgICBpZiAod3hDb25maWcuZ2xvYmFsICYmIHd4Q29uZmlnLmdsb2JhbC53aW5kb3cgJiYgd3hDb25maWcuZ2xvYmFsLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG5cdCAgICAgICAgbi50aXRsZSA9IHd4Q29uZmlnLmdsb2JhbC53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dDtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocm91dGUgJiYgcm91dGUud2luZG93ICYmIHJvdXRlLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG5cdCAgICAgICAgaS50aXRsZSA9IHJvdXRlLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIWkudGl0bGUgJiYgX193eEFwcENvZGVfXykge1xuXHQgICAgICAgIHZhciBhcHBKU09OID0gX193eEFwcENvZGVfX1twYXRoICsgXCIuanNvblwiXTtcblx0ICAgICAgICBpZiAoYXBwSlNPTiAmJiBhcHBKU09OLm5hdmlnYXRpb25CYXJUaXRsZVRleHQpIHtcblx0ICAgICAgICAgIGkudGl0bGUgPSBhcHBKU09OLm5hdmlnYXRpb25CYXJUaXRsZVRleHQ7XG5cdCAgICAgICAgfSBcblx0ICAgICAgfVxuXHQgICAgICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgICAgICBpZiAoY3R4Lmdsb2JhbFRpdGxlTWFwKSB7XG5cdCAgICAgICAgZWFjaE1hcChjdHguZ2xvYmFsVGl0bGVNYXAsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuXHQgICAgICAgICAgaWYgKGtleSA9PT0gcGF0aCkge1xuXHQgICAgICAgICAgICB0ID0gdmFsdWU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB7XG5cdCAgICAgICAgdCA9IGkudGl0bGUgfHwgbi50aXRsZSB8fCAnJztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHQ7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudygnY3VycmVudCBwbGF0Zm9ybSBjYW4gbm90IHRyYWNrIHBhZ2UgdGl0bGUnKTtcblx0ICAgIHJldHVybiB0O1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZUNvZGUgPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgcmV0dXJuICh0aGlzLmdldFBhZ2VOYW1lKHBhdGgpIHx8IHt9KS5wYWdlTmFtZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZVRpdGxlID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIHJldHVybiAodGhpcy5nZXRQYWdlTmFtZShwYXRoKSB8fCB7fSkucGFnZVRpdGxlIHx8IHRoaXMuZ2V0V3hUaXRsZShwYXRoKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0VlRSZWFsdGltZUNvZGUgPSBmdW5jdGlvbigpIHtcblx0ICBpZiAoY3VycmVudFBhdGgpIHtcblx0ICAgIHZhciBxdWVyeSA9IHBhZ2VPcHRpb25NYXBbY3VycmVudFBhdGhdIHx8IHt9O1xuXHQgICAgdmFyIHJlZ0V4cCA9IC9eXFwkdnRfLztcblx0ICAgIHZhciBzY2VuZSA9IGRlY29kZVVSSUNvbXBvbmVudChxdWVyeS5zY2VuZSk7XG5cdCAgICByZXR1cm4gc2NlbmUgJiYgcmVnRXhwLnRlc3Qoc2NlbmUpICYmIHNjZW5lLnJlcGxhY2UocmVnRXhwLCAnJyk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDgzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDlsI/nqIvluo/lt6Xlhbdcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7IFxuXHRcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdGV4cG9ydHMuZ2V0Q3VycmVudFBhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG5cdCAgcmV0dXJuIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdIHx8IHt9O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRSZWZlcnJlclBhZ2UgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcblx0ICByZXR1cm4gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl0gfHwge307XG5cdH07XG5cdFxuXHR2YXIgX2lzVGI7XG5cdC8vIOWNlemhtea1i+ivlemcgOimgVxuXHRleHBvcnRzLnJlc2V0SXNUQiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIF9pc1RiID0gdmFsdWU7XG5cdH07XG5cdFxuXHRcblx0ZnVuY3Rpb24gaW5pdElzVEIgKCkge1xuXHQgIGlmICh0eXBlb2YgX2lzVGIgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIF9pc1RiO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgVUEgPSBuYXZpZ2F0b3IgPyAobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3Iuc3d1c2VyQWdlbnQpIDogJyc7XG5cdCAgICAgIHJlc3VsdCA9ICEhL0FsaUFwcC9pLnRlc3QoVUEpO1xuXHQgICAgICBpZiAoL0FsaUFwcFxcKChBUHxEaW5nVGFsa3xBTUFQfFVDfFFVQVJLKS9pLnRlc3QoVUEpKSB7XG5cdCAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKC9BbGlBcHBcXChLQi9pLnRlc3QoVUEpKSB7XG5cdCAgICAgICAgcmVzdWx0ID0gISEvTWlzdC8udGVzdChVQSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy9JREUt5reY5a6dLeWVhuWutuW6lOeUqOS4i+acn+acm+i/lOWbnnRydWVcblx0ICAgICAgaWYoL0FsaXBheUlERSBUYW9iYW8vLnRlc3QoVUEpKXtcblx0ICAgICAgICByZXN1bHQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKGN0eC5jYW5JVXNlKSkge1xuXHQgICAgICAgICAgcmVzdWx0ID0gISFjdHguY2FuSVVzZSgnY2FsbFVzZXJUcmFjaycpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIF9pc1RiID0gcmVzdWx0O1xuXHQgICAgcmV0dXJuIHJlc3VsdDsgIFxuXHQgIH1cblx0fVxuXHRleHBvcnRzLmluaXRJc1RCID0gaW5pdElzVEI7XG5cdFxuXHRmdW5jdGlvbiBpc1RCKCkge1xuXHQgIGlmICh0eXBlb2YgX2lzVGIgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuICEhX2lzVGI7ICBcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGluaXRJc1RCKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgZ2V0UGxhdGZvcm1UeXBlID0gZnVuY3Rpb24gKCkge1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBjdHg6IGRkLFxuXHQgICAgICBwbGF0VHlwZTogJ2RkJyxcblx0ICAgICAgc2RrVHlwZTogJ2RkbXAnLFxuXHQgICAgICBsb2dEb21haW46ICcvZGRtX2xvZ3MnXG5cdCAgICB9O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgY3R4OiBteSxcblx0ICAgICAgICBwbGF0VHlwZTogbXkgJiYgbXkudGIgPyAndGFvYmFvJyA6ICdteScsXG5cdCAgICAgICAgc2RrVHlwZTogbXkgJiYgbXkudGIgPyAndGFvYmFvbXAnIDogJ215bXAnLFxuXHQgICAgICAgIGxvZ0RvbWFpbjogJy9hbGlwYXltX2xvZ3MnXG5cdCAgICAgIH07XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIGN0eDogdHQsXG5cdCAgICAgICAgICBwbGF0VHlwZTogJ3R0Jyxcblx0ICAgICAgICAgIHNka1R5cGU6ICd0dG1wJyxcblx0ICAgICAgICAgIGxvZ0RvbWFpbjogJy9ieXRlZGFuY2VtX2xvZ3MnXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBjdHg6IHN3YW4sXG5cdCAgICAgICAgICAgIHBsYXRUeXBlOiAnYmQnLFxuXHQgICAgICAgICAgICBzZGtUeXBlOiAnYmRtcCcsXG5cdCAgICAgICAgICAgIGxvZ0RvbWFpbjogJy9iYWlkdW1fbG9ncydcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICBjdHg6IHd4LFxuXHQgICAgICAgICAgICAgIHBsYXRUeXBlOiAnd3gnLFxuXHQgICAgICAgICAgICAgIHNka1R5cGU6ICd3eG1wJyxcblx0ICAgICAgICAgICAgICBsb2dEb21haW46ICcvd3htX2xvZ3MnXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgY3R4OiB7fSxcblx0ICAgICAgICAgICAgICBwbGF0VHlwZTogJ1VOS05PVycsXG5cdCAgICAgICAgICAgICAgc2RrVHlwZTogJ1VOS05PVydcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuaXNUQiA9IGlzVEI7XG5cdGV4cG9ydHMuZ2V0UGxhdGZvcm1UeXBlID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5wbGF0VHlwZTtcblx0fTtcblx0ZXhwb3J0cy5nZXRTZGtUeXBlID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5zZGtUeXBlO1xuXHR9O1xuXHRleHBvcnRzLmdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcblx0fTtcblx0ZXhwb3J0cy5nZXRMb2dEb21haW4gPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkubG9nRG9tYWluO1xuXHR9O1xuXHRcblx0XG5cdHZhciBIVFRQX1JFUVVFU1QgPSAnaHR0cFJlcXVlc3QnO1xuXHR2YXIgUkVRVUVTVCA9ICdyZXF1ZXN0Jztcblx0dmFyIEZOID0gZnVuY3Rpb24gKCkge307XG5cdFxuXHQvKipcblx0ICog5Y+R6YCBR0VU6K+35rGCXG5cdCAqIEBwYXJhbXMge1N0cmluZ30gdXJsXG5cdCAqIEBwYXJhbXMge1N0cmluZ30gb3B0cyB7XG5cdCAqICAgdGltZW91dDogNTAwMFxuXHQgKiB9XG5cdCAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjayB7XG5cdCAqICAgdGltZW91dDogNTAwMFxuXHQgKiB9XG5cdCAqL1xuXHRleHBvcnRzLnJlcXVlc3QgPSBmdW5jdGlvbiAodXJsLCBvcHRzLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuXHQgIC8vIHZhciBjdHggPSB1dGlscy5nZXRDb250ZXh0KCkgfHwge307XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGN0eCA9IGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcblx0ICBpZiAoIWlzRnVuY3Rpb24oZmFpbHVyZUNhbGxiYWNrKSkge1xuXHQgICAgZmFpbHVyZUNhbGxiYWNrID0gRk47XG5cdCAgfVxuXHQgIGlmICghaXNGdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2spKSB7XG5cdCAgICBzdWNjZXNzQ2FsbGJhY2sgPSBGTjtcblx0ICB9XG5cdFxuXHQgIHZhciBtZXRob2ROYW1lID0gb3B0cy5yZXF1ZXN0TWV0aG9kTmFtZSB8fCBSRVFVRVNUO1xuXHQgIHZhciByZXEgPSBjdHhbbWV0aG9kTmFtZV07XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKHJlcSkgJiYgbWV0aG9kTmFtZSAhPT0gUkVRVUVTVCkge1xuXHQgICAgbWV0aG9kTmFtZSA9IFJFUVVFU1Q7XG5cdCAgICByZXEgPSBjdHhbbWV0aG9kTmFtZV07XG5cdCAgfVxuXHQgIGlmICghaXNGdW5jdGlvbihyZXEpICYmIG1ldGhvZE5hbWUgIT09IEhUVFBfUkVRVUVTVCkge1xuXHQgICAgLy8gY29uc29sZSAmJiBjb25zb2xlLndhcm4oJ+aWueazlVwiJyArIG1ldGhvZE5hbWUgKyAnXCLkuI3lrZjlnKghJyk7XG5cdCAgICBtZXRob2ROYW1lID0gSFRUUF9SRVFVRVNUO1xuXHQgICAgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuXHQgIH1cblx0XG5cdCAgdmFyIGRhdGFUeXBlID0gb3B0cyAmJiBvcHRzLmRhdGFUeXBlID8gb3B0cy5kYXRhVHlwZSA6ICdiYXNlNjQnO1xuXHQgIHZhciB0aW1lb3V0ID0gb3B0cyAmJiBvcHRzLnRpbWVvdXQgPyBvcHRzLnRpbWVvdXQgOiAzMDAwO1xuXHQgIHZhciBtZXRob2QgPSBvcHRzLm1ldGhvZCB8fCAnR0VUJztcblx0ICB2YXIgY3VzdG9tUmVxdWVzdFRpbWVvdXQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19NSU5JX1JFUVVFU1RfVElNRU9VVCk7XG5cdCAgXG5cdCAgdmFyIGNhbGxiYWNrZWQ7XG5cdCAgLy8g5aaC5p6cdXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0ICBcblx0ICB1cmwgPSB1dGlsLmZpeERvbWFpbih1cmwpO1xuXHQgIHZhciBtc2c7XG5cdCAgaWYgKGlzRnVuY3Rpb24ocmVxKSkge1xuXHQgICAgdmFyIHJlcU9wdGlvbnMgPSB7XG5cdCAgICAgIHVybDogdXJsLFxuXHQgICAgICBtZXRob2Q6IG1ldGhvZCxcblx0ICAgICAgZGF0YVR5cGU6IGRhdGFUeXBlLFxuXHQgICAgICB0aW1lb3V0OiBjdXN0b21SZXF1ZXN0VGltZW91dCB8fCB0aW1lb3V0LFxuXHQgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgaWYgKCFjYWxsYmFja2VkKSB7XG5cdCAgICAgICAgICBjYWxsYmFja2VkID0gdHJ1ZTtcblx0ICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgIC8vIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCdhcGx1c+aXpeW/l+ivt+axglwiJyArIHVybCArICdcIuWksei0pe+8jOWOn+WboO+8micgKyBKU09OLnN0cmluZ2lmeShyZXMpKTtcblx0ICAgICAgICBpZiAoIWNhbGxiYWNrZWQpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuXHQgICAgICAgICAgZmFpbHVyZUNhbGxiYWNrKHtcblx0ICAgICAgICAgICAgZmFpbHVyZTogdHJ1ZSxcblx0ICAgICAgICAgICAgZGF0YTogcmVzXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBpZiAobWV0aG9kID09PSAnUE9TVCcgJiYgb3B0cy5kYXRhKSB7XG5cdCAgICAgIGlmIChIVFRQX1JFUVVFU1QgPT09IG1ldGhvZE5hbWUpIHtcblx0ICAgICAgICAvLyDkuJPpl6jlr7npkonpkonnmoTmlK/mjIFcblx0ICAgICAgICByZXFPcHRpb25zLmhlYWRlcnMgPSB7XG5cdCAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdCAgICAgICAgfTtcblx0ICAgICAgICByZXFPcHRpb25zLmRhdGFUeXBlID0gJ2pzb24nO1xuXHQgICAgICAgIHJlcU9wdGlvbnMuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdHMuZGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVxT3B0aW9ucy5kYXRhID0gb3B0cy5kYXRhO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIF9leHRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJlcXVlc3QtZXh0aW5mbycpO1xuXHQgICAgaWYgKHR5cGVvZiBfZXh0SW5mbyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmVxT3B0aW9ucy5fZXh0SW5mbyA9IF9leHRJbmZvO1xuXHQgICAgfVxuXHQgICAgcmVxKHJlcU9wdGlvbnMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAoIWNhbGxiYWNrZWQpIHtcblx0ICAgICAgY2FsbGJhY2tlZCA9IHRydWU7XG5cdCAgICAgIGZhaWx1cmVDYWxsYmFjayh7XG5cdCAgICAgICAgZmFpbHVyZTogdHJ1ZSxcblx0ICAgICAgICBkYXRhOiBtc2dcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFjYWxsYmFja2VkKSB7XG5cdCAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuXHQgICAgICBtc2cgPSAnYXBsdXMgbG9nIHJlcXVlc3RcIicgKyB1cmwgKyAnIHRpbWVvdXRcIiwgdGltZSBzcGVuZCcgKyB0aW1lb3V0ICsgJ21zJztcblx0ICAgICAgY29uc29sZSAmJiBjb25zb2xlLndhcm4obXNnKTtcblx0ICAgICAgZmFpbHVyZUNhbGxiYWNrKHtcblx0ICAgICAgICBmYWlsdXJlOiB0cnVlLFxuXHQgICAgICAgIGRhdGE6IG1zZ1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB0aW1lb3V0KTtcblx0fTtcblx0XG5cdFxuXHRleHBvcnRzLnNldFN0b3JhZ2VTeW5jID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgcHQgPSBnZXRQbGF0Zm9ybVR5cGUoKS5wbGF0VHlwZTtcblx0ICAgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG5cdCAgICBpZiAocHQgPT09ICdteScgfHwgcHQgPT09ICd0YW9iYW8nKSB7XG5cdCAgICAgIGN0eC5zZXRTdG9yYWdlU3luYyh7XG5cdCAgICAgICAga2V5OiBrZXksXG5cdCAgICAgICAgZGF0YTogdmFsdWVcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjdHguc2V0U3RvcmFnZVN5bmMoa2V5LCB2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZXJyb3IpIHt9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFN0b3JhZ2VTeW5jID0gZnVuY3Rpb24oa2V5KSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBwdCA9IGdldFBsYXRmb3JtVHlwZSgpLnBsYXRUeXBlO1xuXHQgICAgdmFyIGN0eCA9IGdldFBsYXRmb3JtVHlwZSgpLmN0eDsgIFxuXHQgICAgaWYgKHB0ID09PSAnbXknIHx8IHB0ID09PSAndGFvYmFvJykge1xuXHQgICAgICByZXR1cm4gY3R4LmdldFN0b3JhZ2VTeW5jKHtrZXk6IGtleX0pLmRhdGE7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gY3R4LmdldFN0b3JhZ2VTeW5jKGtleSk7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZXJyb3IpIHt9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogODQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRmdW5jdGlvbiBpc1N0cmluZyhzdHIpe1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3RyKT09PVwiW29iamVjdCBTdHJpbmddXCI7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNTdHJpbmc7XG5cbi8qKiovIH0pLFxuLyogODUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MvdXRpbC9mZXRjaERhdGEuanNcblx0ICog5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdC8qKlxuXHQgKiBAdHlwZSB7T2JqZWN0fVxuXHQgKiDphY3nva7pobnljIXmi6zvvJpcblx0ICogYmFzZTog6buY6K6k54Gw5bqm5Z+65pWwMTAwMDBcblx0ICogdGltZW91dDogQ09SU+i2heaXtuaXtumXtFxuXHQgKi9cblx0dmFyIF9jb25maWcgPSB7XG5cdCAgYmFzZTogMTAwMDAsXG5cdCAgLy8g6buY6K6kMTBzXG5cdCAgdGltZW91dDogMTAwMDBcblx0fTtcblx0XG5cdHZhciBmZXRjaCA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICh1cmwsIHJlc29sdmUsIHJlamVjdCwgb3B0cykge1xuXHQgIGlmICgvXlxcL1xcLy8udGVzdCh1cmwpKSB7XG5cdCAgICB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcblx0ICB9XG5cdCAgdmFyIHBlbmRpbmcgPSB0cnVlO1xuXHQgIHZhciB0aW1lb3V0ID0gKG9wdHMgJiYgb3B0cy50aW1lb3V0KSA/IG9wdHMudGltZW91dCA6IF9jb25maWcudGltZW91dDtcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICBpZiAocGVuZGluZykge1xuXHQgICAgICBwZW5kaW5nID0gZmFsc2U7XG5cdCAgICAgIGlzRnVuY3Rpb24ocmVqZWN0KSAmJiByZWplY3Qoe1xuXHQgICAgICAgIHRpbWVvdXQ6IHRpbWVvdXRcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwgdGltZW91dCk7XG5cdCAgd2luZG93LmZldGNoKHVybClcblx0ICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdCAgICAgIGlmKC9hcHBsaWNhdGlvblxcL2pzb24vLnRlc3QocmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSkge1xuXHQgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgaWYgKHBlbmRpbmcpIHtcblx0ICAgICAgICByZXNvbHZlKGRhdGEpO1xuXHQgICAgICAgIHBlbmRpbmcgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHQgICAgICBwZW5kaW5nICYmIHJlamVjdChlcnJvcik7XG5cdCAgICB9KTtcblx0fTtcblx0XG5cdHZhciBhamF4ID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHVybCwgcmVzb2x2ZSwgcmVqZWN0LCBvcHRzKSB7XG5cdCAgdmFyIHhocjtcblx0ICB2YXIgbWV0aG9kID0gJ0dFVCc7XG5cdCAgdmFyIG9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh4aHIucmVzcG9uc2VUZXh0KSB7XG5cdCAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlVGV4dCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZWplY3QoKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHZhciBDT1JTID0gd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHQgIGlmIChDT1JTKSB7XG5cdCAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgeGhyID0gbmV3IHdpbmRvdy5YRG9tYWluUmVxdWVzdCgpO1xuXHQgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuXHQgIH1cblx0ICAvLyB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuXHQgIHZhciB0aW1lb3V0ID0gKG9wdHMgJiYgb3B0cy50aW1lb3V0KSA/IG9wdHMudGltZW91dCA6IF9jb25maWcudGltZW91dDtcblx0ICB4aHIudGltZW91dCA9IHRpbWVvdXQ7XG5cdCAgeGhyLm9ubG9hZCA9IG9ubG9hZDtcblx0ICB4aHIub25lcnJvciA9IHJlamVjdDtcblx0ICB4aHIub250aW1lb3V0ID0gcmVqZWN0O1xuXHQgIHhoci5zZW5kKCk7XG5cdH07XG5cdFxuXHR2YXIgcmVxdWVzdCA9IGZ1bmN0aW9uICh1cmwsIHJlc29sdmUsIHJlamVjdCwgb3B0cykge1xuXHQgIGlmICh3aW5kb3cuZmV0Y2gpIHtcblx0ICAgIGZldGNoKHVybCwgcmVzb2x2ZSwgcmVqZWN0LCBvcHRzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgYWpheCh1cmwsIHJlc29sdmUsIHJlamVjdCwgb3B0cyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJlcXVlc3Q0dW0gPSBmdW5jdGlvbihvcHQsIGNvbnRlbnRUeXBlKSB7XG5cdCAgb3B0ID0gb3B0IHx8IHt9O1xuXHQgIG9wdC5tZXRob2QgPSAob3B0Lm1ldGhvZCB8fCAnUE9TVCcpLnRvVXBwZXJDYXNlKCk7XG5cdCAgb3B0LnVybCA9IG9wdC51cmwgfHwgJyc7XG5cdCAgb3B0LmRhdGEgPSBvcHQuZGF0YSB8fCBudWxsO1xuXHQgIG9wdC5zdWNjZXNzID0gb3B0LnN1Y2Nlc3MgfHwgZnVuY3Rpb24gKCkge307XG5cdCAgb3B0LmVycm9yID0gb3B0LmVycm9yIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICB2YXIgcGFyYW1zID0gW107XG5cdCAgZm9yICh2YXIga2V5IGluIG9wdC5kYXRhKXtcblx0ICAgIHBhcmFtcy5wdXNoKGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChvcHQuZGF0YVtrZXldKSk7XG5cdCAgfVxuXHQgIHZhciBnZXREYXRhID0gcGFyYW1zLmpvaW4oJyYnKTtcblx0ICB2YXIgcG9zdERhdGEgPSBKU09OLnN0cmluZ2lmeShvcHQuZGF0YSB8fCB7fSk7XG5cdCAgXG5cdCAgaWYgKG9wdC5tZXRob2QgPT09ICdQT1NUJykge1xuXHQgICAgeGhyLm9wZW4ob3B0Lm1ldGhvZCwgb3B0LnVybCwgdHJ1ZSk7XG5cdCAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgY29udGVudFR5cGUgfHwgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblx0ICB9IGVsc2UgaWYgKG9wdC5tZXRob2QgPT09ICdHRVQnKSB7XG5cdCAgICB4aHIub3BlbihvcHQubWV0aG9kLCBvcHQudXJsICsgJz8nICsgZ2V0RGF0YSwgdHJ1ZSk7XG5cdCAgfVxuXHRcblx0ICAvLyB3aXRoQ3JlZGVudGlhbHMgY2Fubm90IGJlIG1vZGlmaWVkIHVudGlsIGFmdGVyIGNhbGxpbmcgLm9wZW4gb24gQW5kcm9pZCBhbmQgTW9iaWxlIFNhZmFyaVxuXHQgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuXHQgIHhoci50aW1lb3V0ID0gMzAwMDtcblx0ICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgeGhyLnN0YXR1cyA9PSAyMDApIHtcblx0ICAgICAgdmFyIGpzb24gPSB7fTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBqc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblx0ICAgICAgfSBjYXRjaCAoZXgpIHt9XG5cdCAgICAgIG9wdC5zdWNjZXNzKGpzb24pO1xuXHQgICAgfWVsc2UgaWYoeGhyLnJlYWR5U3RhdGUgPT0gNCl7XG5cdCAgICAgIG9wdC5lcnJvcih4aHIuc3RhdXMpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGlmIChvcHQubWV0aG9kID09PSAnUE9TVCcpIHtcblx0ICAgIHhoci5zZW5kKHBvc3REYXRhKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgeGhyLnNlbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLnJlcXVlc3QgPSByZXF1ZXN0O1xuXHRleHBvcnRzLnJlcXVlc3Q0dW0gPSByZXF1ZXN0NHVtO1xuXG5cbi8qKiovIH0pLFxuLyogODYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOazqOWFpWxvZ0NvbmZpZyzkvpvlkI7nu63mj5Lku7bkvb/nlKhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldExvZ0NvbmZpZzogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbG9nQ29uZmlnID0ge307XG5cdCAgICAgIHZhciBwbHVnaW5zID0gdGhpcy5vcHRpb25zLmNvbmZpZy5wbHVnaW5zO1xuXHRcblx0ICAgICAgZm9yICh2YXIgayBpbiBwbHVnaW5zKSB7XG5cdCAgICAgICAgbG9nQ29uZmlnW2tdID0ge1xuXHQgICAgICAgICAgcGx1Z2luczogcGx1Z2luc1trXSxcblx0ICAgICAgICAgIGNvbnRleHQ6IHt9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBlYWNoKHBsdWdpbnNba10sIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICBsb2dDb25maWdba10uY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWcgfHwge307XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGxvZ0NvbmZpZztcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyA9IHRoaXMuZ2V0TG9nQ29uZmlnKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5QQUdFX0xPQURfVElNRTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvZXRhZy5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrljrsgaHR0cHM6Ly9sb2cubW1zdGF0LmNvbS9lZy5qcyB8IGh0dHBzOi8vZ2oubW1zdGF0LmNvbS9lZy5qc+WQjOatpWNuYe+8jOW5tuWGmeWFpeWIsOacrOWcsGNvb2tpZVxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdHZhciB1dGlsU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0dmFyIGNvb2tpZSA9IF9fd2VicGFja19yZXF1aXJlX18oODgpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciB1dGlsRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTApO1xuXHR2YXIgdXRpbERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHR2YXIgYXBsdXNVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciB1dGlsUmVtb3RlQ2ZnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBBQkZQQzogJ19hYmZwYycsXG5cdCAgICBWRVJTSU9OOiAnMi4wJywgLy8g54mI5pysOjEgaW4gMjAyMS0xMi0wMiBA6LCL5aOrXG5cdCAgICBJTVBSSU5UX1ZFUlNJT046ICdpbXByaW50VmVyc2lvbicsXG5cdCAgICBBUExVU19JTVBSSU5UX1ZFUlNJT046ICdBUExVU19JTVBSSU5UX1ZFUlNJT04nLFxuXHQgICAgQVBMVVNfUkVNT1RFX0NPTkZJRzogJ0FQTFVTX1JFTU9URV9DT05GSUcnLFxuXHRcblx0ICAgIHRyeUdldFN0b3JlVmFsdWU6IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICB2YXIgbHNWYWx1ZSA9IHV0aWxTdG9yZS5nZXQoa2V5KTtcblx0ICAgICAgdmFyIGNvb2tpZVZhbHVlID0gY29va2llLmdldENvb2tpZShrZXkpO1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGxzVmFsdWU6IGxzVmFsdWUsXG5cdCAgICAgICAgY29va2llVmFsdWU6IGNvb2tpZVZhbHVlXG5cdCAgICAgIH07XG5cdCAgICB9LFxuXHRcblx0ICAgIHN5bmNSY2ZnOiBmdW5jdGlvbihfYWJmcGMsIGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBkb21haW4gPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuXHQgICAgICBkb21haW4gPSBhcGx1c1V0aWwuZml4RG9tYWluKGRvbWFpbik7XG5cdCAgICAgIHZhciBfZm4gPSB1dGlsRG9tLmxvYWRTY3JpcHQ7XG5cdCAgICAgIHZhciBhayA9IGFwbHVzVXRpbC5nZXRBcHBLZXkoKTtcblx0ICAgICAgaWYgKGRvbWFpbikge1xuXHQgICAgICAgIF9mbihkb21haW4gKycvcmNmZy5qcz9fYWJmcGM9JytfYWJmcGMgKyAnJmFrPScgKyBhaywgY2FsbGJhY2spOyAgXG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgc2V0SW1wcmludFZlcnNpb246IGZ1bmN0aW9uKGltcHYpIHtcblx0ICAgICAgdGhpcy5pbXB2ID0gaW1wdjtcblx0ICAgICAgLy8g5a2Y5YWlbG9jYWxzdG9yYWdlJ1xuXHQgICAgICBpZiAoaW1wdiAmJiB1dGlsRGF0YS5nZXRMc0ltcHYodGhpcy5BUExVU19JTVBSSU5UX1ZFUlNJT04pICE9PSBpbXB2KSB7XG5cdCAgICAgICAgdXRpbERhdGEuc2V0THNJbXB2KHRoaXMuQVBMVVNfSU1QUklOVF9WRVJTSU9OLCBkYXRlLmdldEZvcm1hdERhdGUoKSwgaW1wdik7XG5cdCAgICAgICAgLy8gdmFyIGFwbHVzX3Job3N0X3YgPSBhcGx1cy5fJC5tZXRhX2luZm9bJ2FwbHVzLXJob3N0LXYnXTtcblx0ICAgICAgICB2YXIgZG9tYWluID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcblx0ICAgICAgICBkb21haW4gPSBhcGx1c1V0aWwuZml4RG9tYWluKGRvbWFpbik7XG5cdCAgICAgICAgdmFyIHVybCA9IGRvbWFpbiArIGltcHY7XG5cdCAgICAgICAgdGhpcy5zeW5jUmVtb3RlQ2ZnRGF0YSh1cmwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhciBsc1JlbW90ZUNmZyA9IHV0aWxEYXRhLmdldExzUmVtb3RlQ2ZnKHRoaXMuQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG5cdCAgICAgICAgdXRpbFJlbW90ZUNmZy5lbmFibGVDZmcobHNSZW1vdGVDZmcpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHN5bmNSZW1vdGVDZmdEYXRhOiBmdW5jdGlvbih1cmwpIHtcblx0ICAgICAgdmFyIF9mbiA9IHV0aWxEb20ubG9hZFNjcmlwdDtcblx0ICAgICAgX2ZuKHVybCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0ICAgICAgICB2YXIgSW1wcmludDtcblx0ICAgICAgICB2YXIgY2ZnO1xuXHQgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci50eXBlID09PSAnZXJyb3InKSB7XG5cdCAgICAgICAgICB1bG9nKCkudygncXVpY2t0cmFja2luZyBsb2FkIHJlbW90ZSBjb25maWcgZmFpbGVkJywgZXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBJbXByaW50ID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnaW1wcmludCcpO1xuXHQgICAgICAgICAgICBjZmcgPSB0eXBlb2YgSW1wcmludCA9PT0gJ29iamVjdCcgPyBJbXByaW50IDogSlNPTi5wYXJzZShJbXByaW50KTtcblx0ICAgICAgICAgICAgdXRpbERhdGEuc2V0THNSZW1vdGVDZmcoYXBsdXNTdGF0aWMuQVBMVVNfUkVNT1RFX0NPTkZJRywgZGF0ZS5nZXRGb3JtYXREYXRlKCksIGNmZyk7XG5cdCAgICAgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICAgICAgY2ZnID0gbnVsbDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHV0aWxSZW1vdGVDZmcuZW5hYmxlQ2ZnKGNmZyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdmFyIGFiZnBjT2JqID0gX3NlbGYudHJ5R2V0U3RvcmVWYWx1ZShfc2VsZi5BQkZQQyk7XG5cdCAgICAgIHZhciBfYWJmcGMgPSBhYmZwY09iai5sc1ZhbHVlIHx8IGFiZnBjT2JqLmNvb2tpZVZhbHVlO1xuXHQgICAgICBcblx0ICAgICAgaWYgKF9hYmZwYykge1xuXHQgICAgICAgIF9hYmZwYyA9IF9hYmZwYy5yZXBsYWNlKCdfJyArIF9zZWxmLlZFUlNJT04sICcnKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcSA9ICh3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKSk7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICBxLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uKHN0YXR1cykge1xuXHQgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG5cdCAgICAgICAgICAgICAgX3NlbGYuc3luY1JjZmcoX2FiZnBjLCBmdW5jdGlvbihlcnJvcil7IFxuXHQgICAgICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLnR5cGUgPT09ICdlcnJvcicpIHtcblx0ICAgICAgICAgICAgICAgICAgdWxvZygpLncoJ3JlbW90ZSBjb25maWd1cmF0aW9uIHJlcXVlc3QgZmFpbGVkLCBlcnIgbXNnOicsIGVycm9yKTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgIHZhciBpbXBWZXJzaW9uID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbChfc2VsZi5JTVBSSU5UX1ZFUlNJT04pO1xuXHQgICAgICAgICAgICAgICAgICBfc2VsZi5zZXRJbXByaW50VmVyc2lvbihpbXBWZXJzaW9uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSwgMzAwKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDg4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBjb29raWVcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdGxkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0XG5cdC8qKlxuXHQgKiDlj5blvpcgY29va2llIOS4reWvueW6lCBrZXkg55qE5YC8XG5cdCAqIEBwYXJhbSBrZXkge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGdldENvb2tpZShrZXkpIHtcblx0ICBpZiAoIWRvY3VtZW50KSB7XG5cdCAgICByZXR1cm4gJyc7XG5cdCAgfVxuXHQgIHZhciBjb29raWVfdmFsID0gZG9jdW1lbnQuY29va2llLm1hdGNoKFxuXHQgICAgbmV3IFJlZ0V4cCgnKD86Xnw7KVxcXFxzKicgKyBrZXkgKyAnPShbXjtdKyknKVxuXHQgICk7XG5cdCAgcmV0dXJuIGNvb2tpZV92YWwgPyBjb29raWVfdmFsWzFdIDogJyc7XG5cdH07XG5cdGV4cG9ydHMuZ2V0Q29va2llID0gZ2V0Q29va2llO1xuXHRcblx0ZnVuY3Rpb24gZ2V0RXhwaXJlc1RpbWUgKG9wdGlvbnMpIHtcblx0ICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgdmFyIGRhdGVTdHIgPSAnJztcblx0ICBpZiAoJ3Nlc3Npb24nID09PSBvcHRpb25zLmV4cGlyZXMpIHtcblx0ICB9IGVsc2UgaWYgKG9wdGlvbnMuZXhwaXJlcyAmJiAoJ251bWJlcicgPT09IHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgfHwgb3B0aW9ucy5leHBpcmVzLnRvVVRDU3RyaW5nKSkge1xuXHQgICAgLy8gb3B0aW9ucy5leHBpcmVz5aSp5pWwXG5cdCAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBvcHRpb25zLmV4cGlyZXMpIHtcblx0ICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgMjQgKiBvcHRpb25zLmV4cGlyZXMgKiA2MCAqIDYwICogMTAwMCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkYXRlID0gb3B0aW9ucy5leHBpcmVzO1xuXHQgICAgfVxuXHQgICAgZGF0ZVN0ciA9ICdleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIDIw5bm06L+H5pyf5pe26Ze0XG5cdCAgICB2YXIgeWVhcnMgPSAyMDtcblx0ICAgIGlmKHV0aWxBcnJheS5pbmRleG9mKFsndi55b3VrdS5jb20nLCd3d3cueW91a3UuY29tJywncGxheWVyLnlvdWt1LmNvbSddLGxvY2F0aW9uLmhvc3RuYW1lKT4tMSl7XG5cdCAgICAgIC8vIOS8mOmFt+S4muWKoeeJueauiu+8jOWPquiDvTHlubTmnInmlYjmnJ9cblx0ICAgICAgeWVhcnMgPSAxO1xuXHQgICAgfVxuXHQgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgeWVhcnMgKiAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcblx0ICAgIGRhdGVTdHIgPSAnZXhwaXJlcz0nICsgZGF0ZS50b1VUQ1N0cmluZygpO1xuXHQgIH1cblx0ICByZXR1cm4gZGF0ZVN0cjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJ5U2V0Q29va2llKG5hbWUsIHZhbCwgb3B0aW9ucykge1xuXHQgIGlmICghZG9jdW1lbnQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKCFvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0ge307XG5cdCAgfVxuXHQgIHZhbCArPSAnOycgKyAob3B0aW9ucy5leHBpcmVzIHx8IGdldEV4cGlyZXNUaW1lKG9wdGlvbnMpKTtcblx0ICAvLyB3d3cudGFvYmFvLmNvbSAtPiB0YW9iYW8uY29tXG5cdCAgdmFsICs9ICc7IHBhdGg9JyArIChvcHRpb25zLnBhdGggPyBvcHRpb25zLnBhdGggOiAnLycpO1xuXHQgIHZhbCArPSAnOyBkb21haW49JyArIG9wdGlvbnMuZG9tYWluO1xuXHRcblx0ICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz0nICsgdmFsO1xuXHRcblx0ICB2YXIgY2hyb21lVmVyc2lvbiA9IDA7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBjaHJvbWVJbmZvcyA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tZVxcL1xcZCsvKTtcblx0ICAgIGlmIChjaHJvbWVJbmZvcyAmJiBjaHJvbWVJbmZvc1swXSkge1xuXHQgICAgICBjaHJvbWVWZXJzaW9uID0gY2hyb21lSW5mb3NbMF0uc3BsaXQoJy8nKVsxXTtcblx0ICAgICAgaWYgKGNocm9tZVZlcnNpb24pIHtcblx0ICAgICAgICBjaHJvbWVWZXJzaW9uID0gcGFyc2VJbnQoY2hyb21lVmVyc2lvbik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoIChlKSB7fVxuXHRcblx0ICBpZiAob3B0aW9ucy5TYW1lU2l0ZSAmJiBjaHJvbWVWZXJzaW9uID49IDgwKSB7XG5cdCAgICB2YWwgKz0gJzsgU2FtZVNpdGU9JyArIG9wdGlvbnMuU2FtZVNpdGU7XG5cdCAgICB2YWwgKz0gJzsgU2VjdXJlJztcblx0ICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPScgKyB2YWw7XG5cdCAgfVxuXHQgIHJldHVybiBnZXRDb29raWUobmFtZSk7XG5cdH07XG5cdGV4cG9ydHMudHJ5U2V0Q29va2llID0gdHJ5U2V0Q29va2llO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge1N0cmluZ30gbmFtZSBjb29raWVLZXlcblx0ICogQHBhcmFtcyB7U3RyaW5nfE51bWJlcn0gdmFsIGNvb2tpZVZhbHVlXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAqICAgZXhwaXJlc1xuXHQgKiAgIGRvbWFpblxuXHQgKiAgIHBhdGhcblx0ICogfVxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0Q29va2llKG5hbWUsIHZhbCwgb3B0aW9ucykge1xuXHQgIHRyeSB7XG5cdCAgICBpZiAoIWRvY3VtZW50KSB7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICAgIGlmICghb3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0ge307XG5cdCAgICB9XG5cdCAgICBpZiAob3B0aW9ucy5kb21haW4pIHtcblx0ICAgICAgdHJ5U2V0Q29va2llKG5hbWUsIHZhbCwgb3B0aW9ucyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgZG9tYWlucyA9IHRsZC5nZXREb21haW5zKCk7XG5cdCAgICAgIHZhciBpID0gMDtcblx0ICAgICAgd2hpbGUgKGkgPCBkb21haW5zLmxlbmd0aCkge1xuXHQgICAgICAgIG9wdGlvbnMuZG9tYWluID0gZG9tYWluc1tpXTtcblx0ICAgICAgICBpZiAoIXRyeVNldENvb2tpZShuYW1lLCB2YWwsIG9wdGlvbnMpKSB7XG5cdCAgICAgICAgICBpKys7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGkgPSBkb21haW5zLmxlbmd0aDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoIChlKSB7fVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5zZXRDb29raWUgPSBzZXRDb29raWU7XG5cdFxuXHR2YXIga2V5cyA9IFsndHJhY2tuaWNrJywgJ3RodycsICdjbmEnXTtcblx0XG5cdGV4cG9ydHMuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgZGF0YSA9IHt9O1xuXHQgIGVhY2goa2V5cywgZnVuY3Rpb24gKGspIHtcblx0ICAgIGRhdGFba10gPSBnZXRDb29raWUoayk7XG5cdCAgfSk7XG5cdFxuXHQgIGlmIChsb2NhdGlvbikge1xuXHQgICAgdmFyIGhvc3RuYW1lID0gbG9jYXRpb24uaG9zdG5hbWU7XG5cdCAgICAvLyBUT0RPIOW+heWtkOeXleacjeWKoeerr+WunueOsOiHquWKqOS7jmh0dHDlpLTph4zlj5ZjbmF1aemAu+i+keWQjuaKiui/meautemAu+i+keW5suaOie+8gVxuXHQgICAgLy8gMjAxMy0wNS0wNiDkuIDllbjpnIDmsYLvvIzku4XlnKggdGFueC5jb20g5oiWICoudGFueC5jb20g6aG16Z2i5Y+WIGNuYXVpIOi/meS4qiBjb29raWVcblx0ICAgIGRhdGEuY25hdWkgPSAvXFxidGFueFxcLmNvbSQvLnRlc3QoaG9zdG5hbWUpID8gZ2V0Q29va2llKCdjbmF1aScpIDogJyc7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblx0XG5cdC8vIOiHquWumuS5iWNvb2tpZemHh+mbhlxuXHQvLyBodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL2RvY3Mva3ZobWJnXG5cdC8vIDIwMTgvMy8xMlxuXHQvLyDkuI3lho3ph4fpm4ZfYV9kX2HvvIzph4fpm4ZobmfvvIzlubbkv67mlLnkuLpfaG5nXG5cdC8v6K+m6KeB77yaaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2tiL2lzc3Vlcy8yMjFcblx0ZXhwb3J0cy5nZXRIbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChnZXRDb29raWUoJ2huZycpIHx8ICcnKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0Q29va2llQ25hID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICByZXR1cm4gZ2V0Q29va2llKG5hbWUpIHx8IGdldENvb2tpZSgnXycgKyBuYW1lKTtcblx0fTtcblx0ZXhwb3J0cy5zZXRDb29raWVDbmEgPSBmdW5jdGlvbiAobmFtZSwgdmFsLCBvcHRpb25zKSB7XG5cdCAgdmFyIGRvbWFpbnMgPSB0bGQuZ2V0RG9tYWlucygpO1xuXHQgIHZhciBpID0gMDtcblx0ICB3aGlsZSAoaSA8IGRvbWFpbnMubGVuZ3RoKSB7XG5cdCAgICBvcHRpb25zLmRvbWFpbiA9IGRvbWFpbnNbaV07XG5cdCAgICBpZiAoIXRyeVNldENvb2tpZShuYW1lLCB2YWwsIG9wdGlvbnMpKSB7XG5cdCAgICAgIGlmIChpID09PSBkb21haW5zLmxlbmd0aCAtIDEpIHtcblx0ICAgICAgICB2YXIgdmFsdWUgPSB2YWwgKyAnOycgKyBnZXRFeHBpcmVzVGltZShvcHRpb25zKTtcblx0ICAgICAgICB2YWx1ZSArPSAnOyBwYXRoPS8nO1xuXHQgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICdfJyArIG5hbWUgKyAnPScgKyB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpKys7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpID0gZG9tYWlucy5sZW5ndGg7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQGF1dGhvciBqaXpoYS53eWpcblx0ICogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqXG5cdCAqIFRMRCA9IFRvcCBMZXZlbCBEb21haW5cblx0ICpcblx0ICogYXBsdXMg5YaZIGNvb2tpZSDml7bvvIzpgJrluLjopoHmsYLlhpnliLDmoLnln5/vvIzmr5TlpoIgcGFpbWFpLnRhb2Jhby5jb20g55qEIGNvb2tpZSDopoHlhpnliLAgdGFvYmFvLmNvbSDln5/kuIvvvIxcblx0ICog5L2G5piv5pyJ5Lqb5ZWG5a6256uZ54K557uR5a6a5LqG6Ieq5a6a5LmJ5Z+f5ZCN77yM5q+U5aaCIGh0dHA6Ly9odWFzaGVuZ3NoaWppLmNvbS5jbi8g77yM5aaC5p6c5Y+q5piv566A5Y2V5Zyw5Y+W5Z+f5ZCN55qE5pyA5ZCO5Lik5L2N77yMXG5cdCAqIOWwseS8muWPluWIsCBjb20uY27vvIzml6Dms5XmraPluLjorr7nva4gY29va2ll77yM5omA5Lul6ZyA6KaB6L+Z5Liq5bqTXG5cdCAqIG1vZGlmeSBieSBA6LCL5aOrIGluIDIwMTctMTAtMjjml6XvvIzlj5bmtojplb/ln5/lkI3lkI7nvIDnmb3lkI3ljZXvvIzku6Xop6PlhrNsYXphZGHnrYnmlrDmjqXlhaXkuJrliqHpl67pophcblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmdldERvbWFpbnMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgdG9wcyA9IFtdO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgZnVsbF9kb21haW4gPSBsb2NhdGlvbi5ob3N0bmFtZTtcblx0ICAgIHZhciBhID0gZnVsbF9kb21haW4uc3BsaXQoJy4nKTtcblx0ICAgIHZhciBpID0gMjtcblx0ICAgIHdoaWxlKGkgPD0gYS5sZW5ndGgpIHtcblx0ICAgICAgdG9wcy5wdXNoKGEuc2xpY2UoYS5sZW5ndGggLSBpKS5qb2luKCcuJykpO1xuXHQgICAgICBpKys7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge31cblx0ICByZXR1cm4gdG9wcztcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDkwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3V0aWwvZGF0ZVV0aWwuanNcblx0ICog5pel5pyf5biu5Yqp57G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gemVyb0ZpbGwobnVtYmVyLCB0YXJnZXRMZW5ndGgsIGZvcmNlU2lnbikge1xuXHQgIHZhciBhYnNOdW1iZXIgPSAnJyArIE1hdGguYWJzKG51bWJlciksXG5cdCAgICB6ZXJvc1RvRmlsbCA9IHRhcmdldExlbmd0aCAtIGFic051bWJlci5sZW5ndGgsXG5cdCAgICBzaWduID0gbnVtYmVyID49IDA7XG5cdCAgcmV0dXJuIChzaWduID8gKGZvcmNlU2lnbiA/ICcrJzogJycpIDogJy0nKSArIE1hdGgucG93KDEwLCBNYXRoLm1heCgwLCB6ZXJvc1RvRmlsbCkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpICsgYWJzTnVtYmVyO1xuXHR9O1xuXHQvKipcblx0ICog5qC55o2u5qC85byP6L+U5Zue5pel5pyfXG5cdCAqIEBwYXJhbXMgW2Zvcm1hdF0gXCItXCIgKDIwMTgtMDEtMDEpIHwgXCIvXCIgKDIwMTgvMDEvMDEpXG5cdCAqL1xuXHRleHBvcnRzLmdldEZvcm1hdERhdGUgPSBmdW5jdGlvbihmb3JtYXQpIHtcblx0ICB2YXIgZCA9IG5ldyBEYXRlKCk7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiBbXG5cdCAgICAgIGQuZ2V0RnVsbFllYXIoKSxcblx0ICAgICAgemVyb0ZpbGwoZC5nZXRNb250aCgpICsgMSwgMiwgMCksXG5cdCAgICAgIHplcm9GaWxsKGQuZ2V0RGF0ZSgpLCAyLCAwKVxuXHQgICAgXS5qb2luKGZvcm1hdCB8fCAnJyk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDkxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogdXRpbFJlbW90ZUNmZy5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdHZhciBhcGx1c1V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpO1xuXHR2YXIgQVBMVVNfUkVNT1RFX0NPTkZJRyA9ICdBUExVU19SRU1PVEVfQ09ORklHJztcblx0XG5cdFxuXHQvKipcblx0ICog5YWo5Z+L54K56L+c56iL6YWN572uIOivu+WPllxuXHQqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0TG9jYWxTdGF0dXMoa2V5KSB7XG5cdCAgdmFyIGxzY2ZnO1xuXHQgIGlmICh1dGlsR29sZGxvZy5pc1dlYigpKSB7XG5cdCAgICBsc2NmZyA9IHV0aWxEYXRhLmdldExzUmVtb3RlQ2ZnKEFQTFVTX1JFTU9URV9DT05GSUcpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBsc2NmZyA9IGNhY2hlKCkuZ2V0U3luYyhhcGx1c1N0YXRpYy5BUExVU19SRU1PVEVfQ09ORklHKTtcblx0ICB9XG5cdCAgcmV0dXJuIGxzY2ZnICYmIGxzY2ZnW2tleV07XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXRBdXRvRXZlbnRTdGF0dXMoc3RhdHVzKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG5cdCAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9FVkVOVF9SRU1PVEUsIHN0YXR1c11cblx0ICB9KTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0QXV0b0V2ZW50U3RhdHVzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHJlc3VsdCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UX1JFTU9URSkgfHwgZ2V0TG9jYWxTdGF0dXMoJ2NvZGVsZXNzQ2xpY2tFdmVudFN0YXR1cycpO1xuXHQgIFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXREZXZpY2VTdGF0dXMoZW5hYmxlKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG5cdCAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19ERVZJQ0VfRU5BQkxFLCBlbmFibGVdXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldERldmljZVN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHJldHVybiBnZXRMb2NhbFN0YXR1cygnY3VycmVudERldmljZUVuYWJsZScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RFVklDRV9FTkFCTEUpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gc2V0QXV0b1BhZ2VTdGF0dXMoc3RhdHVzKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG5cdCAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9QVl9SRU1PVEUsIHN0YXR1c11cblx0ICB9KTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0QXV0b1BhZ2VTdGF0dXMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgcmVzdWx0ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPUFZfUkVNT1RFKSB8fCBnZXRMb2NhbFN0YXR1cygnY29kZWxlc3NDb2xsZWN0b3JQYWdlU3RhdHVzJyk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNldEF1dG9UcmFja1N0YXR1cyhzdGF0dXMpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcblx0ICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19FTkFCTEVEX1JFTU9URSwgc3RhdHVzXVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0XG5cdGV4cG9ydHMuZ2V0QXV0b1RyYWNrU3RhdHVzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHJlc3VsdCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19FTkFCTEVEX1JFTU9URSkgfHwgZ2V0TG9jYWxTdGF0dXMoJ2NvZGVsZXNzU3RhdHVzJyk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZW5hYmxlQ2ZnID0gZnVuY3Rpb24oY2ZnKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICBpZiAoY2ZnKSB7XG5cdCAgICAvLyBA5paH5b+DIGNvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cyA9IDEg5YWz6Zet6Ieq5YqocHZcblx0ICAgIHNldEF1dG9FdmVudFN0YXR1cyhjZmcuY29kZWxlc3NDbGlja0V2ZW50U3RhdHVzKTtcblx0ICAgIHNldEF1dG9QYWdlU3RhdHVzKGNmZy5jb2RlbGVzc0NvbGxlY3RvclBhZ2VTdGF0dXMpO1xuXHQgICAgc2V0QXV0b1RyYWNrU3RhdHVzKGNmZy5jb2RlbGVzc1N0YXR1cyk7XG5cdCAgICBzZXREZXZpY2VTdGF0dXMoY2ZnLmN1cnJlbnREZXZpY2VFbmFibGUpO1xuXHQgICAgXG5cdCAgICBpZiAoY2ZnLmV2ZW50U2FtcGxpbmdSYXRlICYmIGNmZy5ldmVudFNhbXBsaW5nUmF0ZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfRVZFTlRfTElNSVRSQVRFUywgYXBsdXNVdGlsLm1hcEV2ZW50U2FtcGxlUmF0ZXMoY2ZnLmV2ZW50U2FtcGxpbmdSYXRlKV1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGNmZy5jb2RlbGVzc0lnbm9yZUNvbXBvbmVudCAmJiBjZmcuY29kZWxlc3NJZ25vcmVDb21wb25lbnQubGVuZ3RoID4gMCkge1xuXHQgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuXHQgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19DT05GSUdfUkVNT1RFLCBjZmcuY29kZWxlc3NJZ25vcmVDb21wb25lbnRdXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdFxuXHRcblx0XG5cblxuLyoqKi8gfSksXG4vKiA5MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdC8vIHZhciBiYXNlNjQgPSByZXF1aXJlKCcuL2Jhc2U2NCcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0ICB2YXIgX2luc3RhbmNlID0gbnVsbDtcblx0ICB2YXIgX25hbWUgPSAnJztcblx0ICB2YXIgX2RhdGEgPSBudWxsO1xuXHQgIHZhciBfbG9hZGVkID0gZmFsc2U7XG5cdFxuXHQgIGZ1bmN0aW9uIENhY2hlKCkge1xuXHQgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgdGhpcy5sb2FkID0gZnVuY3Rpb24gKGNiKSB7XG5cdCAgICAgIGlmICghX2RhdGEpIHtcblx0ICAgICAgICBfbmFtZSA9ICdhcGx1c19jYWNoZV8nICsgdXRpbC5nZXRBcHBLZXkoKSB8fCAnJztcblx0ICAgICAgICBjdHguZ2V0U3RvcmFnZSh7XG5cdCAgICAgICAgICBrZXk6IF9uYW1lLFxuXHQgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7XG5cdCAgICAgICAgICAgICAgX2RhdGEgPSBqc29uVXRpbC5wYXJzZShyZXMuZGF0YSkgfHwge307XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAgICAgIGtleTogX25hbWVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBfZGF0YSA9IHt9O1xuXHQgICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAgICAgIGtleTogX25hbWVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAga2V5OiBfbmFtZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RhdGEpIHtcblx0ICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG5cdCAgICAgICAgICBrZXk6IF9uYW1lLFxuXHQgICAgICAgICAgZGF0YToganNvblV0aWwuc3RyaW5nZnkoX2RhdGEpXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICBpZiAoX2RhdGEpIHtcblx0ICAgICAgICBfZGF0YVtrZXldID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7ICAgICAgXG5cdCAgICAgIHJldHVybiAoX2RhdGEgfHwge30pW2tleV07XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICBpZiAoX2RhdGEgJiYgX2RhdGFba2V5XSkge1xuXHQgICAgICAgIGRlbGV0ZSBfZGF0YVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX2RhdGE7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9kYXRhID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAhIXRoaXMuZ2V0KGtleSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBfbG9hZGVkO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmdldFN5bmMgPSBmdW5jdGlvbihrZXkpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gbWluaS5nZXRTdG9yYWdlU3luYyhrZXkpO1xuXHQgICAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLkFQTFVTX0lNUFJJTlRfVkVSU0lPTikge1xuXHQgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgICAgICB9ICAgXG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnID8gIGpzb25VdGlsLnBhcnNlKHJlc3VsdCkgOiByZXN1bHQ7XG5cdCAgICAgIH0gY2F0Y2goZSkge31cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zZXRTeW5jID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICBtaW5pLnNldFN0b3JhZ2VTeW5jKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbWluaS5zZXRTdG9yYWdlU3luYyhrZXksIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2goZSkge31cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFfaW5zdGFuY2UpIHtcblx0ICAgICAgX2luc3RhbmNlID0gbmV3IENhY2hlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIF9pbnN0YW5jZTtcblx0ICB9O1xuXHR9KSgpO1xuXG4vKioqLyB9KSxcbi8qIDkzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3doZW5fdG9fc2VuZC5qc1xuXHQgKlxuXHQgKiAgIOS9nOeUqO+8miDkvZXml7bmiafooYxzZW5kcHbmj5Lku7Zcblx0ICogICBmbjogZ2V0TWV0YUluZm8g57un5om/6IezQmFzZVxuXHQgKiAgIGZuOiBydW4gKOaPkuS7tuagh+WHhueahOaJp+ihjOWFpeWPoylcblx0ICogICBhcGx1cy13YWl0aW5nPVwiMVwiOiDnrYnlvoU256eS5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG5cdCAqICAgYXBsdXMtd2FpdGluZz1cIk1BTlwiOiDkuI3oh6rliqjlj5HpgIFQVuaXpeW/lztcblx0ICogICBhcGx1cy13YWl0aW5nPVwiblwiOiDlhbbkuK1u5Li65aSn5LqOMeeahOato+aVtOaVsCwgYXBsdXPlnKjnrYnlvoVu5q+r56eS5LmL5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG5cdCAqXG5cdCAqICAgZGVwc++8miDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDojrflj5ZtZXRhX2luZm9cblx0ICAgICAqIFRPRE8g6Iul5LuK5ZCO5pyJ5Yqo5oCB5L+u5pS5bWV0YV9pbmZv55qE6ZyA5rGC77yMXG5cdCAgICAgKiDmraTlpITpnIDopoHliqjmgIHku44gbWV0YUluZm/mqKHlnZfkuK3ljrvosIPnlKhnZXRJbmZv5pa55rOV5p2l6I635Y+W55u45YWz5L+h5oGv77yM6L+Z5qC35YGa55qE5Z2P5aSE5piv5raI6ICX5oCn6IO9XG5cdCAgICAgKi9cblx0ICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuXHQgICAgICByZXR1cm4gbWV0YV9pbmZvO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRBcGx1c1dhaXRpbmc6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgbWV0YV9pbmZvID0gdGhpcy5nZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+j77yM6YWN572u5LqGYXBsdXNXYWl0aW5nIOW5tuS4lCDmmK9hcGx1c+iHquWKqOaJk+eCueaJjei1sOi/meautemAu+i+kVxuXHQgICAgICogPG1ldGEgbmFtZT1cImFwbHVzLXdhaXRpbmdcIiBjb250ZW50PVwieHh4XCIgLz5cblx0ICAgICAqICAgeHh4OiAnTUFOJyAtIOS4jeWPkemAgXB255qE5qCH6K+GXG5cdCAgICAgKiAgIHh4eDogJzEnIC0g5bCd6K+V562J5b6FNuenkuWQjuWPkXB2XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIo57uI5q2i5Lit6Ze05Lu25omn6KGMKSB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKHN0YXRlLCBjYikge1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIGFwbHVzV2FpdGluZyA9IHRoaXMuZ2V0QXBsdXNXYWl0aW5nKCk7XG5cdCAgICAgIGlmIChhcGx1c1dhaXRpbmcgJiYgY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgICBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpICsgJyc7XG5cdCAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYgPSB7XG5cdCAgICAgICAgICBhcGx1c1dhaXRpbmc6IGFwbHVzV2FpdGluZ1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgc3dpdGNoKGFwbHVzV2FpdGluZykge1xuXHQgICAgICAgIGNhc2UgYXBsdXNTdGF0aWMuX1VTRVJfSUQ6XG5cdCAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fQU5PTllfSUQ6XG5cdCAgICAgICAgY2FzZSAnTUFOJzpcblx0ICAgICAgICAgIHJldHVybiAnZG9uZSc7XG5cdCAgICAgICAgY2FzZSAnMSc6XG5cdCAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuXHQgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICBjYigpO1xuXHQgICAgICAgICAgfSwgNjAwMCk7XG5cdCAgICAgICAgICByZXR1cm4gNjAwMDtcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgdmFyIG4gPSBhcGx1c1dhaXRpbmcgKiAxO1xuXHQgICAgICAgICAgaWYgKChuICsgJycpICE9PSAnTmFOJykge1xuXHQgICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgICAgY2IoKTtcblx0ICAgICAgICAgICAgfSwgbik7XG5cdCAgICAgICAgICAgIHJldHVybiBuO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGVyZV90b19zZW5kLmpzXG5cdCAqXG5cdCAqICAg5L2c55So77yadW3pgJrpgZPkuIvvvIzmlLbpm4ZwduWPkemAgeWOu+WQkeS/oeaBr++8iOWfn+WQjeWPluWGs+S6jumFjee9ru+8iVxuXHQgKiAgIGZuOiBydW4gKOaPkuS7tuagh+WHhueahOaJp+ihjOWFpeWPoylcblx0ICogICDmnInphY3nva7ov5nkuKrlhaXlj6Ncblx0ICogICA8bWV0YSBuYW1lPVwiYXBsdXMtcmhvc3QtdlwiIGNvbnRlbnQ9XCJ4eHgueHh4LmNvbVwiPlxuXHQgKiAgIOaXtu+8jFBW5pel5b+XaG9zdOaUueS4uuS9v+eUqGFwbHVzLXJob3N0LXYg5qCH562+5YaFY29udGVudOWGheWjsOaYjueahOWAvFxuXHQgKlxuXHQgKiAgIGRlcHPvvJrml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOmSsOaYrSA8Y2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxVQSA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBhcGx1c1V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIFBPU1QgPSAnUE9TVCc7XG5cdHZhciBHRVQgPSAnR0VUJztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+WbWV0YV9pbmZvXG5cdCAgICAgKiBUT0RPIOiLpeS7iuWQjuacieWKqOaAgeS/ruaUuW1ldGFfaW5mb+eahOmcgOaxgu+8jFxuXHQgICAgICog5q2k5aSE6ZyA6KaB5Yqo5oCB5LuOIG1ldGFJbmZv5qih5Z2X5Lit5Y676LCD55SoZ2V0SW5mb+aWueazleadpeiOt+WPluebuOWFs+S/oeaBr++8jOi/meagt+WBmueahOWdj+WkhOaYr+a2iOiAl+aAp+iDvVxuXHQgICAgICovXG5cdCAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcblx0ICAgICAgcmV0dXJuIG1ldGFfaW5mbztcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0QXBsdXNNZXRhQnlLZXk6IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICB2YXIgbWV0YV9pbmZvID0gdGhpcy5nZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gbWV0YV9pbmZvW2tleV07XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFJob3N0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBtZXRhVmFsdWUgPSB0aGlzLmdldEFwbHVzTWV0YUJ5S2V5KCdhcGx1cy1yaG9zdC12Jyk7XG5cdCAgICAgIGlmICghYXBsdXNVdGlsLmNoZWNrRG9tYWluKG1ldGFWYWx1ZSkpIHtcblx0ICAgICAgICByZXR1cm4gJyc7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1ldGFWYWx1ZTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SGpsakhvc3RVcmw6IGZ1bmN0aW9uIChyaG9zdCkge1xuXHQgICAgICByaG9zdCA9IGFwbHVzVXRpbC5maXhEb21haW4ocmhvc3QpO1xuXHQgICAgICB2YXIgZW5kZml4ID0gJy93ZWJfbG9ncyc7XG5cdCAgICAgIHZhciB1cmwgPSByaG9zdCArIGVuZGZpeDtcblx0ICAgICAgcmV0dXJuIHVybDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0UHZIb3N0VXJsOiBmdW5jdGlvbiAocmhvc3QpIHtcblx0ICAgICAgcmhvc3QgPSBhcGx1c1V0aWwuZml4RG9tYWluKHJob3N0KTtcblx0ICAgICAgdmFyIGVuZGZpeCA9IC9cXC8kLy50ZXN0KHJob3N0KSA/ICcnIDogJy8nO1xuXHRcblx0ICAgICAgdmFyIGdpZiA9ICd2LmdpZic7XG5cdCAgICAgIGlmICh1dGlsVUEuaXNNb2JpbGUoKSkge1xuXHQgICAgICAgIGdpZiA9ICdtLmdpZic7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJob3N0ICsgZW5kZml4ICsgZ2lmO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRDaGFubmVsOiBmdW5jdGlvbiAoY2hhbm5lbCkge1xuXHQgICAgICB2YXIgYXBsdXNDaGFubmVsID0gdGhpcy5nZXRBcGx1c01ldGFCeUtleSgnYXBsdXMtY2hhbm5lbCcpO1xuXHQgICAgICB2YXIgY2hhbm5lbHMgPSBbJ1dTJywgJ1dTLU9OTFknLCBHRVQsIFBPU1RdO1xuXHRcblx0ICAgICAgdmFyIHJzO1xuXHQgICAgICBpZiAoY2hhbm5lbHMuaW5kZXhPZihjaGFubmVsKSA+IC0xKSB7XG5cdCAgICAgICAgcnMgPSBjaGFubmVsO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghcnMgJiYgY2hhbm5lbHMuaW5kZXhPZihhcGx1c0NoYW5uZWwpID4gLTEpIHtcblx0ICAgICAgICBycyA9IGFwbHVzQ2hhbm5lbDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcnM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogaGpsauWPkemAgeWIsOWTqumHjOWOu1xuXHQgICAgICogMS4g5aaC5p6c5piv5Y2V5Y+R77yMaDXnmoTlj5HpgIHljrvlkJHpgLvovpHnm7TmjqXot7Pov4dcblx0ICAgICAqIDIuIHZhbGlkaXR5OlxuXHQgICAgICogICA8bWV0YSBuYW1lPVwiYXBsdXMtcmhvc3QtZ1wiIGNvbnRlbnQ9XCJnbS5tbXN0YXQuY29tXCIgLz5cblx0ICAgICAqICAg5pyJ5YC85LiU5ZCI5rOV5omN5L2/55So77yM5ZCm5YiZ55So6buY6K6k55qEZ20ubW1zdGF0LmNvbS93Z28ubW1zdGF0LmNvbVxuXHQgICAgICpcblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpOyAgICAgIFxuXHQgICAgICB2YXIgaXNfc2luZ2xlID0gISF0aGlzLm9wdGlvbnMuY29udGV4dC5pc19zaW5nbGU7XG5cdCAgICAgIGlmIChpc19zaW5nbGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHJlY29yZFR5cGUgPSB0aGlzLm9wdGlvbnMuY29uZmlnLnJlY29yZFR5cGU7XG5cdCAgICAgIHZhciByaG9zdCA9IHRoaXMuZ2V0Umhvc3QocmVjb3JkVHlwZSk7XG5cdCAgICAgIGlmICghcmhvc3QpIHtcblx0ICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgLy8gICBtc2c6ICdjdXJyZW50IHJlcXVlc3QgZG9tYWluIGludmFsaWQsIHBsZWFzZSBjaGVjayB5b3VyIGFwbHVzLXJob3N0LXYgdmFsdWUgaW5zaWRlIG1ldGFpbmZvISdcblx0ICAgICAgICAvLyB9KTtcblx0ICAgICAgICB1bG9nKCkudygnY3VycmVudCByZXF1ZXN0IGRvbWFpbiBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91ciBhcGx1cy1yaG9zdC12IHZhbHVlIGluc2lkZSBtZXRhaW5mbyEnKTtcblx0ICAgICAgICByZXR1cm4gJ2RvbmUnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgdXJsO1xuXHQgICAgICBpZiAocmVjb3JkVHlwZSA9PT0gJ1BWJyAmJiAhYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuXHQgICAgICAgIHVybCA9IHRoaXMuZ2V0UHZIb3N0VXJsKHJob3N0KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB1cmwgPSB0aGlzLmdldEhqbGpIb3N0VXJsKHJob3N0KTtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBtZXRob2QgPSB0aGlzLmdldENoYW5uZWwoY29uZmlnLm1ldGhvZCkgfHwgUE9TVDtcblx0ICAgICAgaWYgKG1ldGhvZCA9PT0gUE9TVCAmJiAoIW5hdmlnYXRvciB8fCAhbmF2aWdhdG9yLnNlbmRCZWFjb24pKSB7XG5cdCAgICAgICAgbWV0aG9kID0gR0VUO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZCA9IGNvbmZpZy5tZXRob2Q7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQudXJsID0gdXJsO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogVUHliKTmlq3nm7jlhbPlt6Xlhbdcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmlzTW9iaWxlID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIFVBID0gbmF2aWdhdG9yID8gbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICcnO1xuXHQgIHZhciBpc0FsaUFwcCA9IC9BbGlBcHB8WXVub3N8Y3ljbG9uZS9pLnRlc3QoVUEpOyAvLyDkupFPU+a1j+iniOWZqOWGheaguOS4umN5Y2xvbmVcblx0ICB2YXIgaXNJT1MgPSAoL2lQaG9uZXxpUGFkfGlQb2QvaSkudGVzdChVQSk7XG5cdCAgdmFyIGlzQW5kcm9pZCA9ICgvQW5kcm9pZC9pKS50ZXN0KFVBKTtcblx0ICB2YXIgaXNXaW5kb3dzUGhvbmUgPSAoL1dpbmRvd3MgUGhvbmUvaSkudGVzdChVQSkgfHwgKC9JRU1vYmlsZS9pKS50ZXN0KFVBKSB8fCAoL1dQRGVza3RvcC9pKS50ZXN0KFVBKTtcblx0ICB2YXIgaXNCbGFja0JlcnJ5ID0gKC9CbGFja0JlcnJ5L2kpLnRlc3QoVUEpO1xuXHQgIHZhciBpc09wZXJhTW9iaWxlID0gKC9PcGVyYSBNaW5pL2kpLnRlc3QoVUEpO1xuXHQgIHJldHVybiBpc0FsaUFwcCB8fCBpc0lPUyB8fCBpc0FuZHJvaWQgfHwgaXNXaW5kb3dzUGhvbmUgfHwgaXNCbGFja0JlcnJ5IHx8IGlzT3BlcmFNb2JpbGU7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogOTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hhdF90b19zZW5kLmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuXHQgKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY29va2llID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgbG9nSWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdHZhciB1dGlsVUEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxQYXJhbXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTtcblx0dmFyIGVhY2hNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHQvLyDkuIDmsb3lpKfkvJfpnIDmsYLvvJroh6rliqjop6PmnpB1cmwg77yf5Y+35ZCO55qE5Y+C5pWw77yM5YGa5Li66aG16Z2i5rWP6KeI5LqL5Lu255qE5LqL5Lu25bGe5oCn5LiK5oqlXG5cdC8vIHVybOWPguaVsOWcqOWIneWni+WMluaXtuiOt+WPluS4gOasoeWNs+WPr++8jOmBv+WFjeavj+asoeaXpeW/l+mHjeWkjei/kOihjFxuXHR2YXIgdXJsUGFyYW1zID0gdXRpbERhc2guZ2V0VXJsUGFyYW1zKCk7XG5cdFxuXHRmdW5jdGlvbiBnZXRVdG1QYXJhbXNPYmogKCkge1xuXHQgIHZhciBvYmogPSB7fTtcblx0ICB2YXIgdXAgPSB1dGlsRGFzaC5nZXRVcmxQYXJhbXMoKTtcblx0ICB0cnkge1xuXHQgICAgZWFjaE1hcCh1cCwgZnVuY3Rpb24gKGssIHYpIHtcblx0ICAgICAgLy8g6YG/5YWN5Li656m65pe26YeN5YaZZ2xvYmFscHJvcGVydHnlhoXnmoTlsZ7mgKdcblx0ICAgICAgaWYoay5pbmRleE9mKCd1dG1fJykgPT09IDApIHtcblx0ICAgICAgICBvYmpba10gPSB2O1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoIChlKSB7fVxuXHQgIHJldHVybiBvYmo7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgZ2V0Q29tbW9uUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICB2YXIgZ2xvYmFsZGF0YSA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1nbG9iYWxkYXRhJykgfHwge307XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICAvLyB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIHBsYXRmb3JtVHlwZSA9IHV0aWxVQS5pc01vYmlsZSgpID8gJ1dBUCcgOiAnUEMnO1xuXHQgICAgICB2YXIgdXNlckluZm8gPSB7XG5cdCAgICAgICAgX2Rldl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSxcblx0ICAgICAgICBfYW5vbnlfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCksXG5cdCAgICAgICAgX3VzZXJfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSxcblx0ICAgICAgICBfdXNlcl9uaWNrOiBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpIHx8IGNvb2tpZS5nZXRDb29raWUoJ3RyYWNrbmljaycpLFxuXHQgICAgICAgIF9zZXNzaW9uX2lkOiBhcGx1cy5nZXRNZXRhSW5mbygnX3Nlc3Npb25faWQnKSxcblx0ICAgICAgfTtcblx0ICAgICAgaWYgKCFhcGx1cy5nbG9iYWxDb25maWcuaXNVTSkge1xuXHQgICAgICAgIHVzZXJJbmZvLl9wYWdlX3RpdGxlID0gZG9jdW1lbnQudGl0bGUgfHwgJyc7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHVybCA9IGNvbmZpZy5wYWdlVXJsIHx8IChsb2NhdGlvbiA/IGxvY2F0aW9uLmhyZWYgOiAnLScpO1xuXHQgICAgICB2YXIgdGl0bGUgPSBjb25maWcudGl0bGUgfHwgKGRvY3VtZW50ICYmIGRvY3VtZW50LnRpdGxlKTtcblx0ICAgICAgdmFyIGNhY2hlID0gKGFwbHVzLmdsb2JhbENvbmZpZy5pc0RlY29kZVVybCA/ICdEQ18nIDogJycpICsgbG9nSWQuZ2V0TG9nSWQodXJsLCB0aXRsZSk7XG5cdFxuXHQgICAgICB2YXIgYXBwSWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwS2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJyk7XG5cdCAgICAgIGlmICghYXBwSWQpIHtcblx0ICAgICAgICB1bG9nKCkudygncGxlYXNlIHNldCBhcHBJZCBpbiBhcGx1cyBtZXRhSW5mbyBiZWZvcmUgc2VuZFBWIScpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjb21tb25QYXJhbXMgPSB1dGlsRGFzaC5hc3NpZ24oe1xuXHQgICAgICAgIGFwcElkOiBhcHBJZCxcblx0ICAgICAgICBjYWNoZTogY2FjaGUsIC8vIGxvZ0lkLmdldExvZ0lkKHVybCwgdGl0bGUpLFxuXHQgICAgICAgIGNuYTogZXRhZy5jbmEgfHwgY29va2llLmdldENvb2tpZUNuYSgnY25hJykgfHwgZ2xvYmFsZGF0YS5jbmEgfHwgJycsIFxuXHQgICAgICAgIF9hYmZwYzogZ2xvYmFsZGF0YS5fYWJmcGMgfHwgJycsIFxuXHQgICAgICAgIGV0YWc6IGV0YWcsXG5cdCAgICAgICAgcHJlOiBfJC5wYWdlX3JlZmVycmVyIHx8ICctJywgXG5cdCAgICAgICAgc2RrX2luZm86IHtcblx0ICAgICAgICAgIGpzdmVyOiBhcGx1cy5nbG9iYWxDb25maWcuc2NyaXB0X25hbWUsXG5cdCAgICAgICAgICBsdmVyOiBhcGx1cy5nbG9iYWxDb25maWcubHZlcixcblx0ICAgICAgICAgIGN1c3RvbVNka0lkOiBhcGx1cy5nZXRNZXRhSW5mbygnY3VzdG9tU2RrSWQnKSB8fCAnJyxcblx0ICAgICAgICAgIHBsYXRmb3JtVHlwZTogcGxhdGZvcm1UeXBlLnRvTG93ZXJDYXNlKCksXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0cmFja2VyRXZlbnRDb2RlOiBjb25maWcudHJhY2tlckV2ZW50Q29kZSxcblx0ICAgICAgICB0aXRsZTogdGl0bGUsXG5cdCAgICAgICAgdXJsOiB1cmwsXG5cdCAgICAgICAgY2xpZW50OiBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9LFxuXHQgICAgICAgIHRpbWVab25lOiB1dGlsUGFyYW1zLmdldFRpbWVab25lKCksXG5cdCAgICAgICAgZ29rZXk6IHVzZXJJbmZvLCAvLyB1dGlsRGFzaC5hc3NpZ24oc3BtSW5mbywgdXNlckluZm8pLFxuXHQgICAgICAgIGdta2V5OiB1c2VyZGF0YS5nbWtleSB8fCAnJyxcblx0ICAgICAgICBtZXRob2Q6IHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kXG5cdCAgICAgIH0sIHVzZXJJbmZvKTtcblx0ICAgICAgaWYgKCFhcGx1cy5nbG9iYWxDb25maWcuaXNVTSkge1xuXHQgICAgICAgIHZhciB1dG1zID0gZ2V0VXRtUGFyYW1zT2JqKCk7XG5cdCAgICAgICAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbC1hcmdzJyk7XG5cdCAgICAgICAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSB8fCAhdXRpbERhc2guaXNFbXB0eU9iamVjdCh1dG1zKSkge1xuXHQgICAgICAgICAgY29tbW9uUGFyYW1zLmdsb2JhbEFyZ3MgPSBhc3NpZ24oZ3AsIHV0bXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gY29tbW9uUGFyYW1zO1xuXHQgICAgfSxcblx0XG5cdFxuXHQgICAgZ2V0UHZQYXJhbXM6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgLy8gdmFyIHRhcmdldFVybCA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQudXJsO1xuXHQgICAgICB2YXIgY29tbW9uUGFyYW1zID0gdGhpcy5nZXRDb21tb25QYXJhbXMoKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIGlmICghdGhpcy5vcHRpb25zLmNvbmZpZy5pc19hdXRvKSB7XG5cdCAgICAgICAgY29tbW9uUGFyYW1zLnNka19pbmZvLm1hbnNuZGxvZyA9IDE7XG5cdCAgICAgIH1cblx0ICAgICAgLy8g6ICB6ZO+6LevIC0tIOWwhnVybOWPguaVsOaVtOWQiOi/m2dva2V577yM5LqL5Lu25Y+C5pWw5LyY5YWI57qnID4gdXJs5Y+C5pWwXG5cdCAgICAgIGlmKCFhcGx1cy5nbG9iYWxDb25maWcuaXNVTSkge1xuXHQgICAgICAgIGNvbW1vblBhcmFtcy5nb2tleSA9IHV0aWxEYXNoLmFzc2lnbih1cmxQYXJhbXMsIGNvbW1vblBhcmFtcy5nb2tleSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHV0aWxEYXNoLmFzc2lnbihjb21tb25QYXJhbXMsIHtcblx0ICAgICAgICBldmVudF9jb2RlOiAnMjAwMScsXG5cdCAgICAgICAgbG9ndHlwZTogJzEnLFxuXHQgICAgICAgIGxvZ2tleTogdXRpbFVBLmlzTW9iaWxlKCkgPyAnL20uZ2lmJyA6ICcvdi5naWYnLFxuXHQgICAgICAgIGV2ZW50X3RpbWVzdGFtcDogYXBsdXMuXyQuc2VuZF9wdl9jb3VudCA+IDAgPyBuZXcgRGF0ZSgpIDogYXBsdXMubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSxcblx0ICAgICAgICBpc19hdXRvOiB0aGlzLm9wdGlvbnMuY29uZmlnLmlzX2F1dG8sXG5cdCAgICAgICAgdHJhY2tfdHlwZTogdGhpcy5vcHRpb25zLmNvbmZpZy50cmFja190eXBlXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRIamxqUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG5cdCAgICAgIHZhciBoamxqUGFyYW1zID0ge1xuXHQgICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLkVWRU5UX0lEX01BUFt1c2VyZGF0YS5nbWtleV0gfHwgYXBsdXNTdGF0aWMuT1RIRVIsXG5cdCAgICAgICAgbG9ndHlwZTogJzInLFxuXHQgICAgICAgIGxvZ2tleTogdXNlcmRhdGEubG9na2V5LFxuXHQgICAgICAgIGV2ZW50X3RpbWVzdGFtcDogbmV3IERhdGUoKSxcblx0ICAgICAgICAvLyBtYW5zbmRsb2c6ICcxJyxcblx0ICAgICAgfTtcblx0ICAgICAgcmV0dXJuIHV0aWxEYXNoLmFzc2lnbih0aGlzLmdldENvbW1vblBhcmFtcygpLCBoamxqUGFyYW1zKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiAxLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWPguaVsDogYmFzaWNMaXN0XG5cdCAgICAgKiAyLiBiZWFjb27mianlsZXlj4LmlbA6IGV4cGFyYW1zXG5cdCAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG5cdCAgICAgKiDkuK3pgJTlpITnkIZfJOWFqOWxgOWPmOmHjzogcHJvY2Vzc0xvZGFzaERvbGxhclxuXHQgICAgICogNC4gbG9jYWxTdG9yYWdl5Lit5a2Y5YKo55qE5LiK5LiA6aG1c3Bt5L+h5oGvOiBzcG1hYnRlc3Rcblx0ICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHBhcmFtcyA9IHt9O1xuXHQgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbmZpZy5yZWNvcmRUeXBlID09PSAnUFYnKSB7XG5cdCAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRQdlBhcmFtcygpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0SGpsalBhcmFtcygpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gcGFyYW1zO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDk3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBwdmlkXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxIYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdFxuXHR2YXIgZ2V0UmFuZG9tSWQgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHQgIC8qKlxuXHQgICAqIOeUn+aIkOacrOmhteeahCBwdiBpZFxuXHQgICAqIHB2IGlkIOWPqumcgOimgeW9k+WJjeeUqOaIt+S8muivneWUr+S4gOWNs+WPr++8jOi/meWEv+S9v+eUqOS4gOS4qiA2IOS9jeeahCAxNiDov5vliLbmlbDlrZdcblx0ICAgKi9cblx0ICB2YXIgcm5kX3N0cnMgPSAnJztcblx0ICB2YXIgY2hhcnMgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xuXHQgIHZhciBoYW5kbGVkID0gZmFsc2U7XG5cdCAgdmFyIGNoYXI7XG5cdFxuXHQgIC8qKlxuXHQgICAqIOino+WGs+mDqOWIhiBzcG0g6KKrIEdGVyDlopnkuobnmoTmg4XlhrXvvIzlpoIgMjIuZ2xcblx0ICAgKiDmjpLpmaQgcHZpZCDku6UgZ2wg5byA5aS055qE5oOF5Ya1XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gaGFuZGxlUFZJZCAoY2hhclBvcykge1xuXHQgICAgdmFyIGNoYXJzV2l0aG91dEcgPSAnMDEyMzQ1Njc4OWFiY2RlZmhpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZISUpLTE1OT1BRUlNUVVZXWFlaJztcblx0ICAgIHZhciBjaGFyc1dpdGhvdXRMID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa21ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktNTk9QUVJTVFVWV1hZWic7XG5cdFxuXHQgICAgaWYgKGNoYXJQb3MgPT0gMSkge1xuXHQgICAgICByZXR1cm4gY2hhcnNXaXRob3V0Ry5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcblx0ICAgIH0gZWxzZSBpZiAoY2hhclBvcyA9PSAyKSB7XG5cdCAgICAgIHJldHVybiBjaGFyc1dpdGhvdXRMLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MCksIDEpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICcwJztcblx0ICB9O1xuXHRcblx0ICB3aGlsZSAocm5kX3N0cnMubGVuZ3RoIDwgc2l6ZSkge1xuXHQgICAgY2hhciA9IGNoYXJzLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MiksIDEpO1xuXHQgICAgLy8g5aSE55CG6KKr5aKZ55qE5oOF5Ya177yM55uu5YmN5Y+q6ZKI5a+5Z2zlvIDlpLTnmoRcblx0ICAgIGlmICghaGFuZGxlZCAmJiBybmRfc3Rycy5sZW5ndGggPD0gMiAmJiAoY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJyB8fCBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2wnKSkge1xuXHQgICAgICBpZiAocm5kX3N0cnMubGVuZ3RoID09PSAwICYmIGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnZycpIHtcblx0ICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkge1xuXHQgICAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMSk7XG5cdCAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAocm5kX3N0cnMubGVuZ3RoID09IDEgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJyAmJiBybmRfc3Rycy5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSA9PSAnZycpIHtcblx0ICAgICAgICBjaGFyID0gaGFuZGxlUFZJZCgyKTtcblx0ICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcm5kX3N0cnMgKz0gY2hhcjtcblx0ICB9XG5cdCAgcmV0dXJuIHJuZF9zdHJzO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q2hhcnMgKGFyZ3MsIHNpemUsIGRlZmF1bHRWYWwpIHtcblx0ICBpZiAoYXJncykge1xuXHQgICAgcmV0dXJuIHV0aWxIYXNoLmhhc2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3MpKS5zdWJzdHIoMCwgc2l6ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBkZWZhdWx0VmFsO1xuXHQgIH1cblx0fVxuXHRcblx0ZXhwb3J0cy5nZXRMb2dJZCA9IGZ1bmN0aW9uIChwYWdlVXJsLCBsb2dOYW1lKSB7XG5cdCAgdmFyIHJhbmRvbThDaGFycyA9IGdldFJhbmRvbUlkKDgpO1xuXHQgIHZhciByYW5kb200Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDQpO1xuXHQgIHZhciByYW5kb202Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDYpO1xuXHQgIHJldHVybiBbXG5cdCAgICBnZXRDaGFycyhwYWdlVXJsLCA0LCByYW5kb200Q2hhcnMpLFxuXHQgICAgZ2V0Q2hhcnMobG9nTmFtZSwgNCwgcmFuZG9tNENoYXJzKSxcblx0ICAgIHJhbmRvbTZDaGFyc1xuXHQgIF0uam9pbignJyk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDov5Tlm55HTVTmoLzlvI/nmoTml7bljLrvvIzlpoLvvJpHTVQrMDU6NDUsIEdNVC0wNzowMCwgR01UKzA4OjAwXG5cdCAqL1xuXHRleHBvcnRzLmdldFRpbWVab25lID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBfdGltZVpvbmUgPSAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjA7XG5cdCAgdmFyIF9hbmQgPSAnKyc7XG5cdCAgaWYgKF90aW1lWm9uZSA8IDApIHtcblx0ICAgIF9hbmQgPSAnLSc7XG5cdCAgfVxuXHQgIHZhciB6b25lID0gTWF0aC5hYnMocGFyc2VJbnQoX3RpbWVab25lKSk7XG5cdCAgdmFyIHJlbWFpbmRlciA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkgLSBfdGltZVpvbmUpO1xuXHQgIHZhciByZW1haW5kZXJab25lID0gJzAwJztcblx0ICBpZiAocmVtYWluZGVyID4gMCkge1xuXHQgICAgcmVtYWluZGVyWm9uZSA9IDYwICogcmVtYWluZGVyO1xuXHQgIH1cblx0ICByZXR1cm4gJ0dNVCcgKyBfYW5kICsgKHpvbmUgPiA5ID8gem9uZSA6ICgnMCcgKyB6b25lKSkgKyAnOicgKyByZW1haW5kZXJab25lO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogOTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YS5qc1xuXHQgKlxuXHQgKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcblx0ICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsHB2ZGF0YeWQjumdou+8mnB2ZGF0YS5jb25jYXQodXNlcmRhdGEpXG5cdCAqICBkZXBzOiB3aGF0X3RvX3NlbmRwdlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG5cdCAgICAgKlxuXHQgICAgICogZ29rZXk6XG5cdCAgICAgKiAgIOi/meWdl+S4uuWvueWOhuWPsnVzZXJkYXRh5Lyg6YCS55qE5YW85a655YGa5rOV77yMVE9ET++8muaOqOWKqOW6lOeUqOaWueWPmOabtFxuXHQgICAgICogICDlupTnlKjmlrnkvKDpgJLnmoRnb2tleeagvOW8j+W6lOeUqOaWueiHquihjOWGs+Wumu+8jFxuXHQgICAgICogICAgIOWmgiBnb2tleT1cImE9MSZiPTJcIiDmiJYge1wiYVwiOlt7XCJrZXlcIjoyMDE2MTIyNjE1NTAsXCJ2YWx1ZVwiOjAuMX0se1wia2V5XCI6MjAxNjEyMjYxNjAwLFwidmFsdWVcIjowLjV9LHtcImtleVwiOjIwMTYxMjI2MTYxMCxcInZhbHVlXCI6MX1dfVxuXHQgICAgICogICDov5nlnZfpgLvovpHmmK/pgKDmiJBleHRlbmRhcmdz5YaF6YOo5Ye6546w5aSa5Liq5pac5p2g55qE5YWD5Ye277yB77yB77yBXG5cdCAgICAgKiBwYWdlX2lkOlxuXHQgICAgICogICDmnIlwYWdlX2lk5bCx5Zyoc3BtYuS4rea3u+WKoOWtkOWPguaVsFxuXHQgICAgICogICDml6BwYWdlX2lk5bCx5riF6Zmkc3BtYuS4reeahOWtkOWPguaVsFxuXHQgICAgICogc3BtX2NudFxuXHQgICAgICogICDmm7TmlLnlroxzcG1i5L2N6L+Y6ZyA6KaB5pu05pawc3BtX2NudCBA6LCL5aOrIGluIDIwMTgtMDMtMjAgIOS7peWFjXRvVVTnmoRzcG0tY2505Lii5aSx5YiG5qG25Y+3XG5cdCAgICAgKiDkuKrmgKfljJblj4LmlbDvvJpcblx0ICAgICAqICAgMS4gKGFwbHVz5qSN5YWlKTogPG1ldGEgbmFtZT1cImFwbHVzLWNwdmRhdGFcIiBjb250ZW50PVwiSlNPTnN0cmluZ1wiPlxuXHQgICAgICogICAyLiDmlrnms5XkvKDlhaU6IGFwbHVzLnNlbmRQVih7Q09ORklHfSwge1VTRVJEQVRFfSk7XG5cdCAgICAgKiDlj43kvZzlvIrnmoTmlofmoaPlrr3pq5g6IF9wdyxfcGhcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG5cdCAgICAgKi9cblx0ICAgIGdldFVzZXJkYXRhOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgZCA9IHt9O1xuXHRcblx0ICAgICAgaWYgKGNvbmZpZyAmJiAhY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgICBpZiAoY29uZmlnLmdva2V5KSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgZCA9IGZvcm1hdC5wYXJhbTJvYmooY29uZmlnLmdva2V5KTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgZCA9IGNvbmZpZy5nb2tleTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb21ib1VzZXJkYXRhID0gZnVuY3Rpb24oX2RhdGEpIHtcblx0ICAgICAgICBpZihpc0FycmF5KF9kYXRhKSl7XG5cdCAgICAgICAgICBfZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuXHQgICAgICAgICAgICBkID0gdXRpbERhc2guYXNzaWduKGQsIGl0ZW0pO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfWVsc2V7XG5cdCAgICAgICAgICBkID0gdXRpbERhc2guYXNzaWduKGQsIF9kYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbGRhdGEnKSk7XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXHRcblx0ICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5aSE55CGXyTlhajlsYDlj5jph48gLS0tLS0tIDJcblx0ICAgICAqL1xuXHQgICAgcHJvY2Vzc0xvZGFzaERvbGxhcjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5yZWZlcnJlcikge1xuXHQgICAgICAgIF8kLnBhZ2VfcmVmZXJyZXIgPSBjb25maWcucmVmZXJyZXI7XG5cdCAgICAgIH1cblx0ICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZVByZTogZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICBpZiAoXyQucGFnZV9yZWZlcnJlcikge1xuXHQgICAgICAgIGRhdGEucHJlID0gIF8kLnBhZ2VfcmVmZXJyZXI7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGRhdGE7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgZCA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhO1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSB1dGlsRGFzaC5hc3NpZ24odGhpcy5nZXRVc2VyZGF0YSgpLCBkLnVzZXJkYXRhIHx8IHt9KTtcblx0ICAgICAgdGhpcy5wcm9jZXNzTG9kYXNoRG9sbGFyKCk7XG5cdFxuXHQgICAgICBkLmdva2V5ID0gdXRpbERhc2guYXNzaWduKGQuZ29rZXksIHVzZXJkYXRhKTtcblx0ICAgICAgZCA9IHRoaXMudXBkYXRlUHJlKGQpO1xuXHRcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBkO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC51c2VyZGF0YSA9IGQuZ29rZXk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkpIHtcblx0ICAgIHJldHVybiBBcnJheS5pc0FycmF5KG8pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDEwMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhX3dlYi5qc1xuXHQgKlxuXHQgKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcblx0ICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsHB2ZGF0YeWQjumdou+8mnB2ZGF0YS5jb25jYXQodXNlcmRhdGEpXG5cdCAqICBkZXBzOiB3aGF0X3RvX3NlbmRwdlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsRXhpbmZvID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpO1xuXHR2YXIgZ2V0RXhQYXJhbXNPYmogPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldEV4UGFyYW1zSW5mbzogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgZSA9IHV0aWxFeGluZm8uZ2V0RXhQYXJhbXMoKTtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEuZXhwYXJhbXMgPSBlO1xuXHQgICAgICByZXR1cm4gZ2V0RXhQYXJhbXNPYmooZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgZ29rZXkgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleTtcblx0ICAgICAgZ29rZXkgPSBhc3NpZ24odGhpcy5nZXRFeFBhcmFtc0luZm8oKSwgZ29rZXkpO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleSA9IGdva2V5O1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDEwMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHR2YXIgdXRpbERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHR2YXIgdXRpbEF0dHJpYnV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnLi91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qKlxuXHQgKiBwYXJhbSB0byBhcnJheVxuXHQgKiAyMDE2LTA4LTI0IOaUvuW8gO+8jOeUqOadpeWkhOeQhmV4cGFyYW1zIEDosIvlo6tcblx0ICog5bCG5LiA5Liq566A5Y2V55qE5b2i5aaCIGE9MSZiPTImYz0zIOi/meagt+eahOWPguaVsOi9rOWMluS4uueugOWNleeahCBhcnJheSDmoLzlvI/vvIzlpoLvvJpcblx0ICogW1tcImFcIiwgXCIxXCJdLCBbXCJiXCIsIFwiMlwiXSwgW1wiY1wiLCBcIjNcIl1dXG5cdCAqXG5cdCAqIEBwYXJhbSBwYXJhbXMge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIHBhcmFtMmFyciAocGFyYW1zKSB7XG5cdCAgdmFyIGEgPSBwYXJhbXMuc3BsaXQoXCImXCIpLFxuXHQgICAgaSA9IDAsIGwgPSBhLmxlbmd0aCxcblx0ICAgIGl0ZW0sXG5cdCAgICBhcnIgPSBbXTtcblx0ICBmb3IgKDsgaSA8IGw7IGkrKykge1xuXHQgICAgaXRlbSA9IGFbaV0uc3BsaXQoXCI9XCIpO1xuXHQgICAgYXJyLnB1c2goW2l0ZW0uc2hpZnQoKSwgaXRlbS5qb2luKFwiPVwiKV0pO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGFycjtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDlsIZtZXRh6YWN572u55qEZXhwYXJhbXPlkIjlubbliLBiZWFjb27ovpPlh7rnmoRleHBhcmFtc+S4ilxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IGJlYWNvbkV4cGFyYW1zXG5cdCAqIEBwYXJhbXMge1N0cmluZ30gbWV0YUV4cGFyYW1zXG5cdCAqXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gZXhwYXJhbXNcblx0ICovXG5cdGZ1bmN0aW9uIG1lcmdlRXhwYXJhbXMgKGJlYWNvbkV4cGFyYW1zLCBtZXRhRXhwYXJhbXMpIHtcblx0ICB2YXIgYmV4cGFyYW1zID0gJ2FwbHVzJnNpZHg9YXBsdXNTaWRleCZja3g9YXBsdXNDa3gnO1xuXHQgIHZhciBkZWZhdWx0RXhwYXJhbXMgPSBiZWFjb25FeHBhcmFtcyB8fCBiZXhwYXJhbXM7XG5cdCAgdHJ5IHtcblx0ICAgIGlmIChtZXRhRXhwYXJhbXMpIHtcblx0ICAgICAgdmFyIG1ldGFPYmogPSBmb3JtYXQucGFyYW0yb2JqKG1ldGFFeHBhcmFtcyk7XG5cdCAgICAgIHZhciBibGFja3MgPSBbYXBsdXNTdGF0aWMuQVBMVVMsICdjbmEnLCBhcGx1c1N0YXRpYy5TUE1fQ05ULCBhcGx1c1N0YXRpYy5TUE1fVVJMLCBhcGx1c1N0YXRpYy5TUE1fUFJFLCAnbG9ndHlwZScsICdwcmUnLCAndWlkYXBsdXMnLCAnYXNpZCcsICdzaWR4JywgJ3RyaWQnLCAnZ29rZXknXTtcblx0ICAgICAgZWFjaChibGFja3MsIGZ1bmN0aW9uKGspIHtcblx0ICAgICAgICBpZiAobWV0YU9iai5oYXNPd25Qcm9wZXJ0eShrKSkge1xuXHQgICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe21zZzogJ0NhbiBub3QgaW5qZWN0IGtleXdvcmRzOiAnICsga30pO1xuXHQgICAgICAgICAgdWxvZygpLncoJ0NhbiBub3QgaW5qZWN0IGtleXdvcmRzOiAnICsgayk7XG5cdCAgICAgICAgICBkZWxldGUgbWV0YU9ialtrXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBkZWxldGUgbWV0YU9ialsnJ107IC8vIOepuueZvWtleeS5n+enu+mZpOaOiVxuXHRcblx0ICAgICAgdmFyIHRtcFBhcmFtID0gJyc7XG5cdCAgICAgIC8vIOaciWJlYWNvbumFjee9rueahOaDheWGtVxuXHQgICAgICBpZiAoYmVhY29uRXhwYXJhbXMpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSBiZWFjb25FeHBhcmFtcy5tYXRjaCgvYXBsdXMmLykuaW5kZXg7XG5cdCAgICAgICAgdmFyIGJlYWNvbk9iaiA9IGluZGV4ID4gMCA/IGZvcm1hdC5wYXJhbTJvYmooYmVhY29uRXhwYXJhbXMuc3Vic3RyaW5nKDAsIGluZGV4KSkgOiB7fTtcblx0ICAgICAgICBkZWxldGUgYmVhY29uT2JqWycnXTtcblx0ICAgICAgICB0bXBQYXJhbSA9IGZvcm1hdC5vYmoycGFyYW0odXRpbERhc2guYXNzaWduKGJlYWNvbk9iaiwgbWV0YU9iaikpICsgJyYnICsgYmVhY29uRXhwYXJhbXMuc3Vic3RyaW5nKGluZGV4LCBiZWFjb25FeHBhcmFtcy5sZW5ndGgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIOaXoGJlYWNvbumFjee9rueahOaDheWGtVxuXHQgICAgICAgIHRtcFBhcmFtID0gZm9ybWF0Lm9iajJwYXJhbShtZXRhT2JqKSArICcmJyArIGJleHBhcmFtcztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdG1wUGFyYW07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gZGVmYXVsdEV4cGFyYW1zO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJldHVybiBkZWZhdWx0RXhwYXJhbXM7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLm1lcmdlRXhwYXJhbXMgPSBtZXJnZUV4cGFyYW1zO1xuXHRcblx0XG5cdGZ1bmN0aW9uIGdldEV4UGFyYW1zRnJvbU1ldGEgKCkge1xuXHQgIHZhciBfJCA9IGFwbHVzICYmIGFwbHVzLl8kID8gYXBsdXMuXyQgOiB7fTtcblx0ICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvIHx8IHt9O1xuXHQgIHJldHVybiBtZXRhX2luZm9bJ2FwbHVzLWV4cGFyYW1zJ10gfHwgJyc7XG5cdH07XG5cdFxuXHQvLyBleHBhcmFtc+WPguaVsC0tLS0tLSAyXG5cdGZ1bmN0aW9uIGdldEV4UGFyYW1zICgpIHtcblx0ICB2YXIgY3VycmVudF9ub2RlID0gdXRpbERvbS5nZXRDdXJyZW50Tm9kZSgpO1xuXHQgIHZhciBiX2V4cGFyYW1zID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShjdXJyZW50X25vZGUsICdleHBhcmFtcycpO1xuXHQgIHZhciBleHBhcmFtcyA9IG1lcmdlRXhwYXJhbXMoYl9leHBhcmFtcywgZ2V0RXhQYXJhbXNGcm9tTWV0YSgpKSB8fCAnJztcblx0ICByZXR1cm4gZXhwYXJhbXMgJiYgZXhwYXJhbXMucmVwbGFjZSgvJmFtcDsvZywgXCImXCIpLnJlcGxhY2UoL1xcYnVzZXIoaXxJKWQ9LywgXCJ1aWRhcGx1cz1cIik7XG5cdH07XG5cdGV4cG9ydHMuZ2V0RXhQYXJhbXMgPSBnZXRFeFBhcmFtcztcblx0XG5cdC8qKlxuXHQgKiDlh7rkuo7mtYHph4/nmoTogIPomZHvvIxiZWFjb27ovpPlh7rnmoRleHBhcmFtc+WPquWPliBleHBhcmFtc19rZXlfbmFtZXPvvIjop4HphY3nva7vvIkg5YaF55qE5Yeg5Liq5a2X5q61XG5cdCAqIOiLpWV4cGFyYW1z5YaF5pyJdXNlcmlkIOaIluiAhSDlnKjlj5HpgIHnmoRQVumSn3VpZGFwbHVz5pyJ5YC8LCDliJnlnKjku6Tnrq3or7fmsYLnmoRnb2tleeWGheS5n+i/veWKoHVpZHBhbHVz5Y+C5pWwXG5cdCAqIOiLpWV4cGFyYW1z5YaF5pyJ5Lyg5YWlcGNfaS9wdV9pLCDliJnlnKjku6Tnrq3or7fmsYLnmoRnb2tleeWGheS5n+m7mOiupOi/veWKoHBjX2kvcHVfaeWPguaVsFxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IHJzXG5cdCAqL1xuXHRleHBvcnRzLmdldEV4cGFyYW1zSW5mb3MgPSBmdW5jdGlvbihleHBhcmFtc19rZXlfbmFtZXMsIG1ldGFfZXhpbmZvKSB7XG5cdCAgdmFyIHJzID0ge307XG5cdCAgdmFyIGtleXMgPSBleHBhcmFtc19rZXlfbmFtZXMgfHwgWyd1aWRhcGx1cycsICdwY19pJywgJ3B1X2knXTtcblx0ICB2YXIgdG1wX2luZm8gPSBnZXRFeFBhcmFtcygpIHx8ICcnO1xuXHQgIHRtcF9pbmZvID0gdG1wX2luZm8ucmVwbGFjZSgvJmFwbHVzJi8sICcmJyk7XG5cdCAgdmFyIHRtcF9hcnIgPSBwYXJhbTJhcnIodG1wX2luZm8pIHx8IFtdO1xuXHQgIFxuXHQgIHZhciBjb25mID0gZnVuY3Rpb24oaykge1xuXHQgICAgcmV0dXJuIHV0aWxBcnJheS5pbmRleG9mKGtleXMsIGspID4gLTE7XG5cdCAgfTsgIFxuXHQgIC8vIOWHuuS6jua1gemHj+eahOiAg+iZke+8jGJlYWNvbui+k+WHuueahGV4cGFyYW1z5Y+q5Y+WICBleHBhcmFtc19rZXlfbmFtZXPvvIjop4HphY3nva7vvInlhoXnmoTlh6DkuKrlrZfmrrVcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHRtcF9hcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciB0bXBfb2JqID0gdG1wX2FycltpXTtcblx0ICAgIHZhciBrID0gdG1wX29ialswXSB8fCAnJztcblx0ICAgIHZhciB2ID0gdG1wX29ialsxXSB8fCAnJztcblx0ICAgIGlmIChrICYmIHYgJiYgKG1ldGFfZXhpbmZvID09PSAnRVhQQVJBTVMnIHx8IGNvbmYoaykpKSB7XG5cdCAgICAgIHJzW2tdID0gdjtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDEwMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhwYXJhbXMpIHtcblx0ICB2YXIgcnMgPSB7fTtcblx0ICB0cnkge1xuXHQgICAgLy8gdmFyIGV4cGFyYW1zID0gdXRpbEV4aW5mby5nZXRFeFBhcmFtcygpO1xuXHQgICAgLy8gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEuZXhwYXJhbXMgPSBleHBhcmFtcztcblx0ICAgIHZhciB0bXBPYmogPSBmb3JtYXQucGFyYW0yb2JqKGV4cGFyYW1zLnJlcGxhY2UoLyZhbXA7L2csICcmJykucmVwbGFjZSgvXFxidXNlcihpfEkpZD0vLCAndWlkYXBsdXM9JykucmVwbGFjZSgvJmFwbHVzJi8sICcmJykpO1xuXHQgICAgLy8g5LuF5Y+WIFsndWlkYXBsdXMnLCAncGNfaScsICdwdV9pJ10g5LiJ5Liq5YC8XG5cdCAgICBpZiAodG1wT2JqLnVpZGFwbHVzKSB7XG5cdCAgICAgIHJzLnVpZGFwbHVzID0gdG1wT2JqLnVpZGFwbHVzO1xuXHQgICAgfVxuXHQgICAgcnMucGNfaSA9IHRtcE9iai5wY19pO1xuXHQgICAgcnMucHVfaSA9IHRtcE9iai5wdV9pO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coZSk7XG5cdCAgfVxuXHQgIHJldHVybiBycztcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX2IvY29uZmlnL3BsdWdpbnMvd2hhdF9zZW5kcHZfdG9fdXQyLmpzXG5cdCAqXG5cdCAqICDkvZznlKjvvJrlpoLmnpzlvZPliY3njq/looPmu6HotrN0b1VU5p2h5Lu277yM5YiZ5bCG5pS26ZuG5Y+R6YCB6IezVVTnmoTlj4LmlbDvvIxcblx0ICogICAgICAg5bm25bCG5pS26ZuG5Yiw55qE5Y+C5pWw5a2Y5pS+5Yiw5LiK5LiL5paH546v5aKD5LitOiBjb250ZXh0LndoZXJlX3RvX3NlbmRwdi5wdmRhdGFUb1VUXG5cdCAqICBkZXBzOiAgd2hlcmVfdG9fc2VuZHB2XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpOyBcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBjb29raWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KTtcblx0dmFyIHV0aWxVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qKlxuXHQgKiDmuIXnkIbmiZPngrnlj4LmlbBcblx0ICog5bCG5omA5pyJ5YC85Li656m655qE5Y+C5pWw5Y675o6J77yIYXBsdXPpmaTlpJbvvInvvJtcblx0ICog5aaC5p6c5pyJ6YeN5aSN55qE5Y+C5pWw77yM5Y+q5L+d55WZ5pyA5ZCO5LiA5LiqXG5cdCAqIEBwYXJhbSBkYXRhIHtBcnJheX1cblx0ICovXG5cdGZ1bmN0aW9uIGNsZWFuUGFyYW1zKGRhdGEpIHtcblx0ICB2YXIgbmV3X3BhcmFtcyA9IFtdO1xuXHQgIHZhciBpO1xuXHQgIHZhciBpdGVtO1xuXHQgIHZhciBrZXlzID0ge307XG5cdCAgdmFyIGs7XG5cdCAgdmFyIHY7XG5cdFxuXHQgIGZvciAoaSA9IGRhdGEubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgIGl0ZW0gPSBkYXRhW2ldO1xuXHQgICAgayA9IGl0ZW1bMF07XG5cdCAgICBpZiAoayAmJiBrLmluZGV4T2YodXRpbC5zX3BsYWluX29iaikgPT0gLTEgJiYga2V5cy5oYXNPd25Qcm9wZXJ0eShrKSkgY29udGludWU7XG5cdCAgICB2ID0gaXRlbVsxXTtcblx0ICAgIGlmIChrID09ICdhcGx1cycgfHwgdikge1xuXHQgICAgICBuZXdfcGFyYW1zLnVuc2hpZnQoW2ssIHZdKTtcblx0ICAgICAga2V5c1trXSA9IDE7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3X3BhcmFtcztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDmuIXnkIZ0b1VU5omT54K55Y+C5pWw77yM5Y676Zmk77yaXG5cdCAqIGxvZ3R5cGVcblx0ICogY2FjaGVcblx0ICogc2NyXG5cdCAqIDo6LXBsYWluLXh4eFxuXHQgKiBzcG0tY250XG5cdCAqIEBwYXJhbSBkYXRhXG5cdCAqL1xuXHRmdW5jdGlvbiBjbGVhblBhcmFtc0ZvclRvVVQoZGF0YSkge1xuXHQgIHZhciBuZXdfcGFyYW1zID0gW10sXG5cdCAgICBpLFxuXHQgICAgaXRlbSxcblx0ICAgIGssIHYsXG5cdCAgICBleGNsdWRlUGFybXMgPSB7XG5cdCAgICAgIFwibG9ndHlwZVwiOiB0cnVlLFxuXHQgICAgICBcImNhY2hlXCI6IHRydWUsXG5cdCAgICAgIFwic2NyXCI6IHRydWUsXG5cdCAgICAgIFwic3BtLWNudFwiOiB0cnVlXG5cdCAgICB9O1xuXHRcblx0ICBmb3IgKGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBpdGVtID0gZGF0YVtpXTtcblx0ICAgIGsgPSBpdGVtWzBdO1xuXHQgICAgdiA9IGl0ZW1bMV07XG5cdCAgICBpZiAoKHV0aWxEYXNoLmlzU3RhcnRXaXRoKGssIHV0aWwuc19wbGFpbl9vYmopICYmICF1dGlsRGFzaC5pc1N0YXJ0V2l0aChrLCB1dGlsLm1rUGxhaW5LZXlGb3JFeHBhcmFtcygpKSkgfHwgZXhjbHVkZVBhcm1zW2tdKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHQgICAgLy8gMjAxNi0wOC0yNCDnkKzlrZDpnIDmsYLvvIxleHBhcmFtc+WNleeLrOWkhOeQhu+8jHdpbmR2YW5l6YeM6ZyA6KaBIEDosIvlo6tcblx0ICAgIGlmICh1dGlsRGFzaC5pc1N0YXJ0V2l0aChrLCB1dGlsLm1rUGxhaW5LZXlGb3JFeHBhcmFtcygpKSkge1xuXHQgICAgICB2YXIgZXhwYXJhbXNBcnIgPSB1dGlsLnBhcmFtMmFycih2KTtcblx0ICAgICAgaWYgKHR5cGVvZiBleHBhcmFtc0FyciA9PT0gJ29iamVjdCcgJiYgZXhwYXJhbXNBcnIubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGZvciAodmFyIGogPSBleHBhcmFtc0Fyci5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuXHQgICAgICAgICAgdmFyIGVJdGVtID0gZXhwYXJhbXNBcnJbal07XG5cdCAgICAgICAgICAvLyDnqbrlgLzkuI3pnIDopoFcblx0ICAgICAgICAgIGlmIChlSXRlbSAmJiBlSXRlbVsxXSkge1xuXHQgICAgICAgICAgICBuZXdfcGFyYW1zLnVuc2hpZnQoW2VJdGVtWzBdLCBlSXRlbVsxXV0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIG5ld19wYXJhbXMudW5zaGlmdChbaywgdl0pO1xuXHQgIH1cblx0ICByZXR1cm4gbmV3X3BhcmFtcztcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8vIC8vIOWIneWni+WMluaooeWdl1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICAvLyDlhbPplK7or43kuI3lhYHorrjlupTnlKjmlrnopobnm5Zcblx0ICAgIGtleUlzQXZhaWxhYmxlOiBmdW5jdGlvbihrKSB7XG5cdCAgICAgIHZhciBibGFja3MgPSBbJ2Z1bmN0eXBlJywgJ2Z1bmNJZCcsICdzcG0tY250JywgJ3NwbS11cmwnLCAnc3BtLXByZScsICdfaXNoNScsICdfaXNfZzJ1JywgJ19oNXVybCcsICdjbmEnLCAnaXNvbmVwYWdlJywgJ2x2ZXInLCAnanN2ZXInXTtcblx0ICAgICAgaWYodXRpbEFycmF5LmluZGV4b2YoYmxhY2tzLCBrKSA9PT0gLTEpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIOW3sue7j+WSjFVU57qm5a6a5aW977yM5Lyg6YCS57uZVVTnmoTkuoznuqflj4LmlbDlj6rmlK/mjIHln7rmnKzmlbDmja7nsbvlnovvvIzkuI3mlK/mjIHlr7nosaFcblx0ICAgIHZhbElzQXZhaWxhYmxlOiBmdW5jdGlvbih2KSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9LFxuXHRcblx0ICAgIHVwVXREYXRhOiBmdW5jdGlvbihkLCBvYmopIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgZCA9IGQgPyBkIDoge307XG5cdCAgICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBmb3IgKHZhciBrIGluIG9iaikge1xuXHQgICAgICAgICAgdmFyIHYgPSBvYmpba107XG5cdCAgICAgICAgICBpZihrICYmIF9zZWxmLnZhbElzQXZhaWxhYmxlKHYpICYmIF9zZWxmLmtleUlzQXZhaWxhYmxlKGspKSB7XG5cdCAgICAgICAgICAgIGRba10gPSB2OyAvLyDoh6rlrprkuYnlj4LmlbDnu5/nu5/pnIDopoHliqBcIl9cIuWJjee8gFxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0VG9VdERhdGE6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuXHQgICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGNvbnRleHQud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB2YXIgbG9nZGF0YSA9IHdoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgc2RrX2luZm8gPSBsb2dkYXRhLnNka19pbmZvIHx8IHt9O1xuXHQgICAgICB2YXIgZXRhZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcgfHwge307XG5cdFxuXHQgICAgICB2YXIgZXhwYXJhbXMgPSBjbGVhblBhcmFtc0ZvclRvVVQoY2xlYW5QYXJhbXMobG9nZGF0YS5leHBhcmFtcyB8fCBbXSkpO1xuXHQgICAgICBleHBhcmFtcyA9IHV0aWwuYXJyMm9iaihleHBhcmFtcyk7XG5cdCAgICAgIC8vIHZhciB1c2VyZGF0YSA9IGNsZWFuUGFyYW1zRm9yVG9VVChjbGVhblBhcmFtcyhjb250ZXh0LnVzZXJkYXRhIHx8IFtdKSk7XG5cdCAgICAgIC8vIHVzZXJkYXRhID0gdXRpbC5hcnIyb2JqKHVzZXJkYXRhKTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YTtcblx0ICAgICAgdmFyIHBhZ2V1cmwgPSBsb2NhdGlvbi5ocmVmO1xuXHRcblx0ICAgICAgdmFyIGQgPSB7XG5cdCAgICAgIH07XG5cdCAgICAgIC8vIC0tLS0yMDE3MDMyNyBhcGx1c+aWsOWinumcgOaxgiBA5Lmd6ZShKDAyNzcxNylcblx0ICAgICAgLy8gMS7CoGFwbHVz5aKe5YqgIHNjbeOAgSBpc3NiPTEo5aaC5p6cdXJs5ZCO6Z2i5pyJcG9pbnTlj4LmlbDvvInjgIEgcGcxc3RlcGsg5LiJ5Liq5Y+C5pWw77yM6L+Z5LiJ5Liq5Y+C5pWw6YO95raJ5Y+KVVJM5Y+C5pWw6Kej5p6QXG5cdCAgICAgIHZhciBzY20gPSB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgnc2NtJywgcGFnZXVybCkgfHwgJyc7XG5cdCAgICAgIGlmIChzY20pIHtcblx0ICAgICAgICBkWydzY20nXSA9IHNjbTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcGcxc3RlcGsgPSB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgncGcxc3RlcGsnLCBwYWdldXJsKSB8fCAnJztcblx0ICAgICAgaWYgKHBnMXN0ZXBrKSB7XG5cdCAgICAgICAgZFsncGcxc3RlcGsnXSA9IHBnMXN0ZXBrO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBwb2ludCA9IHV0aWxVcmwuZ2V0UGFyYW1Gcm9tVXJsKCdwb2ludCcsIHBhZ2V1cmwpIHx8ICcnO1xuXHQgICAgICBpZiAocG9pbnQpIHtcblx0ICAgICAgICBkWydpc3NiJ10gPSAxO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChzZGtfaW5mbyAmJiBzZGtfaW5mby5tYW5zbmRsb2cpIHtcblx0ICAgICAgICBkLm1hbnNuZGxvZyA9IHNka19pbmZvLm1hbnNuZGxvZztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZCA9IHRoaXMudXBVdERhdGEoZCwgZXhwYXJhbXMpOyAgLy8gYmVhY29u5Z+L54K555qE5bqU55So5Y+C5pWwXG5cdCAgICAgIGQgPSB0aGlzLnVwVXREYXRhKGQsIGxvZ2RhdGEuZ29rZXkpO1xuXHQgICAgICBkID0gdGhpcy51cFV0RGF0YShkLCB1c2VyZGF0YSk7ICAvLyDlupTnlKjmlrnpgJrov4dzZW5kUFbmjqXlj6PkvKDpgJLnmoRwduWPguaVsFxuXHRcblx0ICAgICAgLy8g5Y+C5pWw57G75Z6L5LiA77ya6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIhmdW5jdHlwZe+8jGZ1bmNJZO+8jHVybO+8jGxvZ2tlee+8iVxuXHQgICAgICBkLmZ1bmN0eXBlID0gJ3BhZ2UnO1xuXHQgICAgICBkLmZ1bmNJZCA9ICcyMDAxJztcblx0ICAgICAgaWYgKGFwbHVzICYmIGFwbHVzLmdsb2JhbENvbmZpZyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICBkLnVybCA9IChsb2NhdGlvbi5wcm90b2NvbCB8fCAnaHR0cHM6JykgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lOyAvLyBsb2NhdGlvbi5vcmlnaW4gKyBsb2NhdGlvbi5wYXRobmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBkLnVybCA9IGxvY2F0aW9uLmhyZWY7XG5cdCAgICAgIH1cblx0ICAgICAgaWYoY29uZmlnLnBhZ2VOYW1lKXtcblx0ICAgICAgICBkLnVybCA9IGNvbmZpZy5wYWdlTmFtZTtcblx0ICAgICAgfVxuXHQgICAgICAvLyDlj4LmlbDnsbvlnovkuozvvJrkuI3pnIDopoFVVOeJueauiuWkhOeQhueahO+8iOWFtuS7lmFwbHVz6Ieq5a6a5LmJa2V5XFx2YWx1Ze+8iWtleemcgOimgeS4i+WIkue6v+W8gOWktFxuXHQgICAgICBkLl9pc2g1ID0gJzEnOyAgICAvLyBVVOW/hemhu+eahOWxnuaAp++8jOWGmeatu+WNs+WPr1xuXHQgICAgICBkLl9oNXVybCA9IHBhZ2V1cmw7XG5cdCAgICAgIGQuX3RvVVQgPSAyO1xuXHQgICAgICBkLl9icmlkZ2VOYW1lID0gJ1dpbmRWYW5lJztcblx0ICAgICAgZC5fYnJpZGdlVmVyc2lvbiA9ICczLjAuNyc7XG5cdFxuXHQgICAgICAvLyDlj4LmlbDnsbvlnovkuInvvJrkuI3pnIDopoFVVOeJueauiuWkhOeQhu+8jOS4lGtleeaXoOS4i+WIkue6v+WJjee8gFxuXHQgICAgICBpZiAoc3BtLnNwbV9jbnQpIGRbYXBsdXNTdGF0aWMuU1BNX0NOVF0gPSBzcG0uc3BtX2NudCB8fCAnJztcblx0ICAgICAgaWYgKHNwbS5zcG1fdXJsKSBkW2FwbHVzU3RhdGljLlNQTV9VUkxdID0gc3BtLnNwbV91cmwgfHwgJyc7XG5cdCAgICAgIGlmIChzcG0uc3BtX3ByZSkgZFthcGx1c1N0YXRpYy5TUE1fUFJFXSA9IHNwbS5zcG1fcHJlIHx8ICcnO1xuXHRcblx0ICAgICAgZC5jbmEgPSBldGFnLmNuYSB8fCBjb29raWUuZ2V0Q29va2llQ25hKCdjbmEnKTtcblx0ICAgICAgZC5sdmVyID0gc2RrX2luZm8ubHZlcjtcblx0ICAgICAgZC5qc3ZlciA9IHNka19pbmZvLmpzdmVyO1xuXHQgICAgICBkLnB2ZXIgPSAnMS4wLjAnO1xuXHQgICAgICBkLmlzb25lcGFnZSA9IC0xO1xuXHQgICAgICB2YXIgdXRwYXJhbUNudCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy11dHBhcmFtJyk7XG5cdCAgICAgIGlmICh1dHBhcmFtQ250KSB7XG5cdCAgICAgICAgZFsndXRwYXJhbS1jbnQnXSA9IEpTT04uc3RyaW5naWZ5KHV0cGFyYW1DbnQpO1xuXHQgICAgICB9XG5cdCAgICAgIGQuX2lzX2cydV8gPSAxO1xuXHQgICAgICBkLl9zbG9nID0gMTtcblx0ICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcHblj5HpgIHliLDlk6rph4zljrtcblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjLndoYXRfdG9fc2VuZCB8fCB7fTtcblx0ICAgICAgd2hhdF90b19zZW5kLnB2ZGF0YVRvVXQgPSB0aGlzLmdldFRvVXREYXRhKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZCA9IHdoYXRfdG9fc2VuZDtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfSxcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogd2hhdF90b19zZW5kcHZfdW0ybmF0aXZlLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICog5L2c55So77yaIOahpeaOpeWGheW1jOaDheWGteS4i++8jHVt5pel5b+X5Y2P6K6u5Y+R6YCBUFbml6Xlv5fnu5luYXRpdmVcblx0ICogXG5cdCAqIGRlcHM6IOaXoFxuXHQgKiBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICogXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0Ly8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cdHZhciB1dGlsUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oODEpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgZ2V0VG9OYXRpdmVEYXRhOiBmdW5jdGlvbigpIHtcblx0ICAgICAgLy8gdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgLy8gdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcblx0ICAgICAgLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSB1dGlsRGFzaC5jbG9uZURlZXAoY29udGV4dC51c2VyZGF0YSkgfHwge307XG5cdCAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjb250ZXh0LndoYXRfdG9fc2VuZCB8fCB7fTtcblx0ICAgICAgdmFyIGxvZ2RhdGEgPSB3aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcblx0ICAgICAgdmFyIHNka19pbmZvID0gbG9nZGF0YS5zZGtfaW5mbyB8fCB7fTtcblx0ICAgICAgdmFyIGV0YWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5ldGFnIHx8IHt9O1xuXHRcblx0ICAgICAgdmFyIHJlc3VsdCA9IHt9ICxzZGtBcmdzID0ge30sIGN1c3RvbUFyZ3MgPSB7fTtcblx0ICAgICAgc2RrQXJncy5jbmEgPSBldGFnLmNuYTtcblx0ICAgICAgc2RrQXJncy5sdmVyID0gc2RrX2luZm8ubHZlcjtcblx0ICAgICAgc2RrQXJncy5qc3ZlciA9IHNka19pbmZvLmpzdmVyO1xuXHQgICAgICBzZGtBcmdzLmlkID0gYXBsdXNTdGF0aWMuUEFHRV9TVEFSVDtcblx0ICAgICAgc2RrQXJncy50cyA9IERhdGUubm93KCk7IC8v5ZKM6KO4d2Vi5L6n5Lya5pyJ5beu5byCXG5cdCAgICAgIHNka0FyZ3MuciA9IGxvZ2RhdGEuYXJnMSB8fCBsb2dkYXRhLmxvZ2tleSB8fCAnLSc7XG5cdCAgICAgIHNka0FyZ3MuaXNfaDUgPSAnMSc7XG5cdFxuXHQgICAgICBpZiAodXNlcmRhdGEuaGFzT3duUHJvcGVydHkoJ2F1dG9zZW5kJykgfHwgbG9nZGF0YS5pc19hdXRvIHx8IGxvZ2RhdGEudHJhY2tfdHlwZSA9PT0gJzEnKSB7XG5cdCAgICAgICAgc2RrQXJncy5pc19hdXRvID0gMTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAwO1xuXHQgICAgICB9XG5cdCAgICAgIHNka0FyZ3MudHJhY2tfdHlwZSA9IHNka0FyZ3MuaXNfYXV0byArICcnO1xuXHQgICAgICBcblx0ICAgICAgY3VzdG9tQXJncyA9IHV0aWxEYXNoLmNsb25lRGVlcCh1dGlscy5kZWxldGVJbmZvKHVzZXJkYXRhLCBbXG5cdCAgICAgICAgJ19hbm9ueV9pZCcsICdfZGV2X2lkJywgJ19zZXNzaW9uX2lkJywgJ19zcmNfcG9zX2lkJyxcblx0ICAgICAgICAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaycsICdfYWJmcGMnLCAnY25hJ1xuXHQgICAgICBdKSk7XG5cdFxuXHQgICAgICBpZiAoY3VzdG9tQXJncy5kdXJhdGlvbikge1xuXHQgICAgICAgIHNka0FyZ3MuZHVyYXRpb24gPSBjdXN0b21BcmdzLmR1cmF0aW9uO1xuXHQgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLmR1cmF0aW9uO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoY3VzdG9tQXJncy5wYWdlX3N0YXJ0KSB7XG5cdCAgICAgICAgc2RrQXJncy5wYWdlX3N0YXJ0ID0gY3VzdG9tQXJncy5wYWdlX3N0YXJ0O1xuXHQgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnBhZ2Vfc3RhcnQ7XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmIChsb2dkYXRhLnVybCkge1xuXHQgICAgICAgIHNka0FyZ3MucGFnZV9uYW1lID0gdXRpbFBhZ2UuZ2V0UGFnZU5hbWUobG9jYXRpb24ucGF0aG5hbWUsIGN1c3RvbUFyZ3MpOyBcblx0ICAgICAgICAvLyBhcGx1cy5nZXRQYWdlTmFtZSgpIHx8IGN1c3RvbUFyZ3Muc3BtQiB8fCBjdXN0b21BcmdzLnBhZ2VfbmFtZSB8fCBsb2dkYXRhLnVybCB8fCAnLSc7XG5cdCAgICAgICAgc2RrQXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG5cdCAgICAgICAgc2RrQXJnc1snc3BtLWNudCddID0gZW5jb2RlVVJJQ29tcG9uZW50KHNka0FyZ3MucGFnZV9uYW1lKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGxvZ2RhdGEucHJlKSB7XG5cdCAgICAgICAgc2RrQXJncy5yZWZfdXJsID0gbG9nZGF0YS5wcmUgfHwgJy0nO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBpZiAoY3VzdG9tQXJncy5wYWdlX25hbWUpIHtcblx0ICAgICAgLy8gICBkZWxldGUgY3VzdG9tQXJncy5wYWdlX25hbWU7XG5cdCAgICAgIC8vIH1cblx0ICAgICAgaWYgKGN1c3RvbUFyZ3MudHMpIHtcblx0ICAgICAgICAvLyDliKDpmaRuYXRpdmXkv53nlZnlrZfmrrV0c1xuXHQgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnRzO1xuXHQgICAgICB9XG5cdCAgICAgIHJlc3VsdC5zZGtBcmdzID0gdXRpbERhc2guY2xvbmVEZWVwKHNka0FyZ3MpO1xuXHQgICAgICByZXN1bHQuY3VzcCA9IGN1c3RvbUFyZ3M7XG5cdCAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjLndoYXRfdG9fc2VuZCB8fCB7fTtcblx0ICAgICAgd2hhdF90b19zZW5kLnB2ZGF0YVRvVW1OYXRpdmUgPSB0aGlzLmdldFRvTmF0aXZlRGF0YSgpO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQgPSB3aGF0X3RvX3NlbmQ7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDEwNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9jYW5fdG9fc2VuZHB2LmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muWIpOaWrXB26IO95ZCm5Y+R6YCB77yM5LiN5Y+v5Lul5Y+R6YCB5YiZ5Lya5Lit5pat5ZCO57ut5omA5pyJ5Lit6Ze05Lu25omn6KGMXG5cdCAqIGRlcHM6IOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsRXZlbnRMaW1pdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA3KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIC8vIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBjYW5fdG9fc2VuZHB2ID0gdGhpcy5vcHRpb25zLmNvbnRleHQuY2FuX3RvX3NlbmRwdiB8fCB7fTtcblx0ICAgICAgdmFyIGNvdW50ID0gXyQuc2VuZF9wdl9jb3VudCB8fCAwO1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgaWYgKChjb25maWcuaXNfYXV0byAmJiBjb3VudCA+IDApIHx8ICF1dGlsRXZlbnRMaW1pdC5jYW5TZW5kUFYoY29uZmlnLnRyYWNrX3R5cGUpKSB7XG5cdCAgICAgICAgcmV0dXJuICdkb25lJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjYW5fdG9fc2VuZHB2LmZsYWcgPSAnWUVTJztcblx0ICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5jYW5fdG9fc2VuZHB2ID0gY2FuX3RvX3NlbmRwdjtcblx0ICAgICAgICBfJC5zZW5kX3B2X2NvdW50ID0gKytjb3VudDtcblx0ICAgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDEwNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHV0aWxFdmVudExpbWl0LmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbFJlbW90ZUNmZyA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpO1xuXHR2YXIgdXRpbExvY2FsQ2ZnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHR2YXIgYXBsdXNVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHRcblx0ZnVuY3Rpb24gbmVlZExpbWl0U2VuZChsb2drZXkpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIGV2ZW50TGltaXRSYXRlcyA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0VWRU5UX0xJTUlUUkFURVMpO1xuXHQgIGlmIChldmVudExpbWl0UmF0ZXMgJiYgZXZlbnRMaW1pdFJhdGVzLmxlbmd0aCA+IDApIHtcblx0ICAgIHZhciBldmVudCA9IHV0aWxBcnJheS5maW5kKGV2ZW50TGltaXRSYXRlcywgZnVuY3Rpb24oaXRlbSkge1xuXHQgICAgICByZXR1cm4gaXRlbS5ldmVudElkID09PSBsb2drZXk7XG5cdCAgICB9KTtcblx0ICAgIFxuXHQgICAgaWYgKGV2ZW50KSB7XG5cdCAgICAgIHZhciByYW5kb20gPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoxMDAwKTtcblx0ICAgICAgaWYgKHJhbmRvbSA8IChldmVudC5zYW1wbGluZ1JhdGUgKiAxMDAwKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGlzVU0oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcblx0ICByZXR1cm4gISFpc1VNO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jYW5Ub1NlbmRISkxKID0gZnVuY3Rpb24oZ29rZXksIGxvZ2tleSkge1xuXHQgIHZhciBkZXZpY2VTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldERldmljZVN0YXR1cygpO1xuXHQgIGlmICghZGV2aWNlU3RhdHVzKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgIGlmICh1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGN0eCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX1NUQVJUIHx8IGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX0VORDtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaChlKSB7fVxuXHQgIH1cblx0XG5cdCAgLy8g5aaC5p6c5YWo5Z+L54K55YWz6ZetIOaIluiAhSDlhajln4vngrnkuovku7blhbPpl63ph4fpm4bvvIzkuI3lj5HpgIHkuovku7Zcblx0ICB2YXIgcmVtb3RlQXV0b3RyYWNrU3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXRBdXRvVHJhY2tTdGF0dXMoKTtcblx0ICB2YXIgYXV0b2V2ZW50U3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXRBdXRvRXZlbnRTdGF0dXMoKTtcblx0ICAvLyBA5paH5b+DIFxuXHQgIHZhciBsb2NhbEF1dG90cmFja0VuYWJsZWQgPSB1dGlsTG9jYWxDZmcuZ2V0QXV0b1RyYWNrU3RhdHVzKCk7XG5cdFxuXHQgIHZhciBwYXJhbXMgPSB7fTtcblx0ICBpZiAodHlwZW9mIGdva2V5ID09PSAnc3RyaW5nJykge1xuXHQgICAgcGFyYW1zID0gYXBsdXNVdGlscy5hcnIyb2JqKGFwbHVzVXRpbHMucGFyYW0yYXJyKGdva2V5KSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBhcmFtcyA9IGdva2V5O1xuXHQgIH1cblx0XG5cdCAgaWYgKHBhcmFtcy5hdXRvX2VsZW1lbnQpIHtcblx0ICAgIGlmIChhdXRvZXZlbnRTdGF0dXMgPT09IDIgfHwgcmVtb3RlQXV0b3RyYWNrU3RhdHVzID09PSAyKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH0gZWxzZSBpZiAoIXJlbW90ZUF1dG90cmFja1N0YXR1cyAmJiAhbG9jYWxBdXRvdHJhY2tFbmFibGVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICghbmVlZExpbWl0U2VuZChsb2drZXkpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfSAgXG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHRcblx0ZXhwb3J0cy5jYW5TZW5kUFYgPSBmdW5jdGlvbih0cmFja190eXBlKSB7XG5cdCAgaWYgKCFpc1VNKCkpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH0gXG5cdCAgLy/orr7lpIflvIDlhbMgXG5cdCAgdmFyIGRldmljZVN0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0RGV2aWNlU3RhdHVzKCk7XG5cdCAgLy8g6L+c56iL5YWo5Z+L54K5IOiHquWKqHB2IOW8gOWFs1xuXHQgIHZhciBhdXRvcHZTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldEF1dG9QYWdlU3RhdHVzKCk7XG5cdCAgLy8g5pys5Zyw5YWo5Z+L54K56YWN572uIOiHquWKqHB2IOW8gOWFs1xuXHQgIHZhciBsb2NhbEF1dG9QdkRpc2FibGVkID0gdXRpbExvY2FsQ2ZnLmxvY2FsQXV0b1BWRGlzYWJsZWQoKTtcblx0ICBcblx0ICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblx0ICBpZiAoIWRldmljZVN0YXR1cykge1xuXHQgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgfSBlbHNlIGlmICh0cmFja190eXBlID09PSAnMScpe1xuXHQgICAgcmV0dXJuICEoYXV0b3B2U3RhdHVzID09PSAyIHx8ICghYXV0b3B2U3RhdHVzICYmIGxvY2FsQXV0b1B2RGlzYWJsZWQpKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsTG9jYWxDb25maWcuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHQvKipcblx0ICog5YWo5Z+L54K55pys5Zyw6YWN572uIOivu+WPllxuXHQgKiDlj5blgLwg5Y+q5pyJIHRydWUgb3IgZmFsc2Vcblx0Ki9cblx0XG5cdGV4cG9ydHMubG9jYWxBdXRvRXZlbnREaXNhYmxlZCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHJldHVybiAhIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UKTsgXG5cdH07XG5cdFxuXHRcblx0ZXhwb3J0cy5sb2NhbEF1dG9QVkRpc2FibGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgcmV0dXJuICEhYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPUFYpIHx8ICEhKGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy13YWl0aW5nJykgPT09ICdNQU4nKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0QXV0b1RyYWNrU3RhdHVzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgcmV0dXJuICEhYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfQVVUT1RSQUNLX0VOQUJMRUQpO1xuXHR9O1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDEwOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L2FmdGVyX3B2LmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8mnB25Y+R6YCB5a6M5q+V77yM5YiG5Y+R5LiA5Liq5a6M5oiQ5LqL5Lu2XG5cdCAqIGRlcHM6IOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvLyAvLyDliJ3lp4vljJbmqKHlnZdcblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIC8vIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICB2YXIgXyQgPSBhcGx1cy5fJCB8fCB7fTtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgncHZfY29udGV4dCcsIGMpO1xuXHQgICAgICAvLyBwduWPkemAgeWujOavle+8jOWIhuWPkeS4gOS4quWujOaIkOS6i+S7tlxuXHQgICAgICB2YXIgc3BtX2FiID0gYXBsdXMuc3BtX2FiIHx8IFtdO1xuXHQgICAgICB2YXIgX3NwbWFiID0gc3BtX2FiLmpvaW4oJy4nKTtcblx0ICAgICAgdmFyIF9jb3VudCA9IF8kLnNlbmRfcHZfY291bnQ7XG5cdFxuXHQgICAgICB2YXIgcHViT2JqID0ge1xuXHQgICAgICAgIGNuYTogYy5ldGFnID8gYy5ldGFnLmNuYSA6ICcnLFxuXHQgICAgICAgIGNvdW50OiBfY291bnQsXG5cdCAgICAgICAgc3BtYWJfcHJlOiBhcGx1cy5zcG1hYl9wcmVcblx0ICAgICAgfTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhbJ3NlbmRQVicsICdjb21wbGV0ZScsIF9zcG1hYiwgcHViT2JqXSk7XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMoWydzZW5kUFYnLCAnY29tcGxldGUnLCBfc3BtYWIsIHB1Yk9ial0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanNcblx0ICpcblx0ICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG5cdCAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBsb2dkYXRh5ZCO6Z2i77yabG9nZGF0YS5jb25jYXQodXNlcmRhdGEpXG5cdCAqICBkZXBzOiB3aGF0X3RvX2hqbGpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8vIC8qKlxuXHQgICAgLy8gICog5Yid5aeL5YyW5qih5Z2XXG5cdCAgICAvLyAgKi9cblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAvLyAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgICAvLyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG5cdCAgICAgKlxuXHQgICAgICogcmVjb3JkKGxvZ2tleSwgZ21rZXksIGdva2V5KSBBUEnkuK3nmoRnb2tleVxuXHQgICAgICogbWV0YTphcGx1cy1leGluZm/kv6Hmga8sIG1ldGE6YXBsdXMtZXhkYXRh5L+h5oGvXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybiB7T2JqZWN0fSB7Li4ufVxuXHQgICAgICovXG5cdCAgICBnZXRVc2VyRGF0YTogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcblx0ICAgICAgdmFyIGdva2V5ID0gYy53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleTtcblx0XG5cdCAgICAgIGdva2V5ID0gdXRpbERhc2guYXNzaWduKGdva2V5LCBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsZGF0YScpKTtcblx0ICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24oZ29rZXksIGZvcm1hdC5wYXJhbTJvYmoodXNlcmRhdGEuZ29rZXkpKTtcblx0ICAgICAgdmFyIGFwbHVzRXhpbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4aW5mbycpO1xuXHQgICAgICBpZiAoYXBsdXNFeGluZm8pIHtcblx0ICAgICAgICBnb2tleSA9IHV0aWxEYXNoLmFzc2lnbihnb2tleSwgZm9ybWF0LnBhcmFtMm9iaihhcGx1c0V4aW5mbykpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgZXhkYXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScpO1xuXHQgICAgICBpZiAoaXNBcnJheShleGRhdGEpKSB7XG5cdCAgICAgICAgZXhkYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG5cdCAgICAgICAgICBnb2tleSA9IHV0aWxEYXNoLmFzc2lnbihnb2tleSwgaXRlbSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24oZ29rZXksIGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1leGRhdGEnKSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGdva2V5O1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleSA9IHRoaXMuZ2V0VXNlckRhdGEoKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanNcblx0ICpcblx0ICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG5cdCAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBsb2dkYXRh5ZCO6Z2i77yabG9nZGF0YS5jb25jYXQodXNlcmRhdGEpXG5cdCAqICBkZXBzOiB3aGF0X3RvX2hqbGpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEV4aW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAyKTtcblx0dmFyIGdldEV4UGFyYW1zT2JqID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDMpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8vIGdldENvb2tpZVVzZXJJbmZvOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAvLyAgIHZhciBkID0ge307XG5cdCAgICAvLyAgIC8vIOaXpeW/l+aUtumbhuW3peWPt1xuXHQgICAgLy8gICB2YXIgd24gPSBjb29raWUuZ2V0Q29va2llKCd3b3Jrbm8nKSB8fCBjb29raWUuZ2V0Q29va2llKCdlbXBsSWQnKTtcblx0ICAgIC8vICAgaWYgKHduKSB7XG5cdCAgICAvLyAgICAgZC53b3Jrbm8gPSB3bjtcblx0ICAgIC8vICAgfVxuXHQgICAgLy8gICB2YXIgaG5nID0gY29va2llLmdldEhuZygpO1xuXHQgICAgLy8gICBpZiAoaG5nKSB7XG5cdCAgICAvLyAgICAgZC5faG5nID0gY29va2llLmdldEhuZygpO1xuXHQgICAgLy8gICB9XG5cdCAgICAvLyAgIHJldHVybiBkO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBnZXRFeFBhcmFtc0luZm86IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGUgPSB1dGlsRXhpbmZvLmdldEV4UGFyYW1zKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmV4cGFyYW1zID0gZTtcblx0ICAgICAgcmV0dXJuIGdldEV4UGFyYW1zT2JqKGUpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgZ29rZXkgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleTtcblx0ICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24odGhpcy5nZXRFeFBhcmFtc0luZm8oKSwgZ29rZXkpO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleSA9IGdva2V5O1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDExMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfYi9jb25maWcvcGx1Z2lucy93aGF0X3RvX2hqbGpfdXQyLmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeiHs1VU5Y+C5pWw5pS26ZuG77yaXG5cdCAqXG5cdCAqIGRlcHM6IOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIOiOt+WPllVU5pel5b+X6ZyA6KaB55qE5Y+C5pWwXG5cdCAgICAgKiDlj4LmlbDnsbvlnovkuIDvvJrpnIDopoFVVOeJueauiuWkhOeQhueahO+8iGZ1bmN0eXBl77yMZnVuY0lk77yMdXJs77yMbG9na2V577yJXG5cdCAgICAgKiDlj4LmlbDnsbvlnovkuozvvJrkuI3pnIDopoFVVOeJueauiuWkhOeQhueahO+8iOWFtuS7lmFwbHVz6Ieq5a6a5LmJa2V5XFx2YWx1Ze+8iWtleemcgOimgeS4i+WIkue6v+W8gOWktFxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge09iamVjdH0ge1xuXHQgICAgICogICBmdW5jdHlwZTogXCJjdHJsXCIsXG5cdCAgICAgKiAgIGZ1bmNJZDogXCIyMTAxXCIsXG5cdCAgICAgKiAgIHVybDogXCJodHRwczovL2g1Lm0udGFvYmFvLmNvbS9idXkvcWluZ2Rhbi9saXN0Lmh0bWxcIixcblx0ICAgICAqICAgbG9na2V5OiBcIi9xaW5nZGFuLjIuM1wiLFxuXHQgICAgICpcblx0ICAgICAqICAgX3NwbWNudDogXCJhMzE0NS44MTgzNzM3LjAuMFwiLFxuXHQgICAgICogICBfc3BtdXJsOiBcImEwLmIwLmMwLmQwXCIsXG5cdCAgICAgKiAgIF9oNXVybDogXCIvL2g1Lm0udGFvYmFvLmNvbS9idXkvcWluZ2Rhbi9saXN0Lmh0bWw/c2NtPTIwMTkuMS40LjMxMSZpdGVtSWQ9NTI3MzUxNDYxNDU2LDUyNzAzODU1NTc1NiZzcG09YTIxNDEuMS53aWRnZXQuNCZsb2NhdGU9d2lkZ2V0LTRcIixcblx0ICAgICAqICAgX2NuYTogXCIxMjM0NDQ2NTQ3XCIsXG5cdCAgICAgKiAgIF9vdGhlcnM6IFwic29tZXZhbHVlXCIgLFxuXHQgICAgICogICBfaXNoNTogXCIxXCIgIC8vIFVU5b+F6aG755qE5bGe5oCn77yM5YaZ5q275Y2z5Y+vXG5cdCAgICAgKiAgIF9pc19nMnVfOiBcIjFcIiAvLyDljZXlj5Hml7bpnIDopoFcblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgZ2V0VG9VdERhdGE6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuXHQgICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgZXRhZyA9IGNvbnRleHQuZXRhZyB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGNvbnRleHQud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB2YXIgbG9nZGF0YSA9IHdoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgc2RrX2luZm8gPSBsb2dkYXRhLnNka19pbmZvIHx8IHt9O1xuXHQgICAgICB2YXIgZ29rZXkgPSBsb2dkYXRhLmdva2V5IHx8IHt9O1xuXHRcblx0ICAgICAgdmFyIGdva2V5QXJyID0gW107XG5cdCAgICAgIHZhciBnb2tleVN0ciA9ICcnO1xuXHQgICAgICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG5cdCAgICAgICAgaWYgKFthcGx1c1N0YXRpYy5TUE1fQ05ULCBhcGx1c1N0YXRpYy5TUE1fVVJMLCBhcGx1c1N0YXRpYy5TUE1fUFJFXS5pbmRleE9mKGspID09PSAtMSkge1xuXHQgICAgICAgICAgdmFyIF90bXBWYWx1ZSA9IGdva2V5W2tdO1xuXHQgICAgICAgICAgaWYgKGdva2V5W2tdID09PSAndW5kZWZpbmVkJyB8fCBnb2tleVtrXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgIF90bXBWYWx1ZSA9ICcnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZ29rZXlBcnIucHVzaChrICsgJz0nICsgX3RtcFZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGdva2V5QXJyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBnb2tleVN0ciA9IGdva2V5QXJyLmpvaW4oJyYnKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcGFnZXVybCA9IGxvY2F0aW9uLmhyZWY7XG5cdCAgICAgIHZhciBkID0ge307XG5cdCAgICAgIC8vIOWPguaVsOexu+Wei+S4gO+8mumcgOimgVVU54m55q6K5aSE55CG55qE77yIZnVuY3R5cGXvvIxmdW5jSWTvvIx1cmzvvIxsb2drZXnvvIlcblx0ICAgICAgZC5mdW5jdHlwZSA9ICdjdHJsJztcblx0ICAgICAgZC5mdW5jSWQgPSBsb2dkYXRhLmV2ZW50X2NvZGU7XG5cdCAgICAgIGlmIChhcGx1cyAmJiBhcGx1cy5nbG9iYWxDb25maWcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgICAgICAgZC51cmwgPSAobG9jYXRpb24ucHJvdG9jb2wgfHwgJ2h0dHBzOicpICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyBsb2NhdGlvbi5wYXRobmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBkLnVybCA9IGxvY2F0aW9uLmhyZWY7XG5cdCAgICAgIH1cblx0ICAgICAgaWYoZ29rZXkucGFnZU5hbWUpe1xuXHQgICAgICAgIGQudXJsID0gZ29rZXkucGFnZU5hbWU7XG5cdCAgICAgIH1cblx0ICAgICAgZC5sb2drZXkgPSBsb2dkYXRhLmxvZ2tleTtcblx0ICAgICAgZC5nb2tleSA9IGVuY29kZVVSSUNvbXBvbmVudChnb2tleVN0cik7XG5cdCAgICAgIGQuZ21rZXkgPSBsb2dkYXRhLmdta2V5O1xuXHRcblx0ICAgICAgLy8g5Y+C5pWw57G75Z6L5LqM77ya5LiN6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIjlhbbku5ZhcGx1c+iHquWumuS5iWtleVxcdmFsdWXvvIlrZXnpnIDopoHkuIvliJLnur/lvIDlpLRcblx0ICAgICAgZC5faXNoNSA9ICcxJztcblx0ICAgICAgZC5faDV1cmwgPSBwYWdldXJsO1xuXHQgICAgICBkLl9pc19nMnVfID0gMTtcblx0ICAgICAgZC5fc2xvZyA9IDE7XG5cdCAgICAgIGQuX3RvVVQgPSAyO1xuXHQgICAgICBkLl9icmlkZ2VOYW1lID0gJ1dpbmRWYW5lJztcblx0ICAgICAgZC5fYnJpZGdlVmVyc2lvbiA9ICczLjAuNyc7XG5cdFxuXHQgICAgICAvLyDlj4LmlbDnsbvlnovkuInvvJrkuI3pnIDopoFVVOeJueauiuWkhOeQhu+8jOS4lGtleeaXoOS4i+WIkue6v+WJjee8gFxuXHQgICAgICBpZiAoc3BtLnNwbV9jbnQpIGRbYXBsdXNTdGF0aWMuU1BNX0NOVF0gPSBzcG0uc3BtX2NudCB8fCAnJztcblx0ICAgICAgaWYgKHNwbS5zcG1fdXJsKSBkW2FwbHVzU3RhdGljLlNQTV9VUkxdID0gc3BtLnNwbV91cmwgfHwgJyc7XG5cdCAgICAgIGlmIChzcG0uc3BtX3ByZSkgZFthcGx1c1N0YXRpYy5TUE1fUFJFXSA9IHNwbS5zcG1fcHJlIHx8ICcnO1xuXHRcblx0ICAgICAgZC5jbmEgPSBldGFnLmNuYTtcblx0ICAgICAgZC5sdmVyID0gc2RrX2luZm8ubHZlcjtcblx0ICAgICAgZC5qc3ZlciA9IHNka19pbmZvLmpzdmVyO1xuXHQgICAgICAvLyDlj6/op4bljJbku6Tnrq3moIfor4ZhdXRvc2VuZFxuXHQgICAgICBpZiAodXNlcmRhdGEuaGFzT3duUHJvcGVydHkoJ2F1dG9zZW5kJykpIHtcblx0ICAgICAgICBkLmF1dG9zZW5kID0gdXNlcmRhdGEuYXV0b3NlbmQ7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHV0cGFyYW1DbnQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdXRwYXJhbScpO1xuXHQgICAgICBpZiAodXRwYXJhbUNudCkge1xuXHQgICAgICAgIGRbJ3V0cGFyYW0tY250J10gPSBKU09OLnN0cmluZ2lmeSh1dHBhcmFtQ250KTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjLndoYXRfdG9fc2VuZCB8fCB7fTtcblx0ICAgICAgd2hhdF90b19zZW5kLnB2ZGF0YVRvVXQgPSB0aGlzLmdldFRvVXREYXRhKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZCA9IHdoYXRfdG9fc2VuZDtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB3aGF0X3RvX2hqbGpfMm5hdGl2ZS5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqIFxuXHQgKiDkvZznlKjvvJog5qGl5o6l5YaF5bWM5oOF5Ya15LiL77yMdW3ml6Xlv5fljY/orq7lj5HpgIHpu4Tph5Hku6Tnrq3ml6Xlv5fnu5luYXRpdmVcblx0ICogXG5cdCAqIGRlcHM6IOaXoFxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgYXBsdXNVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHQvLyB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblx0Ly8gdmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG5cdHZhciB1dGlsUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oODEpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpe1xuXHQgIHJldHVybiB7XG5cdCAgICBnZXRUb05hdGl2ZURhdGE6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAvLyB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG5cdCAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuXHQgICAgICB2YXIgd2hhdF90b19zZW5kID0gY29udGV4dC53aGF0X3RvX3NlbmQgfHwge307XG5cdCAgICAgIHZhciBsb2dkYXRhID0gd2hhdF90b19zZW5kLmxvZ2RhdGEgfHwge307XG5cdCAgICAgIHZhciBzZGtfaW5mbyA9IGxvZ2RhdGEuc2RrX2luZm8gfHwge307XG5cdFxuXHQgICAgICB2YXIgcmVzdWx0ID0ge30gLHNka0FyZ3MgPSB7fSwgY3VzdG9tQXJncyA9IHt9O1xuXHQgICAgICBzZGtBcmdzLmNuYSA9IGV0YWcuY25hO1xuXHQgICAgICBzZGtBcmdzLmx2ZXIgPSBzZGtfaW5mby5sdmVyO1xuXHQgICAgICBzZGtBcmdzLmpzdmVyID0gc2RrX2luZm8uanN2ZXI7XG5cdCAgICAgIHNka0FyZ3MuaWQgPSB1c2VyZGF0YS5sb2drZXkgfHwgJy0nO1xuXHQgICAgICBzZGtBcmdzLnRzID0gRGF0ZS5ub3coKTsgLy/lkozoo7h3ZWLkvqfkvJrmnInlt67lvIJcblx0ICAgICAgc2RrQXJncy5pc19oNSA9ICcxJztcblx0ICAgICAgLy8gc2RrQXJncy5mdW5jSWQgPSBsb2dkYXRhLmV2ZW50X2NvZGU7IC8vd2h5IGhhcyB0aGlzIGludmFsaWQgcHJvcGVydHkhIVxuXHQgICAgICAvLyBA6ZKw5pitIGZpeCDlhajln4vngrkg5qGl5o6l5LqL5Lu257G75Z6LXG5cdCAgICAgIHNka0FyZ3MuZXZlbnRfdHlwZV9pZCA9IGxvZ2RhdGEuZXZlbnRfY29kZTtcblx0ICAgICAgaWYgKHVzZXJkYXRhLmdva2V5KSB7XG5cdCAgICAgICAgc3dpdGNoKHR5cGVvZiB1c2VyZGF0YS5nb2tleSkge1xuXHQgICAgICAgIGNhc2UgJ3N0cmluZyc6XG5cdCAgICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAhISh1c2VyZGF0YS5nb2tleS5tYXRjaCgnaXNfYXV0bycpKTtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIGNhc2UgJ29iamVjdCc6XG5cdCAgICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSB1c2VyZGF0YS5nb2tleS5pc19hdXRvO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgZGVmYXVsdDogXG5cdCAgICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAwO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IDA7XG5cdCAgICAgIH1cblx0ICAgICAgc2RrQXJncy50cmFja190eXBlID0gc2RrQXJncy5pc19hdXRvIHx8IDAgKyAnJztcblx0ICAgICAgaWYgKHR5cGVvZiB1c2VyZGF0YS5nb2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBjdXN0b21BcmdzID0gYXBsdXNVdGlscy5hcnIyb2JqKGFwbHVzVXRpbHMucGFyYW0yYXJyKHVzZXJkYXRhLmdva2V5IHx8ICcnKSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3VzdG9tQXJncyA9IHV0aWxEYXNoLmNsb25lRGVlcCh1dGlscy5kZWxldGVJbmZvKHVzZXJkYXRhLmdva2V5LCBbXG5cdCAgICAgICAgICAnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3NyY19wb3NfaWQnLFxuXHQgICAgICAgICAgJ191c2VyX2lkJywgJ191c2VyX25pY2snXG5cdCAgICAgICAgXSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAobG9nZGF0YS51cmwpIHtcblx0ICAgICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IHV0aWxQYWdlLmdldFBhZ2VOYW1lKGxvY2F0aW9uLnBhdGhuYW1lLCBjdXN0b21BcmdzKTsgXG5cdCAgICAgICAgLy8gYXBsdXMuZ2V0UGFnZU5hbWUoKSB8fCBjdXN0b21BcmdzLnNwbUIgfHwgY3VzdG9tQXJnc1snZGF0YS1wYWdlbmFtZSddIHx8IGN1c3RvbUFyZ3MucGFnZV9uYW1lIHx8IGxvZ2RhdGEudXJsIHx8ICctJztcblx0ICAgICAgICBzZGtBcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcblx0ICAgICAgICBpZiAoc2RrQXJncy5wYWdlX25hbWUgJiYgY3VzdG9tQXJncy5zcG1DKSB7XG5cdCAgICAgICAgICBzZGtBcmdzWydzcG0tY250J10gPSBbZW5jb2RlVVJJQ29tcG9uZW50KHNka0FyZ3MucGFnZV9uYW1lKSwgZW5jb2RlVVJJQ29tcG9uZW50KGN1c3RvbUFyZ3Muc3BtQyksIGVuY29kZVVSSUNvbXBvbmVudChjdXN0b21BcmdzLnNwbUQpXS5maWx0ZXIoZnVuY3Rpb24odil7XG5cdCAgICAgICAgICAgIHJldHVybiAhIXY7XG5cdCAgICAgICAgICB9KS5qb2luKCcuJyk7XG5cdCAgICAgICAgICBkZWxldGUgY3VzdG9tQXJncy5zcG1DO1xuXHQgICAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3Muc3BtQjtcblx0ICAgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnNwbUQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBpZiAoY3VzdG9tQXJncy5wYWdlX25hbWUgfHwgY3VzdG9tQXJnc1snZGF0YS1wYWdlbmFtZSddKSB7XG5cdCAgICAgIC8vICAgZGVsZXRlIGN1c3RvbUFyZ3MucGFnZV9uYW1lO1xuXHQgICAgICAvLyAgIGRlbGV0ZSBjdXN0b21BcmdzWydkYXRhLXBhZ2VuYW1lJ107XG5cdCAgICAgIC8vIH1cblx0ICAgICAgaWYgKGN1c3RvbUFyZ3MudHMpIHtcblx0ICAgICAgICAvLyDliKDpmaRuYXRpdmXkv53nlZnlrZfmrrV0c1xuXHQgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnRzO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgY2xvbmVQID0gdXRpbERhc2guY2xvbmVEZWVwKGN1c3RvbUFyZ3MpO1xuXHQgICAgICBmb3IgKHZhciBrIGluIGNsb25lUCkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgayA9PT0gJ3N0cmluZycgJiYgdXRpbHMuc3RhcnRzV2l0aChrLCAnXycpKSB7XG5cdCAgICAgICAgICBzZGtBcmdzW2tdID0gY2xvbmVQW2tdO1xuXHQgICAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3Nba107XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXN1bHQuc2RrQXJncyA9IHV0aWxEYXNoLmNsb25lRGVlcChzZGtBcmdzKTtcblx0ICAgICAgdmFyIHRlbXBDdXNwID0gdXRpbERhc2guY2xvbmVEZWVwKGN1c3RvbUFyZ3MpO1xuXHQgICAgICByZXN1bHQuY3VzcCA9IHRlbXBDdXNwO1xuXHQgICAgICBpZiAodGVtcEN1c3AuYXApIHtcblx0ICAgICAgICByZXN1bHQuYXAgPSB0ZW1wQ3VzcC5hcDtcblx0ICAgICAgICBkZWxldGUgdGVtcEN1c3AuYXA7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGMud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB3aGF0X3RvX3NlbmQuaGpsamRhdGFUb1VtTmF0aXZlID0gdGhpcy5nZXRUb05hdGl2ZURhdGEoKTtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuXHQgICAgICByZXR1cm47IFxuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvYXBsdXNfc3BtLmpzXG5cdCAqIFNQTSDln4vngrnohJrmnKzlhaXlj6PvvIzkvp3otZZhcGx1c0pT77yM5pys6ISa5pys5pyA5aSa562J5b6FMTBz77yM5aaC5p6cMTBz5ZCO6L+Y5rKh5pyJ5qOA5rWL5YiwYXBsdXNKU++8jOWImeaJk+WHuuitpuWRiu+8gVxuXHQgKiBAc2VlIGh0dHA6Ly93aWtpLnVlZC50YW9iYW8ubmV0L2Rva3UucGhwP2lkPXRtczpzcG0lRTUlOUYlOEIlRTclODIlQjklRTYlOTYlQjklRTYlQTElODhcblx0ICpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE1KSgpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX3NwbS9tYWluLmpzXG5cdCAqIFNQTSDln4vngrnohJrmnKxcblx0ICogQHNlZSBodHRwOi8vd2lraS51ZWQudGFvYmFvLm5ldC9kb2t1LnBocD9pZD10bXM6c3BtJUU1JTlGJThCJUU3JTgyJUI5JUU2JTk2JUI5JUU2JUExJTg4XG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBAYXV0aG9yIOWto+acrSA8aml6aGEud3lqQHRhb2Jhby5jb20+XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxEb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0Ly8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cdFxuXHQvLyB2YXIgb3BlbkFQSSA9IHJlcXVpcmUoJy4vb3BlbkFQSScpO1xuXHQvLyB2YXIgd2F0Y2hDbGljayA9IHJlcXVpcmUoJy4vd2F0Y2hDbGljaycpO1xuXHQvLyB2YXIgd2F0Y2hJZnJhbWUgPSByZXF1aXJlKCcuL3dhdGNoSWZyYW1lJyk7XG5cdHZhciB3YXRjaFNQTSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE2KTtcblx0Ly8gdmFyIHdhdGNoV0hTcG0gPSByZXF1aXJlKCcuL3dhdGNoV0hTcG0nKTtcblx0Ly8gdmFyIHNwbSA9IHJlcXVpcmUoJy4vc3BtJyk7XG5cdFxuXHQvKipcblx0ICog5YWo5bGAIFNQTSDmlrnms5Vcblx0ICogQHNlZSBodHRwOi8vd2lraS51ZWQudGFvYmFvLm5ldC9kb2t1LnBocD9pZD10ZWFtOnVkYzpmMmU6dW5pZmllZC1iZWFjb246c3BtLW9wZW5hcGlcblx0ICpcblx0ICogZ19zcG0uc3BtX2RfZm9yX2FkIEFQSSDnlKjkuo7lub/lkYrnmoRzcG1fZOS9jVxuXHQgKiBnX3NwbS5zcG0gQVBJIOS4ujIwMTQtMDYtMDQg5qK15piT6ZyA5rGCXG5cdCAqXG5cdCAqIEB0eXBlIHtPYmplY3R9XG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgb2JqICA9IHtcblx0ICAgIGlzVG91Y2hFbmFibGVkOiB1dGlsRG9tLmlzVG91Y2goKSxcblx0ICB9O1xuXHQgIHdhdGNoU1BNLnJ1bihvYmopO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX3NwbS9tYWluLmpzXG5cdCAqIFNQTSDln4vngrnohJrmnKxcblx0ICogQHNlZSBodHRwOi8vd2lraS51ZWQudGFvYmFvLm5ldC9kb2t1LnBocD9pZD10bXM6c3BtJUU1JTlGJThCJUU3JTgyJUI5JUU2JTk2JUI5JUU2JUExJTg4XG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBAYXV0aG9yIOWto+acrSA8aml6aGEud3lqQHRhb2Jhby5jb20+XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdHZhciB1dGlsVXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciB1dGlsR1EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0Ly8gdmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xuXHRcblx0dmFyIGN1cnJlbnRQYWdlQ29uZmlnID0ge307XG5cdFxuXHRmdW5jdGlvbiBmaW5kQW5jaG9yRWxlbWVudCAoZWwpIHtcblx0ICB2YXIgdGFnX25hbWU7XG5cdCAgdmFyIGZsYWc7XG5cdCAgLy8gdmFyIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQgIHdoaWxlIChlbCAmJiAodGFnX25hbWUgPSBlbC50YWdOYW1lKSkge1xuXHQgICAgaWYgKHRhZ19uYW1lID09PSAnQScpIHtcblx0ICAgICAgZmxhZyA9IHRydWU7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfSBlbHNlIGlmICh0YWdfbmFtZSA9PSAnQk9EWScgfHwgdGFnX25hbWUgPT0gJ0hUTUwnKSB7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xuXHQgIH1cblx0ICByZXR1cm4gZmxhZyA/IGVsIDogJyc7XG5cdCAgLy8gY2FsbGJhY2soZmxhZyA/IGVsIDogJycpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmaW5kQXBsdXNBbmNob3JCeUFsaW5rRWwgKGFsaW5rRWwpIHtcblx0ICB2YXIgX3Bvc19pZDtcblx0ICB2YXIgaXNQYWdlID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB0YWdfbmFtZTtcblx0ICAgIHdoaWxlIChhbGlua0VsICYmICh0YWdfbmFtZSA9IGFsaW5rRWwudGFnTmFtZSkpIHtcblx0ICAgICAgX3Bvc19pZCA9IGFsaW5rRWwgJiYgYWxpbmtFbC5nZXRBdHRyaWJ1dGUgPyBhbGlua0VsLmdldEF0dHJpYnV0ZSgnZGF0YS1hcGx1cy1wb3MtaWQnKSA6ICcnO1xuXHQgICAgICBpZiAoX3Bvc19pZCkge1xuXHQgICAgICAgIC8vIGlzRnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrKSAmJiBzdWNjZXNzQ2FsbGJhY2soYWxpbmtFbCwgX3Bvc19pZCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH0gZWxzZSBpZiAodGFnX25hbWUgPT0gJ0JPRFknIHx8IHRhZ19uYW1lID09ICdIVE1MJykge1xuXHQgICAgICAgIF9wb3NfaWQgPSAnUEFHRSc7XG5cdCAgICAgICAgLy8gaXNGdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2spICYmIHN1Y2Nlc3NDYWxsYmFjayhhbGlua0VsLCAnUEFHRScpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICAgIGFsaW5rRWwgPSBhbGlua0VsLnBhcmVudE5vZGU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgLy8gaXNGdW5jdGlvbihmYWlsdXJlQ2FsbGJhY2spICYmIGZhaWx1cmVDYWxsYmFjaygpO1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgX3Bvc19pZDogX3Bvc19pZCxcblx0ICAgIGFsaW5rRWw6IGFsaW5rRWwsXG5cdCAgICBpc1BhZ2U6IGlzUGFnZVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEFwbHVzQ2xrQ29uZmlnIChfcG9zX2lkKSB7XG5cdCAgdmFyIGFwbHVzQXV0b0Nsa0NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpIHx8IFtdO1xuXHQgIHZhciBjbGtDb25maWcgPSB7fTtcblx0ICBpZiAoX3Bvc19pZCA9PT0gJ1BBR0UnKSB7XG5cdCAgICByZXR1cm4gYXBsdXNBdXRvQ2xrQ29uZmlnWzBdIHx8IHt9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBlYWNoKGFwbHVzQXV0b0Nsa0NvbmZpZywgZnVuY3Rpb24gKGNvbmZpZykge1xuXHQgICAgICBpZiAoY29uZmlnLl9wb3NfaWQgPT09IF9wb3NfaWQpIHtcblx0ICAgICAgICBjbGtDb25maWcgPSBjb25maWc7XG5cdCAgICAgICAgcmV0dXJuICdicmVhayc7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIGNsa0NvbmZpZztcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiDlnKjnu5nlrprnmoQgaHJlZiDkuK3pl7Tmj5LlhaUgc3BtIOWPguaVsO+8jOWmguaenOWOn+adpSBocmVmIOS4reW3suaciSBzcG3vvIzliJnlsIblhbbmm7TmlrBcblx0ICogQHBhcmFtIGhyZWYge1N0cmluZ31cblx0ICogQHBhcmFtIHNwbV9pZCB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gc3BtX3VwZGF0ZUhyZWZXaXRoU1BNSWQoaHJlZiwgc3BtX2lkKSB7XG5cdCAgLy8g5Y675o6J546w5pyJ55qEIGhyZWYg5Lit55qEIHNwbSDlj4LmlbBcblx0ICBpZiAoaHJlZiAmJiAvJj9cXGJfc3JjX3Bvc19pZD1bXiYjXSovLnRlc3QoaHJlZikpIHtcblx0ICAgIGhyZWYgPSBocmVmLnJlcGxhY2UoLyY/XFxiX3NyY19wb3NfaWQ9W14mI10qL2csICcnKVxuXHQgICAgICAucmVwbGFjZSgvJnsyLH0vZywgJyYnKVxuXHQgICAgICAucmVwbGFjZSgvXFw/Ji8sICc/Jylcblx0ICAgICAgLnJlcGxhY2UoL1xcPyQvLCAnJylcblx0ICAgIDtcblx0ICB9XG5cdFxuXHQgIGlmICghc3BtX2lkKSByZXR1cm4gaHJlZjtcblx0XG5cdCAgLy8g5ZyoIGhyZWYg5Lit5o+S5YWl5paw55qEIHNwbSDlj4LmlbBcblx0ICB2YXIgc2VhcmNoO1xuXHQgIHZhciBoYXNoO1xuXHQgIHZhciBhO1xuXHQgIHZhciBhbmRfY2hhciA9ICcmJztcblx0ICB2YXIgcXVlcnlfc3BsaXQ7XG5cdCAgdmFyIHF1ZXJ5X2NvdW50O1xuXHQgIHZhciBmaWxlbmFtZTtcblx0ICB2YXIgZmlsZV9leHQ7XG5cdFxuXHQgIGlmIChocmVmLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcblx0ICAgIGEgPSBocmVmLnNwbGl0KCcjJyk7XG5cdCAgICBocmVmID0gYS5zaGlmdCgpO1xuXHQgICAgaGFzaCA9IGEuam9pbignIycpOyAvLyDlj5bnrKzkuIDkuKogIyDlkI7nmoTpg6jliIZcblx0ICB9XG5cdCAgcXVlcnlfc3BsaXQgPSBocmVmLnNwbGl0KCc/Jyk7XG5cdCAgcXVlcnlfY291bnQgPSBxdWVyeV9zcGxpdC5sZW5ndGggLSAxO1xuXHRcblx0ICAvLyDkuIvpnaLlpITnkIblvaLlpoLigJxodHRwOi8vd3d3LnRhb2Jhby5jb23igJ3ov5nmoLfnmoTmnKvlsL7kuI3luKbigJwv4oCd55qE6ZO+5o6lXG5cdCAgLy8g6L+Z56eN6ZO+5o6l5a+55bqU55qEZmlsZW5hbWXkuLrnqbpcblx0ICBhID0gcXVlcnlfc3BsaXRbMF0uc3BsaXQoJy8vJyk7XG5cdCAgYSA9IGFbYS5sZW5ndGggLSAxXS5zcGxpdCgnLycpO1xuXHQgIGZpbGVuYW1lID0gYS5sZW5ndGggPiAxID8gYS5wb3AoKSA6ICcnO1xuXHRcblx0ICBpZiAocXVlcnlfY291bnQgPiAwKSB7XG5cdCAgICAvKipcblx0ICAgICAqIOeUseS6juWtmOWcqOexu+S8vCBodHRwOi8vanUuYXRwYW5lbC5jb20vP3NjbT0xMDA1LjEwLjEuNzAzJnVybD1odHRwOi8vd3d3LnRtYWxsLmNvbS9nby9hY3QvdG1hbGwvbXlteC15bS5waHA/X3NyY19wb3NfaWQ9MS4xMDAwMzg2LjIyMjAxNy4yMCZhZF9pZD0mYW1faWQ9JmNtX2lkPSZwbV9pZD0xNTAxMDA4MjcyNjMzNjgwODVmOFxuXHQgICAgICog6L+Z5qC355qE6ZO+5o6l77yM5rOo5oSP5YW25Lit5pyJ5Lik5Liq4oCcP+KAne+8jFxuXHQgICAgICog6L+Z5piv5LiA56eN6Lez6L2s6ZO+5o6l77yM5YW25LitIHNwbSDlj4LmlbDpnIDopoHliqDlnKjlkI7pnaLkuIDkuKogPyDkuYvlkI7vvIxcblx0ICAgICAqIOe7j+S4juaiteaYk+WVhumHj++8iDIwMTItMDMtMzDvvInvvIzlhrPlrprnu5/kuIDlsIYgc3BtIOWPguaVsOWKoOWIsCBocmVmIOeahOacgOWQjuS4gOS4qiA/IOS5i+WQjlxuXHQgICAgICovXG5cdCAgICBzZWFyY2ggPSBxdWVyeV9zcGxpdC5wb3AoKTsgLy8g5Y+W5pyA5ZCO5LiA5LiqID8g5ZCO55qE6YOo5YiGXG5cdCAgICBocmVmID0gcXVlcnlfc3BsaXQuam9pbignPycpOyAvLyDmnIDlkI7kuIDkuKogPyDkuYvliY3nmoTpg6jliIZcblx0ICB9XG5cdFxuXHQgIGlmIChzZWFyY2ggJiZcblx0ICAgIHF1ZXJ5X2NvdW50ID4gMSAmJiAvLyAjIOWPquWvueS4pOS4quWPiuS7peS4iueahOKAnD/igJ3nmoQgdXJsIOaJp+ihjOi/meagt+eahOajgOa1i1xuXHQgICAgc2VhcmNoLmluZGV4T2YoJyYnKSA9PSAtMSAmJlxuXHQgICAgLy8gc2VhcmNoLmluZGV4T2YoJz0nKSA9PSAtMSAmJlxuXHQgICAgc2VhcmNoLmluZGV4T2YoJyUnKSAhPT0gLTEpIHtcblx0ICAgIC8qKlxuXHQgICAgICog5pyJ5LiA5Lqb6aG16Z2i77yM5aaCIGh0dHA6Ly9sb2dpbi50YW9iYW8uY29tL21lbWJlci9sb2dvdXQuamh0bWw/Zj10b3AmcmVkaXJlY3RVUkw9aHR0cDovL2xvZ2luLnRtYWxsLmNvbS8/X3NyY19wb3NfaWQ9MTAwNy4xMDAzNjEuMC4xODAlMjZyZWRpcmVjdF91cmw9aHR0cCUyNTNBJTI1MkYlMjUyRnRlbWFpLnRtYWxsLmNvbSUyNTJGJTI1M0ZzcG0lMjUzRDMuMTAwMDQ3My4xOTc1NjIuMiUyNTI2cHJ0JTI1M0QxMzM2MzY3NDI1MTk2JTI1MjZwcmMlMjUzRDRcblx0ICAgICAqIHNwbSDlj4LmlbDliqDlnKjnrKzkuozkuKogPyDkuYvlkI7vvIzkvYbmmK/nrKzkuozkuKogPyDkuYvlkI7nmoQgJiDpg73lt7Lnu4/lgZrkuobop4TojIPnmoTovaznoIHvvIzmiYDku6XmlrDmt7vliqDnmoQgc3BtIOWQjumdoueahCAmIOS5n+imgei/m+ihjOi9rOeggVxuXHQgICAgICovXG5cdCAgICBhbmRfY2hhciA9ICclMjYnO1xuXHQgIH1cblx0XG5cdCAgdmFyIHNwbV9wcmVmaXggPSAnJzsgLy8g5aaC5p6c5b2T5YmN5ZyoaWZyYW1l5Lit77yM5bm25LiUaWZyYW1l5pyJc3Bt5Y+C5pWw77yM5YiZ6L+Z5Liq5YmN57yA5LiN5Li656m6XG5cdCAgaHJlZiA9IGhyZWYgKyAnP19zcmNfcG9zX2lkPScgKyBzcG1fcHJlZml4ICsgc3BtX2lkXG5cdCAgICArIChzZWFyY2ggPyAoYW5kX2NoYXIgKyBzZWFyY2gpIDogJycpXG5cdCAgICArIChoYXNoID8gKCcjJyArIGhhc2gpIDogJycpXG5cdCAgO1xuXHRcblx0ICAvKipcblx0ICAgKiDmt7vliqDmlofku7blkI3pop3lpJblj4LmlbBcblx0ICAgKiDnlLHkuo7lnKhJReS4i++8jOWmguaenOWKoOS6hnNwbeWPguaVsOWPr+iDveS8muW8lei1t+aWh+S7tuWQjue8gOWQjeiiq+S/ruaUue+8jFxuXHQgICAqXG5cdCAgICog5q+U5aaC77yaXG5cdCAgICog5Y6f5aeL5LiL6L296ZO+5o6l77yaXG5cdCAgICogaHR0cDovL2Rvd25sb2FkLmFsaXBheS5jb20vc2VjL2VkaXQvYWxpZWRpdC5leGVcblx0ICAgKlxuXHQgICAqIOWKoOS6hnNwbeWPguaVsOS5i+WQju+8mlxuXHQgICAqIGh0dHA6Ly9kb3dubG9hZC5hbGlwYXkuY29tL3NlYy9lZGl0L2FsaWVkaXQuZXhlP19zcmNfcG9zX2lkPWEyMTA3LjEuMTAwMDM0MS4xMO+8iOaciemXrumimO+8jElF5LiL5ZCO57yA5ZCN6KKr5L+u5pS55Li64oCcLjEw4oCd77yJXG5cdCAgICpcblx0ICAgKiDliqDkuoZmaWxl5Y+C5pWw5LmL5ZCO77yaXG5cdCAgICogaHR0cDovL2Rvd25sb2FkLmFsaXBheS5jb20vc2VjL2VkaXQvYWxpZWRpdC5leGU/X3NyY19wb3NfaWQ9YTIxMDcuMS4xMDAwMzQxLjEwJmZpbGU9YWxpZWRpdC5leGXvvIjmsqHmnInpl67popjvvIlcblx0ICAgKlxuXHQgICAqIOWboOatpO+8jOi/meWEv+S8muWvueW9ouWmguaWh+S7tuS4i+i9veeahOmTvuaOpea3u+WKoOS4gOS4qumineWkluWPguaVsFxuXHQgICAqL1xuXHQgIGZpbGVfZXh0ID0gdXRpbERhc2guaXNDb250YWluKGZpbGVuYW1lLCAnLicpID8gZmlsZW5hbWUuc3BsaXQoJy4nKS5wb3AoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG5cdCAgaWYgKGZpbGVfZXh0KSB7XG5cdCAgICBpZiAoKHtcblx0ICAgICAgJ3BuZyc6IDEsXG5cdCAgICAgICdqcGcnOiAxLFxuXHQgICAgICAnanBlZyc6IDEsXG5cdCAgICAgICdnaWYnOiAxLFxuXHQgICAgICAnYm1wJzogMSxcblx0ICAgICAgJ3N3Zic6IDFcblx0ICAgIH0pLmhhc093blByb3BlcnR5KGZpbGVfZXh0KSkge1xuXHQgICAgICAvLyDku6Xlm77niYflkI7nvIDlkI3nu5PlsL7nmoTpk77mjqXkuI3liqAgc3BtIOWPguaVsFxuXHQgICAgICByZXR1cm4gMDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIXNlYXJjaCAmJiBxdWVyeV9jb3VudCA8PSAxKSB7XG5cdCAgICAgIGlmICghaGFzaCAmJiAhKHtcblx0ICAgICAgICAnaHRtJzogMSxcblx0ICAgICAgICAnaHRtbCc6IDEsXG5cdCAgICAgICAgJ3BocCc6IDEsXG5cdCAgICAgICAgJ2FzcHgnOiAxLFxuXHQgICAgICAgICdzaHRtbCc6IDEsXG5cdCAgICAgICAgJ3hodG1sJzogMVxuXHQgICAgICB9KS5oYXNPd25Qcm9wZXJ0eShmaWxlX2V4dCkpIHtcblx0ICAgICAgICAvLyDorqTkuLrlvZPliY3mlofku7bmmK/kuIDkuKrkuIvovb3mlofku7bvvIzmt7vliqDpop3lpJblj4LmlbBcblx0ICAgICAgICBocmVmICs9ICcmZmlsZT0nICsgZmlsZW5hbWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBocmVmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcGx1c1RyYWNrZXIgKGFwbHVzQW5jaG9yLCBfcG9zX2lkKSB7XG5cdCAgdmFyIGFsaW5rcyA9IGFwbHVzQW5jaG9yLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJyk7XG5cdCAgdmFyIGNsa0NvbmZpZyA9IGdldEFwbHVzQ2xrQ29uZmlnKF9wb3NfaWQpIHx8IHt9O1xuXHQgIHZhciBjdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlQ29uZmlnLnBhZ2UgfHwge307XG5cdCAgdmFyIHNwbUIgPSBjbGtDb25maWcuc3BtQiB8fCBjdXJyZW50UGFnZS5zcG1CO1xuXHQgIGlmICghc3BtQikge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgbXlpbmRleCA9IDE7XG5cdCAgZWFjaChhbGlua3MsIGZ1bmN0aW9uIChhbGluaykge1xuXHQgICAgLy8g5LiN6IO955u05o6l55So57KX5pq055qEZmluZEFsbOeahGFsaW5r77yM5L2N572u57Si5byV5Lya5LmxXG5cdCAgICAvLyDpnIDlkJHkuIrmn6Xmib7kuIDpgY3vvIzlpoLmnpzmr5TovoPmt7HnmoToioLngrnlhoXlj4jorr7nva7kuoblhbbku5bnmoRfcG9zX2lk77yM5YiZ5LiN6IO95aSE55CGXG5cdCAgICB2YXIgcnMgPSBmaW5kQXBsdXNBbmNob3JCeUFsaW5rRWwoYWxpbmspO1xuXHQgICAgdmFyIHJlYWxfcG9zX2lkID0gcnMuX3Bvc19pZDtcblx0ICAgIGlmIChfcG9zX2lkID09PSByZWFsX3Bvc19pZCkge1xuXHQgICAgICB2YXIgc3BtID0gX3Bvc19pZCA9PT0gJ1BBR0UnID8gW3NwbUIsIG15aW5kZXgrK10uam9pbignLicpIDogW3NwbUIsIF9wb3NfaWQsIG15aW5kZXgrK10uam9pbignLicpO1xuXHQgICAgICBhcGx1cy5fY3VycmVudF9zcG0gPSBzcG07XG5cdCAgICAgIHZhciBxID0gKHdpbmRvdy5hcGx1c19xdWV1ZSB8fCAod2luZG93LmFwbHVzX3F1ZXVlID0gW10pKTtcblx0ICAgICAgcS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCB7XG5cdCAgICAgICAgICBfc3JjX3Bvc19pZDogc3BtXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmIChhbGluayAmJiBhbGluay5zZXRBdHRyaWJ1dGUpIHtcblx0ICAgICAgICAgIGlmICghYWxpbmsuZ2V0QXR0cmlidXRlKCdhcGx1cy1hbmNob3ItaWQnKSkge1xuXHQgICAgICAgICAgICBhbGluay5zZXRBdHRyaWJ1dGUoJ2FwbHVzLWFuY2hvci1pZCcsIHNwbSk7XG5cdCAgICAgICAgICAgIGlmIChhbGluay5ocmVmICYmIGFsaW5rLmhyZWYgIT09ICcjJykge1xuXHQgICAgICAgICAgICAgIGFsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIHNwbV91cGRhdGVIcmVmV2l0aFNQTUlkKGFsaW5rLmhyZWYsIHNwbSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY29uc29sZS5sb2coZSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIGNvbnNvbGUud2Fybign5p+l5om+5Yiw5YyF5ZCr5YWz57O755qEX3Bvc19pZCA9ICcsIHJlYWxfcG9zX2lkKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHRpbWVzdGFtcDog55So5oi354K55Ye755qE5pe26Ze05oizLCDlpJrmnaHorrDlvZXmjInml7bpl7Tpobrluo/lgJLmjpIsIOWNs+e6pui/keeahOS4i+agh+e6pumdoOWJjVxuXHQgKiB0YXJnZXRfZXhwcmVzc2lvbl90eXBlOiDnm67moIfpk77mjqXooajovr7lvI/nsbvlnossIOWPluWAvOWPr+iDveS4uiBudWxsLCDmiJbogIVocmVm5bGe5oCn5YC8LCDmiJbogIXnlKjmiLfoh6rlrprkuYnnmoTot5/ouKrlj4LmlbBcblx0ICogdGFyZ2V0X2V4cHJlc3Npb246ICDngrnlh7vkvY3nva7lr7nlupTnmoTnm67moIfpk77mjqXooajovr7lvI8sIHR5cGXkuLpocmVm5pe25Li65LiA5LiqdXJsLCDnsbvlnovkuLroh6rlrprkuYnlj4LmlbDml7YsIOWImeS4uuS4gOS4quS4jeWumumVv+eahOWtl+espuS4slxuXHQgKiBzcG1faWQ6IOiiq+eCueWHu+eCueS9jeeahHNwbee8lueggVxuXHQgKiBsb2dfaWQ6IOW9k+WJjemhtemdoueahHB2aWRcblx0ICogY3VycmVudF91cmw6IOW9k+WJjemhtemdoueahFVSTFxuXHQgKiBjdXJyZW50X3JlZmVycmVyOiDlvZPliY3pobXpnaLnmoRyZWZlcnJlcl91cmxcblx0ICogdHJhY2tpbmdfcGFyYW06IOmcgOimgemineWkluS8oOmAkuS4i+WOu+eahOaXpeW/l+WPguaVsFxuXHQgKi9cblx0ZnVuY3Rpb24gZG9UcmFjZSAoZSwgZWwpIHtcblx0ICB2YXIgYWxpbmtFbCA9IGZpbmRBbmNob3JFbGVtZW50KGVsKTtcblx0ICB2YXIgX3Bvc19pZDtcblx0ICBpZiAoYWxpbmtFbCl7XG5cdCAgICBfcG9zX2lkID0gYWxpbmtFbC5nZXRBdHRyaWJ1dGUoJ2FwbHVzLWFuY2hvci1pZCcpO1xuXHQgICAgaWYgKCFfcG9zX2lkKSB7XG5cdCAgICAgIHZhciBycyA9IGZpbmRBcGx1c0FuY2hvckJ5QWxpbmtFbChhbGlua0VsKTtcblx0ICAgICAgX3Bvc19pZCA9IHJzLl9wb3NfaWQ7XG5cdCAgICAgIGFwbHVzVHJhY2tlcihycy5hbGlua0VsLCBfcG9zX2lkKTsgIFxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gX3Bvc19pZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5pdFBhZ2VTcG0gKHNvdXJjZV9wb3NfaWQpIHtcblx0ICB2YXIgcSA9ICh3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKSk7XG5cdCAgdmFyIF9zcmNfcG9zX2lkID0gc291cmNlX3Bvc19pZCB8fCB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgnX3NyY19wb3NfaWQnLCBsb2NhdGlvbi5ocmVmKTtcblx0ICBxLnB1c2goe1xuXHQgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCB7XG5cdCAgICAgIF9zcmNfcG9zX2lkOiBfc3JjX3Bvc19pZFxuXHQgICAgfV1cblx0ICB9KTtcblx0ICBxLnB1c2goe1xuXHQgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWV4ZGF0YScsIHtcblx0ICAgICAgX3NyY19wb3NfaWQ6IF9zcmNfcG9zX2lkXG5cdCAgICB9XVxuXHQgIH0pO1xuXHQgIC8vIOmmluasoVBW5ZCO5riF55CG5o6J5p2l5rqQcG9zX2lkXG5cdCAgcS5wdXNoKHtcblx0ICAgIGFjdGlvbjogJ2FwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUnLFxuXHQgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcblx0ICAgICAgaWYgKG9yaURhdGFzLnN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuXHQgICAgICAgIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1jcHZkYXRhJywge1xuXHQgICAgICAgICAgX3NyY19wb3NfaWQ6ICcnXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdhdGNoUGFnZUNvbmZpZyAoKSB7XG5cdCAgLy8gdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLlBVQkxJU0gsIFthcGx1c1N0YXRpYy5DVVJSRU5UX1BBR0VfQ09ORklHLCBjdXJyZW50UGFnZUNvbmZpZ10pO1xuXHQgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIFthcGx1c1N0YXRpYy5DVVJSRU5UX1BBR0VfQ09ORklHLCBmdW5jdGlvbiAoY29uZmlnKSB7XG5cdCAgICBjdXJyZW50UGFnZUNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblx0ICB9XSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdhdGNoQXBsdXNBdXRvQ2xrICgpIHtcblx0ICBpZiAoYXBsdXMgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc1VNKSB7XG5cdFxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcSA9ICh3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKSk7XG5cdCAgICBxLnB1c2goe1xuXHQgICAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG5cdCAgICAgIGFyZ3VtZW50czogWydhcGx1cy1hdXRvLWNsay11c2VyZm4nLCBmdW5jdGlvbiAoZWwpIHtcblx0ICAgICAgICB2YXIgYXBsdXNBbmNob3JJZCA9IGVsID8gZWwuZ2V0QXR0cmlidXRlKCdhcGx1cy1hbmNob3ItaWQnKSA6ICcnO1xuXHQgICAgICAgIGlmIChhcGx1c0FuY2hvcklkKSB7XG5cdCAgICAgICAgICByZXR1cm4gJ19wb3NfaWQ9JyArIGFwbHVzQW5jaG9ySWQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZhciBfcG9zX2lkID0gZWwgPyBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXBsdXMtcG9zLWlkJykgOiAnJztcblx0ICAgICAgICAgIHZhciBjbGtDb25maWcgPSBfcG9zX2lkID8gZ2V0QXBsdXNDbGtDb25maWcoX3Bvc19pZCkgOiB7fTtcblx0ICAgICAgICAgIGlmIChjbGtDb25maWcuc3BtQiAmJiBjbGtDb25maWcuX3Bvc19pZCkge1xuXHQgICAgICAgICAgICB2YXIgc3BtID1bY2xrQ29uZmlnLnNwbUIsIF9wb3NfaWRdLmpvaW4oJy4nKTtcblx0ICAgICAgICAgICAgcmV0dXJuICdfcG9zX2lkPScgKyBzcG07XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gJyc7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XVxuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICog55uR5ZCsdGFw5LqL5Lu277yM57uZ6LaF6ZO+5o6l5Yqgc3Bt5L+h5oGv77yM57uZ6Z2e6LaF6ZO+5o6l5re75YqgZGF0YS1zcG0tYW5jaG9yLWlk5bGe5oCnXG5cdCAqIEBwYXJhbXMge29iamVjdH0gb2JqIHtcblx0ICogICBpc1RvdWNoRW5hYmxlZDogdHJ1ZXx8ZmFsc2Vcblx0ICogfVxuXHQgKi9cblx0ZXhwb3J0cy5ydW4gPSBmdW5jdGlvbiAob2JqKSB7XG5cdCAgdmFyIGRvYyA9IGRvY3VtZW50O1xuXHQgIGluaXRQYWdlU3BtKCk7XG5cdCAgd2F0Y2hQYWdlQ29uZmlnKCk7XG5cdCAgd2F0Y2hBcGx1c0F1dG9DbGsoKTtcblx0ICB3aW5kb3cuYXBsdXMuZG9UcmFjZSA9IGRvVHJhY2U7XG5cdCAgaWYgKG9iaiAmJiBvYmouaXNUb3VjaEVuYWJsZWQpIHtcblx0ICAgIHV0aWxFdmVudC5vbihkb2MsICd0YXBTcG0nLCBkb1RyYWNlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdXRpbEV2ZW50Lm9uKGRvYywgJ21vdXNlZG93bicsIGRvVHJhY2UpO1xuXHQgICAgdXRpbEV2ZW50Lm9uKGRvYywgJ2tleWRvd24nLCBkb1RyYWNlKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcblx0ICogQVBJ5o+S5Lu2XG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE4KSh0aGlzLm9wdGlvbnMuY29udGV4dC5sb2dDb25maWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTE4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG5cdCAqIEFQSeaPkuS7tlxuXHQgKlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IGxvZ0NvbmZpZyB7XG5cdCAqICAgIHB2OiB7XG5cdCAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfcHYnKSxcblx0ICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ191Jylcblx0ICogICAgfSxcblx0ICogICAgaGpsajoge1xuXHQgKiAgICAgIHBsdWdpbnM6IHJlcXVpcmUoJy4vbGliX2xvZy9wbHVnaW5zX2hqbGonKSxcblx0ICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ19oamxqX3UnKVxuXHQgKiAgICB9XG5cdCAqICB9XG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChsb2dDb25maWcpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICBpZiAoYXBsdXMuX2FwbHVzX2FwaSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBhcGx1cy5fYXBsdXNfYXBpID0ge1xuXHQgICAgICBzdGF0dXM6ICdjb21wbGV0ZSdcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICB2YXIgYXBsdXNPYmogPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSkucnVuLmNyZWF0ZSh7XG5cdCAgICBsb2dDb25maWc6IGxvZ0NvbmZpZ1xuXHQgIH0pO1xuXHQgIGZvciAodmFyIGsgaW4gYXBsdXNPYmopIHtcblx0ICAgIGFwbHVzW2tdID0gYXBsdXNPYmpba107XG5cdCAgfVxuXHRcblx0ICAvLyDliJ3lp4vljJZwdmlkXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXygxMjYpLm1ha2VQVklkKCk7XG5cdFxuXHQgIHZhciBtc2dBcnIgPSBbJ2FwbHVzUmVhZHknLCAnY29tcGxldGUnXTtcblx0ICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ0Fycik7XG5cdCAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dBcnIpO1xuXHRcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDExOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZG9jID0gZG9jdW1lbnQ7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgY29va2llID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCk7XG5cdHZhciB1dGlsRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxHUSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHR2YXIgUmVkdWNlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIwKTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgdXRpbEV2ZW50TGltaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNyk7XG5cdHZhciB1dGlsU3BtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpO1xuXHRcblx0XG5cdHZhciBtZXRhSW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHR2YXIgcmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KTtcblx0dmFyIGZuX2JlZm9yZV9wdiA9IFtdO1xuXHR2YXIgZm5fYWZ0ZXJfcHYgPSBbXTtcblx0dmFyIGZuX2JlZm9yZV9yZWNvcmQgPSBbXTtcblx0dmFyIGZuX2FmdGVyX3JlY29yZCA9IFtdO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0dmFyIEVNUFRZX0ZOID0gZnVuY3Rpb24gKCkge307XG5cdFxuXHRmdW5jdGlvbiBnZXRNbXN0YXRUaW1lb3V0ICgpIHtcblx0ICB2YXIgdGltZSA9IDUwMDA7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIGxvbmd0aW1lID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLW1tc3RhdC10aW1lb3V0Jyk7XG5cdCAgICBpZiAobG9uZ3RpbWUpIHtcblx0ICAgICAgdmFyIHRpbWVJbnQgPSBwYXJzZUludChsb25ndGltZSk7XG5cdCAgICAgIGlmICh0aW1lSW50ID49IDEwMDAgJiYgdGltZUludCA8PSAxMDAwMCkge1xuXHQgICAgICAgIHRpbWUgID0gdGltZUludDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgcmV0dXJuIHRpbWU7XG5cdH1cblx0XG5cdC8vIGZ1bmN0aW9uIG5lZWRMaW1pdFNlbmQobG9na2V5KSB7XG5cdC8vICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQvLyAgIHZhciBldmVudExpbWl0UmF0ZXMgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19FVkVOVF9MSU1JVFJBVEVTKTtcblx0Ly8gICBpZiAoZXZlbnRMaW1pdFJhdGVzICYmIGV2ZW50TGltaXRSYXRlcy5sZW5ndGggPiAwKSB7XG5cdC8vICAgICB2YXIgZXZlbnQgPSB1dGlsQXJyYXkuZmluZChldmVudExpbWl0UmF0ZXMsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0Ly8gICAgICAgcmV0dXJuIGl0ZW0uZXZlbnRJZCA9PT0gbG9na2V5O1xuXHQvLyAgICAgfSk7XG5cdCAgICBcblx0Ly8gICAgIGlmIChldmVudCkge1xuXHQvLyAgICAgICB2YXIgcmFuZG9tID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTAwMCk7ICAgICAgXG5cdC8vICAgICAgIGlmIChyYW5kb20gPCAoZXZlbnQuc2FtcGxpbmdSYXRlICogMTAwMCkpIHtcblx0Ly8gICAgICAgICByZXR1cm4gdHJ1ZTtcblx0Ly8gICAgICAgfSBlbHNlIHtcblx0Ly8gICAgICAgICByZXR1cm4gZmFsc2U7XG5cdC8vICAgICAgIH1cblx0Ly8gICAgIH0gZWxzZSB7XG5cdC8vICAgICAgIHJldHVybiB0cnVlO1xuXHQvLyAgICAgfVxuXHQvLyAgIH0gZWxzZSB7XG5cdC8vICAgICByZXR1cm4gdHJ1ZTtcblx0Ly8gICB9XG5cdC8vIH1cblx0XG5cdGZ1bmN0aW9uIGdldFJhbmRvbUludCAoc3BtX2FiLCBsb2drZXksIGNmZykge1xuXHQgIHZhciBzcG1hID0gc3BtX2FiWzBdO1xuXHQgIHZhciBzcG1iID0gc3BtX2FiWzFdO1xuXHQgIHZhciBzcG1PYmogPSAoY2ZnIHx8IHt9KS5zcG07XG5cdCAgdmFyIGxvZ2tleU9iaiA9IChjZmcgfHwge30pLmxvZ2tleTtcblx0ICB2YXIgcmF0ZSA9IDE7XG5cdCAgaWYoc3BtT2JqICYmIHNwbU9ialtzcG1hXSl7XG5cdCAgICB2YXIgc3BtYU9iaiA9IHNwbU9ialtzcG1hXTtcblx0ICAgIHJhdGUgPSBzcG1hT2JqLmNwO1xuXHQgICAgaWYoc3BtYU9ialtzcG1iXSl7XG5cdCAgICAgIHJhdGUgPSBzcG1hT2JqW3NwbWJdLmNwO1xuXHQgICAgfSAgIFxuXHQgIH1lbHNlIGlmKGxvZ2tleU9iaiAmJiBsb2drZXlPYmpbbG9na2V5XSl7XG5cdCAgICByYXRlID0gbG9na2V5T2JqW2xvZ2tleV07XG5cdCAgfVxuXHQgIHZhciByYW5kb21JbnQgPSBNYXRoLmNlaWwoKE1hdGgucmFuZG9tKCkgKiBNYXRoLmZsb29yKDEvcmF0ZSkpKTtcblx0ICByZXR1cm4gcmFuZG9tSW50O1xuXHR9XG5cdFxuXHRleHBvcnRzLnJ1biA9IEJhc2UuZXh0ZW5kKHtcblx0ICAvKipcblx0ICAgKiDms6jlhowgc2VuZFBWIOaJp+ihjOS5i+WJjeeahOaWueazlVxuXHQgICAqIOi/meS6m+aWueazleWwhuWcqCBzZW5kUFYg5LmL5YmN5L6d5qyh5omn6KGM77yM5aaC5p6c5pyJ5LiA5Liq5pi+5byP6L+U5ZueIGZhbHNl77yM5YiZIHNlbmRQViDlsIbooqvlj5bmtohcblx0ICAgKiBAcGFyYW0gZm4ge2Z1bmN0aW9ufVxuXHQgICAqL1xuXHQgIGJlZm9yZVNlbmRQVjogZnVuY3Rpb24gKGZuKSB7XG5cdCAgICBmbl9iZWZvcmVfcHYucHVzaChmbik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5rOo5YaMIHNlbmRQViDmiafooYzkuYvlkI7nmoTmlrnms5Vcblx0ICAgKiDov5nkupvmlrnms5XlsIblnKggc2VuZFBWIOS5i+WQjuS+neasoeaJp+ihjFxuXHQgICAqIEBwYXJhbSBmbiB7ZnVuY3Rpb259XG5cdCAgICovXG5cdCAgYWZ0ZXJTZW5kUFY6IGZ1bmN0aW9uIChmbikge1xuXHQgICAgZm5fYWZ0ZXJfcHYucHVzaChmbik7XG5cdCAgfSxcblx0ICAvKipcblx0ICAgKiDlj5HpgIHmiZPngrlcblx0ICAgKiDogIHmjqXlj6PvvIznqbrlh73mlbDov4fmuKFcblx0ICAgKiBAcGFyYW0gW3VzZXJkYXRhXSB7b2JqZWN0fVxuXHQgICAqIEBwYXJhbSBbY29uZmlnXSB7b2JqZWN0fVxuXHQgICAqL1xuXHQgIGxhdW5jaDogZnVuY3Rpb24oKXtcblx0ICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgbXNnOiAnd2FybmluZzogVGhpcyBpbnRlcmZhY2UgaXMgZGVwcmVjYXRlZCwgY2FuIG5vdCBzZW5kIHB2IGxvZywgcGxlYXNlIHVzZSBnb2xkbG9nLnNlbmRQViBpbnN0ZWFkISBBUEk6IGh0dHA6Ly9sb2cuYWxpYmFiYS1pbmMuY29tL2xvZy9pbmZvLmh0bT90eXBlPTIyNzcmaWQ9MzEnXG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIEdFVCDor7fmsYLkuIDkuKrlm77niYflnLDlnYDvvIzlkJHmnI3liqHlmajlj5HpgIHmiZPngrlcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB1cmwge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2RhdGFTdHJdIHtTdHJpbmd9XG5cdCAgICogQHBhcmFtIFttZXRob2RdIHtTdHJpbmd9ICAvLyBQT1NUIE9SIEdFVFxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0ICBzZW5kOiBmdW5jdGlvbiAodXJsLCBkYXRhU3RyLCBtZXRob2QpIHtcblx0ICAgIHZhciBzcmM7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIC8vIOWmguaenHVybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuXHQgICAgaWYgKC9eXFwvXFwvLy50ZXN0KHVybCkpIHtcblx0ICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAgIGlmICgvXlxcL1xcLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcblx0ICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgICAgIH1cblx0ICAgICAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG5cdCAgICB9XG5cdCAgICAvLyDmjIflrprkuoZQT1NU5YiZ5LyY5YWI5oyJUE9TVOWPkemAgVxuXHQgICAgLy8g5by55YaF6buY6K6k5LyY5YWIc2VuZEJlYWNvblxuXHQgICAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnICYmIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3Iuc2VuZEJlYWNvbikge1xuXHQgICAgICBzcmMgPSByZXF1ZXN0LnBvc3REYXRhKHVybCwgZGF0YVN0cik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzcmMgPSByZXF1ZXN0LnNlbmRJbWcodXJsICsgJz8nICsgZGF0YVN0ciwgZ2V0TW1zdGF0VGltZW91dCgpKTtcblx0ICAgIH1cblx0ICAgIGFwbHVzLnJlcSA9IHNyYztcblx0ICAgIHJldHVybiBzcmM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIFtPYmplY3RdIGNvbmZpZzoge1xuXHQgICAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuXHQgICAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2Vcblx0ICAgKiAgIHBhZ2VfaWQ6IDEyMywgICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG5cdCAgICogICBnb2tleTogJycsICAgICAgICAgICAgLy8g55So5oi36Ieq5a6a5LmJ5Y+C5pWw77yI5ZCR5LiL5YW85a6577yMVE9ET+WQjue7reS4i+aOie+8iVxuXHQgICAqIH1cblx0ICAgKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGE6IHtcblx0ICAgKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG5cdCAgICogICB4eHgxOiAndnZ2MScsXG5cdCAgICogICB4eHgyOiAndnZ2MicsXG5cdCAgICogICB4eHhOOiAndnZ2TicsXG5cdCAgICogfSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG5cdCAgICovXG5cdCAgc2VuZFBWOiBmdW5jdGlvbiAoY29uZmlnLCB1c2VyZGF0YSkge1xuXHQgICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuXHQgICAgLy8gMeOAgWJlZm9yZVNlbmRQVu+8jOWmguaenOS7u+aEj+S4gOS4quWHveaVsOi/lOWbnuWAvOS4uiBmYWxzZe+8jOWImeS4reaWreW5tumAgOWHuu+8jOS4jeWPkemAgSBQViDor7fmsYJcblx0ICAgIGlmICh1dGlsRGFzaC5hbnkoZm5fYmVmb3JlX3B2LCBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgcmV0dXJuIGZuKGFwbHVzLCBjb25maWcpID09PSBmYWxzZTtcblx0ICAgIH0pKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIHNraXBSdWxlcyA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1NLSVBfQVBWX1JVTEVTKSB8fCBbXTtcblx0ICAgIGlmICh1dGlsQXJyYXkuaXRlbU1hdGNoKHNraXBSdWxlcywgbG9jYXRpb24uaHJlZikgJiYgY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAvLyAgIG1zZzogJ+agueaNruinhOWImTonICsgc2tpcFJ1bGVzICsgJywg5b+955Wl6Ieq5YqocHbkuIrmiqUnICsgbG9jYXRpb24uaHJlZlxuXHQgICAgICAvLyB9KTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gMuOAgeaJp+ihjCBzZW5kcHYg5o+S5Lu2XG5cdCAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICBjb25maWcucmVjb3JkVHlwZSA9ICdQVic7IC8vIOWIpOaWreWNleWPjOWPkeeUqOeahO+8jOiAg+iZkeenu+mZpFxuXHQgICAgXG5cdCAgICB2YXIgaXNVTSA9IGFwbHVzLmdsb2JhbENvbmZpZy5pc1VNO1xuXHQgICAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpOyBcblx0ICAgIGlmICgoaXNBbGkgfHwgaXNVTSkgJiYgY29uZmlnLm1ldGhvZCE9PSdHRVQnKSB7XG5cdCAgICAgIGNvbmZpZy5tZXRob2QgPSAnUE9TVCc7XG5cdCAgICB9XG5cdCAgICB2YXIgcHYgPSBhcGx1cy5sb2dDb25maWcucHY7XG5cdCAgICByZWR1Y2VyLnJ1bih7XG5cdCAgICAgIHBsdWdpbnM6IHB2LnBsdWdpbnMsXG5cdCAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChwdi5jb250ZXh0KSAvLyDpmLLmraLmupDphY3nva7ooqvmsaHmn5Ncblx0ICAgIH0sIHtcblx0ICAgICAgY29uZmlnOiBjb25maWcsXG5cdCAgICAgIHVzZXJkYXRhOiB1c2VyZGF0YSxcblx0ICAgICAgcHVic3ViVHlwZTogJ3B2Jyxcblx0ICAgICAgbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3B2LFxuXHQgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9wdidcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtcyBjb25maWcge1xuXHQgICAqICAgY29tcG9uZW50SWQ6IDE0NjAwOFxuXHQgICAqICAgcGFnZUlkOiDph4fpm4bnrqHnkIblubPlj7DkuIrnlJ/miJDnmoTllK/kuIDnmoRwYWdlSWQgaHR0cHM6Ly9sb2cyLWRhaWx5LmFsaWJhYmEubmV0L3RyYWNrL2RldmVsb3AvYXJlYS1tYW5hZ2VtZW50L2RldGFpbC8xNDYwMDMvODgwMDA0LzE0NjAwOFxuXHQgICAqIH1cblx0ICAgKi9cblx0ICBwYWdlRW50ZXI6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChjb25maWcpIHtcblx0ICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5QVUJMSVNILCBbYXBsdXNTdGF0aWMuUEFHRV9FTlRFUiwgY29uZmlnXSk7XG5cdCAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuQ0FDSEVfUFVCUywgW2FwbHVzU3RhdGljLlBBR0VfRU5URVIsIGNvbmZpZ10pO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWFvOWuuXdlYnZpZXflhoXlm57osINnb2xkbG9nLmdldFBhcmFt5o6l5Y+j55qE5Z2RXG5cdCAgICovXG5cdCAgZ2V0UGFyYW06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHNpZCkge1xuXHQgICAgdmFyIHd2ID0gd2luZG93LldpbmRWYW5lIHx8IHt9O1xuXHQgICAgdmFyIHZhbHVlID0gd3YgJiYgdHlwZW9mIHd2LmdldFBhcmFtID09PSAnZnVuY3Rpb24nID8gd3YuZ2V0UGFyYW0oc2lkKSA6ICcnO1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIGJlZm9yZVJlY29yZDogZnVuY3Rpb24gKGZuKSB7XG5cdCAgICBmbl9iZWZvcmVfcmVjb3JkLnB1c2goZm4pO1xuXHQgIH0sXG5cdFxuXHQgIGFmdGVyUmVjb3JkOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoZm4pIHtcblx0ICAgIGZuX2FmdGVyX3JlY29yZC5wdXNoKGZuKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlj5HpgIHpu4Tph5Hku6Tnrq3miZPngrlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbG9na2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGdta2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGdva2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCDor7fmsYLmlrnms5XkuLogUE9TVCBvciBHRVRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gY2Jcblx0ICAgKi9cblx0ICByZWNvcmQ6IGZ1bmN0aW9uIChsb2drZXksIGdta2V5LCBnb2tleSwgbWV0aG9kLCBjYikge1xuXHQgICAgLy8gbWV0aG9kID0gJ0dFVCc7IC8vIHV0aWwuaXNTdHJpbmcobWV0aG9kKSA/IG1ldGhvZC50b1VwcGVyQ2FzZSgpIDogJ0dFVCc7XG5cdCAgICAvLyBiZWZvcmVSZWNvcmQg77yM5aaC5p6c5Lu75oSP5LiA5Liq5Ye95pWw6L+U5Zue5YC85Li6IGZhbHNl77yM5YiZ5Lit5pat5bm26YCA5Ye677yM5LiN5Y+R6YCBIHJlY29yZCDor7fmsYJcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpO1xuXHQgICAgdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcblx0ICAgIGlmIChsb2drZXkgJiYgbG9na2V5LmluZGV4T2YoJy8nKSAhPT0gMCAmJiBpc0FsaSkge1xuXHQgICAgICBsb2drZXkgPSAnLycgKyBsb2drZXk7XG5cdCAgICB9XG5cdCAgICBpZiAodXRpbERhc2guYW55KGZuX2JlZm9yZV9yZWNvcmQsIGZ1bmN0aW9uIChmbikge1xuXHQgICAgICByZXR1cm4gZm4oYXBsdXMpID09PSBmYWxzZTtcblx0ICAgIH0pKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH0gXG5cdCAgICB2YXIgcmFuZG9tSW50ID0gMTtcblx0ICAgIHZhciBpc0FycmF5ID0gYXBsdXMuc3BtX2FiIGluc3RhbmNlb2YgQXJyYXk7XG5cdCAgICBpZihpc0FsaSAmJiBpc0FycmF5ICYmIGFwbHVzLnNwbV9hYi5sZW5ndGggPiAxKXtcblx0ICAgICAgcmFuZG9tSW50ID0gZ2V0UmFuZG9tSW50KGFwbHVzLnNwbV9hYiwgbG9na2V5LCBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmVwb3J0LXJhdGUnKSk7XG5cdCAgICB9XG5cdCAgICBpZihyYW5kb21JbnQgPT09IDEpe1xuXHQgICAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICAgIHZhciBoamxqID0gYXBsdXMubG9nQ29uZmlnLmhqbGo7XG5cdCAgICAgIGlmICghaXNVTSkge1xuXHQgICAgICAgIHJlZHVjZXIucnVuKHtcblx0ICAgICAgICAgIHBsdWdpbnM6IGhqbGoucGx1Z2lucyxcblx0ICAgICAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIGNvbmZpZzoge1xuXHQgICAgICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcblx0ICAgICAgICAgICAgbWV0aG9kOiBpc1VNID8gKG1ldGhvZCB8fCAnUE9TVCcpIDogbWV0aG9kXG5cdCAgICAgICAgICAgIC8vIG1ldGhvZDogbWV0aG9kIHx8ICdQT1NUJ1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHVzZXJkYXRhOiB7XG5cdCAgICAgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgICAgICBnbWtleTogZ21rZXksXG5cdCAgICAgICAgICAgIGdva2V5OiBnb2tleSB8fCB7fVxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcblx0ICAgICAgICAgIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9yZWNvcmQsXG5cdCAgICAgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYikpIHtcblx0ICAgICAgICAgICAgY2IoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB1dGlsRXZlbnRMaW1pdC5jYW5Ub1NlbmRISkxKKGdva2V5LCBsb2drZXkpICYmIHJlZHVjZXIucnVuKHtcblx0ICAgICAgICAgIHBsdWdpbnM6IGhqbGoucGx1Z2lucyxcblx0ICAgICAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIGNvbmZpZzoge1xuXHQgICAgICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcblx0ICAgICAgICAgICAgbWV0aG9kOiBpc1VNID8gKG1ldGhvZCB8fCAnUE9TVCcpIDogbWV0aG9kXG5cdCAgICAgICAgICAgIC8vIG1ldGhvZDogbWV0aG9kIHx8ICdQT1NUJ1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHVzZXJkYXRhOiB7XG5cdCAgICAgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgICAgICBnbWtleTogZ21rZXksXG5cdCAgICAgICAgICAgIGdva2V5OiBnb2tleSB8fCB7fVxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcblx0ICAgICAgICAgIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9yZWNvcmQsXG5cdCAgICAgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYikpIHtcblx0ICAgICAgICAgICAgY2IoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZWxzZXtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfSAgICBcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDmmrTpnLLnu5lhcGx1c19zcG0uanMsIOWPkemAgeWPr+inhuWMlum7hOmHkeS7pOeurVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBsb2drZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZ21rZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZ29rZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIOivt+axguaWueazleS4uiBQT1NUIG9yIEdFVFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBjYlxuXHQgICAqL1xuXHQgIHJlY29yZFVkYXRhOiBmdW5jdGlvbiAobG9na2V5LCBnbWtleSwgZ29rZXksIG1ldGhvZCwgY2IpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuXHQgICAgdmFyIGhqbGogPSBhcGx1cy5sb2dDb25maWcuaGpsajtcblx0ICAgIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaTtcblx0ICAgIHJlZHVjZXIucnVuKHtcblx0ICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuXHQgICAgICBjb250ZXh0OiB1dGlsRGFzaC5jbG9uZURlZXAoaGpsai5jb250ZXh0KSAvLyDpmLLmraLmupDphY3nva7ooqvmsaHmn5Ncblx0ICAgIH0sIHtcblx0ICAgICAgY29uZmlnOiB7XG5cdCAgICAgICAgcmVjb3JkVHlwZTogJ0RBVEFDTElDS19ISkxKJywgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG5cdCAgICAgICAgbWV0aG9kOiBpc0FsaSA/IG1ldGhvZCA6IChtZXRob2QgfHwgJ1BPU1QnKVxuXHQgICAgICB9LFxuXHQgICAgICB1c2VyZGF0YToge1xuXHQgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgIGdta2V5OiBnbWtleSxcblx0ICAgICAgICBnb2tleTogZ29rZXkgfHwge31cblx0ICAgICAgfSxcblx0ICAgICAgcHVic3ViVHlwZTogJ2hqbGonLFxuXHQgICAgICBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuXHQgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuXHQgICAgfSwgZnVuY3Rpb24oKXtcblx0ICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDmm7TmlrDpobXpnaLnmoQgYeOAgWIg5L2NXG5cdCAgICog6ZyA5rGC5Y+C6KeB77yaaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2tiL2lzc3Vlcy8xMzdcblx0ICAgKiBAcGFyYW0gYSB7U3RyaW5nfVxuXHQgICAqIEBwYXJhbSBbYl0ge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2NiXSB7RnVuY3Rpb259XG5cdCAgICovXG5cdCAgc2V0UGFnZVNQTTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGEsIGIsIGNiKSB7XG5cdCAgICAvKlxuXHQgICAgICogW3NwbUZsYWddIHtib29sZWFufSAyMDE4LzMvMTItNC8zIOivpeagh+ivhuS4unRydWXvvIzooajnpLpzcG0tcHJl5ZKMc3BtLXVybOS4jeS8muaUueWPmFxuXHQgICAgICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vbHpkdHJhY2tpbmcvdm95YWdlcmFwcC9wZHB2MyNhcGx1cy10cmFja2luZy1saWJcblx0ICAgICAqL1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgc3BtRmxhZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1zcG0tZml4ZWQnKTtcblx0ICAgIHZhciBjYWxsYmFjayA9IHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyA/IGNiIDogZnVuY3Rpb24gKCkge307XG5cdCAgICAvLyDmm7TmlrDlhoXpg6jlj5jph4/lgLxcblx0ICAgIGFwbHVzLnNwbV9hYiA9IGFwbHVzLnNwbV9hYiB8fCBbXTtcblx0ICAgIHZhciBvbGRfc3BtYWIgPSB1dGlsRGFzaC5jbG9uZURlZXAoYXBsdXMuc3BtX2FiKTtcblx0XG5cdFxuXHQgICAgaWYgKGEpIHtcblx0ICAgICAgYXBsdXMuc3BtX2FiWzBdID0gJycgKyBhO1xuXHQgICAgICBhcGx1cy5fJC5zcG0uZGF0YS5hID0gJycgKyBhO1xuXHQgICAgfVxuXHQgICAgaWYgKGIpIHtcblx0ICAgICAgYXBsdXMuc3BtX2FiWzFdID0gJycgKyBiO1xuXHQgICAgICBhcGx1cy5fJC5zcG0uZGF0YS5iID0gJycgKyAgYjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgdmFyIG1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcblx0ICAgIC8vIOeUn+aIkCBQViDmiZPngrnnmoTmlbDmja4gVE9ET1xuXHQgICAgYXBsdXMuc3BtQVBJICYmIGFwbHVzLnNwbUFQSS5zcGFJbml0KGFwbHVzLCBtZXRhX2luZm8sIG9sZF9zcG1hYik7XG5cdFxuXHQgICAgaWYgKHNwbUZsYWcgIT09ICcxJykge1xuXHQgICAgICB2YXIgX3NwbWFiX3ByZSA9IG9sZF9zcG1hYi5qb2luKCcuJyk7XG5cdCAgICAgIGFwbHVzLnNwbWFiX3ByZSA9IF9zcG1hYl9wcmU7XG5cdCAgICB9XG5cdCAgICB2YXIgbXNncyA9IFsnc2V0UGFnZVNQTScsIHtcblx0ICAgICAgc3BtYWJfcHJlOiBhcGx1cy5zcG1hYl9wcmUsXG5cdCAgICAgIHNwbWFiOiBhcGx1cy5zcG1fYWIuam9pbignLicpXG5cdCAgICB9XTtcblx0ICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuXHRcblx0ICAgIHV0aWxTcG0ucmVzZXRNZXRhQW5kQm9keSgpO1xuXHQgICAgdXRpbFNwbS5yZXNldE1vZHVsZXMoKTtcblx0XG5cdCAgICBjYWxsYmFjaygpO1xuXHQgIH0sXG5cdFxuXHQgIGdldFBhZ2VTUE06IGZ1bmN0aW9uKCl7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHJldHVybiBhcGx1cy5zcG1fYWI7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Yqo5oCB6YWN572ubWV0YVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IHZcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyB7XG5cdCAgICogICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG5cdCAgICogICBwcmlvcml0eTogMSwgLy8g6K6+572u5LqG5LyY5YWI57qnMe+8jOWQjOaXtuaciTxtZXRhIG5hbWU9XCJhcGx1cy14LXNldHRpbmdzXCIgY29udGVudD1cIiR7YXBsdXPmj5Lku7blkI19JFwiPu+8jOi/meWPquiDveiuvue9ruS4gOasoVxuXHQgICAqIH1cblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgICAqL1xuXHQgIHNldE1ldGFJbmZvOiBmdW5jdGlvbihhcmcxLCB2YWx1ZSwgb3B0cykge1xuXHQgICAgdmFyIGs7XG5cdCAgICB2YXIgdjtcblx0ICAgIHZhciBkZWZhdWx0TW9kZSA9ICdPVkVSV1JJVEUnO1xuXHQgICAgdmFyIG1vZGUgPSBkZWZhdWx0TW9kZTtcblx0ICAgIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgayA9IGFyZzEubWV0YU5hbWU7XG5cdCAgICAgIHYgPSBhcmcxLm1ldGFWYWx1ZTtcblx0ICAgICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGsgPSBhcmcxO1xuXHQgICAgICB2ID0gdmFsdWU7XG5cdCAgICB9XG5cdCAgICBpZiAobW9kZSA9PT0gZGVmYXVsdE1vZGUpIHtcblx0ICAgICAgaWYgKG1ldGFJbmZvLnNldE1ldGFJbmZvKGssIHYsIG9wdHMpKSB7XG5cdCAgICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgICBfJC5tZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCk7XG5cdCAgICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cdFxuXHQgICAgICAgIHZhciBtc2dzID0gWydzZXRNZXRhSW5mbycsIGssIHYsIG9wdHNdO1xuXHQgICAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICAgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgICAgICByZXR1cm4gcnM7XG5cdCAgICAgIH0gXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gdGhpcy5hcHBlbmRNZXRhSW5mbyhrLCB2KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUbyBhcHBlbmQgYG1ldGFgIHRhZyBpZiB0aGVyZSdzIG5vbmUgYXBsdXMgbWV0YS5cblx0ICAgKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcblx0ICAgKiAgLSBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgY2FsbGVkIG9uIEFycmF5IHZhbHVlcy5cblx0ICAgKiAgLSBgT2JqZWN0LmFzc2lnbmAgY2FsbGVkIG9uIE9iamVjdCB2YWx1ZXMuXG5cdCAgICogIEBwYXJhbSBrXG5cdCAgICogIEBwYXJhbSB2XG5cdCAgICovXG5cdCAgYXBwZW5kTWV0YUluZm86IG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvLFxuXHRcblx0ICAvKipcblx0ICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCMzMzJkZTYyY1xuXHQgICAqL1xuXHQgIHVwZGF0ZVBhZ2VQcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocHJvcGVydGllcykge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICBpZiAocHJvcGVydGllcyAmJiB0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgaWYgKHByb3BlcnRpZXMuX3BhZ2UpIHtcblx0ICAgICAgICBwcm9wZXJ0aWVzLnBhZ2VOYW1lID0gcHJvcGVydGllcy5fcGFnZTtcblx0ICAgICAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtcGFnZW5hbWUnLCBwcm9wZXJ0aWVzLnBhZ2VOYW1lKTtcblx0ICAgICAgICBkZWxldGUgcHJvcGVydGllcy5fcGFnZTtcblx0ICAgICAgfVxuXHQgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtY3B2ZGF0YScsIHByb3BlcnRpZXMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdWxvZygpLncoJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVQYWdlUHJvcGVydGllc1xcJ3MgcGFyYW1zIG11c3QgYmUgb2JqZWN0Jyk7XG5cdCAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgLy8gICBtc2c6ICd3YXJuaW5nOiB0eXBlb2YgdXBkYXRlUGFnZVByb3BlcnRpZXNcXCdzIHBhcmFtcyBtdXN0IGJlIG9iamVjdCdcblx0ICAgICAgLy8gfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9hcGx1c2pzL3Byb2plY3QvYXBsdXNfY2xvdWQjNjAzNGMxZGFcblx0ICAgKi9cblx0ICB1cGRhdGVOZXh0UGFnZVByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgYXBsdXMuYXBwZW5kTWV0YUluZm8oJ2FwbHVzLW5leHRwYWdlLXByb3BlcnRpZXMnLCBwcm9wZXJ0aWVzKTsgIFxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdWxvZygpLncoJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVOZXh0UGFnZVByb3BlcnRpZXNcXCdzIHBhcmFtcyBtdXN0IGJlIG9iamVjdCcpO1xuXHQgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgIC8vICAgbXNnOiAnd2FybmluZzogdHlwZW9mIHVwZGF0ZU5leHRQYWdlUHJvcGVydGllc1xcJ3MgcGFyYW1zIG11c3QgYmUgb2JqZWN0J1xuXHQgICAgICAvLyB9KTtcblx0ICAgIH1cblx0ICAgIC8vIHZhciBxID0gKHdpbmRvdy5nb2xkbG9nX3F1ZXVlIHx8ICh3aW5kb3cuZ29sZGxvZ19xdWV1ZSA9IFtdKSk7XG5cdCAgICAvLyBxLnB1c2goe1xuXHQgICAgLy8gICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIC8vICAgYXJndW1lbnRzOiBbJ05hdGl2ZTRBcGx1c0V4ZWNSZWFkeScsIGZ1bmN0aW9uKHN0YXR1cyl7XG5cdCAgICAvLyAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuXHQgICAgLy8gICAgICAgLy8g6YWN572ubWV0YVxuXHQgICAgLy8gICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuXHQgICAgLy8gICAgICAgICB3aW5kb3cuQXBsdXM0VVQudXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuXHQgICAgLy8gICAgICAgfSBlbHNlIHtcblx0ICAgIC8vICAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgLy8gICAgICAgICAgIG1zZzogJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVQYWdlUHJvcGVydGllc1xcJ3MgcGFyYW1zIG11c3QgYmUgb2JqZWN0J1xuXHQgICAgLy8gICAgICAgICB9KTtcblx0ICAgIC8vICAgICAgIH1cblx0ICAgIC8vICAgICB9XG5cdCAgICAvLyAgIH1dXG5cdCAgICAvLyB9KTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBnZXQgbWV0YUluZm8gYnkga2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9XG5cdCAgICogQHJldHVybiB7T2JqZWN0fVxuXHQgICAqL1xuXHQgIGdldE1ldGFJbmZvOiBmdW5jdGlvbihrKSB7XG5cdCAgICByZXR1cm4gbWV0YUluZm8uZ2V0TWV0YUluZm8oayk7XG5cdCAgfSxcblx0XG5cdCAgLy8g5LqL5Lu257uR5a6a5o6l5Y+j77yM5LuO5qC45b+D5bqT5pq06Zyy5Ye65Y675L6bYXBsdXNKU+aPkuS7tuS9v+eUqFxuXHQgIG9uOiB1dGlsRXZlbnQub24sXG5cdCAgLy8g5rex5bqm5YWL6ZqG77yM5LuO5qC45b+D5bqT5pq06Zyy5Ye65Y675L6bYXBsdXNKU+aPkuS7tuS9v+eUqFxuXHQgIGNsb25lRGVlcDogdXRpbERhc2guY2xvbmVEZWVwLFxuXHQgIHNldENvb2tpZTogY29va2llLnNldENvb2tpZSxcblx0ICBnZXRDb29raWU6IGNvb2tpZS5nZXRDb29raWUsXG5cdFxuXHQgIC8vIFdFQuerr+aaguS4jemcgOimgeWunueOsFxuXHQgIHBhZ2VBcHBlYXI6IEVNUFRZX0ZOLFxuXHRcblx0ICAvLyBXRULnq6/mmoLkuI3pnIDopoHlrp7njrBcblx0ICBwYWdlRGlzYXBwZWFyOiBFTVBUWV9GTixcblx0XG5cdCAgdXBkYXRlUGFnZVV0cGFyYW06IEVNUFRZX0ZOLFxuXHRcblx0ICB1cGRhdGVOZXh0UGFnZVV0cGFyYW06IEVNUFRZX0ZOLFxuXHRcblx0ICAvKipcblx0ICAgKiBAcGFyYW1zIHtPYmplY3R9IHByb3BlcnRpZXNcblx0ICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG5cdCAgICovXG5cdCAgdXBkYXRlU2Vzc2lvblByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgYXBsdXMuc2V0TWV0YUluZm8oJ19zZXNzaW9uX2FyZ3MnLCBwcm9wZXJ0aWVzKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIOWPi+ebn+S6keS4iuiuvue9rumhtemdoue8lueggVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwYWdlbmFtZVxuXHQgICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cblx0ICAgKiAqLyAgXG5cdCAgc2V0UGFnZU5hbWU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhZ2VuYW1lKSB7XG5cdCAgICBpZiAoIXBhZ2VuYW1lIHx8IHR5cGVvZiBwYWdlbmFtZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdWxvZygpLncoJ3NldFBhZ2VOYW1lIGZhaWxlZDogJyArICcgcGFnZW5hbWU9JyArIHBhZ2VuYW1lICk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBib2R5ID0gZG9jLnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGJvZHkuc2V0QXR0cmlidXRlKCdkYXRhLXBhZ2VuYW1lJywgcGFnZW5hbWUpO1xuXHQgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgIHVsb2coKS53KCdzZXRQYWdlTmFtZSBmYWlsZWQ6ICcgKyAnIGVycj0nICsgZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZ2V0UGFnZU5hbWU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCkge1xuXHQgICAgaWYgKHdpbmRvdy5kb2N1bWVudC5ib2R5ICYmIHdpbmRvdy5kb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgd2luZG93LmRvY3VtZW50LmJvZHkuZGF0YXNldC5wYWdlbmFtZSkge1xuXHQgICAgICByZXR1cm4gd2luZG93LmRvY3VtZW50LmJvZHkuZGF0YXNldC5wYWdlbmFtZTtcblx0ICAgIH0gXG5cdCAgICByZXR1cm4gJyc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6I635Y+W5YWD57Sg55qEc3BtLWFuY2hvci1pZFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50IFxuXHQgICAqIEByZXR1cm5zIHtTdHJpbmd9IGRhdGEtc3BtLWFuY2hvci1pZFxuXHQgICAqL1xuXHRcblx0ICBnZXRFbGVtZW50U1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihlbGVtZW50KSB7XG5cdCAgICBpZiAoIWVsZW1lbnQgfHwgIWVsZW1lbnQuZGF0YXNldCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3BtLWFuY2hvci1pZCcpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOS5nemUoemcgOaxgu+8mmh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vbHhsbjdoL2J2enltci9ha2I0OWYjaFBhWExcblx0ICAgKiBhcHDllKTotbfkuovku7bmjqXlj6PvvIzlrp7pmYXlsLHmmK9yZWNvcmRcblx0ICAgKi9cblx0ICByZWNvcmRBcHBMaW5rOiBmdW5jdGlvbiAoZ29rZXksIG1ldGhvZCwgY2IpIHtcblx0ICAgIGlmKCFnb2tleS50YXJnZXRBcHBLZXkpIHtcblx0ICAgICAgdWxvZygpLncoJ3NlbmQgJCRfYXBwX2xpbmsgZmFpbGVkOiB0YXJnZXRBcHBLZXkgaXMgbnVsbCcpO1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHJldHVybiBhcGx1cy5yZWNvcmQoJyQkX2FwcF9saW5rJywgJ09USEVSJywgZ29rZXksIG1ldGhvZCwgY2IpO1xuXHQgIH0sXG5cdH0pO1xuXHRcblx0Ly8gZXhwb3J0cy5ydW4gPSBvcGVuQVBJLmluaXQocnVuKTtcblxuXG4vKioqLyB9KSxcbi8qIDEyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgQ29tcG9zZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTtcblx0dmFyIHBsdWdpbnNMb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7XG5cdFxuXHQvKipcblx0ICogc2VucHZcblx0ICogQHBhcmFtIFtPYmplY3RdIGNvbmZpZzoge1xuXHQgKiAgIGNoZWNrc3VtOiAxMTExMTExMSwgICAvLyDmoLnmja5zcG1hLHNwbWLoh6rliqjnlJ/miJDnmoTkuIDkuKrlrZfnrKbkuLJcblx0ICogICBpc19hdXRvOiB0cnVlL2ZhbHNl77yMIC8vIOagh+ivhuaYr+WQpuiHquWKqOaJk+eCue+8jOm7mOiupOS4unRydWXvvIzljZXpobXlupTnlKjpnIDopoHkvKBmYWxzZVxuXHQgKiAgIHBhZ2VfaWQ6IDEyMywgICAgICAgIC8vIOWwhuS8muS9k+eOsOWcqHNwbWLkvY3kuIpcblx0ICogICBnb2tleTogJycsICAgICAgICAgICAvLyDnm67liY3lt7Lnu4/lpLHmlYhcblx0ICogICByZWZlcnJlcjogJ2h0dHA6Ly93d3cudGFvYmFvLmNvbScgICAvLyDlsIbkvJrmm7/mjaJwduivt+axgueahHByZeWPguaVsFxuXHQgKiB9IC8vIOWQjCBhcGx1cy5sYXVuY2jnrKzkuozkuKrlhaXlj4LigJxtYW51YWzigJ1cblx0ICpcblx0ICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhICAgLy8g5ZCE56eN6Ieq5a6a5LmJcHblj4LmlbBcblx0ICpcblx0ICogQHBhcmFtIFtPYmplY3RdIG9iaiAtIHtmbl9hZnRlcl9wdjogZm5fYWZ0ZXJfcHYsIHh4eDogeHh4fVxuXHQgKlxuXHQgKiBzdGVwMTogbG9hZGVyIHBsdWdpbnMgIG1pZGRsZXdhcmVcblx0ICogc3RlcDI6IGxvYWRlciBkb1NlbmRQdiBtaWRkbGV3YXJlXG5cdCAqIHN0ZXAzOiBydW4gbWlkZGxld2FyZXNcblx0ICovXG5cdFxuXHR2YXIgUmVkdWNlciA9IGZ1bmN0aW9uKCkge1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMgT2JqZWN0IENPTkZJRyB7XG5cdCAqICAgY29udGV4dDogeHh4LFxuXHQgKiAgIHBsdWdpbnM6IHh4eCBcblx0ICogfVxuXHQgKiBAcGFyYW1zIE9iamVjdCBvcHRzIHtcblx0ICogICBjb25maWc6IGNvbmZpZyxcblx0ICogICB1c2VyZGF0YTogdXNlcmRhdGEsXG5cdCAqICAgcHVic3ViVHlwZTogJ3B2JyB8fCAnaGpsaicgfHwgJ3ByZXB2J1xuXHQgKiAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2JyB8fCAnbXdfY2hhbmdlX2hqbGonIHx8ICdtd19jaGFuZ2VfcHJlcHYnXG5cdCAqICAgbWVzc2FnZUZuUXVldWU6IFtmbjEsIGZuMiAuLi5dXG5cdCAqIH1cblx0ICovXG5cdFJlZHVjZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChDT05GSUcsIG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgLy8gMeOAgWluaXQgcGx1Z2luc1xuXHQgIHZhciBwbCA9IG5ldyBwbHVnaW5zTG9hZGVyKCk7XG5cdCAgcGwuaW5pdCh7XG5cdCAgICBtaWRkbGV3YXJlOiBbXSxcblx0ICAgIGNvbmZpZzogb3B0cy5jb25maWcsXG5cdCAgICBwbHVnaW5zOiBDT05GSUcucGx1Z2luc1xuXHQgIH0pO1xuXHQgIHZhciBtaWRkbGV3YXJlID0gcGwucnVuKCk7XG5cdFxuXHQgIC8vIOWIneWni+WMluS4iuS4i+aWh+eOr+Wig++8jGNvbnRleHTlhoXnmoRkYXRh5bCG5Lya5Zyo5ZCE5Liq5o+S5Lu25Lit6L+b6KGM6LWL5YC85oiW6ICF5L+u5pS577yI6YeN6KaB77yJXG5cdCAgdmFyIGNvbnRleHQgPSBpc0Z1bmN0aW9uKENPTkZJRy5jb250ZXh0KSA/IG5ldyBDT05GSUcuY29udGV4dCgpIDogQ09ORklHLmNvbnRleHQ7XG5cdCAgY29udGV4dC51c2VyZGF0YSA9IG9wdHMudXNlcmRhdGE7XG5cdCAgY29udGV4dC5sb2dnZXIgPSB1dGlsTG9nZ2VyLmxvZ2dlcjtcblx0XG5cdCAgdmFyIGFwcCA9IHtcblx0ICAgIGNvbnRleHQ6IGNvbnRleHQsXG5cdCAgICBwdWJzdWI6IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ2FwbHVzX3B1YnN1YicpLFxuXHQgICAgcHVic3ViVHlwZTogb3B0cyAmJiBvcHRzLnB1YnN1YlR5cGVcblx0ICB9O1xuXHRcblx0ICB2YXIgY29tcG9zZSA9IG5ldyBDb21wb3NlKCk7XG5cdCAgY29tcG9zZS5jcmVhdGUoYXBwKTtcblx0ICAvLyDmiafooYzkuK3pl7Tku7Zcblx0ICBjb21wb3NlLndyYXAobWlkZGxld2FyZSwgZnVuY3Rpb24oKSB7XG5cdCAgICBhcHAuY29udGV4dC5zdGF0dXMgPSBhcGx1c1N0YXRpYy5DT01QTEVURTtcblx0ICAgIGlmIChvcHRzKSB7XG5cdCAgICAgIGlmIChvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5KSB7XG5cdCAgICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhbb3B0cy5taWRkbGV3YXJlTWVzc2FnZUtleSwgYXBwLmNvbnRleHRdKTsgIFxuXHQgICAgICB9XG5cdCAgICAgIGlmIChvcHRzLm1lc3NhZ2VGblF1ZXVlKSB7XG5cdCAgICAgICAgZWFjaChvcHRzLm1lc3NhZ2VGblF1ZXVlLCBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgIGZuKHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKSwgQ09ORklHKTtcblx0ICAgICAgICB9KTsgIFxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcblx0ICAgICAgY2FsbGJhY2soYXBwLmNvbnRleHQpO1xuXHQgICAgfVxuXHQgIH0pKCk7XG5cdFxuXHR9O1xuXHRtb2R1bGUuZXhwb3J0cyA9IFJlZHVjZXI7XG5cblxuLyoqKi8gfSksXG4vKiAxMjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2NvbXBvc2UuanNcblx0ICog5Ye95pWw6Zif5YiX5YyF6KOF5ZmoIEV4cG9zZSBjb21wb3NpdG9yXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdGZ1bmN0aW9uIGNvbXBvc2UgKCkge307XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihwcm9wcykge1xuXHQgIC8qKlxuXHQgICAqIGNyZWF0ZeWunumZheS4iuaYr+WvuW5ld+eahOWwgeijhe+8m1xuXHQgICAqIGNyZWF0Zei/lOWbnueahOWunuS+i+WunumZheS4iuWwseaYr25ld+aehOmAoOWHuueahOWunuS+i++8m1xuXHQgICAqIHRoaXPljbPmjIflkJHosIPnlKjlvZPliY1jcmVhdGXnmoTmnoTpgKDlh73mlbDvvJtcblx0ICAgKi9cblx0ICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG5cdCAgICBpZiAodHlwZW9mIHRoaXNbbmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIHRoaXNbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5jYWxsZWRMaXN0ID0gW107XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5zZXRDYWxsZWRMaXN0ID0gZnVuY3Rpb24oaSkge1xuXHQgIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0aGlzLmNhbGxlZExpc3QsIGkpID09PSAtMSkge1xuXHQgICAgdGhpcy5jYWxsZWRMaXN0LnB1c2goaSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Y29tcG9zZS5wcm90b3R5cGUucmVzZXRDYWxsZWRMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5jYWxsZWRMaXN0ID0gW107XG5cdH07XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24obXcsIGNhbGxiYWNrKSB7XG5cdCAgdmFyIGNvbnRleHQgPSB0aGlzO1xuXHQgIHZhciBjdHggPSB0aGlzLmNvbnRleHQgfHwge307XG5cdCAgdmFyIGNvbXBvc2UgPSBjdHguY29tcG9zZSB8fCB7fTtcblx0ICB2YXIgbWF4VGltZW91dCA9IGNvbXBvc2UubWF4VGltZW91dCB8fCAxMCAqIDEwMDA7XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgIHZhciBzaXplID0gbXcubGVuZ3RoOyAvLyDkuK3pl7Tku7bpmJ/liJfplb/luqZcblx0ICAgIHZhciBpID0gMDsgLy8g5Lit6Ze05Lu257Si5byVXG5cdCAgICB2YXIgaiA9IDA7IC8vIOS4gOS4quagh+ivhu+8jDAt5Yid5aeL54q25oCB77yMMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcblx0ICAgIHZhciBzbGVlcEhhbmRlcjE7XG5cdCAgICB2YXIgcnVuID0gZnVuY3Rpb24oaW5kZXgsIHN0YXR1cykge1xuXHQgICAgICAvLyBjb250ZXh0LnB1YnN1YkluZm8oY29udGV4dCwgbXdbaV0pO1xuXHQgICAgICAvLyDkuK3pl7Tku7bpmJ/liJfmiafooYzlrozmr5XlkI7ov5Tlm55cblx0ICAgICAgaWYgKGkgPT09IHNpemUpIHtcblx0ICAgICAgICBzdGF0ZSA9ICdkb25lJztcblx0ICAgICAgICBjb250ZXh0LnJlc2V0Q2FsbGVkTGlzdCgpOyAvLyDph43nva5jYWxsZWRMaXN05Y+Y6YePXG5cdCAgICAgICAgLy8gc3RhdHVz5aaC5p6c562J5LqOZG9uZe+8jOivtOaYjuaYr+S4remAlOmAgOWHuueahOS4remXtOS7tu+8jOS4jemcgOimgeaJp+ihjOWbnuiwg1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSAmJiBzdGF0dXMgIT09IHN0YXRlKSB7XG5cdCAgICAgICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHN0YXRlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KHNsZWVwSGFuZGVyMSk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHZhciBjYl9zdGF0ZSA9IG51bGw7XG5cdCAgICAgIC8vIOS/neivgeavj+S4quS4remXtOS7tuWPquS8muaJp+ihjOS4gOasoVxuXHQgICAgICBpZiAodXRpbEFycmF5LmluZGV4b2YoY29udGV4dC5jYWxsZWRMaXN0LCBpKSA9PT0gLTEpIHtcblx0ICAgICAgICBjb250ZXh0LnNldENhbGxlZExpc3QgJiYgY29udGV4dC5zZXRDYWxsZWRMaXN0KGkpO1xuXHQgICAgICAgIGlmIChtdyAmJiBtd1tpXSAmJiBpc0Z1bmN0aW9uKG13W2ldWzBdKSkge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtaWRkbGV3YXJlXG5cdCAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtc2dcblx0ICAgICAgICAgICAgICovXG5cdCAgICAgICAgICAgIHN0YXRlID0gbXdbaV1bMF0uY2FsbChjb250ZXh0LCBzdGF0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgIGkrKztcblx0ICAgICAgICAgICAgICBqID0gMTsgIC8vIDEt5Lit6Ze05Lu25Zue6LCD5omn6KGM5LqGXG5cdCAgICAgICAgICAgICAgcnVuKGkpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgdWxvZygpLncoZSk7XG5cdCAgICAgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgLy8gICBtc2c6IGVcblx0ICAgICAgICAgICAgLy8gfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgLy8g54q25oCB5Li6cGF1c2XnrYnlvoUyMDBtc+i9ruivou+8jOeKtuaAgeS4um51bWJlcuexu+Wei+eahOaVsOWAvOetieW+hXN0YXRlbXPova7or6Jcblx0ICAgICAgdmFyIGlzTnVtYmVyID0gdHlwZW9mIHN0YXRlID09PSAnbnVtYmVyJztcblx0ICAgICAgaWYgKHN0YXRlID09PSAncGF1c2UnIHx8IGlzTnVtYmVyKSB7XG5cdCAgICAgICAgaiA9IDA7XG5cdCAgICAgICAgLy8g5pyA5aSn562J5b6F5pe26ZW/XG5cdCAgICAgICAgdmFyIF90aW1lX291dCA9IGlzTnVtYmVyID8gc3RhdGUgOiBtYXhUaW1lb3V0O1xuXHQgICAgICAgIHZhciBfbXdfbmFtZSA9IG13W2ldID8gbXdbaV1bMV0gOiAnJztcblx0ICAgICAgICBzbGVlcEhhbmRlcjEgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYgKGogPT09IDApIHtcblx0ICAgICAgICAgICAgdWxvZygpLncoJ2p1bXAgdGhlIG1pZGRsZXdhcmUgYWJvdXQgJyArIF9td19uYW1lICsgJywgYmVjYXVzZSB3YWl0aW5nIHRpbWVvdXQgbWF4VGltZW91dCA9ICcgKyBfdGltZV9vdXQpO1xuXHQgICAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICAgIC8vICAgbXNnOiAnanVtcCB0aGUgbWlkZGxld2FyZSBhYm91dCAnICsgX213X25hbWUgKyAnLCBiZWNhdXNlIHdhaXRpbmcgdGltZW91dCBtYXhUaW1lb3V0ID0gJyArIF90aW1lX291dFxuXHQgICAgICAgICAgICAvLyB9KTtcblx0ICAgICAgICAgICAgc3RhdGUgPSBudWxsO1xuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgICAgIHJ1bihpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBfdGltZV9vdXQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnZG9uZScpIHtcblx0ICAgICAgICAvLyDnirbmgIHkuLpkb25l6KGo56S657uT5p2f77yM5LiN566h5ZCO6Z2i6L+Y5pyJ5rKh5pyJ5Lit6Ze05Lu26YO957uT5p2fXG5cdCAgICAgICAgaSA9IHNpemU7XG5cdCAgICAgICAgcnVuKGksIHN0YXRlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyDpu5jorqTnirbmgIHvvIzlj6rnrqHmiafooYzkuK3pl7Tku7bpmJ/liJdcblx0ICAgICAgICBpKys7XG5cdCAgICAgICAgcnVuKGkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgaWYgKGNvbnRleHQuY2FsbGVkTGlzdCAmJiBjb250ZXh0LmNhbGxlZExpc3QubGVuZ3RoID4gMCkge1xuXHQgICAgICBjb250ZXh0LnJlc2V0Q2FsbGVkTGlzdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJ1bihpKTtcblx0ICB9O1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjb21wb3NlO1xuXG4vKioqLyB9KSxcbi8qIDEyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9wbHVnaW5zTG9hZGVyLmpzXG5cdCAqIOaPkuS7tuWKoOi9veWZqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMgb3B0cyB7XG5cdCAgICAgKiAgIG1pZGRsZXdhcmU6IFtdLFxuXHQgICAgICogICBwbHVnaW5zOiBbXSxcblx0ICAgICAqICAgY29uZmlnOiB7fVxuXHQgICAgICogfVxuXHQgICAgICovXG5cdCAgICBpbml0OiBmdW5jdGlvbihvcHRzKSB7XG5cdCAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG5cdCAgICAgIGlmIChvcHRzICYmIHR5cGVvZiBvcHRzLm1pZGRsZXdhcmUgPT09ICdvYmplY3QnICYmIG9wdHMubWlkZGxld2FyZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gb3B0cy5taWRkbGV3YXJlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMubWlkZGxld2FyZSA9IFtdO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMucGx1Z2luc19uYW1lID0gW107XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5YiG5Y+R6K6i6ZiF5Y+Y5YyWXG5cdCAgICAgKiBAcGFyYW0gbyB7XG5cdCAgICAgKiAgIHB1YnN1Yjogey4uLn0sXG5cdCAgICAgKiAgIGNvbnRleHQ6IHsuLi59XG5cdCAgICAgKiB9LFxuXHQgICAgICogQHBhcmFtIG13IOW9k+WJjeaJp+ihjOeahOS4remXtOS7tlxuXHQgICAgICovXG5cdCAgICBwdWJzdWJJbmZvOiBmdW5jdGlvbihjdHgsIG13KSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIHB1YnN1YiA9IGN0eC5wdWJzdWI7XG5cdCAgICAgICAgaWYgKHB1YnN1Yikge1xuXHQgICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3BsdWdpbnNfY2hhbmdlXycgKyBjdHgucHVic3ViVHlwZSwgbXcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHVsb2coKS53KGUpO1xuXHQgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAvLyAgIG1zZzogZVxuXHQgICAgICAgIC8vIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24gKGluZGV4KSB7XG5cdCAgICAgIGlmKCFpbmRleCkgaW5kZXggPSAwO1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgbWlkZGxld2FyZSA9IHRoaXMubWlkZGxld2FyZTtcblx0ICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdHMgfHwge307XG5cdCAgICAgIHZhciBwbHVnaW5zID0gb3B0cy5wbHVnaW5zO1xuXHQgICAgICBpZiAocGx1Z2lucyAmJiB0eXBlb2YgcGx1Z2lucyA9PT0gJ29iamVjdCcgJiYgcGx1Z2lucy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgdmFyIHBsdWdpbiA9IHBsdWdpbnNbaW5kZXhdO1xuXHQgICAgICAgIHRoaXMucGx1Z2luc19uYW1lLnB1c2gocGx1Z2luLm5hbWUpO1xuXHQgICAgICAgIG1pZGRsZXdhcmUucHVzaChbZnVuY3Rpb24oc3RhdGUsIGNiKXtcblx0ICAgICAgICAgIF9zZWxmLnB1YnN1YkluZm8odGhpcywgcGx1Z2luKTtcblx0ICAgICAgICAgIC8vIOiOt+WPluaPkuS7tuaooeWdl+i3r+W+hOW5tuWIneWni+WMllxuXHQgICAgICAgICAgdmFyIG0gPSBuZXcgcGx1Z2luLnBhdGgoKTtcblx0XG5cdCAgICAgICAgICAvLyDkuLroioLnnIHku6PnoIHph4/vvIzpu5jorqTnmoTliJ3lp4vljJbmlrnms5XlnKjliqDovb3lmajlhoXlgZrlhZzlupXlpITnkIbvvIzljbPmj5Lku7blhoXml6Dnibnmrormg4XlhrXml6DpnIDlrp7njrBpbml05pa55rOVXG5cdCAgICAgICAgICBpZiAoIW0uaW5pdCkge1xuXHQgICAgICAgICAgICBtLmluaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyDlsIbkuIrkuIvmlofms6jlhaXliLDmj5Lku7blhoVcblx0ICAgICAgICAgIG0uaW5pdCh7XG5cdCAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dCxcblx0ICAgICAgICAgICAgY29uZmlnOiBhc3NpZ24ocGx1Z2luLmNvbmZpZyB8fCB7fSwgb3B0cy5jb25maWcpXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHJldHVybiBtLnJ1bihzdGF0ZSwgZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICAgICAgICAvLyDov5nph4zkvb/nlKgx5q+r56eS5bu26L+f5omn6KGM77yM6Ziy5q2i5Lit6Ze05Lu25Li75L2T5YaF55qEY2FsbGJhY2vlhYjmiafooYzvvIzlr7zoh7TmoYbmnrbmi7/kuI3liLDkuK3pl7Tku7ZyZXR1cm7nmoTnrYnlvoXml7bplb/vvIzku47ogIzlr7zoh7Tnm5HmjqflvILluLhcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgY2IocGx1Z2luLCBtc2cpO1xuXHQgICAgICAgICAgICB9LCAxKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sIHBsdWdpbi5uYW1lXSk7XG5cdFxuXHQgICAgICAgIGluZGV4Kys7XG5cdCAgICAgICAgaWYocGx1Z2luc1tpbmRleF0pe1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMucnVuKGluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1pZGRsZXdhcmU7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgZG9jID0gZG9jdW1lbnQ7XG5cdGZ1bmN0aW9uIGdldFNQTUFNZXRhRWxlbWVudChtZXRhTmFtZSkge1xuXHQgIHZhciBtZXRhcyA9IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbWV0YScpO1xuXHQgIHZhciBpO1xuXHQgIHZhciBsO1xuXHQgIHZhciBlbDtcblx0ICB2YXIgbmFtZTtcblx0ICBmb3IgKGkgPSAwLCBsID0gbWV0YXMubGVuZ3RoOyBpIDwgbDsgaSArKykge1xuXHQgICAgZWwgPSBtZXRhc1tpXTtcblx0ICAgIG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcblx0ICAgIGlmIChuYW1lID09PSBtZXRhTmFtZSkge1xuXHQgICAgICByZXR1cm4gZWw7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRmdW5jdGlvbiBjcmVhdGVTUE1NZXRhKCkge1xuXHQgIHZhciBlbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdtZXRhJyk7XG5cdCAgZWwuc2V0QXR0cmlidXRlKCduYW1lJywgJ2RhdGEtc3BtJyk7XG5cdFxuXHQgIHZhciBoZWFkID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG5cdCAgaWYgKGhlYWQpIHtcblx0ICAgIGhlYWQuaW5zZXJ0QmVmb3JlKGVsLCBoZWFkLmZpcnN0Q2hpbGQpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGVsO1xuXHR9O1xuXHQvKipcblx0ICog5pu05pawL+mHjee9riBtZXRh44CBYm9keSDmoIfnrb7kuK3nmoQgYeOAgWIg5L2NXG5cdCAqL1xuXHRmdW5jdGlvbiByZXNldE1ldGFBbmRCb2R5KCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBlbF9tZXRhX2RhdGFfc3BtID0gZ2V0U1BNQU1ldGFFbGVtZW50KCdkYXRhLXNwbScpO1xuXHQgIHZhciBlbF9tZXRhX3NwbV9pZCA9IGdldFNQTUFNZXRhRWxlbWVudCgnc3BtLWlkJyk7XG5cdFxuXHQgIHZhciBlbF9tZXRhID0gZWxfbWV0YV9kYXRhX3NwbSB8fCBlbF9tZXRhX3NwbV9pZDtcblx0XG5cdCAgaWYgKCFlbF9tZXRhKSB7XG5cdCAgICBlbF9tZXRhX2RhdGFfc3BtID0gY3JlYXRlU1BNTWV0YSgpO1xuXHQgICBcblx0ICB9XG5cdCAgaWYoZWxfbWV0YV9kYXRhX3NwbSl7XG5cdCAgICBlbF9tZXRhX2RhdGFfc3BtLnNldEF0dHJpYnV0ZSgnY29udGVudCcsIGFwbHVzLnNwbV9hYlswXSB8fCAnJyk7XG5cdCAgfVxuXHQgIGlmKGVsX21ldGFfc3BtX2lkKXtcblx0ICAgIGVsX21ldGFfc3BtX2lkLnNldEF0dHJpYnV0ZSgnY29udGVudCcsIChhcGx1cy5zcG1fYWIgfHwgW10pLmpvaW4oJy4nKSk7XG5cdCAgfVxuXHQgIHZhciBib2R5ID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG5cdCAgaWYgKGJvZHkpIHtcblx0ICAgIGJvZHkuc2V0QXR0cmlidXRlKCdkYXRhLXNwbScsIGFwbHVzLnNwbV9hYlsxXSB8fCAnJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5yZXNldE1ldGFBbmRCb2R5ID0gcmVzZXRNZXRhQW5kQm9keTtcblx0XG5cdC8qKlxuXHQgKiDmm7TmlrDpobXpnaLkuIrmqKHlnZfnmoTlgLxcblx0ICovXG5cdGZ1bmN0aW9uIHJlc2V0TW9kdWxlcygpIHtcblx0ICB2YXIgZWxzID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJyk7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIGw7XG5cdCAgdmFyIGVsO1xuXHRcblx0ICBmb3IgKGkgPSAwLCBsID0gZWxzLmxlbmd0aDsgaSA8IGw7IGkgKyspIHtcblx0ICAgIGVsID0gZWxzW2ldO1xuXHQgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zcG0tbWF4LWlkeCcpKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zcG0tbWF4LWlkeCcsICcnKTtcblx0ICAgIH1cblx0ICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3BtLWFuY2hvci1pZCcpKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zcG0tYW5jaG9yLWlkJywgJycpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5yZXNldE1vZHVsZXMgPSByZXNldE1vZHVsZXM7XG5cbi8qKiovIH0pLFxuLyogMTI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9hcGx1cy5qc1xuXHQgKiByZXF1ZXN0XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBqaXpoYS53eWpAYmxvZyBodHRwOi8vb2xkai5uZXRcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgdXRpbE5ldHdvcmsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSk7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvLyDlj5HpgIHlm77niYdHRVTor7fmsYLlhoXmoLhcblx0ZnVuY3Rpb24gc2VuZEltZ0NvcmUgKHNyYywgdGltZW91dCwgc3VjY2Vzc0NhbGxCYWNrLCBlcnJvckNhbGxCYWNrKSB7XG5cdCAgdmFyIHdpbiA9IHdpbmRvdyB8fCB7fTtcblx0ICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG5cdCAgdmFyIHJuZF9pZCA9IFwiX2ltZ19cIiArIE1hdGgucmFuZG9tKCk7XG5cdFxuXHQgIC8vIOWcqOWFqOWxgOWPmOmHj+S4reW8leeUqCBpbWfvvIzpmLLmraIgaW1nIOiiq+Weg+WcvuWbnuaUtuacuuWItui/h+aXqeWbnuaUtumAoOaIkOivt+axguWPkemAgeWksei0pVxuXHQgIC8vIOWPguiAg++8mmh0dHA6Ly9vbGRqLm5ldC9hcnRpY2xlL29uZS10aGluZy10by1ub3RpY2UtYWJvdXQtbmV3LWltYWdlL1xuXHQgIHdpbltybmRfaWRdID0gaW1nO1xuXHRcblx0ICB2YXIgcmVtb3ZlUm5kSWQgPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAod2luW3JuZF9pZF0pIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBkZWxldGUgd2luW3JuZF9pZF07XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB3aW5bcm5kX2lkXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGltZy5vbmxvYWQgPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG5cdCAgICByZW1vdmVSbmRJZCgpO1xuXHQgICAgc3VjY2Vzc0NhbGxCYWNrICYmIHN1Y2Nlc3NDYWxsQmFjaygpO1xuXHQgIH07XG5cdCAgaW1nLm9uZXJyb3IgPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG5cdCAgICByZW1vdmVSbmRJZCgpO1xuXHQgICAgZXJyb3JDYWxsQmFjayAmJiBlcnJvckNhbGxCYWNrKCk7XG5cdCAgfTtcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICBpZiAod2luZG93W3JuZF9pZF0pIHtcblx0ICAgICAgd2luZG93W3JuZF9pZF0uc3JjID0gJyc7XG5cdCAgICAgIHJlbW92ZVJuZElkKCk7XG5cdCAgICB9XG5cdCAgfSwgdGltZW91dCB8fCA1MDAwKTtcblx0XG5cdCAgaW1nLnNyYyA9IHNyYztcblx0ICBpbWcgPSBudWxsOyAvLyDliKDpmaTkuLTml7blj5jph4/nmoTlvJXnlKhcblx0ICByZXR1cm4gc3JjO1xuXHR9O1xuXHRleHBvcnRzLnNlbmRJbWdDb3JlID0gc2VuZEltZ0NvcmU7XG5cdFxuXHRleHBvcnRzLnNlbmRJbWcgPSBmdW5jdGlvbiAoc3JjLCB0aW1lb3V0KXtcblx0ICB2YXIgc3VjY2Vzc0NhbGxCYWNrID0gZnVuY3Rpb24oKXtcblx0ICAgIHV0aWxMb2dnZXIubG9nKCfml6Xlv5fkuIrmiqXmiJDlip/vvIEnKTtcblx0ICB9OyBcblx0ICB2YXIgZXJyb3JDYWxsQmFjayA9IGZ1bmN0aW9uKCl7XG5cdCAgICB1dGlsTmV0d29yay50b0R5bmFtaWNzTmV0d29yaygpO1xuXHQgIH07XG5cdCAgc2VuZEltZ0NvcmUoc3JjLCB0aW1lb3V0LCBzdWNjZXNzQ2FsbEJhY2ssIGVycm9yQ2FsbEJhY2spO1xuXHR9O1xuXHRcblx0Ly8g5Y+R6YCBc2VuZEJlYWNvbiBwb3N06K+35rGCXG5cdGV4cG9ydHMucG9zdERhdGEgPSBmdW5jdGlvbiAodXJsLCBkYXRhKSB7XG5cdCAgLy8gZm9yICh2YXIgayBpbiBkYXRhKSB7XG5cdCAgLy8gICBpZiAoayAhPT0gJ2NuYScpIHtcblx0ICAvLyAgICAgZGF0YVtrXSA9IGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2tdKTtcblx0ICAvLyAgIH1cblx0ICAvLyB9XG5cdCAgbmF2aWdhdG9yLnNlbmRCZWFjb24odXJsLCBkYXRhKTtcblx0ICByZXR1cm4gdXJsO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDEyNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBjaGFuZ2UgbmV0d29yayhmcm9tIHN0YXRpYyB0byBkeW5hbWljcylcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOmbqueRniA8bGl4aWFydWkubHhyQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvLyDojrflj5bpnZnmgIHmiJbliqjmgIHln5/lkI1cblx0ZnVuY3Rpb24gZ2V0SG9zdCAoaG9zdCwgbmV0d29ya1R5cGUpeyAgXG5cdCAgaWYobmV0d29ya1R5cGUgPT09ICdkeW5hbWljcycpIHtcblx0ICAgIHZhciBzdGF0aWNIb3N0cyA9IFtcImdtLm1tc3RhdC5jb21cIiwgXCJ3Z28ubW1zdGF0LmNvbVwiXTtcblx0ICAgIGlmKHN0YXRpY0hvc3RzLmluZGV4T2YoaG9zdCkgPiAtMSl7XG5cdCAgICAgIHJldHVybiBcImQtXCIgKyBob3N0O1xuXHQgICAgfVxuXHQgICAgZWxzZXtcblx0ICAgICAgcmV0dXJuIGhvc3Q7XG5cdCAgICB9XG5cdCAgfSBcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGdldE5ldHdvcmtTd2l0Y2gob3B0KXtcblx0ICBvcHQgPSBvcHQgfHwge307XG5cdCAgdmFyIG1heENvdW50ID0gb3B0Lm1heENvdW50IHx8IDE7XG5cdCAgdmFyIG5ldHdvcmtUeXBlID0gb3B0Lm5ldHdvcmtUeXBlIHx8ICdzdGF0aWMnO1xuXHQgIHZhciBkaXJlY3RTd2l0Y2ggPSBvcHQuZGlyZWN0U3dpdGNoIHx8IGZhbHNlO1xuXHQgIHZhciBjb3VudCA9IDA7XG5cdCAgXG5cdCAgZnVuY3Rpb24gY2hhbmdlKCl7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBtZXRhVmFsdWUgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmhvc3QtZycpO1xuXHQgICAgdmFyIGhvc3QgPSBnZXRIb3N0KG1ldGFWYWx1ZSwgbmV0d29ya1R5cGUpO1xuXHQgICAgLy8g5aaC5p6c5b2T5YmNaG9zdOS4jeWtmOWcqOWKqOaAgeWfn+WQje+8jOWImeS4jeS/ruaUueS7pOeureeahGhvc3Rcblx0ICAgIGlmKGhvc3QgIT09IG1ldGFWYWx1ZSl7XG5cdCAgICAgIGFwbHVzLnNldE1ldGFJbmZvKCdhcGx1cy1yaG9zdC1nJywgaG9zdCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKGN1clN3aXRjaCl7XG5cdCAgICBjdXJTd2l0Y2ggPSBjdXJTd2l0Y2ggfHwgZGlyZWN0U3dpdGNoO1xuXHQgICAgLy8g5aaC5p6c55u05o6l5YiH5o2i5Yiw5Yqo5oCB572R57uc55qE5byA5YWz5pivdHJ1ZeeKtuaAge+8jOmCo+S5iOS4jei/m+WFpeiuoeaVsO+8jOeri+WNs+WIh+aNoue9kee7nFxuXHQgICAgaWYoY3VyU3dpdGNoKXtcblx0ICAgICAgY2hhbmdlKCk7XG5cdCAgICB9ZWxzZXtcblx0ICAgICAgKytjb3VudDtcblx0ICAgICAgaWYoY291bnQgPj0gbWF4Q291bnQpe1xuXHQgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgIGxldmVyOiAnd2FybicsXG5cdCAgICAgICAgICBtc2c6ICfml6Xlv5fkuIrmiqXlpLHotKXvvIzms6jmhI/vvIzopoHliIfmiJDliqjmgIHnvZHnu5zllaYhJ1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGNoYW5nZSgpO1xuXHQgICAgICAgIGNvdW50ID0gMDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cdFxuXHQvLyDliIfmjaLln5/lkI1cblx0ZXhwb3J0cy50b0R5bmFtaWNzTmV0d29yayA9IGdldE5ldHdvcmtTd2l0Y2goe1xuXHQgIG1heENvdW50OjEsXG5cdCAgbmV0d29ya1R5cGU6J2R5bmFtaWNzJyxcblx0ICBkaXJlY3RTd2l0Y2g6IGZhbHNlXG5cdH0pO1xuXG4vKioqLyB9KSxcbi8qIDEyNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogcHZpZFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBsb2dJZCA9IF9fd2VicGFja19yZXF1aXJlX18oOTcpO1xuXHRcblx0LyoqXG5cdCAqIOWIpOaWreaYr+WQpuemgeeUqOS6hnB2aWRcblx0ICogQHJldHVybiBbQm9vbGVhbl1cblx0ICovXG5cdGZ1bmN0aW9uIGlzRGlzYWJsZVB2aWQgKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBkaXNhYmxlUHZpZDtcblx0ICB0cnkge1xuXHQgICAgdmFyIG1ldGFfdmFsdWUgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZGlzYWJsZS1wdmlkJykgKyAnJztcblx0ICAgIGlmIChtZXRhX3ZhbHVlID09PSAndHJ1ZScpIHtcblx0ICAgICAgZGlzYWJsZVB2aWQgPSB0cnVlO1xuXHQgICAgfSBlbHNlIGlmIChtZXRhX3ZhbHVlID09PSAnZmFsc2UnKSB7XG5cdCAgICAgIGRpc2FibGVQdmlkID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlcnIpe1xuXHQgIH1cblx0ICByZXR1cm4gZGlzYWJsZVB2aWQ7XG5cdH07XG5cdGV4cG9ydHMuaXNEaXNhYmxlUHZpZCA9IGlzRGlzYWJsZVB2aWQ7XG5cdFxuXHQvKipcblx0ICog5aSE55CG6aG16Z2i5LiK55qEIHB2IGlkXG5cdCAqL1xuXHRleHBvcnRzLm1ha2VQVklkID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBwcmVfcHZpZCA9IGFwbHVzLnB2aWQ7XG5cdCAgdmFyIHVybCA9IGxvY2F0aW9uICYmIGxvY2F0aW9uLmhyZWY7XG5cdCAgdmFyIHRpdGxlID0gZG9jdW1lbnQgJiYgZG9jdW1lbnQudGl0bGU7XG5cdCAgYXBsdXMucHZpZCA9IGxvZ0lkLmdldExvZ0lkKHVybCwgdGl0bGUpO1xuXHQgIGFwbHVzLmdldFB2SWQgPSBnZXRQdklkO1xuXHQgIHZhciBtc2dzID0gWydwdmlkQ2hhbmdlJywge1xuXHQgICAgcHJlX3B2aWQ6IHByZV9wdmlkLFxuXHQgICAgcHZpZDogYXBsdXMucHZpZFxuXHQgIH1dO1xuXHQgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICByZXR1cm4gaXNEaXNhYmxlUHZpZCgpID8gJycgOiBhcGx1cy5wdmlkO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0UHZJZCgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICByZXR1cm4gaXNEaXNhYmxlUHZpZCgpID8gJycgOiBhcGx1cy5wdmlkO1xuXHR9O1xuXHRleHBvcnRzLmdldFB2SWQgPSBnZXRQdklkO1xuXG5cbi8qKiovIH0pLFxuLyogMTI3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIOS6p+eUn+a1j+iniOWZqOaMh+e6uVxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0XG5cdHZhciB1dGlsRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHV0aWxFeGluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7XG5cdHZhciB1dGlsU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0dmFyIHV0aWxBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0dmFyIGNvb2tpZSA9IF9fd2VicGFja19yZXF1aXJlX18oODgpO1xuXHR2YXIgdXRpbERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgQ2FudmFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjgpO1xuXHR2YXIgYXBsdXNVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgQUJGUEM6ICdfYWJmcGMnLFxuXHQgICAgQ05BOiAnY25hJyxcblx0ICAgIFZFUlNJT046ICcyLjAnLCAvLyDniYjmnKw6MSBpbiAyMDIxLTEyLTAyIEDosIvlo6tcblx0ICAgIGdsOiAnJyxcblx0ICAgIGNhbnZhczogJycsXG5cdFxuXHQgICAgd3JpdGVDb29raWU6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIGV4cGlyZXMgPSBuZXcgRGF0ZSgpOyAvLyAx5bm05pyJ5pWIXG5cdCAgICAgICAgZXhwaXJlcy5zZXRUaW1lKGV4cGlyZXMuZ2V0VGltZSgpICsgMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG5cdCAgICAgICAgY29va2llLnNldENvb2tpZShrZXksIHZhbHVlLCB7XG5cdCAgICAgICAgICBTYW1lU2l0ZTogdHJ1ZSxcblx0ICAgICAgICAgIGV4cGlyZXM6ICdleHBpcmVzPScgKyBleHBpcmVzLnRvU3RyaW5nKClcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHRyeVN5bmNGcDogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYWJmcGNPYmogPSB0aGlzLnRyeUdldFN0b3JlVmFsdWUodGhpcy5BQkZQQyk7XG5cdCAgICAgIHRoaXMuc3luY0xTMkNvb2tpZSh0aGlzLkFCRlBDLCBhYmZwY09iaik7XG5cdCAgICB9LFxuXHRcblx0ICAgIHRyeUdldFN0b3JlVmFsdWU6IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgdmFyIExTVmFsdWUgPSB1dGlsU3RvcmUuZ2V0KGtleSk7XG5cdCAgICAgIHZhciBjb29raWVWYWx1ZSA9IGNvb2tpZS5nZXRDb29raWUoa2V5KTsgICAgICBcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBMU1ZhbHVlOiBMU1ZhbHVlLFxuXHQgICAgICAgIGNvb2tpZVZhbHVlOiBjb29raWVWYWx1ZSAgICAgICAgXG5cdCAgICAgIH07XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+WY2xpZW50SW5mbyjmtY/op4jlmajjgIHorr7lpIfnrYnkv6Hmga8pXG5cdCAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICAgKiAgIHZlcnNpb246IDIsXG5cdCAgICAgKiAgIHVhX2luZm86IHtcblx0ICAgICAqICAgICBiOiAnY2hyb21lNTgnXG5cdCAgICAgKiAgICAgaXNtOiAnbWFjJ1xuXHQgICAgICogICAgIG14OiAnMzYwZWUnXG5cdCAgICAgKiAgICAgbzogJ21hYydcblx0ICAgICAqICAgICBwOiAxXG5cdCAgICAgKiAgICAgczogJzE5MjB4MTA4MCdcblx0ICAgICAqICAgICB3OiAnd2Via2l0J1xuXHQgICAgICogICB9XG5cdCAgICAgKiB9XG5cdCAgICAgKi9cblx0ICAgIGdldENsaWVudEluZm86IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgcnMgPSB7fTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBycyA9IGdvbGRsb2cgPyBnb2xkbG9nLl9hcGx1c19jbGllbnQgOiB7fTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBycztcblx0ICAgICAgXG5cdCAgICB9LFxuXHRcblx0ICAgIGhhc1VzYWJsZVNXRjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBzd2Y7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cuQWN0aXZlWE9iamVjdCAhPSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgc3dmID0gbmV3IEFjdGl2ZVhPYmplY3QoJ1Nob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoJyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHN3ZiA9IG5hdmlnYXRvci5wbHVnaW5zWydTaG9ja3dhdmUgRmxhc2gnXTtcblx0ICAgICAgICB9ICBcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgcmV0dXJuIHN3ZiA/ICd0cnVlJyA6ICdmYWxzZSc7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldENhbnZhczogZnVuY3Rpb24gKCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmICghdGhpcy5jYW52YXMpIHtcblx0ICAgICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICByZXR1cm4gdGhpcy5jYW52YXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFdlYkdsOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuZ2V0Q2FudmFzKCk7XG5cdCAgICAgICAgaWYgKCF0aGlzLmdsICYmIGNhbnZhcykge1xuXHQgICAgICAgICAgdGhpcy5nbCA9IHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQgJiYgKGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICByZXR1cm4gdGhpcy5nbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgaW5pdFVpbnQ4QXJyYXlIYXNoQ29kZTI6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKCFVaW50OEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZTIpIHtcblx0ICAgICAgICBVaW50OEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZTIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIHZhciBoYXNoID0gMCwgaSwgY2hyLCBsZW47XG5cdCAgICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApXG5cdCAgICAgICAgICAgIHJldHVybiBoYXNoO1xuXHQgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gdGhpcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgICAgICBjaHIgPSB0aGlzW2ldO1xuXHQgICAgICAgICAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaHI7XG5cdCAgICAgICAgICAgIGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICByZXR1cm4gaGFzaDtcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFdlYkdsUHJpbnRpbmc6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIG15R2wgPSB0aGlzLmdldFdlYkdsKCk7XG5cdCAgICAgIGlmIChteUdsKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHRoaXMuaW5pdFVpbnQ4QXJyYXlIYXNoQ29kZTIoKTtcblx0ICAgICAgICAgIC8vIHZhciBwaXhlbHMgPSBuZXcgVWludDhBcnJheSgyNTYgKiAyNTYgKiA0KTtcblx0ICAgICAgICAgIC8vIG15R2wucmVhZFBpeGVscygwLCAwLCAyNTYsIDI1NiwgbXlHbC5SR0JBLCBteUdsLlVOU0lHTkVEX0JZVEUsIHBpeGVscyk7XG5cdCAgICAgICAgICB2YXIgdmVuLCByZW47XG5cdCAgICAgICAgICB2YXIgZGVidWdJbmZvID0gbXlHbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RlYnVnX3JlbmRlcmVyX2luZm8nKTtcblx0ICAgICAgICAgIGlmIChkZWJ1Z0luZm8pIHtcblx0ICAgICAgICAgICAgdmVuID0gbXlHbC5nZXRQYXJhbWV0ZXIoZGVidWdJbmZvLlVOTUFTS0VEX1ZFTkRPUl9XRUJHTCk7XG5cdCAgICAgICAgICAgIHJlbiA9IG15R2wuZ2V0UGFyYW1ldGVyKGRlYnVnSW5mby5VTk1BU0tFRF9SRU5ERVJFUl9XRUJHTCk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGVidWdJbmZvIGlzIG5vdCBhY2Nlc3NhYmxlJyk7XG5cdCAgICAgICAgICAgIHZlbiA9ICdObyBkZWJ1ZyBJbmZvJztcblx0ICAgICAgICAgICAgcmVuID0gJ05vIGRlYnVnIEluZm8nO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gdmFyIGhhc2ggPSBwaXhlbHMuaGFzaENvZGUyKCk7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBteUdsOiBteUdsLFxuXHQgICAgICAgICAgICB2ZW46IHZlbixcblx0ICAgICAgICAgICAgcmVuOiByZW4sXG5cdCAgICAgICAgICAgIC8vIGhhc2g6IGhhc2gsXG5cdCAgICAgICAgICAgIC8vIHBpeGVsczogcGl4ZWxzXG5cdCAgICAgICAgICB9OyBcblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFJlc29sdXRpb246IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHpvb21fbGV2ZWwgPSAxOyAvL2RldGVjdFpvb20uZGV2aWNlKCk7XG5cdCAgICAgIHZhciBmaXhlZF93aWR0aCA9IHNjcmVlbi53aWR0aCAqIHpvb21fbGV2ZWw7XG5cdCAgICAgIHZhciBmaXhlZF9oZWlnaHQgPSBzY3JlZW4uaGVpZ2h0ICogem9vbV9sZXZlbDtcblx0ICAgICAgdmFyIHJlcyA9IHNjcmVlbi5jb2xvckRlcHRoICsgJ18nICsgTWF0aC5yb3VuZChmaXhlZF93aWR0aCkgKyAnXycgKyBNYXRoLnJvdW5kKGZpeGVkX2hlaWdodCkgKyAnXycgKyB6b29tX2xldmVsICsgJ18nICsgc2NyZWVuLndpZHRoICsgJ18nICsgc2NyZWVuLmhlaWdodCArICdfJyArIHNjcmVlbi5jb2xvckRlcHRoOyAvLyArICdfJyArIHdpbmRvdy5zY3JlZW4uYXZhaWxXaWR0aCArICdfJyArIHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgKyAnXycgKyB3aW5kb3cuc2NyZWVuLmxlZnQgKyAnXycgKyB3aW5kb3cuc2NyZWVuLnRvcCArICdfJyArIHdpbmRvdy5zY3JlZW4uYXZhaWxMZWZ0ICsgJ18nICsgd2luZG93LnNjcmVlbi5hdmFpbFRvcCArICdfJyArIHdpbmRvdy5pbm5lcldpZHRoICsgJ18nICsgd2luZG93Lm91dGVyV2lkdGggKyAnXyc7IC8vICsgZGV0ZWN0Wm9vbS56b29tKCk7XG5cdCAgICAgIHJldHVybiByZXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdlbmVyYXRlV2ViR2xQcmludDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyDpg6jliIbku6PnoIEgXG5cdCAgICAgIHZhciByZXN1bHQgPSAnJztcblx0ICAgICAgdmFyIGdsID0gdGhpcy5nZXRXZWJHbCgpO1xuXHQgICAgICBpZiAoZ2wpIHtcblx0ICAgICAgICB0cnkgeyBcblx0ICAgICAgICAgIHZhciB2U2hhZGVyVGVtcGxhdGUgPSAnYXR0cmlidXRlIHZlYzIgYXR0clZlcnRleDt2YXJ5aW5nIHZlYzIgdmFyeWluVGV4Q29vcmRpbmF0ZTt1bmlmb3JtIHZlYzIgdW5pZm9ybU9mZnNldDt2b2lkIG1haW4oKXt2YXJ5aW5UZXhDb29yZGluYXRlPWF0dHJWZXJ0ZXgrdW5pZm9ybU9mZnNldDtnbF9Qb3NpdGlvbj12ZWM0KGF0dHJWZXJ0ZXgsMCwxKTt9Jztcblx0ICAgICAgICAgIHZhciBmU2hhZGVyVGVtcGxhdGUgPSAncHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7dmFyeWluZyB2ZWMyIHZhcnlpblRleENvb3JkaW5hdGU7dm9pZCBtYWluKCkge2dsX0ZyYWdDb2xvcj12ZWM0KHZhcnlpblRleENvb3JkaW5hdGUsMCwxKTt9Jztcblx0ICAgICAgICAgIHZhciB2ZXJ0ZXhQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcblx0ICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0ZXhQb3NCdWZmZXIpO1xuXHQgICAgICAgICAgdmFyIHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShbLTAuMiwgLTAuOSwgMCwgMC40LCAtMC4yNiwgMCwgMCwgMC43MzIxMzQ0NDQsIDBdKTtcblx0ICAgICAgICAgIC8vIOWIm+W7uuW5tuWIneWni+WMluS6hkJ1ZmZlcuWvueixoeeahOaVsOaNruWtmOWCqOWMuuOAglxuXHQgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHZlcnRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XG5cdCAgICAgICAgICB2ZXJ0ZXhQb3NCdWZmZXIuaXRlbVNpemUgPSAzO1xuXHQgICAgICAgICAgdmVydGV4UG9zQnVmZmVyLm51bUl0ZW1zID0gMztcblx0ICAgICAgICAgIC8vIOWIm+W7uuWSjOWIneWni+WMluS4gOS4qldlYkdMUHJvZ3JhbeWvueixoeOAglxuXHQgICAgICAgICAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG5cdCAgICAgICAgICAvLyDliJvlu7rnnYDoibLlmajlr7nosaFcblx0ICAgICAgICAgIHZhciB2c2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpO1xuXHQgICAgICAgICAgLy8g5LiL5Lik6KGM6YWN572u552A6Imy5ZmoIFxuXHQgICAgICAgICAgZ2wuc2hhZGVyU291cmNlKHZzaGFkZXIsIHZTaGFkZXJUZW1wbGF0ZSk7ICAvLyDorr7nva7nnYDoibLlmajku6PnoIEgIFxuXHQgICAgICAgICAgZ2wuY29tcGlsZVNoYWRlcih2c2hhZGVyKTsgLy8g57yW6K+R5LiA5Liq552A6Imy5Zmo77yM5Lul5L6/6KKrV2ViR0xQcm9ncmFt5a+56LGh5omA5L2/55SoXG5cdCAgICAgICAgICAgICAgXG5cdCAgICAgICAgICB2YXIgZnNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO1xuXHQgICAgICAgICAgZ2wuc2hhZGVyU291cmNlKGZzaGFkZXIsIGZTaGFkZXJUZW1wbGF0ZSk7XG5cdCAgICAgICAgICBnbC5jb21waWxlU2hhZGVyKGZzaGFkZXIpO1xuXHQgICAgICAgICAgLy8g5re75Yqg6aKE5YWI5a6a5LmJ5aW955qE6aG254K5552A6Imy5Zmo5ZKM54mH5q61552A6Imy5ZmoICBcblx0ICAgICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2c2hhZGVyKTtcblx0ICAgICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmc2hhZGVyKTtcblx0ICAgICAgICAgIC8vIOmTvuaOpVdlYkdMUHJvZ3JhbeWvueixoSAgIFxuXHQgICAgICAgICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG5cdCAgICAgICAgICAvLyDlrprkuYnlpb3nmoRXZWJHTFByb2dyYW3lr7nosaHmt7vliqDliLDlvZPliY3nmoTmuLLmn5PnirbmgIEgIFxuXHQgICAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTsgIFxuXHQgICAgICAgICAgcHJvZ3JhbS52ZXJ0ZXhQb3NBdHRyaWIgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAnYXR0clZlcnRleCcpO1xuXHQgICAgICAgICAgcHJvZ3JhbS5vZmZzZXRVbmlmb3JtID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1bmlmb3JtT2Zmc2V0Jyk7ICAgIFxuXHQgICAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocHJvZ3JhbS52ZXJ0ZXhQb3NBcnJheSk7XG5cdCAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHByb2dyYW0udmVydGV4UG9zQXR0cmliLCB2ZXJ0ZXhQb3NCdWZmZXIuaXRlbVNpemUsIGdsLkZMT0FULCAhMSwgMCwgMCk7XG5cdCAgICAgICAgICBnbC51bmlmb3JtMmYocHJvZ3JhbS5vZmZzZXRVbmlmb3JtLCAxLCAxKTtcblx0ICAgICAgICAgIC8vIOS7juWQkemHj+aVsOe7hOS4ree7mOWItuWbvuWFgyAgXG5cdCAgICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCB2ZXJ0ZXhQb3NCdWZmZXIubnVtSXRlbXMpO1xuXHQgICAgICAgICAgcmVzdWx0ID0gZ2wuY2FudmFzLnRvRGF0YVVSTCgpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHsgICAgICAgIFxuXHQgICAgICAgICAgLyogLnRvRGF0YVVSTCBtYXkgYmUgYWJzZW50IG9yIGJyb2tlbiAoYmxvY2tlZCBieSBleHRlbnNpb24pICovXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgYXVkaW9GaW5nZXJQcmludGluZzogZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyB2YXIgZmluaXNoZWQgPSBmYWxzZTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgYXVkaW9DdHggPSBuZXcod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KTtcblx0ICAgICAgICAvLyB2YXIgb3NjaWxsYXRvciA9IGF1ZGlvQ3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTtcblx0ICAgICAgICAvLyB2YXIgYW5hbHlzZXIgPSBhdWRpb0N0eC5jcmVhdGVBbmFseXNlcigpO1xuXHQgICAgICAgIC8vIHZhciBnYWluTm9kZSA9IGF1ZGlvQ3R4LmNyZWF0ZUdhaW4oKTtcblx0ICAgICAgICAvLyB2YXIgc2NyaXB0UHJvY2Vzc29yID0gYXVkaW9DdHguY3JlYXRlU2NyaXB0UHJvY2Vzc29yKDQwOTYsIDEsIDEpO1xuXHQgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IGF1ZGlvQ3R4LmRlc3RpbmF0aW9uO1xuXHQgICAgICAgIHJldHVybiAoYXVkaW9DdHguc2FtcGxlUmF0ZSkudG9TdHJpbmcoKSArICdfJyArIGRlc3RpbmF0aW9uLm1heENoYW5uZWxDb3VudCArICdfJyArIGRlc3RpbmF0aW9uLm51bWJlck9mSW5wdXRzICsgJ18nICsgZGVzdGluYXRpb24ubnVtYmVyT2ZPdXRwdXRzICsgJ18nICsgZGVzdGluYXRpb24uY2hhbm5lbENvdW50ICsgJ18nICsgZGVzdGluYXRpb24uY2hhbm5lbENvdW50TW9kZSArICdfJyArIGRlc3RpbmF0aW9uLmNoYW5uZWxJbnRlcnByZXRhdGlvbjtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuICdub3Qgc3VwcG9ydGVkJztcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBnZXRQbHVnaW5zUHJpbnRpbmc6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHBsZ3MgPSAnJztcblx0ICAgICAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IucGx1Z2lucykge1xuXHQgICAgICAgIHZhciBwbGdzX2xlbiA9IG5hdmlnYXRvci5wbHVnaW5zLmxlbmd0aDtcblx0ICAgICAgICBcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsZ3NfbGVuOyBpKyspIHtcblx0ICAgICAgICAgIHBsZ3MgKz0gbmF2aWdhdG9yLnBsdWdpbnNbaV0ubmFtZSArICdfJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgcGxncyA9IHBsZ3MucmVwbGFjZSgvW15hLXpBLVogXS9nLCAnJyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHBsZ3M7XG5cdCAgICB9LFxuXHRcblx0ICAgIGNoZWNrSXNUb3VjaDogZnVuY3Rpb24gKCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZUZwOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciB3ZWJnbFByaW50aW5nID0gdGhpcy5nZXRXZWJHbFByaW50aW5nKCkgfHwge307IC8vIG15R2wsIHZlbiwgcmVuLCBoYXNoLCBwaXhlbHNcblx0ICAgICAgLy8gY29uc29sZS53YXJuKCd3ZWJnbFByaW50aW5nID09PSAnLCB3ZWJnbFByaW50aW5nKTtcblx0ICAgICAgLy8gdmFyIHBpeGVscyA9IG5ldyBVaW50OEFycmF5KDI1NiAqIDI1NiAqIDQpO1xuXHQgICAgICB2YXIgY29va2llRGF0YSA9IGNvb2tpZS5nZXREYXRhKCk7XG5cdCAgICAgIHZhciBleHBhcmFtcyA9IHV0aWxFeGluZm8uZ2V0RXhwYXJhbXNJbmZvcygpO1xuXHQgICAgICB2YXIgX3VzZXJfaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfaWQnKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdfYW5vbnlfaWQnKTtcblx0ICAgICAgdmFyIHVpZGFwbHVzID0gZXhwYXJhbXMudWlkYXBsdXMgfHwgbmV3IERhdGUoKS5nZXRUaW1lKCk7IC8vKGdvbGRsb2cucHZpZCA/IGdvbGRsb2cucHZpZC5zdWJzdHJpbmcoMCwgOCkgOiAnJyk7XG5cdCAgICAgIFxuXHQgICAgICB2YXIgY2FudmFzX3Rlc3QgPSBDYW52YXMuZ2V0Q2FudmFzSGFzaCgpO1xuXHQgICAgICB2YXIgcmVzdWx0ID0gdXRpbEFzc2lnbih0aGlzLmdldENsaWVudEluZm8oKSwge1xuXHQgICAgICAgIFdlYkdMOiB0aGlzLmdsID8gJ3RydWUnIDogJ2ZhbHNlJyxcblx0ICAgICAgICB3ZWJnbFByaW50OiB0aGlzLmdlbmVyYXRlV2ViR2xQcmludCgpLFxuXHQgICAgICAgIGFkQmxvY2s6ICdObycsXG5cdCAgICAgICAgYXVkaW86IHRoaXMuYXVkaW9GaW5nZXJQcmludGluZygpLFxuXHQgICAgICAgIGNvb2tpZUVuYWJsZWQ6IG5hdmlnYXRvciA/ICEhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQgOiAnZmFsc2UnLFxuXHQgICAgICAgIGNwdV9jb3JlczogbmF2aWdhdG9yICYmIG5hdmlnYXRvci5oYXJkd2FyZUNvbmN1cnJlbmN5ID8gbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kgOiAtMSxcblx0ICAgICAgICBmb250bGlzdDogdGhpcy5oYXNVc2FibGVTV0YoKSxcblx0ICAgICAgICAvLyBmb250czogJzAwMDAwMDAwMDAwMDAwMDEwMDAwMDEwMDExMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAxMDAwMDAwMDAwMDExMDAxMDEwMDAxMTAwMDAwMDAxMDAwMDAwMDAwMTAwMDAwMTAxMDAxMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDEwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMTEwMDAwMDEwMTAwMDAwMDAwMDAxMDEwMDAwMDAxMDAwMDAwMTAwMDAwMDEwMDAwMDAwMDAwMDAwMDAxMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTEwMTAwMDAwMDEwMTAwMTAxMTAwMTAwMDEwMDAwMTAwMDEwMDAwMDEwMDAxMDExMDAwMDEwMDAxMDAwMDEwMDAwMDAxMDExMDAwMDAwMTAwMDExMDEwMDAwMDAwMDAwMDAxMDAwMTAwMDAwMDAwMDAwMDAxMTAwMDAxMDAxMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDExMDAwMDAwMDAxMDAwMDAwMTAwMDEwMDEwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMTAwMDAwMTAwMDEwMDEwMDAwMDAwMDAxMDAwMDAxMDAwMDAwMDAxMDAwMDAwMDAwMDAxMDAwMTAwMDAwMDAxMDAwMDAwMDAwMTAxMDAwMDAxMTEwMDAwMDAwMDEwMDAwMDAwMTAwMDAwMDAwMDAwMDAxMDAxMDAxMDAwMDEwMDAwMTAxMDAwMDAwMDAwMDAwMDAwMDAwMTAwMTEwMDExMDAwMDExMDAwMDAwMTEwMTAwMDAwMDAxMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDEwMDEwMDAxMTExMTAxMDAwMDAwMTEwMTAwMTAxMDAwMTAwMDAwMDAwMDAxMDAxMDAwMDAwMDEwMDAwMDAwMDAxMDAxMDEwMDAwMDAwMDAwMDExMDAwMDAwMTAxMDAwMDAwMDAwMDAwMDAxMTAxMDAwMTAwMTAxMDEwMTAwMDAwMTAwMDEwMDAxMDAwMDAwMDAwMDEwMDAwMDAwMTAwMDAwMDEwMDAwMDAwMDEwMDEwMDAwMDAwMTAwMTEwMDEwMDAxMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDEwMDAwMTAwMDAwMDAwMDAwMDAwMTAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDEwMDEwMTAxMTAwMTAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMTAxMDAwMDAwMDAwMTAwMDAwMDExMTAwMDAwMDExMDAwMTAwMDAwMDAwMDAwMDAxMDAwMDAwMDEwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDEwMTAxMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDEwMDAxMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDEwMTAwMDAxMDAwMDAwMDAwMDEwMDAwMDEwMDAwMDAwMTAwMDAxMDEwMTAxMTEwMDAwMDAwMDEwMDExMTAwMDAwMDAxMTAwMTAwMDEwMDAwMDAxMDAwMTAxMTAwMTAwMTAwMDAwMDAwMDAwMDAwMDAwMTAwMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDAxMDAwMDAxMDEwMDAwMTAwMDEwMTExMDAwMDExMTAwMDAwMDAxMDEwMDAwMTAwMTAwMDAwMDAwMDExMTAwMDAwMDAwMDAwMDAwMTAxMDAwMDAxMTAwMDAwMDAxMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDEwMDAwMTAwMDAwMDAwMDAwMDEwMDAxMDAwMDAwMDAwMDAwMTAxMTAwMDAwMTAwMDAxMDAwMDAwMDExMDExMDAwMDAwMDAxMDEwMDAwMDAwMDAwMDAwMTEwMDAwMTAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAxMDEwMTAwMDAwMDAwMDAwMDAwMDEwMDEwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMTAxMTAxMDAwMTAxMTAwMDEwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTEwMDAwMDAwMDAwMDAwMDAwMDAxMDEwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAxMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDExMDAxMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDEwMTEwMDAwMDAxMTAwMDAwMTAwMTAxMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAxMDAwMDAwMDAwMTEwMDAwMDAwMDEwMDAwMDAwMDEwMDAwMDEwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAxMDEwMDAwMDAwMDAwMDAwMDAwMDAxMDAxMDAwMDAwMTAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDEwMDExMDAwMDAwMDAwMDAwMDAwMDAxMTAwMTAwMDAxMDAwMDEwMDAwMDAwMDAxMDAwMTAwMDAwMDAwMTAwMDAwMDAwMDAwMTAwMDAwMDAwMDEwMDAxMDAxMDAwMDEwMDAwMDAwMDAwMDAwMTAwMTAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMTEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTAwMDAxMTAwMDAwMDAwMDAxMDAwMTAxMDAwMDAwMDAwMDAwMDEwMDAwMDAxMDAwMDAxMDAxMTAwMDAxMTAwMDAwMDAxMDEwMDEwMDAwMDAwMDAwMDAxMDExMDAwMDAwMDAwMDAxMDAwMTEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMDAwMDAwMTAwMDAwMDAwMDAxMDAwMDAwMTAwMDAwMDAwMDAxMDAxMDAwMDExMDAwMDAwMTAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDExMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMTAwMTAwMDAwMTAwMDEwMDAwMDAwMDEwMTAxMDAwMTAwMTAwMDEwMDAwMDAwMDEwMDEwMDAwMDEwMTAwMTAwMTAwMDAwMDAwMDAwMDEwMDExMTAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMTAwMDAwMDAwMDAwMDEwMTAxMDAwMDAwMDAxMDAwMDAwMDAwMDEwMTAxMDEwMTExMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAxMTAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMTAwMDAwMDAxMDAwMDAxMDExMDAwMDAwMDEwMTAwMDAwMDAwMDAwMDEwMTAxMDEwMDAxMDAxMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMTAwMDAwMDAxMDEwMDAwMDAwMTAwMDEwMDAwMDAwMDAwMDEwMDEwMDEwMDAwMTAwMDAwMDAwMTAwMDAwMDAwMDEwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDEwMDAwMTAwMDEwMDAwMTAxMDAwMTAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDAxMTEwMDAwMDAwMTAwMDAwMTAwMTEwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDEwMTAwMDAwMDAwMDAwMDAxMDAwMDEwMDAwMTAxMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMTAwMDExMTAwMDExMTAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAxMDAwMTAxMDAwMDAwMDAwMDAwMDAwMDAwMDExMTAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAxMDEwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMTEwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDEwMTAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAxMTAwMTAwMDAwMDAxMDAwMDEwMDEwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAxMDAwMDAwMDEwMDAwMDAwMDAwMTAwMDAxMTAwMTAwMTAwMTAxMDAwMDAwMTAwMDAwMDAxMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDEwMDAwMDAwMTAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAxMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAxMDEwMDAwMDAwMDEwMDEwMTEwMDAwMDAwMDEwMDAxMDAwMDAxMDEwMDAwMDAxMDAwMDAxMDAwMTAwMDAwMDAwMTAwMTAwMDEwMDAwMDExMDAwMDEwMDAwMDAwMDAwMTAwMTAwMDEwMDAwMDAwMDAxMDAwMDEwMTAwMDAwMDAwMDAwMDAwMTAwMTAwMDAwMDEwMDEwMDAxMDEwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDEwMDAxMTAwMDAxMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDEwMDAwMTAwMDAwMTAwMDAwMTAwMDAwMDAwMTAwMDAwMDAwMTAxMDAxMDAxMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDEwMDAwMTEwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMTAwMDAwMTAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAxMDAwMDAwMDEwMDAwMDAwMDAxMTAwMDAwMDAwMDAwMDEwMDAxMDAxMDAwMTEwMDEwMDAwMDEwMDEwMDAwMTAxMTAwMDAwMDAwMDAwMDAxMDAwMDAwMTAwMTAwMDAwMDAwMDAwMDAxMTAwMDAwMDAwMDAwMTAwMDEwMTAxMDEwMDAwMDAxMDAwMDAwMDExMTAwMDAwMDEwMTAwMDAxMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDEwMDEwMDAwMDAwMDAwMTAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTEwMDExMTExMTExMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMTAwMDAwMDEwMDAwMDAxMDEwMTEwMDAwMDAxMDAwMDAwMDAwMDEwMTAwMCcsXG5cdCAgICAgICAgZ3B1OiB3ZWJnbFByaW50aW5nLnJlbixcblx0ICAgICAgICAvLyBncHVJbWdzOiB7MDogLTE5MTQyODMwMTYsIDE6IDExNjIyOTg5MzMsIDI6IDE2OTkzMzQxNTUsIDM6IDEwMTU0NzAyMDYsIDQ6IC0xODQ1NzAyNDIyLCA1OiA5NTk5NTAyMTEsIDY6IC0xNTg2NzY5NjYzLCA3OiAtMjEwNzA1NTA3LCA4OiAxODQ1Mzc0MDA0LCA5OiAxMzcxNjgxNjMxLCAxMDogMjc4MjgxMjMxLCAxMTogLTkwNjQyMjI2MSwgMTI6IDY1NjUxNDIwOCwgMTM6IDE1ODIwODA5NjgsIDE0OiAtMTQ3Njc3NDgxMCwgMTU6IDE0OTk0ODk5MzUsIDE2OiAtNDU3ODY1ODE1LCAxNzogMTM0NTg5MjIzNiwgMTg6IC04NDMzNzY4NTAsIDE5OiAtMjAyMzY1MjI0MCwgMjA6IDMwMTQxMzEzNSwgMjE6IDE5MTc5NTgyMjgsIDIyOiAtMTU3MzcwNTU3NiwgMjM6IC03MzIyNjM4OTAsIDI0OiAtNzcxMDEyNjI1LCAyNTogLTQ2NjgzNjQwMiwgMjY6IC0xNTI1ODc2NzAzLCAyNzogLTE2MTYwNTQwNzl9XG5cdCAgICAgICAgLy8gZ3B1SW1nczogcGl4ZWxzLmhhc2hDb2RlMigpLFxuXHQgICAgICAgIGhhc2g6IHdlYmdsUHJpbnRpbmcuaGFzaCxcblx0ICAgICAgICBpbmM6IHdlYmdsUHJpbnRpbmcuaW5jLFxuXHQgICAgICAgIC8vIGxhbmdzRGV0ZWN0ZWQ6IHJlcXVpcmUoJy4vbGFuZ3VhZ2VEZXRlY3Rvci5qcycpLmdldF93cml0aW5nX3NjcmlwdHMoKSxcblx0ICAgICAgICBpc1N1cHBvcnRMUzogdXRpbFN0b3JlLnRlc3QoKSA/ICd0cnVlJyA6ICdmYWxzZScsXG5cdCAgICAgICAgcGx1Z2luczogdGhpcy5nZXRQbHVnaW5zUHJpbnRpbmcoKSxcblx0ICAgICAgICByZXNvbHV0aW9uOiB0aGlzLmdldFJlc29sdXRpb24oKSxcblx0ICAgICAgICB0aW1lem9uZTogLW5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDYwLFxuXHQgICAgICAgIGlzVG91Y2g6IHRoaXMuY2hlY2tJc1RvdWNoKCksXG5cdCAgICAgICAgbGFuZzogbmF2aWdhdG9yID8gbmF2aWdhdG9yLmxhbmd1YWdlIDogJycsXG5cdCAgICAgICAgdHJhY2tuaWNrOiBjb29raWVEYXRhLnRyYWNrbmljayB8fCBleHBhcmFtcy5wdV9pIHx8IF91c2VyX2lkIHx8IHVpZGFwbHVzXG5cdCAgICAgIH0pO1xuXHQgICAgICB2YXIgdmFsdWVzID0gW2NhbnZhc190ZXN0XTtcblx0ICAgICAgZm9yKHZhciBrIGluIHJlc3VsdCkge1xuXHQgICAgICAgIHJlc3VsdFtrXSAmJiB2YWx1ZXMucHVzaChyZXN1bHRba10pO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBfYWJmcGMgPSBDYW52YXMuY2FsY1NIQTEodmFsdWVzLmpvaW4oJ18nKSkgKyAnXycgKyB0aGlzLlZFUlNJT047XG5cdCAgICAgIHV0aWxTdG9yZS5zZXQodGhpcy5BQkZQQywgX2FiZnBjKTtcblx0ICAgICAgdGhpcy53cml0ZUNvb2tpZSh0aGlzLkFCRlBDLCBfYWJmcGMpO1xuXHRcblx0ICAgICAgcmV0dXJuIF9hYmZwYztcblx0ICAgIH0sXG5cdFxuXHQgICAgc3luY0NOQTogZnVuY3Rpb24gKF9hYmZwYywgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIF9mbiA9IHV0aWxEb20ubG9hZFNjcmlwdDtcblx0ICAgICAgLy8gdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcblx0ICAgICAgdmFyIGRvbWFpbiA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1yaG9zdC12Jyk7XG5cdCAgICAgIGRvbWFpbiA9IGFwbHVzVXRpbC5maXhEb21haW4oZG9tYWluKTtcblx0ICAgICAgaWYgKGRvbWFpbikge1xuXHQgICAgICAgIF9mbihkb21haW4gKycvcGJlLmpzP19hYmZwYz0nK19hYmZwYywgY2FsbGJhY2spOyAgXG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgc3luY0xTMkNvb2tpZTogZnVuY3Rpb24gKGtleSwgb3B0aW9ucykge1xuXHQgICAgICB2YXIgTFNWYWx1ZSA9IG9wdGlvbnMuTFNWYWx1ZTtcblx0ICAgICAgdmFyIGNvb2tpZVZhbHVlID0gb3B0aW9ucy5jb29raWVWYWx1ZTtcblx0XG5cdCAgICAgIGlmIChMU1ZhbHVlICYmIExTVmFsdWUgIT09IGNvb2tpZVZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZUNvb2tpZShrZXksIExTVmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChjb29raWVWYWx1ZSAmJiAhTFNWYWx1ZSkge1xuXHQgICAgICAgIHV0aWxTdG9yZS5zZXQoa2V5LCBjb29raWVWYWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgdXBkYXRlR2xvYmFsRGF0YTogZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5fYWJmcGMpIHtcblx0ICAgICAgICBwYXJhbXMuX2FiZnBjID0gcGFyYW1zLl9hYmZwYy5yZXBsYWNlKCdfJyArIHRoaXMuVkVSU0lPTiwgJycpO1xuXHQgICAgICB9XG5cdCAgICAgIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1nbG9iYWxkYXRhJywgcGFyYW1zKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBhYmZwY09iaiA9IF9zZWxmLnRyeUdldFN0b3JlVmFsdWUoX3NlbGYuQUJGUEMpO1xuXHQgICAgICB2YXIgY25hT2JqID0gX3NlbGYudHJ5R2V0U3RvcmVWYWx1ZShfc2VsZi5DTkEpO1xuXHRcblx0ICAgICAgX3NlbGYuc3luY0xTMkNvb2tpZSh0aGlzLkFCRlBDLCBhYmZwY09iaik7XG5cdCAgICAgIF9zZWxmLnN5bmNMUzJDb29raWUodGhpcy5DTkEsIGNuYU9iaik7XG5cdCAgICAgIFxuXHQgICAgICB2YXIgX2FiZnBjID0gYWJmcGNPYmouTFNWYWx1ZSB8fCBhYmZwY09iai5jb29raWVWYWx1ZTtcblx0ICAgICAgdmFyIGNuYSA9IGNuYU9iai5MU1ZhbHVlIHx8IGNuYU9iai5jb29raWVWYWx1ZTtcblx0XG5cdCAgICAgIGlmICghX2FiZnBjKSB7XG5cdCAgICAgICAgX2FiZnBjID0gX3NlbGYuZ2VuZXJhdGVGcCgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyDln4vngrnkuIrmiqXnmoRfYWJmcGPpnIDopoHnp7vpmaTniYjmnKzlj7dcblx0ICAgICAgX2FiZnBjID0gX2FiZnBjLnJlcGxhY2UoJ18nICsgX3NlbGYuVkVSU0lPTiwgJycpO1xuXHQgICAgICBpZiAoX2FiZnBjICYmIGFwbHVzICYmIGFwbHVzLmFwcGVuZE1ldGFJbmZvKSB7XG5cdCAgICAgICAgdmFyIHBhcmFtcyA9IHtcblx0ICAgICAgICAgIF9hYmZwYzogX2FiZnBjXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBpZiAoY25hKSB7XG5cdCAgICAgICAgICBwYXJhbXMuY25hID0gY25hO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBfc2VsZi51cGRhdGVHbG9iYWxEYXRhKHBhcmFtcyk7XG5cdCAgICAgIH1cblx0ICAgICAgdXRpbEV2ZW50Lm9uKHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfc2VsZi50cnlTeW5jRnAoKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmICghY25hKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0ICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG5cdCAgICAgICAgICAgICAgICBfc2VsZi5zeW5jQ05BKF9hYmZwYywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICB2YXIgX2NuYSA9IGdvbGRsb2cuY25hO1xuXHQgICAgICAgICAgICAgICAgICBpZiAoX2NuYSkge1xuXHQgICAgICAgICAgICAgICAgICAgIF9zZWxmLnVwZGF0ZUdsb2JhbERhdGEoe1xuXHQgICAgICAgICAgICAgICAgICAgICAgX2FiZnBjOiBfYWJmcGMsXG5cdCAgICAgICAgICAgICAgICAgICAgICBjbmE6IF9jbmFcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB1dGlsU3RvcmUuc2V0KF9zZWxmLkNOQSwgX2NuYSk7XG5cdCAgICAgICAgICAgICAgICAgICAgX3NlbGYud3JpdGVDb29raWUoX3NlbGYuQ05BLCBfY25hKTtcblx0ICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSwgMzAwKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBTZWN1cmUgSGFzaCBBbGdvcml0aG0sIFNIQS0xLCBhcyBkZWZpbmVkXG5cdCAqIGluIEZJUFMgUFVCIDE4MC0xXG5cdCAqIENvcHlyaWdodCAoQykgUGF1bCBKb2huc3RvbiAyMDAwLlxuXHQgKiBTZWUgaHR0cDovL3BhamhvbWUub3JnLnVrL3NpdGUvbGVnYWwuaHRtbCBmb3IgZGV0YWlscy5cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdFxuXHQvKlxuXHQgKiBDb252ZXJ0IGEgMzItYml0IG51bWJlciB0byBhIGhleCBzdHJpbmcgd2l0aCBtcy1ieXRlIGZpcnN0XG5cdCAqL1xuXHR2YXIgaGV4X2NociA9IFwiMDEyMzQ1Njc4OWFiY2RlZlwiO1xuXHRmdW5jdGlvbiBoZXgobnVtKVxuXHR7XG5cdCAgdmFyIHN0ciA9IFwiXCI7XG5cdCAgZm9yKHZhciBqID0gNzsgaiA+PSAwOyBqLS0pXG5cdCAgICBzdHIgKz0gaGV4X2Noci5jaGFyQXQoKG51bSA+PiAoaiAqIDQpKSAmIDB4MEYpO1xuXHQgIHJldHVybiBzdHI7XG5cdH1cblx0XG5cdC8qXG5cdCAqIENvbnZlcnQgYSBzdHJpbmcgdG8gYSBzZXF1ZW5jZSBvZiAxNi13b3JkIGJsb2Nrcywgc3RvcmVkIGFzIGFuIGFycmF5LlxuXHQgKiBBcHBlbmQgcGFkZGluZyBiaXRzIGFuZCB0aGUgbGVuZ3RoLCBhcyBkZXNjcmliZWQgaW4gdGhlIFNIQTEgc3RhbmRhcmQuXG5cdCAqL1xuXHRmdW5jdGlvbiBzdHIyYmxrc19TSEExKHN0cikge1xuXHQgIHZhciBuYmxrID0gKChzdHIubGVuZ3RoICsgOCkgPj4gNikgKyAxO1xuXHQgIHZhciBibGtzID0gbmV3IEFycmF5KG5ibGsgKiAxNik7XG5cdCAgZm9yKHZhciBqID0gMDsgaiA8IG5ibGsgKiAxNjsgaisrKSBibGtzW2pdID0gMDtcblx0XG5cdCAgdmFyIGk7XG5cdCAgZm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuXHQgICAgYmxrc1tpID4+IDJdIHw9IHN0ci5jaGFyQ29kZUF0KGkpIDw8ICgyNCAtIChpICUgNCkgKiA4KTtcblx0ICB9XG5cdCAgYmxrc1tpID4+IDJdIHw9IDB4ODAgPDwgKDI0IC0gKGkgJSA0KSAqIDgpO1xuXHQgIGJsa3NbbmJsayAqIDE2IC0gMV0gPSBzdHIubGVuZ3RoICogODtcblx0ICByZXR1cm4gYmxrcztcblx0fVxuXHRcblx0Lypcblx0ICogQWRkIGludGVnZXJzLCB3cmFwcGluZyBhdCAyXjMyLiBUaGlzIHVzZXMgMTYtYml0IG9wZXJhdGlvbnMgaW50ZXJuYWxseSBcblx0ICogdG8gd29yayBhcm91bmQgYnVncyBpbiBzb21lIEpTIGludGVycHJldGVycy5cblx0ICovXG5cdGZ1bmN0aW9uIGFkZCh4LCB5KVxuXHR7XG5cdCAgdmFyIGxzdyA9ICh4ICYgMHhGRkZGKSArICh5ICYgMHhGRkZGKTtcblx0ICB2YXIgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7XG5cdCAgcmV0dXJuIChtc3cgPDwgMTYpIHwgKGxzdyAmIDB4RkZGRik7XG5cdH1cblx0XG5cdC8qXG5cdCAqIEJpdHdpc2Ugcm90YXRlIGEgMzItYml0IG51bWJlciB0byB0aGUgbGVmdFxuXHQgKi9cblx0ZnVuY3Rpb24gcm9sKG51bSwgY250KVxuXHR7XG5cdCAgcmV0dXJuIChudW0gPDwgY250KSB8IChudW0gPj4+ICgzMiAtIGNudCkpO1xuXHR9XG5cdFxuXHQvKlxuXHQgKiBQZXJmb3JtIHRoZSBhcHByb3ByaWF0ZSB0cmlwbGV0IGNvbWJpbmF0aW9uIGZ1bmN0aW9uIGZvciB0aGUgY3VycmVudFxuXHQgKiBpdGVyYXRpb25cblx0ICovXG5cdGZ1bmN0aW9uIGZ0KHQsIGIsIGMsIGQpXG5cdHtcblx0ICBpZih0IDwgMjApIHJldHVybiAoYiAmIGMpIHwgKCh+YikgJiBkKTtcblx0ICBpZih0IDwgNDApIHJldHVybiBiIF4gYyBeIGQ7XG5cdCAgaWYodCA8IDYwKSByZXR1cm4gKGIgJiBjKSB8IChiICYgZCkgfCAoYyAmIGQpO1xuXHQgIHJldHVybiBiIF4gYyBeIGQ7XG5cdH1cblx0XG5cdC8qXG5cdCAqIERldGVybWluZSB0aGUgYXBwcm9wcmlhdGUgYWRkaXRpdmUgY29uc3RhbnQgZm9yIHRoZSBjdXJyZW50IGl0ZXJhdGlvblxuXHQgKi9cblx0ZnVuY3Rpb24ga3QodCkge1xuXHQgIHJldHVybiAodCA8IDIwKSA/ICAxNTE4NTAwMjQ5IDogKHQgPCA0MCkgPyAgMTg1OTc3NTM5MyA6ICh0IDwgNjApID8gLTE4OTQwMDc1ODggOiAtODk5NDk3NTE0O1xuXHR9XG5cdFxuXHR2YXIgQmFzZTY0RW5jb2RlVXJsU2FmZSA9IGZ1bmN0aW9uKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZSgvXFwrL2csICctJykucmVwbGFjZSgvXFwvL2csICdfJykucmVwbGFjZSgvXFw9KyQvLCAnJyk7XG5cdH07XG5cdFxuXHQvKlxuXHQgKiBUYWtlIGEgc3RyaW5nIGFuZCByZXR1cm4gdGhlIGhleCByZXByZXNlbnRhdGlvbiBvZiBpdHMgU0hBLTEuXG5cdCAqL1xuXHRmdW5jdGlvbiBjYWxjU0hBMShzdHIpXG5cdHtcblx0ICB2YXIgeCA9IHN0cjJibGtzX1NIQTEoc3RyKTtcblx0ICAvLyBjb25zb2xlLmxvZygneCA9ICcsIHgpO1xuXHRcblx0ICB2YXIgdyA9IG5ldyBBcnJheSg4MCk7XG5cdFxuXHQgIHZhciBhID0gIDE3MzI1ODQxOTM7XG5cdCAgdmFyIGIgPSAtMjcxNzMzODc5O1xuXHQgIHZhciBjID0gLTE3MzI1ODQxOTQ7XG5cdCAgdmFyIGQgPSAgMjcxNzMzODc4O1xuXHQgIHZhciBlID0gLTEwMDk1ODk3NzY7XG5cdFxuXHQgIGZvcih2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSArPSAxNilcblx0ICB7XG5cdCAgICB2YXIgb2xkYSA9IGE7XG5cdCAgICB2YXIgb2xkYiA9IGI7XG5cdCAgICB2YXIgb2xkYyA9IGM7XG5cdCAgICB2YXIgb2xkZCA9IGQ7XG5cdCAgICB2YXIgb2xkZSA9IGU7XG5cdFxuXHQgICAgZm9yKHZhciBqID0gMDsgaiA8IDgwOyBqKyspXG5cdCAgICB7XG5cdCAgICAgIGlmKGogPCAxNikgd1tqXSA9IHhbaSArIGpdO1xuXHQgICAgICBlbHNlIHdbal0gPSByb2wod1tqLTNdIF4gd1tqLThdIF4gd1tqLTE0XSBeIHdbai0xNl0sIDEpO1xuXHQgICAgICB2YXIgdCA9IGFkZChhZGQocm9sKGEsIDUpLCBmdChqLCBiLCBjLCBkKSksIGFkZChhZGQoZSwgd1tqXSksIGt0KGopKSk7XG5cdCAgICAgIGUgPSBkO1xuXHQgICAgICBkID0gYztcblx0ICAgICAgYyA9IHJvbChiLCAzMCk7XG5cdCAgICAgIGIgPSBhO1xuXHQgICAgICBhID0gdDtcblx0ICAgIH1cblx0XG5cdCAgICBhID0gYWRkKGEsIG9sZGEpO1xuXHQgICAgYiA9IGFkZChiLCBvbGRiKTtcblx0ICAgIGMgPSBhZGQoYywgb2xkYyk7XG5cdCAgICBkID0gYWRkKGQsIG9sZGQpO1xuXHQgICAgZSA9IGFkZChlLCBvbGRlKTtcblx0ICB9XG5cdCAgcmV0dXJuIEJhc2U2NEVuY29kZVVybFNhZmUoaGV4KGEpICsgaGV4KGIpICsgaGV4KGMpICsgaGV4KGQpICsgaGV4KGUpKTtcblx0fVxuXHRcblx0dmFyIENhbnZhc1Rlc3QgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgY2FudmFzRGF0YSA9IFwiTm90IHN1cHBvcnRlZFwiO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cdCAgICAvLyBjYW52YXMgPSAkKFwiPGNhbnZhcyBoZWlnaHQ9JzYwJyB3aWR0aD0nNDAwJz48L2NhbnZhcz5cIilbMF07XG5cdCAgICB2YXIgY2FudmFzQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cdCAgICBjYW52YXMuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7XG5cdCAgICBjYW52YXNDb250ZXh0LnRleHRCYXNlbGluZSA9IFwiYWxwaGFiZXRpY1wiO1xuXHQgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBcIiNmNjBcIjtcblx0ICAgIGNhbnZhc0NvbnRleHQuZmlsbFJlY3QoMTI1LCAxLCA2MiwgMjApO1xuXHQgICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBcIiMwNjlcIjtcblx0ICAgIGNhbnZhc0NvbnRleHQuZm9udCA9IFwiMTFwdCBuby1yZWFsLWZvbnQtMTIzXCI7XG5cdCAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KFwiQ3dtIGZqb3JkYmFuayBnbHlwaHMgdmV4dCBxdWl6LCBcXHVkODNkXFx1ZGUwM1wiLCAyLCAxNSk7XG5cdCAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IFwicmdiYSgxMDIsIDIwNCwgMCwgMC43KVwiO1xuXHQgICAgY2FudmFzQ29udGV4dC5mb250ID0gXCIxOHB0IEFyaWFsXCI7XG5cdCAgICBjYW52YXNDb250ZXh0LmZpbGxUZXh0KFwiQ3dtIGZqb3JkYmFuayBnbHlwaHMgdmV4dCBxdWl6LCBcXHVkODNkXFx1ZGUwM1wiLCA0LCA0NSk7XG5cdCAgICBjYW52YXNEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIC8vIGNvbnNvbGUubG9nKCdjYW52YXMgZXJyb3JJbmZvID0gJywgZSk7XG5cdCAgfVxuXHQgIHJldHVybiBjYW52YXNEYXRhO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jYWxjU0hBMSA9IGNhbGNTSEExO1xuXHRcblx0Ly8gdmFyIGN2c190ZXN0O1xuXHRleHBvcnRzLmdldENhbnZhc0hhc2ggPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGN2c190ZXN0O1xuXHQgIGlmICghY3ZzX3Rlc3QpIHtcblx0ICAgIGN2c190ZXN0ID0gQ2FudmFzVGVzdCgpO1xuXHQgIH1cblx0ICB2YXIgX3NoYTEgPSBjYWxjU0hBMShjdnNfdGVzdCk7XG5cdCAgcmV0dXJuIEJhc2U2NEVuY29kZVVybFNhZmUoX3NoYTEpOyAvL3JlbW92ZSB0aGUgbGVhZGluZyB3b3JkcyAgXG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuXHQgKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuXHQgICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXHRcblx0ICAgICAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgICAgIHZhciBxdWUgPSBjb250ZXh0W0FQTFVTX1FVRVVFXSB8fCBbXTtcblx0ICAgICAgdmFyIHJzID0gYWN0aW9uLmdldEZvcm1hdFF1ZXVlKHF1ZSwgJ21ldGFRdWV1ZScpO1xuXHQgICAgICBjb250ZXh0W0FQTFVTX1FVRVVFXSA9IHJzLnF1ZXVlO1xuXHQgICAgICBhY3Rpb24ucHJvY2Vzc0dvbGRsb2dRdWV1ZShycy5mb3JtYXRRdWV1ZSwgdGhpcy5vcHRpb25zLmNvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDEzMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge0FycmF5fSBRVUVVRVxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcblx0ICogfVxuXHQgKi9cblx0dmFyIHByb2Nlc3NHb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoUVVFVUUsIG9wdHMpIHtcblx0ICBmdW5jdGlvbiBmKCkge1xuXHQgICAgaWYgKCFRVUVVRSB8fCAhdXRpbEFycmF5LmlzQXJyYXkoUVVFVUUpIHx8ICFRVUVVRS5sZW5ndGgpIHJldHVybjtcblx0ICAgIC8vIOaOkuW6j1xuXHQgICAgdmFyIHF1ZSA9IGdldEZvcm1hdFF1ZXVlKFFVRVVFKS5xdWV1ZTtcblx0ICAgIHZhciB0YXNrID0ge307XG5cdCAgICB2YXIgZGVsYXlUYXNrcyA9IFtdO1xuXHQgICAgd2hpbGUgKHRhc2sgPSBxdWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuXHQgICAgICBwcm9jZXNzVGFzayh0YXNrLCBvcHRzLCBmdW5jdGlvbiAodCkge1xuXHQgICAgICAgIGRlbGF5VGFza3MucHVzaCh0KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBpZiAoZGVsYXlUYXNrcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHdoaWxlICh0YXNrID0gZGVsYXlUYXNrcy5zaGlmdCgpKSB7XG5cdCAgICAgICAgICBwcm9jZXNzVGFzayh0YXNrLCBvcHRzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIDEwMCk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICB0cnkge1xuXHQgICAgZigpO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoZSk7XG5cdCAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAvLyAgIG1zZzogZVxuXHQgICAgLy8gfSk7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLnByb2Nlc3NHb2xkbG9nUXVldWUgPSBwcm9jZXNzR29sZGxvZ1F1ZXVlO1xuXHRcblx0ZnVuY3Rpb24gZ2V0TWV0YUluZm8oKSB7XG5cdCAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvOyAvLyB8fCBtZXRhSW5mby5nZXRJbmZvKCk7XG5cdCAgcmV0dXJuIG1ldGFfaW5mbztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0QXBsdXNIb2xkVHlwZSAoKSB7XG5cdCAgdmFyIG1ldGFfaW5mbyA9IGdldE1ldGFJbmZvKCkgfHwge307XG5cdCAgdmFyIHVhaWQgPSBtZXRhX2luZm8udWFpZCArICcnO1xuXHQgIGlmICh1YWlkID09PSAnMScgJiYgIW1ldGFfaW5mby5fYW5vbnlfaWQpIHtcblx0ICAgIHJldHVybiAnQkxPQ0snO1xuXHQgIH1cblx0ICByZXR1cm4gbWV0YV9pbmZvWydfaG9sZCddIHx8IG1ldGFfaW5mb1snYXBsdXMtd2FpdGluZyddO1xuXHR9XG5cdFxuXHR2YXIgQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUgPSBbXTtcblx0dmFyIEFQTFVTX0hPTERfQU5PTllfUVVFVUUgPSBbXTtcblx0dmFyIEFQTFVTX0hPTERfUVVFVUUgPSBbXTtcblx0XG5cdGZ1bmN0aW9uIGZpbHRlclRhc2sgKHRhc2spIHtcblx0ICB2YXIgaG9sZFR5cGUgPSBnZXRBcGx1c0hvbGRUeXBlKCk7XG5cdCAgLy8gY29uc29sZS5sb2coJ2hvbGRUeXBlID09PSAnLCBob2xkVHlwZSk7XG5cdCAgdmFyIG1ldGFfaW5mbyA9IGdldE1ldGFJbmZvKCkgfHwge307XG5cdCAgdmFyIGZsYWcgPSB0cnVlO1xuXHRcblx0ICAvLyAwOiBcIl9ob2xkXCJcblx0ICAvLyAxOiBcIlNUQVJUXCJcblx0ICB2YXIgYXJncyA9IHRhc2suYXJndW1lbnRzIHx8IFtdO1xuXHQgIHZhciBtZXRhS2V5ID0gYXJnc1swXTtcblx0ICB2YXIgbWV0YVZhbHVlID0gYXJnc1sxXTtcblx0ICB2YXIgU1RBUlQgPSAnU1RBUlQnO1xuXHQgIGlmIChtZXRhS2V5ID09PSAnX2hvbGQnICYmIG1ldGFWYWx1ZSA9PT0gU1RBUlQpIHtcblx0ICAgIHJldHVybiBTVEFSVDtcblx0ICB9XG5cdCAgaWYgKG1ldGFLZXkgPT09ICdfYW5vbnlfaWQnICYmIG1ldGFWYWx1ZSkge1xuXHQgICAgcmV0dXJuIFNUQVJUO1xuXHQgIH1cblx0ICBpZiAodGFzayAmJiAvc2VuZFBWfHJlY29yZHxzZXRQYWdlU1BNfHNldE1ldGFJbmZvfGFwcGVuZE1ldGFJbmZvJC8udGVzdCh0YXNrLmFjdGlvbikpIHtcblx0ICAgIHN3aXRjaCAoaG9sZFR5cGUpIHtcblx0ICAgIGNhc2UgJ0JMT0NLJzpcblx0ICAgICAgaWYgKCFtZXRhX2luZm9baG9sZFR5cGVdKSB7XG5cdCAgICAgICAgQVBMVVNfSE9MRF9RVUVVRS5wdXNoKHRhc2spO1xuXHQgICAgICAgIGZsYWcgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICBicmVhaztcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmxhZztcblx0fVxuXHRcblx0XG5cdC8vIHZhciBwcm9jZXNzZWQgPSBmYWxzZTtcblx0ZnVuY3Rpb24gcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUgKG9wdHMpIHtcblx0ICAvLyBpZiAoIXByb2Nlc3NlZCkge1xuXHQgIC8vICAgcHJvY2Vzc2VkID0gdHJ1ZTtcblx0ICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcblx0ICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfQU5PTllfUVVFVUUsIG9wdHMpO1xuXHQgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9RVUVVRSwgb3B0cyk7ICBcblx0ICAvLyB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IHF1ZXVlTmFtZTogYXBsdXNfcXVldWUgfHwgZ29sZGxvZ19xdWV1ZVxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcblx0ICogfVxuXHQgKi9cblx0ZXhwb3J0cy5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUgPSBmdW5jdGlvbiAocXVldWVOYW1lLCBvcHRzKSB7XG5cdCAgdmFyIHF1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKHF1ZXVlTmFtZSk7XG5cdCAgcXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5TRVRfTUVUQV9JTkZPLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICBpZiAoa2V5ID09PSBhcGx1c1N0YXRpYy5fVVNFUl9JRCAmJiB2YWx1ZSkge1xuXHQgICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUsIG9wdHMpO1xuXHQgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuX0FOT05ZX0lEICYmIHZhbHVlKSB7XG5cdCAgICAgICAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcblx0ICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdfaG9sZCcgJiYgdmFsdWUgPT09ICdTVEFSVCcpIHtcblx0ICAgICAgICBwcm9jZXNzSG9sZEdvbGRsb2dRdWV1ZShvcHRzKTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGdldE1ldGhvZE5hbWUgKGtleSwgaXNPcGVuQXBpKSB7XG5cdCAgaWYgKGlzT3BlbkFwaSAmJiBhcGx1c1N0YXRpYy5vcGVuQVBJcy5pbmRleE9mKGtleSkgPiAtMSkge1xuXHQgICAga2V5ID0gJ18nICsga2V5O1xuXHQgIH1cblx0ICByZXR1cm4ga2V5O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7T2JqZWN0fSB0YXNrXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG5cdCAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuXHQgKiB9XG5cdCAqL1xuXHR2YXIgcHJvY2Vzc1Rhc2sgPSBmdW5jdGlvbih0YXNrLCBvcHRzLCBjYWxsYmFjaykge1xuXHQgIHZhciBpc09wZW5BcGkgPSAhIW9wdHMuaXNPcGVuQXBpO1xuXHQgIHZhciBhY3Rpb24gPSB0YXNrID8gdGFzay5hY3Rpb24gOiAnJztcblx0ICB2YXIgYXJncyA9IHRhc2sgPyB0YXNrLmFyZ3VtZW50cyA6ICcnO1xuXHRcblx0ICB2YXIgcmVzdWx0ID0gZmlsdGVyVGFzayh0YXNrKTtcblx0ICBpZiAoIXJlc3VsdCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgY29udGV4dCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB0cnkgeyAvLyDnoa7kv53mn5DkuKrku7vliqHmiafooYzlpLHotKXkuI3kvJrlvbHlk43lhbblroPku7vliqFcblx0ICAgIGlmIChhY3Rpb24gJiYgYXJncyAmJiB1dGlsQXJyYXkuaXNBcnJheShhcmdzKSkge1xuXHQgICAgICB2YXIgYSA9IGFjdGlvbi5zcGxpdCgnLicpO1xuXHQgICAgICB2YXIgb2JqID0gY29udGV4dDtcblx0ICAgICAgdmFyIF9mbiA9IGNvbnRleHQ7XG5cdCAgICAgIHZhciBtZXRob2ROYW1lO1xuXHQgICAgICBpZiAoYS5sZW5ndGggPT09IDMpIHtcblx0ICAgICAgICBvYmogPSBjb250ZXh0W2FbMF1dW2FbMV1dIHx8IHt9O1xuXHQgICAgICAgIG1ldGhvZE5hbWUgPSBnZXRNZXRob2ROYW1lKGFbMl0sIGlzT3BlbkFwaSk7XG5cdCAgICAgICAgX2ZuID0gb2JqW21ldGhvZE5hbWVdID8gb2JqW21ldGhvZE5hbWVdIDogJyc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgd2hpbGUgKGEubGVuZ3RoKSB7XG5cdCAgICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhLnNoaWZ0KCksIGlzT3BlbkFwaSk7XG5cdCAgICAgICAgICBfZm4gPSBvYmogPSBvYmpbbWV0aG9kTmFtZV07XG5cdCAgICAgICAgICBpZiAoIW9iaikgeyAvLyDpnZ7ms5UgYWN0aW9uXG5cdCAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuXHQgICAgICAgICAgICAgIGNhbGxiYWNrKHRhc2spO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGlzRnVuY3Rpb24oX2ZuKSkge1xuXHQgICAgICAgIF9mbi5hcHBseShvYmosIGFyZ3MpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChyZXN1bHQgPT09ICdTVEFSVCcpIHtcblx0ICAgICAgICBwcm9jZXNzSG9sZEdvbGRsb2dRdWV1ZShvcHRzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoZSk7XG5cdCAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAvLyAgIG1zZzogZVxuXHQgICAgLy8gfSk7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLnByb2Nlc3NUYXNrID0gcHJvY2Vzc1Rhc2s7XG5cdFxuXHR2YXIgZ2V0Rm9ybWF0UXVldWUgPSBmdW5jdGlvbiAocXVldWUsIHR5cGUpIHtcblx0ICB2YXIgcXVldWVNYXAgPSB7XG5cdCAgICBzdWJzY3JpYmVNd0NoYW5nZVF1ZXVlOiBbXSxcblx0ICAgIHN1YnNjcmliZU1ldGFRdWV1ZTogW10sXG5cdCAgICBzdWJzY3JpYmVRdWV1ZTogW10sXG5cdCAgICBtZXRhUXVldWU6IFtdLFxuXHQgICAgb3RoZXJzUXVldWU6IFtdXG5cdCAgfTtcblx0XG5cdCAgdmFyIHEgPSBbXTtcblx0ICB2YXIgdGFzayA9IHt9O1xuXHQgIHdoaWxlICh0YXNrID0gcXVldWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIGFjID0gdGFzay5hY3Rpb247XG5cdCAgICAgIHZhciBrZXkgPSB0YXNrLmFyZ3VtZW50c1swXTtcblx0ICAgICAgaWYgKC9zdWJzY3JpYmUvLnRlc3QoYWMpKSB7XG5cdCAgICAgICAgaWYgKGtleSA9PT0gJ3NldE1ldGFJbmZvJykge1xuXHQgICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlTWV0YVF1ZXVlLnB1c2godGFzayk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLk1XX0NIQU5HRV9QViB8fCBrZXkgPT09IGFwbHVzU3RhdGljLk1XX0NIQU5HRV9ISkxKKSB7XG5cdCAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLnB1c2godGFzayk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZVF1ZXVlLnB1c2godGFzayk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKC9NZXRhSW5mby8udGVzdChhYykpIHtcblx0ICAgICAgICBxdWV1ZU1hcC5tZXRhUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZU1hcC5vdGhlcnNRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHVsb2coKS53KGUpO1xuXHQgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgIC8vICAgbXNnOiBlXG5cdCAgICAgIC8vIH0pO1xuXHQgICAgICBxdWV1ZU1hcC5vdGhlcnNRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgZm9ybWF0UXVldWU7XG5cdCAgaWYgKHR5cGUgJiYgcXVldWVNYXBbdHlwZV0pIHtcblx0ICAgIGZvcm1hdFF1ZXVlID0gcXVldWVNYXBbdHlwZV07XG5cdCAgICBxdWV1ZU1hcFt0eXBlXSA9IFtdO1xuXHQgIH1cblx0ICBxID0gcXVldWVNYXAuc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZS5jb25jYXQocXVldWVNYXAubWV0YVF1ZXVlKTtcblx0ICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlUXVldWUpO1xuXHQgIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUsIHF1ZXVlTWFwLm90aGVyc1F1ZXVlKTtcblx0ICByZXR1cm4ge1xuXHQgICAgcXVldWU6IHEsXG5cdCAgICBmb3JtYXRRdWV1ZTogZm9ybWF0UXVldWVcblx0ICB9O1xuXHR9O1xuXHRleHBvcnRzLmdldEZvcm1hdFF1ZXVlID0gZ2V0Rm9ybWF0UXVldWU7XG5cblxuLyoqKi8gfSksXG4vKiAxMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBBdG1CcmlkZ2UuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdFxuXHRcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0ZnVuY3Rpb24gaW5pdEpTQnJpZGdlKHdpbikge1xuXHQgIHZhciBQcm9taXNlID0gd2luLlByb21pc2U7IC8v5L2c55So5piv5ZWl77yfXG5cdCAgdmFyIGRvYyA9IHdpbi5kb2N1bWVudDtcblx0ICB2YXIgdWEgPSB3aW4ubmF2aWdhdG9yLnVzZXJBZ2VudDtcblx0ICB2YXIgaXNXaW4gPSAoL1dpbmRvd3NcXHNQaG9uZVxccyg/Ok9TXFxzKT9bXFxkXFwuXSsvaSkudGVzdCh1YSkgfHwgKC9XaW5kb3dzXFxzTlRcXHNbXFxkXFwuXSsvaSkudGVzdCh1YSk7XG5cdCAgdmFyIGlzSU9TID0gKC9pUGhvbmV8aVBhZHxpUG9kL2kpLnRlc3QodWEpO1xuXHQgIHZhciBpc0FuZHJvaWQgPSAoL0FuZHJvaWQvaSkudGVzdCh1YSk7XG5cdCAgdmFyIHNpZEJhc2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMSA8PCAxNikpOyAvL3NpZCDnmoTkvZznlKjmmK/llaXvvJ9cblx0ICB2YXIgaW5jID0gMTtcblx0ICB2YXIgaWZyYW1lUG9vbCA9IFtdO1xuXHQgIHZhciBpZnJhbWVMaW1pdCA9IDM7XG5cdFxuXHQgIHZhciBJRlJBTUVfUFJFRklYID0gJ2lmcmFtZV8nO1xuXHQgIHZhciBQQVJBTV9QUkVGSVggPSAncGFyYW1fJztcblx0XG5cdCAgdmFyIENBTExfR0NfVElNRSA9IDYwICogMTAwMCAqIDEwO1xuXHQgIHZhciBQQVJBTV9HQ19USU1FID0gNjAgKiAxMDAwO1xuXHRcblx0ICB2YXIgSlNCcmlkZ2VfQ29yZSA9IHtcblx0ICAgIHRyYWNlOiBmdW5jdGlvbihuYW1lLCBwYXJhbXMsIHN1Y2Nlc3NDYWxsLCBmYWlsQ2FsbCwgdGltZW91dCkge1xuXHQgICAgICByZXR1cm4gSlNCcmlkZ2VfQ29yZS5jYWxsKG5hbWUsIHBhcmFtcywgc3VjY2Vzc0NhbGwsIGZhaWxDYWxsLCB0aW1lb3V0KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgY2FsbDogZnVuY3Rpb24obWV0aG9kLCBwYXJhbXMsIHN1Y2Nlc3MsIGZhaWx1cmUsIHRpbWVvdXQpIHtcblx0ICAgICAgdmFyIHNpZCwgcHJvbWlzZTtcblx0ICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgIHRpbWVvdXQgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIHN1Y2Nlc3MgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBzdWNjZXNzID0gbnVsbDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKFByb21pc2UgJiYgIXN1Y2Nlc3MgJiYgIWZhaWx1cmUpIHtcblx0ICAgICAgICBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICBzdWNjZXNzID0gcmVzb2x2ZTtcblx0ICAgICAgICAgIGZhaWx1cmUgPSByZWplY3Q7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHNpZCA9IEpTQnJpZGdlX1ByaXZhdGUuZ2V0U2lkKCk7XG5cdCAgICAgIHZhciBjYWxsSW5mbyA9IHtcblx0ICAgICAgICBzdWNjZXNzOiBzdWNjZXNzLFxuXHQgICAgICAgIGZhaWx1cmU6IGZhaWx1cmVcblx0ICAgICAgfTtcblx0ICAgICAgaWYgKHRpbWVvdXQgPiAwKXtcblx0ICAgICAgICBjYWxsSW5mby50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgSlNCcmlkZ2VfQ29yZS5vbkZhaWx1cmUoc2lkLCB7cmV0OiBcIkhZX1RJTUVPVVRcIn0pO1xuXHQgICAgICAgIH0sIHRpbWVvdXQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBKU0JyaWRnZV9Qcml2YXRlLnJlZ2lzdGVyQ2FsbChzaWQsIGNhbGxJbmZvKTtcblx0ICAgICAgSlNCcmlkZ2VfUHJpdmF0ZS5yZWdpc3RlckdDKHNpZCwgdGltZW91dCk7XG5cdFxuXHQgICAgICBKU0JyaWRnZV9Qcml2YXRlLmV2b2tlTmF0aXZlKG1ldGhvZCwgcGFyYW1zLCBzaWQpO1xuXHRcblx0ICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICB9LFxuXHQgICAgLy8g6ZyA6KaBbmF0aXZl56uv6YCa55+lanPnmoTml7blgJnvvIjpgJrkv6HvvInvvIznlKjop6blj5Hkuovku7bnmoTmlrnlvI/ov5vooYxcblx0ICAgIGZpcmVFdmVudDogZnVuY3Rpb24oZXZlbnRuYW1lLCBldmVudGRhdGEpIHtcblx0ICAgICAgdmFyIGV2ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ0hUTUxFdmVudHMnKTtcblx0ICAgICAgZXYuaW5pdEV2ZW50KGV2ZW50bmFtZSwgZmFsc2UsIHRydWUpO1xuXHQgICAgICBldi5wYXJhbSA9IEpTQnJpZGdlX1ByaXZhdGUucGFyc2VEYXRhKGV2ZW50ZGF0YSk7XG5cdFxuXHQgICAgICBkb2MuZGlzcGF0Y2hFdmVudChldik7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFBhcmFtOiBmdW5jdGlvbihzaWQpIHtcblx0ICAgICAgcmV0dXJuIEpTQnJpZGdlX1ByaXZhdGUuZ2V0UGFyYW0oc2lkKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZmluZDogZnVuY3Rpb24gKHJlcUlkLCBrZWVwQWxpdmUpIHtcblx0ICAgICAgaWYgKCFrZWVwQWxpdmUpIHtcblx0ICAgICAgICBKU0JyaWRnZV9Qcml2YXRlLnVucmVnaXN0ZXJDYWxsKHJlcUlkLCBmYWxzZSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgb25TdWNjZXNzOiBmdW5jdGlvbihzaWQsIGRhdGEsIGtlZXBBbGl2ZSkge1xuXHQgICAgICAvLyBuYXRpdmXku6PnoIHlpITnkIbmiJDlip/lkI7vvIzosIPnlKjor6Xmlrnms5XmnaXpgJrnn6Vqc1xuXHQgICAgICBKU0JyaWRnZV9Qcml2YXRlLm9uQ29tcGxldGUoc2lkLCBkYXRhLCAnc3VjY2VzcycsIGtlZXBBbGl2ZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIG9uRmFpbHVyZTogZnVuY3Rpb24oc2lkLCBkYXRhKSB7XG5cdCAgICAgIC8vIG5hdGl2ZeS7o+eggeWkhOeQhuWksei0peWQju+8jOiwg+eUqOivpeaWueazleadpemAmuefpWpzXG5cdCAgICAgIEpTQnJpZGdlX1ByaXZhdGUub25Db21wbGV0ZShzaWQsIGRhdGEsICdmYWlsdXJlJyk7XG5cdCAgICB9XG5cdFxuXHQgIH07XG5cdFxuXHQgIHZhciBKU0JyaWRnZV9Qcml2YXRlID0ge1xuXHQgICAgcGFyYW1zOiB7fSxcblx0ICAgIGNhbGxzOiB7fSxcblx0XG5cdCAgICBnZXRTaWQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAvLyBpT1MgMTAuMyDlkI7nq6/lj6PkuI3og73otoXov4cgNjU1MzYuXG5cdCAgICAgIHJldHVybiAoKHNpZEJhc2UgKyBpbmMrKykgJSA2NTUzNikgKyAnJztcblx0ICAgIH0sXG5cdFxuXHQgICAgYnVpbGRQYXJhbTogZnVuY3Rpb24ob2JqKSB7XG5cdCAgICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gb2JqIHx8ICcnO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFBhcmFtOiBmdW5jdGlvbihzaWQpIHtcblx0ICAgICAgLy8g5Zug5Li6aW9z5LiLaWZyYW1l5Y2P6K6u77yM5a+55LqOdXJs6ZW/5bqm5pyJ6ZmQ5Yi277yM5omA5Lul5aKe5Yqg5LiA5Liq5Y+C5pWw55qEbWFw44CCXG5cdCAgICAgIHJldHVybiB0aGlzLnBhcmFtc1tQQVJBTV9QUkVGSVggKyBzaWRdIHx8ICcnO1xuXHQgICAgfSxcblx0XG5cdCAgICBzZXRQYXJhbTogZnVuY3Rpb24oc2lkLCBwYXJhbXMpIHtcblx0ICAgICAgdGhpcy5wYXJhbXNbUEFSQU1fUFJFRklYICsgc2lkXSA9IHBhcmFtcztcblx0ICAgIH0sXG5cdFxuXHQgICAgcGFyc2VEYXRhOiBmdW5jdGlvbihzdHIpIHtcblx0ICAgICAgdmFyIHJzdDtcblx0ICAgICAgaWYgKHN0ciAmJiB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByc3QgPSBKU09OLnBhcnNlKHN0cik7XG5cdCAgICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgICByc3QgPSB7cmV0OidIWV9SRVNVTFRfUEFSU0VfRVJST1InLCBvcmlnaW5WYWx1ZTogc3RyfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcnN0ID0gc3RyIHx8IHt9O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gcnN0O1xuXHQgICAgfSxcblx0XG5cdCAgICByZWdpc3RlckNhbGw6IGZ1bmN0aW9uKHNpZCwgY2FsbEluZm8pIHtcblx0ICAgICAgdGhpcy5jYWxsc1tzaWRdID0gY2FsbEluZm87XG5cdCAgICB9LFxuXHRcblx0ICAgIHVucmVnaXN0ZXJDYWxsOiBmdW5jdGlvbihzaWQsIGtlZXBBbGl2ZSkge1xuXHQgICAgICB2YXIgY2FsbEluZm8gPSB0aGlzLmNhbGxzW3NpZF0gfHwge307XG5cdFxuXHQgICAgICB2YXIgdGltZW91dCA9IGNhbGxJbmZvLnRpbWVvdXQ7XG5cdCAgICAgIGlmICh0aW1lb3V0KSB7XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIWtlZXBBbGl2ZSkge1xuXHQgICAgICAgIGRlbGV0ZSB0aGlzLmNhbGxzW3NpZF07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBjYWxsSW5mbztcblx0ICAgIH0sXG5cdFxuXHQgICAgdXNlSWZyYW1lOiBmdW5jdGlvbihzaWQsIHVybCkge1xuXHQgICAgICB2YXIgaWZyYW1laWQgPSBJRlJBTUVfUFJFRklYICsgc2lkO1xuXHQgICAgICB2YXIgaWZyYW1lID0gaWZyYW1lUG9vbC5wb3AoKTtcblx0XG5cdCAgICAgIGlmICghaWZyYW1lKSB7XG5cdCAgICAgICAgaWZyYW1lID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXHQgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2ZyYW1lYm9yZGVyJywgJzAnKTtcblx0ICAgICAgICBpZnJhbWUuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDowO2hlaWdodDowO2JvcmRlcjowO2Rpc3BsYXk6bm9uZTsnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdpZCcsIGlmcmFtZWlkKTtcblx0ICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcblx0XG5cdCAgICAgIGlmICghaWZyYW1lLnBhcmVudE5vZGUpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblx0ICAgICAgICB9LDUpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJldHJpZXZlSWZyYW1lIDogZnVuY3Rpb24oc2lkKSB7XG5cdCAgICAgIHZhciBpZnJhbWVpZCA9IElGUkFNRV9QUkVGSVggKyBzaWQ7XG5cdCAgICAgIHZhciBpZnJhbWUgPSBkb2MucXVlcnlTZWxlY3RvcignIycgKyBpZnJhbWVpZCk7XG5cdFxuXHQgICAgICBpZiAoaWZyYW1lKSB7XG5cdCAgICAgICAgaWYgKGlmcmFtZVBvb2wubGVuZ3RoID49IGlmcmFtZUxpbWl0KSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBkb2MuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAvLyDmnInml7YgaWZyYW1lIOeahCBwYXJlbnQg5bm25LiN5pivIGJvZHnvvIzmiJbogIXnirbmgIHkuI3mraPnoa7vvIzkvJrlr7zoh7TmipvlvILluLhcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8g6YG/5YWN5ZCM5LiA5LiqIGlmcmFtZSDph43lpI3mj5LlhaXkuKTmrKEgaWZyYW1lUG9sbFxuXHQgICAgICAgICAgaWYgKGlmcmFtZVBvb2wuaW5kZXhPZihpZnJhbWUpIDwgMCkge1xuXHQgICAgICAgICAgICBpZnJhbWVQb29sLnB1c2goaWZyYW1lKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgZXZva2VOYXRpdmU6IGZ1bmN0aW9uKG1ldGhvZCwgcGFyYW1zLCBzaWQpIHtcblx0ICAgICAgdmFyIGNtZCA9IHtcblx0ICAgICAgICBjbGFzc05hbWUgOiBcIlVtZW5nNEFwbHVzXCIsXG5cdCAgICAgICAgbWV0aG9kTmFtZSA6IG1ldGhvZCxcblx0ICAgICAgICBzaWQ6IHNpZCxcblx0ICAgICAgICBjYWxsYmFjazogJycsXG5cdCAgICAgICAgcGFyYW1zIDogcGFyYW1zXG5cdCAgICAgIH07XG5cdCAgICAgIHZhciBqc29uU3RyID0gSlNPTi5zdHJpbmdpZnkoY21kKTtcblx0ICAgICAgXG5cdCAgICAgIHVsb2coKS5pKCdVbWVuZzRBcGx1c0ZsdXR0ZXIgPT09PT0gJywgd2luZG93LlVtZW5nNEFwbHVzRmx1dHRlcik7XG5cdFxuXHQgICAgICBpZiAoaXNXaW4pIHtcblx0ICAgICAgICB1bG9nKCkudygnanNicmlkZ2Ugbm90IHN1cHBvcnQgd2luZG93cyBvcyBkZXZpY2VzLicpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChpc0lPUykge1xuXHQgICAgICAgICAgaWYgKHdpbmRvdy53ZWJraXQgJiYgd2luZG93LndlYmtpdC5tZXNzYWdlSGFuZGxlcnMgJiYgd2luZG93LndlYmtpdC5tZXNzYWdlSGFuZGxlcnMuVW1lbmc0QXBsdXMgJiYgd2luZG93LndlYmtpdC5tZXNzYWdlSGFuZGxlcnMuVW1lbmc0QXBsdXMucG9zdE1lc3NhZ2UpIHtcblx0ICAgICAgICAgICAgdWxvZygpLmkoJ2pzYnJpZGdlIG5hdGl2ZSBsb2dzOiAnICsganNvblN0cik7XG5cdCAgICAgICAgICAgIHdpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzLlVtZW5nNEFwbHVzLnBvc3RNZXNzYWdlKGpzb25TdHIpO1xuXHQgICAgICAgICAgfSBlbHNlIGlmKHdpbmRvdy5VbWVuZzRBcGx1c0ZsdXR0ZXIpIHtcblx0ICAgICAgICAgICAgd2luZG93LlVtZW5nNEFwbHVzRmx1dHRlci5wb3N0TWVzc2FnZShqc29uU3RyKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHVsb2coKS53KCdqc2JyaWRnZSBpT1MgZW52aXJvbm1lbnQgaW52YWxpZCcpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNBbmRyb2lkKSB7XG5cdCAgICAgICAgICBpZiAod2luZG93LlVtZW5nNEFwbHVzKSB7XG5cdCAgICAgICAgICAgIGlmICh3aW5kb3cuVW1lbmc0QXBsdXMuQ0FMTCkge1xuXHQgICAgICAgICAgICAgIHVsb2coKS5pKCdqc2JyaWRnZSBuYXRpdmUgbG9nczogJyArIGpzb25TdHIpO1xuXHQgICAgICAgICAgICAgIHdpbmRvdy5VbWVuZzRBcGx1cy5DQUxMKGpzb25TdHIpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5VbWVuZzRBcGx1cy5jYWxsKSB7XG5cdCAgICAgICAgICAgICAgdWxvZygpLmkoJ2pzYnJpZGdlIG5hdGl2ZSBoYW1vbnlvcyBsb2dzOiAnICsganNvblN0cik7XG5cdCAgICAgICAgICAgICAgd2luZG93LlVtZW5nNEFwbHVzLmNhbGwoanNvblN0cik7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdWxvZygpLncoJ2pzYnJpZGdlIEFuZHJvaWQgZW52aXJvbm1lbnQgZXJyb3IsIFVtZW5nNEFwbHVzIGV4aXN0cywgYnV0IG1ldGhvZCBub3QgZm91bmQnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBlbHNlIGlmKHdpbmRvdy5VbWVuZzRBcGx1c0ZsdXR0ZXIpIHtcblx0ICAgICAgICAgICAgd2luZG93LlVtZW5nNEFwbHVzRmx1dHRlci5wb3N0TWVzc2FnZShqc29uU3RyKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHVsb2coKS53KCdqc2JyaWRnZSBBbmRyb2lkIGVudmlyb25tZW50IGludmFsaWQnKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcmVnaXN0ZXJHQzogZnVuY3Rpb24oc2lkLCB0aW1lb3V0KSB7XG5cdCAgICAgIC8vIOWeg+WcvuWbnuaUtlxuXHQgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICAgIHZhciBjYWxsR0NUaW1lID0gTWF0aC5tYXgodGltZW91dCB8fCAwLCBDQUxMX0dDX1RJTUUpO1xuXHQgICAgICB2YXIgcGFyYW1HQ1RpbWUgPSBNYXRoLm1heCh0aW1lb3V0IHx8IDAsIFBBUkFNX0dDX1RJTUUpO1xuXHRcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgIHRoYXQudW5yZWdpc3RlckNhbGwoc2lkKTtcblx0ICAgICAgfSwgY2FsbEdDVGltZSk7XG5cdFxuXHQgICAgICBpZiAoaXNJT1MpIHtcblx0ICAgICAgICAvLyBpb3PkuIvlpITnkIZwYXJhbXPnmoTlm57mlLZcblx0ICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICBpZiAodGhhdC5wYXJhbXNbUEFSQU1fUFJFRklYICsgc2lkXSkge1xuXHQgICAgICAgICAgICBkZWxldGUgdGhhdC5wYXJhbXNbUEFSQU1fUFJFRklYICsgc2lkXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBwYXJhbUdDVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oc2lkLCBkYXRhLCB0eXBlLCBrZWVwQWxpdmUpIHtcblx0ICAgICAgdmFyIGNhbGwgPSB0aGlzLnVucmVnaXN0ZXJDYWxsKHNpZCwga2VlcEFsaXZlKTtcblx0ICAgICAgdmFyIHN1Y2Nlc3MgPSBjYWxsLnN1Y2Nlc3M7XG5cdCAgICAgIHZhciBmYWlsdXJlID0gY2FsbC5mYWlsdXJlO1xuXHRcblx0ICAgICAgZGF0YSA9IHRoaXMucGFyc2VEYXRhKGRhdGEpO1xuXHRcblx0ICAgICAgdmFyIHJldCA9IGRhdGEucmV0O1xuXHQgICAgICBpZiAodHlwZW9mIHJldCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBkYXRhID0gZGF0YS52YWx1ZSB8fCBkYXRhO1xuXHQgICAgICAgIGlmICghZGF0YS5yZXQpIHtcblx0ICAgICAgICAgIGRhdGEucmV0ID0gW3JldF07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodHlwZSA9PT0gJ3N1Y2Nlc3MnKSB7XG5cdCAgICAgICAgc3VjY2VzcyAmJiBzdWNjZXNzKGRhdGEpO1xuXHQgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdmYWlsdXJlJykge1xuXHQgICAgICAgIGZhaWx1cmUgJiYgZmFpbHVyZShkYXRhKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGlzSU9TKSB7ICAgIC8vaU9T5LiL5Zue5pS2aWZyYW1lXG5cdCAgICAgICAgdGhpcy5yZXRyaWV2ZUlmcmFtZShzaWQpO1xuXHQgICAgICAgIGlmICh0aGlzLnBhcmFtc1tQQVJBTV9QUkVGSVggKyBzaWRdKSB7XG5cdCAgICAgICAgICBkZWxldGUgdGhpcy5wYXJhbXNbUEFSQU1fUFJFRklYICsgc2lkXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICByZXR1cm4gSlNCcmlkZ2VfQ29yZTtcblx0fTtcblx0XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7ICBcblx0ICAgIHN1YnNjcmliZUxvZ3M6IGZ1bmN0aW9uIChhY3Rpb24sIGNhbGxiYWNrKSB7XG5cdCAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoYWN0aW9uLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcblx0ICAgICAgICBpZiAob3JpRGF0YXMuc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG5cdCAgICAgICAgICBjYWxsYmFjayhvcmlEYXRhcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgaXNKc0JyaWRnZVJlYWR5OiBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuICh3aW5kb3cud2Via2l0ICYmIHdpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzICYmIHdpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzLlVtZW5nNEFwbHVzICYmIHdpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzLlVtZW5nNEFwbHVzKSB8fCB3aW5kb3cuVW1lbmc0QXBsdXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIGNhbGxVVDogZnVuY3Rpb24gKGFjdGlvbiwgcGFyYW1zKSB7XG5cdCAgICAgIC8vIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHBhcmFtcy5fYnJpZGdlTmFtZSA9IHRoaXMub3B0aW9ucy5icmlkZ2VOYW1lIHx8ICdBdG1CcmlkZ2UnO1xuXHQgICAgICBwYXJhbXMuX2JyaWRnZVZlcnNpb24gPSB0aGlzLm9wdGlvbnMuYnJpZGdlVmVyc2lvbiB8fCAnMS4wLjAnO1xuXHQgICAgICAvLyB1dGlsTG9nZ2VyLmRlYnVnTG9nKHsgbXNnOiAn5b2T5YmN6YCP5Lyg5raI5oGv5L2TOiAnK0pTT04uc3RyaW5naWZ5KHBhcmFtcyl9KTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB3aW5kb3cuQXRtQnJpZGdlLnRyYWNlKFxuXHQgICAgICAgICAgYWN0aW9uLCBwYXJhbXMsIGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgICAgIHVsb2coKS5pKCdTVUNDRVNTOicsIG8pO1xuXHQgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgICAgICB1bG9nKCkudygnRkFJTFVSRTonLCBlcnIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTtcblx0ICAgICAgICB1bG9nKCkudyhlKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBjYWxsTWVyZ2VUb05hdGl2ZUdQOiBmdW5jdGlvbihhY3Rpb24sIHZhbHVlKSB7XG5cdCAgICAgIHVsb2coKS5pKCdjdXJyZW50IGJyaWRnZSBncDogJysgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcblx0ICAgICAgLy8gdXRpbExvZ2dlci5kZWJ1Z0xvZyh7bXNnOiAn5b2T5YmN6YCP5Lyg5YWo5bGA5bGe5oCnOiAnKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSl9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgd2F0Y2hMT0c6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgX3NlbGYuc3Vic2NyaWJlTG9ncygnbXdfY2hhbmdlX3B2JywgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICB2YXIgd2hhdF90b19zZW5kID0gZGF0YS53aGF0X3RvX3NlbmQgfHwge307XG5cdCAgICAgICAgdmFyIHBhcmFtcyA9IHdoYXRfdG9fc2VuZC5wdmRhdGFUb1VtTmF0aXZlIHx8IHt9O1xuXHQgICAgICAgIF9zZWxmLmNhbGxVVCgnc2VuZFBWJywgcGFyYW1zKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoJ213X2NoYW5nZV9oamxqJywgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICB2YXIgd2hhdF90b19zZW5kID0gZGF0YS53aGF0X3RvX3NlbmQgfHwge307XG5cdCAgICAgICAgdmFyIHBhcmFtcyA9IHdoYXRfdG9fc2VuZC5oamxqZGF0YVRvVW1OYXRpdmUgfHwge307XG5cdCAgICAgICAgX3NlbGYuY2FsbFVUKCdzZW5kRXZlbnQnLCBwYXJhbXMpO1xuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbigpe1xuXHQgICAgICBpZiAoIXdpbmRvdy5BdG1CcmlkZ2UpIHtcblx0ICAgICAgICB2YXIgQXRtQnJpZGdlID0gaW5pdEpTQnJpZGdlKHdpbmRvdyk7XG5cdCAgICAgICAgd2luZG93LkF0bUJyaWRnZSA9IEF0bUJyaWRnZTtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgaWYgKHdpbmRvdy5BdG1CcmlkZ2UpIHtcblx0ICAgICAgICB0aGlzLndhdGNoTE9HKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTMyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9pbml0L2luaXRMb2FkX2Jhc2UuanNcblx0ICog5Yid5aeL5YyW5Z+656GA5qih5Z2X77yM5LiN6IO955u05o6l5L2/55So77yM6ZyA6KaB6YCa6L+HaW5pdExvYWRfcGMuanPmiJZpbml0TG9hZF93YXAuanPnrYnlhbfkvZPnmoTlnLrmma/mqKHlnZfosIPnlKhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIEBhdXRob3Igaml6aGEud3lqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApO1xuXHRcblx0dmFyIFF1ZXVlID0gQmFzZS5leHRlbmQoe1xuXHQgIHB1c2g6IGZ1bmN0aW9uKHRhc2spIHtcblx0ICAgIHRoaXMubGVuZ3RoKys7XG5cdCAgICBhY3Rpb24ucHJvY2Vzc1Rhc2sodGFzaywgdGhpcy5vcHRzKTsgIFxuXHQgIH0sXG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHByb2Nlc3NBcGx1c1F1ZXVlOiBmdW5jdGlvbiAocXVldWVOYW1lKSB7XG5cdCAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIHF1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKHF1ZXVlTmFtZSk7XG5cdCAgICAgIGFjdGlvbi5wcm9jZXNzR29sZGxvZ1F1ZXVlKHF1ZSwgb3B0cyk7XG5cdCAgICAgIHV0aWxHb2xkbG9nLnNldEdsb2JhbFZhbHVlKHF1ZXVlTmFtZSwgUXVldWUuY3JlYXRlKHtcblx0ICAgICAgICBvcHRzOiBvcHRzLCBcblx0ICAgICAgICBzdGFydExlbmd0aDogcXVlLmxlbmd0aCxcblx0ICAgICAgICBsZW5ndGg6IDBcblx0ICAgICAgfSkpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge1N0cmluZ30gdHlwZVxuXHQgICAgICovXG5cdCAgICBydW46ICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1c19jb25maWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWc7XG5cdCAgICAgIHZhciBBUExVU19RVUVVRSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUU7XG5cdFxuXHQgICAgICB0aGlzLnByb2Nlc3NBcGx1c1F1ZXVlKEFQTFVTX1FVRVVFKTtcblx0XG5cdCAgICAgIGlmIChBUExVU19RVUVVRSA9PT0gJ2FwbHVzX3F1ZXVlJykge1xuXHQgICAgICAgIHRoaXMucHJvY2Vzc0FwbHVzUXVldWUoJ2dvbGRsb2dfcXVldWUnKTtcblx0ICAgICAgfVxuXHQgICAgICBhY3Rpb24uc3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlKEFQTFVTX1FVRVVFLCB0aGlzLm9wdGlvbnMuY29uZmlnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTMzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDov5nmmK/kuIDkuKrliqDovb3lmajvvIznlKjkuo7ng63liqDovb1KU+aPkuS7tlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0Ly8gdmFyIHBsdWdpbkxvYWRlck1hcCA9IHt9O1xuXHQvKipcblx0ICogRE9NUmVhZHnlkI7lvIDlp4vmiafooYzliqDovb1hcGx1c0pT5o+S5Lu255qE5Yqo5L2cXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuXHQgICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG5cdCAgICAgKiB9XG5cdCAgICAgKi9cblx0ICAgIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gLyoqXG5cdCAgICAvLyAgKiDliqDovb3oh6rliqjmm53lhYlcXOiHquWKqOeCueWHu+eahGpzXG5cdCAgICAvLyAgKiBAcGFyYW1zIHtTdHJpbmd9IG1ldGFLZXkgJ2FwbHVzLWF1dG8tZXhwJyB8ICdhcGx1cy1hdXRvLWNsaydcblx0ICAgIC8vICAqIEBwYXJhbXMge1N0cmluZ30gbWV0YVZhbHVlXG5cdCAgICAvLyAgKi9cblx0ICAgIC8vIGxvYWRBcGx1c1BsdWdpbjogZnVuY3Rpb24gKG1ldGFLZXkpIHtcblx0ICAgIC8vICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAvLyAgIHZhciBjZG5QYXRoID0gY29uZmlnW21ldGFLZXldO1xuXHQgICAgLy8gICB2YXIgcGx1Z2luX3BhdGhzID0gYXBsdXMuZ2V0Q2RuUGF0aCgpICsgY2RuUGF0aDtcblx0ICAgIC8vICAgaWYgKGNkblBhdGggJiYgIWFwbHVzW2NvbmZpZy5nbG9iYWxOYW1lXSAmJiAhcGx1Z2luTG9hZGVyTWFwW2NkblBhdGhdKSB7XG5cdCAgICAvLyAgICAgdXRpbERvbS5hZGRTY3JpcHQocGx1Z2luX3BhdGhzKTtcblx0ICAgIC8vICAgICBwbHVnaW5Mb2FkZXJNYXBbY2RuUGF0aF0gPSB0cnVlO1xuXHQgICAgLy8gICB9XG5cdCAgICAvLyB9LFxuXHRcblx0ICAgIGFkZFN0eWxlOiBmdW5jdGlvbiAoaWQsIHN0eWxlVXJsKSB7XG5cdCAgICAgIHZhciBzdHlsZUlkID0gaWQgKyAnX3N0eWxlJztcblx0ICAgICAgdmFyIHN0eWxlTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0eWxlSWQpO1xuXHQgICAgICBpZiAoIXN0eWxlTm9kZSkge1xuXHQgICAgICAgIHN0eWxlTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcblx0ICAgICAgICBzdHlsZU5vZGUuaWQgPSBzdHlsZUlkO1xuXHQgICAgICAgIHN0eWxlTm9kZS5ocmVmID0gc3R5bGVVcmw7XG5cdCAgICAgICAgc3R5bGVOb2RlLnJlbCA9ICdzdHlsZXNoZWV0Jztcblx0ICAgICAgICBzdHlsZU5vZGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdCAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKS5pdGVtKDApLmFwcGVuZENoaWxkKHN0eWxlTm9kZSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdmFyIGlzX2luX2lmcmFtZSA9IHBhcmVudCAhPT0gc2VsZjsgIC8vIOW9k+WJjemhtemdouaYr+WQpuWcqCBpZnJhbWUg5LitXG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICBpZiAoIWlzX2luX2lmcmFtZSAmJiBjb25maWcudXJsUnVsZXMpIHtcblx0ICAgICAgICBlYWNoKGNvbmZpZy51cmxSdWxlcywgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKHYucnVsZSk7XG5cdCAgICAgICAgICB2YXIgbWF0Y2hlZEluTFM7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBtYXRjaGVkSW5MUyA9IHYuaWQgPyB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh2LmlkKSA6ICcnO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgICAgIGlmIChyZWcudGVzdChsb2NhdGlvbi5ocmVmKSB8fCBtYXRjaGVkSW5MUykge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHYuaWQsIHRydWUpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICAgICAgICBpZiAodXRpbEFycmF5LmlzQXJyYXkodi5jZG5QYXRoKSkge1xuXHQgICAgICAgICAgICAgIGVhY2godi5jZG5QYXRoLCBmdW5jdGlvbiAocGF0aCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKC9cXC5jc3MkLy50ZXN0KHBhdGgpKSB7XG5cdCAgICAgICAgICAgICAgICAgIF9zZWxmLmFkZFN0eWxlKHYuaWQsIHBhdGgpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXFwuanMvLnRlc3QocGF0aCkpIHtcblx0ICAgICAgICAgICAgICAgICAgdXRpbERvbS5hZGRTY3JpcHQocGF0aCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdXRpbERvbS5hZGRTY3JpcHQodi5jZG5QYXRoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ3NldE1ldGFJbmZvJywgZnVuY3Rpb24gKG1ldGFLZXksIG1ldGFWYXVlKSB7XG5cdCAgICAgIC8vICAgX3NlbGYubG9hZEFwbHVzUGx1Z2luKG1ldGFLZXksIG1ldGFWYXVlKTtcblx0ICAgICAgLy8gfSk7XG5cdCAgICAgIC8vIGlmICgvYXBsdXNfd2VidnRfbWVzc2FnZXIvLnRlc3QobG9jYXRpb24uaHJlZikpIHtcblx0ICAgICAgLy8gICB1dGlsRG9tLmFkZFNjcmlwdChwbHVnaW5fcGF0aHMpO1xuXHQgICAgICAvLyB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDEzNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcHYvbWFpbi5qc1xuXHQgKiDoh6rliqhQVuaPkuS7tlxuXHQgKlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyDlj6/op4bljJboh6rliqhwduS4juiHquWKqHB25omT6YCa77yM6Iul5rKh5pyJ5Y+v6KeG5YyWcHbvvIzliJnpu5jorqTkuIrmiqXoh6rliqhwdlxuXHQgICAgICBpZiAoIWFwbHVzLl9hcGx1c192dF9jZmcpIHtcblx0ICAgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNSkoKTsgIFxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMzUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBtYWluLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdGZ1bmN0aW9uIHNlbmRQVigpIHtcblx0ICB2YXIgcSA9ICh3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKSk7XG5cdCAgcS5wdXNoKHtcblx0ICAgIGFjdGlvbjogJ2FwbHVzLnNlbmRQVicsXG5cdCAgICAvLyBA6ZKw5pitIOWNlemhteW6lOeUqOmcgOS8oOmAkiBpc19hdXRvID0gZmFsc2Vcblx0ICAgIC8vIOWOn+WboOS4uiBjYW5fdG9fc2VuZFBWIOS7o+eggeWKoOS6humZkOWItlxuXHQgICAgYXJndW1lbnRzOiBbeyBpc19hdXRvOiBmYWxzZSwgdHJhY2tfdHlwZTogXCIxXCIgfSwge31dXG5cdCAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxvZ1BWKCkgeyAgXG5cdCAgLy8gQOaWh+W/gyDlhajpnaLngrnljLrliIbln4vngrnmlrnlvI/vvIx0cmFja190eXBlICBcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIHBhZ2VDb25maWcgPSBhcGx1cyAmJiBhcGx1cy5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpO1xuXHQgIGlmIChwYWdlQ29uZmlnKSB7XG5cdCAgICBpZiAocGFnZUNvbmZpZy5oYXNoTW9kZSkge1xuXHQgICAgICB2YXIgaGFzaFZhbCA9IGxvY2F0aW9uLmhhc2g7XG5cdCAgICAgIGlmIChwYWdlQ29uZmlnW2hhc2hWYWxdKSB7XG5cdCAgICAgICAgaWYgKCFwYWdlQ29uZmlnW2hhc2hWYWxdLnNraXBNZSkge1xuXHQgICAgICAgICAgc2VuZFBWKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlbmRQVigpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgcGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZTtcblx0ICAgICAgaWYgKHBhZ2VDb25maWdbcGF0aG5hbWVdKSB7XG5cdCAgICAgICAgaWYgKCFwYWdlQ29uZmlnW3BhdGhuYW1lXS5za2lwTWUpIHtcblx0ICAgICAgICAgIHNlbmRQVigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZW5kUFYoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBzZW5kUFYoKTtcblx0ICB9ICBcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNlbmRQVkluSW5pdCgpIHtcblx0ICBpZiAoIWFwbHVzLl9hcGx1c19hcHYpIHtcblx0ICAgIGxvZ1BWKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGFwbHVzLl9hcGx1c19hcHYgPSB7XG5cdCAgICAgIHN0YXR1czogJ2NvbXBsZXRlJ1xuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHNlbmRQVkluSW5pdCgpO1xuXHQgIHV0aWxVcmwud2F0Y2hIaXN0b3J5Q2hhbmdlKGxvZ1BWKTtcblx0ICB1dGlsVXJsLndhdGNoSGFzaENoYW5nZShsb2dQVik7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTM2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogYXBsdXNfYXV0b3B2X2luamVjdC5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMzcpKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMzcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBtYWluLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHQvLyB2YXIgaXNBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy9pc0FycmF5Jyk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBkb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM4KTtcblx0dmFyIGV2ZW50VXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7XG5cdHZhciB1dGlsT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDApO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciBlYWNoTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHR2YXIgdXRpbEhhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0XG5cdGZ1bmN0aW9uIG90aGVyVGFncygpIHtcblx0ICB2YXIgdGFncyA9IFtdO1xuXHQgIHZhciBhdXRvRWxlbU1ldGEgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfQ09ORklHKTtcblx0ICBpZiAoYXV0b0VsZW1NZXRhICYmIGF1dG9FbGVtTWV0YS5jb2xsZWN0X3RhZ3MgJiYgdXRpbE9iamVjdC5pc09iamVjdChhdXRvRWxlbU1ldGEuY29sbGVjdF90YWdzKSkge1xuXHQgICAgZWFjaE1hcChhdXRvRWxlbU1ldGEuY29sbGVjdF90YWdzLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcblx0ICAgICAgdmFsdWUgJiYgdGFncy5wdXNoKGtleSk7XG5cdCAgICB9KTtcblx0ICB9IFxuXHQgIHJldHVybiB0YWdzO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcmVtb3RlSWdub3JlVGFncygpIHtcblx0ICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfQVVUT1RSQUNLX0NPTkZJR19SRU1PVEUpIHx8IFtdO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0VGFyZ2V0RWxlbWVudCh0YXJnZXQpIHtcblx0ICB2YXIgaSA9IHRhcmdldDtcblx0ICBpZiAoJ29iamVjdCcgIT09IHR5cGVvZiBpKSByZXR1cm4gbnVsbDtcblx0ICBpZiAoJ3N0cmluZycgIT09IHR5cGVvZiBpLnRhZ05hbWUpIHJldHVybiBudWxsO1xuXHQgIHZhciBuID0gaS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgaWYgKFwiYm9keVwiID09PSBuLnRvTG93ZXJDYXNlKCkgfHwgXCJodG1sXCIgPT09IG4udG9Mb3dlckNhc2UoKSkge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfSAgXG5cdCAgaWYgKCFpIHx8ICFpLnBhcmVudE5vZGUgfHwgIWkucGFyZW50Tm9kZS5jaGlsZHJlbikgcmV0dXJuIG51bGw7XG5cdCAgdmFyIHBhcmVudE5vZGUgPSBpLnBhcmVudE5vZGU7XG5cdCAgXG5cdCAgdmFyIG9UYWdzID0gb3RoZXJUYWdzKCk7XG5cdCAgdmFyIGlnbm9yZVRhZ3MgPSByZW1vdGVJZ25vcmVUYWdzKCk7XG5cdCAgXG5cdCAgaWYgKGRvbVV0aWxzLmhhc0F0dHJpYnV0ZSh0YXJnZXQsIFwiYXBsdXMtYXV0b3RyYWNrLW9mZlwiKSkge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIGlmIChpZ25vcmVUYWdzLmxlbmd0aCA+IDAgJiYgdXRpbEFycmF5LmluZGV4b2YoaWdub3JlVGFncywgbikgPiAtMSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICAvLyDmt7vliqDlsZ7mgKdcblx0ICBpZiAoXCJhXCIgPT09IG4gfHwgXCJidXR0b25cIiA9PT0gbiB8fCBcImlucHV0XCIgPT09IG4gfHwgXCJ0ZXh0YXJlYVwiID09PSBuKSB7XG5cdCAgICByZXR1cm4gaTtcblx0ICB9XG5cdCAgXG5cdCAgaWYgKFwiYnV0dG9uXCIgPT09IHBhcmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpIHx8IFwiYVwiID09PSBwYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkge1xuXHQgICAgcmV0dXJuIHBhcmVudE5vZGU7XG5cdCAgfVxuXHRcblx0ICBpZiAodXRpbEFycmF5LmluZGV4b2Yob1RhZ3MsIG4pID4gLTEpIHJldHVybiBpO1xuXHRcblx0ICB2YXIgbWFwUHJldk5vZGUgPSBkb21VdGlscy5nZXRQcmV2KHBhcmVudE5vZGUpO1xuXHQgIGlmIChcblx0ICAgIFwiYXJlYVwiID09PSBuICYmIFxuXHQgICAgXCJtYXBcIiA9PT0gcGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgJiYgXG5cdCAgICBtYXBQcmV2Tm9kZS50YWdOYW1lICYmIFwiaW1nXCIgPT09IG1hcFByZXZOb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKVxuXHQgICkge1xuXHQgICAgcmV0dXJuIG1hcFByZXZOb2RlO1xuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2VuZEV2ZW50KHBhcmFtcykge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXBsdXNfcXVldWUgPSAod2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSkpO1xuXHQgICAgdmFyIHVzZXJFdmVudENvZGUgPSBudWxsO1xuXHQgICAgaWYgKHBhcmFtc1snY2xrLWxvZ2tleSddKSB7XG5cdCAgICAgIHVzZXJFdmVudENvZGUgPSBwYXJhbXNbJ2Nsay1sb2drZXknXTtcblx0ICAgICAgZGVsZXRlIHBhcmFtc1snY2xrLWxvZ2tleSddO1xuXHQgICAgfVxuXHQgICAgdmFyIGV2ZW50X2NvZGU7XG5cdCAgICB2YXIgZWt2X2hhc2hfY29kZSA9IHV0aWxIYXNoLmhhc2godXRpbC5nZXRBcHBLZXkoKSkgKyB1dGlsSGFzaC5oYXNoKHBhcmFtcy5hcC5lbGVtZW50X3NlbGVjdG9yLCB1dGlsLmdldEFwcEtleSgpKTtcblx0ICAgIGV2ZW50X2NvZGUgPSB1c2VyRXZlbnRDb2RlIHx8IGVrdl9oYXNoX2NvZGU7XG5cdFxuXHQgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgIGFyZ3VtZW50czogW2V2ZW50X2NvZGUsIFwiQ0xLXCIsIHBhcmFtcyB8fCB7fV1cblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ2F1dG90cmFjayBldmVudCBzZW5kIGZhaWxlZCwgZT0nLCBlKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEVsZW1lbnREYXRhQXR0cmlidXRlcyh0YXJnZXQpIHtcblx0ICAvLyBhdXRvX2VsZW1lbnQg5Li65Li05pe25Y+Y6YeP77yM55So5LqO5o6n5Yi25YWo5Z+L54K56Ieq5Yqo5o6n5Lu277yM5Zug5Li65YWo5Z+L54K55LqL5Lu25o6n5Yi25LiN5a6M5pW0XG5cdCAgdmFyIG9iaiA9IHtpc19hdXRvOiAxLCBhdXRvX2VsZW1lbnQ6IDF9OyAvL+WFqOWfi+eCueWcuuaZr++8jOeCueWHu+S6i+S7tuaJk+iHquWKqOagh1xuXHQgIHRyeSB7XG5cdCAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5oYXNBdHRyaWJ1dGVzKSB7XG5cdCAgICAgIHZhciBhdHRycyA9IHRhcmdldC5hdHRyaWJ1dGVzO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGtleSA9IGF0dHJzW2ldLm5hbWUgfHwgXCJcIjtcblx0ICAgICAgICB2YXIgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcblx0ICAgICAgICBpZiAoa2V5ICYmIGtleS5pbmRleE9mKFwiZGF0YS1cIikgPiAtMSkge1xuXHQgICAgICAgICAgdmFyIHJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eZGF0YS0vLCAnJyk7XG5cdCAgICAgICAgICBvYmpbcktleV0gPSBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGVycm9yKSB7XG5cdCAgICB1bG9nKCkudyhlcnJvciAmJiBlcnJvci5tZXNzYWdlKTtcblx0ICB9ICBcblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0RWxlbWVudEluZm8odGFyZ2V0KSB7XG5cdCAgdmFyIHJlc3VsdCA9IGdldEVsZW1lbnREYXRhQXR0cmlidXRlcyh0YXJnZXQpO1xuXHQgIGlmICh0YXJnZXQpIHtcblx0ICAgIHJlc3VsdCA9IGFzc2lnbihyZXN1bHQsIHtcblx0ICAgICAgYXA6IHtcblx0ICAgICAgICBlbGVtZW50X3R5cGU6IHRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXG5cdCAgICAgICAgZWxlbWVudF9uYW1lOiB0YXJnZXQuZ2V0QXR0cmlidXRlICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpIHx8IFwiXCIsXG5cdCAgICAgICAgZWxlbWVudF9pZDogdGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIikgfHwgXCJcIixcblx0ICAgICAgICBlbGVtZW50X2NsYXNzX25hbWU6IFwic3RyaW5nXCIgPT0gdHlwZW9mIHRhcmdldC5jbGFzc05hbWUgPyB0YXJnZXQuY2xhc3NOYW1lIDogXCJcIixcblx0ICAgICAgICBlbGVtZW50X2NvbnRlbnQ6IGRvbVV0aWxzLmdldEVsZW1lbnRDb250ZW50KHRhcmdldCwgdGFyZ2V0LnRhZ05hbWUpIHx8IFwiXCIsXG5cdCAgICAgICAgZWxlbWVudF9zZWxlY3RvcjogZG9tVXRpbHMuZ2V0RG9tU2VsZWN0b3IodGFyZ2V0KSB8fCBcIlwiLFxuXHQgICAgICAgIGVsZW1lbnRfcGF0aDogZG9tVXRpbHMuZ2V0RWxlbWVudFBhdGgodGFyZ2V0KVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDsgXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbml0KCkge1xuXHQgIGZ1bmN0aW9uIGV2ZW50SGFuZGxlcihlKSB7XG5cdCAgICBpZiAoIWUpIHJldHVybiBmYWxzZTtcblx0ICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcblx0ICAgIHZhciB0YXJnZXRDYW5SZWNvcmQgPSBnZXRUYXJnZXRFbGVtZW50KHRhcmdldCk7ICAgIFxuXHQgICAgdGFyZ2V0Q2FuUmVjb3JkICYmIHNlbmRFdmVudChnZXRFbGVtZW50SW5mbyh0YXJnZXRDYW5SZWNvcmQpKTtcblx0ICB9XG5cdCAgZXZlbnRVdGlscy5hZGRIYW5kbGVyKGRvY3VtZW50LCBldmVudFV0aWxzLmNsaWNrRXZlbnQoKSwgZXZlbnRIYW5kbGVyKTtcblx0ICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsIGZ1bmN0aW9uKCl7XG5cdCAgICBldmVudFV0aWxzLnJlbW92ZUhhbmRsZXIoZG9jdW1lbnQsICBldmVudFV0aWxzLmNsaWNrRXZlbnQoKSwgZXZlbnRIYW5kbGVyKTtcblx0ICB9LCBmYWxzZSk7ICBcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuXHQgIGlmIChhcGx1cy5fYXV0b3RyYWNrZWRfZW5hYmxlKSB7XG5cdCAgICByZXR1cm47IFxuXHQgIH0gZWxzZSB7XG5cdCAgICBhcGx1cy5fYXV0b3RyYWNrZWRfZW5hYmxlID0gdHJ1ZTtcblx0ICAgIGluaXQoKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTM4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogZG9tVXRpbHMuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldE5hbWUodGFyZ2V0LCBhdHRyaWJ1dGUpIHtcblx0ICBpZiAodGFyZ2V0ICYmIHRhcmdldFthdHRyaWJ1dGVdKSB7XG5cdCAgICByZXR1cm4gdGFyZ2V0W2F0dHJpYnV0ZV0udG9Mb3dlckNhc2UoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuc2libGluZ3MgPSBmdW5jdGlvbih0YXJnZXQsIHR5cGUpIHtcblx0ICBpZiAodHlwZSA9PT0gJ25leHRTaWJsaW5nJykge1xuXHQgICAgcmV0dXJuIHRhcmdldC5uZXh0U2libGluZztcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwcmV2aW91c1NpYmxpbmcnKSB7XG5cdCAgICByZXR1cm4gdGFyZ2V0LnByZXZpb3VzU2libGluZztcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5zaWJsaW5nID0gZnVuY3Rpb24odGFyZ2V0LCB0eXBlKSB7XG5cdCAgZm9yICg7ICh0YXJnZXQgPSB0YXJnZXRbdHlwZV0pICYmIDEgIT09IHRhcmdldC5ub2RlVHlwZTsgKTtcblx0ICByZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdCAgdmFyIGUgPSB0YXJnZXQ7XG5cdCAgaWYgKFwicHJldmlvdXNFbGVtZW50U2libGluZ1wiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuXHQgICAgcmV0dXJuIHRoaXMuZ2V0UHJldihlKTtcblx0ICB9XG5cdCAgd2hpbGUoZS5wcmV2aW91c1NpYmxpbmcpIHtcblx0ICAgIGUgPSBlLnByZXZpb3VzU2libGluZztcblx0ICAgIGlmICgxID09PSBlLm5vZGVUeXBlKSB7XG5cdCAgICAgIHJldHVybiBlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0U2FtZVR5cGVTaWJsaW5ncyA9IGZ1bmN0aW9uKHRhcmdldCkge1xuXHQgIHZhciBlID0gdGFyZ2V0LCB0ID0gZS5wYXJlbnROb2RlLCB0YWduYW1lID0gZ2V0TmFtZShlLCAndGFnTmFtZScpO1xuXHQgIHZhciBhID0gW10sIGkgPSAwO1xuXHQgIHdoaWxlKGkgPCB0LmNoaWxkcmVuLmxlbmd0aCkge1xuXHQgICAgdmFyIG4gPSB0LmNoaWxkcmVuW2ldO1xuXHQgICAgaWYgKDEgPT09IG4ubm9kZVR5cGUgJiYgdGFnbmFtZSAmJiBnZXROYW1lKG4sICd0YWdOYW1lJykgPT09IHRhZ25hbWUpIHtcblx0ICAgICAgYS5wdXNoKHQuY2hpbGRyZW5baV0pO1xuXHQgICAgfVxuXHQgICAgaSsrO1xuXHQgIH1cblx0ICByZXR1cm4gYTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0TmV4dCA9IGZ1bmN0aW9uKHRhcmdldCkge1xuXHQgIHJldHVybiB0aGlzLnNpYmxpbmcodGFyZ2V0LCAnbmV4dFNpYmxpbmcnKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UHJldiA9IGZ1bmN0aW9uKHRhcmdldCkge1xuXHQgIHJldHVybiB0aGlzLnNpYmxpbmcodGFyZ2V0LCAncHJldmlvdXNTaWJsaW5nJyk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmluZGV4T2YgPSBmdW5jdGlvbihhcnIsIHRhcmdldCkge1xuXHQgIHZhciBmdW5jID0gYXJyLmluZGV4T2Y7XG5cdCAgaWYgKGZ1bmMpIHJldHVybiBmdW5jLmNhbGwoYXJyLCB0YXJnZXQpO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBpZiAodGFyZ2V0ID09PSBhcnJbaV0pIHtcblx0ICAgICAgcmV0dXJuIGk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0Q2xvc2VzdExpID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdCAgcmV0dXJuIChmdW5jdGlvbiAoZSwgdCkge1xuXHQgICAgZm9yICg7IGUgJiYgZSAhPT0gZG9jdW1lbnQgJiYgMSA9PT0gZS5ub2RlVHlwZTsgZSA9IGUucGFyZW50Tm9kZSlcblx0ICAgICAgaWYgKGdldE5hbWUoZSwgJ3RhZ05hbWUnKSA9PT0gdCkgcmV0dXJuIGU7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9KSh0YXJnZXQsIFwibGlcIik7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBjaGVja1RhcmdldElkKHRhcmdldCkge1xuXHQgIHJldHVybiB0YXJnZXQgJiYgdGFyZ2V0LmlkICYmIC9eW0EtWmEtel1bLUEtWmEtejAtOV86Ll0qJC8udGVzdCh0YXJnZXQuaWQpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0RWxlbWVudFBhdGgodGFyZ2V0KSB7XG5cdCAgdmFyIGEgPSBbXTsgXG5cdCAgaWYgKCF0YXJnZXQpIHtcblx0ICAgIHJldHVybiBcIlwiO1xuXHQgIH1cblx0ICBcblx0ICB3aGlsZSh0YXJnZXQucGFyZW50Tm9kZSkge1xuXHQgICAgaWYgKGNoZWNrVGFyZ2V0SWQodGFyZ2V0KSkge1xuXHQgICAgICBhLnVuc2hpZnQoIGdldE5hbWUodGFyZ2V0LCAndGFnTmFtZScpICsgXCIjXCIgKyB0YXJnZXQuaWQpO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIGlmICh0YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgYS51bnNoaWZ0KFwiYm9keVwiKTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBpZiAodGFyZ2V0LnRhZ05hbWUgJiYgdGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UpIHtcblx0ICAgICAgYS51bnNoaWZ0KGdldE5hbWUodGFyZ2V0LCAndGFnTmFtZScpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHQgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG5cdCAgfVxuXHQgIHJldHVybiBhLmpvaW4oXCIgPiBcIik7XG5cdH07XG5cdGV4cG9ydHMuZ2V0RWxlbWVudFBhdGggPSBnZXRFbGVtZW50UGF0aDtcblx0XG5cdC8vIGV4cG9ydHMuZ2V0RWxlbWVudFBvc2l0aW9uID0gZnVuY3Rpb24odGFyZ2V0LCBwYXRoKSB7XG5cdC8vICAgdmFyIG4gPSB0aGlzLmdldENsb3Nlc3RMaSh0YXJnZXQpO1xuXHQvLyAgIGlmICghbikgcmV0dXJuIG51bGw7XG5cdC8vICAgdmFyIHRhZ25hbWUgPSB0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQvLyAgIHZhciBlbGVtcyA9IG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnbmFtZSk7XG5cdC8vICAgdmFyIGxlbiA9IGVsZW1zLmxlbmd0aDtcblx0Ly8gICB2YXIgYXJyID0gW107XG5cdC8vICAgaWYgKGxlbiA+IDEpIHtcblx0Ly8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0Ly8gICAgICAgZ2V0RWxlbWVudFBhdGgoZWxlbXNbaV0sIGkpID09PSBwYXRoICYmIGFyci5wdXNoKGVsZW1zW2ldKTtcblx0Ly8gICAgIH1cblx0Ly8gICAgIGlmIChhcnIubGVuZ3RoID4gMSkgcmV0dXJuIHRoaXMuaW5kZXhPZihhcnIsIHRhcmdldCk7XG5cdC8vICAgfVxuXHQvLyAgIHZhciB0aGF0ID0gdGhpcztcblx0Ly8gICByZXR1cm4gKGZ1bmN0aW9uIChlKSB7XG5cdC8vICAgICBpZiAoKGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpLCAhZS5wYXJlbnROb2RlKSkgcmV0dXJuIFwiXCI7XG5cdC8vICAgICBpZiAoMSA9PT0gdGhhdC5nZXRTYW1lVHlwZVNpYmxpbmdzKGUpLmxlbmd0aCkgcmV0dXJuIDA7XG5cdC8vICAgICB2YXIgaW5kZXggPSAwO1xuXHQvLyAgICAgdmFyIGVsZW0gPSBlO1xuXHQvLyAgICAgd2hpbGUodGhhdC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKGVsZW0pKSB7XG5cdC8vICAgICAgIGVsZW0gPSB0aGF0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcoZWxlbSk7XG5cdC8vICAgICAgIGluZGV4Kys7XG5cdC8vICAgICB9XG5cdC8vICAgICByZXR1cm4gaW5kZXg7XG5cdC8vICAgfSkobik7XG5cdC8vIH07XG5cdFxuXHRleHBvcnRzLmdldERvbUluZGV4ID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdCAgaWYgKCF0YXJnZXQucGFyZW50Tm9kZSkgcmV0dXJuIC0xO1xuXHQgIHZhciBwb3MgPSAwO1xuXHQgIHZhciB0YWdOYW1lID0gZ2V0TmFtZSh0YXJnZXQsICd0YWdOYW1lJyk7XG5cdCAgdmFyIGNoaWxkcmVuID0gdGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW47XG5cdCAgdmFyIGkgPSAwO1xuXHQgIHdoaWxlKGkgPCBjaGlsZHJlbi5sZW5ndGgpIHtcblx0ICAgIGlmICh0YWdOYW1lICYmIGdldE5hbWUoY2hpbGRyZW5baV0sICd0YWdOYW1lJykgPT09IHRhZ05hbWUpIHtcblx0ICAgICAgaWYgKHRhcmdldCA9PT0gY2hpbGRyZW5baV0pIHtcblx0ICAgICAgICByZXR1cm4gcG9zO1xuXHQgICAgICB9XG5cdCAgICAgIHBvcysrO1xuXHQgICAgfVxuXHQgICAgaSsrO1xuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH07XG5cdFxuXHRleHBvcnRzLnNlbGVjdG9yID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdCAgdmFyIHIgPSB0YXJnZXQucGFyZW50Tm9kZSAmJiA5ID09PSB0YXJnZXQucGFyZW50Tm9kZS5ub2RlVHlwZSA/IC0xIDogdGhpcy5nZXREb21JbmRleCh0YXJnZXQpO1xuXHQgIGlmICh0YXJnZXQuZ2V0QXR0cmlidXRlICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSAmJiAvXltBLVphLXpdWy1BLVphLXowLTlfOi5dKiQvLnRlc3QodGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpKSkge1xuXHQgICAgcmV0dXJuIFwiI1wiICsgdGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZ2V0TmFtZSh0YXJnZXQsICd0YWdOYW1lJykgKyAofnIgPyBcIjpudGgtb2YtdHlwZShcIiArIChyICsgMSkgKyBcIilcIiA6IFwiXCIpO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0RG9tU2VsZWN0b3IgPSBmdW5jdGlvbih0YXJnZXQsIGFycikge1xuXHQgIGlmICghdGFyZ2V0IHx8ICF0YXJnZXQucGFyZW50Tm9kZSB8fCAhdGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW4pIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH0gXG5cdCAgYXJyID0gYXJyICYmIGFyci5qb2luID8gYXJyIDogW107XG5cdCAgdmFyIGEgPSBnZXROYW1lKHRhcmdldCwgJ25vZGVOYW1lJyk7XG5cdCAgaWYgKFwiYm9keVwiICE9PSBhICYmIDEgPT09IHRhcmdldC5ub2RlVHlwZSkge1xuXHQgICAgYXJyLnVuc2hpZnQodGhpcy5zZWxlY3Rvcih0YXJnZXQpKTtcblx0ICAgIGlmICh0YXJnZXQuZ2V0QXR0cmlidXRlICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2lkJykgJiYgIC9eW0EtWmEtel1bLUEtWmEtejAtOV86Ll0qJC8udGVzdCh0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIikpKSB7XG5cdCAgICAgIHJldHVybiBhcnIuam9pbignID4gJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gdGhpcy5nZXREb21TZWxlY3Rvcih0YXJnZXQucGFyZW50Tm9kZSwgYXJyKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgYXJyLnVuc2hpZnQoXCJib2R5XCIpO1xuXHQgICAgcmV0dXJuIGFyci5qb2luKCcgPiAnKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdGV4cG9ydHMuaGFzQXR0cmlidXRlcyA9IGZ1bmN0aW9uKHRhcmdldCwgc2VhcmNoKSB7XG5cdCAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiBzZWFyY2gpIHtcblx0ICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZSh0YXJnZXQsIHNlYXJjaCk7XG5cdCAgfVxuXHQgIGlmICh1dGlsQXJyYXkuaXNBcnJheShzZWFyY2gpKSB7XG5cdCAgICB2YXIgciA9IGZhbHNlO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWFyY2gubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgaWYgKHRoaXMuaGFzQXR0cmlidXRlKHRhcmdldCwgc2VhcmNoW2ldKSkge1xuXHQgICAgICAgIHIgPSB0cnVlO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcjtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uKHRhcmdldCwgYXR0cikge1xuXHQgIGlmIChhdHRyID09PSBcImFwbHVzLWF1dG90cmFjay1vZmZcIikge1xuXHQgICAgdmFyIHQgPSB0YXJnZXQ7XG5cdCAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICB3aGlsZSh0KSB7XG5cdCAgICAgIGlmICh0Lmhhc0F0dHJpYnV0ZSAmJiB0Lmhhc0F0dHJpYnV0ZShhdHRyKSkge1xuXHQgICAgICAgIHJlc3VsdCA9IHQuZ2V0QXR0cmlidXRlKGF0dHIpID09PSAndHJ1ZSc7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgICAgdCA9IHQucGFyZW50Tm9kZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB0YXJnZXQuaGFzQXR0cmlidXRlID8gdGFyZ2V0Lmhhc0F0dHJpYnV0ZShhdHRyKSA6ICEoIXRhcmdldC5hdHRyaWJ1dGVzW2F0dHJdIHx8ICF0YXJnZXQuYXR0cmlidXRlc1thdHRyXS5zcGVjaWZpZWQpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIHRyaW0oZSkge1xuXHQgIHJldHVybiBlLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLCBcIlwiKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0RWxlbWVudENvbnRlbnQgPSBmdW5jdGlvbih0YXJnZXQsIHRhZ05hbWUpIHtcblx0ICB2YXIgcmVzdWx0ID0gXCJcIjtcblx0ICBpZiAodGFyZ2V0LnRleHRDb250ZW50KSB7XG5cdCAgICByZXN1bHQgPSB0cmltKHRhcmdldC50ZXh0Q29udGVudCk7XG5cdCAgfSBlbHNlIGlmICh0YXJnZXQuaW5uZXJUZXh0KSB7XG5cdCAgICByZXN1bHQgPSB0cmltKHRhcmdldC5pbm5lclRleHQpO1xuXHQgIH0gZWxzZSBpZiAodGFnTmFtZSA9PT0gXCJpbnB1dFwiIHx8IHRhZ05hbWUgPT09IFwiSU5QVVRcIikge1xuXHQgICAgdmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0ICAgIHZhciBhdXRvX3RyYWNrX21ldGEgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfQ09ORklHKTtcblx0ICAgIGlmIChhdXRvX3RyYWNrX21ldGEuY29sbGVjdF9pbnB1dCkge1xuXHQgICAgICByZXN1bHQgPSBlbmNvZGVVUklDb21wb25lbnQodGFyZ2V0LnZhbHVlKSB8fCBcIlwiO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoXCJidXR0b25cIiA9PT0gdGFyZ2V0LnR5cGUgfHwgXCJzdWJtaXRcIiA9PT0gdGFyZ2V0LnR5cGUpe1xuXHQgICAgcmVzdWx0ID0gdGFyZ2V0LnZhbHVlIHx8IFwiXCI7XG5cdCAgfSBcblx0ICBpZiAocmVzdWx0KSB7XG5cdCAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvW1xcclxcbl0vZywgXCIgXCIpLnJlcGxhY2UoL1sgXSsvZywgXCIgXCIpLnN1YnN0cmluZygwLCAyNTUpO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDEzOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IGV2ZW50VXRpbHMuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgYWRkSGFuZGxlcjogZnVuY3Rpb24oZWxlbWVudCwgdHlwZSwgaGFuZGxlcikge1xuXHQgICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcil7XG5cdCAgICAgIHZhciBhcGx1cyA9ICh3aW5kb3cuYXBsdXMgfHwgKHdpbmRvdy5hcGx1cyA9IHt9KSk7XG5cdCAgICAgIHZhciBjZmcgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfQ09ORklHKSB8fCB7fTtcblx0ICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsICEhY2ZnLmVsZW1lbnRfY2FwdHVyZV9lbmFibGUgfHwgZmFsc2UpO1xuXHQgICAgfSBlbHNlIGlmIChlbGVtZW50LmF0dGFjaEV2ZW50KXtcblx0ICAgICAgZWxlbWVudC5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBoYW5kbGVyKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsZW1lbnRbJ29uJyArIHR5cGVdID0gaGFuZGxlcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICByZW1vdmVIYW5kbGVyOiBmdW5jdGlvbihlbGVtZW50LCB0eXBlLCBoYW5kbGVyKSB7XG5cdCAgICBpZiAoZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9IGVsc2UgaWYgKGVsZW1lbnQuZGV0YWNoRXZlbnQpIHtcblx0ICAgICAgZWxlbWVudC5kZXRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBoYW5kbGVyKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsZW1lbnRbXCJvblwiICsgdHlwZV0gPSBudWxsO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGNsaWNrRXZlbnQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA9PT0gdHJ1ZSlcblx0ICAgICAgcmV0dXJuICd0b3VjaHN0YXJ0Jztcblx0ICAgIGVsc2Vcblx0ICAgICAgcmV0dXJuICdjbGljayc7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDE0MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHV0aWxPYmplY3QuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0ZXhwb3J0cy5pc09iamVjdCA9IGZ1bmN0aW9uKGUpIHtcblx0ICByZXR1cm4gbnVsbCAhPT0gZSAmJiBcIltvYmplY3QgT2JqZWN0XVwiID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzRW1wdHlPYmplY3QgPSBmdW5jdGlvbihlKSB7XG5cdCAgaWYgKHRoaXMuaXNPYmplY3QoZSkpIHtcblx0ICAgIGZvciAodmFyIHIgaW4gZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHIpKSBcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDE0MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IGFwbHVzX2hlYXRtYXBfaW5qZWN0LmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gKHdpbmRvdy5hcGx1cyB8fCAod2luZG93LmFwbHVzID0ge30pKTtcblx0ICAgICAgLy8g5L+d6K+B5Y+q5Lya5pyJ5LiA5LiqYXBsdXNfcGx1Z2luX3h3aui/kOihjFxuXHQgICAgICBpZiAoYXBsdXMuX2FwbHVzX3BsdWdpbl94d2opIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX3BsdWdpbl94d2ogPSB7XG5cdCAgICAgICAgICBzdGF0dXM6ICdpbml0J1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpKCk7XG5cdFxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxNDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBtYWluLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgd2luID0gd2luZG93O1xuXHR2YXIgZG9jID0gZG9jdW1lbnQ7XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdGZ1bmN0aW9uIGluaXRIZWF0TWFwKCkge1xuXHQgIHZhciB2ZXJzaW9uID0gNjtcblx0XG5cdCAgLyoqIOmYsuatouaXp+acieeJiOacrOimhuebluaWsOeJiOacrCAqKi9cblx0ICBpZiAod2luW1wiX2FwX3h3al9oZWF0XCJdICYmIHZlcnNpb24gPD0gd2luW1wiX2FwX3h3al9oZWF0XCJdLnZlcnNpb24pIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIHZhciBwZXJmb3JtYW5jZSA9IHdpbi5wZXJmb3JtYW5jZSB8fFxuXHQgICAgd2luLm1velBlcmZvcm1hbmNlIHx8XG5cdCAgICB3aW4ubXNQZXJmb3JtYW5jZSB8fFxuXHQgICAgd2luLndlYmtpdFBlcmZvcm1hbmNlIHx8IHsgX25hOiAxIH07XG5cdCAgdmFyIGxvYyA9IGxvY2F0aW9uO1xuXHQgIHZhciB1cmwgPSBsb2NhdGlvbi5ocmVmO1xuXHQgIHZhciBob3N0bmFtZSA9IGxvYy5ob3N0bmFtZTtcblx0ICB2YXIgbmF2ID0gd2luLm5hdmlnYXRvcjtcblx0ICB2YXIgYXBwX3ZlcnNpb24gPSBuYXYuYXBwVmVyc2lvbjtcblx0ICB2YXIgdWEgPSBuYXYgPyBuYXYudXNlckFnZW50IDogXCJcIjtcblx0ICB2YXIgX2hlYWRfbm9kZTsgLy8g55So5LqO5L+d5a2Y6aG16Z2i55qEIGhlYWQgTm9kZVxuXHQgIHZhciBfbWV0YV9ub2RlczsgLy8g55So5LqO5L+d5a2Y6aG16Z2iIGhlYWQg5Lit55qEIG1ldGEg6IqC54K56ZuG5ZCIXG5cdCAgdmFyIGlzX2Fob3QgPSBnZXRNZXRhQWhvdCgpO1xuXHQgIHZhciBpc19oZWF0bWFwX2VuYWJsZSA9IGdldE1ldGFIZWF0bWFwRW5hYmxlZCgpO1xuXHQgIHZhciByYXRlX2Fob3RfcmVzID0gZ2V0TWV0YUFob3RSZXMoKTtcblx0ICB2YXIgbWljcm9zY29wZV9kYXRhID0gZ2V0TWV0YU1pY3Jvc2NvcGUoKTtcblx0ICAvL3ZhciBJRlJBTUVfUFJFRklYID0gJ2lmcmFtZV8nO1xuXHQgIHZhciBhcGx1c19ub2RlID0gZG9jLmdldEVsZW1lbnRCeUlkKFwiYmVhY29uLWFwbHVzXCIpO1xuXHQgIHZhciBleHBhcmFtcyA9IHRyeVRvR2V0QXR0cmlidXRlKGFwbHVzX25vZGUsIFwiZXhwYXJhbXNcIik7XG5cdFxuXHQgIC8qKiDpu5jorqTphY3nva4gKiovXG5cdCAgdmFyIGRlZmF1bHRfY29uZmlnID0ge1xuXHQgICAgbGF5b3V0OiAwLFxuXHQgICAgc2hvdWxkQmluZE1vbml0b3I6IGZhbHNlLFxuXHQgIH07XG5cdFxuXHQgIHZhciBDT05GSUcgPSB7XG5cdCAgICBSQVRFOiB7XG5cdCAgICAgIFJFU09VUkNFX1RJTUlORzogaXNOYU4ocmF0ZV9haG90X3JlcykgPyAxIDogcmF0ZV9haG90X3Jlc1xuXHQgICAgfSxcblx0ICAgIC8vIFRIUkVTSE9MRDoge1xuXHQgICAgLy8gICAgIFJFU09VUkNFX1RJTUlORzogNTBcblx0ICAgIC8vIH0sXG5cdCAgICAvLyBERUJVRzoge1xuXHQgICAgLy8gICAgIFJFU09VUkNFX1RJTUlORzogbG9jYXRpb24uc2VhcmNoLmluZGV4T2YoJ2FwLWRlYnVnLXJlc291cmNlJykgPiAtMVxuXHQgICAgLy8gfSxcblx0ICAgIC8vIElEOiB7XG5cdCAgICAvLyAgICAgSUZSQU1FOiAnYXBsdXNfaWZyYW1lX3Jlc291cmNlX3RpbWluZycsXG5cdCAgICAvLyAgICAgRk9STTogJ2FwbHVzX2Zvcm1fcmVzb3VyY2VfdGltaW5nJ1xuXHQgICAgLy8gfVxuXHQgIH07XG5cdFxuXHQgIC8qKiDovoXliqnmlrnms5UgKiovXG5cdCAgdmFyIGlzTnVtYmVyID0gZnVuY3Rpb24gKHYpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIjtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5ZCm5YyF5ZCr5a2X56ym5LiyIHMyXG5cdCAgICogQHBhcmFtIHMxIHtTdHJpbmd9XG5cdCAgICogQHBhcmFtIHMyIHtTdHJpbmd9XG5cdCAgICovXG5cdCAgdmFyIGlzQ29udGFpbiA9IGZ1bmN0aW9uIChzMSwgczIpIHtcblx0ICAgIHJldHVybiBzMS5pbmRleE9mKHMyKSA+IC0xO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICDmoLnmja5zY3JpcHTkuIrnmoRleHBhcmFtc+WIpOaWreaYr+WQpuaYr+W6l+mTulxuXHQgICAqL1xuXHQgIHZhciBpc0RwcCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBpc0NvbnRhaW4oZXhwYXJhbXMsIFwiYXRwX2lzZHBwXCIpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqICDmjpLpmaTor6bmg4XpobXlkozlupfpk7rpobVcblx0ICAgKi9cblx0ICB2YXIgc2hvdWxkQmluZE1vbml0b3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoaXNfYWhvdCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaSwgbGVuO1xuXHQgICAgdmFyIGJsYWNrX2xpc3QgPSBbXCJpdGVtLnRhb2Jhby5jb21cIiwgXCJkZXRhaWwudG1hbGwuY29tXCIsIFwicy50YW9iYW8uY29tXCJdO1xuXHQgICAgbGVuID0gYmxhY2tfbGlzdC5sZW5ndGg7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgaWYgKGlzQ29udGFpbihob3N0bmFtZSwgYmxhY2tfbGlzdFtpXSkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyAyMDEzLTAxLTA4IOW6numDvemcgOaxglxuXHQgICAgaWYgKGlzQ29udGFpbih1cmwsIFwiL2dvL2FjdC9cIikpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiAhaXNEcHAoKTtcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBnZXRFeHBhcmFtcygpIHtcblx0ICAgIHZhciBleHBhcmFtc0FycmF5ID0gZXhwYXJhbXMuc3BsaXQoXCImXCIpLFxuXHQgICAgICBleHBhcmFtc01hcCA9IHt9O1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBhcmFtc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBleHBhcmFtID0gZXhwYXJhbXNBcnJheVtpXSxcblx0ICAgICAgICBlID0gZXhwYXJhbS5zcGxpdChcIj1cIik7XG5cdCAgICAgIGV4cGFyYW1zTWFwW2VbMF1dID0gZVsxXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBleHBhcmFtc01hcDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyeVRvR2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuXHQgICAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGVcblx0ICAgICAgPyBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyX25hbWUpIHx8IFwiXCJcblx0ICAgICAgOiBcIlwiO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICog5Y+W5b6X6aG16Z2i5LiKIGhlYWQg5Lit55qE5omA5pyJIG1ldGEg5YWD57SgXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gZ2V0TWV0YVRhZ3MoKSB7XG5cdCAgICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xuXHRcblx0ICAgIHJldHVybiAoXG5cdCAgICAgIF9tZXRhX25vZGVzIHx8XG5cdCAgICAgIChfaGVhZF9ub2RlXG5cdCAgICAgICAgPyAoX21ldGFfbm9kZXMgPSBfaGVhZF9ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibWV0YVwiKSlcblx0ICAgICAgICA6IFtdKVxuXHQgICAgKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGdldE1ldGFDb250ZW50QnlOYW1lKG5hbWUpIHtcblx0ICAgIHZhciBpO1xuXHQgICAgdmFyIG1ldGE7XG5cdCAgICB2YXIgbWV0YV9ub2RlcyA9IGdldE1ldGFUYWdzKCk7XG5cdCAgICB2YXIgbCA9IG1ldGFfbm9kZXMubGVuZ3RoO1xuXHQgICAgdmFyIGNvbnRlbnQ7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBtZXRhID0gbWV0YV9ub2Rlc1tpXTtcblx0ICAgICAgaWYgKHRyeVRvR2V0QXR0cmlidXRlKG1ldGEsIFwibmFtZVwiKSA9PT0gbmFtZSkge1xuXHQgICAgICAgIGNvbnRlbnQgPSB0cnlUb0dldEF0dHJpYnV0ZShtZXRhLCBcImNvbnRlbnRcIik7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gY29udGVudDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGdldE1ldGFBaG90KCkge1xuXHQgICAgcmV0dXJuIGdldE1ldGFDb250ZW50QnlOYW1lKFwiYWhvdC1hcGx1c1wiKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGdldE1ldGFIZWF0bWFwRW5hYmxlZCgpIHtcblx0ICAgIHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHJldHVybiBnZXRNZXRhQ29udGVudEJ5TmFtZSgnYXBsdXMtaGVhdG1hcC1lbmFibGVkJykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWhlYXRtYXAtZW5hYmxlZCcpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICog5Y+W5b6XIGhlYWQgLyBtZXRhIOS4reeahCBhcGx1cy1yYXRlLWFob3Rcblx0ICAgKiDlvaLlpoLvvJpcblx0ICAgKiA8bWV0YSBuYW1lPSdhcGx1cy1yYXRlLWFob3QnIGNvbnRlbnQ9JzAuMSc+XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gZ2V0TWV0YUFob3RSZXMoKSB7XG5cdCAgICB2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgY29udGVudCA9IGdldE1ldGFDb250ZW50QnlOYW1lKCdhcGx1cy1yYXRlLWFob3QnKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmF0ZS1haG90Jyk7XG5cdCAgICByZXR1cm4gcGFyc2VGbG9hdChjb250ZW50IHx8ICcnKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGdldE1ldGFNaWNyb3Njb3BlKCkge1xuXHQgICAgcmV0dXJuIGdldE1ldGFDb250ZW50QnlOYW1lKFwibWljcm9zY29wZS1kYXRhXCIpO1xuXHQgIH1cblx0XG5cdCAgLy8gZnVuY3Rpb24gdXNlSWZyYW1lKHNpZCwgdXJsKSB7XG5cdCAgLy8gICAgIHZhciBpZnJhbWVpZCA9IHNpZDtcblx0ICAvLyAgICAgdmFyIGlmcmFtZSA9IGRvYy5nZXRFbGVtZW50QnlJZChpZnJhbWVpZCk7XG5cdFxuXHQgIC8vICAgICBpZiAoIWlmcmFtZSkge1xuXHQgIC8vICAgICAgICAgaWZyYW1lID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXHQgIC8vICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnZnJhbWVib3JkZXInLCAnMCcpO1xuXHQgIC8vICAgICAgICAgaWZyYW1lLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6MDtoZWlnaHQ6MDtib3JkZXI6MDtkaXNwbGF5Om5vbmU7Jztcblx0ICAvLyAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2lkJywgaWZyYW1laWQpO1xuXHQgIC8vICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnbmFtZScsIGlmcmFtZWlkKTtcblx0ICAvLyAgICAgfVxuXHRcblx0ICAvLyAgICAgaWYgKHVybCkge1xuXHQgIC8vICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcblx0ICAvLyAgICAgfVxuXHRcblx0ICAvLyAgICAgaWYgKCFpZnJhbWUucGFyZW50Tm9kZSkge1xuXHQgIC8vICAgICAgICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblx0ICAvLyAgICAgfVxuXHRcblx0ICAvLyAgICAgcmV0dXJuIGlmcmFtZTtcblx0ICAvLyB9XG5cdFxuXHQgIHZhciBfZm4gPSB3aW4uYWRkRXZlbnRMaXN0ZW5lclxuXHQgICAgPyBmdW5jdGlvbiAoY2IpIHtcblx0ICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGNiLCBmYWxzZSk7XG5cdCAgICB9XG5cdCAgICA6IGZ1bmN0aW9uICgpIHt9O1xuXHQgIHZhciBvbmxvYWQgPSB3aW4uYXR0YWNoRXZlbnRcblx0ICAgID8gZnVuY3Rpb24gKGNiKSB7XG5cdCAgICAgIHdpbi5hdHRhY2hFdmVudChcIm9ubG9hZFwiLCBjYik7XG5cdCAgICB9XG5cdCAgICA6IF9mbjtcblx0XG5cdCAgLyoqXG5cdCAgICog55Sf5oiQ5pys6aG155qEIHB2IGlkXG5cdCAgICovXG5cdCAgLy8gdmFyIG1ha2VQdmlkID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vICAgdmFyIHJuZF9zdHJzID0gXCJcIixcblx0ICAvLyAgICAgY2hhcnMgPSBcIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCI7XG5cdFxuXHQgIC8vICAgd2hpbGUgKHJuZF9zdHJzLmxlbmd0aCA8IDE2KSB7XG5cdCAgLy8gICAgIHJuZF9zdHJzICs9IGNoYXJzLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MiksIDEpO1xuXHQgIC8vICAgfVxuXHQgIC8vICAgcmV0dXJuIHJuZF9zdHJzO1xuXHQgIC8vIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNjYxODE4L2phdmFzY3JpcHQtZ2V0LXhwYXRoLW9mLWEtbm9kZVxuXHQgICAqIEBwYXJhbSBlbFxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0ICB2YXIgZ2V0WFBhdGggPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIHZhciBhbGxfbm9kZXMgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLFxuXHQgICAgICBzZWdzLFxuXHQgICAgICBpLFxuXHQgICAgICBzaWIsXG5cdCAgICAgIHVuaXF1ZV9pZF9jb3VudCxcblx0ICAgICAgbm9kZSxcblx0ICAgICAgZWxfaWQ7XG5cdCAgICBmb3IgKHNlZ3MgPSBbXTsgZWwgJiYgZWwubm9kZVR5cGUgPT09IDE7IGVsID0gZWwucGFyZW50Tm9kZSkge1xuXHQgICAgICBpZiAoZWwuaWQpIHtcblx0ICAgICAgICBlbF9pZCA9IGVsLmlkO1xuXHQgICAgICAgIHVuaXF1ZV9pZF9jb3VudCA9IDA7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGFsbF9ub2Rlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgbm9kZSA9IGFsbF9ub2Rlc1tpXTtcblx0ICAgICAgICAgIGlmIChub2RlLmlkICYmIG5vZGUuaWQgPT09IGVsX2lkKSB7XG5cdCAgICAgICAgICAgIHVuaXF1ZV9pZF9jb3VudCsrO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UpIHtcblx0ICAgICAgICAgIHNlZ3MudW5zaGlmdChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyBcIltAaWQ9J1wiICsgZWxfaWQgKyBcIiddXCIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodW5pcXVlX2lkX2NvdW50ID09PSAxKSB7XG5cdCAgICAgICAgICBzZWdzLnVuc2hpZnQoXCIvXCIpO1xuXHQgICAgICAgICAgcmV0dXJuIHNlZ3Muam9pbihcIi9cIik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvciAoaSA9IDEsIHNpYiA9IGVsLnByZXZpb3VzU2libGluZzsgc2liOyBzaWIgPSBzaWIucHJldmlvdXNTaWJsaW5nKSB7XG5cdCAgICAgICAgICBpZiAoc2liLnRhZ05hbWUgPT09IGVsLnRhZ05hbWUpIHtcblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSkge1xuXHQgICAgICAgICAgc2Vncy51bnNoaWZ0KGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArIFwiW1wiICsgaSArIFwiXVwiKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBzZWdzLmxlbmd0aCA/IFwiL1wiICsgc2Vncy5qb2luKFwiL1wiKSA6IG51bGw7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogb2JqZWN0IHRvIHBhcmFtXG5cdCAgICog5bCG5LiA5Liq566A5Y2V5a+56LGh6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI9cblx0ICAgKiBAcGFyYW0gb2JqIHtPYmplY3R9XG5cdCAgICovXG5cdCAgLy8gdmFyIG9iajJwYXJhbSA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICAvLyAgIHZhciBhID0gW10sXG5cdCAgLy8gICAgIGs7XG5cdCAgLy8gICBmb3IgKGsgaW4gb2JqKSB7XG5cdCAgLy8gICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoaykpIHtcblx0ICAvLyAgICAgICBhLnB1c2goayArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtrXSkpO1xuXHQgIC8vICAgICB9XG5cdCAgLy8gICB9XG5cdCAgLy8gICByZXR1cm4gYS5qb2luKFwiJlwiKTtcblx0ICAvLyB9O1xuXHRcblx0ICAvKipcblx0ICAgKiDojrflj5bngrnlh7vkuovku7bnmoTkvY3nva5cblx0ICAgKiBAcGFyYW0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIGVcblx0ICAgKiBAcGFyYW0gbGF5b3V0XG5cdCAgICogQHJldHVybnMge3t4OiAoTnVtYmVyfHBhZ2VYfCopLCB5OiAoTnVtYmVyfHBhZ2VZfCopLCBleDogbnVtYmVyLCBleTogKn19XG5cdCAgICovXG5cdCAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5cdCAgdmFyIGdldFBvc2l0aW9uID0gZnVuY3Rpb24gKHRhcmdldCwgZSwgbGF5b3V0KSB7XG5cdCAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblx0ICAgIHZhciBkb2Nfd2lkdGggPSBNYXRoLm1heChkLnNjcm9sbFdpZHRoLCBkLmNsaWVudFdpZHRoKSwgLy8g572R6aG15paH5qGj5a69XG5cdCAgICAgIHNjcm9sbF90b3AgPSBkLnNjcm9sbFRvcCwgLy8g5LiK6L655rua5Yqo5p2h5Y235Y6755qE5a695bqmXG5cdCAgICAgIHNjcm9sbF9sZWZ0ID0gZC5zY3JvbGxMZWZ0OyAvLyDlt6bovrnmu5rliqjmnaHljbfljrvnmoTlrr3luqZcblx0XG5cdCAgICAvLyDlj5blvpfngrnlh7vkuovku7blnKjpobXpnaLkuIrnmoTlnZDmoIdcblx0ICAgIHZhciB4ID0gZS5wYWdlWCxcblx0ICAgICAgeSA9IGUucGFnZVk7XG5cdCAgICBpZiAoIWlzTnVtYmVyKHgpKSB7XG5cdCAgICAgIHggPSBlLmNsaWVudFggKyBzY3JvbGxfbGVmdDtcblx0ICAgICAgeSA9IGUuY2xpZW50WSArIHNjcm9sbF90b3A7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8g5Y+W5b6XIGVsIOWFg+e0oOeahOWdkOagh+S9jee9ruWPiuWuveW6pumrmOW6plxuXHQgICAgdmFyIGV4ID0gLTEsXG5cdCAgICAgIGV5LFxuXHQgICAgICByO1xuXHQgICAgaWYgKHRhcmdldCkge1xuXHQgICAgICBpZiAodGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIOWPguiAg++8mmh0dHA6Ly93d3cucnVhbnlpZmVuZy5jb20vYmxvZy8yMDA5LzA5L2ZpbmRfZWxlbWVudF9zX3Bvc2l0aW9uX3VzaW5nX2phdmFzY3JpcHQuaHRtbFxuXHQgICAgICAgICAqIOS4iuaWh+aPkOWIsOebruWJjSBJReOAgUZpcmVmb3ggMy4wK+OAgU9wZXJhIDkuNSvpg73mlK/mjIHor6Xmlrnms5XvvIzogIxGaXJlZm94IDIueOOAgVNhZmFyaeOAgUNocm9tZeOAgUtvbnF1ZXJvcuS4jeaUr+aMgVxuXHQgICAgICAgICAqIOS4jei/h+e7j+a1i+ivle+8jENocm9tZSA5IOS7peWPiiBTYWZhcmkgNSDpg73mlK/mjIHor6Xmlrnms5Vcblx0ICAgICAgICAgKi9cblx0ICAgICAgICByID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgICAgIGV4ID0gci5sZWZ0ICsgc2Nyb2xsX2xlZnQ7XG5cdCAgICAgICAgZXkgPSByLnRvcCArIHNjcm9sbF90b3A7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8g5re75Yqg5LiN5pSv5oyB6K+l5pa55rOV55qE5rWP6KeI5Zmo5LiL5Y+W5b6XIGVsIOWFg+e0oOeahOS9jee9rueahOS7o+eggVxuXHQgICAgICAgIC8vIE5PVEUg5aaC5Li65LqG5Luj56CB57K+566A77yM5q2k5q2l5Lmf5Y+v5Lul5b+955Wl77yM5a+55pyA57uI57uT5p6c5b2x5ZON5LiN5aSnXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIOagueaNriBsYXlvdXQg6L2s5o2i5Z2Q5qCHXG5cdCAgICAgKi9cblx0ICAgIC8vIOeDreWKm+WbvuS4gOacn+S4jeWBmuWdkOagh+i9rOaNolxuXHQgICAgaWYgKGxheW91dCA9PT0gMCB8fCBsYXlvdXQgPT09IFwiMFwiKSB7XG5cdCAgICAgIC8vIOWbuuWumuWuveW6puWxheS4re+8jOS7pemhtemdouS4reWegue6v+mhtumDqOS4uuWOn+eCuVxuXHQgICAgICB2YXIgZG9jX3dpZHRoXzIgPSBkb2Nfd2lkdGggPj4gMTtcblx0ICAgICAgeCAtPSBkb2Nfd2lkdGhfMjtcblx0ICAgICAgZXggLT0gZG9jX3dpZHRoXzI7XG5cdCAgICB9IGVsc2UgaWYgKGxheW91dCA9PT0gMikge1xuXHQgICAgICB4IC09IGRvY193aWR0aDtcblx0ICAgICAgZXggLT0gZG9jX3dpZHRoO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB7IHg6IHgsIHk6IHksIGV4OiBleCwgZXk6IGV5LCBzdzogZG9jX3dpZHRoIH07XG5cdCAgfTtcblx0XG5cdCAgdmFyIG51bWJlcmlmeSA9IGZ1bmN0aW9uIChzKSB7XG5cdCAgICB2YXIgYyA9IDA7XG5cdCAgICAvLyBjb252ZXJ0ICcxLjIuMy40JyB0byAxLjIzNFxuXHQgICAgcmV0dXJuIHBhcnNlRmxvYXQoXG5cdCAgICAgIHMucmVwbGFjZSgvXFwuL2csIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gYysrID09PSAwID8gXCIuXCIgOiBcIlwiO1xuXHQgICAgICB9KVxuXHQgICAgKTtcblx0ICB9O1xuXHQgIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RyaWRlbnRfKHNvZnR3YXJlKVxuXHQgIHZhciBzZXRUcmlkZW50VmVyc2lvbiA9IGZ1bmN0aW9uICh1YSwgVUEpIHtcblx0ICAgIHZhciBjb3JlLCBtO1xuXHQgICAgVUFbKGNvcmUgPSBcInRyaWRlbnRcIildID0gMC4xO1xuXHRcblx0ICAgIGlmICgobSA9IHVhLm1hdGNoKC9UcmlkZW50XFwvKFtcXGQuXSopLykpICYmIG1bMV0pIHtcblx0ICAgICAgVUFbY29yZV0gPSBudW1iZXJpZnkobVsxXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgVUEuY29yZSA9IGNvcmU7XG5cdCAgfTtcblx0XG5cdCAgdmFyIGdldElFVmVyc2lvbiA9IGZ1bmN0aW9uICh1YSkge1xuXHQgICAgdmFyIG0sIHY7XG5cdCAgICBpZiAoXG5cdCAgICAgIChtID0gdWEubWF0Y2goL01TSUUgKFteO10qKXxUcmlkZW50Lio7IHJ2KD86XFxzfDopPyhbMC05Ll0rKS8pKSAmJlxuXHQgICAgICAodiA9IG1bMV0gfHwgbVsyXSlcblx0ICAgICkge1xuXHQgICAgICByZXR1cm4gbnVtYmVyaWZ5KHYpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIDA7XG5cdCAgfTtcblx0XG5cdCAgdmFyIGRlYWxEZWZhdWx0ID0gZnVuY3Rpb24gKHMpIHtcblx0ICAgIHJldHVybiBzIHx8IFwib3RoZXJcIjtcblx0ICB9O1xuXHRcblx0ICB2YXIgZ2V0RGVzY3JpcHRvckZyb21Vc2VyQWdlbnQgPSBmdW5jdGlvbiAodWEpIHtcblx0ICAgIHZhciBFTVBUWSA9IFwiXCI7XG5cdCAgICB2YXIgb3M7XG5cdCAgICB2YXIgY29yZSA9IEVNUFRZO1xuXHQgICAgdmFyIHNoZWxsID0gRU1QVFk7XG5cdCAgICB2YXIgbTtcblx0ICAgIHZhciBJRV9ERVRFQ1RfUkFOR0UgPSBbNiwgOV07XG5cdCAgICB2YXIgaWVWZXJzaW9uO1xuXHQgICAgdmFyIHY7XG5cdCAgICB2YXIgZW5kO1xuXHQgICAgdmFyIFZFUlNJT05fUExBQ0VIT0xERVIgPSBcInt7dmVyc2lvbn19XCI7XG5cdCAgICB2YXIgSUVfREVURUNUX1RQTCA9XG5cdCAgICAgIFwiPCEtLVtpZiBJRSBcIiArIFZFUlNJT05fUExBQ0VIT0xERVIgKyBcIl0+PFwiICsgXCJzPjwvcz48IVtlbmRpZl0tLT5cIjtcblx0ICAgIHZhciBkaXYgPSBkb2MgJiYgZG9jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICB2YXIgcyA9IFtdO1xuXHQgICAgdmFyIGV4dHJhX25hbWU7XG5cdCAgICB2YXIgZXh0cmFfdmVyc2lvbjtcblx0ICAgIHZhciBleHRlcm5hbDtcblx0ICAgIC8qKlxuXHQgICAgICogS0lTU1kgVUFcblx0ICAgICAqIEBjbGFzcyBLSVNTWS5VQVxuXHQgICAgICogQHNpbmdsZXRvblxuXHQgICAgICovXG5cdCAgICB2YXIgVUEgPSB7XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiB3ZWJraXQgdmVyc2lvblxuXHQgICAgICAgKiBAdHlwZSB1bmRlZmluZWR8TnVtYmVyXG5cdCAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcblx0ICAgICAgICovXG5cdCAgICAgIHdlYmtpdDogdW5kZWZpbmVkLFxuXHQgICAgICAvKipcblx0ICAgICAgICogdHJpZGVudCB2ZXJzaW9uXG5cdCAgICAgICAqIEB0eXBlIHVuZGVmaW5lZHxOdW1iZXJcblx0ICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuXHQgICAgICAgKi9cblx0ICAgICAgdHJpZGVudDogdW5kZWZpbmVkLFxuXHQgICAgICAvKipcblx0ICAgICAgICogZ2Vja28gdmVyc2lvblxuXHQgICAgICAgKiBAdHlwZSB1bmRlZmluZWR8TnVtYmVyXG5cdCAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcblx0ICAgICAgICovXG5cdCAgICAgIGdlY2tvOiB1bmRlZmluZWQsXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBwcmVzdG8gdmVyc2lvblxuXHQgICAgICAgKiBAdHlwZSB1bmRlZmluZWR8TnVtYmVyXG5cdCAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcblx0ICAgICAgICovXG5cdCAgICAgIHByZXN0bzogdW5kZWZpbmVkLFxuXHQgICAgICAvKipcblx0ICAgICAgICogY2hyb21lIHZlcnNpb25cblx0ICAgICAgICogQHR5cGUgdW5kZWZpbmVkfE51bWJlclxuXHQgICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG5cdCAgICAgICAqL1xuXHQgICAgICBjaHJvbWU6IHVuZGVmaW5lZCxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIHNhZmFyaSB2ZXJzaW9uXG5cdCAgICAgICAqIEB0eXBlIHVuZGVmaW5lZHxOdW1iZXJcblx0ICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuXHQgICAgICAgKi9cblx0ICAgICAgc2FmYXJpOiB1bmRlZmluZWQsXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBmaXJlZm94IHZlcnNpb25cblx0ICAgICAgICogQHR5cGUgdW5kZWZpbmVkfE51bWJlclxuXHQgICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG5cdCAgICAgICAqL1xuXHQgICAgICBmaXJlZm94OiB1bmRlZmluZWQsXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBpZSB2ZXJzaW9uXG5cdCAgICAgICAqIEB0eXBlIHVuZGVmaW5lZHxOdW1iZXJcblx0ICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuXHQgICAgICAgKi9cblx0ICAgICAgaWU6IHVuZGVmaW5lZCxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIGllIGRvY3VtZW50IG1vZGVcblx0ICAgICAgICogQHR5cGUgdW5kZWZpbmVkfE51bWJlclxuXHQgICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG5cdCAgICAgICAqL1xuXHQgICAgICBpZU1vZGU6IHVuZGVmaW5lZCxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIG9wZXJhIHZlcnNpb25cblx0ICAgICAgICogQHR5cGUgdW5kZWZpbmVkfE51bWJlclxuXHQgICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG5cdCAgICAgICAqL1xuXHQgICAgICBvcGVyYTogdW5kZWZpbmVkLFxuXHQgICAgICAvKipcblx0ICAgICAgICogbW9iaWxlIGJyb3dzZXIuIGFwcGxlLCBhbmRyb2lkLlxuXHQgICAgICAgKiBAdHlwZSBTdHJpbmdcblx0ICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuXHQgICAgICAgKi9cblx0ICAgICAgbW9iaWxlOiB1bmRlZmluZWQsXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBicm93c2VyIHJlbmRlciBlbmdpbmUgbmFtZS4gd2Via2l0LCB0cmlkZW50XG5cdCAgICAgICAqIEB0eXBlIFN0cmluZ1xuXHQgICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG5cdCAgICAgICAqL1xuXHQgICAgICBjb3JlOiB1bmRlZmluZWQsXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBicm93c2VyIHNoZWxsIG5hbWUuIGllLCBjaHJvbWUsIGZpcmVmb3hcblx0ICAgICAgICogQHR5cGUgU3RyaW5nXG5cdCAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcblx0ICAgICAgICovXG5cdCAgICAgIHNoZWxsOiB1bmRlZmluZWQsXG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogUGhhbnRvbUpTIHZlcnNpb24gbnVtYmVyXG5cdCAgICAgICAqIEB0eXBlIHVuZGVmaW5lZHxOdW1iZXJcblx0ICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuXHQgICAgICAgKi9cblx0ICAgICAgcGhhbnRvbWpzOiB1bmRlZmluZWQsXG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogb3BlcmF0aW5nIHN5c3RlbS4gYW5kcm9pZCwgaW9zLCBsaW51eCwgd2luZG93c1xuXHQgICAgICAgKiBAdHlwZSBzdHJpbmdcblx0ICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuXHQgICAgICAgKi9cblx0ICAgICAgb3M6IHVuZGVmaW5lZCxcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBpcGFkIGlvcyB2ZXJzaW9uXG5cdCAgICAgICAqIEB0eXBlIE51bWJlclxuXHQgICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG5cdCAgICAgICAqL1xuXHQgICAgICBpcGFkOiB1bmRlZmluZWQsXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBpcGhvbmUgaW9zIHZlcnNpb25cblx0ICAgICAgICogQHR5cGUgTnVtYmVyXG5cdCAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcblx0ICAgICAgICovXG5cdCAgICAgIGlwaG9uZTogdW5kZWZpbmVkLFxuXHQgICAgICAvKipcblx0ICAgICAgICogaXBvZCBpb3Ncblx0ICAgICAgICogQHR5cGUgTnVtYmVyXG5cdCAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcblx0ICAgICAgICovXG5cdCAgICAgIGlwb2Q6IHVuZGVmaW5lZCxcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIGlvcyB2ZXJzaW9uXG5cdCAgICAgICAqIEB0eXBlIE51bWJlclxuXHQgICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG5cdCAgICAgICAqL1xuXHQgICAgICBpb3M6IHVuZGVmaW5lZCxcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBhbmRyb2lkIHZlcnNpb25cblx0ICAgICAgICogQHR5cGUgTnVtYmVyXG5cdCAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcblx0ICAgICAgICovXG5cdCAgICAgIGFuZHJvaWQ6IHVuZGVmaW5lZCxcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBub2RlanMgdmVyc2lvblxuXHQgICAgICAgKiBAdHlwZSBOdW1iZXJcblx0ICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuXHQgICAgICAgKi9cblx0ICAgICAgbm9kZWpzOiB1bmRlZmluZWQsXG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogZXh0cmEgYnJvd3NlciBuYW1lXG5cdCAgICAgICAqL1xuXHQgICAgICBleHRyYU5hbWU6IHVuZGVmaW5lZCxcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBleHRyYSBicm93c2VyIHZlcnNpb25cblx0ICAgICAgICovXG5cdCAgICAgIGV4dHJhVmVyc2lvbjogdW5kZWZpbmVkLFxuXHQgICAgfTtcblx0XG5cdCAgICAvLyBlamVjdGFcblx0ICAgIGlmIChkaXYgJiYgZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKSB7XG5cdCAgICAgIC8vIHRyeSB0byB1c2UgSUUtQ29uZGl0aW9uYWwtQ29tbWVudCBkZXRlY3QgSUUgbW9yZSBhY2N1cmF0ZWx5XG5cdCAgICAgIC8vIElFMTAgZG9lc24ndCBzdXBwb3J0IHRoaXMgbWV0aG9kLCBAcmVmOiBodHRwOi8vYmxvZ3MubXNkbi5jb20vYi9pZS9hcmNoaXZlLzIwMTEvMDcvMDYvaHRtbDUtcGFyc2luZy1pbi1pZTEwLmFzcHhcblx0ICAgICAgZGl2LmlubmVySFRNTCA9IElFX0RFVEVDVF9UUEwucmVwbGFjZShWRVJTSU9OX1BMQUNFSE9MREVSLCBcIlwiKTtcblx0ICAgICAgcyA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNcIik7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHMubGVuZ3RoID4gMCkge1xuXHQgICAgICBzZXRUcmlkZW50VmVyc2lvbih1YSwgVUEpO1xuXHRcblx0ICAgICAgLy8gRGV0ZWN0IHRoZSBhY2N1cmF0ZSB2ZXJzaW9uXG5cdCAgICAgIC8vIOazqOaEj++8mlxuXHQgICAgICAvLyAgVUEuc2hlbGwgPSBpZSwg6KGo56S65aSW5aOz5pivIGllXG5cdCAgICAgIC8vICDkvYYgVUEuaWUgPSA3LCDlubbkuI3ku6PooajlpJblo7PmmK8gaWU3LCDov5jmnInlj6/og73mmK8gaWU4IOeahOWFvOWuueaooeW8j1xuXHQgICAgICAvLyAg5a+55LqOIGllOCDnmoTlhbzlrrnmqKHlvI/vvIzov5jopoHpgJrov4cgZG9jdW1lbnRNb2RlIOWOu+WIpOaWreOAguS9huatpOWkhOS4jeiDveiuqSBVQS5pZSA9IDgsIOWQpuWImVxuXHQgICAgICAvLyAg5b6I5aSa6ISa5pys5Yik5pat5Lya5aSx6K+v44CC5Zug5Li6IGllOCDnmoTlhbzlrrnmqKHlvI/ooajnjrDooYzkuLrlkowgaWU3IOebuOWQjO+8jOiAjOS4jeaYr+WSjCBpZTgg55u45ZCMXG5cdCAgICAgIGZvciAodiA9IElFX0RFVEVDVF9SQU5HRVswXSwgZW5kID0gSUVfREVURUNUX1JBTkdFWzFdOyB2IDw9IGVuZDsgdisrKSB7XG5cdCAgICAgICAgZGl2LmlubmVySFRNTCA9IElFX0RFVEVDVF9UUEwucmVwbGFjZShWRVJTSU9OX1BMQUNFSE9MREVSLCB2KTtcblx0ICAgICAgICBpZiAocy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICBVQVsoc2hlbGwgPSBcImllXCIpXSA9IHY7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9raXNzeXRlYW0va2lzc3kvaXNzdWVzLzMyMVxuXHQgICAgICAvLyB3aW44IGVtYmVkIGFwcFxuXHQgICAgICBpZiAoIVVBLmllICYmIChpZVZlcnNpb24gPSBnZXRJRVZlcnNpb24odWEpKSkge1xuXHQgICAgICAgIFVBWyhzaGVsbCA9IFwiaWVcIildID0gaWVWZXJzaW9uO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBXZWJLaXRcblx0ICAgICAgaWYgKChtID0gdWEubWF0Y2goL0FwcGxlV2ViS2l0XFwvKFtcXGQuXSopLykpICYmIG1bMV0pIHtcblx0ICAgICAgICBVQVsoY29yZSA9IFwid2Via2l0XCIpXSA9IG51bWJlcmlmeShtWzFdKTtcblx0XG5cdCAgICAgICAgaWYgKChtID0gdWEubWF0Y2goL09QUlxcLyhcXGQrXFwuXFxkKykvKSkgJiYgbVsxXSkge1xuXHQgICAgICAgICAgVUFbKHNoZWxsID0gXCJvcGVyYVwiKV0gPSBudW1iZXJpZnkobVsxXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIENocm9tZVxuXHQgICAgICAgIGVsc2UgaWYgKChtID0gdWEubWF0Y2goL0Nocm9tZVxcLyhbXFxkLl0qKS8pKSAmJiBtWzFdKSB7XG5cdCAgICAgICAgICBVQVsoc2hlbGwgPSBcImNocm9tZVwiKV0gPSBudW1iZXJpZnkobVsxXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIFNhZmFyaVxuXHQgICAgICAgIGVsc2UgaWYgKChtID0gdWEubWF0Y2goL1xcLyhbXFxkLl0qKSBTYWZhcmkvKSkgJiYgbVsxXSkge1xuXHQgICAgICAgICAgVUFbKHNoZWxsID0gXCJzYWZhcmlcIildID0gbnVtYmVyaWZ5KG1bMV0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gQXBwbGUgTW9iaWxlXG5cdCAgICAgICAgaWYgKC8gTW9iaWxlXFwvLy50ZXN0KHVhKSAmJiB1YS5tYXRjaCgvaVBhZHxpUG9kfGlQaG9uZS8pKSB7XG5cdCAgICAgICAgICBVQS5tb2JpbGUgPSBcImFwcGxlXCI7IC8vIGlQYWQsIGlQaG9uZSBvciBpUG9kIFRvdWNoXG5cdFxuXHQgICAgICAgICAgbSA9IHVhLm1hdGNoKC9PUyAoW15cXHNdKikvKTtcblx0ICAgICAgICAgIGlmIChtICYmIG1bMV0pIHtcblx0ICAgICAgICAgICAgVUEuaW9zID0gbnVtYmVyaWZ5KG1bMV0ucmVwbGFjZShcIl9cIiwgXCIuXCIpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG9zID0gXCJpb3NcIjtcblx0ICAgICAgICAgIG0gPSB1YS5tYXRjaCgvaVBhZHxpUG9kfGlQaG9uZS8pO1xuXHQgICAgICAgICAgaWYgKG0gJiYgbVswXSkge1xuXHQgICAgICAgICAgICBVQVttWzBdLnRvTG93ZXJDYXNlKCldID0gVUEuaW9zO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoLyBBbmRyb2lkL2kudGVzdCh1YSkpIHtcblx0ICAgICAgICAgIGlmICgvTW9iaWxlLy50ZXN0KHVhKSkge1xuXHQgICAgICAgICAgICBvcyA9IFVBLm1vYmlsZSA9IFwiYW5kcm9pZFwiO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgbSA9IHVhLm1hdGNoKC9BbmRyb2lkIChbXlxcc10qKTsvKTtcblx0ICAgICAgICAgIGlmIChtICYmIG1bMV0pIHtcblx0ICAgICAgICAgICAgVUEuYW5kcm9pZCA9IG51bWJlcmlmeShtWzFdKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gT3RoZXIgV2ViS2l0IE1vYmlsZSBCcm93c2Vyc1xuXHQgICAgICAgIGVsc2UgaWYgKChtID0gdWEubWF0Y2goL05va2lhTlteXFwvXSp8QW5kcm9pZCBcXGRcXC5cXGR8d2ViT1NcXC9cXGRcXC5cXGQvKSkpIHtcblx0ICAgICAgICAgIFVBLm1vYmlsZSA9IG1bMF0udG9Mb3dlckNhc2UoKTsgLy8gTm9raWEgTi1zZXJpZXMsIEFuZHJvaWQsIHdlYk9TLCBleDogTm9raWFOOTVcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICgobSA9IHVhLm1hdGNoKC9QaGFudG9tSlNcXC8oW15cXHNdKikvKSkgJiYgbVsxXSkge1xuXHQgICAgICAgICAgVUEucGhhbnRvbWpzID0gbnVtYmVyaWZ5KG1bMV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICAvLyBOT1QgV2ViS2l0XG5cdCAgICAgIGVsc2Uge1xuXHQgICAgICAgIC8vIFByZXN0b1xuXHQgICAgICAgIC8vIHJlZjogaHR0cDovL3d3dy51c2VyYWdlbnRzdHJpbmcuY29tL3BhZ2VzL3VzZXJhZ2VudHN0cmluZy5waHBcblx0ICAgICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvUHJlc3RvXFwvKFtcXGQuXSopLykpICYmIG1bMV0pIHtcblx0ICAgICAgICAgIFVBWyhjb3JlID0gXCJwcmVzdG9cIildID0gbnVtYmVyaWZ5KG1bMV0pO1xuXHRcblx0ICAgICAgICAgIC8vIE9wZXJhXG5cdCAgICAgICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvT3BlcmFcXC8oW1xcZC5dKikvKSkgJiYgbVsxXSkge1xuXHQgICAgICAgICAgICBVQVsoc2hlbGwgPSBcIm9wZXJhXCIpXSA9IG51bWJlcmlmeShtWzFdKTsgLy8gT3BlcmEgZGV0ZWN0ZWQsIGxvb2sgZm9yIHJldmlzaW9uXG5cdFxuXHQgICAgICAgICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvT3BlcmFcXC8uKiBWZXJzaW9uXFwvKFtcXGQuXSopLykpICYmIG1bMV0pIHtcblx0ICAgICAgICAgICAgICBVQVtzaGVsbF0gPSBudW1iZXJpZnkobVsxXSk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIC8vIE9wZXJhIE1pbmlcblx0ICAgICAgICAgICAgaWYgKChtID0gdWEubWF0Y2goL09wZXJhIE1pbmlbXjtdKi8pKSAmJiBtKSB7XG5cdCAgICAgICAgICAgICAgVUEubW9iaWxlID0gbVswXS50b0xvd2VyQ2FzZSgpOyAvLyBleDogT3BlcmEgTWluaS8yLjAuNDUwOS8xMzE2XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgLy8gT3BlcmEgTW9iaWxlXG5cdCAgICAgICAgICAgIC8vIGV4OiBPcGVyYS85LjgwIChXaW5kb3dzIE5UIDYuMTsgT3BlcmEgTW9iaS80OTsgVTsgZW4pIFByZXN0by8yLjQuMTggVmVyc2lvbi8xMC4wMFxuXHQgICAgICAgICAgICAvLyBpc3N1ZTog55Sx5LqOIE9wZXJhIE1vYmlsZSDmnIkgVmVyc2lvbi8g5a2X5q6177yM5Y+v6IO95Lya5LiOIE9wZXJhIOa3t+a3hu+8jOWQjOaXtuWvueS6jiBPcGVyYSBNb2JpbGUg55qE54mI5pys5Y+35Lmf5q+U6L6D5re35LmxXG5cdCAgICAgICAgICAgIGVsc2UgaWYgKChtID0gdWEubWF0Y2goL09wZXJhIE1vYmlbXjtdKi8pKSAmJiBtKSB7XG5cdCAgICAgICAgICAgICAgVUEubW9iaWxlID0gbVswXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIC8vIE5PVCBXZWJLaXQgb3IgUHJlc3RvXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIE1TSUVcblx0ICAgICAgICAgIC8vIOeUseS6juacgOW8gOWni+W3sue7j+S9v+eUqOS6hiBJRSDmnaHku7bms6jph4rliKTmlq3vvIzlm6DmraTokL3liLDov5nph4znmoTllK/kuIDlj6/og73mgKflj6rmnIkgSUUxMCtcblx0ICAgICAgICAgIC8vIGFuZCBhbmFseXNpcyB0b29scyBpbiBub2RlanNcblx0ICAgICAgICAgIGlmICgoaWVWZXJzaW9uID0gZ2V0SUVWZXJzaW9uKHVhKSkpIHtcblx0ICAgICAgICAgICAgVUFbKHNoZWxsID0gXCJpZVwiKV0gPSBpZVZlcnNpb247XG5cdCAgICAgICAgICAgIHNldFRyaWRlbnRWZXJzaW9uKHVhLCBVQSk7XG5cdCAgICAgICAgICAgIC8vIE5PVCBXZWJLaXQsIFByZXN0byBvciBJRVxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgLy8gR2Vja29cblx0ICAgICAgICAgICAgaWYgKChtID0gdWEubWF0Y2goL0dlY2tvLykpKSB7XG5cdCAgICAgICAgICAgICAgVUFbKGNvcmUgPSBcImdlY2tvXCIpXSA9IDAuMTsgLy8gR2Vja28gZGV0ZWN0ZWQsIGxvb2sgZm9yIHJldmlzaW9uXG5cdCAgICAgICAgICAgICAgaWYgKChtID0gdWEubWF0Y2goL3J2OihbXFxkLl0qKS8pKSAmJiBtWzFdKSB7XG5cdCAgICAgICAgICAgICAgICBVQVtjb3JlXSA9IG51bWJlcmlmeShtWzFdKTtcblx0ICAgICAgICAgICAgICAgIGlmICgvTW9iaWxlfFRhYmxldC8udGVzdCh1YSkpIHtcblx0ICAgICAgICAgICAgICAgICAgVUEubW9iaWxlID0gXCJmaXJlZm94XCI7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIC8vIEZpcmVmb3hcblx0ICAgICAgICAgICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvRmlyZWZveFxcLyhbXFxkLl0qKS8pKSAmJiBtWzFdKSB7XG5cdCAgICAgICAgICAgICAgICBVQVsoc2hlbGwgPSBcImZpcmVmb3hcIildID0gbnVtYmVyaWZ5KG1bMV0pO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGdldE9TSW5mbygpIHtcblx0ICAgICAgdmFyIHRva2VuID0gW1xuXHQgICAgICAgIFtcIldpbmRvd3MgTlQgNS4xXCIsIFwid2luWFBcIl0sXG5cdCAgICAgICAgW1wiV2luZG93cyBOVCA2LjFcIiwgXCJ3aW43XCJdLFxuXHQgICAgICAgIFtcIldpbmRvd3MgTlQgNi4wXCIsIFwid2luVmlzdGFcIl0sXG5cdCAgICAgICAgW1wiV2luZG93cyBOVCA2LjJcIiwgXCJ3aW44XCJdLFxuXHQgICAgICAgIFtcImlQYWRcIiwgXCJpb3NcIl0sXG5cdCAgICAgICAgW1wiaVBob25lO1wiLCBcImlvc1wiXSxcblx0ICAgICAgICBbXCJpUG9kXCIsIFwiaW9zXCJdLFxuXHQgICAgICAgIFtcIk1hY2ludG9zaFwiLCBcIm1hY1wiXSxcblx0ICAgICAgICBbXCJBbmRyb2lkXCIsIFwiYW5kcm9pZFwiXSxcblx0ICAgICAgICBbXCJVYnVudHVcIiwgXCJ1YnVudHVcIl0sXG5cdCAgICAgICAgW1wiTGludXhcIiwgXCJsaW51eFwiXSxcblx0ICAgICAgICBbXCJXaW5kb3dzIE5UIDUuMlwiLCBcIndpbjIwMDNcIl0sXG5cdCAgICAgICAgW1wiV2luZG93cyBOVCA1LjBcIiwgXCJ3aW4yMDAwXCJdLFxuXHQgICAgICAgIFtcIldpbmRvd3NcIiwgXCJ3aW5PdGhlclwiXSxcblx0ICAgICAgICBbXCJyaGlub1wiLCBcInJoaW5vXCJdLFxuXHQgICAgICBdO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdG9rZW4ubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcblx0ICAgICAgICBpZiAodWEuaW5kZXhPZih0b2tlbltpXVswXSkgIT09IC0xKSB7XG5cdCAgICAgICAgICByZXR1cm4gdG9rZW5baV1bMV07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBcIm90aGVyXCI7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFvcykge1xuXHQgICAgICBvcyA9IGdldE9TSW5mbygpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIOWbveS6p+a1j+iniOWZqOS4k+WculxuXHQgICAgZnVuY3Rpb24gX21pbWUod2hlcmUsIHZhbHVlLCBuYW1lLCBuYW1lUmVnKSB7XG5cdCAgICAgIHZhciBtaW1lVHlwZXMgPSB3aW4ubmF2aWdhdG9yLm1pbWVUeXBlcztcblx0ICAgICAgdmFyIGk7XG5cdFxuXHQgICAgICAvLyBRUea1j+iniOWZqDcuN+S8muaKpemUmVxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGZvciAoaSBpbiBtaW1lVHlwZXMpIHtcblx0ICAgICAgICAgIGlmIChtaW1lVHlwZXMuaGFzT3duUHJvcGVydHkoaSkpIHtcblx0ICAgICAgICAgICAgaWYgKG1pbWVUeXBlc1tpXVt3aGVyZV0gPT09IHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCAmJiBuYW1lUmVnLnRlc3QobWltZVR5cGVzW2ldW25hbWVdKSlcblx0ICAgICAgICAgICAgICAgIHJldHVybiAhMDtcblx0ICAgICAgICAgICAgICBlbHNlIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHJldHVybiAhMDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gITE7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICByZXR1cm4gITE7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgX3N0eWxlO1xuXHQgICAgdmFyIF92OGxvY2FsZTtcblx0XG5cdCAgICAvLyDmt5jlrp3mtY/op4jlmajkuI3pgILnlKjkuI5taW1lXG5cdCAgICBpZiAoIV9taW1lKFwidHlwZVwiLCBcImFwcGxpY2F0aW9uL3ZuZC5jaHJvbWl1bS5yZW1vdGluZy12aWV3ZXJcIikpIHtcblx0ICAgICAgX3N0eWxlID0gXCJzY29wZWRcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXHQgICAgICBfdjhsb2NhbGUgPSBcInY4TG9jYWxlXCIgaW4gd2luO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGV4dGVybmFsID0gd2luLmV4dGVybmFsIHx8IHVuZGVmaW5lZDtcblx0ICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuXHRcblx0ICAgICAgLy8gMzYwQnJvd3NlclxuXHQgICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvMzYwU0UvKSkpIHtcblx0ICAgICAgICBleHRyYV9uYW1lID0gXCIzNjBcIjtcblx0ICAgICAgfVxuXHQgICAgICAvLyDlhYjliKTmlq1zb2dvIOWSjCDnjI7osblcblx0ICAgICAgZWxzZSBpZiAoXG5cdCAgICAgICAgKG0gPSB1YS5tYXRjaCgvU0VcXHMoW1xcZC5dKikvKSkgfHxcblx0ICAgICAgICAoZXh0ZXJuYWwgJiYgXCJTRVZlcnNpb25cIiBpbiBleHRlcm5hbClcblx0ICAgICAgKSB7XG5cdCAgICAgICAgZXh0cmFfbmFtZSA9IFwic291Z291XCI7XG5cdCAgICAgICAgZXh0cmFfdmVyc2lvbiA9IG51bWJlcmlmeShtWzFdKSB8fCAwLjE7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gTWF4dGhvblxuXHQgICAgICBlbHNlIGlmICgobSA9IHVhLm1hdGNoKC9NYXh0aG9uKD86XFwvKSsoW1xcZC5dKikvKSkgJiYgZXh0ZXJuYWwpIHtcblx0ICAgICAgICAvLyBpc3N1ZTogTWF4dGhvbiAzLnggaW4gSUUtQ29yZSBjYW5ub3QgYmUgcmVjb2duaXNlZCBhbmQgaXQgZG9lc24ndCBoYXZlIGV4YWN0IHZlcnNpb24gbnVtYmVyXG5cdCAgICAgICAgLy8gYnV0IG90aGVyIG1heHRob24gdmVyc2lvbnMgYWxsIGhhdmUgZXhhY3QgdmVyc2lvbiBudW1iZXJcblx0ICAgICAgICBleHRyYV9uYW1lID0gXCJtYXh0aG9uXCI7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGV4dHJhX3ZlcnNpb24gPSBudW1iZXJpZnkoZXh0ZXJuYWxbXCJtYXhfdmVyc2lvblwiXSB8fCBtWzFdKTtcblx0ICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgZXh0cmFfdmVyc2lvbiA9IDAuMTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgLy8gMzYwU0Ugb3IgdGhld29ybGRcblx0ICAgICAgLy8g6YOo5YiGIGZmIOS5n+S8mui/m+WFpeWIsOi/meS4quWIpOaWre+8jOebtOaOpeaOkumZpOaOiVxuXHQgICAgICBlbHNlIGlmIChfc3R5bGUgJiYgX3Y4bG9jYWxlKSB7XG5cdCAgICAgICAgZXh0cmFfbmFtZSA9IFwiMzYwc2VcIjtcblx0ICAgICAgfVxuXHQgICAgICAvLyBvcGVyYSDkvJrmmK/mvI/nvZHkuYvpsbzvvIzmjpLpmaTmjolcblx0ICAgICAgZWxzZSBpZiAoXG5cdCAgICAgICAgIV9zdHlsZSAmJlxuXHQgICAgICAgICFfdjhsb2NhbGUgJiZcblx0ICAgICAgICAvR2Vja29cXClcXHMrQ2hyb21lLy50ZXN0KGFwcF92ZXJzaW9uKSAmJlxuXHQgICAgICAgICFVQVtcIm9wZXJhXCJdICYmXG5cdCAgICAgICAgIVVBW1widHJpZGVudFwiXVxuXHQgICAgICApIHtcblx0ICAgICAgICBleHRyYV9uYW1lID0gXCIzNjBlZVwiO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBUVFxuXHQgICAgaWYgKChtID0gdWEubWF0Y2goL1RlbmNlbnRUcmF2ZWxlclxccyhbXFxkLl0qKXxRUUJyb3dzZXJcXC8oW1xcZC5dKikvKSkpIHtcblx0ICAgICAgZXh0cmFfbmFtZSA9IFwidHRcIjtcblx0ICAgICAgZXh0cmFfdmVyc2lvbiA9IG51bWJlcmlmeShtWzJdKSB8fCAwLjE7XG5cdCAgICB9XG5cdCAgICAvLyBMQlxuXHQgICAgZWxzZSBpZiAoXG5cdCAgICAgIChtID0gdWEubWF0Y2goL0xCQlJPV1NFUi8pKSB8fFxuXHQgICAgICAoZXh0ZXJuYWwgJiYgXCJMaWViYW9HZXRWZXJzaW9uXCIgaW4gZXh0ZXJuYWwpXG5cdCAgICApIHtcblx0ICAgICAgZXh0cmFfbmFtZSA9IFwibGllYmFvXCI7XG5cdCAgICB9XG5cdCAgICAvLyBUaGVXb3JsZFxuXHQgICAgZWxzZSBpZiAoKG0gPSB1YS5tYXRjaCgvVGhlV29ybGQvKSkpIHtcblx0ICAgICAgZXh0cmFfbmFtZSA9IFwidGhld29ybGRcIjtcblx0ICAgICAgZXh0cmFfdmVyc2lvbiA9IDM7XG5cdCAgICB9XG5cdCAgICAvLyBTb3Vnb3Vcblx0ICAgIGVsc2UgaWYgKChtID0gdWEubWF0Y2goL1Rhb0Jyb3dzZXJcXC8oW1xcZC5dKikvKSkpIHtcblx0ICAgICAgZXh0cmFfbmFtZSA9IFwidGFvYmFvXCI7XG5cdCAgICAgIGV4dHJhX3ZlcnNpb24gPSBudW1iZXJpZnkobVsxXSkgfHwgMC4xO1xuXHQgICAgfVxuXHRcblx0ICAgIFVBLm9zID0gb3M7XG5cdCAgICBVQS5jb3JlID0gVUEuY29yZSB8fCBjb3JlO1xuXHQgICAgVUEuc2hlbGwgPSBzaGVsbDtcblx0ICAgIFVBLmllTW9kZSA9IChVQS5pZSAmJiBkb2MuZG9jdW1lbnRNb2RlKSB8fCBVQS5pZTtcblx0ICAgIFVBLmV4dHJhTmFtZSA9IGV4dHJhX25hbWU7XG5cdCAgICBVQS5leHRyYVZlcnNpb24gPSBleHRyYV92ZXJzaW9uO1xuXHQgICAgVUEucmVzb2x1dGlvbiA9IHdpbi5zY3JlZW4ud2lkdGggKyBcInhcIiArIHdpbi5zY3JlZW4uaGVpZ2h0O1xuXHRcblx0ICAgIHJldHVybiBVQTtcblx0ICB9O1xuXHRcblx0ICAvLyBJRSA2IOeahCBxdWlya3Mg5qih5byP5Lit6KaB55SoIGRvY3VtZW50LmJvZHlcblx0ICB2YXIgZCA9IGRvYy5jb21wYXRNb2RlID09PSBcIkJhY2tDb21wYXRcIiA/IGRvYy5ib2R5IDogZG9jLmRvY3VtZW50RWxlbWVudDtcblx0ICB2YXIgbG9jX3Byb3RvY29sID0gbG9jLnByb3RvY29sO1xuXHQgIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQgIHZhciBuVGltZXMgPSAwO1xuXHRcblx0ICB2YXIgRW5naW5lID0gZnVuY3Rpb24gKGNvbmZpZykge1xuXHQgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG5cdCAgfTtcblx0XG5cdCAgRW5naW5lLnByb3RvdHlwZSA9IHtcblx0ICAgIHN0YXJ0dXA6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIikge1xuXHQgICAgICAgIC8vIHRoYXQuc2VuZFBWKCk7XG5cdCAgICAgICAgZGVmYXVsdF9jb25maWcuc2hvdWxkQmluZE1vbml0b3IgJiYgdGhhdC5iaW5kTW9uaXRvcigpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG9ubG9hZChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAvLyB0aGF0LnNlbmRQVigpO1xuXHQgICAgICAgICAgZGVmYXVsdF9jb25maWcuc2hvdWxkQmluZE1vbml0b3IgJiYgdGhhdC5iaW5kTW9uaXRvcigpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGNvbGxlY3RQZXJmb3JtYW5jZVRpbWluZzogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgdGltaW5nID0gcGVyZm9ybWFuY2UudGltaW5nO1xuXHQgICAgICB2YXIgcGFyYW1zID0ge307XG5cdFxuXHQgICAgICBpZiAoIXRpbWluZykge1xuXHQgICAgICAgIHJldHVybiBwYXJhbXM7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBtYXBwaW5nID0ge1xuXHQgICAgICAgIC8vIGZpcnN0UGFpbnQ6ICdmcCcsXG5cdCAgICAgICAgbmF2aWdhdGlvblN0YXJ0OiBcIm5zXCIsXG5cdCAgICAgICAgdW5sb2FkRXZlbnRTdGFydDogXCJ1ZXNcIixcblx0ICAgICAgICB1bmxvYWRFdmVudEVuZDogXCJ1ZWVcIixcblx0ICAgICAgICByZWRpcmVjdFN0YXJ0OiBcInJkc1wiLFxuXHQgICAgICAgIHJlZGlyZWN0RW5kOiBcInJkZVwiLFxuXHQgICAgICAgIGZldGNoU3RhcnQ6IFwiZnNcIixcblx0ICAgICAgICBkb21haW5Mb29rdXBTdGFydDogXCJkbHNcIixcblx0ICAgICAgICBkb21haW5Mb29rdXBFbmQ6IFwiZGxlXCIsXG5cdCAgICAgICAgY29ubmVjdFN0YXJ0OiBcImNzXCIsXG5cdCAgICAgICAgY29ubmVjdEVuZDogXCJjZVwiLFxuXHQgICAgICAgIHNlY3VyZUNvbm5lY3Rpb25TdGFydDogXCJzY3NcIixcblx0ICAgICAgICByZXF1ZXN0U3RhcnQ6IFwicnFzXCIsXG5cdCAgICAgICAgcmVzcG9uc2VTdGFydDogXCJycHNcIixcblx0ICAgICAgICByZXNwb25zZUVuZDogXCJycGVcIixcblx0ICAgICAgICBkb21Mb2FkaW5nOiBcImRsXCIsXG5cdCAgICAgICAgZG9tSW50ZXJhY3RpdmU6IFwiZGlcIixcblx0ICAgICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRTdGFydDogXCJkY2xlc1wiLFxuXHQgICAgICAgIGRvbUNvbnRlbnRMb2FkZWRFdmVudEVuZDogXCJkY2xlZVwiLFxuXHQgICAgICAgIGRvbUNvbXBsZXRlOiBcImRjXCIsXG5cdCAgICAgICAgbG9hZEV2ZW50U3RhcnQ6IFwibGVzXCIsXG5cdCAgICAgICAgbG9hZEV2ZW50RW5kOiBcImxlZVwiLFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIG5zID0gdGltaW5nLm5hdmlnYXRpb25TdGFydDtcblx0ICAgICAgdmFyIGtleTtcblx0ICAgICAgdmFyIHZhbHVlO1xuXHQgICAgICB2YXIgbWFwcGluZ0tleTtcblx0ICAgICAgZm9yIChrZXkgaW4gdGltaW5nKSB7XG5cdCAgICAgICAgLy9pZiAoIXRpbWluZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTsgLy8g6K+05piO77ya6L+Z5YS/5LiN6IO95YqgIGhhc093blByb3BlcnR577yM5ZCm5YiZ5Lya6L+H5ruk5o6J5b6I5aSaIGtleVxuXHQgICAgICAgIHZhbHVlID0gdGltaW5nW2tleV07XG5cdCAgICAgICAgbWFwcGluZ0tleSA9IG1hcHBpbmdba2V5XTtcblx0XG5cdCAgICAgICAgaWYgKG1hcHBpbmdLZXkpIHtcblx0ICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgIHBhcmFtc1ttYXBwaW5nS2V5XSA9IFwibmFcIjtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG5cdCAgICAgICAgICAgIHBhcmFtc1ttYXBwaW5nS2V5XSA9IHZhbHVlIC0gbnM7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBmaXJzdFBhaW50XG5cdCAgICAgIHZhciBmcDtcblx0ICAgICAgdmFyIGNocm9tZV9mcDtcblx0ICAgICAgaWYgKHR5cGVvZiB0aW1pbmcubXNGaXJzdFBhaW50ID09PSBcIm51bWJlclwiKSB7XG5cdCAgICAgICAgLy8gYnkgbXNcblx0ICAgICAgICBmcCA9IHRpbWluZy5tc0ZpcnN0UGFpbnQ7XG5cdCAgICAgIH0gZWxzZSBpZiAoXG5cdCAgICAgICAgd2luLmNocm9tZSAmJlxuXHQgICAgICAgIHdpbi5jaHJvbWUubG9hZFRpbWVzXG5cdCAgICAgICAgKGNocm9tZV9mcCA9IHdpbi5jaHJvbWUubG9hZFRpbWVzKCkuZmlyc3RQYWludFRpbWUpXG5cdCAgICAgICkge1xuXHQgICAgICAgIC8vIGJ5IHNcblx0ICAgICAgICBmcCA9IE1hdGguY2VpbChjaHJvbWVfZnAgKiAxMDAwKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBmcCA9PT0gXCJudW1iZXJcIikge1xuXHQgICAgICAgIGZwID0gZnAgLSBucztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmcCA9IFwibmFcIjtcblx0ICAgICAgfVxuXHQgICAgICBwYXJhbXMuZnAgPSBmcDtcblx0XG5cdCAgICAgIHJldHVybiBwYXJhbXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogW1xuXHQgICAgICogICB7XG5cdCAgICAgKiAgICAgbjogJycsXG5cdCAgICAgKiAgICAgZnM6IG4sXG5cdCAgICAgKiAgICAgc3Q6IG4sXG5cdCAgICAgKiAgICAgLi4uXG5cdCAgICAgKiAgIH0sXG5cdCAgICAgKiAgIHt9LCB7fSwgLi4uXG5cdCAgICAgKiBdXG5cdCAgICAgKi9cblx0ICAgIGNvbGxlY3RSZXNvdXJjZVRpbWluZzogZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoXG5cdCAgICAgICAgIShcInBlcmZvcm1hbmNlXCIgaW4gd2luKSB8fFxuXHQgICAgICAgICEoXCJnZXRFbnRyaWVzQnlUeXBlXCIgaW4gcGVyZm9ybWFuY2UpIHx8XG5cdCAgICAgICAgIShwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwicmVzb3VyY2VcIikgaW5zdGFuY2VvZiBBcnJheSlcblx0ICAgICAgKSB7XG5cdCAgICAgICAgcmV0dXJuIFtdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcmVzVGltaW5nT2JqcyA9IFtdO1xuXHQgICAgICB2YXIgcmVzb3VyY2VzID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcInJlc291cmNlXCIpO1xuXHQgICAgICB2YXIgZm9ybWF0TWlsbFNlY29uZCA9IGZ1bmN0aW9uIChtaWxsc2Vjb25kcykge1xuXHQgICAgICAgIGlmIChtaWxsc2Vjb25kcyA9PT0gdW5kZWZpbmVkIHx8IG1pbGxzZWNvbmRzID09PSAwKSB7XG5cdCAgICAgICAgICByZXR1cm4gMDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IobWlsbHNlY29uZHMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgICAgZm9yICh2YXIgaW5kZXggaW4gcmVzb3VyY2VzKSB7XG5cdCAgICAgICAgaWYgKCFyZXNvdXJjZXMuaGFzT3duUHJvcGVydHkoaW5kZXgpKSBjb250aW51ZTtcblx0ICAgICAgICB2YXIgcmVzb3VyY2UgPSByZXNvdXJjZXNbaW5kZXhdO1xuXHQgICAgICAgIGlmICghcmVzb3VyY2UuaW5pdGlhdG9yVHlwZSkge1xuXHQgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJlc1RpbWluZ09ianMucHVzaCh7XG5cdCAgICAgICAgICByczogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5yZWRpcmVjdFN0YXJ0KSxcblx0ICAgICAgICAgIHJlOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLnJlZGlyZWN0RW5kKSxcblx0ICAgICAgICAgIGZzOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLmZldGNoU3RhcnQpLFxuXHQgICAgICAgICAgc3Q6IGZvcm1hdE1pbGxTZWNvbmQocmVzb3VyY2Uuc3RhcnRUaW1lKSxcblx0ICAgICAgICAgIGRsczogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5kb21haW5Mb29rdXBTdGFydCksXG5cdCAgICAgICAgICBkbGU6IGZvcm1hdE1pbGxTZWNvbmQocmVzb3VyY2UuZG9tYWluTG9va3VwRW5kKSxcblx0ICAgICAgICAgIGNzOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLmNvbm5lY3RTdGFydCksXG5cdCAgICAgICAgICBjZTogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5jb25uZWN0RW5kKSxcblx0ICAgICAgICAgIHNjczogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5zZWN1cmVDb25uZWN0aW9uU3RhcnQpLFxuXHQgICAgICAgICAgcmVzcXM6IGZvcm1hdE1pbGxTZWNvbmQocmVzb3VyY2UucmVxdWVzdFN0YXJ0KSxcblx0ICAgICAgICAgIHJlc3BzOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLnJlc3BvbnNlU3RhcnQpLFxuXHQgICAgICAgICAgcmVzcGU6IGZvcm1hdE1pbGxTZWNvbmQocmVzb3VyY2UucmVzcG9uc2VFbmQpLFxuXHQgICAgICAgICAgcmVzdHlwZTogcmVzb3VyY2UuaW5pdGlhdG9yVHlwZSxcblx0ICAgICAgICAgIG46IHJlc291cmNlLm5hbWUsXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiByZXNUaW1pbmdPYmpzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOWPkemAgeWuouaIt+err+WPguaVsFxuXHQgICAgICovXG5cdCAgICBzZW5kUFY6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XG5cdCAgICAgICAgdmFyIGRlc2NyaXB0b3I7XG5cdCAgICAgICAgdmFyIG9fb3M7XG5cdCAgICAgICAgdmFyIG9fc2hlbGw7XG5cdCAgICAgICAgdmFyIG9fY29yZTtcblx0ICAgICAgICB2YXIgb19yZXNvO1xuXHQgICAgICAgIHZhciBvX2V4dHJhO1xuXHQgICAgICAgIHZhciBvX2V4dHJhVjtcblx0XG5cdCAgICAgICAgdmFyIG8sXG5cdCAgICAgICAgICBiLFxuXHQgICAgICAgICAgdyxcblx0ICAgICAgICAgIHMsXG5cdCAgICAgICAgICBtLFxuXHQgICAgICAgICAgcCA9IDE7XG5cdFxuXHQgICAgICAgIHZhciB0cmlkO1xuXHRcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgZGVzY3JpcHRvciA9IGdldERlc2NyaXB0b3JGcm9tVXNlckFnZW50KHVhKTtcblx0XG5cdCAgICAgICAgICAvLyDmlbTnkIblrqLmiLfnq6/kv6Hmga9cblx0ICAgICAgICAgIG9fb3MgPSBkZXNjcmlwdG9yW1wib3NcIl07XG5cdCAgICAgICAgICBvX3NoZWxsID0gZGVzY3JpcHRvcltcInNoZWxsXCJdO1xuXHQgICAgICAgICAgb19jb3JlID0gZGVzY3JpcHRvcltcImNvcmVcIl07XG5cdCAgICAgICAgICBvX3Jlc28gPSBkZXNjcmlwdG9yW1wicmVzb2x1dGlvblwiXTtcblx0ICAgICAgICAgIG9fZXh0cmEgPSBkZXNjcmlwdG9yW1wiZXh0cmFOYW1lXCJdO1xuXHQgICAgICAgICAgb19leHRyYVYgPSBkZXNjcmlwdG9yW1wiZXh0cmFWZXJzaW9uXCJdO1xuXHRcblx0ICAgICAgICAgIG8gPSBvX29zID8gb19vcyArIChkZXNjcmlwdG9yW29fb3NdID8gZGVzY3JpcHRvcltvX29zXSA6IFwiXCIpIDogXCJcIjtcblx0ICAgICAgICAgIGIgPSBvX3NoZWxsID8gb19zaGVsbCArIHBhcnNlSW50KGRlc2NyaXB0b3Jbb19zaGVsbF0pIDogXCJcIjtcblx0ICAgICAgICAgIHcgPSBvX2NvcmU7XG5cdCAgICAgICAgICBzID0gb19yZXNvO1xuXHQgICAgICAgICAgbSA9IG9fZXh0cmEgPyBvX2V4dHJhICsgKG9fZXh0cmFWID8gcGFyc2VJbnQob19leHRyYVYpIDogXCJcIikgOiBcIlwiO1xuXHQgICAgICAgIH0gY2F0Y2ggKGVycikge31cblx0XG5cdCAgICAgICAgdmFyIHBhcmFtcyA9IHtcblx0ICAgICAgICAgIHA6IHAsXG5cdCAgICAgICAgICBvOiBkZWFsRGVmYXVsdChvKSwgLy8gb3Ncblx0ICAgICAgICAgIGI6IGRlYWxEZWZhdWx0KGIpLCAvLyBicm93c2VyXG5cdCAgICAgICAgICB3OiBkZWFsRGVmYXVsdCh3KSwgLy8gY29yZVxuXHQgICAgICAgICAgczogcywgLy8gc2NyZWVuIHBpeGVsXG5cdCAgICAgICAgICBteDogbSwgLy8g5Zu95LqnXG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKGxvY19wcm90b2NvbCA9PT0gXCJodHRwczpcIikge1xuXHQgICAgICAgICAgcGFyYW1zW1wiaXNwc1wiXSA9IDE7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoKHRyaWQgPSBnZXRFeHBhcmFtcygpW1widHJpZFwiXSkpIHtcblx0ICAgICAgICAgIHBhcmFtc1tcInRyaWRcIl0gPSB0cmlkO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAvLyBpc3N1ZSAjNzM6IHBlcmZvcm1hbmNlIHRpbWluZ1xuXHQgICAgICAgICAgdmFyIHRpbWluZ1BhcmFtcyA9IHRoYXQuY29sbGVjdFBlcmZvcm1hbmNlVGltaW5nKCk7XG5cdCAgICAgICAgICB2YXIga2V5O1xuXHQgICAgICAgICAgdmFyIHZhbHVlO1xuXHQgICAgICAgICAgZm9yIChrZXkgaW4gdGltaW5nUGFyYW1zKSB7XG5cdCAgICAgICAgICAgIGlmICh0aW1pbmdQYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgICAgICAgIHZhbHVlID0gdGltaW5nUGFyYW1zW2tleV07XG5cdCAgICAgICAgICAgICAgcGFyYW1zW2tleV0gfHwgKHBhcmFtc1trZXldID0gdmFsdWUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBcblx0ICAgICAgICAgIHRoYXQuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHQgICAgICAgICAgdGhhdC5zZW5kRGF0YShwYXJhbXMsIHRydWUpO1xuXHQgICAgICAgIH0sIDApO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGJpbmRNb25pdG9yOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdmFyIGF0dGEgPSAhIWRvYy5hdHRhY2hFdmVudDtcblx0ICAgICAgdmFyIG9uZXZlbnQgPSBhdHRhID8gXCJhdHRhY2hFdmVudFwiIDogXCJhZGRFdmVudExpc3RlbmVyXCI7XG5cdFxuXHQgICAgICAvLyDnu5HlrpogZG9jdW1lbnQg55qEIG1vdXNlZG93biDkuovku7Zcblx0ICAgICAgZG9jW29uZXZlbnRdKFxuXHQgICAgICAgIChhdHRhID8gXCJvblwiIDogXCJcIikgKyBcIm1vdXNlZG93blwiLFxuXHQgICAgICAgIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICBlID0gZSB8fCB3aW4uZXZlbnQ7XG5cdCAgICAgICAgICB2YXIgZWwgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cdCAgICAgICAgICBpZiAoZWwpIHtcblx0ICAgICAgICAgICAgc2VsZi5tb3VzZWRvd24oZWwsIGUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgZmFsc2Vcblx0ICAgICAgKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgbW91c2Vkb3duOiBmdW5jdGlvbiAodGFyZ2V0LCBldmVudCkge1xuXHQgICAgICAvL3ZhciBub2RlID0gdGFyZ2V0O1xuXHQgICAgICB2YXIgdGFnX25hbWUgPSB0YXJnZXQudGFnTmFtZTtcblx0ICAgICAgLy92YXIgZWlkO1xuXHQgICAgICAvL3ZhciBwX25vZGU7XG5cdCAgICAgIHZhciBocmVmO1xuXHQgICAgICAvL3ZhciB0b1dhdGNoID0gZmFsc2U7XG5cdCAgICAgIHZhciBwYXJhbXMgPSB7IHR5cGU6IDEgfTsgLy8gLCBwdmlkOiBwdmlkXG5cdFxuXHQgICAgICAvLyDlpoLmnpzngrnlh7vliLDmu5rliqjovbTkuIrliJnov5Tlm55cblx0ICAgICAgaWYgKHRhZ19uYW1lICYmIHRhZ19uYW1lID09PSBcIkhUTUxcIikge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHRhZ19uYW1lID09PSBcIkFcIiB8fCB0YWdfbmFtZSA9PT0gXCJBUkVBXCIpIHtcblx0ICAgICAgICAvLyDpmLLmraIgSUU2IOS4i+axieWtl1VSTOS5seegge+8jOWPguiAgyBodHRwOi8vb2xkai5uZXQvYXJ0aWNsZS9qcy1ocmVmLXVybC1lbmNvZGUtaWU2L1xuXHQgICAgICAgIGhyZWYgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiLCAyKSB8fCBcIlwiO1xuXHQgICAgICAgIHBhcmFtcy5ocmVmID0gaHJlZjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcG9zID0gZ2V0UG9zaXRpb24odGFyZ2V0LCBldmVudCwgdGhpcy5jb25maWcubGF5b3V0KTtcblx0ICAgICAgcGFyYW1zLnhwYXRoID0gZ2V0WFBhdGgodGFyZ2V0KTtcblx0ICAgICAgcGFyYW1zLnggPSBwb3MueDtcblx0ICAgICAgcGFyYW1zLnkgPSBwb3MueTtcblx0ICAgICAgcGFyYW1zLmV4ID0gcG9zLmV4O1xuXHQgICAgICBwYXJhbXMuZXkgPSBwb3MuZXk7XG5cdCAgICAgIHBhcmFtcy5zdyA9IHBvcy5zdztcblx0ICAgICAgcGFyYW1zLmV3ID0gdGFyZ2V0Lm9mZnNldFdpZHRoO1xuXHQgICAgICBwYXJhbXMuZWggPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xuXHQgICAgICBwYXJhbXMudCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnQ7XG5cdCAgICAgIHBhcmFtcy5uID0gKytuVGltZXM7XG5cdCAgICAgIC8vIGlmICh0aGlzW1wic3BtLWNudFwiXSkge1xuXHQgICAgICAvLyAgIHBhcmFtc1tcInNwbS1jbnRcIl0gPSB0aGlzW1wic3BtLWNudFwiXS5qb2luKFwiLlwiKTtcblx0ICAgICAgLy8gfVxuXHQgICAgICBpZiAoaXNfYWhvdCAmJiBtaWNyb3Njb3BlX2RhdGEpIHtcblx0ICAgICAgICBwYXJhbXNbXCJzb1wiXSA9IGVuY29kZVVSSUNvbXBvbmVudChtaWNyb3Njb3BlX2RhdGEpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnNlbmREYXRhKHBhcmFtcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHNlbmREYXRhOiBmdW5jdGlvbiAoZGF0YSwgaXNQVikge1xuXHQgICAgICB2YXIgbG9na2V5ID0gXCIkJF9ob3Rwb2ludFwiO1xuXHQgICAgICB2YXIgcmFuZG9tTnVtID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTAwMCk7XG5cdCAgICAgIHZhciBxID0gd2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSk7XG5cdCAgICAgIGlmIChpc1BWKSB7XG5cdCAgICAgICAgcS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogXCJhcGx1cy5zZW5kUFZcIixcblx0ICAgICAgICAgIGFyZ3VtZW50czogW3tpc19hdXRvOiB0cnVlfSwgZGF0YV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAocmFuZG9tTnVtIDwgKENPTkZJRy5SQVRFLlJFU09VUkNFX1RJTUlORyAqIDEwMDApKSB7XG5cdCAgICAgICAgICBpZiAoaXNfaGVhdG1hcF9lbmFibGUpIHtcblx0ICAgICAgICAgICAgcS5wdXNoKHtcblx0ICAgICAgICAgICAgICBhY3Rpb246IFwiYXBsdXMucmVjb3JkXCIsXG5cdCAgICAgICAgICAgICAgYXJndW1lbnRzOiBbbG9na2V5LCBcIkNMS1wiLCBhc3NpZ24oe2lzX2F1dG86IDF9LCBkYXRhKSwgXCJQT1NUXCJdLFxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICog5ZCv5Yqo5omT54K56ISa5pysXG5cdCAgICog5aaC5p6c6ZyA6KaB5YGaIGFob3Qg54Ot5Yqb5Zu+55uR5o6n77yI5Y2z5rKh5Zyo6buR5ZCN5Y2V5LiK77yJ77yM5YiZ6KaB6aKd5aSWIGJpbmRNb25pdG9y77yM5ZCm5YiZ5LuF5L2c6buE6YeR5Luk566t5L+h5oGv5Y+R6YCBXG5cdCAgICovXG5cdCAgaWYgKHNob3VsZEJpbmRNb25pdG9yKCkpIHtcblx0ICAgIGRlZmF1bHRfY29uZmlnLnNob3VsZEJpbmRNb25pdG9yID0gdHJ1ZTtcblx0ICB9XG5cdCAgdmFyIHN0YiA9XG5cdCAgICBwZXJmb3JtYW5jZS5zZXRSZXNvdXJjZVRpbWluZ0J1ZmZlclNpemUgfHxcblx0ICAgIHBlcmZvcm1hbmNlLndlYmtpdFNldFJlc291cmNlVGltaW5nQnVmZmVyU2l6ZTtcblx0ICBzdGIgJiYgc3RiLmNhbGwocGVyZm9ybWFuY2UsIDIwMCk7IC8vIOmDqOWIhua1j+iniOWZqOaciSAxNTAg5Liq5YWD57Sg55qE6ZmQ5Yi277yM6K6+5Li6IDIwMFxuXHRcblx0ICB3aW5bXCJfYXBfeHdqX2hlYXRcIl0gPSB7XG5cdCAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuXHQgIH07XG5cdCAgdmFyIGVuZ2luZSA9IG5ldyBFbmdpbmUoZGVmYXVsdF9jb25maWcpO1xuXHQgIGVuZ2luZS5zdGFydHVwKCk7XG5cdH1cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICB0cnkge1xuXHQgICAgaW5pdEhlYXRNYXAoKTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHZhciBxID0gd2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSk7XG5cdCAgICBxLnB1c2goe1xuXHQgICAgICBhY3Rpb246IFwiYXBsdXMuX2FwbHVzX2NwbHVnaW5fbS5kb190cmFja2VyX2pzZXJyb3JcIixcblx0ICAgICAgYXJndW1lbnRzOiBbXG5cdCAgICAgICAge1xuXHQgICAgICAgICAgbWVzc2FnZTogXCJoZWFkbWFwYWxsXCIsIC8vIGVnOiBjb21wb3NlIG1pZGRsZXdhcmUgZXJyb3InLFxuXHQgICAgICAgICAgZXJyb3I6IGVuY29kZVVSSUNvbXBvbmVudChlLnN0YWNrKSxcblx0ICAgICAgICAgIGZpbGVuYW1lOiBcImFwbHVzX3h3al9wbHVnaW5cIixcblx0ICAgICAgICB9LFxuXHQgICAgICBdLFxuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDE0MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IGFwbHVzX3BhZ2V2aWV3X2R1cmF0aW9uX2luamVjdC5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCkoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDE0NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IG1haW4uanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgSElEREVOID0gJ2hpZGRlbic7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHV0aWxFdmVudC5vbih3aW5kb3csICd1bmxvYWQnLCBmdW5jdGlvbigpe1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIHEgPSAod2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSkpO1xuXHQgICAgICBxLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuUEFHRV9MRUFWRSwgXCJPVEhFUlwiLCB7fV1cblx0ICAgICAgfSk7XG5cdCAgICAgIFxuXHQgICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBISURERU4pIHtcblx0ICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShhcGx1c1N0YXRpYy5TVEFSVF9JRCk7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGVycm9yKSB7XG5cdCAgICAgIHVsb2coKS53KCdzZW5kIGJyb3dzZXIgY2xvc2UgZXZuZXQgZmFpbGVkJyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTQ1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9hcGx1cy5qc1xuXHQgKiDmqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBqaXpoYS53eWpAYmxvZyBodHRwOi8vb2xkai5uZXRcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB3aW4gPSB3aW5kb3c7XG5cdCAgICB2YXIgX2sgPSAnZ190Yl9hcGx1c19sb2FkZWQnO1xuXHQgICAgaWYgKHdpbltfa10pIHJldHVybjtcblx0ICAgIHdpbltfa10gPSAxO1xuXHQgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpLmlzRGVidWdBcGx1cygpO1xuXHQgICAgLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHQgICAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHQgICAgdmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0ICAgIHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHQgICAgdmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0ICAgIHZhciBhcGx1c2luaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nyk7XG5cdFxuXHQgICAgdmFyIFJVTk5JTkcgPSAncnVubmluZyc7XG5cdCAgICAvLyB2YXIgQ09NUExFVEUgPSAnY29tcGxldGUnO1xuXHQgICAgdmFyIGFwbHVzU3RhdHVzID0gWydhcGx1c1JlYWR5JywgUlVOTklOR107XG5cdCAgICB1dGlsUHVic3ViLmRvUHViTXNnKGFwbHVzU3RhdHVzKTtcblx0XG5cdCAgICBhcGx1c2luaXQucnVuKHtcblx0ICAgICAgcGx1Z2luczogYXBsdXNfY29uZmlnLnBsdWdpbnMsXG5cdCAgICAgIGNvbnRleHQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgY29uZmlnX3B2X2NvbnRleHQgPSB7XG5cdCAgICAgICAgICBQQUdFX0xPQURfVElNRTogbmV3IERhdGUoKVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIFBMVUdJTlNfUFYgPSBbXTtcblx0ICAgICAgICBlYWNoKGFwbHVzX2NvbmZpZy5wbHVnaW5zLCBmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgY29uZmlnX3B2X2NvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnIHx8IHt9O1xuXHQgICAgICAgICAgaWYgKHYubmFtZSA9PT0gJ2FwbHVzX2xvZ19pbmplY3QnICYmIHYuY29uZmlnICYmIHYuY29uZmlnLnBsdWdpbnMpIHtcblx0ICAgICAgICAgICAgUExVR0lOU19QViA9IHYuY29uZmlnLnBsdWdpbnMucHY7XG5cdCAgICAgICAgICAgIGVhY2goUExVR0lOU19QViwgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWc7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHJldHVybiB1dGlsRGFzaC5hc3NpZ24oY29uZmlnX3B2X2NvbnRleHQsIHtcblx0ICAgICAgICAgIGFwbHVzX2NvbmZpZzogYXBsdXNfY29uZmlnXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdWxvZygpLnYoJ0FQTFVTIElOSVQgU1VDQ0VTUycpO1xuXHQgICAgfSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgLy8gVE9ETyBA6ZKw5pitIOWKoOebkeaOp1xuXHQgICAgLy8gY29uc29sZS5sb2coZSk7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTQ2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBpc0RlYnVnO1xuXHRcblx0LyoqXG5cdCAqIOaYr+WQpuW8gOWQr2RlYnVn5qih5byP5YWl5Y+j77yM5ZyodXJs5Lit5Yqg5YWlZGVidWdBcGx1cz10cnVlXG5cdCAqL1xuXHRleHBvcnRzLmlzRGVidWdBcGx1cyA9IGZ1bmN0aW9uIChkZWJ1Zykge1xuXHQgIGlmICh0eXBlb2YgaXNEZWJ1ZyA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gaXNEZWJ1Zztcblx0ICB9XG5cdCAgLy9wYXJhbWV0ZXIgaXMgaW52YWxpZFxuXHQgIGlmICh0eXBlb2YgZGVidWcgPT09ICdib29sZWFuJykge1xuXHQgICAgaXNEZWJ1ZyA9IGRlYnVnO1xuXHQgIH1cblx0ICBpZiAobG9jYWxTdG9yYWdlICYmIGxvY2F0aW9uKSB7XG5cdCAgICB2YXIgbWF0Y2hfdmFsdWUgPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9hcGx1c0RlYnVnPSh0cnVlfGZhbHNlKS8pO1xuXHQgICAgaWYgKG1hdGNoX3ZhbHVlICYmIG1hdGNoX3ZhbHVlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FwbHVzRGVidWcnLCBtYXRjaF92YWx1ZVsxXSk7XG5cdCAgICB9XG5cdCAgICBpc0RlYnVnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FwbHVzRGVidWcnKSA9PT0gJ3RydWUnO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpc0RlYnVnID0gZmFsc2U7XG5cdCAgfVxuXHQgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ2FwbHVzRGVidWcnLCBpc0RlYnVnKTsgIFxuXHQgIGlmKGlzRGVidWcpe1xuXHQgICAgdWxvZygpLnNldERlYnVnKGlzRGVidWcpO1xuXHQgIH1cblx0ICByZXR1cm4gaXNEZWJ1Zztcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDE0NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogYXBsdXMgQVBJXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlZHVjZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHQvKipcblx0ICog5bCG5ZCO57ut55qEaW5pdOWKqOS9nOmDveWBmuaIkOaPkuS7tu+8jOebruWJjeWPquaciXdoZXJlX3RvX3NlbmRwduS4gOmhuVxuXHQgKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIHBsdWdpbnNcblx0ICogICBjb250ZXh0XG5cdCAqIH1cblx0ICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqXG5cdCAqL1xuXHRleHBvcnRzLnJ1biA9IGZ1bmN0aW9uIChvcHRzLCBjYWxsYmFjaykge1xuXHQgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcblx0ICByZWR1Y2VyLnJ1bih7XG5cdCAgICBwbHVnaW5zOiBvcHRzLnBsdWdpbnMsXG5cdCAgICBjb250ZXh0OiBvcHRzLmNvbnRleHRcblx0ICB9LCB7XG5cdCAgICBjb25maWc6IHt9LFxuXHQgICAgdXNlcmRhdGE6IHt9LFxuXHQgICAgcHVic3ViVHlwZTogJ2FwbHVzaW5pdCcsXG5cdCAgICBtZXNzYWdlRm5RdWV1ZTogW10sXG5cdCAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9hcGx1c2luaXQnXG5cdCAgfSwgZnVuY3Rpb24gKGN0eCkge1xuXHQgICAgdmFyIG1zZ3MgPSBbJ2FwbHVzSW5pdENvbnRleHQnLCBjdHhdO1xuXHQgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcblx0ICAgICAgY2FsbGJhY2soY3R4KTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwbHVzX2Nsb3VkX3VtLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgZDA2OWEzMDU5Yjk0NGIwMTAxYTUiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhbGlsb2cvYXBsdXMvc3JjL2FwbHVzLmpzXG4gKiDmqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0Jztcbi8vIHJlcXVpcmUoJy4uL2J1aWxkX2FsaS9hcGx1c19zcGFfYXV0b19wdi5qcycpO1xucmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuaW5pdEdsb2JhbCh3aW5kb3cpO1xuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFwbHVzX2NvbmZpZyA9IHJlcXVpcmUoJ0AvYXBsdXNfY2xvdWRfdW1fY29uZmlnJyk7XG4gIHJlcXVpcmUoJy4vYXBsdXNfd2ViX2Jhc2ljJykoYXBsdXNfY29uZmlnKTtcbn0pKCk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19jbG91ZF91bS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pON5L2cYXBsdXPnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxudmFyIEFQTFVTID0gYXBsdXNTdGF0aWMuQVBMVVM7XG52YXIgQVBMVVNfUVVFVUUgPSBhcGx1c1N0YXRpYy5BUExVU19RVUVVRTtcblxudmFyIEdPTERMT0cgPSBhcGx1c1N0YXRpYy5HT0xETE9HO1xudmFyIEdPTERMT0dfUVVFVUUgPSBhcGx1c1N0YXRpYy5HT0xETE9HX1FVRVVFO1xuXG52YXIgX2FwbHVzX2NvbnRleHQ7XG52YXIgaXNXZWIgPSBmYWxzZTtcbnRyeSB7XG4gIGlmICh3aW5kb3cpIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IHdpbmRvdztcbiAgICBpc1dlYiA9IHRydWU7XG4gIH1cbn0gY2F0Y2ggKGUpIHtcbiAgX2FwbHVzX2NvbnRleHQgPSB7fTtcbiAgaXNXZWIgPSBmYWxzZTtcbn1cblxuZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG59O1xuXG5leHBvcnRzLmlzV2ViID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB3aW5kb3c7XG59O1xuXG5leHBvcnRzLmluaXRHbG9iYWwgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICBpZiAoY29udGV4dCkge1xuICAgIF9hcGx1c19jb250ZXh0ID0gY29udGV4dDtcbiAgfSBlbHNlIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IHtcbiAgICAgIHY6IDEsXG4gICAgICBhcGx1czoge30sXG4gICAgICBhcGx1c19xdWV1ZTogW11cbiAgICB9O1xuICB9XG4gIHZhciBfYXBsdXNEZWZhdWx0VmFsdWU7XG4gIHZhciBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcbiAgaWYgKGlzV2ViKSB7XG4gICAgdHJ5IHtcbiAgICAgIF9hcGx1c0RlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1cyB8fCBfYXBsdXNfY29udGV4dC5nb2xkbG9nIHx8IChfYXBsdXNfY29udGV4dC5hcGx1cyA9IHt9KSk7XG4gICAgICB2YXIgX2dvbGRsb2dfcXVldWUgPSAoX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSB8fCAoX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSA9IFtdKSk7XG4gICAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSB8fCAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgPSBbXSkpO1xuICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfZ29sZGxvZ19xdWV1ZS5jb25jYXQoX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUpOyAgXG4gICAgfSBjYXRjaCAoZSkge31cbiAgfSBlbHNlIHtcbiAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1cztcbiAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlO1xuICB9XG4gIFxuICBfYXBsdXNfY29udGV4dC5hcGx1cyA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2cgPSBfYXBsdXNEZWZhdWx0VmFsdWU7XG4gIF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSA9IF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlO1xuICBcbiAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xufTtcblxudmFyIGdldEdsb2JhbFZhbHVlID0gZnVuY3Rpb24gKGtleSkge1xuICBpZiAoa2V5ID09PSBBUExVUyB8fCBrZXkgPT09IEdPTERMT0cpIHtcbiAgICB2YXIgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSB8fCBfYXBsdXNfY29udGV4dFtHT0xETE9HXTtcbiAgICBpZiAoIWcpIHtcbiAgICAgIGcgPSBfYXBsdXNfY29udGV4dFtBUExVU10gPSBfYXBsdXNfY29udGV4dFtHT0xETE9HXSA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gZztcbiAgfVxuICB2YXIgZ29sZGxvZ19xdWV1ZSA9IEdPTERMT0dfUVVFVUU7XG4gIHZhciBhcGx1c19xdWV1ZSA9IEFQTFVTX1FVRVVFO1xuICBpZiAoa2V5ID09PSBhcGx1c19xdWV1ZSB8fCBrZXkgPT09IGdvbGRsb2dfcXVldWUpIHtcbiAgICB2YXIgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSB8fCBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXTtcbiAgICBpZiAoIXEpIHtcbiAgICAgIHEgPSBfYXBsdXNfY29udGV4dFthcGx1c19xdWV1ZV0gPSBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXSA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gcTtcbiAgfVxufTtcbmV4cG9ydHMuZ2V0R2xvYmFsVmFsdWUgPSBnZXRHbG9iYWxWYWx1ZTtcblxuZXhwb3J0cy5zZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIF9hcGx1c19jb250ZXh0W2tleV0gPSB2YWx1ZTtcbn07XG5cbi8qKlxuICog6I635Y+WYXBsdXPlhoXpg6jlj5jph49cbiAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG4gKiBAcmV0dXJuIFtPYmplY3R8U3RyaW5nfE51bWJlcnxCb29sZWFuXVxuICovXG52YXIgZ2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSkge1xuICB2YXIgdjtcbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG4gICAgdiA9IGFwbHVzW2tleV07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB2ID0gJyc7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIHY7XG4gIH1cbn07XG5leHBvcnRzLmdldEdvbGRsb2dWYWwgPSBnZXRHb2xkbG9nVmFsO1xuLyoqXG4gKiDorr7nva5hcGx1c+WGhemDqOWPmOmHj1xuICogQHBhcmFtcyBbU3RyaW5nXSBrZXlcbiAqIEBwYXJhbXMgW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dIHZhbFxuICogQHJldHVybiBbQm9vbGVhbl1cbiAqL1xudmFyIHNldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICB2YXIgZiA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICBhcGx1c1trZXldID0gdmFsO1xuICAgICAgZiA9IHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgZiA9IGZhbHNlO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBmO1xuICB9XG59O1xuZXhwb3J0cy5zZXRHb2xkbG9nVmFsID0gc2V0R29sZGxvZ1ZhbDtcblxuLyoqXG4gKiDojrflj5ZjbGllbnRJbmZvKOa1j+iniOWZqOOAgeiuvuWkh+etieS/oeaBrylcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgdmVyc2lvbjogMixcbiAqICAgdWFfaW5mbzoge1xuICogICAgIGI6IFwiY2hyb21lNThcIlxuICogICAgIGlzbTogXCJtYWNcIlxuICogICAgIG14OiBcIjM2MGVlXCJcbiAqICAgICBvOiBcIm1hY1wiXG4gKiAgICAgcDogMVxuICogICAgIHM6IFwiMTkyMHgxMDgwXCJcbiAqICAgICB3OiBcIndlYmtpdFwiXG4gKiAgIH1cbiAqIH1cbiAqL1xuZXhwb3J0cy5nZXRDbGllbnRJbmZvID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBnZXRHb2xkbG9nVmFsKCdfYXBsdXNfY2xpZW50JykgfHwge307XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdvbGRsb2cuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIEFQTFVTID0gJ2FwbHVzJztcbnZhciBHT0xETE9HID0gJ2dvbGRsb2cnO1xudmFyIEFQTFVTX1FVRVVFID0gQVBMVVMgKyAnX3F1ZXVlJztcbnZhciBHT0xETE9HX1FVRVVFID0gR09MRExPRyArICdfcXVldWUnO1xudmFyIE1XX0NIQU5HRSA9ICdtd19jaGFuZ2UnO1xudmFyIE1FVEFfSU5GTyA9ICdNZXRhSW5mbyc7XG52YXIgQVBQRU5EX01FVEFfSU5GTyA9ICdhcHBlbmQnICsgTUVUQV9JTkZPO1xudmFyIFNFVF9NRVRBX0lORk8gPSAnc2V0JyArIE1FVEFfSU5GTztcbnZhciBIVFRQID0gJ2h0dHAnO1xudmFyIF9wdWJzdWIgPSAnX3B1YnN1Yic7XG5cbnZhciBkZWZhdWx0Q29kZSA9ICdvdGhlcic7XG52YXIgQ0xLID0gJzIxMDEnO1xudmFyIEVYUCA9ICcyMjAxJztcbnZhciBJTVBFWFAgPSAnMjIwMic7XG52YXIgT1RIRVIgPSAnMTk5OTknO1xudmFyIEFQUF9TSE9XID0gJzEwMjMnO1xudmFyIEFQUF9ISURFX09SX1VOTE9BRCA9ICcxMDEwJzsgXG52YXIgU0VTU0lPTl9JTlRFUlZBTCA9IDMwMDAwOyAvLyBzZXNzaW9uSWTov4fmnJ/ml7bpl7QgMzDnp5JcbnZhciBTSEFSRV9DQUNIRV9JTlRFUlZBTCA9IDEwMDAgKiA2MCAqIDMwO1xudmFyIEVLVlMgPSAnZWt2cyc7XG52YXIgRVZFTlRfTUFYX0NPVU5UID0gMTAwMDA7IC8vIOacrOWcsOacgOWkmuWtmOWCqOi/meS5iOWkmmVrduaVsOaNrlxudmFyIE1FTU9SWV9NQVhfQ09VTlQgPSAxOyAvLyDlhoXlrZjkuK3lrZjlgqjnmoTmnIDlpKfmlbDmja7mlbDph4/vvIzotoXov4fliJnnvJPlrZjliLDmnKzlnLBcbnZhciBNQVhfUVVFVUVfQ09VTlQgPSAxOyAvLyDkuLrpmLLmraLlm6DnvZHnu5zlvILluLjlr7zoh7TnvJPlrZjov4flpKfvvIzorr7nva7nvJPlrZjkuKrmlbDkuIrpmZBcbnZhciBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUwgPSAzMDAwOyAvLyBla3bpu5jorqTlj5HpgIHpl7TpmpTml7bpl7Q6IDPnp5JcbnZhciBQQUdFX1NUQVJUID0gJyQkX3BhZ2Vfc3RhcnQnO1xudmFyIFBBR0VfRU5EID0gJyQkX3BhZ2VfZW5kJztcbnZhciBBUFBfU1RBUlQgPSAnJCRfYXBwX3N0YXJ0JztcbnZhciBBUFBfRU5EID0gJyQkX2FwcF9lbmQnO1xudmFyIFVTRVJfUFJPRklMRV9LRVkgPSAnYXBsdXNfdXNlcl9wcm9maWxlJztcbnZhciBJTVBSSU5UID0gJ2ltcHJpbnQnO1xudmFyIElEX1RZUEUgPSAnYXBsdXMtaWR0eXBlJztcbnZhciBKU0JSSURHRV9PTkxZID0gJ2FwbHVzLWpzYnJpZGdlLW9ubHknO1xudmFyIFBBR0VfQ09ORklHID0gJ2FwbHVzLXBhZ2UtY29uZmlnJzsgXG52YXIgQVBMVVNfU0tJUF9BUFZfUlVMRVMgPSAnYXBsdXMtc2tpcC1hcHYtcnVsZXMnO1xudmFyIEFQTFVTX1BWX0RPTUFJTiA9ICdhcGx1cy1yaG9zdC12JztcbnZhciBBUExVU19FS1ZfRE9NQUlOID0gJ2FwbHVzLXJob3N0LWcnO1xudmFyIEFVVE9fR0VUX09QRU5JRCA9ICdhdXRvR2V0T3BlbmlkJztcbm1vZHVsZS5leHBvcnRzID0ge1xuICBQQUdFX0VOVEVSOiAnUEFHRV9FTlRFUicsXG4gIENVUlJFTlRfUEFHRV9DT05GSUc6ICdDVVJSRU5UX1BBR0VfQ09ORklHJyxcbiAgX0FOT05ZX0lEOiAnX2Fub255X2lkJyxcbiAgX0RFVl9JRDogJ19kZXZfaWQnLFxuICBfVVNFUl9JRDogJ191c2VyX2lkJyxcbiAgREVGQVVMVF9DT0RFOiBkZWZhdWx0Q29kZSxcbiAgT1RIRVI6IE9USEVSLFxuICBFVkVOVF9NQVA6IHtcbiAgICAnMjEwMSc6ICdjbGljaycsXG4gICAgJzIyMDEnOiAnZXhwb3N1cmUnLFxuICAgICcyMjAyJzogJ2V4cG9zdXJlJyxcbiAgICAnMTk5OTknOiBkZWZhdWx0Q29kZSxcbiAgICAnMTAyMyc6ICdhcHBfc2hvdycsXG4gICAgJzEwMTAnOiAnYXBwX2hpZGVfb3JfdW5sb2FkJ1xuICB9LFxuICBFVkVOVF9JRF9NQVA6IHtcbiAgICAnRVhQJzogRVhQLFxuICAgICdJTVBFWFAnOiBJTVBFWFAsXG4gICAgJ0NMSyc6IENMSyxcbiAgICAnT1RIRVInOiBPVEhFUixcbiAgICAnU0hPVyc6IEFQUF9TSE9XLFxuICAgICdIX09SX1UnOiBBUFBfSElERV9PUl9VTkxPQURcbiAgfSxcbiAgQVBMVVM6IEFQTFVTLFxuICBHT0xETE9HOiBHT0xETE9HLFxuICBVTlNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnVuc3Vic2NyaWJlJyxcbiAgU1VCU0NSSUJFOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuc3Vic2NyaWJlJyxcbiAgUFVCTElTSDogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnB1Ymxpc2gnLFxuICBDQUNIRV9QVUJTOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuY2FjaGVQdWJzJyxcbiAgQVBMVVNfVU5JVkVSU0FMOiBBUExVUyArICdfdW5pdmVyc2FsJyxcbiAgQVBMVVNfUVVFVUU6IEFQTFVTX1FVRVVFLFxuICBHT0xETE9HX1FVRVVFOiBHT0xETE9HX1FVRVVFLFxuICBDT01QTEVURTogJ2NvbXBsZXRlJyxcbiAgUFZfQ09ERTogJzIwMDEnLFxuICBFWFBfQ09ERTogRVhQLFxuICBDTEtfQ09ERTogQ0xLLFxuICBPVEhFUl9DT0RFOiBPVEhFUixcbiAgQ0xLOiAnQ0xLJyxcbiAgRVhQOiAnRVhQJyxcbiAgLy8gT1RIRVI6ICdPVEhFUicsXG4gIFNQTV9DTlQ6ICdzcG0tY250JyxcbiAgU1BNX1VSTDogJ3NwbS11cmwnLFxuICBTUE1fUFJFOiAnc3BtLXByZScsXG4gIE1XX0NIQU5HRV9QVjogTVdfQ0hBTkdFICsgJ19wdicsXG4gIE1XX0NIQU5HRV9ISkxKOiBNV19DSEFOR0UgKyAnX2hqbGonLFxuICBIVFRQOiBIVFRQICsgJzonLFxuICBIVFRQUzogJ2h0dHBzOicsXG4gIEFQUEVORF9NRVRBX0lORk86IEFQUEVORF9NRVRBX0lORk8sXG4gIFNFVF9NRVRBX0lORk86IFNFVF9NRVRBX0lORk8sXG4gIEFQTFVTX0FQUEVORF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgQVBQRU5EX01FVEFfSU5GTyxcbiAgQVBMVVNfU0VUX01FVEFfSU5GTzogQVBMVVMgKyAnLicgKyBTRVRfTUVUQV9JTkZPLFxuICBQVklEOidwdmlkJyxcbiAgQVBMVVNfTE9HX1BJUEU6J2FwbHVzLWxvZy1waXBlJyxcbiAgb3BlbkFQSXM6IFtcbiAgICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJywgXG4gICAgJ2NvbWJpbmVSZWNvcmQnLCAncmVjb3JkVWRhdGEnLCAncmVxdWVzdFZUQ29uZmlnJywgJ3JlcXVlc3RSZW1vdGVDb25maWcnLFxuICAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcbiAgICAndXBkYXRlUGFnZVByb3BlcnRpZXMnLCBcbiAgICAndXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcbiAgICAndXBkYXRlUGFnZVV0cGFyYW0nLFxuICAgICd1cGRhdGVOZXh0UGFnZVV0cGFyYW0nLFxuICAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLCAnc2tpcFBhZ2UnLFxuICAgICd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsICdnZXRQYWdlU3BtVXJsJywgJ2dldFBhZ2VTcG1QcmUnLFxuICAgICdzZXRQYWdlTmFtZScsICdnZXRFbGVtZW50U1BNJywgJ3JlY29yZEFwcExpbmsnXG4gIF0sXG4gIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG4gIFNFU1NJT05fUEFVU0VfVElNRTogJ3Nlc3Npb25fcGF1c2VfdGltZScsXG4gIElNUFJJTlQ6ICdpbXByaW50JyxcbiAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcbiAgTUFYX0VWRU5USURfTEVOR1RIOiAxMjgsXG4gIE1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIOiAyNTYsXG4gIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG4gIEZBSUxFRF9SRVFVRVNUUzogJ2ZhaWxlZF9yZXF1ZXN0cycsXG4gIFJFUVVFU1RTOiAncmVxdWVzdHMnLFxuICBTSEFSRVM6ICdzaGFyZXMnLFxuICBBUExVU19TU1JDOiAnX2FwbHVzX3NzcmMnLFxuICBFS1ZTOiBFS1ZTLFxuICBFVkVOVF9NQVhfQ09VTlQ6IEVWRU5UX01BWF9DT1VOVCxcbiAgTUVNT1JZX01BWF9DT1VOVDogTUVNT1JZX01BWF9DT1VOVCxcbiAgTUFYX1FVRVVFX0NPVU5UOiBNQVhfUVVFVUVfQ09VTlQsXG4gIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTDogRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMLFxuICBQQUdFX1NUQVJUOiBQQUdFX1NUQVJULFxuICBQQUdFX0VORDogUEFHRV9FTkQsXG4gIEFQUF9TVEFSVDogQVBQX1NUQVJULFxuICBBUFBfRU5EOiBBUFBfRU5ELFxuICBVU0VSX1BST0ZJTEVfS0VZOiBVU0VSX1BST0ZJTEVfS0VZLFxuICBTSEFSRV9DQUNIRV9JTlRFUlZBTDogU0hBUkVfQ0FDSEVfSU5URVJWQUwsXG4gIElNUFJJTlQ6IElNUFJJTlQsXG4gIElEX1RZUEU6IElEX1RZUEUsXG4gIEdMT0JBTF9QUk9QRVJUWTogJ2dsb2JhbHByb3BlcnR5JyxcbiAgLy8gVVRNX0tFWVM6IFsndXRtX3NvdXJjZScsICd1dG1fY29udGVudCcsICd1dG1fbWVkaXVtJywgJ3V0bV9jYW1wYWlnbicsICd1dG1fdGVybSddLFxuICBKU0JSSURHRV9PTkxZOiBKU0JSSURHRV9PTkxZLFxuICBQQUdFX0NPTkZJRzogUEFHRV9DT05GSUcsXG4gIEFQTFVTX1NLSVBfQVBWX1JVTEVTOiBBUExVU19TS0lQX0FQVl9SVUxFUyxcbiAgQVBMVVNfUFZfRE9NQUlOOiBBUExVU19QVl9ET01BSU4sXG4gIEFQTFVTX0VLVl9ET01BSU46IEFQTFVTX0VLVl9ET01BSU4sXG4gIEFQTFVTX0lNUFJJTlRfVkVSU0lPTjogJ0FQTFVTX0lNUFJJTlRfVkVSU0lPTicsXG4gIEFQTFVTX1JFTU9URV9DT05GSUc6ICdBUExVU19SRU1PVEVfQ09ORklHJyxcbiAgUkFOSzogJ2Vrdl9yYW5rJyxcbiAgV0VCX0VWRU5UX1NVRkZJWDogJy93ZWJfbG9ncycsXG4gIFdFQl9QQ19QVl9TVUZGSVg6ICd2LmdpZicsXG4gIFdFQl9XQVBfUFZfU1VGRklYOiAnbS5naWYnLFxuICBQQUdFX0xFQVZFOiAnJCRfcGFnZV9sZWF2ZScsXG4gIEFQTFVTX0FVVE9UUkFDS19FTkFCTEVEOiAnYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWQnLFxuICBBUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEU6ICdhcGx1cy1hdXRvdHJhY2stZW5hYmxlZC1yZW1vdGUnLFxuICBBUExVU19BVVRPVFJBQ0tfQ09ORklHOiAnYXBsdXMtYXV0b3RyYWNrLWNvbmZpZycsXG4gIEFQTFVTX0FVVE9UUkFDS19DT05GSUdfUkVNT1RFOiAnYXBsdXMtYXV0b3RyYWNrLWNvbmZpZy1yZW1vdGUnLFxuICBBUExVU19FVkVOVF9MSU1JVFJBVEVTOiAnYXBsdXMtZXZlbnQtbGltaXRyYXRlcycsXG4gIEFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UOiAnYXBsdXMtZGlzYWJsZS1hdXRvZXZlbnQnLFxuICBBUExVU19ESVNBQkxFX0FVVE9FVkVOVF9SRU1PVEU6ICdhcGx1cy1kaXNhYmxlLWF1dG9ldmVudCcsXG4gIEFQTFVTX0RJU0FCTEVfQVVUT1BWOiAnYXBsdXMtZGlzYWJsZS1hcHYnLFxuICBBUExVU19ESVNBQkxFX0FVVE9QVl9SRU1PVEU6ICdhcGx1cy1kaXNhYmxlLWFwdi1yZW1vdGUnLFxuICBBUExVU19ERVZJQ0VfRU5BQkxFOiAnYXBsdXMtZGV2aWNlLWVuYWJsZScsXG4gIFBFUkZPUk1BTkNFX1dBUklORzogJyQkX3BlcmZfd2FybmluZycsXG4gIFNUQVJUX0lEOiAnU1RBUlRfSUQnLFxuICBBVVRPX0dFVF9PUEVOSUQ6IEFVVE9fR0VUX09QRU5JRCxcbiAgQVBMVVNfQlJJREdFX05BTUU6ICdhcGx1cy1icmlkZ2UtbmFtZScsXG4gIEFQTFVTX01JTklfUkVRVUVTVF9USU1FT1VUOiAnYXBsdXMtcmVxdWVzdC10aW1lb3V0JyxcbiAgQVBMVVNfTEFURUFTVF9VVE06ICdBUExVU19MQVRFQVNUX1VUTScsXG59O1xuXG4vLyB2YXIgb3BlbkFQSXMgPSBbXG4vLyAgICdzZW5kJywgJ2VudGVyJywgJ3NlbmRQVicsICdyZWNvcmQnLFxuLy8gICAnc2V0UGFnZVNQTScsICdzZXRNZXRhSW5mbycsICdhcHBlbmRNZXRhSW5mbycsXG4vLyAgIFVQREFURSArICdQYWdlUHJvcGVydGllcycsXG4vLyAgIFVQREFURSArICdOZXh0UGFnZVByb3BlcnRpZXMnLFxuLy8gICBVUERBVEUgKyAnUGFnZVV0cGFyYW0nLFxuLy8gICBVUERBVEUgKyAnTmV4dFBhZ2VVdHBhcmFtJyxcbi8vICAgJ3BhZ2VBcHBlYXInLCAncGFnZURpc2FwcGVhcicsXG4vLyAgICdza2lwUGFnZSdcbi8vIF07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvYXBsdXNTdGF0aWMuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwibWV0YUluZm9cIjoge1xuICAgIFwiYXBsdXMtaWZyLXB2XCI6IFwiMVwiLFxuICAgIFwiYXBsdXMtcmhvc3QtdlwiOiBcIlwiLFxuICAgIFwiYXBsdXMtcmhvc3QtZ1wiOiBcIlwiLFxuICAgIFwiYXBsdXMtY2hhbm5lbFwiOiBcIlwiLFxuICAgIFwiYXBwSWRcIjogXCJcIixcbiAgICBcInNka0lkXCI6IFwiYXBsdXNfY2xvdWRfdW1cIixcbiAgICBcImFwbHVzLWNwdmRhdGFcIjoge30sXG4gICAgXCJhcGx1cy1leGRhdGFcIjoge30sXG4gICAgXCJhcGx1cy1nbG9iYWxkYXRhXCI6IHt9LFxuICAgIFwiYXBsdXMtbW1zdGF0LXRpbWVvdXRcIjogXCIxMDAwMFwiLFxuICAgIFwiYXBsdXMtdG9VVFwiOiBcIlwiLFxuICAgIFwiYXBsdXMtZGlzYWJsZS1hdXRvZXZlbnRcIjogZmFsc2UsXG4gICAgXCJhcGx1cy1kaXNhYmxlLWFwdlwiOiBmYWxzZSxcbiAgICBcImFwbHVzLWF1dG90cmFjay1lbmFibGVkXCI6IGZhbHNlLFxuICAgIFwiYXBsdXMtZGV2aWNlLWVuYWJsZVwiOiB0cnVlXG4gIH0sXG4gIFwiZ2xvYmFsQ29uZmlnXCI6IHtcbiAgICBcImlzRGVjb2RlVXJsXCI6IHRydWUsXG4gICAgXCJpc0FsaVwiOiBmYWxzZSxcbiAgICBcImlzVU1cIjogdHJ1ZSxcbiAgICBcIkFQTFVTX1FVRVVFXCI6IFwiYXBsdXNfcXVldWVcIixcbiAgICBcIkVUQUdfU1RPUkFHRV9LRVlcIjogXCJfX0VUQUdfX0NOQV9fSURfX1wiLFxuICAgIFwic2NyaXB0X25hbWVcIjogXCJhcGx1cy5qc1wiLFxuICAgIFwibHZlclwiOiBcIjEuOS41MVwiLFxuICAgIFwiTkFNRV9TVE9SQUdFX0tFWVNcIjoge1xuICAgICAgXCJSRUZFUlJFUlwiOiBcIndtX3JlZmVycmVyXCIsXG4gICAgICBcIlJFRkVSUkVSX1BWX0lEXCI6IFwicmVmZXJfcHZfaWRcIixcbiAgICAgIFwiTE9TVF9QVl9QQUdFX0RVUkFUSU9OXCI6IFwibG9zdF9wdl9wYWdlX2R1cmF0aW9uXCIsXG4gICAgICBcIkxPU1RfUFZfUEFHRV9TUE1BQlwiOiBcImxvc3RfcHZfcGFnZV9zcG1hYlwiLFxuICAgICAgXCJMT1NUX1BWX1BBR0VcIjogXCJsb3N0X3B2X3BhZ2VcIixcbiAgICAgIFwiTE9TVF9QVl9QQUdFX01TR1wiOiBcImxvc3RfcHZfcGFnZV9tc2dcIlxuICAgIH1cbiAgfSxcbiAgXCJwbHVnaW5zXCI6IFtcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19zZXNzaW9uX21hbmFnZXJcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfd2ViL2FwbHVzX3Nlc3Npb25faW5qZWN0LmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX3RyYWNrX2RlYnVnXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX3dlYi9hcGx1c190cmFja19kZWJ1Z19jbG91ZC5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19ib2R5X3JlYWR5XCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX3dlYi9hcGx1c19ib2R5X3JlYWR5LmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcInB1YnN1YlwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbWVzc2FnZXIvcHVic3ViX3dlYi5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19jbGllbnRcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfY2xpZW50X3dlYi5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19tZXRhX2luamVjdFwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19tZXRhX2luamVjdC5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19hY1wiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc193ZWIvYXBsdXNfYWNfaW5qZWN0LmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX3dlYi9hcGx1c19hZV9pbmplY3QuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwibmFtZV9zdG9yYWdlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9tb25pdG9yL25hbWVfc3RvcmFnZS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJyZWNvcmRfbG9zdF9wdlwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbW9uaXRvci9yZWNvcmRfbG9zdF9wdi5qcycpLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcImxvc3RQdlJlY29yZFJhdGlvXCI6IDAuMDFcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX21vbml0b3JcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfbW9uaXRvci5qcycpLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcIm9ic29sZXRlSW50ZXJSZWNvcmRSYXRpb1wiOiBcIjAuMDFcIixcbiAgICAgICAgXCJqc0Vycm9yUmVjb3JkUmF0aW9cIjogXCIwLjAxXCIsXG4gICAgICAgIFwiYnJvd3NlclN1cHBvcnRSYXRpb1wiOiBcIjAuMDFcIlxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfd2ViX2h0dHBfdW1cIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfd2ViX2h0dHBfdW0uanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbG9nX2luamVjdFwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19sb2dfaW5qZWN0LmpzJyksXG4gICAgICBcImRlcHNcIjogW1xuICAgICAgICBcImFwbHVzX21ldGFfaW5qZWN0XCJcbiAgICAgIF0sXG4gICAgICBcImNvbmZpZ1wiOiB7XG4gICAgICAgIFwicGx1Z2luc1wiOiB7XG4gICAgICAgICAgXCJwdlwiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcInJlbW90ZV9jb25maWdcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3JjZmdfd2ViLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZW5fdG9fc2VuZHB2XCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doZW5fdG9fc2VuZHB2LmpzJyksXG4gICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgICAgICAgICBcImFwbHVzV2FpdGluZ1wiOiBcIlwiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfd2ViX2Nsb3VkX3VtLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZFwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hhdF90b19zZW5kX3dlYl9jbG91ZC5qcycpLFxuICAgICAgICAgICAgICBcImNvbmZpZ1wiOiB7XG4gICAgICAgICAgICAgICAgXCJwdmRhdGFUb1V0XCI6IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZHB2X3VzZXJkYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhLmpzJyksXG4gICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIlxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRwdl91c2VyZGF0YV93ZWJcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfd2ViLmpzJyksXG4gICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZHB2X3VzZXJkYXRhXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdXQyXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3V0Mi5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdW0ybmF0aXZlXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3VtMm5hdGl2ZS5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiY2FuX3RvX3NlbmRwdlwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2LmpzJyksXG4gICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgICAgICAgICBcImZsYWdcIjogXCJOT1wiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcImFmdGVyX3B2XCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L2FmdGVyX3B2LmpzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFwiaGpsalwiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcInJlbW90ZV9jb25maWdcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3JjZmdfd2ViLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfd2ViX2Nsb3VkX3VtLmpzJyksXG4gICAgICAgICAgICAgIFwiZGVwc1wiOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGF0X3RvX3NlbmRfd2ViX2Nsb3VkLmpzJyksXG4gICAgICAgICAgICAgIFwiZGVwc1wiOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19oamxqX3VzZXJkYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhLmpzJyksXG4gICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIlxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX2hqbGpfdXNlcmRhdGFfd2ViXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX3dlYi5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCIsXG4gICAgICAgICAgICAgICAgXCJ3aGF0X3RvX2hqbGpfdXNlcmRhdGFcIlxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX2hqbGpfdXQyXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3V0Mi5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19oamxqX3VtMm5hdGl2ZVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91bTJuYXRpdmUuanMnKSxcbiAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX3NwbV9pbmplY3RcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfd2ViX2Nsb3VkL2FwbHVzX3NwbV9jbG91ZC5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19hcGlcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfYXBpLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2ZpbmdlcnBpbnRcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfd2ViL2xpYl9maW5nZXJwcmludC9pbmRleC5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJtZXRhX3F1ZXVlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzVW1CcmlkZ2VcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfd2ViL2xpYl9qc0JyaWRnZS9BdG1CcmlkZ2UuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfcXVldWVcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX3F1ZXVlL2FwbHVzX3F1ZXVlLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImhvdF9sb2FkZXJcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfd2ViL2xpYl9ob3QvaG90X2xvYWRlci5qcycpLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcInVybFJ1bGVzXCI6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcInJ1bGVcIjogXCJhcGx1c193ZWJ2dF9tZXNzYWdlclwiLFxuICAgICAgICAgICAgXCJjZG5QYXRoXCI6IFtcbiAgICAgICAgICAgICAgXCJodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvbWxvZy9hcGx1c193ZWJ2dF9tZXNzYWdlci5qc1wiXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19hcHZcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfd2ViL2FwbHVzX2Fwdl9pbmplY3RfdW0uanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiYXBsdXNfbG9nX2luamVjdFwiLFxuICAgICAgICBcImFwbHVzX2FwaVwiXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19hdXRvdHJhY2tcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfd2ViL2FwbHVzX2F1dG90cmFja19pbmplY3QuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfaGVhdG1hcFwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc193ZWIvYXBsdXNfaGVhdG1hcF9pbmplY3QuanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiYXBsdXNfbG9nX2luamVjdFwiLFxuICAgICAgICBcImFwbHVzX2FwaVwiXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19wYWdlbGVhdmVcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfd2ViL2FwbHVzX3BhZ2VsZWF2ZV9pbmplY3QuanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiYXBsdXNfbG9nX2luamVjdFwiLFxuICAgICAgICBcImFwbHVzX2FwaVwiXG4gICAgICBdXG4gICAgfVxuICBdXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FwbHVzX2Nsb3VkX3VtX2NvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogYXBsdXNfc2Vzc2lvbl9pbmplY3QuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uKCkgeyAgICAgIFxuICAgICAgcmVxdWlyZSgnLi9saWJfc2Vzc2lvbl9tYW5hZ2VyL21haW4nKSgpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc193ZWIvYXBsdXNfc2Vzc2lvbl9pbmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IG1haW4uanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxuXG4vLyB2YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdW1VdGlscyA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vdXRpbHMnKTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIHZhciByaWQgPSB1bVV0aWxzLmdldFN0YXJ0SWQoKTtcbiAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShhcGx1c1N0YXRpYy5TVEFSVF9JRCwgcmlkKTtcbiAgfSBjYXRjaCAoZSkge31cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc193ZWIvbGliX3Nlc3Npb25fbWFuYWdlci9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImZ1bmN0aW9uIGdldFJhbmRvbVN0cihsZW4pIHtcbiAgdmFyIHN0ciA9ICcnO1xuICB2YXIgYXJyID0gWycwJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJywgJ2onLCAnaycsICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJywgJ3MnLCAndCcsICd1JywgJ3YnLCAndycsICd4JywgJ3knLCAneicsICdBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBOdW1iZXIobGVuKTsgaSsrKSB7XG4gICAgdmFyIHBvcyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChhcnIubGVuZ3RoIC0gMSkpO1xuICAgIHN0ciArPSBhcnJbcG9zXTtcbiAgfVxuICByZXR1cm4gc3RyO1xufTtcbmV4cG9ydHMuZ2V0UmFuZG9tU3RyID0gZ2V0UmFuZG9tU3RyO1xuXG5leHBvcnRzLnN0YXJ0c1dpdGggPSBmdW5jdGlvbihzdHIsIHNlYXJjaFZhbCkge1xuICBpZiAoIXN0ciB8fCAhc2VhcmNoVmFsIHx8IHNlYXJjaFZhbC5sZW5ndGggPT09IDAgfHwgc2VhcmNoVmFsLmxlbmd0aCA+IHN0ci5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgc2VhcmNoVmFsLmxlbmd0aCkgPT09IHNlYXJjaFZhbDtcbn07XG5cbmV4cG9ydHMuYXNzaWduID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgfVxuXG4gIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICBpZiAoc291cmNlKSB7XG4gICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwgbmV4dEtleSkpIHtcbiAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5cbi8vIDEuZWt25Lit5a2Y5Zyo6KeE5YiZ5LiN5ZCI5rOV5oOF5Ya177yM5Lii5byD5pW05p2h5LqL5Lu2XG4vLyAyLmV2ZW50aWTplb/luqbkuI3og73otoXov4cxMjjkuKrlrZfnrKZcbi8vIDMua2V56ZW/5bqm5LiN6IO96LaF6L+HMjU25Liq5a2X56ymXG4vLyA0Luavj+S4qmV2ZW505pC65bima2V55Liq5pWw5LiN6IO96LaF6L+HMTAw5LiqXG5leHBvcnRzLmNoZWNrRXZlbnQgPSBmdW5jdGlvbihldmVudElkLCBwcm9wZXJ0aWVzKSB7XG4gIHZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuICB2YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG4gIHZhciBqc29uVXRpbCA9IHJlcXVpcmUoJy4vanNvblV0aWwnKTtcbiAgaWYgKCEoZXZlbnRJZCAmJiB0eXBlb2YgZXZlbnRJZCA9PT0gJ3N0cmluZycpKSB7XG4gICAgdWxvZygpLncoJ2V2ZW50IGxvZ2tleSBpcyBpbnZhbGlkLCBpZCA9JywgZXZlbnRJZCB8fCBcIicnIGV2ZW50IHByb3BlcnRpZXMgPSBcIiwganNvblV0aWwuc3RyaW5nZnkocHJvcGVydGllcy5jdXNwKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8g5L+d55WZ5YWz6ZSu5a2XXG4gIHZhciByZXNlcnZlV29yZHMgPSBbJ2lkJywgJ2R1J107XG4gIHZhciByZXNlcnZlV29yZE1hcCA9IHt9O1xuXG4gIHJlc2VydmVXb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7XG4gICAgcmVzZXJ2ZVdvcmRNYXBbd29yZF0gPSAxO1xuICB9KTtcblxuICAvLyDmo4Dmn6VldmVudElk5piv5ZCm5LiO5L+d55WZ5YWz6ZSu5a2X5Yay56qBXG4gIGlmIChyZXNlcnZlV29yZE1hcFtldmVudElkXSkge1xuICAgIHVsb2coKS5lKCdldmVudElkIGhhcyBjb25mbGljdCB3aXRoIHJlc2VydmV3b3JkczogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChldmVudElkLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCkge1xuICAgIHVsb2coKS5lKCdUaGUgbWF4aW11bSBsZW5ndGggb2YgZXZlbnQgaWQgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBwcm9wZXJ0aWVz55qE5ZCI5rOV57G75Z6L5Li6IHN0cmluZyB8IG9iamVjdChub3QgaW5jbHVkZSBBcnJheSlcbiAgaWYgKHByb3BlcnRpZXNcbiAgICAmJiAodHlwZW9mIHByb3BlcnRpZXMgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkocHJvcGVydGllcykpXG4gICAgJiYgdHlwZW9mIHByb3BlcnRpZXMgIT09ICdzdHJpbmcnKSB7XG4gICAgdWxvZygpLmUoJ3BsZWFzZSBjaGVjayB0cmFja0V2ZW50IHByb3BlcnRpZXMuIHByb3BlcnRpZXMgc2hvdWxkIGJlIHN0cmluZyBvciBvYmplY3Qobm90IGluY2x1ZGUgQXJyYXkpJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBjb3VudCA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkpIHtcbiAgICAgICAgaWYgKGtleS5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCkge1xuICAgICAgICAgIHVsb2coKS5lKCdUaGUgbWF4aW11bSBsZW5ndGggb2YgcHJvcGVydHkga2V5IHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY291bnQgPj0gYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWVNfQ09VTlQpIHtcbiAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gY291bnQgb2YgcHJvcGVydGllcyBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc2VydmVXb3JkTWFwW2tleV0pIHtcbiAgICAgICAgICB1bG9nKCkuZSgncHJvcGVydHkga2V5IGhhcyBjb25mbGljdCB3aXRoIHJlc2VydmVXb3JkczogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvdW50ICs9IDE7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcblxuZXhwb3J0cy5kZWxldGVJbmZvID0gZnVuY3Rpb24oZ29rZXksIGFycikge1xuICBlYWNoKGFyciwgZnVuY3Rpb24odikge1xuICAgIGRlbGV0ZSBnb2tleVt2XTtcbiAgfSk7XG4gIHJldHVybiBnb2tleTtcbn07XG5cbmV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydHMuZ2V0U3RhcnRJZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZ2V0UmFuZG9tU3RyKDEwKSArIERhdGUubm93KCkgKyBnZXRSYW5kb21TdHIoOSk7XG59O1xuXG5leHBvcnRzLkRhdGFUeXBlID0ge1xuICBIQUxGX1NFU1NJT046ICdoYWxmX3Nlc3Npb24nLFxuICBDTE9TRV9TRVNTSU9OOiAnY2xvc2Vfc2Vzc2lvbicsXG4gIEVLVjogJ2VrdicsXG4gIEVOVEVSX1BBR0U6ICdlbnRlcl9wYWdlJyxcbiAgTEVBVkVfUEFHRTogJ2xlYXZlX3BhZ2UnXG59O1xuXG5leHBvcnRzLkFjY2Vzc1R5cGUgPSB7XG4gIE1PQklMRV9ORVRXT1JLXzJHOiAnMmcnLFxuICBNT0JJTEVfTkVUV09SS18zRzogJzNnJyxcbiAgTU9CSUxFX05FVFdPUktfNEc6ICc0ZycsXG4gIE1PQklMRV9ORVRXT1JLX05PTkU6ICdub25lJ1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xudmFyIExPR19QUkVGSVggPSAnW0FQTFVTXSAtLSAnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX2RlYnVnID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gVUxvZygpIHtcbiAgICB0aGlzLnNldERlYnVnID0gZnVuY3Rpb24gKGRlYnVnKSB7XG4gICAgICBfZGVidWcgPSBkZWJ1ZztcbiAgICB9O1xuXG4gICAgdGhpcy5pID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5pbmZvLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudiA9IGZ1bmN0aW9uICgpIHsgICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGVcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy50aXBfdyA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICclYyAnICsgTE9HX1BSRUZJWCArIG1zZyxcbiAgICAgICAgICAnYmFja2dyb3VuZDpyZWQ7IHBhZGRpbmc6IDRweDsgcGFkZGluZy1yaWdodDogOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGNvbG9yOiAjZmZmOydcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnJlcGVhdCA9IGZ1bmN0aW9uKGNoYXIpIHtcbiAgICAgIHZhciByZXMgPSBjaGFyO1xuICAgICAgd2hpbGUgKHJlcy5sZW5ndGggPCA4Nikge1xuICAgICAgICByZXMgPSByZXMgKyBjaGFyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX2luc3RhbmNlID09PSBudWxsKSB7XG4gICAgICBfaW5zdGFuY2UgPSBuZXcgVUxvZygpO1xuICAgIH1cbiAgICByZXR1cm4gX2luc3RhbmNlO1xuICB9O1xufSkoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91bG9nLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuZXhwb3J0cy5zdHJpbmdmeSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn07XG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0cy5wYXJzZVRvQXJyYXkgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiBbXTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vanNvblV0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG52YXIgaXNQbGFpbk9iamVjdCA9IHJlcXVpcmUoJy4vaXNQbGFpbk9iamVjdCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIsIGZuKSB7XG4gIGlmKGlzUGxhaW5PYmplY3QoYXJyKSAmJiBhcnIubGVuZ3RoID09PSB2b2lkIDApe1xuICAgIGZvcih2YXIgYXR0ciBpbiBhcnIpe1xuICAgICAgaWYoYXJyLmhhc093blByb3BlcnR5KGF0dHIpKXtcbiAgICAgICAgZm4oYXR0cixhcnJbYXR0cl0sYXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1lbHNlIHtcbiAgICB2YXIgaTtcbiAgICB2YXIgbCA9IGFyci5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHJzID0gZm4oYXJyW2ldLCBpKTtcbiAgICAgIGlmIChycyA9PT0gJ2JyZWFrJykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmope1xuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIHByb3RvID0gb2JqO1xuICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSAhPT0gbnVsbCkge1xuICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PT0gcHJvdG87XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2lzUGxhaW5PYmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDkupHkuIp3ZWLln4vngrnpqozor4FhcGx1c190cmFja19kZWJ1Z19pZOazqOWFpemAu+i+kVxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcbnZhciB1dGlsRXZlbnQgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEV2ZW50Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRvYyA9IGRvY3VtZW50O1xuICAgICAgdmFyIGFwbHVzID0gKHdpbmRvdy5hcGx1cyB8fCAod2luZG93LmFwbHVzID0ge30pKTtcbiAgICAgIC8vIOS/neivgeWPquS8muacieS4gOS4qmFwbHVzX3BsdWdpbl9tb25pdG9y6L+Q6KGMXG4gICAgICBpZiAoYXBsdXMuX2FwbHVzX2NwbHVnaW5fdHJhY2tfZGViKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwbHVzLl9hcGx1c19jcGx1Z2luX3RyYWNrX2RlYiA9IHtcbiAgICAgICAgJ3N0YXR1cyc6ICdpbml0J1xuICAgICAgfTtcbiAgICAgIHZhciB3aW4gPSB3aW5kb3c7XG4gICAgICB2YXIgaXNUcmFja0RlYnVnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBMUyA9IHdpbi5sb2NhbFN0b3JhZ2U7XG4gICAgICAgICAgdmFyIF90cmFja2lkID0gJ2FwbHVzX3RyYWNrX2RlYnVnX2lkJztcbiAgICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnWz98Jl0nICsgX3RyYWNraWQgKyAnPShcXFxcdyopJyk7XG4gICAgICAgICAgdmFyIG1hdGNoX3ZhbHVlID0gbG9jYXRpb24uaHJlZi5tYXRjaChyZWcpO1xuICAgICAgICAgIGlmIChtYXRjaF92YWx1ZSAmJiBtYXRjaF92YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBMUy5zZXRJdGVtKF90cmFja2lkLCBtYXRjaF92YWx1ZVsxXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBfciA9IGRvYy5yZWZlcnJlciB8fCAnJztcbiAgICAgICAgICAgIHZhciBtYXRjaF9yZWZlciA9IF9yLm1hdGNoKHJlZyk7XG4gICAgICAgICAgICBpZiAobWF0Y2hfcmVmZXIgJiYgbWF0Y2hfcmVmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBMUy5zZXRJdGVtKF90cmFja2lkLCBtYXRjaF9yZWZlclsxXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgX24gPSB3aW4ubmFtZSB8fCAnJztcbiAgICAgICAgICAgICAgdmFyIG1hdGNoX25hbWUgPSBfbi5tYXRjaChyZWcpO1xuICAgICAgICAgICAgICBpZiAobWF0Y2hfbmFtZSAmJiBtYXRjaF9uYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBMUy5zZXRJdGVtKF90cmFja2lkLCBtYXRjaF9uYW1lWzFdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgX3RyYWNraWRWYWx1ZSA9IExTLmdldEl0ZW0oX3RyYWNraWQpIHx8ICcnO1xuICAgICAgICAgIGlmIChfdHJhY2tpZFZhbHVlICYmIF90cmFja2lkVmFsdWUubGVuZ3RoID4gNTApIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBfdHJhY2tpZFZhbHVlLnNwbGl0KCdfJyk7XG4gICAgICAgICAgICB2YXIgZGF0ZTtcbiAgICAgICAgICAgIGlmICh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgZGF0ZSA9IHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV0ucmVwbGFjZSgvbG9nLywgJycpO1xuICAgICAgICAgICAgICB2YXIgbG9nZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgIHZhciBsb2dkYXRlVGltZSA9IGxvZ2RhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgdmFyIG5vd1RpbWUgPSBub3cuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICBsb2dkYXRlLnNldEZ1bGxZZWFyKHBhcnNlSW50KGRhdGUuc3Vic3RyKDAsIDQpKSk7XG4gICAgICAgICAgICAgIGxvZ2RhdGUuc2V0TW9udGgocGFyc2VJbnQoZGF0ZS5zdWJzdHIoNCwgMikgLSAxKSk7XG4gICAgICAgICAgICAgIGxvZ2RhdGUuc2V0RGF0ZShwYXJzZUludChkYXRlLnN1YnN0cig2LCAyKSkpO1xuICAgICAgICAgICAgICBsb2dkYXRlLnNldEhvdXJzKHBhcnNlSW50KGRhdGUuc3Vic3RyKDgsIDIpKSk7XG4gICAgICAgICAgICAgIGxvZ2RhdGUuc2V0TWludXRlcyhwYXJzZUludChkYXRlLnN1YnN0cigxMCwgMikpKTtcbiAgICAgICAgICAgICAgbG9nZGF0ZS5zZXRTZWNvbmRzKHBhcnNlSW50KGRhdGUuc3Vic3RyKDEyLCAyKSkpO1xuICAgICAgICAgICAgICBsb2dkYXRlLnNldE1pbGxpc2Vjb25kcygwKTtcbiAgICAgICAgICAgICAgbG9nZGF0ZVRpbWUgPSBsb2dkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgbm93VGltZSA9IG5vdy5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgIHZhciBsaW1pdCA9IG5vd1RpbWUgLSBsb2dkYXRlVGltZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGxpbWl0IDw9IDM2MDAwMDAgPyAoX3RyYWNraWRWYWx1ZSB8fCBtYXRjaF92YWx1ZVsxXSkgOiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHZhciBzZXRUcmFja0RlYnVnSW5mbyA9IGZ1bmN0aW9uKGRlYnVnSWQpIHtcbiAgICAgICAgYXBsdXMuX2FwbHVzX2NwbHVnaW5fdHJhY2tfZGViLnN0YXR1cyA9ICdzdGFydCc7XG4gICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgYXBsdXNfdHJhY2tfZGVidWdfaWQ6IGRlYnVnSWQsXG4gICAgICAgIH07XG4gICAgICAgIHZhciBxID0gd2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSk7XG4gICAgICAgIHEucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCBvYmpdXG4gICAgICAgIH0pO1xuICAgICAgICBxLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIG9ial1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXBsdXMuX2FwbHVzX2NwbHVnaW5fdHJhY2tfZGViLnN0YXR1cyA9ICdjb21wbGV0ZSc7XG4gICAgICB9O1xuICAgICAgXG4gICAgICB1dGlsRXZlbnQub24od2luLCAnbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkYXRhID0gZSAmJiBlLmRhdGE7XG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubWVzc2FnZSA9PT0gXCJxdF92ZXJpZnlfbXNnXCIpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FwbHVzX3RyYWNrX2RlYnVnX2lkJywgZGF0YS5kYXRhKTtcbiAgICAgICAgICBzZXRUcmFja0RlYnVnSW5mbyhkYXRhLmRhdGEpO1xuICAgICAgICAgIGlmIChlLnNvdXJjZSkge1xuICAgICAgICAgICAgZS5zb3VyY2UucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICBtZXNzYWdlOiAncXRfbXNnX3NkaydcbiAgICAgICAgICAgIH0sIGUub3JpZ2luKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIGFwbHVzX3RyYWNrX2RlYnVnX2lkID0gaXNUcmFja0RlYnVnKCk7XG4gICAgICBpZiAoYXBsdXNfdHJhY2tfZGVidWdfaWQpIHtcbiAgICAgICAgc2V0VHJhY2tEZWJ1Z0luZm8oYXBsdXNfdHJhY2tfZGVidWdfaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9hcGx1c190cmFja19kZWJ1Z19jbG91ZC5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOS6i+S7tuexu+W3peWFt+mbhuWQiFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBwYXNzaXZlU3VwcG9ydGVkID0gcmVxdWlyZSgnLi9wYXNzaXZlU3VwcG9ydGVkJyk7XG52YXIgYXBsdXNUYXAgPSByZXF1aXJlKCcuL2FwbHVzVGFwJyk7XG5cbi8qKlxuICogdGFwIG1ldGhvZHNcbiAqIHRoeCB0byBA54G1546JXG4gKi9cbmZ1bmN0aW9uIHRhcEV2ZW50QmluZCAoZWxlbWVudCwgZm4sIGV2ZW50X3R5cGUpIHtcbiAgdmFyIF8kID0gYXBsdXMuXyQgfHwge307XG4gIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm8gfHwge307XG4gIHZhciBhcGx1c19jdGFwID0gbWV0YV9pbmZvLmFwbHVzX2N0YXAgfHwge307XG4gIHZhciBhcGx1c1RvdWNoID0gbWV0YV9pbmZvWydhcGx1cy10b3VjaCddO1xuICAvLyDlpoLmnpzkuJrliqHmlrnmnInoh6rlrprkuYnlrp7njrDnmoR0YXDkuovku7bmj5Lku7bvvIzkvJjlhYjmjInor6Xkuovku7bmiafooYxcbiAgaWYgKGFwbHVzX2N0YXAgJiYgdHlwZW9mIGFwbHVzX2N0YXAub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBhcGx1c19jdGFwLm9uKGVsZW1lbnQsIGZuKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgaXNUb3VjaCA9ICdvbnRvdWNoZW5kJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpZiAoaXNUb3VjaCAmJiAoYXBsdXNUb3VjaCA9PT0gJ3RhcCcgfHwgZXZlbnRfdHlwZSA9PT0gJ3RhcFNwbScgfHwgZXZlbnRfdHlwZSA9PT0gJ3RhcCcpKSB7XG4gICAgICBhcGx1c1RhcC5vbihlbGVtZW50LCBmbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uKGVsZW1lbnQsIGlzVG91Y2ggPyAndG91Y2hzdGFydCcgOiAnbW91c2Vkb3duJywgZm4pO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gZG9TY3JvbGxDaGVjayAoY2IpIHtcbiAgdHJ5IHtcbiAgICAvLyBJZiBJRSBpcyB1c2VkLCB1c2UgdGhlIHRyaWNrIGJ5IERpZWdvIFBlcmluaVxuICAgIC8vIGh0dHA6Ly9qYXZhc2NyaXB0Lm53Ym94LmNvbS9JRUNvbnRlbnRMb2FkZWQvXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKCdsZWZ0Jyk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBkb1Njcm9sbENoZWNrKGNiKTtcbiAgICB9LCAxKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gYW5kIGV4ZWN1dGUgYW55IHdhaXRpbmcgZnVuY3Rpb25zXG4gIGNiKCk7XG59O1xuXG4vLyB0aGFua3MgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvYmxvYi8xLjEyLjQvc3JjL2NvcmUvcmVhZHkuanNcbmZ1bmN0aW9uIERPTVJlYWR5IChjYWxsYmFjaykge1xuICB2YXIgaSA9IDA7XG4gIHZhciBjYiA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChpID09PSAwKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgICBpKys7XG4gIH07XG4gIC8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jKS5yZWFkeSgpIGlzIGNhbGxlZCBhZnRlciB0aGVcbiAgLy8gYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcbiAgICBjYigpO1xuICB9XG4gIHZhciBsb2FkZWQ7XG4gIC8vIE1vemlsbGEsIE9wZXJhIGFuZCB3ZWJraXQgbmlnaHRsaWVzIGN1cnJlbnRseSBzdXBwb3J0IHRoaXMgZXZlbnRcbiAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNiXG4gICAgbG9hZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbG9hZGVkLCBmYWxzZSk7XG4gICAgICBjYigpO1xuICAgIH07XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxvYWRlZCwgZmFsc2UpO1xuXG4gICAgLy8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNiLCBmYWxzZSk7XG5cbiAgICAvLyBJZiBJRSBldmVudCBtb2RlbCBpcyB1c2VkXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHtcbiAgICBsb2FkZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSBib2R5IGV4aXN0cywgYXQgbGVhc3QsIGluIGNhc2UgSUUgZ2V0cyBhIGxpdHRsZSBvdmVyemVhbG91cyAodGlja2V0ICM1NDQzKS5cbiAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgIGRvY3VtZW50LmRldGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBsb2FkZWQpO1xuICAgICAgICBjYigpO1xuICAgICAgfVxuICAgIH07XG4gICAgLy8gZW5zdXJlIGZpcmluZyBiZWZvcmUgb25sb2FkLFxuICAgIC8vIG1heWJlIGxhdGUgYnV0IHNhZmUgYWxzbyBmb3IgaWZyYW1lc1xuICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBsb2FkZWQpO1xuXG4gICAgLy8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcbiAgICB3aW5kb3cuYXR0YWNoRXZlbnQoJ29ubG9hZCcsIGNiKTtcblxuICAgIC8vIElmIElFIGFuZCBub3QgYSBmcmFtZVxuICAgIC8vIGNvbnRpbnVhbGx5IGNoZWNrIHRvIHNlZSBpZiB0aGUgZG9jIGlzIHJlYWR5XG4gICAgdmFyIHRvcGxldmVsID0gZmFsc2U7XG5cbiAgICB0cnkge1xuICAgICAgdG9wbGV2ZWwgPSB3aW5kb3cuZnJhbWVFbGVtZW50ID09PSBudWxsO1xuICAgIH0gY2F0Y2goZSkge31cblxuICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwgJiYgdG9wbGV2ZWwpIHtcbiAgICAgIGRvU2Nyb2xsQ2hlY2soY2IpO1xuICAgIH1cbiAgfVxufTtcbi8vIOebtOaOpeeUqOWOn+eUn+eahERPTXJlYWR577yM5LiN5Y675L6d6LWW5aSW6YOo55qEanF1ZXJ577yMa2lzc3kgQOiwi+WjqyBpbiAyMDE2LTEyLTI3XG5leHBvcnRzLkRPTVJlYWR5ID0gRE9NUmVhZHk7XG5cbmZ1bmN0aW9uIG9ubG9hZCAoY2FsbGJhY2spIHtcbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICBjYWxsYmFjaygpO1xuICB9IGVsc2Uge1xuICAgIG9uKHdpbmRvdywgJ2xvYWQnLCBjYWxsYmFjayk7XG4gIH1cbn07XG5leHBvcnRzLm9ubG9hZCA9IG9ubG9hZDtcblxuZnVuY3Rpb24gaGlzdG9yeVdyYXAodHlwZSkge1xuICB2YXIgb3JpID0gaGlzdG9yeVt0eXBlXTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBlO1xuICAgIHRyeSB7XG4gICAgICBlID0gbmV3IEV2ZW50KHR5cGUpO1xuICAgICAgZS5hcmd1bWVudHMgPSBhcmd1bWVudHM7XG4gICAgfSBjYXRjaChlcnIpeyAgICAgIFxuICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfVxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIC8v5rOo5oSP5LqL5Lu255uR5ZCs5ZyodXJs5Y+Y5pu05pa55rOV6LCD55So5LmL5YmNIOS5n+WwseaYr+WcqOS6i+S7tuebkeWQrOeahOWbnuiwg+WHveaVsOS4reiOt+WPlueahOmhtemdoumTvuaOpeS4uui3s+i9rOWJjeeahOmTvuaOpVxuICAgIHZhciBydyA9IG9yaS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiBydzsgXG4gIH07XG59XG5cbi8qKlxuICog57uR5a6a5LqL5Lu2XG4gKiBAcGFyYW0gb2JqIHtXaW5kb3d8RWxlbWVudH0gRE9NIOWFg+e0oFxuICogQHBhcmFtIGV2ZW50X3R5cGVcbiAqIEBwYXJhbSBmXG4gKi9cbmZ1bmN0aW9uIG9uKCkge1xuICB2YXIgd2luID0gd2luZG93O1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgaWYgKGFyZ3NbMF0gPT09ICdET01SZWFkeScpIHtcbiAgICAgIERPTVJlYWR5KGFyZ3NbMV0pO1xuICAgIH1cbiAgICBpZiAoYXJnc1swXSA9PT0gJ29ubG9hZCcpIHtcbiAgICAgIG9ubG9hZChhcmdzWzFdKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDMpIHtcbiAgICB2YXIgb2JqID0gYXJnc1swXTtcbiAgICB2YXIgZXZlbnRfdHlwZSA9IGFyZ3NbMV07XG4gICAgdmFyIGYgPSBhcmdzWzJdO1xuICAgIGlmIChldmVudF90eXBlID09PSAndGFwJyB8fCBldmVudF90eXBlID09PSAndGFwU3BtJykge1xuICAgICAgdGFwRXZlbnRCaW5kKG9iaiwgZiwgZXZlbnRfdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOW9k+WJjea1j+iniOWZqOaYr+WQpuS4uiBJRe+8iOaYr+WQpuaUr+aMgSBkb2N1bWVudC5hdHRhY2hFdmVudO+8iSAgICAgIFxuICAgICAgaWYgKFtcInB1c2hTdGF0ZVwiLCBcInJlcGxhY2VTdGF0ZVwiXS5pbmRleE9mKGV2ZW50X3R5cGUpID4gLTEpIHtcbiAgICAgICAgaGlzdG9yeVtldmVudF90eXBlXSA9IGhpc3RvcnlXcmFwKGV2ZW50X3R5cGUpO1xuICAgICAgfVxuICAgICAgdmFyIG9uZXZlbnQgPSAhIWRvY3VtZW50LmF0dGFjaEV2ZW50ID8gJ2F0dGFjaEV2ZW50JyA6ICdhZGRFdmVudExpc3RlbmVyJztcbiAgICAgIHZhciBhdHRhID0gISFkb2N1bWVudC5hdHRhY2hFdmVudDtcbiAgICAgIG9ialtvbmV2ZW50XShcbiAgICAgICAgKGF0dGEgPyAnb24nIDogJycpICsgZXZlbnRfdHlwZSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlID0gZSB8fCB3aW4uZXZlbnQ7XG4gICAgICAgICAgdmFyIGVsID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgICAgICAgIGlmICh0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgZihlLCBlbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwYXNzaXZlU3VwcG9ydGVkKGV2ZW50X3R5cGUpID8geyBwYXNzaXZlOiB0cnVlIH0gOiBmYWxzZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn07XG5leHBvcnRzLm9uID0gb247XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog6YCa6L+H6KKr5Yqo5LqL5Lu25L6m5ZCs5Zmo5o+Q5Y2H5rua5Yqo5oCn6IO9XG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE2LzA2L3Bhc3NpdmUtZXZlbnQtbGlzdGVuZXJzP2hsPXpoLWNuXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdG9vbHMvbGlnaHRob3VzZS9hdWRpdHMvcGFzc2l2ZS1ldmVudC1saXN0ZW5lcnM/aGw9emgtY25cbiAqL1xudmFyIHN1cHBvcnRlZDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGV2ZW50X3R5cGUpIHtcbiAgaWYgKHR5cGVvZiBzdXBwb3J0ZWQgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBzdXBwb3J0ZWQ7XG4gIH0gZWxzZSB7XG4gICAgLy8g5LuFdG91Y2jjgIFtb3VzZeOAgXNjcm9sbOOAgXdoZWVs55u45YWz55qE5LqL5Lu26ZyA6KaB5bCd6K+V5byA5ZCvJ3Bhc3NpdmUnXG4gICAgaWYgKCEvdG91Y2h8bW91c2V8c2Nyb2xsfHdoZWVsL2kudGVzdChldmVudF90eXBlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRpb25zKTtcbiAgICB9IGNhdGNoKGVycikge31cbiAgICByZXR1cm4gc3VwcG9ydGVkO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvcGFzc2l2ZVN1cHBvcnRlZC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiB0YXBcbiAqIHRoYW5rcyBA6JmO54mZXG4gKiBodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS9hbGlsb2cvYXBsdXNfcGx1Z2luX2FsaXRyaXAvdHJlZS9tYXN0ZXIvc3JjL2xpYl90YXBcbiAqIEF1dGhvcnM6XG4gKiAgIOiZjueJmSA8aHV5YS5uemJAYWxpYmFiYS1pbmMuY29tPlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuLy8gdmFyIGRvYyA9IHdpbmRvdy5kb2N1bWVudDtcbi8vIHZhciBkb2NFbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG52YXIgZ2VzdHVyZXMgPSB7fTtcbnZhciBUT1VDSF9TVEFSVCA9ICd0b3VjaHN0YXJ0JztcbnZhciBUT1VDSF9FTkQgPSAndG91Y2hlbmQnO1xudmFyIFRPVVJDSF9NT1ZFID0gJ3RvdWNobW92ZSc7XG52YXIgVEFQUElORyA9ICd0YXBwaW5nJztcbnZhciBUT1VDSF9DQU5DRUwgPSAndG91Y2hjYW5jZWwnO1xuXG5mdW5jdGlvbiBnZXRSYW5kb20obWluLCBtYXgpIHtcbiAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG59O1xudmFyIEFQTFVTX1RBUCA9ICdhcGx1c190YXAnICsgZ2V0UmFuZG9tKDEsIDEwMDAwMCk7XG5cbmZ1bmN0aW9uIGZpcmVFdmVudChlbGVtZW50LCB0eXBlLCBleHRyYSkge1xuICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICBldmVudC5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgaWYgKHR5cGVvZiBleHRyYSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKHZhciBwIGluIGV4dHJhKSB7XG4gICAgICBldmVudFtwXSA9IGV4dHJhW3BdO1xuICAgIH1cbiAgfVxuXG4gIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cbmZ1bmN0aW9uIHRvdWNoc3RhcnRIYW5kbGVyKGV2ZW50KSB7XG4gIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKE9iamVjdC5rZXlzKGdlc3R1cmVzKS5sZW5ndGggPT09IDApIHtcbiAgICBkb2NFbC5hZGRFdmVudExpc3RlbmVyKFRPVVJDSF9NT1ZFLCB0b3VjaG1vdmVIYW5kbGVyLCBmYWxzZSk7XG4gICAgZG9jRWwuYWRkRXZlbnRMaXN0ZW5lcihUT1VDSF9FTkQsIHRvdWNoZW5kSGFuZGxlciwgZmFsc2UpO1xuICAgIGRvY0VsLmFkZEV2ZW50TGlzdGVuZXIoVE9VQ0hfQ0FOQ0VMLCB0b3VjaGVuZEhhbmRsZXIsIGZhbHNlKTtcbiAgfVxuXG4gIC8vIHJlY29yZCBldmVyeSB0b3VjaFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XG4gICAgdmFyIHRvdWNoUmVjb3JkID0ge307XG5cbiAgICBmb3IgKHZhciBwIGluIHRvdWNoKSB7XG4gICAgICB0b3VjaFJlY29yZFtwXSA9IHRvdWNoW3BdO1xuICAgIH1cblxuICAgIHZhciBnZXN0dXJlID0ge1xuICAgICAgc3RhcnRUb3VjaDogdG91Y2hSZWNvcmQsXG4gICAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG4gICAgICBzdGF0dXM6IFRBUFBJTkcsXG4gICAgICBlbGVtZW50OiBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50LnRhcmdldFxuICAgIH07XG4gICAgZ2VzdHVyZXNbdG91Y2guaWRlbnRpZmllcl0gPSBnZXN0dXJlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRvdWNobW92ZUhhbmRsZXIoZXZlbnQpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xuICAgIHZhciBnZXN0dXJlID0gZ2VzdHVyZXNbdG91Y2guaWRlbnRpZmllcl07XG5cbiAgICBpZiAoIWdlc3R1cmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGlzcGxhY2VtZW50WCA9IHRvdWNoLmNsaWVudFggLSBnZXN0dXJlLnN0YXJ0VG91Y2guY2xpZW50WDtcbiAgICB2YXIgZGlzcGxhY2VtZW50WSA9IHRvdWNoLmNsaWVudFkgLSBnZXN0dXJlLnN0YXJ0VG91Y2guY2xpZW50WTtcbiAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3coZGlzcGxhY2VtZW50WCwgMikgKyBNYXRoLnBvdyhkaXNwbGFjZW1lbnRZLCAyKSk7XG5cbiAgICAvLyBtYWdpYyBudW1iZXIgMTA6IG1vdmluZyAxMHB4IG1lYW5zIHBhbiwgbm90IHRhcFxuICAgIGlmICgoZ2VzdHVyZS5zdGF0dXMgPT09IFRBUFBJTkcgfHwgZ2VzdHVyZS5zdGF0dXMgPT09ICdwcmVzc2luZycpICYmIGRpc3RhbmNlID4gMTApIHtcbiAgICAgIGdlc3R1cmUuc3RhdHVzID0gJ3Bhbm5pbmcnO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB0b3VjaGVuZEhhbmRsZXIoZXZlbnQpIHtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XG4gICAgdmFyIGlkID0gdG91Y2guaWRlbnRpZmllcjtcbiAgICB2YXIgZ2VzdHVyZSA9IGdlc3R1cmVzW2lkXTtcblxuICAgIGlmICghZ2VzdHVyZSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGdlc3R1cmUuc3RhdHVzID09PSBUQVBQSU5HICYmIGV2ZW50LnR5cGUgPT09IFRPVUNIX0VORCkge1xuICAgICAgZ2VzdHVyZS50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgLy8gZmlyZSBjbGljaywgbm90IHRhcC5cbiAgICAgIGZpcmVFdmVudChnZXN0dXJlLmVsZW1lbnQsIEFQTFVTX1RBUCwge1xuICAgICAgICB0b3VjaDogdG91Y2gsXG4gICAgICAgIHRvdWNoRXZlbnQ6IGV2ZW50XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWxldGUgZ2VzdHVyZXNbaWRdO1xuICB9XG5cbiAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICBpZiAoT2JqZWN0LmtleXMoZ2VzdHVyZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgIGRvY0VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoVE9VUkNIX01PVkUsIHRvdWNobW92ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICBkb2NFbC5yZW1vdmVFdmVudExpc3RlbmVyKFRPVUNIX0VORCwgdG91Y2hlbmRIYW5kbGVyLCBmYWxzZSk7XG4gICAgZG9jRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihUT1VDSF9DQU5DRUwsIHRvdWNoZW5kSGFuZGxlciwgZmFsc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpeElPU1RvdWNoQnVnKGVsZW1lbnQpIHtcbiAgaWYgKCFlbGVtZW50Ll9fZml4VG91Y2hFdmVudCkge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihUT1VDSF9TVEFSVCwgZnVuY3Rpb24gKCkge1xuICAgIH0sIGZhbHNlKTtcbiAgICBlbGVtZW50Ll9fZml4VG91Y2hFdmVudCA9IHRydWU7XG4gIH1cbn1cbmZ1bmN0aW9uIGluaXQgKCkge1xuICBpZiAoIWlzSW5pdGlhbGl6ZWQpIHtcbiAgICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgZG9jRWwuYWRkRXZlbnRMaXN0ZW5lcihUT1VDSF9TVEFSVCwgdG91Y2hzdGFydEhhbmRsZXIsIGZhbHNlKTtcbiAgICBpc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgb246IGZ1bmN0aW9uKGVsZW1lbnQsIGNhbGxiYWNrKSB7XG4gICAgaW5pdCgpO1xuICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiBjYWxsYmFjaykge1xuICAgICAgZml4SU9TVG91Y2hCdWcoZWxlbWVudCk7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoQVBMVVNfVEFQLCAoY2FsbGJhY2suX2FwbHVzX3RhcF9jYWxsYmFjayA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY2FsbGJhY2soZSwgZS50YXJnZXQpO1xuICAgICAgfSksIGZhbHNlKTtcbiAgICB9XG4gIH0sXG4gIHVuOiBmdW5jdGlvbihlbGVtZW50LCBjYWxsYmFjaykge1xuICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiBjYWxsYmFjayAmJiBjYWxsYmFjay5fYXBsdXNfdGFwX2NhbGxiYWNrKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoQVBMVVNfVEFQLCBjYWxsYmFjay5fYXBsdXNfdGFwX2NhbGxiYWNrLCBmYWxzZSk7XG4gICAgfVxuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvYXBsdXNUYXAuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog562J5b6FYm9keSByZWFkeVxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG4gICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG4gICAgICogfVxuICAgICAqL1xuICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgLy8gfSxcblxuICAgIHJ1bjogZnVuY3Rpb24gKHN0YXRlLCBjYikge1xuICAgICAgdmFyIGhhbmRsZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKS5sZW5ndGgpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKGhhbmRsZXIpO1xuICAgICAgICAgIGhhbmRsZXIgPSBudWxsO1xuICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDUwKTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDApO1xuICAgICAgcmV0dXJuIDEwMDA7XG4gICAgfSxcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9hcGx1c19ib2R5X3JlYWR5LmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciBQdWJTdWJXZWIgPSByZXF1aXJlKCdAY29yZS9QdWJTdWJXZWInKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICAvLyDkv53or4Hlj6rkvJrmnInkuIDkuKpwdWJzdWLov5DooYxcbiAgICAgIGlmIChhcGx1cy5hcGx1c19wdWJzdWIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gYXBsdXMuYXBsdXNfcHVic3Vi5piv5LiA5Liq55uR5ZCs6ICF77yM5Zyo5o+S5Lu25YyW5YaF6YOo5Lya55So5Yiw5LuW77yM5pyJ5pWw5o2u5Y+Y5YyW5bCG5Lya5Y+R5bCE55u45bqU55qEZGF0YWNoYW5nZeS6i+S7tlxuICAgICAgYXBsdXMuYXBsdXNfcHVic3ViID0gUHViU3ViV2ViLmNyZWF0ZSgpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tZXNzYWdlci9wdWJzdWJfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgUHViU3ViID0gcmVxdWlyZSgnQGNvcmUvUHViU3ViJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHViU3ViLmV4dGVuZCh7XG4gIC8qKlxuICAgKiDorqLpmIXliLDkuIDmrKHlm57osIPlkI7lj5bmtojorqLpmIVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuICAgKiBAcmV0dXJuIGNvbnRleHRcbiAgICovXG4gIHN1YnNjcmliZU9uY2U6IGZ1bmN0aW9uKGVUeXBlLCBoKSB7XG4gICAgLy8g5a+55Zue6LCD5Ye95pWw6L+b6KGM5pat6KiAXG4gICAgdGhpcy5jYWxsYWJsZShoKTtcblxuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdmFyIG9uY2U7XG4gICAgdGhpcy5zdWJzY3JpYmUuY2FsbCh0aGlzLCBlVHlwZSwgb25jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgX3NlbGYudW5zdWJzY3JpYmUuY2FsbChfc2VsZiwgZVR5cGUsIG9uY2UpO1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgaC5hcHBseShfc2VsZiwgYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9QdWJTdWJXZWIuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG4gKiDmtojmga/orqLpmIXmqKHlnotcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcblxudmFyIGdldEFyZ3MgPSBmdW5jdGlvbihhcmdzKSB7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIF9hcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICBmb3IgKHZhciBqID0gMTsgaiA8IGxlbjsgaisrKSB7XG4gICAgX2FyZ3NbaiAtIDFdID0gYXJnc1tqXTtcbiAgfVxuICByZXR1cm4gX2FyZ3M7XG59O1xuXG52YXIgUHViU3ViID0gQmFzZS5leHRlbmQoe1xuICAvKipcbiAgICog5a+5Zm7ov5vooYzmlq3oqIDvvIzkuI3mmK/igJhmdW5jdGlvbuKAmeexu+Wei+aKpemUme+8jOWQpuWImei/lOWbnmZuXG4gICAqL1xuICBjYWxsYWJsZTogZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGZuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICByZXR1cm4gZm47XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBuZXcgdGhpcygpO1xuICAgIC8vIOe7keWumuivpeWunuS+i+eahOWxnuaAp1xuICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICAgIGluc3RhbmNlW25hbWVdID0gcHJvcHNbbmFtZV07XG4gICAgfVxuXG4gICAgaW5zdGFuY2UuaGFuZGxlcnMgPSBbXTtcbiAgICBpbnN0YW5jZS5wdWJzID0ge307XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9LFxuXG4gIHNldEhhbmRsZXJzOiBmdW5jdGlvbihoYW5kbGVycykge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVycztcbiAgfSxcblxuICAvKipcbiAgICog6K6i6ZiF5Y+l5p+E5Li64oCcZVR5cGXigJ3nmoTmtojmga/vvIzlvZPmnInmtojmga/ov4fmnaXmiafooYzlm57osIPlh73mlbDvvJrigJxo4oCdXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4RcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcbiAgICogQHJldHVybiBjb250ZXh0XG4gICAqL1xuICBzdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKXtcbiAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcbiAgICB0aGlzLmNhbGxhYmxlKGgpO1xuXG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgcHVicyA9IF9zZWxmLnB1YnMgfHwge307XG4gICAgdmFyIGhhbmRsZXJzID0gX3NlbGYuaGFuZGxlcnMgfHwgW107XG4gICAgaWYoIShlVHlwZSBpbiBoYW5kbGVycykpIHtcbiAgICAgIGhhbmRsZXJzW2VUeXBlXSA9IFtdO1xuICAgIH1cbiAgICBoYW5kbGVyc1tlVHlwZV0ucHVzaChoKTtcbiAgICBfc2VsZi5zZXRIYW5kbGVycyhoYW5kbGVycyk7XG4gICAgdmFyIGFyciA9IHB1YnNbZVR5cGVdIHx8IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgX2FyZ3MgPSBhcnJbaV0oKTtcbiAgICAgIGguYXBwbHkoX3NlbGYsIF9hcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIF9zZWxmO1xuICB9LFxuXG4gIC8qKlxuICAgKiDlj5bmtojorqLpmIXvvIzlsIbkvJrlj5bmtojigJxlVHlwZeKAneWPpeafhOWvueW6lOeahOKAnGjigJ3lm57osIPlh73mlbDkuIvnmoTmiYDmnInorqLpmIVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuICAgKiBAcmV0dXJuIGNvbnRleHRcbiAgICovXG4gIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihlVHlwZSwgaCkge1xuICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cbiAgICB0cnkge1xuICAgICAgdmFyIHMgPSB0aGlzLmhhbmRsZXJzW2VUeXBlXTtcbiAgICAgIGlmICghcykgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGggPT09IHNbaV0pIHtcbiAgICAgICAgICAgIHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiDliY3pnaLmtojmga/orqLpmIXmnKrlgZrpkojlr7nlkIzkuIDkuKrmtojmga/lkIzkuIDkuKrmtojmga/lm57osIPnmoTmg4XlhrXlgZrlpITnkIbvvIzov5nph4zms6jplIDorqLpmIXml7bkuI7lhbbkv53mjIHkuIDoh7TvvIzkuI3lgZrorqLpmIUt5Y+W5raI6K6i6ZiF5LiA5LiA5a+55bqU77yM5ZCO57ut5pyJ6ZyA5rGC5YaN5aSE55CGXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC8vIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZXJzW2VUeXBlXSA9IHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc1tlVHlwZV07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICAvKipcbiAgICog5raI5oGv5YiG5Y+R77yM5bCG5Lya5YiG5Y+R5Yiw5omA5pyJ6K6i6ZiFZVR5cGXlj6Xmn4TnmoTorqLpmIXogIVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOWIhuWPkea2iOaBr+WPpeafhFxuICAgKi9cbiAgcHVibGlzaDogZnVuY3Rpb24gKGVUeXBlKSB7XG5cbiAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcbiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzIHx8IFtdO1xuXG4gICAgdmFyIHNpemUgPSBoYW5kbGVyc1tlVHlwZV0gPyBoYW5kbGVyc1tlVHlwZV0ubGVuZ3RoIDogMDtcbiAgICBpZiAoc2l6ZSA+IDApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgIHZhciBmbiA9IGhhbmRsZXJzW2VUeXBlXVtpXTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICBjYWNoZVB1YnM6IGZ1bmN0aW9uIChlVHlwZSkge1xuICAgIHZhciBwdWJzID0gdGhpcy5wdWJzIHx8IHt9O1xuICAgIHZhciBhcmdzID0gZ2V0QXJncyhhcmd1bWVudHMpO1xuICAgIGlmICghcHVic1tlVHlwZV0pIHtcbiAgICAgIHB1YnNbZVR5cGVdID0gW107XG4gICAgfVxuICAgIHB1YnNbZVR5cGVdLnB1c2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFB1YlN1YjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSAnZnVuY3Rpb24nO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc0Z1bmN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL0Jhc2UuanNcbiAqIOWfuuexu++8jOaPkOS+m+exu+aJgOmcgOimgeeahOWfuuehgOWxnuaAp1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcblxuLy8g5Z+657G7XG5mdW5jdGlvbiBCYXNlKCkge31cblxuLy8g5bCGZXh0ZW5k5ZKMY3JlYXRl572u5LqOcHJvdG90eXBl5a+56LGh5Lit77yM5Lul5L6/5a2Q57G757un5om/XG5CYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbigpIHt9O1xuQmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oKSB7fTtcblxuLy8g5Li65LqG6IO95Zyo5Z+657G75LiK55u05o6l5LulLmV4dGVuZOeahOaWueW8j+i/m+ihjOiwg+eUqFxuQmFzZS5leHRlbmQgPSBmdW5jdGlvbihwcm9wcykge1xuICByZXR1cm4gdGhpcy5wcm90b3R5cGUuZXh0ZW5kLmNhbGwodGhpcywgcHJvcHMpO1xufTtcblxuQmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgLyoqXG4gICAqIGNyZWF0ZeWunumZheS4iuaYr+WvuW5ld+eahOWwgeijhe+8m1xuICAgKiBjcmVhdGXov5Tlm57nmoTlrp7kvovlrp7pmYXkuIrlsLHmmK9uZXfmnoTpgKDlh7rnmoTlrp7kvovvvJtcbiAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuICAgKi9cbiAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMoKTtcbiAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG4gIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICBpbnN0YW5jZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuICB9XG4gIHJldHVybiBpbnN0YW5jZTtcbn07XG5cbkJhc2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIC8vIOa0vueUn+WHuuadpeeahOaWsOeahOWtkOexu1xuICB2YXIgU3ViQmFzZSA9IGZ1bmN0aW9uKCkge307XG4gIHRyeSB7XG4gICAgLyoqXG4gICAgICog57un5om/54i257G755qE5bGe5oCn5ZKM5pa55rOV77yMXG4gICAgICog5b2T54S25YmN5o+Q5piv54i257G755qE5bGe5oCn6YO95pS+5ZyocHJvdG90eXBl5LitXG4gICAgICog6ICM6Z2e5LiK6Z2iY3JlYXRl5pa55rOV55qE4oCc5a6e5L6L5bGe5oCn4oCd5LitXG4gICAgICovXG4gICAgaWYgKCFpc0Z1bmN0aW9uKE9iamVjdC5jcmVhdGUpKSB7XG4gICAgICBPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgZnVuY3Rpb24gRigpIHt9XG4gICAgICAgIEYucHJvdG90eXBlID0gbztcbiAgICAgICAgcmV0dXJuIG5ldyBGKCk7XG4gICAgICB9O1xuICAgIH1cbiAgICBTdWJCYXNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodGhpcy5wcm90b3R5cGUpO1xuXG4gICAgLy8g5bm25LiU5re75Yqg6Ieq5bex55qE5pa55rOV5ZKM5bGe5oCnXG4gICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuICAgICAgU3ViQmFzZS5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgICB9XG4gICAgU3ViQmFzZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWJCYXNlO1xuXG4gICAgLy8g6ZyA6KaB5LulLmV4dGVuZOeahOaWueW8j+WSjC5jcmVhdGXnmoTmlrnlvI/osIPnlKjvvJpcbiAgICBTdWJCYXNlLmV4dGVuZCA9IFN1YkJhc2UucHJvdG90eXBlLmV4dGVuZDtcbiAgICBTdWJCYXNlLmNyZWF0ZSA9IFN1YkJhc2UucHJvdG90eXBlLmNyZWF0ZTtcbiAgfSBjYXRjaChlcnIpIHtcbiAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKGVycik7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIFN1YkJhc2U7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQmFzZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvQmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOWuouaIt+err+S+pua1i+iEmuacrFxuICogIEByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9raXNzeXRlYW0va2lzc3kvYmxvYi8xLjQueC9zcmMvc2VlZC9zcmMvdWEuanNcbiAqICAgICAgICBodHRwczovL2dpdGh1Yi5jb20veXV5dTE5MTEvTWFnbmV0by9ibG9iL21hc3Rlci9zcmMvcGx1Z2lucy9jbGllbnQvdWEuanNcbiAqICAgICAgICBodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS90Yi9hcC9ibG9iL21hc3Rlci9idWlsZC8xLjAvcG9jL20vb3MuanNcbiAqICAgICAgICBodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS90Yi9hcC9ibG9iL21hc3Rlci9idWlsZC8xLjAvbS9tL3VhLmpzXG4gKiAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkY29tZS9qcXVlcnkudWEvYmxvYi9tYXN0ZXIvanF1ZXJ5LnVhLmpzXG4gKlxuICog5pSv5oyB55qE5Zu95Lqn5rWP6KeI5Zmo77yaXG4gKiAzNjBzZSAgICAgICAg5p6B6YCf5qih5byPXG4gKiAzNjBlZSAgICAgICAg5p6B6YCf5qih5byPXG4gKiDnjI7osbkgICAgICAgICAg5Y+M5qih5byPXG4gKiBRUSAgICAgICAgICAg5Y+M5qih5byPXG4gKiDlgrLmuLhcbiAqIOa3mOWunSAgICAgICAgICDmnoHpgJ/mqKHlvI9cbiAqXG4gKiAqIOebruWJjTM2MGVl55qE5rWL6K+V5piv5ryP6bG85rOV77yM5aaC5p6c5YW25LuW5Yy56YWN5LiN5LiK5bCx5piv5a6D77yM5Zug5q2k5Lya6K+v5YikXG4gKlxuICog546w5Zyo6L+Y5LiN6IO95qOA5rWL55qE5rWP6KeI5Zmo77yaXG4gKiAzNjBzZSAgICAgICAgICAgIOWFvOWuueaooeW8j1xuICogMzYwZWUgICAgICAgICAgICDlhbzlrrnmqKHlvI9cbiAqIOa3mOWunea1j+iniOWZqCAgICAgICAgIOWFvOWuueaooeW8j1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBnb25naGFvLmdoXG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuICAgICAgYXBsdXMuX2FwbHVzX2NsaWVudCA9IHJlcXVpcmUoJy4vbGliX2NsaWVudC9tYWluJykoKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5a6i5oi356uv5L6m5rWL6ISa5pysXG4gKiAgQHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2tpc3N5dGVhbS9raXNzeS9ibG9iLzEuNC54L3NyYy9zZWVkL3NyYy91YS5qc1xuICogICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS95dXl1MTkxMS9NYWduZXRvL2Jsb2IvbWFzdGVyL3NyYy9wbHVnaW5zL2NsaWVudC91YS5qc1xuICogICAgICAgIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL3RiL2FwL2Jsb2IvbWFzdGVyL2J1aWxkLzEuMC9wb2MvbS9vcy5qc1xuICogICAgICAgIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL3RiL2FwL2Jsb2IvbWFzdGVyL2J1aWxkLzEuMC9tL20vdWEuanNcbiAqICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vY2xvdWRjb21lL2pxdWVyeS51YS9ibG9iL21hc3Rlci9qcXVlcnkudWEuanNcbiAqXG4gKiDmlK/mjIHnmoTlm73kuqfmtY/op4jlmajvvJpcbiAqIDM2MHNlICAgICAgICDmnoHpgJ/mqKHlvI9cbiAqIDM2MGVlICAgICAgICDmnoHpgJ/mqKHlvI9cbiAqIOeMjuixuSAgICAgICAgICDlj4zmqKHlvI9cbiAqIFFRICAgICAgICAgICDlj4zmqKHlvI9cbiAqIOWCsua4uFxuICog5reY5a6dICAgICAgICAgIOaegemAn+aooeW8j1xuICpcbiAqICog55uu5YmNMzYwZWXnmoTmtYvor5XmmK/mvI/psbzms5XvvIzlpoLmnpzlhbbku5bljLnphY3kuI3kuIrlsLHmmK/lroPvvIzlm6DmraTkvJror6/liKRcbiAqXG4gKiDnjrDlnKjov5jkuI3og73mo4DmtYvnmoTmtY/op4jlmajvvJpcbiAqIDM2MHNlICAgICAgICAgICAg5YW85a655qih5byPXG4gKiAzNjBlZSAgICAgICAgICAgIOWFvOWuueaooeW8j1xuICog5reY5a6d5rWP6KeI5ZmoICAgICAgICAg5YW85a655qih5byPXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIGdvbmdoYW8uZ2hcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRPbGRGYXNoaW9uT3NJbmZvKHVhKSB7XG4gIHZhciB0b2tlbiA9IFtcbiAgICBbJ1dpbmRvd3MgTlQgNS4xJywgJ3dpblhQJ10sXG4gICAgWydXaW5kb3dzIE5UIDYuMScsICd3aW43J10sXG4gICAgWydXaW5kb3dzIE5UIDYuMCcsICd3aW5WaXN0YSddLFxuICAgIFsnV2luZG93cyBOVCA2LjInLCAnd2luOCddLFxuICAgIFsnV2luZG93cyBOVCA2LjMnLCAnd2luOC4xJ10sXG4gICAgWydXaW5kb3dzIE5UIDEwLjAnLCAnd2luMTAnXSxcbiAgICBbJ1VidW50dScsICd1YnVudHUnXSxcbiAgICBbJ0xpbnV4JywgJ2xpbnV4J10sXG4gICAgWydXaW5kb3dzIE5UIDUuMicsICd3aW4yMDAzJ10sXG4gICAgWydXaW5kb3dzIE5UIDUuMCcsICd3aW4yMDAwJ10sXG4gICAgWydXaW5kb3dzJywgJ3dpbk90aGVyJ10sXG4gICAgWydyaGlubycsICdyaGlubyddXG4gIF07XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b2tlbi5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIHZhciB0b2tlbjAgPSB0b2tlbltpXVswXTtcbiAgICBpZiAodWEuaW5kZXhPZih0b2tlbjApICE9PSAtMSkge1xuICAgICAgdmFyIG9zID0gdG9rZW4wLnNwbGl0KCcgJylbMF07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZXZpY2VfbW9kZWw6IG9zLFxuICAgICAgICBvczogb3MsXG4gICAgICAgIG9zX3ZlcnNpb246IHRva2VuW2ldWzFdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICB2YXIgT1RIRVIgPSAnb3RoZXInO1xuICByZXR1cm4ge1xuICAgIGRldmljZV9tb2RlbDogT1RIRVIsXG4gICAgb3M6IE9USEVSLFxuICAgIG9zX3ZlcnNpb246IE9USEVSXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldE1vZGVybk9TSW5mbyAodWEsIGRldmljZV9tb2RlbCkge1xuICAvKipcbiAgICogaVBhZDsgQ1BVIE9TIDExXzAgbGlrZSBNYWMgT1MgWFxuICAgKiBpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTFfMCBsaWtlIE1hYyBPUyBYXG4gICAqIE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTRfNFxuICAgKiBMaW51eDsgQW5kcm9pZCA1LjA7IFNNLUc5MDBQIEJ1aWxkL0xSWDIxVFxuICAgKi9cbiAgdmFyIG9zSW5mbyA9IHVhLnN1YnN0cmluZyh1YS5pbmRleE9mKCcoJykgKyAxLCB1YS5pbmRleE9mKCcpJykpO1xuICB2YXIgcnMgPSB7XG4gICAgZGV2aWNlX21vZGVsOiBkZXZpY2VfbW9kZWwsXG4gIH07XG4gIHZhciBkID0gZGV2aWNlX21vZGVsLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAoZCkge1xuICBjYXNlICdpcGFkJzpcbiAgY2FzZSAnaXBob25lJzpcbiAgY2FzZSAnaXBvZCc6XG4gIGNhc2UgJ21hY2ludG9zaCc6XG4gICAgaWYgKGQgPT09ICdtYWNpbnRvc2gnKSB7XG4gICAgICBpZiAoL01hYyBPUyBYLy50ZXN0KG9zSW5mbykpIHtcbiAgICAgICAgcnMub3MgPSAnTWFjIE9TIFgnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnMub3MgPSAnTWFjIE9TJztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcnMub3MgPSAnSU9TJztcbiAgICB9XG4gICAgcnMub3NfdmVyc2lvbiA9IG9zSW5mby5tYXRjaCgvWzAtOV8uXSsvKVswXTtcbiAgICBicmVhaztcbiAgY2FzZSAnYW5kcm9pZCc6XG4gICAgcnMub3MgPSAnQW5kcm9pZCc7XG4gICAgcnMub3NfdmVyc2lvbiA9IG9zSW5mby5tYXRjaCgvWzAtOS5dKy8pWzBdO1xuICAgIGJyZWFrO1xuICBkZWZhdWx0OlxuICAgIGJyZWFrO1xuICB9XG4gIHJzLm9zX3ZlcnNpb24gPSBycy5vc192ZXJzaW9uLnJlcGxhY2UoL18vZywgJy4nKTtcbiAgcmV0dXJuIHJzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIFVBID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgdmFyIGluZm8gPSB7fTtcbiAgdmFyIG1vZGVybk9TID0gVUEubWF0Y2goL2lwaG9uZXxpcGFkfGFuZHJvaWR8bWFjaW50b3NoL2kpO1xuICB2YXIgRGFyd2luT1MgPSBVQS5tYXRjaCgvRGFyd2luL2kpO1xuICBpZiAobW9kZXJuT1MpIHtcbiAgICBpbmZvID0gZ2V0TW9kZXJuT1NJbmZvKFVBLCBtb2Rlcm5PU1swXSk7XG4gIH0gZWxzZSBpZiAoRGFyd2luT1MpIHtcbiAgICB2YXIgX29zID0gVUEuc3BsaXQoJyAnKVsyXTtcbiAgICBpbmZvID0ge1xuICAgICAgb3M6ICdEYXJ3aW4nLFxuICAgICAgb3NfdmVyc2lvbjogX29zLm1hdGNoKC9bMC05Ll0rLylbMF0sXG4gICAgICBkZXZpY2VfbW9kZWw6ICdEYXJ3aW4nXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpbmZvID0gZ2V0T2xkRmFzaGlvbk9zSW5mbyhVQSk7XG4gIH1cbiAgdmFyIHNjciA9IHNjcmVlbiB8fCB7fTtcbiAgaW5mby5zY3JlZW5XaWR0aCA9IHNjci53aWR0aDtcbiAgaW5mby5zY3JlZW5IZWlnaHQgPSBzY3IuaGVpZ2h0O1xuXG4gIGlmIChuYXZpZ2F0b3IpIHtcbiAgICBpbmZvLnVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgJy0nO1xuICAgIGluZm8ubGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZSB8fCAnLSc7XG4gIH1cbiAgcmV0dXJuIGluZm87XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfY2xpZW50L21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuICAgICAqICAgbG9nQ29uZmlnOiB7bG9nQ29uZmlnfVxuICAgICAqIH1cbiAgICAgKi9cbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcXVpcmUoJy4vbGliX21ldGEvbWFpbicpKHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfbWV0YV9pbmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcbiAqIG1ldGHphY3nva7mj5Lku7bvvIzooqthcGnmj5Lku7bkvp3otZZcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgYXNzaWduID0gcmVxdWlyZSgnQHV0aWxzL2Fzc2lnbicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG52YXIgdXRpbE5hdGl2ZTRBcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTmF0aXZlNEFwbHVzJyk7XG52YXIgdXRpbE5hbWVTdG9yYWdlID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxOYW1lU3RvcmFnZScpO1xudmFyIG1ldGFJbmZvID0gcmVxdWlyZSgnLi9tZXRhSW5mb0FsaScpO1xuXG5mdW5jdGlvbiBnZXRDZG5QYXRoICgpIHtcbiAgdmFyIGRvYyA9IGRvY3VtZW50O1xuICB2YXIgcGF0aCA9ICcvL2cuYWxpY2RuLmNvbSc7XG4gIGlmIChkb2MpIHtcbiAgICB2YXIgY3VycmVudF9ub2RlID0gZG9jLmdldEVsZW1lbnRCeUlkKCdiZWFjb24tYXBsdXMnKSB8fCBkb2MuZ2V0RWxlbWVudEJ5SWQoJ3RiLWJlYWNvbi1hcGx1cycpO1xuICAgIHZhciBwYXRoX290aGVycyA9IFsnLy9hc3NldHMuYWxpY2RuLmNvbS9nJywgJy8vZy1hc3NldHMuZGFpbHkudGFvYmFvLm5ldCcsICcvL2FsaWR0Lm9zcy1jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20nXTtcbiAgICBpZiAoY3VycmVudF9ub2RlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhfb3RoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKHBhdGhfb3RoZXJzW2ldKTtcbiAgICAgICAgaWYgKHJlZy50ZXN0KGN1cnJlbnRfbm9kZS5zcmMpKSB7XG4gICAgICAgICAgcGF0aCA9IHBhdGhfb3RoZXJzW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAgXG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5cbnZhciBjZG5QYXRoO1xuLy8g5piv5ZCm5Zu96ZmF546v5aKDXG5mdW5jdGlvbiBpc0ludGVybmF0aW9uYWwgKCkge1xuICBpZiAoIWNkblBhdGgpIHtcbiAgICBjZG5QYXRoID0gZ2V0Q2RuUGF0aCgpO1xuICB9XG4gIHZhciBpc0ludCA9IGNkblBhdGggPT09ICcvL2Fzc2V0cy5hbGljZG4uY29tL2cnIHx8IGNkblBhdGggPT09ICcvL2xhei1nLWNkbi5hbGljZG4uY29tJztcbiAgcmV0dXJuIGlzSW50IHx8IG1ldGFJbmZvLmdldE1ldGFJbmZvKCdhcGx1cy1lbnYnKSA9PT0gJ2ludCc7XG59XG5cbmZ1bmN0aW9uIGlzTW9iaWxlICgpIHtcbiAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50KSB7XG4gICAgdmFyIGlzUGhvbmUgPSAoL2lwaG9uZXxhbmRyb2lkL2kpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgdmFyIGlzTW9iaWxlID0gaXNQaG9uZSB8fCAoL1RCXFwtUEQvaSkudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICByZXR1cm4gaXNNb2JpbGU7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldFV0UGFyYW1Gcm9tVXJsICgpIHtcbiAgLy8gYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLXV0cGFyYW0nKTtcbiAgdmFyIHJzO1xuICB2YXIgdXRwYXJhbWNudCA9IHV0aWxVcmwuZ2V0UGFyYW1Gcm9tVXJsKCd1dHBhcmFtY250JywgbG9jYXRpb24uaHJlZik7XG4gIGlmICh1dHBhcmFtY250KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJzID0gdXRwYXJhbWNudCA9IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHV0cGFyYW1jbnQpKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiBycztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgTkFNRV9TVE9SQUdFX0tFWVMgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLk5BTUVfU1RPUkFHRV9LRVlTO1xuICB2YXIgcmVmZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFJlZmVycmVyJykuZ2V0UmVmZXIoTkFNRV9TVE9SQUdFX0tFWVMpO1xuICAvLyBhcGx1cy5sdmVyID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5sdmVyO1xuICBhcGx1cy5uYW1lU3RvcmFnZSA9IHV0aWxOYW1lU3RvcmFnZS5uYW1lU3RvcmFnZTsgLy8g5Y6G5Y+y5Y6f5Zug77yM5ZyoIGFwbHVzIOS4iuaatOmcsuWHuiBuYW1lU3RvcmFnZVxuICB1dGlsTmF0aXZlNEFwbHVzLmhhdmVOYXRpdmVGbGFnSW5VQSgpO1xuICB2YXIgXyQgPSAoYXBsdXMuXyQgPSBhcGx1cy5fJCB8fCB7fSk7IC8vIOWGhemDqOS9v+eUqOeahOWPmOmHj1xuICBfJC5pc190ZXJtaW5hbCA9IGlzTW9iaWxlKCk7XG4gIF8kLnNlbmRfcHZfY291bnQgPSAwO1xuICBfJC5wYWdlX3JlZmVycmVyID0gcmVmZXI7XG4gIF8kLnNwbSA9IHtcbiAgICBkYXRhOiB7fSxcbiAgICBwYWdlX3JlZmVycmVyOiByZWZlclxuICB9O1xuICBhcGx1cy5nbG9iYWxDb25maWcgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnO1xuICB2YXIgdXRwYXJhbWNudCA9IGdldFV0UGFyYW1Gcm9tVXJsKCk7XG5cbiAgXyQubWV0YV9pbmZvID0gbWV0YUluZm8ucUdldCgpIHx8IHt9O1xuICBmb3IgKHZhciBrIGluIGFwbHVzX2NvbmZpZy5tZXRhSW5mbykge1xuICAgIGlmICghXyQubWV0YV9pbmZvLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICB2YXIgbWV0YVZhbHVlID0gYXBsdXNfY29uZmlnLm1ldGFJbmZvW2tdO1xuICAgICAgaWYgKGsgPT09ICdhcGx1cy11dHBhcmFtJykge1xuICAgICAgICAvLyDov5nph4znlKjnlKjmiLflnKjpobXpnaLkuIrphY3nva7nmoRhcGx1cy11dHBhcmFt5Y67bWVyZ2UgdXRwYXJhbWNudFxuICAgICAgICB1dHBhcmFtY250ICYmIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKGssIHV0cGFyYW1jbnQpO1xuICAgICAgICBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbyhrLCBtZXRhVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWV0YUluZm8uc2V0TWV0YUluZm8oaywgbWV0YVZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG5cbiAgYXBsdXMuXyQgPSBfJDtcbiAgYXBsdXMuaXNJbnRlcm5hdGlvbmFsID0gaXNJbnRlcm5hdGlvbmFsO1xuICBhcGx1cy5nZXRDZG5QYXRoID0gZ2V0Q2RuUGF0aDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIC8qKlxuLy8gICog5LuOIHVybCDkuK3lj5blh7rlr7nlupTnmoQgc3BtIOWPguaVsFxuLy8gICogQHBhcmFtIHVybCB7U3RyaW5nfVxuLy8gICogQHJldHVybiB7U3RyaW5nfSBzcG0gYS5iLmMuZC5wdmlk77yM5LiA5YWx5LqU5L2NXG4vLyAgKi9cbi8vIGZ1bmN0aW9uIGdldFNQTUZyb21VcmwodXJsKSB7XG4vLyAgIHZhciBtID0gdXJsLm1hdGNoKG5ldyBSZWdFeHAoJ1xcXFw/LipzcG09KFtcXFxcd1xcXFwuXFxcXC1cXFxcKi9dKyknKSk7XG4vLyAgIHZhciBzcG07XG4vLyAgIHJldHVybiAobSAmJiAoc3BtID0gbVsxXSkgJiYgc3BtLnNwbGl0KCcuJykubGVuZ3RoID09IDUpID8gc3BtIDogbnVsbDtcbi8vIH1cbi8vIGV4cG9ydHMuZ2V0U1BNRnJvbVVybCA9IGdldFNQTUZyb21Vcmw7XG5cbi8qKlxuICogQGF1dGhvciBqaXpoYS53eWogKG9sZGopXG4gKiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG52YXIgZWFjaCA9ICByZXF1aXJlKCcuL2VhY2gnKTtcblxuZnVuY3Rpb24gZ2V0UGFyYW1Gcm9tVXJsKGtleSwgdXJsKSB7XG4gIGlmIChrZXkgJiYgdXJsKSB7XG4gICAgdmFyIHBhcmFtID0gJyc7XG4gICAgdmFyIG07XG4gICAgdHJ5IHtcbiAgICAgIHZhciByZWcxID0gbmV3IFJlZ0V4cChrZXkgKyAnPShbXiZ8I3w/fFxcL10rKScpO1xuICAgICAgaWYgKGtleSA9PT0gJ3NwbScgfHwga2V5ID09PSAnc2NtJykge1xuICAgICAgICB2YXIgcmVnMiA9IG5ldyBSZWdFeHAoJ1xcXFw/LionICsga2V5ICsgJz0oW1xcXFx3XFxcXC5cXFxcLVxcXFwqL10rKScpO1xuICAgICAgICB2YXIgdG1wXzEgPSB1cmwubWF0Y2gocmVnMSk7XG4gICAgICAgIHZhciB0bXBfMiA9IHVybC5tYXRjaChyZWcyKTtcbiAgICAgICAgdmFyIHBhcmFtXzEgPSB0bXBfMSAmJiB0bXBfMS5sZW5ndGggPT09IDIgPyB0bXBfMVsxXSA6ICcnO1xuICAgICAgICB2YXIgcGFyYW1fMiA9IHRtcF8yICYmIHRtcF8yLmxlbmd0aCA9PT0gMiA/IHRtcF8yWzFdIDogJyc7XG4gICAgICAgIHBhcmFtID0gcGFyYW1fMSA+IHBhcmFtXzIgPyBwYXJhbV8xIDogcGFyYW1fMjtcbiAgICAgICAgcGFyYW0gPSBkZWNvZGVVUklDb21wb25lbnQocGFyYW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbSA9IHVybC5tYXRjaChyZWcxKTtcbiAgICAgICAgcGFyYW0gPSBtICYmIG0ubGVuZ3RoID09PSAyID8gbVsxXSA6ICcnO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gVE9ET1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZXR1cm4gcGFyYW07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufTtcblxuZnVuY3Rpb24gYWRkUGFyYW1zSW50b1VybChwYXJhbXMsIHVybCl7XG4gIHZhciBocmVmID0gdXJsIHx8IGxvY2F0aW9uLmhyZWY7XG4gIHZhciBzZWFyY2g7XG4gIHZhciBoYXNoO1xuICB2YXIgYTtcbiAgdmFyIGFuZF9jaGFyID0gJyYnO1xuICB2YXIgcXVlcnlfc3BsaXQ7XG4gIHZhciBxdWVyeV9jb3VudDtcbiAgdmFyIGFkZFF1ZXJ5U3RyQXJyID0gW107XG4gIC8vIOWPguaVsOWkhOeQhlxuICBlYWNoKHBhcmFtcyxmdW5jdGlvbihwYXJhbUtleSxwYXJhbVZhbHVlKXtcbiAgICBpZighbmV3IFJlZ0V4cChwYXJhbUtleSsnPScpLnRlc3QoaHJlZikpe1xuICAgICAgYWRkUXVlcnlTdHJBcnIucHVzaChwYXJhbUtleSArICc9JyArIHBhcmFtVmFsdWUpO1xuICAgIH1cbiAgfSk7XG4gIGlmKGFkZFF1ZXJ5U3RyQXJyLmxlbmd0aD09PTApe1xuICAgIHJldHVybiBocmVmOyBcbiAgfVxuICAvLyB1cmzlpITnkIZcbiAgaWYgKGhyZWYuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgIGEgPSBocmVmLnNwbGl0KCcjJyk7XG4gICAgaHJlZiA9IGEuc2hpZnQoKTtcbiAgICBoYXNoID0gYS5qb2luKCcjJyk7IC8vIOWPluesrOS4gOS4qiAjIOWQjueahOmDqOWIhlxuICB9XG4gIHF1ZXJ5X3NwbGl0ID0gaHJlZi5zcGxpdCgnPycpO1xuICBxdWVyeV9jb3VudCA9IHF1ZXJ5X3NwbGl0Lmxlbmd0aCAtIDE7XG5cbiAgLy8g5LiL6Z2i5aSE55CG5b2i5aaC4oCcaHR0cDovL3d3dy50YW9iYW8uY29t4oCd6L+Z5qC355qE5pyr5bC+5LiN5bim4oCcL+KAneeahOmTvuaOpVxuICBhID0gcXVlcnlfc3BsaXRbMF0uc3BsaXQoJy8vJyk7XG4gIGEgPSBhW2EubGVuZ3RoIC0gMV0uc3BsaXQoJy8nKTtcblxuICBpZiAocXVlcnlfY291bnQgPiAwKSB7XG4gICAgLyoqXG4gICAgICog55Sx5LqO5a2Y5Zyo57G75Ly8IGh0dHA6Ly9qdS5hdHBhbmVsLmNvbS8/c2NtPTEwMDUuMTAuMS43MDMmdXJsPWh0dHA6Ly93d3cudG1hbGwuY29tL2dvL2FjdC90bWFsbC9teW14LXltLnBocD9zcG09MS4xMDAwMzg2LjIyMjAxNy4yMCZhZF9pZD0mYW1faWQ9JmNtX2lkPSZwbV9pZD0xNTAxMDA4MjcyNjMzNjgwODVmOFxuICAgICAqIOi/meagt+eahOmTvuaOpe+8jOazqOaEj+WFtuS4reacieS4pOS4quKAnD/igJ3vvIxcbiAgICAgKiDov5nmmK/kuIDnp43ot7Povazpk77mjqXvvIzlhbbkuK0gc3BtIOWPguaVsOmcgOimgeWKoOWcqOWQjumdouS4gOS4qiA/IOS5i+WQju+8jFxuICAgICAqIOe7j+S4juaiteaYk+WVhumHj++8iDIwMTItMDMtMzDvvInvvIzlhrPlrprnu5/kuIDlsIYgc3BtIOWPguaVsOWKoOWIsCBocmVmIOeahOacgOWQjuS4gOS4qiA/IOS5i+WQjlxuICAgICAqL1xuICAgIHNlYXJjaCA9IHF1ZXJ5X3NwbGl0LnBvcCgpOyAvLyDlj5bmnIDlkI7kuIDkuKogPyDlkI7nmoTpg6jliIZcbiAgICBocmVmID0gcXVlcnlfc3BsaXQuam9pbignPycpOyAvLyDmnIDlkI7kuIDkuKogPyDkuYvliY3nmoTpg6jliIZcbiAgfVxuXG4gIGlmIChzZWFyY2ggJiZcbiAgICBxdWVyeV9jb3VudCA+IDEgJiYgLy8gIyDlj6rlr7nkuKTkuKrlj4rku6XkuIrnmoTigJw/4oCd55qEIHVybCDmiafooYzov5nmoLfnmoTmo4DmtYtcbiAgICBzZWFyY2guaW5kZXhPZignJicpID09IC0xICYmXG4gICAgLy8gc2VhcmNoLmluZGV4T2YoJz0nKSA9PSAtMSAmJlxuICAgIHNlYXJjaC5pbmRleE9mKCclJykgIT09IC0xKSB7XG4gICAgLyoqXG4gICAgICog5pyJ5LiA5Lqb6aG16Z2i77yM5aaCIGh0dHA6Ly9sb2dpbi50YW9iYW8uY29tL21lbWJlci9sb2dvdXQuamh0bWw/Zj10b3AmcmVkaXJlY3RVUkw9aHR0cDovL2xvZ2luLnRtYWxsLmNvbS8/c3BtPTEwMDcuMTAwMzYxLjAuMTgwJTI2cmVkaXJlY3RfdXJsPWh0dHAlMjUzQSUyNTJGJTI1MkZ0ZW1haS50bWFsbC5jb20lMjUyRiUyNTNGc3BtJTI1M0QzLjEwMDA0NzMuMTk3NTYyLjIlMjUyNnBydCUyNTNEMTMzNjM2NzQyNTE5NiUyNTI2cHJjJTI1M0Q0XG4gICAgICogc3BtIOWPguaVsOWKoOWcqOesrOS6jOS4qiA/IOS5i+WQju+8jOS9huaYr+esrOS6jOS4qiA/IOS5i+WQjueahCAmIOmDveW3sue7j+WBmuS6huinhOiMg+eahOi9rOegge+8jOaJgOS7peaWsOa3u+WKoOeahCBzcG0g5ZCO6Z2i55qEICYg5Lmf6KaB6L+b6KGM6L2s56CBXG4gICAgICovXG4gICAgYW5kX2NoYXIgPSAnJTI2JztcbiAgfVxuXG4gIGhyZWYgPSBocmVmICsgJz8nICsgYWRkUXVlcnlTdHJBcnIuam9pbignJicpXG4gICAgKyAoc2VhcmNoID8gKGFuZF9jaGFyICsgc2VhcmNoKSA6ICcnKVxuICAgICsgKGhhc2ggPyAoJyMnICsgaGFzaCkgOiAnJylcbiAgO1xuICByZXR1cm4gaHJlZjtcbn1cblxuZXhwb3J0cy5hZGRQYXJhbXNJbnRvVXJsID0gYWRkUGFyYW1zSW50b1VybDtcbmV4cG9ydHMuZ2V0UGFyYW1Gcm9tVXJsID0gZ2V0UGFyYW1Gcm9tVXJsO1xuXG4vKipcbiAqIOS7jiB1cmwg5Lit5Y+W5Ye65a+55bqU55qEIHNwbSDlj4LmlbBcbiAqIOS8mOW6k+Wcn+ixhnNwbUPkvY3lj6/og73lrZjlnKjnibnmrorlrZfnrKbvvIzlpoLvvJrigJxzcG09MC4wLml0ZW1fWE1UWTRPVEV5TlRBME1BPT0uQS5CaWlOUzHigJ1cbiAqIEBwYXJhbSB1cmwge1N0cmluZ31cbiAqIEByZXR1cm4ge1N0cmluZ30gc3BtIGEuYi5jLmQucHZpZO+8jOS4gOWFseS6lOS9jVxuICovXG5leHBvcnRzLmdldFNQTUZyb21VcmwgPSBmdW5jdGlvbih1cmwpIHtcbiAgcmV0dXJuIGdldFBhcmFtRnJvbVVybCgnc3BtJywgdXJsKTtcbn07XG5cbmV4cG9ydHMuZ2V0UXVlcnlGcm9tVXJsID0gZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIHN0cjJwYXJhbXModGFyZ2V0KSB7XG4gICAgdmFyIHQgPSBkZWNvZGVVUklDb21wb25lbnQodGFyZ2V0KTtcbiAgICB2YXIgc3RhcnRJZHggPSB0LmluZGV4T2YoJz8nKSArIDE7XG4gICAgdmFyIHN0ciA9IHQuc3Vic3RyaW5nKHN0YXJ0SWR4KTtcbiAgICB2YXIgb2JqID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIgYXJyID0gc3RyLnNwbGl0KCcmJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9ialthcnJbaV0uc3BsaXQoJz0nKVswXV0gPSBkZWNvZGVVUklDb21wb25lbnQoYXJyW2ldLnNwbGl0KCc9JylbMV0pO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdHJ5IHtcbiAgICB2YXIgaGFzaCA9IGxvY2F0aW9uICYmIGxvY2F0aW9uLmhhc2g7XG4gICAgdmFyIHNlYXJjaCA9IGxvY2F0aW9uICYmIGxvY2F0aW9uLnNlYXJjaDtcblxuICAgIGlmIChoYXNoICYmIGhhc2guaW5kZXhPZignPycpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHN0cjJwYXJhbXMoaGFzaCk7XG4gICAgfSBcbiAgICBpZiAoc2VhcmNoICYmIHNlYXJjaC5pbmRleE9mKCc/JykgIT09IC0xKSB7XG4gICAgICByZXR1cm4gc3RyMnBhcmFtcyhzZWFyY2gpO1xuICAgIH1cbiAgfSBjYXRjaChlKXtcbiAgICB2YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG4gICAgdWxvZygpLncoJ3VybCBlcnJvciA9PT0gJywgbG9jYXRpb24uaHJlZik7XG4gIH0gXG59O1xuXG5cblxudmFyIHV0aWxHUSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR1EnKTtcbnZhciB1dGlsTWV0YSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTWV0YScpO1xuXG52YXIgSEFTSCA9ICdoYXNoJztcbnZhciBISVNUT1JZID0gJ2hpc3RvcnknO1xuXG5mdW5jdGlvbiB3YXRjaEhhc2hDaGFuZ2UoY2IpIHtcbiAgdmFyIG9yaUhhc2ggPSBsb2NhdGlvbi5oYXNoICsgXCJcIjtcbiAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKCdhcGx1cy5vbicsIFt3aW5kb3csICdoYXNoY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChvcmlIYXNoICE9PSBsb2NhdGlvbi5oYXNoKSB7XG4gICAgICBvcmlIYXNoID0gbG9jYXRpb24uaGFzaCArIFwiXCI7XG4gICAgICBjYiAmJiB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgJiYgY2Iob3JpSGFzaCwgSEFTSCk7XG4gICAgfVxuICB9XSk7XG59O1xuZXhwb3J0cy53YXRjaEhhc2hDaGFuZ2UgPSB3YXRjaEhhc2hDaGFuZ2U7XG5cbmZ1bmN0aW9uIHdhdGNoSGlzdG9yeUNoYW5nZShjYikge1xuICB2YXIgb3JpUGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoO1xuXG4gIGlmICghaGlzdG9yeS5wdXNoU3RhdGUgfHwgIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSByZXR1cm47XG4gIFxuICBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoZSkge1xuICAgIHZhciBuZXdQYXRoID0gJyc7XG4gICAgaWYgKGUpIHtcbiAgICAgIG5ld1BhdGggPSBlICYmIGUuYXJndW1lbnRzICYmIGUuYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgZS5hcmd1bWVudHNbMl07XG4gICAgICB2YXIgdXJsID0gL15odHRwfGh0dHBzLy50ZXN0KG5ld1BhdGgpID8gbmV3UGF0aCA6IChsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0ICsgbmV3UGF0aCk7XG4gICAgICBpZiAobG9jYXRpb24uaHJlZiAhPT0gdXJsKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBjYiAmJiB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgJiYgY2IobmV3UGF0aCwgSElTVE9SWSk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuZXdQYXRoID0gbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgICBpZiAobmV3UGF0aCAhPT0gb3JpUGF0aCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgY2IgJiYgdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nICYmIGNiKG5ld1BhdGgsIEhJU1RPUlkpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgb3JpUGF0aCA9IG5ld1BhdGg7XG4gIH1cblxuICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoJ2FwbHVzLm9uJywgW3dpbmRvdywgJ3B1c2hTdGF0ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICBoYW5kbGVDaGFuZ2UoZSk7XG4gIH1dKTtcbiAgXG4gIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZSgnYXBsdXMub24nLCBbd2luZG93LCAncG9wc3RhdGUnLCBmdW5jdGlvbigpIHtcbiAgICBoYW5kbGVDaGFuZ2UoKTtcbiAgfV0pO1xuXG4gIHZhciBuZWVkUlN0YXRlID0gdXRpbE1ldGEuZ2V0TWV0YUNudCgnYXBsdXMtdHJhY2stcmVwbGFjZXN0YXRlJykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXRyYWNrLXJlcGxhY2VzdGF0ZScpO1xuICBuZWVkUlN0YXRlICYmIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZSgnYXBsdXMub24nLCBbd2luZG93LCAncmVwbGFjZVN0YXRlJywgZnVuY3Rpb24oZSkge1xuICAgIGhhbmRsZUNoYW5nZShlKTtcbiAgfV0pO1xuXG59O1xuZXhwb3J0cy53YXRjaEhpc3RvcnlDaGFuZ2UgPSB3YXRjaEhpc3RvcnlDaGFuZ2U7XG5cbi8vIGZ1bmN0aW9uIHdhdGNoRG9tQ2hhbmdlKGNiKSB7XG4vLyAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZSgnYXBsdXMub24nLCBbJ0RPTVJlYWR5JywgZnVuY3Rpb24gKGUpIHtcbi8vICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuLy8gICAgIC8vIHdhdGNoIGRvbWNoYW5nZSwgYmVjYXVzZSBpdCB3aWxsIGRvbid0IHRyaWdnZXIgcG9wc3RhdGUgd2hlbiBleGVjIGhpc3RvcnkucHVzaHN0YXRlXG4vLyAgICAgdmFyIE1PYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyIHx8IHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyIHx8IHdpbmRvdy5Nb3pNdXRhdGlvbk9ic2VydmVyO1xuLy8gICAgIGlmIChNT2JzZXJ2ZXIpIHtcbi8vICAgICAgIF9zZWxmLl9vYnNlcnZlciA9IG5ldyBNT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICBpZiAoX3NlbGYucGF0aG5hbWUgIT09IGxvY2F0aW9uLnBhdGhuYW1lKSB7XG4vLyAgICAgICAgICAgX3NlbGYucGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZSArICcnO1xuLy8gICAgICAgICAgIGNiICYmIHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiBjYihuZXdQYXRoLCBISVNUT1JZKTtcbi8vICAgICAgICAgICAvLyBfc2VsZi50b1NlbmRQVihfc2VsZi5wYXRobmFtZSwgSElTVE9SWSk7XG4vLyAgICAgICAgIH0gZWxzZSBpZiAoX3NlbGYuaGFzaCAhPT0gbG9jYXRpb24uaGFzaCkge1xuLy8gICAgICAgICAgIF9zZWxmLmhhc2ggPSBsb2NhdGlvbi5oYXNoICsgJyc7XG4vLyAgICAgICAgICAgX3NlbGYudG9TZW5kUFYoX3NlbGYuaGFzaCwgSEFTSCk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgIH0pO1xuLy8gICAgICAgLy/kvKDlhaXnm67moIfoioLngrnlkozop4Llr5/pgInpoblcbi8vICAgICAgIF9zZWxmLl9vYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbi8vICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSwgICAgLy8g5bGe5oCn55qE5Y+Y5YqoXG4vLyAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSwgICAgIC8vIOWtkOiKgueCueeahOWPmOWKqFxuLy8gICAgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLCAvLyDoioLngrnlhoXlrrnmiJboioLngrnmlofmnKznmoTlj5jliqhcbi8vICAgICAgICAgc3VidHJlZTogdHJ1ZSAgICAgICAgLy8g5omA5pyJ5ZCO5Luj6IqC54K555qE5Y+Y5YqoXG4vLyAgICAgICB9KTsgIFxuLy8gICAgIH1cbi8vICAgfV0pO1xuLy8gfTtcblxuLy8gZXhwb3J0cy53YXRjaERvbUNoYW5nZSA9IHdhdGNoRG9tQ2hhbmdlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxVcmwuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qc1xuICog5pON5L2cYXBsdXNfcXVldWXnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG5cbmV4cG9ydHMucHVzaEludG9Hb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoYWN0aW9uLCBhcmdzKSB7XG4gIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG5hbWVzID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gIHZhciBhcGx1c18xID0gYXBsdXNbbmFtZXNbMV1dO1xuICB2YXIgYXBsdXNfMiA9IGFwbHVzXzEgPyBhcGx1c18xW25hbWVzWzJdXSA6IG51bGw7XG5cbiAgaWYgKGFwbHVzICYmIG5hbWVzLmxlbmd0aCA9PT0gMiAmJiBhcGx1c18xKSB7XG4gICAgYXBsdXNfMS5hcHBseShhcGx1cywgYXJncyk7XG4gIH0gZWxzZSBpZiAobmFtZXMubGVuZ3RoID09PSAzICYmIGFwbHVzXzIpIHtcbiAgICBhcGx1c18yLmFwcGx5KGFwbHVzXzEsIGFyZ3MpOyAgXG4gIH0gZWxzZSB7XG4gICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGFyZ3VtZW50czogYXJnc1xuICAgIH0pO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdRLmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pON5L2cbWV0YeeahOW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfaGVhZF9ub2RlO1xudmFyIF9tZXRhX25vZGVzO1xuXG52YXIgdXRpbEF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4vdXRpbEF0dHJpYnV0ZScpO1xuLyoqXG4gKiDlj5blvpfpobXpnaLkuIogaGVhZCDkuK3nmoTmiYDmnIkgbWV0YSDlhYPntKBcbiAqIEBwYXJhbSBbZm9yY2VdIHtib29sZWFufSDmmK/lkKblvLrliLbojrflj5bmlrDlhoXlrrlcbiAqL1xuZnVuY3Rpb24gZ2V0TWV0YVRhZ3MoZm9yY2UpIHtcbiAgX2hlYWRfbm9kZSA9IF9oZWFkX25vZGUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblxuICBpZiAoX21ldGFfbm9kZXMgJiYgIWZvcmNlKSB7XG4gICAgcmV0dXJuIF9tZXRhX25vZGVzO1xuICB9XG5cbiAgcmV0dXJuIF9oZWFkX25vZGUgPyAoX21ldGFfbm9kZXMgPSBfaGVhZF9ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtZXRhJykpIDogW107XG59O1xuZXhwb3J0cy5nZXRNZXRhVGFncyA9IGdldE1ldGFUYWdzO1xuXG4vKipcbiAqIOWPluW+lyBoZWFkIC8gbWV0YSDkuK3mjIflrpogbWV0YSDnmoQgKGF0dHIgfHwgY29udGVudCkg5YC8XG4gKiA8bWV0YSBuYW1lPVwiYXBsdXMtdGVybWluYWxcIiBjb250ZW50PVwiMVwiPlxuICovXG5mdW5jdGlvbiBnZXRNZXRhQ250KG5hbWUsIGF0dHIpIHtcbiAgdmFyIGk7XG4gIHZhciBtZXRhO1xuICB2YXIgbWV0YV9ub2RlcyA9IGdldE1ldGFUYWdzKCk7XG4gIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG4gIHZhciBjb250ZW50O1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBtZXRhID0gbWV0YV9ub2Rlc1tpXTtcbiAgICBpZiAodXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnbmFtZScpID09PSBuYW1lKSB7XG4gICAgICBjb250ZW50ID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCBhdHRyIHx8ICdjb250ZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbnRlbnQgfHwgJyc7XG59O1xuZXhwb3J0cy5nZXRNZXRhQ250ID0gZ2V0TWV0YUNudDtcblxuXG4vKipcbiAqIOehruWumiBoZWFkIC8gbWV0YSDkuK3nmoQgaXNvbmVwYWdlIOeahOaVsOaNrlxuICog5b2i5aaC77yaXG4gKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjBcIiAvPiDooajnpLrkuI3mmK9vbmVwYWdlXG4gKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjF8aHR0cDovL2g1Lm0udGFvYmFvLmNvbS93ZS9pbmRleC5odG0jZGV0YWlsXCIgLz4g6KGo56S65pivb25lcGFnZVxuICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZ2V0T25lUGFnZUluZm8obWV0YUluZm8pIHtcbiAgdmFyIG9iaiA9IHtcbiAgICBpc29uZXBhZ2U6ICctMScsXG4gICAgdXJscGFnZW5hbWU6ICcnXG4gIH07XG4gIHZhciBtZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCk7XG4gIGlmIChtZXRhX2luZm8gJiYgbWV0YV9pbmZvLmhhc093blByb3BlcnR5KCdpc29uZXBhZ2VfZGF0YScpKSB7XG4gICAgb2JqLmlzb25lcGFnZSA9IG1ldGFfaW5mby5pc29uZXBhZ2VfZGF0YS5pc29uZXBhZ2U7XG4gICAgb2JqLnVybHBhZ2VuYW1lID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLnVybHBhZ2VuYW1lO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb250ZW50ID0gZ2V0TWV0YUNudCgnaXNvbmVwYWdlJykgfHwgJy0xJztcbiAgICB2YXIgYXJyX2NvbnRlbnQgPSBjb250ZW50LnNwbGl0KFwifFwiKTtcbiAgICBvYmouaXNvbmVwYWdlID0gYXJyX2NvbnRlbnRbMF07XG4gICAgb2JqLnVybHBhZ2VuYW1lID0gYXJyX2NvbnRlbnRbMV0gPyBhcnJfY29udGVudFsxXSA6IFwiXCI7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5leHBvcnRzLmdldE9uZVBhZ2VJbmZvID0gZ2V0T25lUGFnZUluZm87XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsTWV0YS5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMudHJ5VG9HZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyX25hbWUpIHtcbiAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUgPyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cl9uYW1lKSB8fCAnJykgOiAnJztcbn07XG5cbnZhciB0cnlUb1NldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyX25hbWUsIGF0dHJfdmFsdWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcbiAgICB0cnkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cl9uYW1lLCBhdHRyX3ZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy50cnlUb1NldEF0dHJpYnV0ZSA9IHRyeVRvU2V0QXR0cmlidXRlO1xuXG5leHBvcnRzLnRyeVRvUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgIHRyeSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyX25hbWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRyeVRvU2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJfbmFtZSwgJycpO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanNcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcblxudmFyIFVURkxBRyA9ICdVVDRBcGx1cyc7XG52YXIgVU1GTEFHID0gJ1VtZW5nNEFwbHVzJztcblxuZXhwb3J0cy5pc05hdGl2ZTRBcGx1cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBjaGFubmVsID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXRvVVQnKTtcbiAgdmFyIGJyaWRnZU5hbWUgPSBhcGx1cy5hcGx1c0JyaWRnZU5hbWU7XG4gIHJldHVybiAoYnJpZGdlTmFtZSA9PT0gVVRGTEFHICYmIGNoYW5uZWwgPT09IFVURkxBRykgfHwgYnJpZGdlTmFtZSA9PT0gVU1GTEFHO1xufTtcblxuZXhwb3J0cy5oYXZlTmF0aXZlRmxhZ0luVUEgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgYnJpZGdlTmFtZSA9IGFwbHVzLmFwbHVzQnJpZGdlTmFtZTtcbiAgLy8g5b2TYnJpZGdlTmFtZeS4uuepuuWAvOaXtuaJjei/m+ihjOS7peS4i+eahOWIpOaWreWSjOWkhOeQhumAu+i+ke+8jOS7peaPkOWNh+Wkmuasoei/kOihjOeahOaAp+iDvVxuICBpZiAoIWJyaWRnZU5hbWUgJiYgdHlwZW9mIGJyaWRnZU5hbWUgIT09ICdib29sZWFuJyAmJiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCkge1xuICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKFtVVEZMQUcsIFVNRkxBR10uam9pbignfCcpLCAnaScpO1xuICAgIHZhciBtYXRjaFJlc3VsdCA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2gocmVnKTtcbiAgICBicmlkZ2VOYW1lID0gbWF0Y2hSZXN1bHQgPyBtYXRjaFJlc3VsdFswXSA6IGZhbHNlO1xuICAgIGFwbHVzLmFwbHVzQnJpZGdlTmFtZSA9IGJyaWRnZU5hbWU7XG4gIH1cbiAgcmV0dXJuICEhYnJpZGdlTmFtZTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsTmF0aXZlNEFwbHVzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG5cbi8qKlxuICogbmFtZVN0b3JhZ2Ug55qE5a6e546w5ou36LSdXG4gKlxuICogaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vY29kZXYvbmFtZS1zdG9yYWdlL3RyZWUvbWFzdGVyXG4gKi9cbnZhciBuYW1lU3RvcmFnZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIF9uYW1lU3RvcmFnZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCduYW1lU3RvcmFnZScpO1xuXG4gIGlmIChfbmFtZVN0b3JhZ2UpIHtcbiAgICByZXR1cm4gX25hbWVTdG9yYWdlO1xuICB9XG5cbiAgdmFyIFNDSEVNRSA9IFwibmFtZVN0b3JhZ2U6XCI7XG4gIC8vdmFyIFJFX05BTUVTID0gL15uYW1lU3RvcmFnZTooW14/XSopKD86XFw/KD86KFtePV0rKT0oW14mXSopKSopPy9nO1xuICB2YXIgUkVfUEFJUiA9IC9eKFtePV0rKSg/Oj0oLiopKT8kLztcbiAgdmFyIFEgPSBcIj9cIjtcbiAgdmFyIEVRID0gXCI9XCI7XG4gIHZhciBBTkQgPSBcIiZcIjtcblxuICB2YXIgZW5jb2RlID0gZW5jb2RlVVJJQ29tcG9uZW50O1xuICB2YXIgZGVjb2RlID0gZGVjb2RlVVJJQ29tcG9uZW50O1xuXG4gIHZhciBTVE9SQUdFID0ge307XG4gIHZhciBPUklHSU5fTkFNRTtcblxuICB2YXIgbmFtZVN0b3JhZ2UgPSB7fTtcblxuICAvLyDop6PmnpDlubbliJ3lp4vljJYgbmFtZSDmlbDmja7jgIJcbiAgLy8g5qCH5YeG55qEIG5hbWVTdG9yYWdlIOaVsOaNruagvOW8j+S4uiBgbmFtZVN0b3JhZ2U6b3JpZ2luLW5hbWU/a2V5PXZhbHVlYFxuICAvLyBAcGFyYW0ge1N0cmluZ30gbmFtZS5cbiAgKGZ1bmN0aW9uIHBhcnNlKG5hbWUpIHtcblxuICAgIGlmIChuYW1lICYmIG5hbWUuaW5kZXhPZihTQ0hFTUUpID09PSAwKSB7XG5cbiAgICAgIHZhciBtYXRjaCA9IG5hbWUuc3BsaXQoL1s6P10vKTtcblxuICAgICAgbWF0Y2guc2hpZnQoKTsgLy8gc2NoZW1lOiBtYXRjaFswXTtcbiAgICAgIE9SSUdJTl9OQU1FID0gZGVjb2RlKG1hdGNoLnNoaWZ0KCkpIHx8IFwiXCI7IC8vIG1hdGNoWzFdXG5cbiAgICAgIHZhciBwYXJhbXMgPSBtYXRjaC5qb2luKFwiXCIpOyAvLyBtYXRjaFsyLC4uLl1cblxuICAgICAgdmFyIHBhaXJzID0gcGFyYW1zLnNwbGl0KEFORCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgcGFpciwga2V5LCB2YWx1ZSwgbCA9IHBhaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBwYWlyID0gcGFpcnNbaV0ubWF0Y2goUkVfUEFJUik7XG4gICAgICAgIGlmICghcGFpciB8fCAhcGFpclsxXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAga2V5ID0gZGVjb2RlKHBhaXJbMV0pO1xuICAgICAgICB2YWx1ZSA9IGRlY29kZShwYWlyWzJdKSB8fCBcIlwiO1xuXG4gICAgICAgIFNUT1JBR0Vba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcblxuICAgICAgT1JJR0lOX05BTUUgPSBuYW1lIHx8IFwiXCI7XG5cbiAgICB9XG5cbiAgfSkod2luZG93Lm5hbWUpO1xuXG4gIC8vIOWGmeWFpeaVsOaNruOAglxuICAvLyBAcGFyYW0ge1N0cmluZ30ga2V5LCDplK7lkI3jgIJcbiAgLy8gQHBhcmFtIHtTdHJpbmd9IHZhbHVlLCDplK7lgLzjgIJcbiAgbmFtZVN0b3JhZ2Uuc2V0SXRlbSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgaWYgKCFrZXkgfHwgXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIHZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFNUT1JBR0Vba2V5XSA9IFN0cmluZyh2YWx1ZSk7XG4gICAgc2F2ZSgpO1xuICB9O1xuXG4gIC8vIOivu+WPluaVsOaNruOAglxuICAvLyBAcGFyYW0ge1N0cmluZ30ga2V5LCDplK7lkI3jgIJcbiAgLy8gQHJldHVybiB7U3RyaW5nfSDplK7lgLzjgILlpoLmnpzkuI3lrZjlnKjvvIzliJnov5Tlm54gYG51bGxg44CCXG4gIG5hbWVTdG9yYWdlLmdldEl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIFNUT1JBR0UuaGFzT3duUHJvcGVydHkoa2V5KSA/IFNUT1JBR0Vba2V5XSA6IG51bGw7XG4gIH07XG5cbiAgLy8g56e76Zmk5pWw5o2u44CCXG4gIC8vIEBwYXJhbSB7U3RyaW5nfSBrZXksIOmUruWQjeOAglxuICBuYW1lU3RvcmFnZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGlmICghU1RPUkFHRS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFNUT1JBR0Vba2V5XSA9IG51bGw7XG4gICAgZGVsZXRlIFNUT1JBR0Vba2V5XTtcbiAgICBzYXZlKCk7XG4gIH07XG5cbiAgLy8g5riF56m6IG5hbWVTdG9yYWdl44CCXG4gIG5hbWVTdG9yYWdlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIFNUT1JBR0UgPSB7fTtcbiAgICBzYXZlKCk7XG4gIH07XG5cbiAgbmFtZVN0b3JhZ2UudmFsdWVPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gU1RPUkFHRTtcbiAgfTtcblxuICBuYW1lU3RvcmFnZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbmFtZSA9IHdpbmRvdy5uYW1lO1xuICAgIHJldHVybiBuYW1lLmluZGV4T2YoU0NIRU1FKSA9PT0gMCA/IG5hbWUgOiBTQ0hFTUUgKyBuYW1lO1xuICB9O1xuXG4gIC8vIOS/neWtmOaVsOaNruWIsCB3aW5kb3cubmFtZVxuICAvLyDlpoLmnpzmsqHmnInlrZjlgqjmlbDmja7vvIzliJnmgaLlpI3ljp/lp4vnqpflj6PlkI3np7Aod2luZG93Lm5hbWUp44CCXG4gIGZ1bmN0aW9uIHNhdmUoKSB7XG4gICAgdmFyIHBhaXJzID0gW107XG4gICAgdmFyIGVtcHR5ID0gdHJ1ZTtcbiAgICB2YXIgdmFsdWU7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gU1RPUkFHRSkge1xuICAgICAgaWYgKFNUT1JBR0UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBlbXB0eSA9IGZhbHNlO1xuICAgICAgICB2YWx1ZSA9IFNUT1JBR0Vba2V5XSB8fCBcIlwiO1xuICAgICAgICBwYWlycy5wdXNoKGVuY29kZShrZXkpICsgRVEgKyBlbmNvZGUodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3aW5kb3cubmFtZSA9IGVtcHR5ID8gT1JJR0lOX05BTUUgOiBTQ0hFTUUgKyBlbmNvZGUoT1JJR0lOX05BTUUpICsgUSArIHBhaXJzLmpvaW4oQU5EKTtcbiAgfTtcblxuICAvLyBhZGRFdmVudExpc3RlciBpbXBsZW1lbnRhdGlvblxuICAvLyBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50LlxuICAvLyBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lLlxuICAvLyBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyLlxuICBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGVsZW1lbnQuYXR0YWNoRXZlbnQpIHtcbiAgICAgIGVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBoYW5kbGVyLmNhbGwoZWxlbWVudCwgZXZ0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvLyBTYXZlIHRoZSBsYXN0IGRhdGEgZm9yIHRoZSBuZXh0IHBhZ2UuXG4gIGFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnYmVmb3JldW5sb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIHNhdmUoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIG5hbWVTdG9yYWdlO1xuXG59KSgpO1xuXG5leHBvcnRzLm5hbWVTdG9yYWdlID0gbmFtZVN0b3JhZ2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsTmFtZVN0b3JhZ2UuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcbiAqIOmYv+mHjOezu+S4muWKoei1sOi/meS4qumAu+i+kVxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1dGlsRGF0YSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGF0YScpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHV0aWxBdHRyaWJ1dGUgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEF0dHJpYnV0ZScpO1xudmFyIHV0aWxNZXRhID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxNZXRhJyk7XG4vLyB2YXIgdXRpbEV4aW5mbyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRXhpbmZvJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxudmFyIGluZm8gPSB7fTtcbnZhciBBUExVU19YX1NFVFRJTkdTID0gJ2FwbHVzLXgtc2V0dGluZ3MnO1xudmFyIHByaW9yaXR5TWV0YUluZm87XG5cbi8vIOWIoOmZpOWkp+mHj+eahEFycnJhee+8jOS/neeVmeWOhuWPsuS4jeinhOiMg+eahG1ldGFOYW1lIDIwMTgtMDEtMTAgQOiwi+Wjq1xuLy8g6K+m6KeBIGh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvZG9jcy9scHl2Y21cbnZhciBrZXlzID0gWydhaG90LWFwbHVzJywgJ2lzb25lcGFnZScsICdzcG0taWQnLCAnZGF0YS1zcG0nLCAnbWljcm9zY29wZS1kYXRhJ107XG5cbi8qKlxuICog5Y+W5b6XIGhlYWQgLyBtZXRhIOS4reeahOaYvuW+rumVnOeahOaVsOaNru+8jFxuICog5b2i5aaC77yaXG4gKiA8bWV0YSBuYW1lPVwibWljcm9zY29wZS1kYXRhXCIgY29udGVudD1cInBhZ2VJZD0xMjM7IHNpdGVJZD00NTZcIj5cbiAqIOWPr+iDveacieWkmuadoSBtZXRhIOaVsOaNruOAglxuICpcbiAqIOebuOWFs+agvOW8j+WPiuivtOaYjuinge+8mlxuICogaHR0cDovL3dpa2kudWVkLnRhb2Jhby5uZXQvZG9rdS5waHA/aWQ9dGVhbTp1ZGM6ZjJlOndlYnRyYWNlcjpkZXYtZG9jczpleHRyYS1kYXRhXG4gKi9cbmZ1bmN0aW9uIGdldE1ldGFNaWNyb3Njb3BlRGF0YSAobWV0YV9ub2Rlcykge1xuICB2YXIgaTtcbiAgdmFyIG1ldGE7XG4gIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG4gIHZhciBjb250ZW50O1xuICB2YXIgX21pY3Jvc2NvcGVfZGF0YSA9IHt9O1xuICBpbmZvLl9taWNyb3Njb3BlX2RhdGEgPSBfbWljcm9zY29wZV9kYXRhO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBtZXRhID0gbWV0YV9ub2Rlc1tpXTtcbiAgICBpZiAodXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnbmFtZScpID09PSAnbWljcm9zY29wZS1kYXRhJykge1xuICAgICAgY29udGVudCA9IHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgJ2NvbnRlbnQnKTtcbiAgICAgIHV0aWxEYXRhLnBhcnNlU2VtaWNvbG9uQ29udGVudChjb250ZW50LCBfbWljcm9zY29wZV9kYXRhKTtcbiAgICAgIGluZm8uaXNfaGVhZF9oYXNfbWV0YV9taWNyb3Njb3BlX2RhdGEgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGluZm8uX21pY3Jvc2NvcGVfZGF0YV9wYXJhbXMgPSBmb3JtYXQub2JqMnBhcmFtKF9taWNyb3Njb3BlX2RhdGEpO1xuXG4gIGluZm8ubXNfZGF0YV9wYWdlX2lkID0gX21pY3Jvc2NvcGVfZGF0YVsncGFnZUlkJ107XG4gIGluZm8ubXNfZGF0YV9zaG9wX2lkID0gX21pY3Jvc2NvcGVfZGF0YVsnc2hvcElkJ107XG4gIGluZm8ubXNfZGF0YV9pbnN0YW5jZV9pZCA9IF9taWNyb3Njb3BlX2RhdGFbJ3NpdGVJbnN0YW5jZUlkJ107XG4gIGluZm8ubXNfZGF0YV9zaXRlQ2F0ZWdvcnlJZCA9IF9taWNyb3Njb3BlX2RhdGFbJ3NpdGVDYXRlZ29yeSddO1xuICBpbmZvLm1zX3Byb3RvdHlwZV9pZCA9IF9taWNyb3Njb3BlX2RhdGFbJ3Byb3RvdHlwZUlkJ107XG4gIGluZm8uc2l0ZV9pbnN0YW5jZV9pZF9vcl9zaG9wX2lkID0gaW5mby5tc19kYXRhX2luc3RhbmNlX2lkIHx8IGluZm8ubXNfZGF0YV9zaG9wX2lkO1xuXG4gIC8vIOenu+mZpOS6hiBhdHAtYmVhY29uIOWKn+iDve+8jOaaguaXtuS/neeVmeWFpeWPoyBA6LCL5aOrIDIwMTgtMDEtMTBcbiAgaW5mby5fYXRwX2JlYWNvbl9kYXRhID0ge307XG4gIGluZm8uX2F0cF9iZWFjb25fZGF0YV9wYXJhbXMgPSAnJztcbn07XG5cbi8qKlxuICogPG1ldGEgbmFtZT1cImRhdGEtc3BtXCIgY29udGVudD1cIjFcIiBkYXRhLXNwbS1wcm90b2NvbD1cImlcIiAvPlxuICpcbiAqIOWPluW+lyBkYXRhLXNwbSDov5nkuKogbWV0YSDkuIrnmoQgZGF0YS1zcG0tcHJvdG9jb2wg55qE5YC8XG4gKiDlpoLmnpzmnInorr7nva7kuJTlgLzkuLogJ2kn77yI5L2/55SoIGltZyDljY/orq7vvInvvIzliJnpobXpnaLkuIrmiYDmnInnmoQgPGE+LzxhcmVhPiDpk77mjqXooqvngrnlh7vml7bpg73kuI3mt7vliqAgc3BtIOWPguaVsO+8jOiAjOaYr1xuICog5Y+R6YCB5LiA5LiqIG5ldyBJbWFnZSgpIOivt+axglxuICovXG5mdW5jdGlvbiBnZXRTUE1Qcm90b2NvbEZyb21NZXRhIChtZXRhX25vZGVzKSB7XG4gIHZhciBtZXRhX3NwbV9wcm90b2NvbDtcbiAgdmFyIGdldE1ldGFCeURhdGFzcG0gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9tZXRhO1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKSB7XG4gICAgICBfbWV0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1kYXRhLXNwbV0nKTtcbiAgICB9XG4gICAgZWFjaChtZXRhX25vZGVzLCBmdW5jdGlvbiAobSkge1xuICAgICAgaWYgKHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobSwgJ25hbWUnKSA9PT0gJ2RhdGEtc3BtJykge1xuICAgICAgICBfbWV0YSA9IG07XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIF9tZXRhO1xuICB9O1xuICB2YXIgbWV0YSA9IGdldE1ldGFCeURhdGFzcG0oKTtcbiAgaWYgKG1ldGEpIHtcbiAgICBtZXRhX3NwbV9wcm90b2NvbCA9IHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgJ2RhdGEtc3BtLXByb3RvY29sJyk7XG4gIH1cbiAgcmV0dXJuIG1ldGFfc3BtX3Byb3RvY29sO1xufTtcblxuZnVuY3Rpb24gcGFyc2VPbmVQYWdlKGluZm8pIHtcbiAgdmFyIGNvbnRlbnQgPSBpbmZvLmlzb25lcGFnZSB8fCAnLTEnO1xuICB2YXIgYXJyX2NvbnRlbnQgPSBjb250ZW50LnNwbGl0KCd8Jyk7XG4gIHZhciBpc29uZXBhZ2UgPSBhcnJfY29udGVudFswXTtcbiAgdmFyIHVybHBhZ2VuYW1lID0gYXJyX2NvbnRlbnRbMV0gPyBhcnJfY29udGVudFsxXSA6ICcnO1xuXG4gIGluZm8uaXNvbmVwYWdlX2RhdGEgPSB7XG4gICAgaXNvbmVwYWdlOiBpc29uZXBhZ2UsXG4gICAgdXJscGFnZW5hbWU6IHVybHBhZ2VuYW1lXG4gIH07XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHt7fX1cbiAqL1xudmFyIGxhc3RfaW5mbztcbmZ1bmN0aW9uIGdldEluZm8oKSB7XG4gIGlmIChkb2N1bWVudCkge1xuICAgIHZhciBtZXRhX25vZGVzID0gdXRpbE1ldGEuZ2V0TWV0YVRhZ3MoKTtcbiAgICBnZXRNZXRhTWljcm9zY29wZURhdGEobWV0YV9ub2Rlcyk7XG5cbiAgICAvLyBzdGVwMeOAgeaLv+WIsOaJgOaciWFwbHVz5YWz6ZSu6K+N5byA5aS055qEbWV0YVZhbHVlXG4gICAgZWFjaChtZXRhX25vZGVzLCBmdW5jdGlvbihtKXtcbiAgICAgIHZhciBtZXRhTmFtZSA9IHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobSwgJ25hbWUnKTtcbiAgICAgIGlmICgvXmFwbHVzLy50ZXN0KG1ldGFOYW1lKSkge1xuICAgICAgICBpbmZvW21ldGFOYW1lXSA9IHV0aWxNZXRhLmdldE1ldGFDbnQobWV0YU5hbWUpO1xuICAgICAgICBpZiAobWV0YU5hbWUgPT09IEFQTFVTX1hfU0VUVElOR1MpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJpb3JpdHlNZXRhSW5mbyA9IGluZm9bbWV0YU5hbWVdID0gSlNPTi5wYXJzZSh1dGlsTWV0YS5nZXRNZXRhQ250KG1ldGFOYW1lKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIHN0ZXAy44CB5ou/5Yiw6Zmk5LqGYXBsdXPlhbPplK7or43lvIDlpLTnmoTvvIzljoblj7LmmrTpnLLnmoTmjqXlj6NtZXRhVmFsdWVcbiAgICBlYWNoKGtleXMsIGZ1bmN0aW9uIChrKSB7XG4gICAgICBpbmZvW2tdID0gdXRpbE1ldGEuZ2V0TWV0YUNudChrKTtcbiAgICB9KTtcblxuICAgIGluZm8uc3BtX3Byb3RvY29sID0gZ2V0U1BNUHJvdG9jb2xGcm9tTWV0YShtZXRhX25vZGVzKTtcbiAgICBpZiAocHJpb3JpdHlNZXRhSW5mbykge1xuICAgICAgaW5mbyA9IHV0aWxEYXNoLmFzc2lnbihpbmZvLCBwcmlvcml0eU1ldGFJbmZvKTtcbiAgICB9XG5cbiAgICAvLyBzdGVwM+OAgea1rueCueaVsOeJueauiuWkhOeQhlxuICAgIHZhciBmbG9hdF9rZXlzID0gWydhcGx1cy1yYXRlLWFob3QnXTtcbiAgICB2YXIgaTtcbiAgICB2YXIgaztcbiAgICB2YXIgbCA9IGZsb2F0X2tleXMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpICsrKSB7XG4gICAgICBrID0gZmxvYXRfa2V5c1tpXTtcbiAgICAgIGluZm9ba10gPSBwYXJzZUZsb2F0KGluZm9ba10pO1xuICAgIH1cblxuICAgIHBhcnNlT25lUGFnZShpbmZvKTtcbiAgfVxuICBsYXN0X2luZm8gPSBpbmZvIHx8IHt9O1xuICByZXR1cm4gaW5mbztcbn07XG5leHBvcnRzLmdldEluZm8gPSBnZXRJbmZvO1xuXG4vLyDlpoLmnpzmnInnvJPlrZjvvIzkvb/nlKjnvJPlrZjnmoTlgLzvvIzmsqHmnInnvJPlrZjliJnku44gRE9NIOS4reivu+WPllxuZXhwb3J0cy5xR2V0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gbGFzdF9pbmZvIHx8IGdldEluZm8oKTtcbn07XG5cbmZ1bmN0aW9uIGxvZ2dlclByaW9yaXR5SW5mbyAoaykge1xuICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgbXNnOiAncGxlYXNlIGRvIG5vdCByZXBlYXQgc2V0UHJpb3JpdHlNZXRhSW5mbyAnICsga1xuICB9KTtcbn1cblxuLyoqXG4gKiDliqjmgIHphY3nva5tZXRhXG4gKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcbiAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuICpcbiAqIEBwYXJhbXMge1N0cmluZ30ga1xuICogQHBhcmFtcyB7T2JqZWN0fSB2XG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMgeyBwcmlvcml0eTogMSB9IHx8IG51bGxcbiAqL1xuZXhwb3J0cy5zZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrLCB2KSB7XG4gIGlmICghbGFzdF9pbmZvKSB7XG4gICAgbGFzdF9pbmZvID0ge307XG4gIH1cbiAgLy8g5YWo5bGA6YWN572u5Y+q6KaB5pyJ5bCx5LiN6IO95YaN5qyh6K6+572u77yM5pWF6L+Z6YeM55u05o6lcmV0dXJuXG4gIGlmICh0eXBlb2YgcHJpb3JpdHlNZXRhSW5mbyA9PT0gJ29iamVjdCcgJiYgcHJpb3JpdHlNZXRhSW5mb1trXSkge1xuICAgIGxvZ2dlclByaW9yaXR5SW5mbyhrKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoayA9PT0gQVBMVVNfWF9TRVRUSU5HUykge1xuICAgIGlmICghcHJpb3JpdHlNZXRhSW5mbykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcHJpb3JpdHlNZXRhSW5mbyA9IHR5cGVvZiB2ID09PSAnb2JqZWN0JyA/IHYgOiBKU09OLnBhcnNlKHYpO1xuICAgICAgICBsYXN0X2luZm8gPSB1dGlsRGFzaC5hc3NpZ24obGFzdF9pbmZvLCBwcmlvcml0eU1ldGFJbmZvKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlKTtcbiAgICAgIH0gIFxuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXJQcmlvcml0eUluZm8oayk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKGsgPT09ICdhcGx1cy1leGluZm8nKSB7XG4gICAgbGFzdF9pbmZvW2tdID0gdHlwZW9mIHYgPT09ICdvYmplY3QnID8gdiA6IGZvcm1hdC5wYXJhbTJvYmoodik7XG4gIH0gZWxzZSB7XG4gICAgbGFzdF9pbmZvW2tdID0gdjtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogZ2V0IG1ldGFJbmZvIGJ5IGtleVxuICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG4gKiDor6bop4HvvJpodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL3Byb2plY3QvcGVyZm9ybWFuY2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ31cbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xudmFyIGdldE1ldGFJbmZvID0gZnVuY3Rpb24oaykge1xuICBpZiAoIWxhc3RfaW5mbykge1xuICAgIGxhc3RfaW5mbyA9IHt9O1xuICB9XG4gIHJldHVybiBsYXN0X2luZm9ba10gfHwgJyc7XG59O1xuZXhwb3J0cy5nZXRNZXRhSW5mbyA9IGdldE1ldGFJbmZvO1xuXG5cbi8qKlxuICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG4gKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcbiAqICAtIGBBcnJheS5wcm90b3R5cGUuY29uY2F0YCBjYWxsZWQgb24gQXJyYXkgdmFsdWVzLlxuICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuICogIEBwYXJhbSBrXG4gKiAgQHBhcmFtIHZcbiAqL1xuZXhwb3J0cy5hcHBlbmRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrLCB2KSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoayAmJiB2KSB7XG4gICAgLy8gYXBsdXMtdXRwYXJhbSB8fCBhcGx1cy1uZXh0cGFnZS11dHBhcmFtIHx8IGFwbHVzLWV4ZGF0YVxuICAgIHZhciBwcm9jZXNzT2JqZWN0ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG5ld192YWx1ZSA9IHR5cGVvZiB2ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UodikgOiB2O1xuICAgICAgICB0b1NldE1ldGFJbmZvKGssIHV0aWxEYXNoLmFzc2lnbihvbGRfdmFsdWUsIG5ld192YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9O1xuICAgIC8vIGFwbHVzLWF1dG8tZXhwIHx8IGFwbHVzLWF1dG8tY2xrXG4gICAgdmFyIHByb2Nlc3NBcnJheSA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBuZXdfdmFsdWUgPSB0eXBlb2YgdiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKHYpIDogdjtcbiAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBvbGRfdmFsdWUuY29uY2F0KG5ld192YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9O1xuXG4gICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgcHJvY2Vzc0FycmF5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3NPYmplY3QodmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHRvU2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgYXBsdXMuc2V0TWV0YUluZm8oa2V5LCB2YWx1ZSwge1xuICAgICAgICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9kb2NzL21ldGEjbWV0YS1hcGx1cy1leGluZm9cbiAgICB2YXIgcHJvY2Vzc0FwbHVzRXhpbmZvID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuICAgICAgdmFyIGV4aW5mb3NfbmV3ID0gZm9ybWF0LnBhcmFtMm9iaih2KTtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgdXRpbERhc2guYXNzaWduKG9sZF92YWx1ZSwgZXhpbmZvc19uZXcpKTsgLy8gZXhpbmZvc19vbGQuY29uY2F0KGV4aW5mb3NfbmV3KS5qb2luKCcmJylcbiAgICB9O1xuXG4gICAgdmFyIGZsYWc7XG4gICAgdmFyIF9vbGRWYWx1ZSA9IGFwbHVzLmdldE1ldGFJbmZvKGspO1xuICAgIGlmIChrID09PSAnYXBsdXMtZXhpbmZvJykge1xuICAgICAgcHJvY2Vzc0FwbHVzRXhpbmZvKF9vbGRWYWx1ZSk7XG4gICAgICBmbGFnID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKF9vbGRWYWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiBfb2xkVmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHByb2Nlc3NPYmooX29sZFZhbHVlKTtcbiAgICAgICAgZmxhZyA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciB0bXBfcGFyc2UgPSBKU09OLnBhcnNlKF9vbGRWYWx1ZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0bXBfcGFyc2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBwcm9jZXNzT2JqKHRtcF9wYXJzZSk7XG4gICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZsYWcpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgdik7XG4gICAgfVxuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX21ldGEvbWV0YUluZm9BbGkuanNcbi8vIG1vZHVsZSBpZCA9IDMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MvdXRpbC9mb3JtYXQuanNcbiAqIOW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciB0cnlUb0RlY29kZSA9IHJlcXVpcmUoJy4vdHJ5VG9EZWNvZGUnKTtcblxuZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuICB2YXIgcmV0ID0ge307XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIGk7XG4gIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICByZXRba10gPSB2O1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIHBhcmFtIHRvIG9iamVjdFxuICog5bCG5LiA5Liq566A5Y2V55qE5b2i5aaCIGE9MSZiPTImYz0zIOi/meagt+eahOWPguaVsOi9rOWMluS4uueugOWNleeahCBvYmplY3Qg5qC85byP77yM5aaC77yaXG4gKiB7XG4gKiAgIGE6IFwiMVwiLFxuICogICBiOiBcIjJcIixcbiAqICAgYzogXCIzXCJcbiAqIH1cbiAqIEBwYXJhbSBwYXJhbXMge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5wYXJhbTJvYmogPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gIGlmICh0eXBlb2YgcGFyYW1zID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cbiAgdmFyIG9iaiA9IHt9O1xuICBpZiAoIXBhcmFtcyB8fCB0eXBlb2YgcGFyYW1zICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBvYmo7XG4gIH1cbiAgdmFyIGEgPSBwYXJhbXMuc3BsaXQoJyYnKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBhW2ldO1xuICAgIHZhciBpbmRleCA9IGl0ZW0uaW5kZXhPZignPScpO1xuICAgIHZhciBmcmFnbWVudCA9IGl0ZW0uc3BsaXQoJz0nKTtcbiAgICB2YXIgbGVuID0gaXRlbS5sZW5ndGg7XG4gICAgaWYgKGZyYWdtZW50Lmxlbmd0aCA9PT0gMikge1xuICAgICAgb2JqW2ZyYWdtZW50WzBdXSA9IGZyYWdtZW50WzFdIHx8ICcnOyAgXG4gICAgfSBlbHNlIGlmIChpbmRleCA+IDApIHtcbiAgICAgIHZhciBrZXkgPSBpdGVtLnNsaWNlKDAsIGluZGV4KTtcbiAgICAgIHZhciB2YWx1ZSA9IGl0ZW0uc2xpY2UoaW5kZXggKyAxLCBsZW4pIHx8ICcnO1xuICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2ZyYWdtZW50WzBdXSA9ICcnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqO1xufTtcblxuLy8gY29uc29sZS5sb2coJ1RPRE8gZGVsZXRlIHNfcGxhaW5fb2JqJyk7XG52YXIgc19wbGFpbl9vYmogPSAnOjotcGxhaW4tOjonO1xuZXhwb3J0cy5zX3BsYWluX29iaiA9IHNfcGxhaW5fb2JqO1xuXG4vKipcbiAqIGFycmF5IHRvIHBhcmFtXG4gKiDlsIbkuIDkuKrnroDljZXnmoTmlbDnu4TovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j++8jFxuICog5YW25Lit5pWw57uE5Li6XG4gKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG4gKiDnmoTlvaLlvI/jgIJcbiAqIOS4jiBvYmoycGFyYW0g55u45q+U77yM6L+Z5Liq5pa55rOV55qE5aW95aSE5piv5Y+v5Lul5L+d6K+B5pyA5ZCO5Y+C5pWw55qE6aG65bqPXG4gKiBAcGFyYW0gYXJyIHtBcnJheX1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gYXJyMnBhcmFtKGFyciwgc2tpcEVuY29kZSkge1xuICB2YXIgYSA9IFtdLFxuICAgIGssXG4gICAgdixcbiAgICBpLFxuICAgIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgayA9IGFycltpXVswXTtcbiAgICB2ID0gYXJyW2ldWzFdO1xuICAgIHZhciBpc0luUGxhbk9iaiA9IGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDA7XG4gICAgdmFyIF92YWx1ZSA9IGlzSW5QbGFuT2JqIHx8IHNraXBFbmNvZGUgPyB2IDogZW5jb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgIGEucHVzaChpc0luUGxhbk9iaiA/IF92YWx1ZSA6IChrICsgJz0nICsgX3ZhbHVlKSk7XG4gIH1cbiAgcmV0dXJuIGEuam9pbignJicpO1xufTtcbmV4cG9ydHMuYXJyMnBhcmFtID0gYXJyMnBhcmFtO1xuXG4vKipcbiAqIG9iamVjdCB0byBwYXJhbVxuICog5bCG5LiA5Liq566A5Y2V5a+56LGh6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI9cbiAqIOWPguingSBhcnIycGFyYW0oKSDmlrnms5VcbiAqIEBwYXJhbSBvYmoge09iamVjdH1cbiAqIEBwYXJhbSBjb21tVHJhbnNsYXRlIHtCb29sZWFufSDmma7pgJrovazmjaLkuI3lgZppc1N0YXJ0V2l0aOagoemqjFxuICpcbiAqL1xuZXhwb3J0cy5vYmoycGFyYW0gPSBmdW5jdGlvbiAob2JqLCBjb21tVHJhbnNsYXRlKSB7XG4gIHZhciBhID0gW107XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIF92O1xuICBmb3IgKGsgaW4gb2JqKVxuICAvLyBUT0RPOiDlr7nkuo5leGFyZ3Mga2V5LCB2YWx1ZSDkuZ/mmK9vYmrnsbvlnovvvIzpnIDopoHpgJLlvZLop6PmnpAgQOmSsOaYrVxuICAgIGlmIChrICYmIG9iai5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgaWYgKHR5cGVvZiBvYmpba10gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHYgPSAnJyArIHRoaXMub2JqMnBhcmFtKG9ialtrXSk7XG4gICAgICAgIF92ID0gdjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHYgPSAnJyArIG9ialtrXTtcbiAgICAgICAgX3YgPSBrICsgJz0nICsgdjtcbiAgICAgIH1cbiAgICAgIGlmICghY29tbVRyYW5zbGF0ZSkge1xuICAgICAgICBhLnB1c2goay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMCA/IHYgOiBfdik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhLnB1c2goX3YpO1xuICAgICAgfVxuICAgIH1cbiAgcmV0dXJuIGEuam9pbignJicpO1xufTtcblxuZXhwb3J0cy5lbmNvZGVHb2tleVZhbHVlID0gZnVuY3Rpb24gKGdva2V5KSB7XG4gIC8vIHZhciBhcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAvLyAvLyDlr7lnb2tleeWGheeahHZhbHVl57uf5LiA5Yqg5LiA5bGC57yW56CBXG4gIC8vIGlmICh0eXBlb2YgZ29rZXkgPT09ICdvYmplY3QnICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAvLyAgIGZvciAodmFyIGsgaW4gZ29rZXkpIHtcbiAgLy8gICAgIGlmICh0eXBlb2YgZ29rZXlba10gPT09ICdzdHJpbmcnKSB7XG4gIC8vICAgICAgIHRyeSB7XG4gIC8vICAgICAgICAgZ29rZXlba10gPSBlbmNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KGdva2V5W2tdKSk7XG4gIC8vICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyB9XG4gIHJldHVybiBnb2tleTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9mb3JtYXQuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuYXNzaWduID0gcmVxdWlyZSgnLi9hc3NpZ24nKTtcblxuLyoqXG4gKiDnlJ/miJDkuIDkuKrnlKjkuo7pgb/lhY3nvJPlrZjnmoTpmo/mnLrmlbBcbiAqIOS4uuS6huWHj+WwkSB1cmwg6ZW/5bqm77yM6L+Z5Liq6ZqP5py65pWw5o2u55qE6ZW/5bqm5a6a5Li6IDcg5L2N77yMXG4gKiDkuLrkuoblh4/lsJHnorDmkp7vvIzkvb/nlKggMTYg6L+b5Yi25pWw5a2XXG4gKlxuICogMjY4NDM1NDU2ID0gMiBeIDI4ID0gMHhmZmZmZmZmICsgMVxuICovXG5leHBvcnRzLm1ha2VDYWNoZU51bSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI2ODQzNTQ1NikudG9TdHJpbmcoMTYpO1xufTtcblxuLyoqXG4gKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5ZCm5Lul5a2X56ym5LiyIHMyIOW8gOWktFxuICogQHBhcmFtIHMxIHtTdHJpbmd9XG4gKiBAcGFyYW0gczIge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5pc1N0YXJ0V2l0aCA9IGZ1bmN0aW9uKHMxLCBzMikge1xuICByZXR1cm4gczEuaW5kZXhPZihzMikgPT09IDA7XG59O1xuLyoqXG4gKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5Lul5a2X56ym5LiyIHMyIOe7k+WwvlxuICogQHBhcmFtIHMxIHtTdHJpbmd9XG4gKiBAcGFyYW0gczIge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5pc0VuZFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcbiAgaWYgKCFTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoKSB7XG4gICAgdmFyIGwxID0gczEubGVuZ3RoLCBsMiA9IHMyLmxlbmd0aDtcbiAgICByZXR1cm4gbDEgPj0gbDIgJiYgczEuc3Vic3RyaW5nKGwxIC0gbDIpID09PSBzMjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gczEuZW5kc1dpdGgoczIpO1xuICB9XG59O1xuXG5leHBvcnRzLmFueSA9IGZ1bmN0aW9uKGFyciwgZm4pIHtcbiAgdmFyIGk7XG4gIHZhciBsID0gYXJyLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChmbihhcnJbaV0pKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0cy5pc051bWJlciA9IGZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJztcbn07XG5cbmV4cG9ydHMuaXNOYU4gPSBmdW5jdGlvbih2KSB7XG4gIGlmKGlzTmFOKSB7XG4gICAgcmV0dXJuIGlzTmFOKHYpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2ICE9PSB2O1xuICB9XG59O1xuXG4vKipcbiAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbljIXlkKvlrZfnrKbkuLIgczJcbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNDb250YWluID0gZnVuY3Rpb24gKHMxLCBzMikge1xuICByZXR1cm4gczEuaW5kZXhPZihzMikgPiAtMTtcbn07XG5cbi8qKlxuICog5YWL6ZqG5LiA5Liqb2JqZWN0XG4gKi9cbnZhciBjbG9uZURlZXAgPSBmdW5jdGlvbihvYmopIHtcbiAgdmFyIHN0cjtcbiAgdmFyIG5ld29iaiA9IG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyBbXSA6IHt9O1xuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG4gICAgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgLy/ns7vliJfljJblr7nosaFcbiAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdvYmo7XG59O1xuXG5leHBvcnRzLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcblxuLyoqXG4gKiDojrflj5Z1cmzlj4LmlbAs5LuF6ZmQd2Vi44CBaDVcbiAqL1xudmFyIGdldFVybFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlZ2V4ID0gL1s/Jl0oW149I10rKT0oW14mI10qKS9nO1xuICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBwYXJhbXMgPSB7fTtcbiAgdmFyIG1hdGNoO1xuICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKHVybCkpIHtcbiAgICBwYXJhbXNbbWF0Y2hbMV1dID0gbWF0Y2hbMl07XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn07XG5cbmV4cG9ydHMuZ2V0VXJsUGFyYW1zID0gZ2V0VXJsUGFyYW1zO1xuXG4vKipcbiAqIOWIpOaWreepuuWvueixoVxuICovXG52YXIgaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uKG8pIHtcbiAgaWYoIW8pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgZm9yICh2YXIgayBpbiBvKSB7XG4gICAgaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbmV4cG9ydHMuaXNFbXB0eU9iamVjdCA9IGlzRW1wdHlPYmplY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhc2guanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuLyoqXG4gKiDlr7nosaFtZXJnZVxuICogIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0T2JqLCBhcmdzT2JqKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgIGlmIChuZXh0U291cmNlICE9PSBudWxsKSB7IC8vIFNraXAgb3ZlciBpZiB1bmRlZmluZWQgb3IgbnVsbFxuICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gbmV4dFNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdG87XG4gICAgfSh0YXJnZXRPYmosIGFyZ3NPYmopO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0YXJnZXRPYmosIGFyZ3NPYmopO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2Fzc2lnbi5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxUcmltID0gcmVxdWlyZSgnLi91dGlsVHJpbScpO1xudmFyIHV0aWxTdG9yZSA9IHJlcXVpcmUoJy4vdXRpbFN0b3JlJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIGpzb25VdGlsID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9qc29uVXRpbCcpO1xudmFyIGFwbHVzVXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB0cnlUb0RlY29kZVVSSUNvbXBvbmVudDogZnVuY3Rpb24gKHZhbCwgZGVmYXVsdF92YWwpIHtcbiAgICB2YXIgdiA9IGRlZmF1bHRfdmFsIHx8ICcnO1xuICAgIGlmICh2YWwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodmFsKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHY7XG4gIH0sXG4gIFxuICAvKipcbiAgICog5bCG5b2i5aaCIFwicGFnZUlkPTEyMzsgc2l0ZUlkPTQ1NlwiIOeahOWGheWuueino+aekOS4uiBPYmplY3RcbiAgICogQHBhcmFtIHMge1N0cmluZ31cbiAgICogQHBhcmFtIFtkaWN0XSB7T2JqZWN0fVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBwYXJzZVNlbWljb2xvbkNvbnRlbnQ6IGZ1bmN0aW9uIChzLCBkaWN0LCB1bmRlY29kZSkge1xuICAgIGRpY3QgPSBkaWN0IHx8IHt9O1xuICAgIHZhciBhID0gcy5zcGxpdCgnOycpO1xuICAgIHZhciBqO1xuICAgIHZhciBhX2xlbiA9IGEubGVuZ3RoO1xuICAgIHZhciBhMjtcblxuICAgIGZvciAoaiA9IDA7IGogPCBhX2xlbjsgaisrKSB7XG4gICAgICBhMiA9IGFbal0uc3BsaXQoJz0nKTtcbiAgICAgIHZhciBfdmFsdWUgPSB1dGlsVHJpbS50cmltKGEyLnNsaWNlKDEpLmpvaW4oJz0nKSk7XG4gICAgICBkaWN0W3V0aWxUcmltLnRyaW0oYTJbMF0pIHx8ICcnXSA9IHVuZGVjb2RlID8gX3ZhbHVlIDogdGhpcy50cnlUb0RlY29kZVVSSUNvbXBvbmVudChfdmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBkaWN0O1xuICB9LFxuXG4gIC8qKlxuICAgKiDlsIbkuIDkuKogbm9kZSBsaXN0IOi9rOS4uuaVsOe7hFxuICAgKiBAcGFyYW0gbm9kZXMge05vZGVMaXN0fVxuICAgKiDlj4Lop4HvvJpodHRwOi8vd3d3LnBsYW5hYmMubmV0LzIwMTAvMDEvMDYvYXJndW1lbnRzX3RvX2FycmF5L1xuICAgKi9cbiAgbm9kZUxpc3RUb0FycmF5OiBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICB2YXIgYXJyO1xuICAgIHZhciBsZW5ndGg7XG5cbiAgICB0cnkge1xuICAgICAgLy8gd29ya3MgaW4gZXZlcnkgYnJvd3NlciBleGNlcHQgSUVcbiAgICAgIGFyciA9IFtdLnNsaWNlLmNhbGwobm9kZXMpO1xuICAgICAgcmV0dXJuIGFycjtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIHNsb3dlciwgYnV0IHdvcmtzIGluIElFXG4gICAgICBhcnIgPSBbXTtcbiAgICAgIGxlbmd0aCA9IG5vZGVzLmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcnIucHVzaChub2Rlc1tpXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhcnI7XG4gICAgfVxuICB9LFxuXG4gIGdldExzQ25hOiBmdW5jdGlvbiAoRVRBR19TVE9SQUdFX0tFWSwgZGF0ZSkge1xuICAgIGlmICh1dGlsU3RvcmUuZ2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHZhciBfbHNfY25hID0gJyc7XG4gICAgICB2YXIgX3ZhbHVlID0gdXRpbFN0b3JlLmdldChFVEFHX1NUT1JBR0VfS0VZKTtcbiAgICAgIGlmIChfdmFsdWUpIHtcbiAgICAgICAgdmFyIF9hcnIgPSBfdmFsdWUuc3BsaXQoJ18nKSB8fCBbXTtcbiAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICBfbHNfY25hID0gX2Fyci5sZW5ndGggPiAxICYmIGRhdGUgPT09IF9hcnJbMF0gPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2xzX2NuYSA9IF9hcnIubGVuZ3RoID4gMSA/IF9hcnJbMV0gOiAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChfbHNfY25hKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSxcblxuICAvLyB1dGlsU3RvcmUuc2V0KHRoaXMuRVRBR19TVE9SQUdFX0tFWSwgIHRoaXMudG9kYXkgKyAnXycgKyBlbmNvZGVVUklDb21wb25lbnQoY25hKSk7XG4gIHNldExzQ25hOiBmdW5jdGlvbiAoRVRBR19TVE9SQUdFX0tFWSwgdG9kYXksIGNuYSkge1xuICAgIGlmIChjbmEgJiYgdXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG4gICAgICB1dGlsU3RvcmUuc2V0KEVUQUdfU1RPUkFHRV9LRVksICB0b2RheSArICdfJyArIGVuY29kZVVSSUNvbXBvbmVudChjbmEpKTtcbiAgICB9XG4gIH0sXG4gIFxuICBnZXRMc0ltcHY6IGZ1bmN0aW9uKElNUFJJTlRfU1RPUkFHRV9LRVksIGRhdGUpIHtcbiAgICBpZiAodXRpbFN0b3JlLmdldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG4gICAgICB2YXIgX2xzX2ltcHYgPSAnJztcbiAgICAgIHZhciBfdmFsdWUgPSB1dGlsU3RvcmUuZ2V0KElNUFJJTlRfU1RPUkFHRV9LRVkpO1xuICAgICAgaWYgKF92YWx1ZSkge1xuICAgICAgICB2YXIgX2FyciA9IF92YWx1ZS5zcGxpdCgnfHwnKSB8fCBbXTtcbiAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICBfbHNfaW1wdiA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9sc19pbXB2ID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KF9sc19pbXB2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSxcblxuICBzZXRMc0ltcHY6IGZ1bmN0aW9uKElNUFJJTlRfU1RPUkFHRV9LRVksIHRvZGF5LCBpbXB2KSB7XG4gICAgaWYgKGltcHYgJiYgdXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG4gICAgICB1dGlsU3RvcmUuc2V0KElNUFJJTlRfU1RPUkFHRV9LRVksIHRvZGF5ICsgJ3x8JyArIGVuY29kZVVSSUNvbXBvbmVudChpbXB2KSk7XG4gICAgfVxuICB9LFxuXG5cbiAgc2V0THNSZW1vdGVDZmc6IGZ1bmN0aW9uKFJFTU9URV9DT05GSUdfU1RPUkFHRV9LRVksIHRvZGF5LCBjZmcpIHtcbiAgICBpZiAoY2ZnICYmIHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuICAgICAgdmFyIGNsb25lQ2ZnID0gdXRpbERhc2guY2xvbmVEZWVwKGNmZyk7XG4gICAgICBpZiAodHlwZW9mIGNsb25lQ2ZnID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjbG9uZUNmZyA9IEpTT04uc3RyaW5naWZ5KGNsb25lQ2ZnKTtcbiAgICAgIH1cbiAgICAgIHV0aWxTdG9yZS5zZXQoUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSwgdG9kYXkgKyAnfHwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNsb25lQ2ZnKSk7XG4gICAgfVxuICB9LFxuXG5cbiAgZ2V0THNSZW1vdGVDZmc6IGZ1bmN0aW9uKFJFTU9URV9DT05GSUdfU1RPUkFHRV9LRVksIGRhdGUpIHtcbiAgICBpZiAodXRpbFN0b3JlLmdldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG4gICAgICB2YXIgX2xzX3JlbW90ZUNmZyA9ICcnO1xuICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoX3ZhbHVlKSB7XG4gICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCd8fCcpIHx8IFtdO1xuICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgIF9sc19yZW1vdGVDZmcgPSBfYXJyLmxlbmd0aCA+IDEgJiYgZGF0ZSA9PT0gX2FyclswXSA/IF9hcnJbMV0gOiAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfbHNfcmVtb3RlQ2ZnID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ganNvblV0aWwucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KF9sc19yZW1vdGVDZmcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSxcblxuICBnZXRVcmw6IGZ1bmN0aW9uICh1cmwpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbiAgICB2YXIgZWdVcmwgPSB1cmwgfHwgJy8vbG9nLm1tc3RhdC5jb20vZWcuanMnO1xuICAgIHRyeSB7XG4gICAgICB2YXIgcmhvc3RfdiA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG4gICAgICByaG9zdF92ID0gYXBsdXNVdGlsLmZpeERvbWFpbihyaG9zdF92KS5yZXBsYWNlKC9cXC9cXHcrLmdpZiQvLCcnKTtcbiAgICAgIC8vIHZhciByZWcgPSAvW1thLXp8XFwtfFxcX3wwLTlcXC5dK1thLXp8XFwtfFxcX3wwLTldKDpcXGQqKT8vO1xuICAgICAgLy8gdmFyIGN1c3RvbV9ob3N0ID0gcmhvc3Rfdi5tYXRjaChyZWcpO1xuICAgICAgLy8gaWYgKGN1c3RvbV9ob3N0ICYmIGN1c3RvbV9ob3N0WzBdKSB7XG4gICAgICAvLyAgIC8vIGVnVXJsID0gZWdVcmwucmVwbGFjZShyZWcsIGN1c3RvbV9ob3N0WzBdKTtcbiAgICAgIC8vIH1cbiAgICAgIGVnVXJsID0gcmhvc3RfdiArICcvZWcuanMnO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICB9XG4gICAgcmV0dXJuIGVnVXJsO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDlr7nlrZfnrKbkuLLov5vooYx0cmlt5aSE55CGXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiDljrvmjonlrZfnrKbkuLIgcyDliY3lkI7nmoTnqbrmoLxcbiAqIEBwYXJhbSBzIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHRyaW0ocykge1xuICByZXR1cm4gKHR5cGVvZiBzID09PSAnc3RyaW5nJykgPyBzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKSA6ICcnO1xufTtcbmV4cG9ydHMudHJpbSA9IHRyaW07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsVHJpbS5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNldDogZnVuY3Rpb24gKGssIHYpIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaywgdik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuICAvLyDnu4/ov4d0ZXN05LmL5ZCOZ2V05bqU6K+l5LiN5Lya5pyJ6Zeu6aKYXG4gIGdldDogZnVuY3Rpb24gKGspIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGspO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0sXG4gIHRlc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGVzdEtleSA9ICdncmV5X3Rlc3Rfa2V5JztcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGVzdEtleSwgMSk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0S2V5KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gKGspIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrKTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxTdG9yZS5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOagh+WHhuW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuLy8gdmFyIGZvcm1hdCA9IHJlcXVpcmUoJy4vZm9ybWF0Jyk7XG5cbnZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5leHBvcnRzLm1rUGxhaW5LZXkgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBzX3BsYWluX29iaiArIE1hdGgucmFuZG9tKCk7XG59O1xuZXhwb3J0cy5zX3BsYWluX29iaiA9IHNfcGxhaW5fb2JqO1xuXG4vLyAyMDE2LTA4LTI0IOeQrOWtkOmcgOaxgu+8jGV4cGFyYW1z5Y2V54us5aSE55CG77yMd2luZHZhbmXph4zpnIDopoEgQOiwi+Wjq1xuZXhwb3J0cy5ta1BsYWluS2V5Rm9yRXhwYXJhbXMgPSBmdW5jdGlvbihrZXlfcHJlZml4KSB7XG4gIHZhciBfa2V5ID0ga2V5X3ByZWZpeCB8fCBzX3BsYWluX29iajtcbiAgcmV0dXJuIF9rZXkgKyAnZXhwYXJhbXMnO1xufTtcblxuLyoqXG4gKiBhcnJheSB0byBwYXJhbVxuICog5bCG5LiA5Liq566A5Y2V55qE5pWw57uE6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI/vvIxcbiAqIOWFtuS4reaVsOe7hOS4ulxuICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuICog55qE5b2i5byP44CCXG4gKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuICogQHBhcmFtIGFyciB7QXJyYXl9XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFycjJwYXJhbShhcnIpIHtcbiAgdmFyIGEgPSBbXSxcbiAgICBrLFxuICAgIHYsXG4gICAgaSxcbiAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICBhLnB1c2goay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMCA/IHYgOiAoayArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2KSkpO1xuICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5leHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblxuXG4vKipcbiAqIHBhcmFtIHRvIGFycmF5XG4gKiAyMDE2LTA4LTI0IOaUvuW8gO+8jOeUqOadpeWkhOeQhmV4cGFyYW1zIEDosIvlo6tcbiAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG4gKiBbW1wiYVwiLCBcIjFcIl0sIFtcImJcIiwgXCIyXCJdLCBbXCJjXCIsIFwiM1wiXV1cbiAqXG4gKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMucGFyYW0yYXJyID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG4gICAgaSA9IDAsIGwgPSBhLmxlbmd0aCxcbiAgICBpdGVtLFxuICAgIGFyciA9IFtdO1xuICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhW2ldLnNwbGl0KFwiPVwiKTtcbiAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG4gIH1cblxuICByZXR1cm4gYXJyO1xufTtcblxuZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuICB2YXIgcmV0ID0ge307XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIGk7XG4gIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICByZXRba10gPSB2O1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuLy8g5LuF5pSv5oyB5LiA57qnanNvbue7k+aehFxuZXhwb3J0cy5qc29uTGlrZVN0cjJKU09OID0gZnVuY3Rpb24oanNvblN0cikge1xuICBpZiAoIWpzb25TdHIgfHwgdHlwZW9mIGpzb25TdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIHZhciBzdHIgPSBqc29uU3RyLnJlcGxhY2UoL1snXCJ7fV0rL2csICcnKTtcbiAgdmFyIGFycjEgPSBzdHIuc3BsaXQoJywnKTsgXG4gIHZhciBhcnIyID0gW107IFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycjEubGVuZ3RoOyBpKyspIHtcbiAgICBhcnIyLnB1c2goYXJyMVtpXS5zcGxpdCgnOicpKTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gdGhpcy5hcnIyb2JqKGFycjIpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0cy5maXhEb21haW4gPSBmdW5jdGlvbih1cmwpIHsgIFxuICBpZiAodXJsLmluZGV4T2YoJ2h0dHBzOi8vJykgIT09IC0xIHx8IHVybC5pbmRleE9mKCdodHRwOi8vJykgIT09IC0xKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfSBlbHNlIHtcbiAgICB1cmwgPSAoL15cXC9cXC8vLnRlc3QodXJsKSA/ICcnIDogJy8vJykgKyB1cmw7ICAgIFxuICAgIGlmICgvXlxcL1xcLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcbiAgICAgIHJldHVybiAnaHR0cDonICsgdXJsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ2h0dHBzOicgKyB1cmw7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnRzLmdldEFwcEtleSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZShcImFwbHVzXCIpO1xuICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcGtleScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJZCcpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBLZXknKTtcbn07XG5cbmV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydHMuY2hlY2tEb21haW4gPSBmdW5jdGlvbih1cmwpIHtcbiAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoL14oKGh0dHB8aHR0cHN8JycpOlxcL1xcLyk/KFthLXpBLVowLTldWy1hLXpBLVowLTldezAsNjJ9KFxcLlthLXpBLVowLTldWy1hLXpBLVowLTldezAsNjJ9KSsoOlswLTldezEsNX0pKikkLyk7XG4gIHZhciBtYXRjaGVkID0gKHVybC5tYXRjaChyZWcpIHx8IFtdKVswXTsgIFxuICBpZiAoIXVybCB8fCAhbWF0Y2hlZCkge1xuICAgIHZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbiAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdChcIiFcIikpO1xuICAgIHVsb2coKS50aXBfdyhcInRyYWNrRG9tYWluIGVycm9yLCBwbGVhc2UgY2hlY2sgYXBsdXMtcmhvc3QtdiBzZXR0aW5nLCBjdXJyZW50IHZhbHVlIGlzOiBcIiArIHVybCB8fCAndW5kZWZpbmVkJyk7XG4gICAgdWxvZygpLnRpcF93KFwid2UgYWNjZXB0IHRoZXNlIHRocmVlIHBhdHRlcm5zOlwiKTtcbiAgICB1bG9nKCkudGlwX3coXCJlZzE6IGh0dHBzOi8vdGVzdC1xdHJhY2tpbmcteHh4LmNvbTpwb3J0LCBwb3J0IGlzIG9wdGlvbmFsXCIpO1xuICAgIHVsb2coKS50aXBfdyhcImVnMjogaHR0cDovL3Rlc3QtcXRyYWNraW5nLXh4eC5jb206cG9ydCwgcG9ydCBpcyBvcHRpb25hbFwiKTtcbiAgICB1bG9nKCkudGlwX3coXCJlZzM6IHRlc3QtcXRyYWNraW5nLXh4eC5jb206cG9ydCwgcG9ydCBpcyBvcHRpb25hbFwiKTtcbiAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdChcIiFcIikpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBcbiAgcmV0dXJuIHRydWU7XG59O1xuXG5leHBvcnRzLmNoZWNrT3BlbmlkID0gZnVuY3Rpb24ob2QpIHtcbiAgaWYgKCFvZCkge1xuICAgIHZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbiAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdCgnIScpKTtcbiAgICB1bG9nKCkudGlwX3coXCJRVCBuZWVkIGFuIHVuaXF1ZSBpZCBhcyBRVCdzIGRldmljZWlkISFcIik7XG4gICAgdWxvZygpLnRpcF93KFwic2V0dGluZyBleGFtcGxlczogYXBsdXNfcXVldWUucHVzaCh7YWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLCBhcmd1bWVudHM6IFsnX2Fub255X2lkJywgeHh4eHh4XX0pO1wiKTtcbiAgICB1bG9nKCkudGlwX3coXCJyZWZlcnJlbmNlIGRvY3VtZW50OiBodHRwczovL3QudGIuY24vMWRUSGpUVFFGMFVqT1ROSGlDa2FDU1wiKTtcbiAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdCgnIScpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG5leHBvcnRzLm1hcEV2ZW50U2FtcGxlUmF0ZXMgPSBmdW5jdGlvbihhcnIpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBlYWNoKGFyciwgZnVuY3Rpb24oaXRlbSl7XG4gICAgaWYgKGl0ZW0uZXZlbnRJZHMgJiYgaXRlbS5ldmVudElkcy5sZW5ndGggPiAwKSB7XG4gICAgICBlYWNoKGl0ZW0uZXZlbnRJZHMsIGZ1bmN0aW9uKGVrdil7XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICBldmVudElkOiBla3YsXG4gICAgICAgICAgc2FtcGxpbmdSYXRlOiBpdGVtLnNhbXBsaW5nUmF0ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOaXpeW/l+exu+W3peWFt+mbhuWQiFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBvIDp7XG4gKiAgIGxldmVsOiAnd2Fybi9pbmZvL2xvZycgZGVmYXVsdCBpcyB3YXJuXG4gKiAgIG1zZzogJ21zZydcbiAqIH1cbiAqL1xudmFyIG1ldGFJbmZvID0gcmVxdWlyZSgnQHAvbGliX21ldGEvbWV0YUluZm9NaW5pJyk7XG52YXIgcHJlZml4ID0gJ1tBUExVU10gLS0gJztcbmV4cG9ydHMubG9nZ2VyID0gZnVuY3Rpb24gKG8pIHtcbiAgaWYgKCFvKSB7XG4gICAgbyA9IHt9O1xuICB9XG4gIHZhciBsZXZlbCA9IG8ubGV2ZWwgfHwgJ3dhcm4nO1xuICBjb25zb2xlICYmIGNvbnNvbGVbbGV2ZWxdICYmIGNvbnNvbGVbbGV2ZWxdKHByZWZpeCtvLm1zZyk7XG59O1xuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpe1xuICB2YXIgZGVidWcgPSBtZXRhSW5mbyAmJiBtZXRhSW5mby5nZXRNZXRhSW5mbygnZGVidWcnKTtcbiAgZGVidWcgJiYgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxbcHJlZml4XS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpKTtcbn07XG5cbmV4cG9ydHMuZGVidWdMb2cgPSBmdW5jdGlvbihvKSB7XG4gIHZhciBhcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuICAgIHRoaXMubG9nZ2VyKG8pO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbExvZ2dlci5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIGZvcm1hdCA9IHJlcXVpcmUoJ0B1dGlscy9mb3JtYXQnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cbnZhciBpbmZvID0ge307XG5cbnZhciBPQkpFQ1QgPSAnb2JqZWN0JztcbnZhciBTVFJJTkcgPSAnc3RyaW5nJztcblxuLyoqXG4gKiBAcmV0dXJucyB7e319XG4gKi9cbnZhciBsYXN0X2luZm87XG5mdW5jdGlvbiBnZXRJbmZvKCkge1xuICBsYXN0X2luZm8gPSBpbmZvIHx8IHt9O1xuICByZXR1cm4gaW5mbztcbn07XG5leHBvcnRzLmdldEluZm8gPSBnZXRJbmZvO1xuXG4vLyDlpoLmnpzmnInnvJPlrZjvvIzkvb/nlKjnvJPlrZjnmoTlgLzvvIzmsqHmnInnvJPlrZjliJnku44gRE9NIOS4reivu+WPllxuZnVuY3Rpb24gcUdldCAoKSB7XG4gIHJldHVybiBsYXN0X2luZm8gfHwgZ2V0SW5mbygpO1xufTtcbmV4cG9ydHMucUdldCA9IHFHZXQ7XG5cbi8qKlxuICog5Yqo5oCB6YWN572ubWV0YVxuICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG4gKiDor6bop4HvvJpodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL3Byb2plY3QvcGVyZm9ybWFuY2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga1xuICogQHBhcmFtIHtPYmplY3R9IHZcbiAqL1xuZnVuY3Rpb24gc2V0TWV0YUluZm8gKGssIHYpIHtcbiAgaWYgKCFsYXN0X2luZm8pIHtcbiAgICBsYXN0X2luZm8gPSB7fTtcbiAgfVxuICBpZihrID09PSAnYXBsdXMtaW5qZWN0LXJlY29yZC1nb2tleScpe1xuICAgIGNhdGNoRXhjZXB0aW9uKCd0aGUgQVBJIGFwbHVzLWluamVjdC1yZWNvcmQtZ29rZXkgaXMgZGVwcmVjYXRlZCwgaWYgbmVlZGVkIHBsZWFzZSBjb25jYXQgQVBMVVMgU0RLIHN1cHBvcnRlcicpO1xuICAgIGFwbHVzLnJlY29yZCgnL2luamVjdC5yZWNvcmQuZ29rZXknLCdPVEhFUicsJycpO1xuICB9XG4gIGxhc3RfaW5mb1trXSA9IHY7XG4gIHJldHVybiB0cnVlO1xufTtcbmV4cG9ydHMuc2V0TWV0YUluZm8gPSBzZXRNZXRhSW5mbztcblxuXG52YXIgY2F0Y2hFeGNlcHRpb24gPSBmdW5jdGlvbiAobXNnKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZSAmJiBjb25zb2xlLmVycm9yKG1zZyk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59O1xuZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbiA9IGNhdGNoRXhjZXB0aW9uO1xuXG4vKipcbiAqIGdldCBtZXRhSW5mbyBieSBrZXlcbiAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9XG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbnZhciBnZXRNZXRhSW5mbyA9IGZ1bmN0aW9uKGspIHtcbiAgaWYgKCFsYXN0X2luZm8pIHtcbiAgICBsYXN0X2luZm8gPSB7fTtcbiAgfVxuICByZXR1cm4gbGFzdF9pbmZvW2tdIHx8ICcnO1xufTtcbmV4cG9ydHMuZ2V0TWV0YUluZm8gPSBnZXRNZXRhSW5mbztcblxuXG4vKipcbiAqIOivhuWIq+S4muWKoeWKqOaAgeaLk+WxleWPguaVsFxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgIGxvZ2tleTogbG9na2V5LFxuICogICAgZ21rZXk6IGdta2V5LFxuICogICAgZ29rZXk6IGdva2V5XG4gKiB9XG4gKi9cbnZhciBnZXRVc2VySW5qZWN0R29rZXkgPSBmdW5jdGlvbiAob3B0cykge1xuICB2YXIgdXNlckZuID0gZ2V0TWV0YUluZm8oJ2FwbHVzLWluamVjdC1yZWNvcmQtZ29rZXknKTtcbiAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdXNlckZuKG9wdHMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBvcHRzLmdva2V5O1xuICB9XG59O1xuZXhwb3J0cy5nZXRVc2VySW5qZWN0R29rZXkgPSBnZXRVc2VySW5qZWN0R29rZXk7XG5cbi8qKlxuICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG4gKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcbiAqICAtIGBBcnJheS5wcm90b3R5cGUuY29uY2F0YCBjYWxsZWQgb24gQXJyYXkgdmFsdWVzLlxuICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuICogIEBwYXJhbSBrXG4gKiAgQHBhcmFtIHZcbiAqL1xudmFyIGFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcbiAgLy8gY29uc29sZS5sb2coaywgdik7XG4gIGlmIChrICYmIHYpIHtcbiAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG4gICAgdmFyIHByb2Nlc3NPYmplY3QgPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuICAgICAgICB0b1NldE1ldGFJbmZvKGssIE9iamVjdC5hc3NpZ24oe30sIG9sZF92YWx1ZSwgbmV3X3ZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH07XG4gICAgLy8gYXBsdXMtYXV0by1leHAgfHwgYXBsdXMtYXV0by1jbGtcbiAgICB2YXIgcHJvY2Vzc0FycmF5ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG5ld192YWx1ZSA9IHR5cGVvZiB2ID09PSBTVFJJTkcgPyBKU09OLnBhcnNlKHYpIDogdjtcbiAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBvbGRfdmFsdWUuY29uY2F0KG5ld192YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9O1xuXG4gICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgcHJvY2Vzc0FycmF5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3NPYmplY3QodmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHRvU2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgX3NldE1ldGFJbmZvKGtleSwgdmFsdWUsIHtcbiAgICAgICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBmbGFnO1xuICAgIHZhciBfb2xkVmFsdWUgPSBnZXRNZXRhSW5mbyhrKTtcbiAgICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgT2JqZWN0LmFzc2lnbih7fSwgX29sZFZhbHVlLCBmb3JtYXQucGFyYW0yb2JqKHYpKSk7XG4gICAgICBmbGFnID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGsgPT09ICdhcGx1cy1wYWdlLXByb3BlcnRpZXMnKSB7XG4gICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSB2O1xuICAgICAgaWYgKF9vbGRWYWx1ZSkge1xuICAgICAgICBmb3IgKHZhciBfayBpbiBfb2xkVmFsdWUpIHtcbiAgICAgICAgICBpZiAodltfa10pIHtcbiAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZVtfa10sIHZbX2tdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gX29sZFZhbHVlW19rXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRvU2V0TWV0YUluZm8oaywgcGFnZVByb3BlcnRpZXMpO1xuICAgICAgZmxhZyA9IHRydWU7XG4gICAgfVxuICAgIGlmIChfb2xkVmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgX29sZFZhbHVlID09PSBPQkpFQ1QpIHtcbiAgICAgICAgcHJvY2Vzc09iaihfb2xkVmFsdWUpO1xuICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRtcF9wYXJzZSA9PT0gT0JKRUNUKSB7XG4gICAgICAgICAgICBwcm9jZXNzT2JqKHRtcF9wYXJzZSk7XG4gICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZsYWcpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgdik7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy5hcHBlbmRNZXRhSW5mbyA9IGFwcGVuZE1ldGFJbmZvO1xuXG52YXIgX3NldE1ldGFJbmZvID0gZnVuY3Rpb24gKGFyZzEsIHZhbHVlKSB7XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIGRlZmF1bHRNb2RlID0gJ09WRVJXUklURSc7XG4gIHZhciBtb2RlID0gZGVmYXVsdE1vZGU7XG4gIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcbiAgICBrID0gYXJnMS5tZXRhTmFtZTtcbiAgICB2ID0gYXJnMS5tZXRhVmFsdWU7XG4gICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcbiAgfSBlbHNlIHtcbiAgICBrID0gYXJnMTtcbiAgICB2ID0gdmFsdWU7XG4gIH1cbiAgaWYgKG1vZGUgPT09IGRlZmF1bHRNb2RlKSB7XG4gICAgaWYgKHNldE1ldGFJbmZvKGssIHYpKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgXyQubWV0YV9pbmZvID0gcUdldCgpO1xuICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cbiAgICAgIHZhciBtc2dzID0gWydzZXRNZXRhSW5mbycsIGssIHYsIHt9XTtcbiAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgICAgcmV0dXJuIHJzO1xuICAgIH0gXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFwcGVuZE1ldGFJbmZvKGssIHYpO1xuICB9XG59O1xuZXhwb3J0cy5fc2V0TWV0YUluZm8gPSBfc2V0TWV0YUluZm87XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tZXRhSW5mb01pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcblxudmFyIEZOID0gJ2Z1bmN0aW9uJztcblxudmFyIGdldFB1YnN1YiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHB1YnN1YiA9IGFwbHVzLmFwbHVzX3B1YnN1YiB8fCB7fTtcbiAgdmFyIGZsYWcgPSB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOO1xuICByZXR1cm4gZmxhZyA/IHB1YnN1YiA6ICcnO1xufTtcblxuLyoqXG4gKiDliIblj5Hmtojmga/lt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvUHViTXNnID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5wdWJsaXNoID09PSBGTikge1xuICAgIHB1YnN1Yi5wdWJsaXNoLmFwcGx5KHB1YnN1YiwgYXJncyk7XG4gIH1cbn07XG5cbi8qKlxuICogY2FjaGXlvZPliY3nmoTliIblj5Hlh73mlbDnmoTlt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvQ2FjaGVQdWJzID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5jYWNoZVB1YnMgPT09IEZOKSB7XG4gICAgcHVic3ViLmNhY2hlUHVicy5hcHBseShwdWJzdWIsIGFyZ3MpO1xuICB9XG59O1xuXG4vKipcbiAqIOiuoumYhea2iOaBr+W3peWFt+WHveaVsFxuICogQHBhcmFtcyB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYihbIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXSlcbiAqL1xuZXhwb3J0cy5kb1N1Yk1zZyA9IGZ1bmN0aW9uKGtleSwgY2IpIHtcbiAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIuc3Vic2NyaWJlID09PSBGTikge1xuICAgIHB1YnN1Yi5zdWJzY3JpYmUoa2V5LCBjYik7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUHVic3ViLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogcmVmZXJyZXLlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmFtZVN0b3JhZ2UgPSByZXF1aXJlKCcuL3V0aWxOYW1lU3RvcmFnZScpLm5hbWVTdG9yYWdlO1xuXG5leHBvcnRzLmdldFJlZmVyID0gZnVuY3Rpb24gKE5BTUVfU1RPUkFHRV9LRVlTKSB7XG4gIHJldHVybiBkb2N1bWVudC5yZWZlcnJlciB8fCBuYW1lU3RvcmFnZS5nZXRJdGVtKE5BTUVfU1RPUkFHRV9LRVlTLlJFRkVSUkVSKSB8fCAnJztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUmVmZXJyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvYXBsdXNfYXV0b19jbGsuanNcbiAqIGFwbHVz5LiT6aG56YeH6ZuGOiDpobXpnaLlhYPntKDngrnlh7voh6rliqjph4fpm4ZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyA8bWV0YSBuYW1lPVwiYXBsdXMtYXV0by1jbGtcIiBjb250ZW50PVwie3tsb2drZXk6XCIvYS5iLmNcIix0YWc6XCJkaXZcIixmaWx0ZXI6XCJzY209MTIzNFwifX1cIj5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtcyB7T2JqZWN0fSBvcHRpb25zIHtcbiAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cbiAgICAgKiB9XG4gICAgICovXG4gICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9hYy9tYWluJykoKTtcbiAgICB9XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2FwbHVzX2FjX2luamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHRyYWNrZXJVdGlsID0gcmVxdWlyZSgnQHV0aWxzL3RyYWNrZXJVdGlsJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciB3YXRjaENMSyA9IHJlcXVpcmUoJy4vd2F0Y2hDTEsnKTtcbnZhciBXYXRjaERPTSA9IHJlcXVpcmUoJy4vd2F0Y2hET00nKTtcblxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2xpYl9jb21tb24vY29uZmlnJyk7XG5cbmZ1bmN0aW9uIGluaXQgKGNiKSB7XG4gIHZhciBhcGx1cyA9ICh3aW5kb3cuYXBsdXMgfHwgKHdpbmRvdy5hcGx1cyA9IHt9KSk7XG5cbiAgdmFyIGFwbHVzX2FjX2luaXQgPSBmYWxzZTtcbiAgdmFyIF9jb25maWc7IC8vIGxhc3RDb25maWdcbiAgdmFyIGRvX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIWFwbHVzX2FjX2luaXQpIHtcbiAgICAgIHRyYWNrZXJVdGlsLndyYXAoZnVuY3Rpb24oKXtcbiAgICAgICAgLy8g6aG65bqP5LiN6IO95Lmx77yM546v546v55u45omjIVxuICAgICAgICAvLyAx44CB55uR5ZCsZG9t5Y+Y5YyWXG4gICAgICAgIF9jb25maWcgPSBjb25maWcuZ2V0QXV0b0Nsa0NvbmZpZygpO1xuICAgICAgICB2YXIgd2F0Y2hET007XG4gICAgICAgIGlmIChfY29uZmlnICYmIF9jb25maWcubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHdhdGNoRE9NID0gV2F0Y2hET00uY3JlYXRlKHtcbiAgICAgICAgICAgIGF1dG9DbGtDb25maWc6IF9jb25maWdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3YXRjaERPTS5pbml0KCk7XG4gICAgICAgICAgLy8gMuOAgeebkeWQrOeCueWHu+W5tuaXpeW/l+WPkemAgVxuICAgICAgICAgIHdhdGNoQ0xLLndhdGNoX2NsaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnc2V0TWV0YUluZm8nLCBmdW5jdGlvbiAobWV0YUtleSwgbWV0YVZhdWUsIG9wdHMpIHtcbiAgICAgICAgICBpZiAobWV0YUtleSA9PT0gJ2FwbHVzLWF1dG8tY2xrJykge1xuICAgICAgICAgICAgLy8gMuOAgeiOt+WPlumFjee9ruW5tuWIpOaWremFjee9ruato+ehruaAp++8jGdldEF1dG9FeHBDb25maWflhoXlgZrkuoblvLrmoKHpqozvvIzlh7rplJnlkI7kvJrmiZPljbDplJnor6/kv6Hmga9cbiAgICAgICAgICAgIHZhciBfY29uZmlnMiA9IGNvbmZpZy5nZXRBdXRvQ2xrQ29uZmlnKG1ldGFWYXVlKTtcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShfY29uZmlnMikgPT09IEpTT04uc3RyaW5naWZ5KF9jb25maWcpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIF9jb25maWcgPSBfY29uZmlnMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2F0Y2hDTEsuY2xlYXIoKTtcbiAgICAgICAgICAgIGlmICghb3B0cykge1xuICAgICAgICAgICAgICBvcHRzID0ge1xuICAgICAgICAgICAgICAgIGZyb206ICdzZXRNZXRhSW5mbydcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdhdGNoRE9NICYmIHdhdGNoRE9NLmNsZWFyKG9wdHMpO1xuICAgICAgICAgICAgd2F0Y2hET00gJiYgd2F0Y2hET00uY2xlYXJEb20oe1xuICAgICAgICAgICAgICBhdXRvQ2xrQ29uZmlnOiBfY29uZmlnXG4gICAgICAgICAgICB9LCBvcHRzKTtcbiAgICAgICAgICAgIGlmIChtZXRhVmF1ZSkge1xuICAgICAgICAgICAgICBpZiAod2F0Y2hET00pIHtcbiAgICAgICAgICAgICAgICB3YXRjaERPTS5yZXNldCh7XG4gICAgICAgICAgICAgICAgICBhdXRvQ2xrQ29uZmlnOiBfY29uZmlnXG4gICAgICAgICAgICAgICAgfSwgb3B0cyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2F0Y2hET00gPSBXYXRjaERPTS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgYXV0b0Nsa0NvbmZpZzogX2NvbmZpZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHdhdGNoRE9NLmluaXQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB3YXRjaENMSy53YXRjaF9jbGsoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSwgJ2RvX2luaXQnKTtcbiAgICAgIGFwbHVzX2FjX2luaXQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICAvLyB1dGlsRXZlbnQuRE9NUmVhZHkoZnVuY3Rpb24oKSB7XG4gIC8vIDVz5ZCO6L+Y5rKh5pyJ5a6M5oiQ5Yqg6L2977yM5o6n5Yi25Y+w5omT5Ye65LiA5p2h6K2m5ZGK77yMVE9ETyDnm5Hmjqfov5nlnZflhoXlrrlcbiAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgIGlmICghYXBsdXNfYWNfaW5pdCkge1xuICAgICAgdWxvZygpLncoJ2FwbHVzX2FjX2luaXQgZmFpbGVkISBwbGVhc2UgY2hlY2sgd2hldGhlciBhcGx1c0pzIGlzIGxvYWRlZCBjb3JyZWN0bHkhJyk7XG4gICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAvLyAgIG1zZzogJ2FwbHVzX2FjX2luaXQgZmFpbGVkISBwbGVhc2UgY2hlY2sgd2hldGhlciBhcGx1c0pzIGlzIGxvYWRlZCBjb3JyZWN0bHkhJ1xuICAgICAgLy8gfSk7XG4gICAgfVxuICB9LCA1MDAwKTtcbiAgLy8g5pyJYXBsdXNfcHVic3Vi5LqL5Lu255uR5ZCs6ICF5qih5Z6L55qE5oOF5Ya15LiL77yM55uR5ZCsYXBsdXNSZWFkeeS6i+S7tlxuICB2YXIgXyQgPSBhcGx1cy5fJCB8fCB7fTtcbiAgdmFyIGdfc3BtID0gd2luZG93LmdfU1BNIHx8IHt9O1xuICBpZiAoXyQuc3RhdHVzID09PSAnY29tcGxldGUnICYmIGdfc3BtLnNwbSkge1xuICAgIGRvX2luaXQoKTtcbiAgfVxuICAvLyBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdhcGx1c1JlYWR5JywgZnVuY3Rpb24oc3RhdHVzKSB7XG4gIC8vICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAvLyAgICAgZG9faW5pdCgpO1xuICAvLyAgIH1cbiAgLy8gfSk7XG4gIHZhciBxID0gKHdpbmRvdy5hcGx1c19xdWV1ZSB8fCAod2luZG93LmFwbHVzX3F1ZXVlID0gW10pKTtcbiAgcS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgZG9faW5pdCgnYXBsdXNSZWFkeScpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IoKTtcbiAgfVxuICAvLyB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBhcGx1cyA9ICh3aW5kb3cuYXBsdXMgfHwgd2luZG93LmdvbGRsb2cgfHwgKHdpbmRvdy5hcGx1cyA9IHt9KSk7XG4gIGlmIChhcGx1cy5fYXBsdXNfYWMpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgYXBsdXMuX2FwbHVzX2FjID0ge1xuICAgICAgc3RhdHVzOiAnaW5pdCcsXG4gICAgICBlbGVtZW50U2VsZWN0b3JTaXplTWFwOiB7fVxuICAgIH07XG4gICAgaW5pdChmdW5jdGlvbiAoKSB7XG4gICAgICBhcGx1cy5fYXBsdXNfYWMuc3RhdHVzID0gJ2NvbXBsZXRlJztcbiAgICB9KTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9hYy9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L21vbml0b3IvdHJhY2tlclV0aWwuanNcbiAqIHRyYWNrZXJVdGlsXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnLi91dGlsR29sZGxvZycpO1xuXG4vKipcbiAqIGFwbHVz5Zyo57q/6LCD6K+V77yM5pel5b+X5Lya5Ye6546w5Zyo5Zyo57q/6LCD6K+V5bmz5Y+w5LitXG4gKiBodHRwczovL21sb2cuYWxpYmFiYS1pbmMuY29tL2FwbHVzdHJhY2tcbiAqIEBwYXJhbXMgbyB7T2JqZWN0fSB7XG4gKiAgIG1ldGhvZE5hbWU6IHVwZGF0ZU5leHRQYWdlVXRwYXJhbS9wYWdlQXBwZWFyL29uVVRDYWxsQmFjay4uLlxuICogICBwYXJhbXM6IHsuLi59XG4gKiB9XG4gKi9cbnZhciBkb190cmFja2VyMiA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwYXJhbXMsIG1ldGhvZF9uYW1lKSB7XG4gIHZhciBxID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzX3F1ZXVlJywgW10pO1xuICBxLnB1c2goe1xuICAgIGFjdGlvbjogJ2FwbHVzLl9hcGx1c19jcGx1Z2luX3RyYWNrX2RlYi5tb25pdG9yJyxcbiAgICBhcmd1bWVudHM6IFt7XG4gICAgICBrZXk6ICdBUExVU19QTFVHSU5fREVCVUcnLFxuICAgICAgdGl0bGU6ICdhcGx1c19jb3JlJyxcbiAgICAgIG1zZzogW1xuICAgICAgICAnX2Vycm9yXzptZXRob2ROYW1lPScgKyBtZXRob2RfbmFtZSArICcscGFyYW1zPScgKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG4gICAgICBdLFxuICAgICAgdHlwZTogJ3VwZGF0ZU1zZycsXG4gICAgICBkZXNjcmlwdGlvbjogbWV0aG9kX25hbWUgfHwgJ2FwbHVzX2NvcmUnXG4gICAgfV1cbiAgfSk7XG59O1xuXG52YXIgZG9fdHJhY2tlciA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwYXJhbXMsIG1ldGhvZF9uYW1lLCBjYikge1xuICB2YXIgcSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScsIFtdKTtcbiAgcS5wdXNoKHtcbiAgICBhY3Rpb246IFsnYXBsdXMnLCAnX2FwbHVzX2NwbHVnaW5fbScsIG1ldGhvZF9uYW1lXS5qb2luKCcuJyksXG4gICAgYXJndW1lbnRzOiBbcGFyYW1zLCBjYl1cbiAgfSk7XG59O1xuXG4vKipcbiAqIOiusOW9leKAnUpT6ZSZ6K+v4oCcXG4gKlxuICogQHBhcmFtcyB7T2JqZWN0fSBjb25maWcgOiB7XG4gKiAgIGxvZ2tleTogJ2ZzcC4xLjEnLFxuICogICBtZXNzYWdlOiAnJyxcbiAqICAgZXJyb3I6IGVycm9yLFxuICogICBmaWxlbmFtZTogJ2ZpbGVuYW1lJyxcbiAqIH1cbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLmRvX3RyYWNrZXJfanNlcnJvciA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhcmFtcywgY2IpIHtcbiAgdmFyIG5hbWUgPSAnZG9fdHJhY2tlcl9qc2Vycm9yJztcbiAgZG9fdHJhY2tlcihwYXJhbXMsIG5hbWUsIGNiKTtcbiAgZG9fdHJhY2tlcjIocGFyYW1zLCBuYW1lKTtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnICYmIGNvbnNvbGUpIHtcbiAgICBjb25zb2xlLndhcm4ocGFyYW1zKTtcbiAgfVxufTtcblxuLyoqXG4gKiDljIXoo7nmlrnms5XvvIznu5nmlrnms5XliqB0cnkgY2F0Y2gg5ZKM6ZSZ6K+v55uR5o6nXG4gKiBAcGFyYW0gZm4ge0Z1bmN0aW9ufVxuICogQHBhcmFtIGZuX25hbWUge1N0cmluZ31cbiAqL1xuZXhwb3J0cy53cmFwID0gZnVuY3Rpb24oZm4pIHtcbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRyeSB7XG4gICAgICBmbigpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgZG9fdHJhY2tlcjIoe1xuICAgICAgICBtc2c6IGVyci5tZXNzYWdlIHx8IGVyclxuICAgICAgfSwgJ2V4Y2VwdGlvbicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgfVxuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3RyYWNrZXJVdGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA0NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xudmFyIHV0aWxBdHRyaWJ1dGUgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEF0dHJpYnV0ZScpO1xudmFyIHV0aWxEb20gPSByZXF1aXJlKCdAdXRpbHMvdXRpbERvbScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciBlYWNoTWFwID0gcmVxdWlyZSgnQHV0aWxzL2VhY2hNYXAnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG5cbnZhciB1dGlsRXZlbnQgPSByZXF1aXJlKCcuLi9saWJfYWUvdXRpbC9ldmVudCcpO1xudmFyIHV0aWxfYWNfYWUgPSByZXF1aXJlKCcuLi9saWJfY29tbW9uL3V0aWxfYWNfYWUnKTtcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9saWJfY29tbW9uL2NvbmZpZycpO1xuXG4vLyB2YXIgaXNUb3VjaEVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbi8vICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbi8vICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbyB8fCB7fTtcbi8vICAgdmFyIGFwbHVzVG91Y2ggPSBtZXRhX2luZm9bJ2FwbHVzLXRvdWNoJ107XG4vLyAgIHJldHVybiB1dGlsRG9tLmlzVG91Y2goKSAmJiAoYXBsdXNUb3VjaCA9PT0gJzEnIHx8IGFwbHVzVG91Y2ggPT09ICd0YXAnKTtcbi8vIH07XG5cbnZhciB3aW4gPSB3aW5kb3c7XG52YXIgdGFncyA9IFsnaWZyYW1lJywgJ2h0bWwnLCAnYm9keScsICdoZWFkJ107XG52YXIgTE9HS0VZX0FUVFIgPSBjb25maWcuREFUQV9BUExVU19BQ19LRVk7XG5cbnZhciB0cnlHZXRQYXJhbXMgPSBmdW5jdGlvbihlbCkge1xuICB2YXIgY2xrQ29uZmlncyA9IFtdO1xuICB2YXIgaGFzaF92YWx1ZSA9IGVsID8gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShlbCwgTE9HS0VZX0FUVFIpIDogJyc7XG4gIGlmIChoYXNoX3ZhbHVlKSB7XG4gICAgdmFyIF9hcGx1c19hYyA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hYycpIHx8IHt9O1xuICAgIHZhciBfYWNIYXNoTWFwID0gX2FwbHVzX2FjLl9hY0hhc2hNYXAgfHwge307XG4gICAgZWFjaE1hcChfYWNIYXNoTWFwLCBmdW5jdGlvbiAobG9na2V5LCBhcnIpIHtcbiAgICAgIGVhY2goYXJyLCBmdW5jdGlvbiAodikge1xuICAgICAgICBpZiAodi5oYXNoX3ZhbHVlID09PSBoYXNoX3ZhbHVlKSB7XG4gICAgICAgICAgY2xrQ29uZmlncy5wdXNoKHYuY2xrQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjbGtDb25maWdzOiBjbGtDb25maWdzLFxuICAgIGVsOiBlbFxuICB9O1xufTtcblxudmFyIGdldFBhcmFtcyA9IGZ1bmN0aW9uKGVsKSB7XG4gIHZhciBwYXJhbXMgPSB0cnlHZXRQYXJhbXMoZWwpO1xuICBpZiAocGFyYW1zICYmIHBhcmFtcy5jbGtDb25maWdzICYmIHBhcmFtcy5jbGtDb25maWdzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgd2hpbGUgKChlbCA9IGVsLnBhcmVudE5vZGUpICYmIHV0aWxBcnJheS5pbmRleG9mKHRhZ3MsIGVsLnRhZ05hbWUgPyBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgOiAnaHRtbCcpID09PSAtMSkge1xuICAgIHBhcmFtcyA9IHRyeUdldFBhcmFtcyhlbCk7XG4gICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMuY2xrQ29uZmlncyAmJiBwYXJhbXMuY2xrQ29uZmlncy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbnZhciBoYW5kbGVyX2F1dG9fY2xrID0gZnVuY3Rpb24oZSkge1xuICBlID0gZSB8fCB3aW4uZXZlbnQ7XG4gIHZhciBlbCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcblxuICB2YXIgcGFyYW1zID0gZ2V0UGFyYW1zKGVsKSB8fCB7fTtcbiAgdmFyIGNsa0NvbmZpZ3MgPSBwYXJhbXMuY2xrQ29uZmlncztcbiAgaWYgKHBhcmFtcyAmJiBjbGtDb25maWdzICYmIHBhcmFtcy5lbCl7XG4gICAgZWFjaChjbGtDb25maWdzLCBmdW5jdGlvbiAodikge1xuICAgICAgXG4gICAgICB2YXIgY2xrQ29uZmlnID0gdjtcbiAgICAgIGVsID0gcGFyYW1zLmVsO1xuICAgICAgdmFyIHNwbV9hYiA9IGFwbHVzLnNwbV9hYiA/IGFwbHVzLnNwbV9hYi5qb2luKCcuJykgOiAnMC4wJzsgLy8g5L+d5bqVc3BtQUJcbiAgICAgIHZhciBzcG0gPSBzcG1fYWIgKyAnLjAuMCc7XG4gICAgICB2YXIgc2NtID0gJyc7XG4gICAgICBpZiAod2luLmdfU1BNICYmIHR5cGVvZiB3aW4uZ19TUE0uc3BtID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHNwbSA9IHdpbi5nX1NQTS5zcG0oZWwpO1xuICAgICAgfVxuICAgICAgdmFyIGdva2V5ID0gW107XG4gICAgICB2YXIgZXhhcmdzX29yaWdpbiA9IHtcbiAgICAgICAgLy8gX3hwYXRoOiB1dGlsX2FjX2FlLmdldFhQYXRoKGVsKSxcbiAgICAgIH07XG4gICAgICAvLyDor7vlj5booqvmm53lhYnlhYPntKDkuIrnmoTnibnlrprlsZ7mgKfvvIzov5nkupvnibnlrprlsZ7mgKfmmK/pgJrov4fmm53lhYnln4vngrnkuovlhYjln4vov5vljrvnmoRcbiAgICAgIHZhciBleGFyZ3MgPSB1dGlsX2FjX2FlLmZpbGxQcm9wc0RhdGEoY2xrQ29uZmlnLCBlbCwgZXhhcmdzX29yaWdpbik7XG4gICAgICBleGFyZ3MgPSB1dGlsX2FjX2FlLmZpbGxGaWx0ZXJEYXRhKGNsa0NvbmZpZywgZWwsIGV4YXJnc19vcmlnaW4pO1xuICAgICAgZXhhcmdzID0gdXRpbF9hY19hZS5maWxsU3BtRGF0YShjbGtDb25maWcsIGVsLCBleGFyZ3Nfb3JpZ2luKTtcbiAgICAgIGV4YXJncyA9IHV0aWxEYXNoLmFzc2lnbihleGFyZ3MsIHV0aWxfYWNfYWUuZ2V0RGF0YVRyYWNrZXJQYXJhbXMoZWwpKTtcblxuICAgICAgdmFyIGFjQXV0b1VzZXJGbiA9IGNvbmZpZy5nZXRBdXRvQ2xrVXNlckZuKCk7XG4gICAgICBpZiAoYWNBdXRvVXNlckZuKSB7XG4gICAgICAgIC8vIHRvZG/vvJrmiorphY3nva7lhoXlrrnov5Tlm57lh7rljrtcbiAgICAgICAgdmFyIHJzID0gdXRpbF9hY19hZS5hdXRvVXNlckZuSGFuZGxlcihhY0F1dG9Vc2VyRm4sIGVsLCBjbGtDb25maWcuZWxlbWVudFNlbGVjdG9yLCBjbGtDb25maWcsIGUpO1xuICAgICAgICBpZiAodHlwZW9mIHJzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGlmICh0eXBlb2YgcnMudXNlcmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBleGFyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oZXhhcmdzLCBycy51c2VyZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOWPr+inhuWMluWfi+eCueS8muWKqOaAgeazqOWFpXNwbeOAgXNjbe+8jOivpuingSAvcy9zcmMvcGx1Z2lucy9saWJfd2VidnQvTG9nRy5qczogZ2V0QXR0ckFyZ3NcbiAgICAgICAgICBpZiAocnMuc3BtKSB7XG4gICAgICAgICAgICBzcG0gPSBycy5zcG07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChycy5zY20pIHtcbiAgICAgICAgICAgIHNjbSA9IHJzLnNjbTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocnMgPT09IGZhbHNlKSB7IC8vIOi/lOWbniBmYWxzZSDliJnkuI3kuIrmiqXln4vngrlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdHJhY2stY29tYmluZScpID09PSAnb24nKSB7XG4gICAgICAgIGdva2V5LnB1c2goJ2Nsa2RhdGE9JyArIEpTT04uc3RyaW5naWZ5KFt7XG4gICAgICAgICAgZXhhcmdzOiBleGFyZ3MsXG4gICAgICAgICAgc2NtOiBzY20sXG4gICAgICAgICAgc3BtOiBzcG0sXG4gICAgICAgICAgYXBsdXNDb250ZW50SWQ6ICcnLFxuICAgICAgICB9XSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgayBpbiBleGFyZ3MpIHtcbiAgICAgICAgICBnb2tleS5wdXNoKGsgKyAnPScgKyBleGFyZ3Nba10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBnb2tleS5wdXNoKCdfaXNfYXV0b19jbGs9MScpO1xuICAgICAgdmFyIF9tZXRob2QgPSBjbGtDb25maWcubWV0aG9kIHx8ICdQT1NUJztcbiAgICAgIGlmIChhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdHJhY2stY29tYmluZScpICE9PSAnb24nKSB7XG4gICAgICAgIC8vIF9tZXRob2QgPSAnR0VUJztcbiAgICAgICAgZ29rZXkucHVzaCgnaXNfYXV0bz0xJyk7XG4gICAgICB9XG4gICAgICBpZiAoY2xrQ29uZmlnLmxvZ2tleSAhPT0gJyQkX0FQTFVTJykge1xuICAgICAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcbiAgICAgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgICAgICBhcmd1bWVudHM6IFtjbGtDb25maWcubG9na2V5LCAnQ0xLJywgZm9ybWF0LnBhcmFtMm9iaihnb2tleS5qb2luKCcmJykpLCBfbWV0aG9kXVxuICAgICAgICAgIH0pOyAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICAgICAgYXJndW1lbnRzOiBbY2xrQ29uZmlnLmxvZ2tleSwgJ0NMSycsIGdva2V5LmpvaW4oJyYnKSwgX21ldGhvZF1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2Nsa0NvbmZpZy5sb2drZXkgPT09ICcsIGNsa0NvbmZpZy5sb2drZXkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnRzLndhdGNoX2NsayA9IGZ1bmN0aW9uKCkge1xuICAvKipcbiAgICog57uR5a6aIGRvY3VtZW50IOeahCBtb3VzZWRvd27jgIF0b3VjaCDkuovku7bvvIzlvZPlhYPntKDooqvngrnlh7vmiJZ0b3VjaOaXtuiHquWKqOWPkemAgeWPr+inhuWMluS7pOeurVxuICAgKi9cbiAgaWYgKHV0aWxEb20uaXNUb3VjaCgpKSB7XG4gICAgdXRpbEV2ZW50Lm9uKGRvY3VtZW50LCAndGFwJywgaGFuZGxlcl9hdXRvX2Nsayk7XG4gIH0gZWxzZSB7XG4gICAgdXRpbEV2ZW50Lm9uKGRvY3VtZW50LCAnbW91c2Vkb3duJywgaGFuZGxlcl9hdXRvX2Nsayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHV0aWxEb20uaXNUb3VjaCgpKSB7XG4gICAgdXRpbEV2ZW50LnVuKGRvY3VtZW50LCAndGFwJywgaGFuZGxlcl9hdXRvX2Nsayk7XG4gIH0gZWxzZSB7XG4gICAgdXRpbEV2ZW50LnVuKGRvY3VtZW50LCAnbW91c2Vkb3duJywgaGFuZGxlcl9hdXRvX2Nsayk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfYWMvd2F0Y2hDTEsuanNcbi8vIG1vZHVsZSBpZCA9IDQ3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDmlbDnu4Tlt6XlhbdcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIElFOOS4jeaUr+aMgeaVsOe7hOWOn+eUn+eahGluZGV4T2bvvIzmlYXoh6rooYzlrp7njrDkuIDkuKppbmRleG9mXG4gKiBAcGFyYW0gW0FycmF5XSBhcnJcbiAqIEBwYXJhbSBbT2JqZWN0XSBpdGVtXG4gKiBAcmV0dXJuIFtOdW1iZXJdIGluZGV4XG4gKi9cbmV4cG9ydHMuaW5kZXhvZiA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuICB2YXIgaW5kZXggPSAtMTtcbiAgdHJ5IHtcbiAgICBpbmRleCA9IGFyci5pbmRleE9mKGl0ZW0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChhcnJbal0gPT09IGl0ZW0pIHtcbiAgICAgICAgaW5kZXggPSBqO1xuICAgICAgfVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cbn07XG5leHBvcnRzLml0ZW1NYXRjaCA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuICB2YXIgbWF0Y2hlZCA9IGZhbHNlO1xuICB0cnkge1xuICAgIGlmICghdGhpcy5pc0FycmF5KGFycikpIHtcbiAgICAgIHJldHVybiBtYXRjaGVkO1xuICAgIH1cbiAgICBtYXRjaGVkID0gYXJyLnNvbWUoZnVuY3Rpb24ocykge1xuICAgICAgcmV0dXJuIChzICYmIHMubGVuZ3RoID4gMCkgJiYgaXRlbS5pbmRleE9mKHMpICE9PSAtMTtcbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChpdGVtLmluZGV4T2YoYXJyW2pdKSAhPT0gLTEpIHtcbiAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWF0Y2hlZDtcbn07XG5cbmZ1bmN0aW9uIGlzQXJyYXkobykge1xuICBpZiAoQXJyYXkuaXNBcnJheSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KG8pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAvQXJyYXkvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKTtcbiAgfVxufTtcblxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gZmxhdChhcnIpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBpZiAoaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2ID0gYXJyW2ldO1xuICAgICAgaWYgKGlzQXJyYXkodikpIHtcbiAgICAgICAgLy/pgJLlvZLmiYHlubPljJbmlbDnu4RcbiAgICAgICAgYXJyW2ldID0gZmxhdCh2KTtcbiAgICAgICAgLy8g6YCS5b2S5ZCOIOi/nuaOpeaVsOe7hFxuICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGFycltpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQucHVzaCh2KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0cy5mbGF0ID0gZmxhdDtcblxuZnVuY3Rpb24gZmluZChhcnIsIGNhbGxiYWNrKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGFyci5maW5kKGNhbGxiYWNrKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXRjaCA9IGNhbGxiYWNrKGFycltpXSk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGFycltpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0cy5maW5kID0gZmluZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsQXJyYXkuanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4vdXRpbEF0dHJpYnV0ZScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG5cbnZhciBfaGVhZF9ub2RlO1xudmFyIF9jdXJyZW50Tm9kZTtcblxuZnVuY3Rpb24gZ2V0Q3VycmVudE5vZGUgKCkge1xuICBpZiAoIV9jdXJyZW50Tm9kZSkge1xuICAgIF9jdXJyZW50Tm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiZWFjb24tYXBsdXMnKSB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGItYmVhY29uLWFwbHVzJyk7XG4gIH1cbiAgcmV0dXJuIF9jdXJyZW50Tm9kZTtcbn1cbmV4cG9ydHMuZ2V0Q3VycmVudE5vZGUgPSBnZXRDdXJyZW50Tm9kZTtcblxuLyoqXG4gKiBBcGx1c+aUr+aMgemHh+mbhkNTUOino+WGs+aWueahiFxuICogZnJvbSDkupHmnbAgIDIwMTgtMTItMTcgIGh0dHBzOi8vYW9uZS5hbGliYWJhLWluYy5jb20vcmVxLzE4MjQxMTU0P2Zyb209YWsmZnJvbT1hayZcbiAqL1xuZnVuY3Rpb24gc2V0Tm9uY2UgKG5vZGUpIHtcbiAgdmFyIGN1cnJlbnRfbm9kZSA9IGdldEN1cnJlbnROb2RlKCk7XG4gIHZhciBub25jZSA9IHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUoY3VycmVudF9ub2RlLCAnY3NweCcpO1xuICBpZiAobm9kZSAmJiBub25jZSkge1xuICAgIG5vZGUubm9uY2UgPSBub25jZTtcbiAgfVxufVxuXG4vKipcbiAqIOWcqOW9k+WJjemhtemdoua3u+WKoOS4gOS4qiBqc1xuICogQHBhcmFtIHNyY1xuICogQHBhcmFtIFtodHRwc19zcmNdXG4gKi9cbmV4cG9ydHMuYWRkU2NyaXB0ID0gZnVuY3Rpb24gKHNyYywgaHR0cHNfc3JjLCBpZCkge1xuICB2YXIgcyA9ICdzY3JpcHQnO1xuICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocyk7XG4gIHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICB0LmFzeW5jID0gdHJ1ZTtcbiAgdmFyIGN1cnJlbnRfbm9kZSA9IGdldEN1cnJlbnROb2RlKCk7XG4gIHZhciBoYXNDcm9zc09yaWdpbiA9IGN1cnJlbnRfbm9kZSAmJiBjdXJyZW50X25vZGUuaGFzQXR0cmlidXRlKCdjcm9zc29yaWdpbicpO1xuICBpZiAoaGFzQ3Jvc3NPcmlnaW4pIHtcbiAgICB0LmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XG4gIH1cblxuICB2YXIgdXJsID0gYXBsdXNTdGF0aWMuSFRUUFMgPT09IGxvY2F0aW9uLnByb3RvY29sID8gKGh0dHBzX3NyYyB8fCBzcmMpIDogc3JjO1xuICBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcbiAgfVxuICB0LnNyYyA9IHVybDtcbiAgaWYgKGlkKSB7XG4gICAgdC5pZCA9IGlkO1xuICB9XG4gIHNldE5vbmNlKHQpO1xuICB2YXIgbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdO1xuICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICBpZiAobSkge1xuICAgIG0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodCwgbSk7XG4gIH0gZWxzZSBpZiAoX2hlYWRfbm9kZSkge1xuICAgIF9oZWFkX25vZGUuYXBwZW5kQ2hpbGQodCk7XG4gIH1cbn07XG5cbi8qKlxuICog5Zyo5b2T5YmN6aG16Z2i5re75Yqg5LiA5LiqIGpz77yM5bm25omn6KGM5Zue6LCDXG4gKiBAcGFyYW0gc3JjXG4gKiBAcGFyYW0gW2h0dHBzX3NyY11cbiAqL1xuZXhwb3J0cy5sb2FkU2NyaXB0ID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykge1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICBub2RlLmFzeW5jID0gdHJ1ZTtcblxuICBpZiAoXCJvbmxvYWRcIiBpbiBub2RlKSB7XG4gICAgbm9kZS5vbmxvYWQgPSBvbmxvYWQ7XG4gIH0gZWxzZSB7XG4gICAgdmFyIG9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC9sb2FkZWR8Y29tcGxldGUvLnRlc3Qobm9kZS5yZWFkeVN0YXRlKSkge1xuICAgICAgICBvbmxvYWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIG5vZGUub25yZWFkeXN0YXRlY2hhbmdlID0gb25yZWFkeXN0YXRlY2hhbmdlO1xuXG4gICAgLy8g5LiA5byA5aeL5Lmf5Yik5pat5LiA5qyh54q25oCBXG4gICAgb25yZWFkeXN0YXRlY2hhbmdlKCk7XG4gIH1cblxuICBub2RlLm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG4gICAgb25sb2FkKGUpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG9ubG9hZChlcnJvcikge1xuICAgIG5vZGUub25yZWFkeXN0YXRlY2hhbmdlID0gbm9kZS5vbmxvYWQgPSBub2RlLm9uZXJyb3IgPSBudWxsO1xuICAgIG5vZGUgPSBudWxsO1xuXG4gICAgY2FsbGJhY2soZXJyb3IpO1xuICB9XG5cbiAgbm9kZS5zcmMgPSB1cmw7XG4gIHNldE5vbmNlKG5vZGUpO1xuICAvLyBlZy5qcyBvciByY2ZnLmpzIOWkmuasoeiiq+aPkuWFpeaXtu+8jOW6lOivpeWPquS/neeVmeS4gOS4qiBieSDpgJ/ov5AgXG4gIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNVTSkge1xuICAgIG5vZGUuaWQgPSAnYXBsdXMtc2V0dGluZyc7XG4gICAgbm9kZS50eXBlID1cInRleHQvamF2YXNjcmlwdFwiO1xuICAgIG5vZGUuY2hhcnNldCA9IFwidXRmLThcIjtcblxuICAgIHZhciBzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICBpZiAoc3MgJiYgc3MubGVuZ3RoID4gMCkge1xuICAgICAgZWFjaChzcywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmlkID09PSAnYXBsdXMtc2V0dGluZycpIHtcbiAgICAgICAgICBfaGVhZF9ub2RlLnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgX2hlYWRfbm9kZS5hcHBlbmRDaGlsZChub2RlKTsgIFxufTtcblxuLyoqXG4gKiDliKTmlq3mmK/lkKbmlK/mjIF0b3VjaOS6i+S7tlxuICogQHJldHVybiBbQm9vbGVhbl1cbiAqL1xuZXhwb3J0cy5pc1RvdWNoID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRG9tLmpzXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5a+5bWFw6L+b6KGM6auY5oCn6IO955qE6YGN5Y6GXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWFwLCBjYWxsYmFjaykge1xuICBpZiAoT2JqZWN0ICYmIE9iamVjdC5rZXlzKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhtYXApO1xuICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgazEgPSBrZXlzW2ldO1xuICAgICAgY2FsbGJhY2soazEsIG1hcFtrMV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBrIGluIG1hcCkge1xuICAgICAgY2FsbGJhY2soaywgbWFwW2tdKTtcbiAgICB9XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9lYWNoTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXR0YSA9ICEhZG9jdW1lbnQuYXR0YWNoRXZlbnQ7XG52YXIgYXBsdXNUYXAgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNUYXAnKTtcblxuZnVuY3Rpb24gZ2V0Q3VzdG9tVGFwICgpIHtcbiAgdmFyIF8kID0gYXBsdXMuXyQgfHwge307XG4gIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm8gfHwge307XG4gIHZhciBhcGx1c19jdGFwID0gbWV0YV9pbmZvLmFwbHVzX2N0YXAgfHwge307XG4gIGlmIChhcGx1c19jdGFwICYmIHR5cGVvZiBhcGx1c19jdGFwLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGFwbHVzX2N0YXA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHRhcEV2ZW50QmluZChlbGVtZW50LCBmbikge1xuICAvLyDlpoLmnpzkuJrliqHmlrnmnInoh6rlrprkuYnlrp7njrDnmoR0YXDkuovku7bmj5Lku7bvvIzkvJjlhYjmjInor6Xkuovku7bmiafooYxcbiAgdmFyIGN1c3RvbVRhcCA9IGdldEN1c3RvbVRhcCgpO1xuICBpZiAoY3VzdG9tVGFwKSB7XG4gICAgY3VzdG9tVGFwLm9uKGVsZW1lbnQsIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBhcGx1c1RhcC5vbihlbGVtZW50LCBmbik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHRhcEV2ZW50VW5CaW5kKGVsZW1lbnQsIGZuKSB7XG4gIC8vIOWmguaenOS4muWKoeaWueacieiHquWumuS5ieWunueOsOeahHRhcOS6i+S7tuaPkuS7tu+8jOS8mOWFiOaMieivpeS6i+S7tuaJp+ihjFxuICB2YXIgY3VzdG9tVGFwID0gZ2V0Q3VzdG9tVGFwKCk7XG4gIGlmIChjdXN0b21UYXApIHtcbiAgICBjdXN0b21UYXAudW4oZWxlbWVudCwgZm4pO1xuICB9IGVsc2Uge1xuICAgIGFwbHVzVGFwLnVuKGVsZW1lbnQsIGZuKTtcbiAgfVxufTtcblxuLyoqXG4gKiDnu5Hlrprkuovku7ZcbiAqIEBwYXJhbSBvYmoge1dpbmRvd3xFbGVtZW50fSBET00g5YWD57SgXG4gKiBAcGFyYW0gZXZlbnRfdHlwZVxuICogQHBhcmFtIGZcbiAqL1xuZXhwb3J0cy5vbiA9IGZ1bmN0aW9uKG9iaiwgZXZlbnRfdHlwZSwgZikge1xuICBpZiAoZXZlbnRfdHlwZSA9PT0gJ3RhcCcpIHtcbiAgICB0YXBFdmVudEJpbmQob2JqLCBmKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGF0dGEpIHtcbiAgICBvYmpbJ2F0dGFjaEV2ZW50J10oZXZlbnRfdHlwZSwgZik7XG4gIH0gZWxzZSB7XG4gICAgb2JqWydhZGRFdmVudExpc3RlbmVyJ10oZXZlbnRfdHlwZSwgZik7XG4gIH1cbn07XG5cbi8qKlxuICog56e76Zmk57uR5a6a5LqL5Lu2XG4gKiBAcGFyYW0gb2JqIHtXaW5kb3d8RWxlbWVudH0gRE9NIOWFg+e0oFxuICogQHBhcmFtIGV2ZW50X3R5cGVcbiAqIEBwYXJhbSBmXG4gKi9cbmV4cG9ydHMudW4gPSBmdW5jdGlvbihvYmosIGV2ZW50X3R5cGUsIGYpIHtcbiAgaWYgKGV2ZW50X3R5cGUgPT09ICd0YXAnKSB7XG4gICAgdGFwRXZlbnRVbkJpbmQob2JqLCBmKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGF0dGEpIHtcbiAgICBvYmpbJ2RldGFjaEV2ZW50J10oZXZlbnRfdHlwZSwgZik7XG4gIH0gZWxzZSB7XG4gICAgb2JqWydyZW1vdmVFdmVudExpc3RlbmVyJ10oZXZlbnRfdHlwZSwgZik7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfYWUvdXRpbC9ldmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIHdpbiA9IHdpbmRvdztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgdXRpbEhhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbEhhc2gnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbnZhciBlYWNoTWFwID0gcmVxdWlyZSgnQHV0aWxzL2VhY2hNYXAnKTtcbnZhciB1dGlsRW5jb2RlID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFbmNvZGUnKTtcblxudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnJyk7XG5cbnZhciBpc0FycmF5ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcbmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cbi8qKlxuICogQHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI2NjE4MTgvamF2YXNjcmlwdC1nZXQteHBhdGgtb2YtYS1ub2RlXG4gKiBAcGFyYW0gZWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5nZXRYUGF0aCA9IGZ1bmN0aW9uIChlbCkge1xuICB2YXIgYWxsX25vZGVzID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSxcbiAgICBzZWdzLCBpLCBzaWIsIHVuaXF1ZV9pZF9jb3VudCxcbiAgICBub2RlLCBlbF9pZDtcbiAgZm9yIChzZWdzID0gW107IGVsICYmIGVsLm5vZGVUeXBlID09IDE7IGVsID0gZWwucGFyZW50Tm9kZSkge1xuICAgIGlmIChlbC5pZCkge1xuICAgICAgZWxfaWQgPSBlbC5pZDtcbiAgICAgIHVuaXF1ZV9pZF9jb3VudCA9IDA7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgYWxsX25vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG5vZGUgPSBhbGxfbm9kZXNbaV07XG4gICAgICAgIGlmIChub2RlLmlkICYmIG5vZGUuaWQgPT0gZWxfaWQpIHtcbiAgICAgICAgICB1bmlxdWVfaWRfY291bnQrKztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2Vncy51bnNoaWZ0KGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArIFwiW0BpZD1cXFwiXCIgKyBlbF9pZCArIFwiXFxcIl1cIik7XG4gICAgICBpZiAodW5pcXVlX2lkX2NvdW50ID09IDEpIHtcbiAgICAgICAgc2Vncy51bnNoaWZ0KFwiL1wiKTtcbiAgICAgICAgcmV0dXJuIHNlZ3Muam9pbihcIi9cIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoaSA9IDEsIHNpYiA9IGVsLnByZXZpb3VzU2libGluZzsgc2liOyBzaWIgPSBzaWIucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIGlmIChzaWIudGFnTmFtZSA9PSBlbC50YWdOYW1lKSAgaSsrO1xuICAgICAgfVxuICAgICAgc2Vncy51bnNoaWZ0KGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArIFwiW1wiICsgaSArIFwiXVwiKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNlZ3MubGVuZ3RoID8gXCIvXCIgKyBzZWdzLmpvaW4oXCIvXCIpIDogbnVsbDtcbn07XG5cbnZhciBub2RlbGlzdFRvQXJyYXkgPSBmdW5jdGlvbiAobm9kZWxpc3QsIG5vZGVzKSB7XG4gIGlmICghbm9kZXMgfHwgbm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgbm9kZXMgPSBbXTtcbiAgfVxuICBpZiAobm9kZWxpc3QgJiYgbm9kZWxpc3QubGVuZ3RoID4gMCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZWxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5vZGVzLnB1c2gobm9kZWxpc3RbaV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9kZXM7XG59O1xuZXhwb3J0cy5ub2RlbGlzdFRvQXJyYXkgPSBub2RlbGlzdFRvQXJyYXk7XG5cbi8qKlxuICog5qC55o2u5bqU55So5Z+L55qE5YWD57Sg6YCJ5oup5Zmo6I635Y+W5YWD57SgXG4gKiBAcGFyYW0ge09iamVjdH0ge1xuICogICAgbG9na2V5OiAvYS5iLmMzLFxuICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtkYXRhLXNwbS1jbGlja10nLFxuICogICAgdGFnOiBwLFxuICogICAgZmlsdGVyOiBkYXRhLXNwbS1jbGlja1xuICogfVxuICogQHJldHVybiB7QXJyYXl9IGVsZW1lbnRzXG4gKi9cbmV4cG9ydHMuZ2V0RWxlbWVudHMgPSBmdW5jdGlvbihvLCBfZG9jdW1lbnQpIHtcbiAgdmFyIF9kb2MgPSBfZG9jdW1lbnQgfHwgZG9jO1xuICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgLy8g5pSv5oyBcXVlcnlTZWxlY3RvckFsbOeahOa1j+iniOWZqOaMiei/meS4quadpeWPlu+8jOWQpuWImeaMieS8oOe7n+eahOaWueazlVxuICBpZiAoX2RvYy5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgZWxlbWVudHMgPSBub2RlbGlzdFRvQXJyYXkoX2RvYy5xdWVyeVNlbGVjdG9yQWxsKG8uZWxlbWVudFNlbGVjdG9yKSB8fCBbXSk7XG4gICAgLy8gdmFyIGVsZV9zZWxlY3Rvcl9zZWxmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvLmVsZW1lbnRTZWxlY3Rvcik7XG4gICAgLy8gaWYgKF9kb2N1bWVudCAmJiBlbGVfc2VsZWN0b3Jfc2VsZiA9PT0gX2RvY3VtZW50KSB7XG4gICAgLy8gICBlbGVtZW50cy5wdXNoKF9kb2N1bWVudCk7XG4gICAgLy8gfVxuICB9IGVsc2Uge1xuICAgIHZhciB0YWdzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoby50YWcpO1xuICAgIHZhciBhdHRycyA9IG8uZmlsdGVyLnNwbGl0KCc9Jyk7XG4gICAgdmFyIGF0dHJfa2V5ID0gYXR0cnMubGVuZ3RoID4gMCA/IGF0dHJzWzBdLnRyaW0oKSA6ICcnO1xuICAgIHZhciBhdHRyX3ZhbHVlID0gYXR0cnMubGVuZ3RoID4gMSA/IGF0dHJzWzFdLnRyaW0oKSA6ICcnO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdG1wX3RhZyA9IHRhZ3NbaV07XG4gICAgICB2YXIgdG1wX3ZhbHVlID0gdG1wX3RhZy5nZXRBdHRyaWJ1dGUoYXR0cl9rZXkpO1xuICAgICAgdmFyIGhhc0tleSA9IHRtcF90YWcuaGFzQXR0cmlidXRlKGF0dHJfa2V5KTtcbiAgICAgIGlmIChoYXNLZXkgJiYgKGF0dHJfdmFsdWUgPyBhdHRyX3ZhbHVlID09PSB0bXBfdmFsdWUgOiB0cnVlKSkge1xuICAgICAgICBlbGVtZW50cy5wdXNoKHRtcF90YWcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZWxlbWVudHM7XG59O1xuXG52YXIgaXNEZWJ1ZyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gL2FwbHVzRGVidWc9dHJ1ZS8udGVzdChsb2NhdGlvbi5zZWFyY2gpO1xufTtcbnZhciBJU19ERUJVRyA9IGlzRGVidWcoKTtcblxuZXhwb3J0cy5JU19ERUJVRyA9IElTX0RFQlVHO1xuXG4vKipcbiAqIOivu+WPluiiq+abneWFiS/ngrnlh7vlhYPntKDkuIrnmoTnibnlrprlsZ7mgKfvvIzov5nkupvnibnlrprlsZ7mgKfmmK/pgJrov4fmm53lhYnln4vngrnkuovlhYjln4vov5vljrvnmoTvvIzlpoLov5nkuKrkvovlrZDph4znmoRwcm9wc++8mlxuICogPG1ldGEgbmFtZT1cImFwbHVzLWF1dG8tZXhwXCIgY29udGVudD0nW3tcImxvZ2tleVwiOlwiL2FiYzFcIixcInRhZ1wiOlwiYVwiLFwiZmlsdGVyXCI6XCJkYXRhLXNjbVwiLFwicHJvcHNcIjpbXCJjYXRlXCIsIFwibmFtZVwiXX1dJz5cbiAqIDxtZXRhIG5hbWU9XCJhcGx1cy1hdXRvLWNsa1wiIGNvbnRlbnQ9J1t7XCJsb2drZXlcIjpcIi9hYmMxXCIsXCJ0YWdcIjpcImFcIixcImZpbHRlclwiOlwiZGF0YS1zY21cIixcInByb3BzXCI6W1wiY2F0ZVwiLCBcIm5hbWVcIl19XSc+XG4gKiDov5nkuKrmlrnms5XkvJror7vlj5ZlbGVtZW505LiK55qEbmFtZeWxnuaAp+WSjGNhdGXlsZ7mgKfnmoTlgLxcbiAqIEByZXR1cm4ge09iamVjdH0gb2JqXG4gKi9cbmV4cG9ydHMuZmlsbFByb3BzRGF0YSA9IGZ1bmN0aW9uIChleHBDb25maWcsIGVsZW1lbnQsIG9iaikge1xuICBpZiAoIW9iaikge1xuICAgIG9iaiA9IHt9O1xuICB9XG4gIHRyeSB7XG4gICAgdmFyIF9leHBfcHJvcHMgPSBleHBDb25maWcucHJvcHMgfHwgW107XG4gICAgaWYgKF9leHBfcHJvcHMgJiYgaXNBcnJheShfZXhwX3Byb3BzKSAmJiBfZXhwX3Byb3BzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgX2V4cF9wcm9wcy5sZW5ndGg7IGsrKykge1xuICAgICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSkge1xuICAgICAgICAgIHZhciBrZXkgPSBfZXhwX3Byb3BzW2tdO1xuICAgICAgICAgIHZhciBfdmFsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgICBpZiAodHlwZW9mIF92YWwgIT09IHVuZGVmaW5lZCAmJiBfdmFsICE9PSBudWxsICYmIF92YWwgIT09ICcnKSB7XG4gICAgICAgICAgICB2YXIgY0tleSA9IGtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKTtcbiAgICAgICAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcbiAgICAgICAgICAgICAgb2JqW2NLZXldID0gX3ZhbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9ialtjS2V5XSA9IGVuY29kZVVSSUNvbXBvbmVudChfdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB1bG9nKCkudyhlICYmIGUubWVzc2FnZSk7XG4gICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgIC8vICAgbXNnOiBlICYmIGUubWVzc2FnZVxuICAgIC8vIH0pO1xuICB9XG4gIHJldHVybiBvYmo7XG59O1xuXG4vKipcbiAqIOivu+WPluiiq+abneWFiS/ngrnlh7vlhYPntKDkuIrnmoRmaWx0ZXLlsZ7mgKfvvIzlpoLov5nkuKrkvovlrZDvvJpcbiAqIDxtZXRhIG5hbWU9XCJhcGx1cy1hdXRvLWV4cFwiIGNvbnRlbnQ9J1t7XCJsb2drZXlcIjpcIi9hYmMxXCIsXCJ0YWdcIjpcImFcIixcImZpbHRlclwiOlwiZGF0YS1zY21cIixcInByb3BzXCI6W1wiY2F0ZVwiLCBcIm5hbWVcIl19XSc+XG4gKiA8bWV0YSBuYW1lPVwiYXBsdXMtYXV0by1jbGtcIiBjb250ZW50PSdbe1wibG9na2V5XCI6XCIvYWJjMVwiLFwidGFnXCI6XCJhXCIsXCJmaWx0ZXJcIjpcImRhdGEtc2NtXCIsXCJwcm9wc1wiOltcImNhdGVcIiwgXCJuYW1lXCJdfV0nPlxuICog6L+Z5Liq5pa55rOV5Lya6K+75Y+WZWxlbWVudOS4iueahGRhdGEtc2Nt5bGe5oCn55qE5YC8XG4gKiBAcmV0dXJuIHtPYmplY3R9IG9ialxuICovXG52YXIgZmlsbEZpbHRlckRhdGEgPSBmdW5jdGlvbiAoZXhwQ29uZmlnLCBlbGVtZW50LCBvYmopIHtcbiAgaWYgKCFvYmopIHtcbiAgICBvYmogPSB7fTtcbiAgfVxuICB0cnkge1xuICAgIHZhciBmaWx0ZXIgPSBleHBDb25maWcuZmlsdGVyIHx8ICcnO1xuICAgIHZhciB0bXBzID0gZmlsdGVyLnNwbGl0KCc9Jyk7XG5cbiAgICBpZiAoaXNBcnJheSh0bXBzKSAmJiB0bXBzWzFdKSB7XG4gICAgICBvYmpbdG1wc1swXV0gPSB0bXBzWzFdO1xuICAgIH0gZWxzZSBpZiAodG1wc1swXSAmJiBlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKSB7XG4gICAgICB2YXIgX3ZhbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKHRtcHNbMF0pIHx8ICcnO1xuICAgICAgaWYgKHR5cGVvZiBfdmFsICE9PSB1bmRlZmluZWQgJiYgX3ZhbCAhPT0gbnVsbCAmJiBfdmFsICE9PSAnJykge1xuICAgICAgICBvYmpbdG1wc1swXV0gPSBfdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHVsb2coKS53KGUgJiYgZS5tZXNzYWdlKTtcbiAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgLy8gICBtc2c6IGUgJiYgZS5tZXNzYWdlXG4gICAgLy8gfSk7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5leHBvcnRzLmZpbGxGaWx0ZXJEYXRhID0gZmlsbEZpbHRlckRhdGE7XG5cbnZhciBEQVRBX1RSQUNLRVJfUEFSQU1TID0gJ2RhdGEtdHJhY2tlci1wYXJhbXMnO1xuZXhwb3J0cy5nZXREYXRhVHJhY2tlclBhcmFtcyA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHZhciBycyA9IHt9O1xuICB0cnkge1xuICAgIHZhciBkYXRhVHJhY2tlclBhcmFtcyA9IGZpbGxGaWx0ZXJEYXRhKHtcbiAgICAgIGZpbHRlcjogREFUQV9UUkFDS0VSX1BBUkFNU1xuICAgIH0sIGVsZW1lbnQpO1xuICAgIGlmIChkYXRhVHJhY2tlclBhcmFtcyAmJiBkYXRhVHJhY2tlclBhcmFtc1tEQVRBX1RSQUNLRVJfUEFSQU1TXSkge1xuICAgICAgcnMgPSBKU09OLnBhcnNlKGRhdGFUcmFja2VyUGFyYW1zW0RBVEFfVFJBQ0tFUl9QQVJBTVNdKTsgIFxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBycztcbn07XG5cbi8qKlxuICog6K+75Y+WZXhwQ29uZmln5Lit55qEc3BtQ+OAgXNwbUTkv6Hmga/liLBvYmrkuK1cbiAqIEBwYXJhbSB7Kn0gZXhwQ29uZmlnIFxuICogQHBhcmFtIHsqfSBlbGVtZW50IFxuICogQHBhcmFtIHsqfSBvYmogXG4gKi9cbmV4cG9ydHMuZmlsbFNwbURhdGEgPSBmdW5jdGlvbiAoZXhwQ29uZmlnLCBlbGVtZW50LCBvYmopIHtcbiAgaWYgKCFvYmopIHtcbiAgICBvYmogPSB7fTtcbiAgfVxuICB2YXIgc3BtQiwgc3BtQywgc3BtRDtcbiAgaWYgKGV4cENvbmZpZyAmJiBleHBDb25maWcuc3BtQikge1xuICAgIHNwbUIgPSBleHBDb25maWcuc3BtQjtcbiAgfSBlbHNlIHtcbiAgICBzcG1CID0gZG9jdW1lbnQuYm9keS5kYXRhc2V0ICYmIGRvY3VtZW50LmJvZHkuZGF0YXNldC5wYWdlbmFtZTtcbiAgfVxuXG4gIGlmIChleHBDb25maWcgJiYgZXhwQ29uZmlnLnNwbUMpIHtcbiAgICBzcG1DID0gZXhwQ29uZmlnLnNwbUM7XG4gIH0gZWxzZSB7XG4gICAgc3BtQyA9IGVsZW1lbnQucGFyZW50Tm9kZSAmJiBlbGVtZW50LnBhcmVudE5vZGUuZGF0YXNldCAmJiBlbGVtZW50LnBhcmVudE5vZGUuZGF0YXNldC5zcG1jO1xuICB9XG5cbiAgaWYgKGV4cENvbmZpZyAmJiBleHBDb25maWcuc3BtRCkge1xuICAgIHNwbUQgPSBleHBDb25maWcuc3BtRDtcbiAgfSBlbHNlIHtcbiAgICBzcG1EID0gZWxlbWVudC5kYXRhc2V0ICYmIGVsZW1lbnQuZGF0YXNldC5zcG1kO1xuICB9XG5cbiAgaWYgKGVsZW1lbnQuZGF0YXNldCAmJiBlbGVtZW50LmRhdGFzZXQuYXBsdXNWdFBvcykge1xuICAgIHNwbUQgKz0gKCdfJyArIGVsZW1lbnQuZGF0YXNldC5hcGx1c1Z0UG9zKTtcbiAgfVxuXG4gIGlmIChzcG1CKSB7XG4gICAgb2JqWydzcG1CJ10gPSBzcG1CO1xuICB9XG4gIGlmIChzcG1DKSB7XG4gICAgb2JqWydzcG1DJ10gPSBzcG1DO1xuICB9XG4gIGlmIChzcG1EKSB7XG4gICAgb2JqWydzcG1EJ10gPSBzcG1EO1xuICB9XG4gIHJldHVybiBvYmo7XG59O1xuXG52YXIgaXNNZXRob2QgPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gIHJldHVybiAhIS9eUE9TVHxHRVQkL2kudGVzdChtZXRob2QpO1xufTtcbmV4cG9ydHMuaXNNZXRob2QgPSBpc01ldGhvZDtcblxudmFyIGlzUGtnU2l6ZSA9IGZ1bmN0aW9uIChwa2dTaXplKSB7XG4gIHZhciBpc19wa2dfc2l6ZSA9ICEhL15cXGQrJC8udGVzdChwa2dTaXplKTtcbiAgaWYgKGlzX3BrZ19zaXplICYmIHBhcnNlSW50KHBrZ1NpemUpID4gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5leHBvcnRzLmlzUGtnU2l6ZSA9IGlzUGtnU2l6ZTtcblxuLyoqXG4gKiBhZGRlZCBieSBAUmljaGFyZHzosIvlo6sgaW4gMjAxNy0xMS0yOCDlop7liqDml6Xlv5fmiZPljIXmnaHmlbBcInBrZ1NpemVcIiwg5pel5b+X5Y+R6YCB5pa55byPXCJtZXRob2RcIuS4pOS4qumFjee9rumhuVxuICogQHBhcmFtcyBleHBDb25maWcge09iamVjdH1cbiAqICAgIGVnOiB7XG4gKiAgICAgICBcImxvZ2tleVwiOlwiL2FiYzFcIixcInRhZ1wiOlwiYVwiLFwiZmlsdGVyXCI6XCJkYXRhLXNjbVwiLFwicHJvcHNcIjpbXCJuYW1lXCIsXCJhZ2VcIl0sXCJwa2dTaXplXCI6OSxcIm1ldGhvZFwiOlwiR0VUXCJcbiAqICAgICB9XG4gKiBAcmV0dXJuIHtPYmplY3R9IHttZXRob2Q6ICdHRVQvUE9TVCcsIHBrZ1NpemU6IG51bWJlcn1cbiAqL1xuZXhwb3J0cy5maWx0ZXJFeHBDb25maWdSZXF1ZXN0Q2ZnID0gZnVuY3Rpb24gKGV4cENvbmZpZykge1xuICB2YXIgY2ZnID0gY29uZmlnLmdldERlZmF1bHRSZXF1ZXN0Q2ZnKCkgfHwge307XG4gIHRyeSB7XG4gICAgdmFyIG9iaiA9IGV4cENvbmZpZyB8fCB7fTtcbiAgICBpZiAoaXNNZXRob2Qob2JqLm1ldGhvZCkpIHtcbiAgICAgIGNmZy5tZXRob2QgPSBvYmoubWV0aG9kO1xuICAgIH1cbiAgICBpZiAoaXNQa2dTaXplKG9iai5wa2dTaXplKSkge1xuICAgICAgY2ZnLnBrZ1NpemUgPSBwYXJzZUludChvYmoucGtnU2l6ZSk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdWxvZygpLncoZSAmJiBlLm1lc3NhZ2UpO1xuICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAvLyAgIG1zZzogZSAmJiBlLm1lc3NhZ2VcbiAgICAvLyB9KTtcbiAgfVxuICByZXR1cm4gY2ZnO1xufTtcblxudmFyIHN0cmluZ1RvT2JqZWN0ID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICB2YXIgcGFyYW1zQXJyID0gcGFyYW1zLnNwbGl0KCcmJyk7XG4gIHZhciBvYmogPSB7fTtcbiAgaWYgKHBhcmFtc0Fyci5sZW5ndGggPiAwKSB7XG4gICAgZWFjaChwYXJhbXNBcnIsIGZ1bmN0aW9uICh2KSB7XG4gICAgICB2YXIgdG1wID0gdi5zcGxpdCgnPScpO1xuICAgICAgaWYgKHRtcC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgb2JqW3RtcFswXV0gPSB1dGlsRW5jb2RlLnRyeVRvRW5jb2RlVVJJQ29tcG9uZW50KHRtcFsxXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5cbmV4cG9ydHMuYXV0b1VzZXJGbkhhbmRsZXIgPSBmdW5jdGlvbiAoYXV0b1VzZXJGbiwgZWwsIGVsZW1lbnRTZWxlY3RvciwgYXV0b0NvbmZpZywgZSl7XG4gIHZhciBycyA9IHtcbiAgICB1c2VyZGF0YToge30sXG4gICAgc3BtOiAnJyxcbiAgICBzY206ICcnXG4gIH07XG4gIHRyeSB7XG4gICAgdmFyIHVzZXJQYXJhbXMgPSBhdXRvVXNlckZuKGVsLCBlbGVtZW50U2VsZWN0b3IsIGF1dG9Db25maWcsIGUpO1xuICAgIGlmICh1c2VyUGFyYW1zKSB7XG4gICAgICBpZiAodHlwZW9mIHVzZXJQYXJhbXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodXNlclBhcmFtcyk7XG4gICAgICAgIHJzLnVzZXJkYXRhID0gc3RyaW5nVG9PYmplY3QodXNlclBhcmFtcyk7IC8vIOWtl+espuS4suS8oOmAkuS4jeaUr+aMgeazqOWFpXNwbeOAgXNjbVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXNlclBhcmFtcyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHVzZXJQYXJhbXMudXNlcmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIHJzLnVzZXJkYXRhID0gdHlwZW9mIHVzZXJQYXJhbXMudXNlcmRhdGEgPT09ICdvYmplY3QnID8gdXNlclBhcmFtcy51c2VyZGF0YSA6ICB7fTtcbiAgICAgICAgZWFjaE1hcCh1c2VyUGFyYW1zLnVzZXJkYXRhLCBmdW5jdGlvbiAoaywgdikge1xuICAgICAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcbiAgICAgICAgICAgIHJzLnVzZXJkYXRhW2tdID0gdjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcnMudXNlcmRhdGFba10gPSB1dGlsRW5jb2RlLnRyeVRvRW5jb2RlVVJJQ29tcG9uZW50KHYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJzLnNwbSA9IHVzZXJQYXJhbXMuc3BtO1xuICAgICAgICBycy5zY20gPSB1c2VyUGFyYW1zLnNjbTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIC8vIGNvbnNvbGUubG9nKGUpO1xuICAgIHVsb2coKS53KGUpO1xuICB9XG4gIHJldHVybiBycztcbn07XG5cbnZhciBnZXRFbGVBdHRyaWJ1dGVzID0gZnVuY3Rpb24oZWxlLCBjb25maWcpIHtcbiAgdmFyIGF0dHJpYnV0ZXMgPSAnJztcbiAgaWYgKGVsZSAmJiBjb25maWcpIHtcbiAgICB2YXIgYXR0cl92YWx1ZXMgPSBbZWxlLmdldEF0dHJpYnV0ZShjb25maWcuZmlsdGVyKV07XG4gICAgdmFyIHByb3BzID0gY29uZmlnLnByb3BzIHx8IFtdO1xuICAgIGlmIChwcm9wcykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhdHRyX3ZhbHVlcy5wdXNoKGVsZS5nZXRBdHRyaWJ1dGUocHJvcHNbaV0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXR0cmlidXRlcyA9IGF0dHJfdmFsdWVzLmpvaW4oJ18nKTtcbiAgfVxuICByZXR1cm4gYXR0cmlidXRlcztcbn07XG5cbi8qKlxuICogQHJldHVybiB7T2JqZWN0fSBzcG0ge1xuICogICBhOiBhYWEsXG4gKiAgIGI6IGJiYixcbiAqICAgYzogY2NjLFxuICogICBkOiBkZGQsXG4gKiAgIGU6IHB2aWQsXG4gKiB9XG4gKi9cbnZhciBnZXRTcG1PYmogPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAvLyBjb25zb2xlLnRpbWUoJ2dldFNwbU9iaicpO1xuICB2YXIgc3BtQW5jaG9ySWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zcG0tYW5jaG9yLWlkJyk7XG4gIGlmIChzcG1BbmNob3JJZCkge1xuICAgIHZhciBhbmNob3JfaWQgPSBzcG1BbmNob3JJZC5zcGxpdCgnLicpO1xuICAgIHJldHVybiB7XG4gICAgICBhOiBhbmNob3JfaWRbMF0sXG4gICAgICBiOiBhbmNob3JfaWRbMV0sXG4gICAgICBjOiBhbmNob3JfaWRbMl0sXG4gICAgICBkOiBhbmNob3JfaWRbM10sXG4gICAgICBlOiBhbmNob3JfaWRbNF0sXG4gICAgfTtcbiAgfVxuICAvLyBjb25zb2xlLnRpbWVFbmQoJ2dldFNwbU9iaicpO1xuICByZXR1cm47XG59O1xuZXhwb3J0cy5nZXRTcG1PYmogPSBnZXRTcG1PYmo7XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBjb25maWcgOiB7XG4gKiAgIGNzc1NlbGVjdG9yOiBcIltkYXRhLXRyYWNrZXI9XCJsemRtb2QtbHpkLWFjdC1wcm9kdWN0LXNsb3QzXCJdXCJcbiAqICAgZWxlbWVudFNlbGVjdG9yOiBcIltkYXRhLXRyYWNrZXI9XCJsemRtb2QtbHpkLWFjdC1wcm9kdWN0LXNsb3QzXCJdXCJcbiAqICAgbG9na2V5OiBcIi96YWMudGVzdC5wcm9kdWN0MVwiXG4gKiAgIHNvdXJjZTogXCJhcGx1c193ZWJ2dFwiICAvLyDooajnpLrmnaXoh6rlj6/op4bljJbln4vngrlcbiAqIH1cbiAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyA6IHtcbiAqICAgIGlnbm9yZV9hdHRyOiB0cnVlLFxuICogICAgaW5kZXg6IGksXG4gKiAgICBlbGU6IGVsZVxuICogIH1cbiAqL1xuZXhwb3J0cy5nZXRFbGVtZW50SGFzaCA9IGZ1bmN0aW9uIChjb25maWcsIG9wdGlvbnMpIHtcbiAgdmFyIHNwbSA9IHt9O1xuICBpZiAoY29uZmlnLnNvdXJjZSAhPT0gJ2FwbHVzX3dlYnZ0Jykge1xuICAgIHNwbSA9IGdldFNwbU9iaihvcHRpb25zLmVsZSkgfHwgKHdpbmRvdy5nX1NQTSAgPyB3aW5kb3cuZ19TUE0uZ2V0UGFyYW0ob3B0aW9ucy5lbGUpIDoge30pOyAvLyBUT0RPIOatpOWkhOaAp+iDveaNn+iAl+i+g+Wkp1xuICB9XG5cbiAgdmFyIGhhc2hfdmFsdWVfaW5kZXhzID0gJyc7XG4gIC8vIHNwbeaIlnhwYXRoXG4gIHZhciBFSU5ERVggPSAneCcgKyBvcHRpb25zLmluZGV4O1xuICBpZiAoc3BtLmEgJiYgc3BtLmIgJiYgc3BtLmMgJiYgc3BtLmQpIHtcbiAgICB2YXIgU1BNRCA9IC9eaS8udGVzdChzcG0uZCkgPyBFSU5ERVggOiBzcG0uZDtcbiAgICBoYXNoX3ZhbHVlX2luZGV4cyA9IHNwbS5hICsgJ18nICsgc3BtLmIgKyAnXycgKyBzcG0uYyArICdfJyArIFNQTUQ7XG4gICAgaWYgKHNwbS5lKSB7XG4gICAgICBoYXNoX3ZhbHVlX2luZGV4cyArPSAnXycgKyBzcG0uZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gVE9ETyDlpoLmnpx4cGF0aOayoeacieaAp+iDvemXrumimO+8jOeUqHhwYXRo5Luj5pu/5aaC5LiL6L+Z5q615Luj56CBIEDosIvlo6sgaW4gMjAxOC0xMS0xOVxuICAgIGhhc2hfdmFsdWVfaW5kZXhzID0gRUlOREVYO1xuICAgIGlmIChhcGx1cy5wdmlkKSB7XG4gICAgICBoYXNoX3ZhbHVlX2luZGV4cyArPSBhcGx1cy5wdmlkO1xuICAgIH1cbiAgfVxuICAvLyDooaXlhYVlbGVtZW50U2VsZWN0b3LjgIHlsZ7mgKflj5jljJZcbiAgaWYgKCFvcHRpb25zLmlnbm9yZV9hdHRyKSB7XG4gICAgaGFzaF92YWx1ZV9pbmRleHMgKz0gY29uZmlnLmxvZ2tleSArICdfJztcbiAgICBoYXNoX3ZhbHVlX2luZGV4cyArPSBjb25maWcuZWxlbWVudFNlbGVjdG9yICsgJ18nO1xuICAgIGhhc2hfdmFsdWVfaW5kZXhzICs9IGdldEVsZUF0dHJpYnV0ZXMob3B0aW9ucy5lbGUsIGNvbmZpZyk7ICBcbiAgfVxuICB2YXIgX3RtcCA9IEVJTkRFWCArICdfJyArIHV0aWxIYXNoLmhhc2goaGFzaF92YWx1ZV9pbmRleHMpO1xuICByZXR1cm4gX3RtcDtcbn07XG4vLyBjb3B5IGZyb20gdXRpbEFjLmpzXG5cbi8vIOi/h+a7pOS4jeaDs+S4iuS8oOeahOWxnuaAp1xuZXhwb3J0cy5maWx0ZXJVbmxvYWRBdHRyID0gZnVuY3Rpb24oc3RyKSB7XG4gIGlmIChzdHIpIHtcbiAgICBzdHIgPSBzdHIucmVwbGFjZSgvKGhyZWZ8c3R5bGV8ZGF0YS1zcG0tYW5jaG9yLWlkKT1bXFwnfFxcXCJdW1xcd3xcXFd8XFwuXStbXFwnfFxcXCJdLywgJycpO1xuICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXHNcXD4vZywgJz4nKTtcbiAgICBzdHIgPSBzdHIucmVwbGFjZShuZXcgUmVnRXhwKGNvbmZpZy5EQVRBX0FQTFVTX0FFX0tFWSArICc9W1xcXFxcXCd8XFxcXFxcXCJdXFxcXFxcdytbXFxcXFxcJ3xcXFxcXFxcIl0nKSwgJycpO1xuICAgIHN0ciA9IHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoY29uZmlnLkRBVEFfQVBMVVNfQUNfS0VZICsgJz1bXFxcXFxcJ3xcXFxcXFxcIl1cXFxcXFx3K1tcXFxcXFwnfFxcXFxcXFwiXScpLCAnJyk7XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cbi8qKlxuICog5pu05pawYXBsdXMuX2FjSGFzaE1hcFxuICovXG52YXIgdXBkYXRlTWFwVmFsdWUgPSBmdW5jdGlvbih0bXBIYXNocywgb2JqKSB7XG4gIHZhciB1cEZsYWc7XG4gIHZhciBpID0gMDtcbiAgdmFyIGxlbiA9IHRtcEhhc2hzLmxlbmd0aDtcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICB2YXIgdG1wT2JqID0gdG1wSGFzaHNbaV0gfHwge307XG4gICAgaWYgKHRtcE9iai5oYXNoX3ZhbHVlID09PSBvYmouaGFzaF92YWx1ZSkge1xuICAgICAgdG1wSGFzaHNbaV0gPSBvYmo7XG4gICAgICB1cEZsYWcgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRtcEhhc2hzO1xuICAgIH1cbiAgICBpKys7XG4gIH1cbiAgLy8gZm9yKHZhciBpID0gMDsgaSA8IHRtcEhhc2hzLmxlbmd0aDsgaSsrKSB7XG4gIC8vIH1cbiAgaWYgKCF1cEZsYWcpIHtcbiAgICB0bXBIYXNocy5wdXNoKG9iaik7XG4gIH1cbiAgcmV0dXJuIHRtcEhhc2hzO1xufTtcblxuZnVuY3Rpb24gdXBkYXRlSGFzaHMgKGxvZ2tleSwgb3B0cywgYXBsdXNLZXkpIHtcbiAgdmFyIGhhc2hfdmFsdWUgPSBvcHRzLmhhc2hfdmFsdWU7XG4gIHZhciBHTSA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoYXBsdXNLZXkpIHx8IHt9O1xuICBpZiAoIUdNLmhhc2hfdmFsdWUpIHtcbiAgICBHTS5oYXNoX3ZhbHVlID0ge307XG4gIH1cbiAgaWYgKCFHTS5oYXNoX3ZhbHVlW2xvZ2tleV0pIHtcbiAgICBHTS5oYXNoX3ZhbHVlW2xvZ2tleV0gPSB3aW4uTWFwID8gbmV3IHdpbi5NYXAoKSA6IHt9O1xuICB9XG4gIGlmICh3aW4uTWFwKSB7XG4gICAgdmFyIHRtcFZhbHVlID0gR00uaGFzaF92YWx1ZVtsb2drZXldLmdldChoYXNoX3ZhbHVlKTtcbiAgICBpZiAodG1wVmFsdWUpIHtcbiAgICAgICsrdG1wVmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRtcFZhbHVlID0gMTtcbiAgICB9XG4gICAgR00uaGFzaF92YWx1ZVtsb2drZXldLnNldChoYXNoX3ZhbHVlLCB0bXBWYWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKEdNLmhhc2hfdmFsdWVbbG9na2V5XVtoYXNoX3ZhbHVlXSkge1xuICAgICAgKytHTS5oYXNoX3ZhbHVlW2xvZ2tleV1baGFzaF92YWx1ZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIEdNLmhhc2hfdmFsdWVbbG9na2V5XVtoYXNoX3ZhbHVlXSA9IDE7XG4gICAgfVxuICB9XG4gIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoYXBsdXNLZXksIEdNKTsgXG59O1xuXG4vKipcbiAqIOabtOaWsFwiYXBsdXMuX2FjSGFzaE1hcFwi77yMXCJhcGx1cy5fYWNIYXNoTWFwXCLmoLzlvI/lpoLkuItcbiAqIHtcbiAqICAgJy9hLmIuYzEnOiBbJzM1NTg1YjRjJywgJzM1NTg1YjRkJywgJzM1NTg1YjRlJ10sXG4gKiAgICcvYS5iLmMyJzogWyczNTU4NWI1YycsICczNTU4NWI1ZCcsICczNTU4NWI1ZSddLFxuICogICAnL2EuYi5jMyc6IFsnMzU1ODViNWMnLCAnMzU1ODViNWQnLCAnMzU1ODViNWUnXSxcbiAqIH1cbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2drZXkgPT4gJy9hLmIuYzEnXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqOiB7XG4gICAgICAgaGFzaF92YWx1ZSA9PiAnMzU1ODViNGMnXG4gICAgICAgZWxlOiB4eHhcbiAgIH1cbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlID0+IENMRUFSL0FERC9VUERBVEUgZGVmYXVsdCB2YWx1ZSBpcyBBRERcbiAqL1xudmFyIHVwZGF0ZUhhc2hNYXAgPSBmdW5jdGlvbihsb2drZXksIG9iaiwgdHlwZSwgYXBsdXNLZXkpIHtcbiAgaWYoIXR5cGUpIHtcbiAgICB0eXBlID0gJ0FERCc7XG4gIH1cbiAgaWYgKCFsb2drZXkgfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIEdNID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbChhcGx1c0tleSkgfHwge307XG4gIHZhciBfYWNIYXNoTWFwID0gR00uX2FjSGFzaE1hcCB8fCB7fTtcbiAgdmFyIHRtcEhhc2hzID0gX2FjSGFzaE1hcFtsb2drZXldIHx8IFtdO1xuXG4gIHZhciBjaGVja1ZhbHVlSW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIGxlbiA9IHRtcEhhc2hzLmxlbmd0aDtcbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgdmFyIHRtcE9iaiA9IHRtcEhhc2hzW2ldIHx8IHt9O1xuICAgICAgaWYgKHRtcE9iai5oYXNoX3ZhbHVlID09PSBvYmouaGFzaF92YWx1ZSkge1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG4gICAgLy8gZm9yKHZhciBpID0gMDsgaSA8IHRtcEhhc2hzLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gfVxuICAgIHJldHVybiAtMTtcbiAgfTtcblxuICB2YXIgaW5kZXggPSBjaGVja1ZhbHVlSW5kZXgoKTtcblxuICBpZiAodHlwZSA9PT0gJ0FERCcgJiYgaW5kZXggPT09IC0xKSB7XG4gICAgdG1wSGFzaHMucHVzaChvYmopO1xuICAgIHVwZGF0ZUhhc2hzKGxvZ2tleSwgb2JqLCBhcGx1c0tleSk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ0NMRUFSJyAmJiBpbmRleCA+IC0xKSB7XG4gICAgdG1wSGFzaHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAvLyB0bXBIYXNoc1tpbmRleF0gPSBudWxsO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdVUERBVEUnKSB7XG4gICAgdG1wSGFzaHMgPSB1cGRhdGVNYXBWYWx1ZSh0bXBIYXNocywgb2JqKTtcbiAgfVxuXG4gIF9hY0hhc2hNYXBbbG9na2V5XSA9IHRtcEhhc2hzO1xuICBHTS5fYWNIYXNoTWFwID0gX2FjSGFzaE1hcDtcbiAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbChhcGx1c0tleSwgR00pO1xufTtcblxuXG5leHBvcnRzLnVwZGF0ZUV4cEhhc2hNYXAgPSBmdW5jdGlvbihsb2drZXksIG9iaiwgdHlwZSkge1xuICB1cGRhdGVIYXNoTWFwKGxvZ2tleSwgb2JqLCB0eXBlLCAnX2FwbHVzX2F1dG9fZXhwJyk7XG59O1xuZXhwb3J0cy51cGRhdGVDbGtIYXNoTWFwID0gZnVuY3Rpb24obG9na2V5LCBvYmosIHR5cGUpIHtcbiAgdXBkYXRlSGFzaE1hcChsb2drZXksIG9iaiwgdHlwZSwgJ19hcGx1c19hYycpO1xufTtcblxuLy8gZXhwb3J0cy5kZWJvdW5jZSA9IGZ1bmN0aW9uIChmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbi8vICAgdmFyIHRpbWVvdXQ7XG4vLyAgIHJldHVybiBmdW5jdGlvbigpIHtcbi8vICAgICB0cnkge1xuLy8gICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuLy8gICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuLy8gICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbi8vICAgICAgIH07XG4vLyAgICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbi8vICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbi8vICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbi8vICAgICAgIGlmIChjYWxsTm93KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuLy8gICAgIH0gY2F0Y2ggKGUpIHtcbi8vICAgICB9XG4vLyAgIH07XG4vLyB9O1xuXG52YXIgZ2V0Tm93ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG59O1xuXG4vLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2Vcbi8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuLy8gYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuLy8gYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3Ncbi8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuZXhwb3J0cy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIHRpbWVvdXQsIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcbiAgdmFyIHByZXZpb3VzID0gMDtcbiAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG5cbiAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IGdldE5vdygpO1xuICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gIH07XG5cbiAgdmFyIHRocm90dGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBub3cgPSBnZXROb3coKTtcbiAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICBjb250ZXh0ID0gdGhpcztcbiAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XG4gICAgICBpZiAodGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgfVxuICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdGhyb3R0bGVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICBwcmV2aW91cyA9IDA7XG4gICAgdGltZW91dCA9IGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gdGhyb3R0bGVkO1xufTtcblxuXG4vKipcbiAqIOmqjOivgWhhc2hfdmFsdWXmmK/lkKblnKhcImFwbHVzLl9hY0hhc2hNYXBcIuS4re+8jFwiYXBsdXMuX2FjSGFzaE1hcFwi5qC85byP5aaC5LiLXG4gKiBAcGFyYW0gb3B0cyB7XG4gKiAgIGxvZ2tleTogJy9hdXRvbG9nLmFpZ3VhbmdqaWUuaG9tZV9iYW5uZXJfYXBwJyxcbiAqICAgaGFzaF92YWx1ZTogJzU4MTU1NWI4J1xuICogICBhMzEwcF83NDAzMzcwX2lzaG9wcGluZ19pbmRleF9pMF8zMWE3NjZmOFhPc2hwb18qW2RhdGEtc3BtPWlzaG9wcGluZ19pbmRleF0gLmlzaG9wcGluZ19zbGlkZV9cbiAqICAgYXBsdXNLZXk6ICdfYXBsdXNfYXV0b19leHAnIHx8ICdfYXBsdXNfYWMnXG4gKiB9XG4gKi9cbmV4cG9ydHMuY2hlY2tJc0luSGFzaE1hcCA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gIHZhciBHTSA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwob3B0cy5hcGx1c0tleSkgfHwge307XG4gIHZhciBfaGFzaHMgPSBHTS5oYXNoX3ZhbHVlIHx8IHt9O1xuICB2YXIgX2xvZ2tleUhhc2hzID0gX2hhc2hzW29wdHMubG9na2V5XSB8fCAod2luLk1hcCA/IG5ldyB3aW4uTWFwKCkgOiB7fSk7XG5cbiAgdmFyIHIgPSBfbG9na2V5SGFzaHMgJiYgX2xvZ2tleUhhc2hzLmdldCA/IF9sb2drZXlIYXNocy5nZXQob3B0cy5oYXNoX3ZhbHVlKSA6IF9sb2drZXlIYXNoc1tvcHRzLmhhc2hfdmFsdWVdO1xuICBpZiAociA+IDEpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgX2FjSGFzaE1hcCA9IEdNLl9hY0hhc2hNYXAgfHwge307XG4gIHZhciB2YWx1ZXMgPSBfYWNIYXNoTWFwW29wdHMubG9na2V5XSB8fCBbXTtcbiAgdmFyIGxlbiA9IHZhbHVlcy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAodmFsdWVzW2ldLmhhc2hfdmFsdWUgPT09IG9wdHMuaGFzaF92YWx1ZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cblxuLy8g5pud5YWJ5oiQ5Yqf5omT5Liq5qCHXG5leHBvcnRzLnNldFJlY29yZFN1Y2Nlc3MgPSBmdW5jdGlvbihlbGVtZW50T2JqLCBhcGx1c0RvbUF0dHJLZXkpIHtcbiAgdHJ5IHtcbiAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRPYmogPyBlbGVtZW50T2JqLmVsZW1lbnQgOiB7fTtcbiAgICB2YXIgaGFzaF92YWx1ZSA9IGVsZW1lbnRPYmouaGFzaF92YWx1ZSB8fCAnJztcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXBsdXNEb21BdHRyS2V5LCBoYXNoX3ZhbHVlKTtcbiAgICB9XG4gIH0gY2F0Y2goZSkge31cbn07XG5cbi8vIGV4cG9ydHMuZWFjaE1hcCA9IGZ1bmN0aW9uIChtYXAsIGNhbGxiYWNrKSB7XG4vLyAgIGlmIChPYmplY3QgJiYgT2JqZWN0LmtleXMpIHtcbi8vICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG1hcCk7XG4vLyAgICAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xuLy8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbi8vICAgICAgIHZhciBrMSA9IGtleXNbaV07XG4vLyAgICAgICBjYWxsYmFjayhrMSwgbWFwW2sxXSk7XG4vLyAgICAgfVxuLy8gICB9IGVsc2Uge1xuLy8gICAgIGZvciAodmFyIGsgaW4gbWFwKSB7XG4vLyAgICAgICBjYWxsYmFjayhrLCBtYXBba10pO1xuLy8gICAgIH1cbi8vICAgfVxuLy8gfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9jb21tb24vdXRpbF9hY19hZS5qc1xuLy8gbW9kdWxlIGlkID0gNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8g5qC55o2u5a+G6ZKlc+WvueWtl+espuS4snN0cui/m+ihjOi9rOS5iVxuZXhwb3J0cy5oYXNoID0gZnVuY3Rpb24oc3RyLCBzKSB7XG4gIHZhciBkZWZfdiA9IDEzMTU0MjM5MTE7XG4gIHZhciBoYXNoID0gcyB8fCBkZWZfdiwgaSwgY2g7XG4gIGZvciAoaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNoID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaGFzaCBePSAoKGhhc2ggPDwgNSkgKyBjaCArIChoYXNoID4+IDIpKTtcbiAgfVxuICB2YXIgcnMgPSAoaGFzaCAmIDB4N0ZGRkZGRkYpLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIHJzO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxIYXNoLmpzXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOWPr+inhuWMluWfi+eCuSAtIHdhdGNoIFNpbmdsZSBQYWdlIEFwcGxpY2F0aW9uIFxuICogd2F0Y2ggU1BBJ3MgaGlzdG9yeSBvciBoYXNoIGNoYW5nZSwgdGhlbiBhdXRvIHNlbmRQVlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLnRyeVRvRW5jb2RlVVJJQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbCkge1xuICB2YXIgdiA9IHZhbCB8fCAnJztcbiAgaWYgKHZhbCkge1xuICAgIHRyeSB7XG4gICAgICB2ID0gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudCh2YWwpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICB9XG4gIHJldHVybiB2O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRW5jb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSA1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xudmFyIHV0aWxNZXRhID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxNZXRhJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5leHBvcnRzLkRBVEFfQVBMVVNfQUVfS0VZID0gJ2RhdGEtYXBsdXMtYWUnO1xuZXhwb3J0cy5EQVRBX0FQTFVTX0FDX0tFWSA9ICdkYXRhLWFwbHVzLWNsayc7XG5leHBvcnRzLkRBVEFfQVBMVVNfU1BNX0FOQ0hPUl9JRF9LRVkgPSAnZGF0YS1zcG0tYW5jaG9yLWlkJztcbmV4cG9ydHMuREFUQV9BUExVU19WVF9JVEVNX0lOREVYX0tFWSA9ICdkYXRhLWFwbHVzLXZ0LXBvcyc7XG5cbi8vIOS4jeaUr+aMgW9ic2VydmVy55qE5oOF5Ya15LiL77yM6L2u6K+i6Ze06ZqU77yIbXMpXG5leHBvcnRzLkxPT1BfVElNRSA9IDEwMDA7XG5cbmV4cG9ydHMuZ2V0RGVmYXVsdFJlcXVlc3RDZmcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgcGtnU2l6ZTogMTBcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGdldE1ldGFWYWx1ZSAoa2V5KSB7XG4gIGlmIChhcGx1cyAmJiBhcGx1cy5nZXRNZXRhSW5mbykge1xuICAgIHJldHVybiBhcGx1cy5nZXRNZXRhSW5mbyhrZXkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1dGlsTWV0YS5nZXRNZXRhQ250KGtleSk7XG4gIH1cbn1cblxuLy8g6Ieq5Yqo5pud5YWJ5omT54K5IC0g5Yik5a6a5Y+v6KeG55qE5q+U5L6L546HXG52YXIgZ2V0QXV0b0V4cFZpZXdSYXRlID0gZnVuY3Rpb24oZGVmYXVsdF92YWx1ZSkge1xuICB2YXIgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG4gIHRyeSB7XG4gICAgdmFyIHZpc2libGVfcmF0ZSA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtdmlzaWJsZScpO1xuICAgIGlmICh2aXNpYmxlX3JhdGUpIHtcbiAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KHZpc2libGVfcmF0ZSk7XG4gICAgfVxuICAgIGlmIChyYXRlIDw9IDApIHtcbiAgICAgIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIHJhdGU7XG4gIH1cbn07XG5leHBvcnRzLkFVVE9fQVRfVklFV19SQVRFID0gZ2V0QXV0b0V4cFZpZXdSYXRlKDAuMyk7XG5cbi8vIHZhciBFWFBfREVCT1VOQ0VfRFVSQVRJT04gPSAxMDA7IC8vIGRlYm91Y2UgZHVyYXRpb24gMTAwbXNcblxuLyoqXG4gKiDmnInmlYjmm53lhYnml7bplb/lupXnur8gLSDmr6vnp5LmlbAobXMpXG4gKiBAcGFyYW1zIHtOdW1iZXJ9IGRlZmF1bHRfdmFsdWUgaXMgMzAwbXNcbiAqIEByZXR1cm4ge051bWJlcn0gZHVyYXRpb25cbiAqL1xudmFyIGdldEF1dG9FeHBEdXJhdGlvbiA9IGZ1bmN0aW9uKGRlZmF1bHRfdmFsdWUpIHtcbiAgdmFyIGR1cmF0aW9uID0gZGVmYXVsdF92YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YXIgdG1wX2R1cmF0aW9uID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC1kdXJhdGlvbicpO1xuICAgIHZhciBkdXJhdGlvbl9uID0gcGFyc2VJbnQodG1wX2R1cmF0aW9uKTtcbiAgICBpZiAoKGR1cmF0aW9uX24gKyAnJykgIT09ICdOYU4nKSB7XG4gICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uX247XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gZHVyYXRpb247XG4gIH1cbn07XG5leHBvcnRzLkVYUF9EVVJBVElPTiA9IGdldEF1dG9FeHBEdXJhdGlvbigzMDApOyAvL+m7mOiupDMwMG1zXG5cbi8vIGRlYm91Y2UgZHVyYXRpb24gMTAwbXNcbi8vIGV4cG9ydHMuZ2V0RGVib3VuY2VEdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbi8vICAgcmV0dXJuIEVYUF9ERUJPVU5DRV9EVVJBVElPTjtcbi8vIH07XG5cbi8qKlxuICog6I635Y+W6Ieq5Yqo5pud5YWJ6YWN572u6aG577yM5bm25bCGZmlsdGVy44CBdGFn5ZKMY3NzU2VsZWN0b3LlkIjlubbkuLplbGVtZW50U2VsZWN0b3JcbiAqIFRPRE8gSlNPTi5wYXJzZSDku4XmlK/mjIFJRTjlj4rku6XkuIrmtY/op4jlmaggPT4ganMgYXBpXG4gKiBAcGFyYW1zIGtleSB7U3RyaW5nfSAnYXBsdXMtYXV0by1leHAnLydhcGx1cy1hdXRvLWNsaydcbiAqIEByZXR1cm4ge0FycmF5fSBbe1xuICogICAgbG9na2V5OiAvYS5iLmMxLFxuICogICAgZWxlbWVudFNlbGVjdG9yOiAnZGl2W3NjbT0xMjM0XScsXG4gKiAgICB0YWc6IGRpdixcbiAqICAgIGZpbHRlcjogc2NtPTEyMzRcbiAqICAgIHBvc2l0aW9uU2VsZWN0b3I6IHRydWUvLnBhcmVudENsYXNzbmFtZSAvLyDnm7jlr7nlrprkvY3kuJrliqHln4vngrlcbiAqIH0sIHtcbiAqICAgIGxvZ2tleTogL2EuYi5jMixcbiAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ3Bbc2NtPTIzNDVdLm9uZScsXG4gKiAgICB0YWc6IHAsXG4gKiAgICBmaWx0ZXI6IHNjbT0yMzQ1LFxuICogICAgY3NzU2VsZWN0b3I6IC5vbmVcbiAqIH0sIHtcbiAqICAgIGxvZ2tleTogL2EuYi5jMyxcbiAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ3BbZGF0YS1zcG0tY2xpY2tdJyxcbiAqICAgIHRhZzogcCxcbiAqICAgIGZpbHRlcjogZGF0YS1zcG0tY2xpY2tcbiAqIH1dXG4gKi9cbnZhciBnZXRBdXRvQ29uZmlnID0gZnVuY3Rpb24oY29uZmlnS2V5LCBtZXRhT2JqKSB7XG4gIHZhciBjb25maWdzID0gW107XG4gIC8vIHZhciB0bXBfbG9na2V5cyA9IFtdO1xuICB2YXIgdG1wX3RhZ19maWx0ZXIgPSBbXTtcbiAgdmFyIGFwbHVzQXV0b0V4cDtcbiAgdHJ5IHtcbiAgICBhcGx1c0F1dG9FeHAgPSBtZXRhT2JqIHx8IGdldE1ldGFWYWx1ZShjb25maWdLZXkpO1xuICAgIHZhciB0ZW1wcyA9IFtdO1xuICAgIGlmIChhcGx1c0F1dG9FeHAgJiYgdHlwZW9mIGFwbHVzQXV0b0V4cCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRlbXBzID0gSlNPTi5wYXJzZShhcGx1c0F1dG9FeHApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0ZW1wcyA9IEpTT04ucGFyc2UoYXBsdXNBdXRvRXhwLnJlcGxhY2UoLycvZywgJ1wiJykpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGFwbHVzQXV0b0V4cCA9PT0gJ29iamVjdCcgJiYgYXBsdXNBdXRvRXhwLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgdGVtcHMgPSBhcGx1c0F1dG9FeHA7XG4gICAgfVxuICAgIGlmICh0ZW1wcyAmJiB0ZW1wcy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRtcCA9IHRlbXBzW2ldIHx8IHt9O1xuICAgICAgICB2YXIgbG9na2V5ID0gdG1wLmxvZ2tleSB8fCAnJztcbiAgICAgICAgdmFyIHRhZyA9IHRtcC50YWcgPyB0bXAudGFnIDogJyc7XG4gICAgICAgIHZhciBmaWx0ZXIgPSB0bXAuZmlsdGVyO1xuICAgICAgICB2YXIgY3NzU2VsZWN0b3IgPSB0bXAuY3NzU2VsZWN0b3I7XG4gICAgICAgIHZhciB3aG9sZVNlbGVjdG9yID0gY3NzU2VsZWN0b3IgfHwgKHRhZyAmJiBmaWx0ZXIpO1xuICAgICAgICBpZiAoIWxvZ2tleSB8fCAhd2hvbGVTZWxlY3Rvcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsICcgKyBKU09OLnN0cmluZ2lmeSh0bXApKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAyMDE3LTExLTIzIOaJi+a3mOaOpeWFpeWSjGxhemFkYeS4muWKoemcgOaxgu+8jOWFgeiuuGxvZ2tleemHjeWkjVxuICAgICAgICAvLyBpZiAodXRpbEFycmF5LmluZGV4b2YodG1wX2xvZ2tleXMsIGxvZ2tleSkgPiAtMSkge1xuICAgICAgICAvLyAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsIGxvZ2tleSAnICsgbG9na2V5ICsgJyByZXBlYXRlZCcpO1xuICAgICAgICAvLyB9XG4gICAgICAgIGZpbHRlciA9IHR5cGVvZiBmaWx0ZXIgPT09ICdzdHJpbmcnID8gZmlsdGVyLnNwbGl0KFwiPVwiKSA6IFtdO1xuICAgICAgICB2YXIgdGFnX2ZpbHRlciA9IHRhZztcbiAgICAgICAgaWYgKGZpbHRlci5sZW5ndGggPj0gMikge1xuICAgICAgICAgIHRhZ19maWx0ZXIgKz0gJ1snICsgZmlsdGVyLnNoaWZ0KCkgKyAnPVwiJyArIGRlY29kZVVSSUNvbXBvbmVudChmaWx0ZXIuam9pbignJykpICsgJ1wiXSc7XG4gICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLmxlbmd0aCA9PSAxICYmIGZpbHRlclswXSkge1xuICAgICAgICAgIHRhZ19maWx0ZXIgKz0gJ1snICsgZGVjb2RlVVJJQ29tcG9uZW50KGZpbHRlclswXSkgKyAnXSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNzc1NlbGVjdG9yKSB7XG4gICAgICAgICAgdGFnX2ZpbHRlciArPSBjc3NTZWxlY3RvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRtcC5lbGVtZW50U2VsZWN0b3IgPSB0YWdfZmlsdGVyO1xuICAgICAgICBpZiAodXRpbEFycmF5LmluZGV4b2YodG1wX3RhZ19maWx0ZXIsIHRhZ19maWx0ZXIpID4gLTEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCB0YWdfZmlsdGVyX2Nzc1NlbGVjdG9yICcgKyB0YWdfZmlsdGVyICsgJyByZXBlYXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRtcF9sb2drZXlzLnB1c2gobG9na2V5KTtcbiAgICAgICAgdG1wX3RhZ19maWx0ZXIucHVzaCh0YWdfZmlsdGVyKTtcbiAgICAgICAgY29uZmlncy5wdXNoKHRtcCk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBUT0RPIOebkeaOp+i/meWdl+WGheWuuVxuICAgIHVsb2coKS53KGVycik7XG4gICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgIC8vICAgbXNnOiBlcnJcbiAgICAvLyB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gY29uZmlncztcbiAgfVxufTtcblxuLyoqXG4gKiDojrflj5bmm53lhYnoh6rliqjph4fpm4bnmoTphY3nva7poblcbiAqL1xuZXhwb3J0cy5nZXRBdXRvRXhwQ29uZmlnID0gZnVuY3Rpb24obWV0YU9iaikge1xuICByZXR1cm4gZ2V0QXV0b0NvbmZpZygnYXBsdXMtYXV0by1leHAnLCBtZXRhT2JqKSB8fCBbXTtcbn07XG4vKipcbiAqIOiOt+WPluabneWFieiHquWKqOmHh+mbhueahOmFjee9rumhuVxuICovXG5leHBvcnRzLmdldEF1dG9FeHBVc2VyRm4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFlQXV0b1VzZXJGbiA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtdXNlcmZuJyk7XG4gIGlmIChhZUF1dG9Vc2VyRm4pIHtcbiAgICB2YXIgZm4gPSB3aW5kb3dbYWVBdXRvVXNlckZuXSB8fCBhZUF1dG9Vc2VyRm47XG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGZuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8vIDxtZXRhIG5hbWU9XCJhcGx1cy1hdXRvLWV4cC13YXRjaGRvbVwiIGNvbnRlbnQ9XCJ0aHJvdHRsZVwiIC8+XG5leHBvcnRzLmlzVGhyb3R0bGVXYXRjaERvbSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJzID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgcnMgPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLXdhdGNoZG9tJykgPT09ICd0aHJvdHRsZSc7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gcnM7XG59O1xuLyoqXG4gKiDojrflj5bngrnlh7voh6rliqjph4fpm4bnmoTphY3nva7poblcbiAqL1xuZXhwb3J0cy5nZXRBdXRvQ2xrQ29uZmlnID0gZnVuY3Rpb24obWV0YU9iaikge1xuICByZXR1cm4gZ2V0QXV0b0NvbmZpZygnYXBsdXMtYXV0by1jbGsnLCBtZXRhT2JqKSB8fCBbXTtcbn07XG4vKipcbiAqIOiOt+WPlueCueWHu+iHquWKqOmHh+mbhueahOmFjee9rumhuVxuICovXG5leHBvcnRzLmdldEF1dG9DbGtVc2VyRm4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFjQXV0b1VzZXJGbiA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1jbGstdXNlcmZuJyk7XG4gIGlmKCBhY0F1dG9Vc2VyRm4gKXtcbiAgICB2YXIgZm4gPSB3aW5kb3dbYWNBdXRvVXNlckZuXSB8fCBhY0F1dG9Vc2VyRm47XG4gICAgaWYoIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyApe1xuICAgICAgcmV0dXJuIGZuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfY29tbW9uL2NvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOebkeWQrGRvbeWPmOWMlu+8jOaUtumbhuW+heabneWFieWFg+e0oFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xuXG52YXIgdHJhY2tlclV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdHJhY2tlclV0aWwnKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciB1dGlsRXZlbnQgPSByZXF1aXJlKCcuLi9saWJfYWUvdXRpbC9ldmVudCcpO1xudmFyIHV0aWxfYWNfYWUgPSByZXF1aXJlKCcuLi9saWJfY29tbW9uL3V0aWxfYWNfYWUnKTtcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9saWJfY29tbW9uL2NvbmZpZycpO1xuXG52YXIgd2luID0gd2luZG93O1xudmFyIGRvYyA9IGRvY3VtZW50O1xuXG4vKipcbiAqIOWGhemDqOWvueixoVxuICogQG9iamVjdCAgdGhpcy5fb2JzZXJ2ZXIgICAgICAvLyBNdXRhdGlvbk9ic2VydmVy55uR5ZCs6ICFXG4gKiBAb2JqZWN0ICB0aGlzLl9sb29wX29ic2VydmVyIC8vIOS4jeaUr+aMgU11dGF0aW9uT2JzZXJ2ZXLnmoTmtY/op4jlmajvvIzova7or6Lnm5HlkKzogIVcbiAqIEBvYmplY3QgIHRoaXMuYXV0b0Nsa0NvbmZpZyAgLy8g6YWN572u5Y+C5pWwXG4gKlxuICogQHBhcmFtIHtoYW5kbGVyX2RvbV9jaGFuZ2V9IGNiXG4gKi9cbnZhciBXYXRjaERvbSA9IEJhc2UuZXh0ZW5kKHtcbiAgZWFjaEVsZW1lbnRzOiBmdW5jdGlvbiAoZWxlbWVudHMsIGNsa0NvbmZpZykge1xuICAgIC8vIGNvbnNvbGUubG9nKCdjbGtDb25maWcgPT09PSAnLCBjbGtDb25maWcpO1xuICAgIHZhciBsb2drZXkgPSBjbGtDb25maWcubG9na2V5IHx8ICcnO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBlbGUgPSBlbGVtZW50c1tpXTtcbiAgICAgIGlmIChjbGtDb25maWcuX3Bvc19pZCAmJiAhZWxlLmdldEF0dHJpYnV0ZSgnZGF0YS1hcGx1cy1wb3MtaWQnKSkge1xuICAgICAgICBlbGUuc2V0QXR0cmlidXRlKCdkYXRhLWFwbHVzLXBvcy1pZCcsIGNsa0NvbmZpZy5fcG9zX2lkKTtcbiAgICAgIH1cbiAgICAgIHZhciBfaW5kZXggPSBlbGUuZ2V0QXR0cmlidXRlKGNvbmZpZy5EQVRBX0FQTFVTX0FDX0tFWSk7XG4gICAgICBpZiAoX2luZGV4ICYmIF9pbmRleC5pbmRleE9mKCdfJykgPiAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGlzTmFOKHBhcnNlSW50KF9pbmRleCkpKSB7XG4gICAgICAgIF9pbmRleCA9IGFwbHVzLl9hcGx1c19hYy5lbGVtZW50U2VsZWN0b3JTaXplTWFwW2Nsa0NvbmZpZy5lbGVtZW50U2VsZWN0b3JdKys7XG4gICAgICAgIGVsZS5zZXRBdHRyaWJ1dGUoY29uZmlnLkRBVEFfQVBMVVNfQUNfS0VZLCBfaW5kZXgpO1xuICAgICAgfVxuICAgICAgaWYgKCFhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgY2xrQ29uZmlnLnNwbUIgJiYgY2xrQ29uZmlnLnNwbUMgJiYgY2xrQ29uZmlnLnNwbUQpIHsgICAgICAgIFxuICAgICAgICBlbGUuc2V0QXR0cmlidXRlKGNvbmZpZy5EQVRBX0FQTFVTX1NQTV9BTkNIT1JfSURfS0VZLCBbY2xrQ29uZmlnLnNwbUIsIGNsa0NvbmZpZy5zcG1DLCBjbGtDb25maWcuc3BtRCArICdfJyArIChpKzEpXS5qb2luKCcuJykpO1xuICAgICAgICBlbGUuc2V0QXR0cmlidXRlKGNvbmZpZy5EQVRBX0FQTFVTX1ZUX0lURU1fSU5ERVhfS0VZLCAnJyArIChpKzEpKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGhhc2hfdmFsdWUgPSB1dGlsX2FjX2FlLmdldEVsZW1lbnRIYXNoKGNsa0NvbmZpZywge1xuICAgICAgICBpZ25vcmVfYXR0cjogZmFsc2UsXG4gICAgICAgIGluZGV4OiBfaW5kZXgsXG4gICAgICAgIGVsZTogZWxlXG4gICAgICB9KTtcblxuICAgICAgLy8g6aqM6K+B5piv5ZCm5bey57uP6K6w5b2V6L+H5LqG77yM5aaC5p6c5rKh5pyJ6K6w5b2V5omN57un57utXG4gICAgICAvLyB2YXIgaXNSZWNvcmQgPSB1dGlsRWxlbWVudEFjLmNoZWNrSXNSZWNvcmQoZWxlLCBoYXNoX3ZhbHVlLCBjb25maWcuREFUQV9BUExVU19BQ19LRVkpO1xuICAgICAgaWYgKCF1dGlsX2FjX2FlLmNoZWNrSXNJbkhhc2hNYXAoe1xuICAgICAgICBsb2drZXk6IGxvZ2tleSxcbiAgICAgICAgaGFzaF92YWx1ZTogaGFzaF92YWx1ZSxcbiAgICAgICAgYXBsdXNLZXk6ICdfYXBsdXNfYWMnXG4gICAgICB9KSkge1xuICAgICAgICB2YXIgX29iaiA9IHtcbiAgICAgICAgICBjbGtDb25maWc6IGNsa0NvbmZpZyxcbiAgICAgICAgICBoYXNoX3ZhbHVlOiBoYXNoX3ZhbHVlLFxuICAgICAgICAgIGVsZW1lbnQ6IGVsZSxcbiAgICAgICAgICBzdGF0dXM6IDAsICAgLy8g5Yid5aeL54q25oCBXG4gICAgICAgICAgZWxlbWVudFNlbGVjdG9yOiBjbGtDb25maWcuZWxlbWVudFNlbGVjdG9yLFxuICAgICAgICB9O1xuICAgICAgICAvLyDlsIblvoXngrnlh7vlhYPntKDlrZjlhaVhcGx1cy5fYXBsdXNfYWMuX2FjSGFzaE1hcFxuICAgICAgICB1dGlsX2FjX2FlLnVwZGF0ZUNsa0hhc2hNYXAobG9na2V5LCBfb2JqLCAnQUREJyk7XG4gICAgICAgIHV0aWxfYWNfYWUuc2V0UmVjb3JkU3VjY2Vzcyhfb2JqLCBjb25maWcuREFUQV9BUExVU19BQ19LRVkpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIOivpeaWueazleiiq29ic2VydmVy5oiW6L2u6K+i6LCD55SoXG4gICAqIOWinumHj+abtOaWsOW+heabneWFieeahOWFg+e0oO+8jOWIneWni+WMluWFg+e0oOWdkOagh1xuICAgKiDlubblsIblvoXmm53lhYnlhYPntKDlrZjlhaVhcGx1cy5fYXBsdXNfYWMuX3RvZG9fYWNfZWxlbWVudHPvvIjlubPooYznmoR3YXRjaEV4cG9zdXJlLmpz5Lya55uR5ZCs56qX5Y+j5Y+Y5YyW5p2l55uR5o6n6L+Z5Lqb5b6F5pud5YWJ5YWD57Sg5piv5ZCm5pud5YWJ77yJXG4gICAqL1xuICBoYW5kbGVyX2RvbV9jaGFuZ2U6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdmFyIGF1dG9DbGtDb25maWcgPSBfc2VsZi5hdXRvQ2xrQ29uZmlnIHx8IFtdO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXV0b0Nsa0NvbmZpZy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIGNsa0NvbmZpZyA9IGF1dG9DbGtDb25maWdbal07XG4gICAgICBpZiAoIWFwbHVzLl9hcGx1c19hYy5lbGVtZW50U2VsZWN0b3JTaXplTWFwW2Nsa0NvbmZpZy5lbGVtZW50U2VsZWN0b3JdKSB7XG4gICAgICAgIGFwbHVzLl9hcGx1c19hYy5lbGVtZW50U2VsZWN0b3JTaXplTWFwW2Nsa0NvbmZpZy5lbGVtZW50U2VsZWN0b3JdID0gMTtcbiAgICAgIH1cbiAgICAgIHZhciBlbGVtZW50cyA9IHV0aWxfYWNfYWUuZ2V0RWxlbWVudHMoY2xrQ29uZmlnLCBkb2MpOyAvLyDojrflj5bmiYDmnIl4eHjmoIfnrb7kuIvluKbmnIl5eXnlsZ7mgKfnmoTlhYPntKBcbiAgICAgIF9zZWxmLmVhY2hFbGVtZW50cyhlbGVtZW50cywgY2xrQ29uZmlnKTtcbiAgICB9XG4gIH0sXG5cbiAgdGhyb3R0bGVfaGFuZGxlcl9kb21fY2hhbmdlOiB1dGlsX2FjX2FlLnRocm90dGxlKGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmhhbmRsZXJfZG9tX2NoYW5nZSgpO1xuICB9LCAyMDApLFxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJZvYnNlcnZlcuebkeWQrO+8jOebkeWQrGRvbeWPmOWMllxuICAgKiBAcGFyYW0ge01PYnNlcnZlcn0gTU9ic2VydmVyXG4gICAqIEBwYXJhbSB7aGFuZGxlcl9kb21fY2hhbmdlfSBjYlxuICAgKi9cbiAgaW5pdF9vYnNlcnZlcjogZnVuY3Rpb24oTU9ic2VydmVyLCBjYikge1xuICAgIC8vIOWIm+W7uuinguWvn+iAheWvueixoVxuICAgIHZhciBfb2JzZXJ2ZXIgPSBuZXcgTU9ic2VydmVyKGZ1bmN0aW9uKCkgeyAvLyBUT0RP5b2i5Y+CbXV0YXRpb25zXG4gICAgICAvLyBUT0RP5aKe6YeP5pu05pawIFZTIOWFqOmHj+abtOaWsFxuICAgICAgLy8gbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24obXV0YXRpb24pIHtcbiAgICAgIC8vIH0pO1xuICAgICAgdHJhY2tlclV0aWwud3JhcChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgX2FwbHVzX2FjID0gYXBsdXMuX2FwbHVzX2FjIHx8IHt9O1xuICAgICAgICArK19hcGx1c19hYy5vYnNlcnZlcl90aW1lcztcbiAgICAgICAgY2IoKTtcbiAgICAgIH0sICdpbml0X29ic2VydmVyX2luaXRfZWxlbWVudHMnKTtcbiAgICB9KTtcbiAgICAvLyDphY3nva7op4Llr5/pgInpobk6XG4gICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgIGF0dHJpYnV0ZXM6IHRydWUsICAgIC8vIOWxnuaAp+eahOWPmOWKqCAgVE9ETyDpqozor4FhcGx1c+iHqui6q+aPkuWFpeeahOeahOS4gOS6m+WxnuaAp+WPmOWMllxuICAgICAgY2hpbGRMaXN0OiB0cnVlLCAgICAgLy8g5a2Q6IqC54K555qE5Y+Y5YqoXG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLCAvLyDoioLngrnlhoXlrrnmiJboioLngrnmlofmnKznmoTlj5jliqhcbiAgICAgIHN1YnRyZWU6IHRydWUsICAgICAgIC8vIOaJgOacieWQjuS7o+iKgueCueeahOWPmOWKqFxuICAgIH07XG5cbiAgICAvLyDkvKDlhaXnm67moIfoioLngrnlkozop4Llr5/pgInpoblcbiAgICBfb2JzZXJ2ZXIub2JzZXJ2ZShkb2MuYm9keSwgY29uZmlnKTtcbiAgICBpZiAodXRpbF9hY19hZS5JU19ERUJVRykge1xuICAgICAgdWxvZygpLncoJ2FwbHVzX2FjIGluaXQgTXV0YXRpb25PYnNlcnZlciBzdWNjZXNzIScpO1xuICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgLy8gICBtc2c6ICdhcGx1c19hYyBpbml0IE11dGF0aW9uT2JzZXJ2ZXIgc3VjY2VzcyEnXG4gICAgICAvLyB9KTtcbiAgICB9XG4gICAgdGhpcy5fb2JzZXJ2ZXIgPSBfb2JzZXJ2ZXI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOmSiOWvueS4jeaUr+aMgW9ic2VydmVy55qE5rWP6KeI5Zmo55So6L2u6K+i55qE5pa55byP55uR5ZCsZG9t5Y+Y5YyWXG4gICAqIEBwYXJhbSB7aGFuZGxlcl9kb21fY2hhbmdlfSBjYlxuICAgKi9cbiAgaW5pdF93YXRjaF9kb206IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdmFyIF9hcGx1c19hYyA9IGFwbHVzLl9hcGx1c19hYyB8fCB7fTtcbiAgICBfc2VsZi5fbG9vcF9vYnNlcnZlciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIGlmIChfYXBsdXNfYWMuY3VycmVudF93aW5fc3RhdHVzICE9PSAnYmx1cicpIHtcbiAgICAgICAgaWYgKHV0aWxfYWNfYWUuSVNfREVCVUcpIHtcbiAgICAgICAgICB1bG9nKCkudygnd2F0Y2hfZG9tIGluIGFjIExPT1BfVElNRSBpcyAnICsgY29uZmlnLkxPT1BfVElNRSArICdtcyB0b3RhbDogJyArICsrX2FwbHVzX2FjLndhdGNoX3RpbWVzKTtcbiAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgLy8gICBtc2c6ICd3YXRjaF9kb20gaW4gYWMgTE9PUF9USU1FIGlzICcgKyBjb25maWcuTE9PUF9USU1FICsgJ21zIHRvdGFsOiAnICsgKytfYXBsdXNfYWMud2F0Y2hfdGltZXNcbiAgICAgICAgICAvLyB9KTtcbiAgICAgICAgfVxuICAgICAgICBfc2VsZi50aHJvdHRsZV9oYW5kbGVyX2RvbV9jaGFuZ2UoKTsgLy8g5aKe6YeP5pu05paw5b6F5pud5YWJ55qE5YWD57Sg77yM5bm25Yid5aeL5YyW5YWD57Sg5Z2Q5qCHXG4gICAgICAgIF9zZWxmLmluaXRfd2F0Y2hfZG9tKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfYXBsdXNfYWMud2F0Y2hfZG9tX3J1bm5pbmcgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgIH0sIGNvbmZpZy5MT09QX1RJTUUpO1xuICB9LFxuXG4gIG9uRm9jdXNIYW5kbGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgX2FwbHVzX2FjID0gYXBsdXMuX2FwbHVzX2FjIHx8IHt9O1xuICAgIF9hcGx1c19hYy5jdXJyZW50X3dpbl9zdGF0dXMgPSAnZm9jdXMnO1xuICAgIGlmICghX2FwbHVzX2FjLndhdGNoX2RvbV9ydW5uaW5nKSB7XG4gICAgICBfc2VsZi5pbml0X3dhdGNoX2RvbSgpO1xuICAgIH1cbiAgfSxcblxuICBvbkJsdXJIYW5kbGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9hcGx1c19hYyA9IGFwbHVzLl9hcGx1c19hYyB8fCB7fTtcbiAgICBfYXBsdXNfYWMuY3VycmVudF93aW5fc3RhdHVzID0gJ2JsdXInO1xuICB9LFxuXG4gIG9uVmlzaWJpbGl0eUNoYW5nZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICBpZiAoZG9jLnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICBfc2VsZi5vbkZvY3VzSGFuZGxlcigpO1xuICAgIH0gZWxzZSBpZiAoZG9jLnZpc2liaWxpdHlTdGF0ZSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgIF9zZWxmLm9uQmx1ckhhbmRsZXIoKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8g5aKe5Yqg5ZCE56eN55uR5ZCsXG4gIGFkZEFsbExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgX2FwbHVzX2FjID0gYXBsdXMuX2FwbHVzX2FjIHx8IHt9O1xuXG4gICAgX2FwbHVzX2FjLndhdGNoX3RpbWVzID0gMDtcbiAgICBfYXBsdXNfYWMud2F0Y2hfZG9tX3J1bm5pbmcgPSB0cnVlO1xuICAgIF9zZWxmLmluaXRfd2F0Y2hfZG9tKCk7XG5cbiAgICAvLyDpkojlr7nmiYvmt5jjgIHmiYvnjKvnmoTnibnmrorlpITnkIbpgLvovpFcbiAgICBpZiAod2luLldpbmRWYW5lICYmIGRvYy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB1dGlsRXZlbnQub24oZG9jLCAnV1YuRXZlbnQuQVBQLkFjdGl2ZScsIF9zZWxmLm9uRm9jdXNIYW5kbGVyLCBmYWxzZSk7XG4gICAgICB1dGlsRXZlbnQub24oZG9jLCAnV1YuRXZlbnQuQVBQLkJhY2tncm91bmQnLCBfc2VsZi5vbkJsdXJIYW5kbGVyLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLy8g5rWP6KeI5Zmo5LiN5pSv5oyBTXV0YXRpb25PYnNlcnZlcu+8jOaUueeUqOi9ruivoueahOiAgeWKnuazle+8jOS9huWPquacieWcqOeql+WPo+a/gOa0u+aXtuaJjeaJp+ihjFxuICAgIGlmICgnaGlkZGVuJyBpbiBkb2MpIHtcbiAgICAgIC8vIHdlYmtpdOWGheaguFxuICAgICAgdXRpbEV2ZW50Lm9uKHdpbiwgJ3Zpc2liaWxpdHljaGFuZ2UnLCBfc2VsZi5vblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJReWGheaguFxuICAgICAgdXRpbEV2ZW50Lm9uKHdpbiwgJ2JsdXInLCBfc2VsZi5vbkJsdXJIYW5kbGVyKTtcbiAgICAgIHV0aWxFdmVudC5vbih3aW4sICdmb2N1cycsIF9zZWxmLm9uRm9jdXNIYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8g56e76Zmk5ZCE56eN55uR5ZCsXG4gIHJlbW92ZUFsbExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAvLyDpkojlr7nmiYvmt5jjgIHmiYvnjKvnmoTnibnmrorlpITnkIbpgLvovpFcbiAgICBpZiAod2luLldpbmRWYW5lICYmIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICB1dGlsRXZlbnQudW4oZG9jLCAnV1YuRXZlbnQuQVBQLkFjdGl2ZScsIF9zZWxmLm9uRm9jdXNIYW5kbGVyLCBmYWxzZSk7XG4gICAgICB1dGlsRXZlbnQudW4oZG9jLCAnV1YuRXZlbnQuQVBQLkJhY2tncm91bmQnLCBfc2VsZi5vbkJsdXJIYW5kbGVyLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLy8g5rWP6KeI5Zmo5LiN5pSv5oyBTXV0YXRpb25PYnNlcnZlcu+8jOaUueeUqOi9ruivoueahOiAgeWKnuazle+8jOS9huWPquacieWcqOeql+WPo+a/gOa0u+aXtuaJjeaJp+ihjFxuICAgIGlmICgnaGlkZGVuJyBpbiBkb2MpIHtcbiAgICAgIC8vIHdlYmtpdOWGheaguFxuICAgICAgdXRpbEV2ZW50LnVuKHdpbiwgJ3Zpc2liaWxpdHljaGFuZ2UnLCBfc2VsZi5vblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJReWGheaguFxuICAgICAgdXRpbEV2ZW50LnVuKHdpbiwgJ2JsdXInLCBfc2VsZi5vbkJsdXJIYW5kbGVyKTtcbiAgICAgIHV0aWxFdmVudC51bih3aW4sICdmb2N1cycsIF9zZWxmLm9uRm9jdXNIYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOebkeWQrGRvbeWPmOWMlu+8jOacieWPmOWMluaJp+ihjOWbnuiwg1xuICAgKiBAcGFyYW0ge2hhbmRsZXJfZG9tX2NoYW5nZX0gY2JcbiAgICovXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdmFyIF9hcGx1c19hYyA9IGFwbHVzLl9hcGx1c19hYyB8fCB7fTtcbiAgICAvLyBzdGVwMVxuICAgIF9zZWxmLnRocm90dGxlX2hhbmRsZXJfZG9tX2NoYW5nZSgpO1xuICAgIC8vIHN0ZXAyIOebkeWQrGRvbeWPmOWMllxuICAgIHZhciBNT2JzZXJ2ZXIgPSB3aW4uTXV0YXRpb25PYnNlcnZlciB8fCB3aW4uV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fCB3aW4uTW96TXV0YXRpb25PYnNlcnZlcjtcbiAgICBpZiAoTU9ic2VydmVyKSB7XG4gICAgICBfYXBsdXNfYWMub2JzZXJ2ZXJfdGltZXMgPSAwO1xuICAgICAgX3NlbGYuaW5pdF9vYnNlcnZlcihNT2JzZXJ2ZXIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3NlbGYudGhyb3R0bGVfaGFuZGxlcl9kb21fY2hhbmdlKCk7XG4gICAgICB9KTsgLy8g5aKe6YeP5pu05paw5b6F5pud5YWJ55qE5YWD57Sg77yM5bm25Yid5aeL5YyW5YWD57Sg5Z2Q5qCHXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOWinuWKoOWQhOenjeebkeWQrFxuICAgICAgX3NlbGYuYWRkQWxsTGlzdGVuZXIoKTtcbiAgICB9XG4gIH0sXG5cbiAgY2xlYXJEb206IGZ1bmN0aW9uKG9iaiwgb3B0cykge1xuICAgIHZhciBfY2xrQ29uZmlnID0gdGhpcy5hdXRvQ2xrQ29uZmlnIHx8IFtdO1xuICAgIGlmIChvcHRzICYmIG9wdHMuZnJvbSAhPT0gJ2FwcGVuZE1ldGFJbmZvJykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfY2xrQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIGVsZW1lbnRTZWxlY3RvciA9IF9jbGtDb25maWdbaV0uZWxlbWVudFNlbGVjdG9yO1xuICAgICAgICAgIHZhciBfZG9jcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRTZWxlY3Rvcik7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9jcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgX2RvY3Nbal0uc2V0QXR0cmlidXRlKGNvbmZpZy5EQVRBX0FQTFVTX0FDX0tFWSwgJycpOyAgXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmF1dG9DbGtDb25maWcgPSBvYmogJiYgb2JqLmF1dG9DbGtDb25maWc7XG4gIH0sXG5cbiAgY2xlYXI6IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgaWYgKG9wdHMgJiYgb3B0cy5mcm9tID09PSAnYXBwZW5kTWV0YUluZm8nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBfYXBsdXNfYWMgPSBhcGx1cy5fYXBsdXNfYWMgfHwge307XG4gICAgaWYgKF9hcGx1c19hYy5fYWNIYXNoTWFwKSB7XG4gICAgICBfYXBsdXNfYWMuX2FjSGFzaE1hcCA9IHt9O1xuICAgIH1cbiAgICBpZiAoX2FwbHVzX2FjLmhhc2hfdmFsdWUpIHtcbiAgICAgIF9hcGx1c19hYy5oYXNoX3ZhbHVlID0ge307XG4gICAgfVxuICAgIGFwbHVzLl9hcGx1c19hYyA9IF9hcGx1c19hYztcbiAgICAvLyDmuIXpmaTova7or6Lnm5HlkKxcbiAgICBpZiAodGhpcy5fbG9vcF9vYnNlcnZlcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2xvb3Bfb2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5fbG9vcF9vYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICAgIC8vIOiuqeivpeinguWvn+iAheWvueixoeWBnOatouinguWvn+aMh+Wumuebruagh+eahERPTeWPmOWMli7nm7TliLDlho3mrKHosIPnlKjlhbZvYnNlcnZlKCnmlrnms5Us6K+l6KeC5a+f6ICF5a+56LGh5YyF5ZCr55qE5Zue6LCD5Ye95pWw6YO95LiN5Lya5YaN6KKr6LCD55SoLlxuICAgIGlmICh0aGlzLl9vYnNlcnZlcikge1xuICAgICAgdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVyKCk7XG4gICAgfVxuICB9LFxuXG4gIC8vIOWPguaVsOabtOaUue+8jOWBmuS4gOS6m+mHjee9ruW3peS9nFxuICByZXNldDogZnVuY3Rpb24gKG9iaiwgb3B0cykge1xuICAgIHRoaXMuY2xlYXJEb20ob2JqLCBvcHRzKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG59KTtcbm1vZHVsZS5leHBvcnRzID0gV2F0Y2hEb207XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfYWMvd2F0Y2hET00uanNcbi8vIG1vZHVsZSBpZCA9IDU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvYXBsdXNfYXV0b19leHAuanNcbiAqIGFwbHVz5LiT6aG56YeH6ZuGOiDpobXpnaLlhYPntKDmm53lhYnoh6rliqjph4fpm4ZcbiAqIOS+nei1lmFwbHVz5ZKMYXBsdXNfcGx1Z2luX3NwbS5qc+aPkuS7tlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIDxtZXRhIG5hbWU9XCJhcGx1cy1hdXRvLWV4cFwiIGNvbnRlbnQ9XCJ7e2xvZ2tleTpcIi9hLmIuY1wiLHRhZzpcImRpdlwiLGZpbHRlcjpcInNjbT0xMjM0XCJ9fVwiPlxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuICAgICAqICAgbG9nQ29uZmlnOiB7bG9nQ29uZmlnfVxuICAgICAqIH1cbiAgICAgKi9cbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcXVpcmUoJy4vbGliX2FlL21haW4nKSgpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc193ZWIvYXBsdXNfYWVfaW5qZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHJhY2tlclV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdHJhY2tlclV0aWwnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIGRlYnVnID0gcmVxdWlyZSgnQHV0aWxzL2RlYnVnJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgV2F0Y2hET007XG52YXIgd2F0Y2hFeHBvc3VyZTtcbnZhciB3YXRjaFJlY29yZDtcbnZhciBjb25maWc7XG5cbmZ1bmN0aW9uIGluaXRGbiAoKSB7XG4gIFdhdGNoRE9NID0gcmVxdWlyZSgnLi93YXRjaERPTScpO1xuICBpZiAod2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyKSB7XG4gICAgd2F0Y2hFeHBvc3VyZSA9IHJlcXVpcmUoJy4vd2F0Y2hFeHBvc3VyZUlPYnNlcnZlcicpO1xuICB9IGVsc2Uge1xuICAgIHdhdGNoRXhwb3N1cmUgPSByZXF1aXJlKCcuL3dhdGNoRXhwb3N1cmUnKTtcbiAgfVxuICB3YXRjaFJlY29yZCA9IHJlcXVpcmUoJy4vd2F0Y2hSZWNvcmQnKTtcbiAgY29uZmlnID0gcmVxdWlyZSgnLi4vbGliX2NvbW1vbi9jb25maWcnKTtcbn1cblxuZnVuY3Rpb24gaW5pdCAoY2IpIHtcbiAgdmFyIGFwbHVzID0gKHdpbmRvdy5hcGx1cyB8fCAod2luZG93LmFwbHVzID0ge30pKTtcblxuICB2YXIgYXBsdXNfYXV0b19leHBfaW5pdCA9IGZhbHNlO1xuICB2YXIgZG9faW5pdF9mbGFnID0gZmFsc2U7XG4gIHZhciBfY29uZmlnOyAvLyBsYXN0Q29uZmlnXG5cbiAgdmFyIGRvX2luaXQgPSBmdW5jdGlvbiAoZmxhZykge1xuICAgIGlmIChkb19pbml0X2ZsYWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZG9faW5pdF9mbGFnID0gZmxhZztcbiAgICBpZiAoIWFwbHVzX2F1dG9fZXhwX2luaXQpIHtcbiAgICAgIHRyYWNrZXJVdGlsLndyYXAoZnVuY3Rpb24oKXtcbiAgICAgICAgLy8g6aG65bqP5LiN6IO95Lmx77yM546v546v55u45omjIVxuICAgICAgICAvLyAw44CB6I635Y+W6YWN572u5bm25Yik5pat6YWN572u5q2j56Gu5oCn77yMZ2V0QXV0b0V4cENvbmZpZ+WGheWBmuS6huW8uuagoemqjO+8jOWHuumUmeWQjuS8muaJk+WNsOmUmeivr+S/oeaBr1xuICAgICAgICBfY29uZmlnID0gY29uZmlnLmdldEF1dG9FeHBDb25maWcoKSB8fCBbXTtcbiAgICAgICAgLy8gaWYgKGRlYnVnLmlzRGVidWdBcGx1cygpKSB7XG4gICAgICAgIHVsb2coKS53KCdhcGx1cy1hdXRvLWV4cCBtZXRhVmFsdWUgaW5pdDogJyArIEpTT04uc3RyaW5naWZ5KF9jb25maWcpKTtcbiAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAvLyAgIG1zZzogJ2FwbHVzLWF1dG8tZXhwIG1ldGFWYXVlIGluaXQ6ICcgKyBKU09OLnN0cmluZ2lmeShfY29uZmlnKVxuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gfVxuICAgICAgICB2YXIgd2F0Y2hET007XG5cbiAgICAgICAgaWYgKF9jb25maWcgJiYgX2NvbmZpZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gMeOAgeebkeWQrOaXpeW/l+WPkemAgVxuICAgICAgICAgIHdhdGNoUmVjb3JkLndhdGNoX2RhdGFfY2hhbmdlKCk7XG4gICAgICAgICAgLy8gMuOAgeebkeWQrOabneWFiVxuICAgICAgICAgIHdhdGNoRXhwb3N1cmUud2F0Y2hfZXhwb3N1cmVfY2hhbmdlKF9jb25maWcpO1xuICAgICAgICAgIC8vIDPjgIHnm5HlkKxkb23lj5jljJZcbiAgICAgICAgICB3YXRjaERPTSA9IFdhdGNoRE9NLmNyZWF0ZSh7XG4gICAgICAgICAgICBpc1Rocm90dGxlV2F0Y2g6IGNvbmZpZy5pc1Rocm90dGxlV2F0Y2hEb20oKSxcbiAgICAgICAgICAgIGF1dG9FeHBDb25maWc6IF9jb25maWdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3YXRjaERPTS5pbml0KHt0eXBlOiAnaW5pdCd9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ3NldE1ldGFJbmZvJywgZnVuY3Rpb24gKG1ldGFLZXksIG1ldGFWYXVlLCBvcHRzKSB7XG4gICAgICAgICAgaWYgKG1ldGFLZXkgPT09ICdhcGx1cy1hdXRvLWV4cCcpIHtcbiAgICAgICAgICAgIC8vIGlmIChkZWJ1Zy5pc0RlYnVnQXBsdXMoKSkge1xuICAgICAgICAgICAgdWxvZygpLncoJ2FwbHVzLWF1dG8tZXhwIG1ldGFWYXVlIGNoYW5nZTogJyArIEpTT04uc3RyaW5naWZ5KG1ldGFWYXVlKSk7XG4gICAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgICAvLyAgIG1zZzogJ2FwbHVzLWF1dG8tZXhwIG1ldGFWYXVlIGNoYW5nZTogJyArIEpTT04uc3RyaW5naWZ5KG1ldGFWYXVlKVxuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDLjgIHojrflj5bphY3nva7lubbliKTmlq3phY3nva7mraPnoa7mgKfvvIxnZXRBdXRvRXhwQ29uZmln5YaF5YGa5LqG5by65qCh6aqM77yM5Ye66ZSZ5ZCO5Lya5omT5Y2w6ZSZ6K+v5L+h5oGvXG4gICAgICAgICAgICB2YXIgX2NvbmZpZzIgPSBjb25maWcuZ2V0QXV0b0V4cENvbmZpZyhtZXRhVmF1ZSk7XG4gICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoX2NvbmZpZzIpID09PSBKU09OLnN0cmluZ2lmeShfY29uZmlnKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBfY29uZmlnID0gX2NvbmZpZzI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDHjgIFjbGVhciAtIOWFgeiuuOe9ruepum1ldGFWYWx1ZeS7peWBnOatouabneWFieebkeWQrFxuICAgICAgICAgICAgd2F0Y2hSZWNvcmQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlmICghb3B0cykge1xuICAgICAgICAgICAgICBvcHRzID0ge1xuICAgICAgICAgICAgICAgIGZyb206ICdzZXRNZXRhSW5mbydcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdhdGNoRXhwb3N1cmUuY2xlYXIoX2NvbmZpZywgb3B0cyk7XG4gICAgICAgICAgICB3YXRjaERPTSAmJiB3YXRjaERPTS5jbGVhcihvcHRzKTtcblxuICAgICAgICAgICAgaWYgKG1ldGFWYXVlICYmIF9jb25maWcgJiYgX2NvbmZpZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIC8vIDIuMeOAgeebkeWQrOaXpeW/l+WPkemAgVxuICAgICAgICAgICAgICB3YXRjaFJlY29yZC53YXRjaF9kYXRhX2NoYW5nZSgpO1xuICAgICAgICAgICAgICAvLyAyLjLjgIHnm5HlkKzmm53lhYlcbiAgICAgICAgICAgICAgd2F0Y2hFeHBvc3VyZS53YXRjaF9leHBvc3VyZV9jaGFuZ2UoX2NvbmZpZyk7XG5cbiAgICAgICAgICAgICAgdmFyIF93YXRjaF9kb21fY2ZnID0ge1xuICAgICAgICAgICAgICAgIGlzVGhyb3R0bGVXYXRjaDogY29uZmlnLmlzVGhyb3R0bGVXYXRjaERvbSgpLFxuICAgICAgICAgICAgICAgIGF1dG9FeHBDb25maWc6IF9jb25maWdcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgaWYgKHdhdGNoRE9NKSB7XG4gICAgICAgICAgICAgICAgd2F0Y2hET00ucmVzZXQoX3dhdGNoX2RvbV9jZmcsIG9wdHMpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdhdGNoRE9NID0gV2F0Y2hET00uY3JlYXRlKF93YXRjaF9kb21fY2ZnKTtcbiAgICAgICAgICAgICAgICB3YXRjaERPTS5pbml0KHt0eXBlOiAnaW5pdCd9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LCAnZG9faW5pdCcpO1xuICAgICAgYXBsdXNfYXV0b19leHBfaW5pdCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8vIHV0aWxFdmVudC5ET01SZWFkeShmdW5jdGlvbigpIHtcbiAgLy8gNXPlkI7ov5jmsqHmnInlrozmiJDliqDovb3vvIzmjqfliLblj7DmiZPlh7rkuIDmnaHorablkYrvvIxUT0RPIOebkeaOp+i/meWdl+WGheWuuVxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgaWYgKCFhcGx1c19hdXRvX2V4cF9pbml0KSB7XG4gICAgICB1bG9nKCkudygnYXBsdXNfYXV0b19leHBfaW5pdCBmYWlsZWQhIHBsZWFzZSBjaGVjayB3aGV0aGVyIGFwbHVzSnMgaXMgbG9hZGVkIGNvcnJlY3RseSEnKTtcbiAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIC8vICAgbXNnOiAnYXBsdXNfYXV0b19leHBfaW5pdCBmYWlsZWQhIHBsZWFzZSBjaGVjayB3aGV0aGVyIGFwbHVzSnMgaXMgbG9hZGVkIGNvcnJlY3RseSEnXG4gICAgICAvLyB9KTtcbiAgICB9XG4gIH0sIDUwMDApO1xuICAvLyDmnIlhcGx1c19wdWJzdWLkuovku7bnm5HlkKzogIXmqKHlnovnmoTmg4XlhrXkuIvvvIznm5HlkKxhcGx1c1JlYWR55LqL5Lu2XG4gIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuICB2YXIgZ19zcG0gPSB3aW5kb3cuZ19TUE0gfHwge307XG4gIGlmIChfJC5zdGF0dXMgPT09ICdjb21wbGV0ZScgJiYgZ19zcG0uc3BtKSB7XG4gICAgZG9faW5pdCgpO1xuICB9XG4gIC8vIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ2FwbHVzUmVhZHknLCBmdW5jdGlvbihzdGF0dXMpIHtcbiAgLy8gICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG4gIC8vICAgICBkb19pbml0KCdhcGx1c1JlYWR5Jyk7XG4gIC8vICAgfVxuICAvLyB9KTtcbiAgdmFyIHEgPSAod2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSkpO1xuICBxLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBkb19pbml0KCdhcGx1c1JlYWR5Jyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG4gIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYigpO1xuICB9XG4gIC8vIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFwbHVzID0gKHdpbmRvdy5hcGx1cyB8fCB3aW5kb3cuZ29sZGxvZyB8fCAod2luZG93LmFwbHVzID0ge30pKTtcbiAgaWYgKGFwbHVzLl9hcGx1c19hdXRvX2V4cCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBhcGx1cy5fYXBsdXNfYXV0b19leHAgPSB7XG4gICAgICB0YWdzOiB7fSxcbiAgICAgIHN0YXR1czogJ2luaXQnLFxuICAgICAgZXhwX3RpbWVzOiAwLFxuICAgICAgZWxlbWVudFNlbGVjdG9yU2l6ZU1hcDoge31cbiAgICB9OyAgICBcbiAgICBpbml0Rm4oKTtcbiAgICBpbml0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGFwbHVzLl9hcGx1c19hdXRvX2V4cC5zdGF0dXMgPSAnY29tcGxldGUnO1xuICAgIH0pO1xuICB9ICBcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfYWUvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gNThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOebkeWQrGRvbeWPmOWMlu+8jOaUtumbhuW+heabneWFieWFg+e0oFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xudmFyIHRyYWNrZXJVdGlsID0gcmVxdWlyZSgnQHV0aWxzL3RyYWNrZXJVdGlsJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgdXRpbEV2ZW50ID0gcmVxdWlyZSgnLi91dGlsL2V2ZW50Jyk7XG52YXIgdXRpbEVsZW1lbnRBYyA9IHJlcXVpcmUoJy4vdXRpbC91dGlsRWxlbWVudEFjJyk7XG5cbnZhciB1dGlsX2FjX2FlID0gcmVxdWlyZSgnLi4vbGliX2NvbW1vbi91dGlsX2FjX2FlJyk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vbGliX2NvbW1vbi9jb25maWcnKTtcblxudmFyIHdpbiA9IHdpbmRvdztcbnZhciBkb2MgPSBkb2N1bWVudDtcblxuLyoqXG4gKiDlhoXpg6jlr7nosaFcbiAqIEBvYmplY3QgIHRoaXMuX29ic2VydmVyICAgICAgLy8gTXV0YXRpb25PYnNlcnZlcuebkeWQrOiAhVxuICogQG9iamVjdCAgdGhpcy5fbG9vcF9vYnNlcnZlciAvLyDkuI3mlK/mjIFNdXRhdGlvbk9ic2VydmVy55qE5rWP6KeI5Zmo77yM6L2u6K+i55uR5ZCs6ICFXG4gKiBAb2JqZWN0ICB0aGlzLmF1dG9FeHBDb25maWcgIC8vIOmFjee9ruWPguaVsFxuICpcbiAqIEBwYXJhbSB7aGFuZGxlcl9kb21fY2hhbmdlfSBjYlxuICovXG5cblxudmFyIFdhdGNoRG9tID0gQmFzZS5leHRlbmQoe1xuXG4gIGVhY2hFbGVtZW50czogZnVuY3Rpb24gKGVsZW1lbnRzLCBleHBDb25maWcpIHtcbiAgICB2YXIgbG9na2V5ID0gZXhwQ29uZmlnLmxvZ2tleSB8fCAnJztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZWxlID0gZWxlbWVudHNbaV07XG4gICAgICB2YXIgX2luZGV4ID0gZWxlLmdldEF0dHJpYnV0ZShjb25maWcuREFUQV9BUExVU19BRV9LRVkpO1xuICAgICAgaWYgKF9pbmRleCAmJiBfaW5kZXguaW5kZXhPZignXycpID4gMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc05hTihwYXJzZUludChfaW5kZXgpKSkge1xuICAgICAgICBfaW5kZXggPSBhcGx1cy5fYXBsdXNfYXV0b19leHAuZWxlbWVudFNlbGVjdG9yU2l6ZU1hcFtleHBDb25maWcuZWxlbWVudFNlbGVjdG9yXSsrO1xuICAgICAgICBlbGUuc2V0QXR0cmlidXRlKGNvbmZpZy5EQVRBX0FQTFVTX0FFX0tFWSwgX2luZGV4KTtcbiAgICAgIH1cbiAgICAgIGlmICghYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIGV4cENvbmZpZy5zcG1CICYmIGV4cENvbmZpZy5zcG1DICYmIGV4cENvbmZpZy5zcG1EKSB7ICAgICAgICBcbiAgICAgICAgZWxlLnNldEF0dHJpYnV0ZShjb25maWcuREFUQV9BUExVU19TUE1fQU5DSE9SX0lEX0tFWSwgW2V4cENvbmZpZy5zcG1CLCBleHBDb25maWcuc3BtQywgZXhwQ29uZmlnLnNwbUQgKyAnXycgKyAoaSsxKV0uam9pbignLicpKTtcbiAgICAgICAgZWxlLnNldEF0dHJpYnV0ZShjb25maWcuREFUQV9BUExVU19WVF9JVEVNX0lOREVYX0tFWSwgJycgKyAoaSsxKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHZhciBoYXNoX3ZhbHVlID0gdXRpbF9hY19hZS5nZXRFbGVtZW50SGFzaChleHBDb25maWcsIHtcbiAgICAgICAgaWdub3JlX2F0dHI6IGZhbHNlLFxuICAgICAgICBpbmRleDogX2luZGV4LFxuICAgICAgICBlbGU6IGVsZVxuICAgICAgfSk7XG4gICAgICAvLyDpqozor4HmmK/lkKblt7Lnu4/orrDlvZXov4fkuobvvIzlpoLmnpzmsqHmnInorrDlvZXmiY3nu6fnu61cbiAgICAgIHZhciBpc1JlY29yZCA9IHV0aWxFbGVtZW50QWMuY2hlY2tJc1JlY29yZChlbGUsIGhhc2hfdmFsdWUsIGNvbmZpZy5EQVRBX0FQTFVTX0FFX0tFWSk7XG4gICAgICB2YXIgaXNJbkhhc2hNYXAgPSB1dGlsX2FjX2FlLmNoZWNrSXNJbkhhc2hNYXAoe1xuICAgICAgICBsb2drZXk6IGxvZ2tleSxcbiAgICAgICAgaGFzaF92YWx1ZTogaGFzaF92YWx1ZSxcbiAgICAgICAgYXBsdXNLZXk6ICdfYXBsdXNfYXV0b19leHAnXG4gICAgICB9KTtcbiAgICAgIGlmICghaXNSZWNvcmQgJiYgIWlzSW5IYXNoTWFwKSB7XG4gICAgICAgIHZhciBfb2JqID0ge1xuICAgICAgICAgIGV4cENvbmZpZzogZXhwQ29uZmlnLFxuICAgICAgICAgIGhhc2hfdmFsdWU6IGhhc2hfdmFsdWUsXG4gICAgICAgICAgZWxlbWVudDogZWxlLFxuICAgICAgICAgIHN0YXR1czogMCwgICAvLyDliJ3lp4vnirbmgIFcbiAgICAgICAgICBlbGVtZW50U2VsZWN0b3I6IGV4cENvbmZpZy5lbGVtZW50U2VsZWN0b3IsXG4gICAgICAgIH07XG4gICAgICAgIC8vIOWwhuW+heabneWFieWFg+e0oOWtmOWFpWFwbHVzLl9hcGx1c19hdXRvX2V4cC5fYWNIYXNoTWFwXG4gICAgICAgIHV0aWxfYWNfYWUudXBkYXRlRXhwSGFzaE1hcChsb2drZXksIF9vYmosICdBREQnKTtcbiAgICAgIH1cbiAgICAgIC8vIGlmICghZWxlLmdldEF0dHJpYnV0ZShjb25maWcuREFUQV9BUExVU19BRV9LRVkpKSB7XG4gICAgICAvLyAgIGNvbnNvbGUuZXJyb3IoJ2lzUmVjb3JkID0gJyArIGlzUmVjb3JkICsgJywgaXNJbkhhc2hNYXAgPSAnICsgaXNJbkhhc2hNYXAgKyAnLCBfaW5kZXggPSAnICsgX2luZGV4KTtcbiAgICAgIC8vICAgY29uc29sZS5sb2coZWxlKTtcbiAgICAgIC8vIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOivpeaWueazleiiq29ic2VydmVy5oiW6L2u6K+i6LCD55SoXG4gICAqIOWinumHj+abtOaWsOW+heabneWFieeahOWFg+e0oO+8jOWIneWni+WMluWFg+e0oOWdkOagh1xuICAgKiDlubblsIblvoXmm53lhYnlhYPntKDlrZjlhaVhcGx1cy5fYXBsdXNfYXV0b19leHAuX3RvZG9fYWNfZWxlbWVudHPvvIjlubPooYznmoR3YXRjaEV4cG9zdXJlLmpz5Lya55uR5ZCs56qX5Y+j5Y+Y5YyW5p2l55uR5o6n6L+Z5Lqb5b6F5pud5YWJ5YWD57Sg5piv5ZCm5pud5YWJ77yJXG4gICAqIEBwYXJhbXMgX2VsZSB7RWxlbWVudH1cbiAgICogQHBhcmFtcyBvcHRzIHtPYmplY3R9IHtcbiAgICogICB0eXBlOiAncG9sbGluZycvJ2NoaWxkTGlzdCcvJ2NoYXJhY3RlckRhdGEnLydzdWJ0cmVlJy8nYXR0cmlidXRlc18oY2xhc3N8c3R5bGUpJ1xuICAgKiB9XG4gICAqL1xuICBoYW5kbGVyX2RvbV9jaGFuZ2U6IGZ1bmN0aW9uKF9lbGUsIG9wdHMpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIGV4cENvbmZpZ3MgPSB0aGlzLmF1dG9FeHBDb25maWcgfHwgW107XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGV4cENvbmZpZ3MubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIGV4cENvbmZpZyA9IGV4cENvbmZpZ3Nbal07XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHV0aWxfYWNfYWUuZ2V0RWxlbWVudHMoZXhwQ29uZmlnLCBkb2MpOyAvLyDojrflj5bmiYDmnIl4eHjmoIfnrb7kuIvluKbmnIl5eXnlsZ7mgKfnmoTlhYPntKBcbiAgICAgICAgXG4gICAgICAgIGlmICghYXBsdXMuX2FwbHVzX2F1dG9fZXhwLmVsZW1lbnRTZWxlY3RvclNpemVNYXBbZXhwQ29uZmlnLmVsZW1lbnRTZWxlY3Rvcl0pIHtcbiAgICAgICAgICBhcGx1cy5fYXBsdXNfYXV0b19leHAuZWxlbWVudFNlbGVjdG9yU2l6ZU1hcFtleHBDb25maWcuZWxlbWVudFNlbGVjdG9yXSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lYWNoRWxlbWVudHMoZWxlbWVudHMsIGV4cENvbmZpZyk7XG4gICAgICB9XG4gICAgICBhcGx1cy5hcGx1c19wdWJzdWIucHVibGlzaCgnQVBMVVNfQUVfRE9NX0NIQU5HRScsIG9wdHMgfHwge30pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHVsb2coKS53KGUgJiYgZS5tZXNzYWdlKTtcbiAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIC8vICAgbXNnOiBlICYmIGUubWVzc2FnZVxuICAgICAgLy8gfSk7XG4gICAgfVxuICB9LFxuXG4gIHRocm90dGxlX2hhbmRsZXJfZG9tX2NoYW5nZTogdXRpbF9hY19hZS50aHJvdHRsZShmdW5jdGlvbiAoX2VsZSwgb3B0cykge1xuICAgIHRoaXMuaGFuZGxlcl9kb21fY2hhbmdlKF9lbGUsIG9wdHMpO1xuICB9LCAyMDApLFxuXG4gIC8qKlxuICAgKiDpkojlr7nkuI3mlK/mjIFvYnNlcnZlcueahOa1j+iniOWZqOeUqOi9ruivoueahOaWueW8j+ebkeWQrGRvbeWPmOWMllxuICAgKiBAcGFyYW0ge2hhbmRsZXJfZG9tX2NoYW5nZX0gY2JcbiAgICovXG4gIGluaXRfd2F0Y2hfZG9tOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG4gICAgX3NlbGYuX2xvb3Bfb2JzZXJ2ZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBpZiAoX2FwbHVzX2F1dG9fZXhwLmN1cnJlbnRfd2luX3N0YXR1cyAhPT0gJ2JsdXInKSB7XG4gICAgICAgIHVsb2coKS53KCd3YXRjaF9kb20gaW4gYWUgTE9PUF9USU1FIGlzICcgKyBjb25maWcuTE9PUF9USU1FICsgJ21zIHRvdGFsOiAnICsgKytfYXBsdXNfYXV0b19leHAud2F0Y2hfdGltZXMpO1xuICAgICAgICAvLyBpZiAoYXBsdXMuYXBsdXNEZWJ1Zykge1xuICAgICAgICAvLyAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgLy8gICAgIG1zZzogJ3dhdGNoX2RvbSBpbiBhZSBMT09QX1RJTUUgaXMgJyArIGNvbmZpZy5MT09QX1RJTUUgKyAnbXMgdG90YWw6ICcgKyArK19hcGx1c19hdXRvX2V4cC53YXRjaF90aW1lc1xuICAgICAgICAvLyAgIH0pO1xuICAgICAgICAvLyB9XG4gICAgICAgIF9zZWxmLmhhbmRsZXJfZG9tX2NoYW5nZShudWxsLCB7XG4gICAgICAgICAgdHlwZTogJ3BvbGxpbmcnXG4gICAgICAgIH0pOyAvLyDlop7ph4/mm7TmlrDlvoXmm53lhYnnmoTlhYPntKDvvIzlubbliJ3lp4vljJblhYPntKDlnZDmoIdcbiAgICAgICAgX3NlbGYuaW5pdF93YXRjaF9kb20oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9hcGx1c19hdXRvX2V4cC53YXRjaF9kb21fcnVubmluZyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgfSwgY29uZmlnLkxPT1BfVElNRSk7XG4gIH0sXG5cbiAgb25Gb2N1c0hhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHZhciBfYWUgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG4gICAgX2FlLmN1cnJlbnRfd2luX3N0YXR1cyA9ICdmb2N1cyc7XG4gICAgaWYgKCFfYWUud2F0Y2hfZG9tX3J1bm5pbmcpIHtcbiAgICAgIF9zZWxmLmluaXRfd2F0Y2hfZG9tKCk7XG4gICAgfVxuICB9LFxuXG4gIG9uQmx1ckhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2FlID0gYXBsdXMuX2FwbHVzX2F1dG9fZXhwIHx8IHt9O1xuICAgIF9hZS5jdXJyZW50X3dpbl9zdGF0dXMgPSAnYmx1cic7XG4gIH0sXG5cbiAgb25WaXNpYmlsaXR5Q2hhbmdlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIGlmIChkb2MudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHtcbiAgICAgIF9zZWxmLm9uRm9jdXNIYW5kbGVyKCk7XG4gICAgfSBlbHNlIGlmIChkb2MudmlzaWJpbGl0eVN0YXRlID09PSAnaGlkZGVuJykge1xuICAgICAgX3NlbGYub25CbHVySGFuZGxlcigpO1xuICAgIH1cbiAgfSxcblxuICAvLyDlop7liqDlkITnp43nm5HlkKxcbiAgYWRkQWxsTGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHZhciBfYWUgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG4gICAgX2FlLndhdGNoX3RpbWVzID0gMDtcbiAgICBfYWUud2F0Y2hfZG9tX3J1bm5pbmcgPSB0cnVlO1xuICAgIF9zZWxmLmluaXRfd2F0Y2hfZG9tKCk7XG5cbiAgICAvLyDpkojlr7nmiYvmt5jjgIHmiYvnjKvnmoTnibnmrorlpITnkIbpgLvovpFcbiAgICBpZiAod2luLldpbmRWYW5lICYmIGRvYy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB1dGlsRXZlbnQub24oZG9jLCAnV1YuRXZlbnQuQVBQLkFjdGl2ZScsIF9zZWxmLm9uRm9jdXNIYW5kbGVyLCBmYWxzZSk7XG4gICAgICB1dGlsRXZlbnQub24oZG9jLCAnV1YuRXZlbnQuQVBQLkJhY2tncm91bmQnLCBfc2VsZi5vbkJsdXJIYW5kbGVyLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLy8g5rWP6KeI5Zmo5LiN5pSv5oyBTXV0YXRpb25PYnNlcnZlcu+8jOaUueeUqOi9ruivoueahOiAgeWKnuazle+8jOS9huWPquacieWcqOeql+WPo+a/gOa0u+aXtuaJjeaJp+ihjFxuICAgIGlmICgnaGlkZGVuJyBpbiBkb2MpIHtcbiAgICAgIC8vIHdlYmtpdOWGheaguFxuICAgICAgdXRpbEV2ZW50Lm9uKHdpbiwgJ3Zpc2liaWxpdHljaGFuZ2UnLCBfc2VsZi5vblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJReWGheaguFxuICAgICAgdXRpbEV2ZW50Lm9uKHdpbiwgJ2JsdXInLCBfc2VsZi5vbkJsdXJIYW5kbGVyKTtcbiAgICAgIHV0aWxFdmVudC5vbih3aW4sICdmb2N1cycsIF9zZWxmLm9uRm9jdXNIYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8g56e76Zmk5ZCE56eN55uR5ZCsXG4gIHJlbW92ZUFsbExpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAvLyDpkojlr7nmiYvmt5jjgIHmiYvnjKvnmoTnibnmrorlpITnkIbpgLvovpFcbiAgICBpZiAod2luLldpbmRWYW5lICYmIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICB1dGlsRXZlbnQudW4oZG9jLCAnV1YuRXZlbnQuQVBQLkFjdGl2ZScsIF9zZWxmLm9uRm9jdXNIYW5kbGVyLCBmYWxzZSk7XG4gICAgICB1dGlsRXZlbnQudW4oZG9jLCAnV1YuRXZlbnQuQVBQLkJhY2tncm91bmQnLCBfc2VsZi5vbkJsdXJIYW5kbGVyLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLy8g5rWP6KeI5Zmo5LiN5pSv5oyBTXV0YXRpb25PYnNlcnZlcu+8jOaUueeUqOi9ruivoueahOiAgeWKnuazle+8jOS9huWPquacieWcqOeql+WPo+a/gOa0u+aXtuaJjeaJp+ihjFxuICAgIGlmICgnaGlkZGVuJyBpbiBkb2MpIHtcbiAgICAgIC8vIHdlYmtpdOWGheaguFxuICAgICAgdXRpbEV2ZW50LnVuKHdpbiwgJ3Zpc2liaWxpdHljaGFuZ2UnLCBfc2VsZi5vblZpc2liaWxpdHlDaGFuZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJReWGheaguFxuICAgICAgdXRpbEV2ZW50LnVuKHdpbiwgJ2JsdXInLCBfc2VsZi5vbkJsdXJIYW5kbGVyKTtcbiAgICAgIHV0aWxFdmVudC51bih3aW4sICdmb2N1cycsIF9zZWxmLm9uRm9jdXNIYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWIneWni+WMlm9ic2VydmVy55uR5ZCs77yM55uR5ZCsZG9t5Y+Y5YyWXG4gICAqIEBwYXJhbSB7TU9ic2VydmVyfSBNT2JzZXJ2ZXJcbiAgICogQHBhcmFtIHtoYW5kbGVyX2RvbV9jaGFuZ2V9IGNiXG4gICAqL1xuICBpbml0X29ic2VydmVyOiBmdW5jdGlvbihNT2JzZXJ2ZXIsIGNhbGxiYWNrKSB7XG4gICAgLy8gdmFyIGlnbm9yZXMgPSBbJ0lGUkFNRScsICdCT0RZJywgJ09CSkVDVCcsICdTQ1JJUFQnLCAnTk9TQ1JJUFQnLCAnTElOSycsICdTVFlMRSddO1xuICAgIHZhciBpZ25vcmVzID0gWydJRlJBTUUnLCAnQk9EWScsICdPQkpFQ1QnLCAnU0NSSVBUJywgJ05PU0NSSVBUJywgJ0xJTksnLCAnU1RZTEUnLCAnI2NvbW1lbnQnXTtcbiAgICB2YXIgYXR0cnMgPSBbJ2NsYXNzJywgJ3N0eWxlJ107XG5cbiAgICB2YXIgZ2V0QXR0cnNDaGFyc05vZGVzID0gZnVuY3Rpb24gKG11dGF0aW9uKSB7XG4gICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoYXJhY3RlckRhdGEnKSB7XG4gICAgICAgIHJldHVybiBbbXV0YXRpb24udGFyZ2V0XTtcbiAgICAgIH0gZWxzZSBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIGF0dHJzLmluZGV4T2YobXV0YXRpb24uYXR0cmlidXRlTmFtZSkgPiAtMSkge1xuICAgICAgICByZXR1cm4gW211dGF0aW9uLnRhcmdldF07XG4gICAgICB9IGVsc2UgaWYgKG11dGF0aW9uLnR5cGUgIT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAgIC8vIGxvZ2dlcignaWdub3JlIGF1dG8tZXhwIG11dGF0aW9uLnR5cGUgPSAnICsgbXV0YXRpb24udHlwZSArICcsIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPSAnICsgbXV0YXRpb24uYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGVhY2hfbm9kZXMgPSBmdW5jdGlvbiAobm9kZXMsIG11dGF0aW9uKSB7XG4gICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgdmFyIGVsZSA9IG5vZGVzW2pdIHx8IHt9O1xuICAgICAgICAgIHZhciBfbm9kZU5hbWUgPSBlbGUubm9kZU5hbWU7XG4gICAgICAgICAgdmFyIHRhZ3MgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAudGFncyB8fCB7fTtcbiAgICAgICAgICBpZighdGFnc1tfbm9kZU5hbWVdKXtcbiAgICAgICAgICAgIHRhZ3NbX25vZGVOYW1lXSA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRhZ3NbX25vZGVOYW1lXSsrO1xuICAgICAgICAgIGFwbHVzLl9hcGx1c19hdXRvX2V4cC50YWdzID0gdGFncztcbiAgICAgICAgICBpZiAoaWdub3Jlcy5pbmRleE9mKF9ub2RlTmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICB0cmFja2VyVXRpbC53cmFwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG4gICAgICAgICAgICAgICsrX2FwbHVzX2F1dG9fZXhwLm9ic2VydmVyX3RpbWVzO1xuICAgICAgICAgICAgICB2YXIgYXR0ck5hbWUgPSBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lO1xuICAgICAgICAgICAgICBjYWxsYmFjayhlbGUsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBtdXRhdGlvbi50eXBlICsgKGF0dHJOYW1lID8gJ18nICsgYXR0ck5hbWUgOiAnJylcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAnaW5pdF9vYnNlcnZlcl9pbml0X2VsZW1lbnRzJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIOWIm+W7uuinguWvn+iAheWvueixoe+8jOazqOaEj+S4jeiDveWkmuasoW5ldyBNT2JzZXJ2ZXLvvIzkvJrmnInmgKfog73pl67popggQOiwi+WjqyAyMDE4LTA0LTEwXG4gICAgaWYgKCF0aGlzLl9vYnNlcnZlcikge1xuICAgICAgdGhpcy5fb2JzZXJ2ZXIgPSBuZXcgTU9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcbiAgICAgICAgLy8g5aKe6YeP5pu05pawIGluIDIwMTctMTEtMTdcbiAgICAgICAgaWYgKG11dGF0aW9ucyAmJiBtdXRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBtdXRhdGlvbnNbaV0gfHwge307XG4gICAgICAgICAgICAvLyDlop7ph4/mm7TmlrAg55uR5ZCs5bGe5oCn5Y+Y5YyW5Lul5YW85a65ZGlzcGxheTpub25lL2Jsb2Nr562J5YWD57Sg5Y+Y5YyWIGluIDIwMTctMTEtMjdcbiAgICAgICAgICAgIHZhciBub2RlcyA9IHV0aWxfYWNfYWUubm9kZWxpc3RUb0FycmF5KG11dGF0aW9uLmFkZGVkTm9kZXMgfHwgW10pO1xuICAgICAgICAgICAgbm9kZXMgPSB1dGlsX2FjX2FlLm5vZGVsaXN0VG9BcnJheShnZXRBdHRyc0NoYXJzTm9kZXMobXV0YXRpb24pLCBub2Rlcyk7XG4gICAgICAgICAgICBlYWNoX25vZGVzKG5vZGVzLCBtdXRhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTsgIFxuICAgIH1cbiAgICBcbiAgICAvLyDphY3nva7op4Llr5/pgInpobk6XG4gICAgdmFyIF9jZmcgPSB7XG4gICAgICBhdHRyaWJ1dGVzOiB0cnVlLCAgICAvLyDlsZ7mgKfnmoTlj5jliqhcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSwgICAgIC8vIOWtkOiKgueCueeahOWPmOWKqFxuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSwgLy8g6IqC54K55YaF5a655oiW6IqC54K55paH5pys55qE5Y+Y5YqoXG4gICAgICBzdWJ0cmVlOiB0cnVlLCAgICAgICAvLyDmiYDmnInlkI7ku6PoioLngrnnmoTlj5jliqhcbiAgICB9O1xuXG4gICAgLy8g5Lyg5YWl55uu5qCH6IqC54K55ZKM6KeC5a+f6YCJ6aG5XG4gICAgdGhpcy5fb2JzZXJ2ZXIub2JzZXJ2ZShkb2MuYm9keSwgX2NmZyk7XG4gICAgaWYgKHV0aWxfYWNfYWUuSVNfREVCVUcpIHtcbiAgICAgIHVsb2coKS53KCdhcGx1c19hdXRvX2V4cCBpbml0IE11dGF0aW9uT2JzZXJ2ZXIgc3VjY2VzcyEnKTtcbiAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIC8vICAgbXNnOiAnYXBsdXNfYXV0b19leHAgaW5pdCBNdXRhdGlvbk9ic2VydmVyIHN1Y2Nlc3MhJ1xuICAgICAgLy8gfSk7XG4gICAgfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHZhciBfYWUgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG4gICAgaWYgKG9wdHMgJiYgb3B0cy50eXBlICE9PSAncmVzZXQnICYmICFfYWUuaGFzaF92YWx1ZSkge1xuICAgICAgX2FlLmhhc2hfdmFsdWUgPSB7fTtcbiAgICB9XG5cbiAgICBfc2VsZi5oYW5kbGVyX2RvbV9jaGFuZ2UobnVsbCwge1xuICAgICAgdHlwZTogJ2FwbHVzX2luaXQnXG4gICAgfSk7XG5cbiAgICAvLyBzdGVwMiDnm5HlkKxkb23lj5jljJZcbiAgICB2YXIgTU9ic2VydmVyID0gd2luLk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luLk1vek11dGF0aW9uT2JzZXJ2ZXI7XG4gICAgaWYgKE1PYnNlcnZlcikge1xuICAgICAgX2FlLm9ic2VydmVyX3RpbWVzID0gMDtcbiAgICAgIC8vIOWinumHj+abtOaWsOW+heabneWFieeahOWFg+e0oO+8jOW5tuWIneWni+WMluWFg+e0oOWdkOagh1xuICAgICAgX3NlbGYuaW5pdF9vYnNlcnZlcihNT2JzZXJ2ZXIsIGZ1bmN0aW9uIChlbGUsIG9wdHMpIHtcbiAgICAgICAgdmFyIF9lbGUgPSBlbGUgJiYgZWxlLnBhcmVudEVsZW1lbnQgPyBlbGUucGFyZW50RWxlbWVudCA6IGVsZTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ19zZWxmLmlzVGhyb3R0bGVXYXRjaCA9ICcgKyBfc2VsZi5pc1Rocm90dGxlV2F0Y2gpO1xuICAgICAgICAvLyBpZiAoX3NlbGYuaXNUaHJvdHRsZVdhdGNoKSB7XG4gICAgICAgIF9zZWxmLnRocm90dGxlX2hhbmRsZXJfZG9tX2NoYW5nZShfZWxlLCBvcHRzKTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICBfc2VsZi5oYW5kbGVyX2RvbV9jaGFuZ2UoX2VsZSwgb3B0cyk7XG4gICAgICAgIC8vIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDlop7liqDlkITnp43nm5HlkKxcbiAgICAgIF9zZWxmLmFkZEFsbExpc3RlbmVyKCk7XG4gICAgfVxuICB9LFxuXG4gIGNsZWFyOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYgKG9wdHMgJiYgb3B0cy5mcm9tID09PSAnYXBwZW5kTWV0YUluZm8nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSBhcGx1cy5fYXBsdXNfYXV0b19leHAgfHwge307XG4gICAgaWYgKF9hcGx1c19hdXRvX2V4cC5fYWNIYXNoTWFwKSB7XG4gICAgICBfYXBsdXNfYXV0b19leHAuX2FjSGFzaE1hcCA9IHt9O1xuICAgIH1cbiAgICBpZiAoX2FwbHVzX2F1dG9fZXhwLmhhc2hfdmFsdWUpIHtcbiAgICAgIF9hcGx1c19hdXRvX2V4cC5oYXNoX3ZhbHVlID0ge307XG4gICAgfVxuICAgIGFwbHVzLl9hcGx1c19hdXRvX2V4cCA9IF9hcGx1c19hdXRvX2V4cDtcbiAgICAvLyDmuIXpmaTova7or6Lnm5HlkKxcbiAgICBpZiAodGhpcy5fbG9vcF9vYnNlcnZlcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2xvb3Bfb2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5fbG9vcF9vYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICAgIC8vIOiuqeivpeinguWvn+iAheWvueixoeWBnOatouinguWvn+aMh+Wumuebruagh+eahERPTeWPmOWMli7nm7TliLDlho3mrKHosIPnlKjlhbZvYnNlcnZlKCnmlrnms5Us6K+l6KeC5a+f6ICF5a+56LGh5YyF5ZCr55qE5Zue6LCD5Ye95pWw6YO95LiN5Lya5YaN6KKr6LCD55SoLlxuICAgIGlmICh0aGlzLl9vYnNlcnZlcikge1xuICAgICAgdGhpcy5fb2JzZXJ2ZXIudGFrZVJlY29yZHMoKTsgLy8g5riF56m66KeC5a+f6ICF5a+56LGh55qE6K6w5b2V6Zif5YiXLOW5tui/lOWbnumHjOmdoueahOWGheWuuS5cbiAgICAgIHRoaXMuX29ic2VydmVyLmRpc2Nvbm5lY3QoKTsgLy8g5YGc5q2i6KeC5a+f5oyH5a6a55uu5qCH55qERE9N5Y+Y5YyWLuebtOWIsOWGjeasoeiwg+eUqOWFtm9ic2VydmUoKeaWueazlVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyDnp7vpmaTlkITnp43nm5HlkKxcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXIoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWwneivleWcqOmdnuWinumHj+abtOaWsOiHquWKqOabneWFieWfi+eCuemFjee9ruWcuuaZr+S4i+a4heeQhmRvbeiKgueCueS4iueahOiHquWKqOabneWFieagh+W/l1xuICAgKiBAcGFyYW1zIG9iaiB7T2JqZWN0fSB7XG4gICAqICAgYXV0b0V4cENvbmZpZzogW3tcbiAgICogICAgIGNzc1NlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG4gICAqICAgICBlbGVtZW50U2VsZWN0b3I6IFwiRElWW2xvZ2tleT1cIi9kYWN1LjEuMS4xXCJdXCJcbiAgICogICAgIGxvZ2tleTogXCIvZGFjdS4xLjEuMVwiXG4gICAqICAgICBwcm9wczogW1wiX2xrYVwiXVxuICAgKiAgIH1dLFxuICAgKiAgIGlzVGhyb3R0bGVXYXRjaDogZmFsc2VcbiAgICogfVxuICAgKiBAcGFyYW1zIG9wdHMge09iamVjdH0ge1xuICAgKiAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcbiAgICogfVxuICAgKi9cbiAgY2xlYXJEb206IGZ1bmN0aW9uKG9iaiwgb3B0cykge1xuICAgIHZhciBfZXhwQ29uZmlnID0gdGhpcy5hdXRvRXhwQ29uZmlnIHx8IFtdO1xuICAgIGlmIChvcHRzICYmIG9wdHMuZnJvbSAhPT0gJ2FwcGVuZE1ldGFJbmZvJykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfZXhwQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIGVsZW1lbnRTZWxlY3RvciA9IF9leHBDb25maWdbaV0uZWxlbWVudFNlbGVjdG9yO1xuICAgICAgICAgIHZhciBfZG9jcyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRTZWxlY3Rvcik7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9jcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgX2RvY3Nbal0uc2V0QXR0cmlidXRlKGNvbmZpZy5EQVRBX0FQTFVTX0FFX0tFWSwgJycpOyAgXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmF1dG9FeHBDb25maWcgPSBvYmogJiYgb2JqLmF1dG9FeHBDb25maWcgPyBvYmouYXV0b0V4cENvbmZpZyA6IFtdO1xuICAgIC8vIHRoaXMuaXNUaHJvdHRsZVdhdGNoID0gb2JqID8gb2JqLmlzVGhyb3R0bGVXYXRjaCA6IGZhbHNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiDph43nva5kb23oioLngrnkuIrnmoToh6rliqjmm53lhYnmoIflv5cgJiYg6YeN5paw5Yid5aeL5YyWd2F0Y2hET01cbiAgICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuICAgKiAgIGF1dG9FeHBDb25maWc6IFt7XG4gICAqICAgICBjc3NTZWxlY3RvcjogXCJESVZbbG9na2V5PVwiL2RhY3UuMS4xLjFcIl1cIlxuICAgKiAgICAgZWxlbWVudFNlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG4gICAqICAgICBsb2drZXk6IFwiL2RhY3UuMS4xLjFcIlxuICAgKiAgICAgcHJvcHM6IFtcIl9sa2FcIl1cbiAgICogICB9XSxcbiAgICogICBpc1Rocm90dGxlV2F0Y2g6IGZhbHNlXG4gICAqIH1cbiAgICogQHBhcmFtcyBvcHRzIHtPYmplY3R9IHtcbiAgICogICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG4gICAqIH1cbiAgICovXG4gIHJlc2V0OiBmdW5jdGlvbiAob2JqLCBvcHRzKSB7XG4gICAgdGhpcy5jbGVhckRvbShvYmosIG9wdHMpO1xuICAgIHRoaXMuaW5pdCh7dHlwZTogJ3Jlc2V0J30pO1xuICB9XG59KTtcbm1vZHVsZS5leHBvcnRzID0gV2F0Y2hEb207XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfYWUvd2F0Y2hET00uanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciBjb25maWcgPSByZXF1aXJlKCcuLi8uLi9saWJfY29tbW9uL2NvbmZpZycpO1xuXG52YXIgZG9jID0gZG9jdW1lbnQ7XG5cbi8qKlxuICog5Yik5pat5p+Q5LiA5Liq5Z2Q5qCH5piv5ZCm5Zyo5Y+v6KeG56qX5YaF77yM5Y+q6ZyA6KaB5Yik5pat5Y+v6KeG56qX55qE5bem5LiK6KeS5LiO5Y+z5LiL6KeS5Y2z5Y+vXG4gKiBAcGFyYW1zIHtPYmplY3R9IHdpblBvc2l0aW9uc1xuICogQHBhcmFtcyB7T2JqZWN0fSB2IDogeyB4OiAxLCB5MSB9XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xudmFyIHBvc2l0aW9uSXNJbldpbiA9IGZ1bmN0aW9uKHdpblBvc2l0aW9ucywgdikge1xuICBpZiAodi54ID49IHdpblBvc2l0aW9ucy5wTGVmdFRvcFswXVxuICAgJiYgdi54IDw9IHdpblBvc2l0aW9ucy5wUmlnaHRCb3R0b21bMF1cbiAgICYmIHYueSA+PSB3aW5Qb3NpdGlvbnMucExlZnRUb3BbMV1cbiAgICYmIHYueSA8PSB3aW5Qb3NpdGlvbnMucFJpZ2h0Qm90dG9tWzFdKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG4vKipcbiAqIOagueaNruWPr+inhueql+Wbm+S4qumhtueCueeahOWdkOagh+mbhuWSjOW9k+WJjeWFg+e0oOWBmuiuoeeul++8jOWIpOaWreW9k+WJjeWFg+e0oOWcqOWPr+inhueql+WGheeahOmdouenr+S4juWFg+e0oOacrOi6q+eahOmdouenr+avlOS+i++8jOWNs+WPr+inhueOh1xuICogQHBhcmFtcyB7T2JqZWN0fSB3aW5Qb3NpdGlvbnNcbiAqIEBwYXJhbXMge0VsZW1lbnR9IHZcbiAqXG4gKiBAcmV0dXJuIHtGbG9hdH0gcmF0ZSAwLjNcXDAuMVxcMC45XFwxIC4uLi4uLlxuICovXG52YXIgZ2V0Vmlld2FiaWxpdHlSYXRlID0gZnVuY3Rpb24od2luUG9zaXRpb25zLCB2KSB7XG4gIHZhciByYXRlID0gMDtcbiAgLy8gMeOAgeW3puS4iuinkuaYr+WQpuWcqOWPr+inhueql+WGhVxuICB2YXIgZWxlTGVmdFRvcElzSW5XaW4gPSBwb3NpdGlvbklzSW5XaW4od2luUG9zaXRpb25zLCB2KTtcblxuICAvLyAy44CB5Y+z5LiK6KeS5piv5ZCm5Zyo5Y+v6KeG56qX5YaFXG4gIHZhciBlbGVSaWdodFRvcElzSW5XaW4gPSBwb3NpdGlvbklzSW5XaW4od2luUG9zaXRpb25zLCB7XG4gICAgJ3gnOiB2LnggKyB2LndpZHRoLFxuICAgICd5Jzogdi55XG4gIH0pO1xuXG4gIC8vIDPjgIHlt6bkuIvop5LmmK/lkKblnKjlj6/op4bnqpflhoVcbiAgdmFyIGVsZUxlZnRCb3R0b21Jc0luV2luID0gcG9zaXRpb25Jc0luV2luKHdpblBvc2l0aW9ucywge1xuICAgICd4Jzogdi54LFxuICAgICd5Jzogdi55ICsgdi5oZWlnaHRcbiAgfSk7XG5cbiAgLy8gNOOAgeWPs+S4i+inkuaYr+WQpuWcqOWPr+inhueql+WGhVxuICB2YXIgZWxlUmlnaHRCb3R0b21Jc0luV2luID0gcG9zaXRpb25Jc0luV2luKHdpblBvc2l0aW9ucywge1xuICAgICd4Jzogdi54ICsgdi53aWR0aCxcbiAgICAneSc6IHYueSArIHYuaGVpZ2h0XG4gIH0pO1xuXG4gIC8vID09PT09PSAx44CB5pW05Liq5Ye6546wID09PT09PVxuICB2YXIgZnVsbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBycyA9IDA7XG4gICAgaWYgKGVsZUxlZnRUb3BJc0luV2luICYmIGVsZVJpZ2h0Qm90dG9tSXNJbldpbikge1xuICAgICAgLy8gVE9ETyDnm7TmjqXnrpfmm53lhYlcbiAgICAgIHJzID0gdi5zaXplIC8gdi5zaXplO1xuICAgIH1cbiAgICByZXR1cm4gcnM7XG4gIH07XG5cbiAgLy8gPT09PT09IDLjgIHkuIDovrnlh7rnjrAgPT09PT09XG4gIHZhciBoYWxmID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHdpZHRoID0gMCwgaGVpZ2h0ID0gMDtcbiAgICBpZiAoZWxlTGVmdFRvcElzSW5XaW4gJiYgZWxlUmlnaHRUb3BJc0luV2luICYmICFlbGVMZWZ0Qm90dG9tSXNJbldpbiAmJiAhZWxlUmlnaHRCb3R0b21Jc0luV2luKSB7XG4gICAgICAvLyAyLjHjgIHkuIrljYrpg6jliIblh7rnjrDlnKjlj6/op4bnqpflhoVcbiAgICAgIHdpZHRoID0gdi53aWR0aDtcbiAgICAgIGhlaWdodCA9IHdpblBvc2l0aW9ucy5wTGVmdEJvdHRvbVsxXSAtIHYueTtcbiAgICB9IGVsc2UgaWYgKCFlbGVMZWZ0VG9wSXNJbldpbiAmJiBlbGVSaWdodFRvcElzSW5XaW4gJiYgIWVsZUxlZnRCb3R0b21Jc0luV2luICYmIGVsZVJpZ2h0Qm90dG9tSXNJbldpbikge1xuICAgICAgLy8gMi4y44CB5Y+z5Y2K6YOo5YiG5Ye6546w5Zyo5Y+v6KeG56qX5YaFXG4gICAgICB3aWR0aCA9IHdpblBvc2l0aW9ucy5wTGVmdFRvcFswXSAtIHYueDtcbiAgICAgIGhlaWdodCA9IHYueTtcbiAgICB9IGVsc2UgaWYgKCFlbGVMZWZ0VG9wSXNJbldpbiAmJiAhZWxlUmlnaHRUb3BJc0luV2luICYmIGVsZUxlZnRCb3R0b21Jc0luV2luICYmIGVsZVJpZ2h0Qm90dG9tSXNJbldpbikge1xuICAgICAgLy8gMi4z44CB5LiL5Y2K6YOo5YiG5Ye6546w5Zyo5Y+v6KeG56qX5YaFXG4gICAgICB3aWR0aCA9IHYud2lkdGg7XG4gICAgICAvLyBoZWlnaHQgPSB3aW5Qb3NpdGlvbnMucExlZnRUb3BbMV0gLSB2Lnk7XG4gICAgICBoZWlnaHQgPSB2LmhlaWdodCAtIE1hdGguYWJzKHdpblBvc2l0aW9ucy5wTGVmdFRvcFsxXSAtIHYueSk7XG4gICAgfSBlbHNlIGlmIChlbGVMZWZ0VG9wSXNJbldpbiAmJiAhZWxlUmlnaHRUb3BJc0luV2luICYmIGVsZUxlZnRCb3R0b21Jc0luV2luICYmICFlbGVSaWdodEJvdHRvbUlzSW5XaW4pIHtcbiAgICAgIC8vIDIuNOOAgeW3puWNiumDqOWIhuWHuueOsOWcqOWPr+inhueql+WGhVxuICAgICAgd2lkdGggPSB3aW5Qb3NpdGlvbnMucFJpZ2h0VG9wWzBdIC0gdi54O1xuICAgICAgLy8gaGVpZ2h0ID0gdi55O1xuICAgICAgaGVpZ2h0ID0gdi5oZWlnaHQ7XG4gICAgfVxuICAgIHJldHVybiB2LnNpemUgPiAwID8gTWF0aC5hYnMod2lkdGggKiBoZWlnaHQpIC8gdi5zaXplIDogMDtcbiAgfTtcblxuICAvLyA9PT09PT0gM+OAgeS4gOS4quinkuWHuueOsCA9PT09PT1cbiAgdmFyIGNvcm5lciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB3aWR0aCA9IDAsIGhlaWdodCA9IDA7XG4gICAgaWYgKGVsZUxlZnRUb3BJc0luV2luICYmICFlbGVSaWdodFRvcElzSW5XaW4gJiYgIWVsZUxlZnRCb3R0b21Jc0luV2luICYmICFlbGVSaWdodEJvdHRvbUlzSW5XaW4pIHtcbiAgICAgIC8vIDMuMeOAgeW3puS4iuinkuWHuueOsOWcqOWPr+inhueql+WGhVxuICAgICAgd2lkdGggPSB3aW5Qb3NpdGlvbnMucFJpZ2h0Qm90dG9tWzBdIC0gdi54O1xuICAgICAgaGVpZ2h0ID0gd2luUG9zaXRpb25zLnBSaWdodEJvdHRvbVsxXSAtIHYueTtcbiAgICB9IGVsc2UgaWYgKCFlbGVMZWZ0VG9wSXNJbldpbiAmJiBlbGVSaWdodFRvcElzSW5XaW4gJiYgIWVsZUxlZnRCb3R0b21Jc0luV2luICYmICFlbGVSaWdodEJvdHRvbUlzSW5XaW4pIHtcbiAgICAgIC8vIDMuMuOAgeWPs+S4iuinkuWHuueOsOWcqOWPr+inhueql+WGhVxuICAgICAgd2lkdGggPSB3aW5Qb3NpdGlvbnMucExlZnRCb3R0b21bMF0gLSB2Lng7XG4gICAgICBoZWlnaHQgPSB3aW5Qb3NpdGlvbnMucExlZnRCb3R0b21bMV0gLSB2Lnk7XG4gICAgfSBlbHNlIGlmICghZWxlTGVmdFRvcElzSW5XaW4gJiYgIWVsZVJpZ2h0VG9wSXNJbldpbiAmJiBlbGVMZWZ0Qm90dG9tSXNJbldpbiAmJiAhZWxlUmlnaHRCb3R0b21Jc0luV2luKSB7XG4gICAgICAvLyAzLjPjgIHlt6bkuIvop5Llh7rnjrDlnKjlj6/op4bnqpflhoVcbiAgICAgIHdpZHRoID0gd2luUG9zaXRpb25zLnBSaWdodFRvcFswXSAtIHYueDtcbiAgICAgIGhlaWdodCA9IHdpblBvc2l0aW9ucy5wUmlnaHRUb3BbMV0gLSB2Lnk7XG4gICAgfSBlbHNlIGlmICghZWxlTGVmdFRvcElzSW5XaW4gJiYgIWVsZVJpZ2h0VG9wSXNJbldpbiAmJiAhZWxlTGVmdEJvdHRvbUlzSW5XaW4gJiYgZWxlUmlnaHRCb3R0b21Jc0luV2luKSB7XG4gICAgICAvLyAzLjTjgIHlj7PkuIvop5Llh7rnjrDlnKjlj6/op4bnqpflhoVcbiAgICAgIHdpZHRoID0gd2luUG9zaXRpb25zLnBMZWZ0VG9wWzBdIC0gdi54O1xuICAgICAgaGVpZ2h0ID0gd2luUG9zaXRpb25zLnBMZWZ0VG9wWzFdIC0gdi55O1xuICAgIH1cbiAgICByZXR1cm4gdi5zaXplID4gMCA/IE1hdGguYWJzKHdpZHRoICogaGVpZ2h0KSAvIHYuc2l6ZSA6IDA7XG4gIH07XG5cbiAgLy8g6L+Z6YeM5LuO5aSn5Yiw5bCP55qE6aG65bqP5LiN6IO95pS5IDHjgIFmdWxsID0+IDLjgIFoYWxmID0+IDPjgIFjb3JuZXJcbiAgcmF0ZSA9IGZ1bGwoKTtcbiAgaWYgKHJhdGUgPiAwKSB7XG4gICAgcmV0dXJuIHJhdGU7XG4gIH1cblxuICByYXRlID0gaGFsZigpO1xuICBpZiAocmF0ZSA+IDApIHtcbiAgICByZXR1cm4gcmF0ZTtcbiAgfVxuXG4gIHJhdGUgPSBjb3JuZXIoKTtcbiAgaWYgKHJhdGUgPiAwKSB7XG4gICAgcmV0dXJuIHJhdGU7XG4gIH1cblxuICByZXR1cm4gcmF0ZTtcbn07XG5cbmV4cG9ydHMud3JhcFZpZXdhYmlsaXR5UmF0ZSA9IGZ1bmN0aW9uKHdpblBvc2l0aW9ucywgdiwgQUNfUkFURSkge1xuICB2YXIgcmF0ZSA9IDA7XG4gIGlmICh3aW5Qb3NpdGlvbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpblBvc2l0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgcmF0ZSA9IGdldFZpZXdhYmlsaXR5UmF0ZSh3aW5Qb3NpdGlvbnNbaV0sIHYpO1xuICAgICAgaWYgKHJhdGUgPCBBQ19SQVRFKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJhdGU7XG59O1xuXG4vLyDojrflj5blvZPliY3lhYPntKDnmoRY5oiWWeWdkOaghywgVE9ET+azqOaEj3Bvc2l0aW9u5a6a5L2N6Zeu6aKYXG4vLyB2YXIgZ2V0RWxlbWVudE9mZnNldCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHR5cGUpIHtcbi8vICAgdmFyIGFjdHVhbE9mZnNldCA9IGVsZW1lbnRbdHlwZV07XG4vLyAgIHZhciBjdXJyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG5cbi8vICAgdmFyIHBvc2l0aW9uID0gY3VycmVudCAmJiBjdXJyZW50LnN0eWxlID8gY3VycmVudC5zdHlsZS5wb3NpdGlvbiA6ICdzdGF0aWMnO1xuLy8gICB3aGlsZSAoY3VycmVudCAhPT0gbnVsbCAmJiBwb3NpdGlvbiAhPT0gJ3JlbGF0aXZlJykge1xuLy8gICAgIGFjdHVhbE9mZnNldCArPSBjdXJyZW50W3R5cGVdO1xuLy8gICAgIGN1cnJlbnQgPSBjdXJyZW50Lm9mZnNldFBhcmVudDtcbi8vICAgfVxuLy8gICByZXR1cm4gYWN0dWFsT2Zmc2V0O1xuLy8gfTtcblxudmFyIGlzTnVtYmVyID0gZnVuY3Rpb24gKG4pIHtcbiAgcmV0dXJuIHR5cGVvZiBuID09PSAnbnVtYmVyJyAmJiBuICE9PSBOYU47XG59O1xuXG4vKipcbiAqIEBwYXJhbXMgZWxlbWVudFxuICogQHJldHVybiB7XG4gICAgIHdpZHRoOiAxNTkuOTg0Mzc1LCAvLyBtdXN0XG4gICAgIGhlaWdodDogMTYsICAgICAgICAvLyBtdXN0XG4gICAgIHg6IDY4LCAgICAgICAgICAgICAvLyBtdXN0XG4gICAgIHk6IDE0MTksICAgICAgICAgICAvLyBtdXN0XG4gICAgIGJvdHRvbTogMTQzNSwgICAgICAvLyBlbmFibGVcbiAgICAgbGVmdDogNjgsICAgICAgICAgIC8vIGVuYWJsZVxuICAgICByaWdodDogMjI3Ljk4NDM3NSwgLy8gZW5hYmxlXG4gICAgIHRvcDogMTQxOSwgICAgICAgICAvLyBlbmFibGVcbiAgIH1cbiAqL1xudmFyIGdldEVsZW1lbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHZhciBwb3MgPSB7fTtcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwb3MgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIHx8IHt9O1xuICAgIH1cbiAgICAvLyDmqKrlnZDmoIdcbiAgICBpZiAoIWlzTnVtYmVyKHBvcy54KSkge1xuICAgICAgaWYgKGlzTnVtYmVyKHBvcy5sZWZ0KSkge1xuICAgICAgICBwb3MueCA9IHBvcy5sZWZ0O1xuICAgICAgfVxuICAgICAgLy8gZWxzZSB7XG4gICAgICAvLyAgIHBvcy54ID0gZ2V0RWxlbWVudE9mZnNldChlbGVtZW50LCAnb2Zmc2V0TGVmdCcpO1xuICAgICAgLy8gfVxuICAgIH1cbiAgICAvLyDnurXlnZDmoIdcbiAgICBpZiAoIWlzTnVtYmVyKHBvcy55KSkge1xuICAgICAgaWYgKGlzTnVtYmVyKHBvcy50b3ApKSB7XG4gICAgICAgIHBvcy55ID0gcG9zLnRvcDtcbiAgICAgIH1cbiAgICAgIC8vIGVsc2Uge1xuICAgICAgLy8gICBwb3MueSA9IGdldEVsZW1lbnRPZmZzZXQoZWxlbWVudCwgJ29mZnNldFRvcCcpO1xuICAgICAgLy8gfVxuICAgIH1cbiAgICBpZiAoIWlzTnVtYmVyKHBvcy53aWR0aCkpIHtcbiAgICAgIHBvcy53aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgfVxuICAgIGlmICghaXNOdW1iZXIocG9zLmhlaWdodCkpIHtcbiAgICAgIHBvcy5oZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvcztcbn07XG5leHBvcnRzLmdldEVsZW1lbnRQb3NpdGlvbiA9IGdldEVsZW1lbnRQb3NpdGlvbjtcblxuLyoqXG4gKiBAcGFyYW1zIHtTdHJpbmd9IHBvc2l0aW9uU2VsZWN0b3IgKGVuYWJsZSkgLy8gZWc6IGRpdi5jbGFzc05hbWVcbiAqIOiOt+WPluWPr+inhueql+eahOWbm+S4quWfuuacrOWPguaVsGNsaWVudFdpZHRo44CBY2xpZW50SGVpZ2h044CBc2Nyb2xsVG9w44CBc2Nyb2xsTGVmdFxuICpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZXhwb3J0cy5nZXRXaW5Qb3NpdGlvbnMgPSBmdW5jdGlvbihwb3NpdGlvblNlbGVjdG9yKSB7XG4gIHZhciBwb3N0aW9ucyA9IFtdO1xuICBpZiAocG9zaXRpb25TZWxlY3RvciAmJiB0eXBlb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzZWxlY3RvckVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9zaXRpb25TZWxlY3Rvcik7XG4gICAgaWYgKHNlbGVjdG9yRWxlKSB7XG4gICAgICB2YXIgX3BvcyA9IGdldEVsZW1lbnRQb3NpdGlvbihzZWxlY3RvckVsZSkgfHwge307XG4gICAgICBpZiAoaXNOdW1iZXIoX3Bvcy54KSAmJiBpc051bWJlcihfcG9zLnkpICYmIGlzTnVtYmVyKF9wb3Mud2lkdGgpICYmIGlzTnVtYmVyKF9wb3MuaGVpZ2h0KSkge1xuICAgICAgICBwb3N0aW9ucy5wdXNoKHtcbiAgICAgICAgICBwTGVmdFRvcDogW19wb3MueCwgX3Bvcy55XSxcbiAgICAgICAgICBwUmlnaHRUb3A6IFtfcG9zLnggKyBfcG9zLndpZHRoLCBfcG9zLnldLFxuICAgICAgICAgIHBMZWZ0Qm90dG9tOiBbX3Bvcy54LCBfcG9zLnkgKyBfcG9zLmhlaWdodF0sXG4gICAgICAgICAgcFJpZ2h0Qm90dG9tOiBbX3Bvcy54ICsgX3Bvcy53aWR0aCwgX3Bvcy55ICsgX3Bvcy5oZWlnaHRdXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB2YXIgZWxlMSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBlbGUyID0gZG9jLmJvZHk7XG4gIHZhciBjbGllbnRXaWR0aCA9IGVsZTEuY2xpZW50V2lkdGggfHwgZWxlMi5vZmZzZXRXaWR0aCB8fCAwO1xuICB2YXIgY2xpZW50SGVpZ2h0ID0gZWxlMS5jbGllbnRIZWlnaHQgfHwgZWxlMi5vZmZzZXRIZWlnaHQgfHwgMDtcbiAgcG9zdGlvbnMucHVzaCh7XG4gICAgcExlZnRUb3A6IFswLCAwXSxcbiAgICBwUmlnaHRUb3A6IFtjbGllbnRXaWR0aCwgMF0sXG4gICAgcExlZnRCb3R0b206IFswLCBjbGllbnRIZWlnaHRdLFxuICAgIHBSaWdodEJvdHRvbTogW2NsaWVudFdpZHRoLCBjbGllbnRIZWlnaHRdXG4gIH0pO1xuICByZXR1cm4gcG9zdGlvbnM7XG59O1xuXG4vLyDpqozor4HmmK/lkKblt7Lmm53lhYlcbmV4cG9ydHMuY2hlY2tJc1JlY29yZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9sZF9oYXNoX3ZhbHVlLCBhcGx1c0RvbUF0dHJLZXkpIHtcbiAgdmFyIGlzUmVjb3JkO1xuICB0cnkge1xuICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKSB7XG4gICAgICB2YXIgYXR0cl92YWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGFwbHVzRG9tQXR0cktleSkgfHwgJyc7XG4gICAgICBpc1JlY29yZCA9IG9sZF9oYXNoX3ZhbHVlID8gYXR0cl92YWx1ZSA9PT0gb2xkX2hhc2hfdmFsdWUgOiAhIWF0dHJfdmFsdWU7XG4gICAgfVxuICB9IGNhdGNoKGUpIHt9XG4gIC8vIGNvbnNvbGUubG9nKCdpc1JlY29yZCA9ICcgKyBpc1JlY29yZCk7XG4gIHJldHVybiBpc1JlY29yZDtcbn07XG5cbmV4cG9ydHMuZ2V0Vmlld2FiaWxpdHlSYXRlSW5XaW5kb3cgPSBmdW5jdGlvbih3aW5Qb3NpdGlvbnMsIGVsZW1lbnRBcmVhLCBBQ19SQVRFKSB7XG4gIHZhciByYXRlID0gMDtcbiAgaWYgKHdpblBvc2l0aW9ucykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2luUG9zaXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICByYXRlID0gZWxlbWVudEFyZWEgLyB3aW5Qb3NpdGlvbnNbaV0uc2l6ZTtcbiAgICAgIGlmIChyYXRlID49IEFDX1JBVEUpIHtcbiAgICAgICAgcmV0dXJuIHJhdGU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByYXRlO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9hZS91dGlsL3V0aWxFbGVtZW50QWMuanNcbi8vIG1vZHVsZSBpZCA9IDYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciB1dGlsRXZlbnQgPSByZXF1aXJlKCcuL3V0aWwvZXZlbnQnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG5cbnZhciB1dGlsRXhwb3N1cmUgPSByZXF1aXJlKCcuL3V0aWwvdXRpbEV4cG9zdXJlJyk7XG52YXIgdXRpbEVsZW1lbnRBYyA9IHJlcXVpcmUoJy4vdXRpbC91dGlsRWxlbWVudEFjJyk7XG5cbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi9saWJfY29tbW9uL2NvbmZpZycpO1xudmFyIHV0aWxfYWNfYWUgPSByZXF1aXJlKCcuLi9saWJfY29tbW9uL3V0aWxfYWNfYWUnKTtcbi8vIOiHquWKqOabneWFieaJk+eCuSAtIOWIpOWumuWPr+inhueahOavlOS+i+eOh1xudmFyIEFDX1JBVEUgPSBjb25maWcuQVVUT19BVF9WSUVXX1JBVEU7XG52YXIgQUNfUkFURV9JTl9XSU5ET1cgPSBjb25maWcuQVVUT19BVF9WSUVXX1JBVEVfSU5fV0lORE9XO1xudmFyIHdpbiA9IHdpbmRvdztcbnZhciBJT2JzZXJ2ZXIgPSB3aW4uSW50ZXJzZWN0aW9uT2JzZXJ2ZXI7XG52YXIgaW9ic2VydmVyTWFwID0ge307XG5cbi8vIHZhciBhcGx1cyA9ICh3aW5kb3cuYXBsdXMgfHwgKHdpbmRvdy5hcGx1cyA9IHt9KSk7XG5hcGx1cy5fYXBsdXNfYXV0b19leHAuaW9ic2VydmVyTWFwID0gaW9ic2VydmVyTWFwO1xuLyoqXG4gKiDmoLnmja7lvoXmm53lhYnnmoTlhYPntKDliJfooajmo4Dmn6XmnKzmrKHmu5rova7miJbogIXnqpflj6PlpKflsI/lj5jljJbop6blj5HnmoTlhYPntKDmmK/lkKblnKjlj6/op4bnqpflhoXvvIjmm53lhYnvvIlcbiAqIOWwhuafpeivouWIsOeahOWkhOS6juabneWFieeKtuaAgeeahOWFg+e0oOeKtuaAge+8iHN0YXR1c++8ieWxnuaAp+WAvOaUueS4uuKAnDHigJ3vvIzorr7nva7liJ3lp4vmm53lhYnml7bpl7RleHBvc3VyZVRpbWVcbiAqIOW5tui/lOWbnuacrOasoeS6i+S7tuinpuWPkeeahOabneWFieWFg+e0oOeahOadoeaVsFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIHtcbiAqICBib3VuZGluZ0NsaWVudFJlY3Q6IHtcbiAqICAgICBib3R0b206IDE0MVxuICogICAgIGhlaWdodDogNDUyXG4gKiAgICAgbGVmdDogNFxuICogICAgIHJpZ2h0OiAxODhcbiAqICAgICB0b3A6IC0zMTFcbiAqICAgICB3aWR0aDogMTg0XG4gKiAgICAgeDogNFxuICogICAgIHk6IC0zMTFcbiAqICB9LFxuICogIGludGVyc2VjdGlvblJhdGlvOiAwLjMxMTk0Njg5ODY5ODgwNjc2LFxuICogIGludGVyc2VjdGlvblJlY3Q6IHtcbiAqICAgICBib3R0b206IDUyMVxuICogICAgIGhlaWdodDogNDAwXG4gKiAgICAgbGVmdDogMFxuICogICAgIHJpZ2h0OiAzNzVcbiAqICAgICB0b3A6IDEyMVxuICogICAgIHdpZHRoOiAzNzVcbiAqICAgICB4OiAwXG4gKiAgICAgeTogMTIxXG4gKiAgfSxcbiAqICBpc0ludGVyc2VjdGluZzogdHJ1ZSB8fCBmYWxzZSxcbiAqICByb290Qm91bmRzOiB7XG4gKiAgICAgYm90dG9tOiA4MTJcbiAqICAgICBoZWlnaHQ6IDgxMlxuICogICAgIGxlZnQ6IDBcbiAqICAgICByaWdodDogMzc1XG4gKiAgICAgdG9wOiAwXG4gKiAgICAgd2lkdGg6IDM3NVxuICogICAgIHg6IDBcbiAqICAgICB5OiAwXG4gKiAgfSxcbiAqICB0YXJnZXQ6IEVsZW1lbnQsXG4gKiAgdGltZTogMTg3Ny40OTk5OTk5NDQxMjA2XG4gKiB9XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHNpemUgLy8g5pys5qyh5LqL5Lu26Kem5Y+R55qE5pud5YWJ5YWD57Sg55qE5p2h5pWwXG4gKi9cbmZ1bmN0aW9uIGZpbHRlclN0YXJ0RXhwb3N1cmVTaXplKGV4cG9zdXJlVGltZSwgb3B0cywgbW92ZU9yU2Nyb2xsKSB7XG4gIHZhciB3aW5Qb3NpdGlvbnMgPSB1dGlsRWxlbWVudEFjLmdldFdpblBvc2l0aW9ucygpO1xuICB2YXIgc2l6ZSA9IDA7XG4gIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcbiAgdmFyIF9hY0hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuX2FjSGFzaE1hcCB8fCB7fTtcbiAgZm9yICh2YXIgbG9na2V5IGluIF9hY0hhc2hNYXApIHtcbiAgICB2YXIgZWxlX3MgPSBfYWNIYXNoTWFwW2xvZ2tleV0gfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVfcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHYgPSBlbGVfc1tpXSB8fCB7fTtcbiAgICAgIHYuZXZlbnRUeXBlID0gJ0lPYnNlcnZlcic7XG4gICAgICB2YXIgaXNUYXJnZXQgPSAhbW92ZU9yU2Nyb2xsID8gdi5lbGVtZW50ID09PSBvcHRzLnRhcmdldCA6IHRydWU7XG4gICAgICBpZiAodi5zdGF0dXMgPT09IDAgJiYgdi5leHBDb25maWcgJiYgaXNUYXJnZXQpIHtcbiAgICAgICAgdmFyIF9lbGVQb3MgPSBvcHRzLmJvdW5kaW5nQ2xpZW50UmVjdCB8fCB7fTtcbiAgICAgICAgaWYgKCFfZWxlUG9zLndpZHRoICYmICFfZWxlUG9zLmhlaWdodCkge1xuICAgICAgICAgIF9lbGVQb3MgPSBvcHRzLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSB8fCB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2VsZVBvcy53aWR0aCAmJiBfZWxlUG9zLmhlaWdodCkge1xuICAgICAgICAgIHYgPSB1dGlsRGFzaC5hc3NpZ24odiwgX2VsZVBvcyk7XG4gICAgICAgICAgdi54ID0gX2VsZVBvcy54IHx8IF9lbGVQb3MubGVmdDtcbiAgICAgICAgICB2LnkgPSBfZWxlUG9zLnkgfHwgX2VsZVBvcy50b3A7XG4gICAgICAgICAgdi53aWR0aCA9IF9lbGVQb3Mud2lkdGg7XG4gICAgICAgICAgdi5oZWlnaHQgPSBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICB2LnNpemUgPSBfZWxlUG9zLndpZHRoICogX2VsZVBvcy5oZWlnaHQ7XG4gICAgICAgICAgdmFyIGlzUmVjb3JkID0gdXRpbEVsZW1lbnRBYy5jaGVja0lzUmVjb3JkKHYuZWxlbWVudCwgdi5oYXNoX3ZhbHVlLCAnX2FwbHVzX2F1dG9fZXhwJyk7XG4gICAgICAgICAgLy8g5Zyo5Y+v6KeG56qX5YaF77yM5LiUZG9t6IqC54K55LiK5rKh5pyJ5bey5pud5YWJ5qCH6K+G77yM5LiU5LiN5Zyo5YaF5a2Y5Lit5oiW5Zyo5YaF5a2Y5Lit5L2G54q25oCB5pivMO+8iDDkuLrliJ3lp4vnirbmgIHvvIlcbiAgICAgICAgICAvLyDlj6/op4bljJbpnaLnp6/nm7jlr7nmr5TkuI7lsY/luZXpnaLnp6/mr5TkvotcbiAgICAgICAgICB2YXIgZWxlbWVudEFyZWEgPSB2LndpZHRoICogdi5oZWlnaHQgKiBvcHRzLmludGVyc2VjdGlvblJhdGlvO1xuICAgICAgICAgIHZhciB2aWV3YWJpbGl0eVJhdGVJbldpbmRvdyA9IHV0aWxFbGVtZW50QWMuZ2V0Vmlld2FiaWxpdHlSYXRlSW5XaW5kb3cod2luUG9zaXRpb25zLCBlbGVtZW50QXJlYSwgQUNfUkFURV9JTl9XSU5ET1cpO1xuICAgICAgICAgIGlmICghaXNSZWNvcmQpIHtcbiAgICAgICAgICAgIHZhciBpc1JlbGF0ZWl2ZVJhdGlvID0gb3B0cy5pbnRlcnNlY3Rpb25SYXRpbyA+PSBBQ19SQVRFO1xuICAgICAgICAgICAgaWYgKGlzUmVsYXRlaXZlUmF0aW8gfHwgdmlld2FiaWxpdHlSYXRlSW5XaW5kb3cgPj0gQUNfUkFURV9JTl9XSU5ET1cpIHtcbiAgICAgICAgICAgICAgdi5leHBvc3VyZVRpbWUgPSBleHBvc3VyZVRpbWU7XG4gICAgICAgICAgICAgIHYuc3RhdHVzID0gMTsgLy8g5Yid6KeB5YWJ54q25oCBXG4gICAgICAgICAgICAgIHZhciBhZUF1dG9Vc2VyRm4gPSBjb25maWcuZ2V0QXV0b0V4cFVzZXJGbigpO1xuICAgICAgICAgICAgICBpZiAoYWVBdXRvVXNlckZuKSB7XG4gICAgICAgICAgICAgICAgdi51c2VyUGFyYW1zID0gdXRpbF9hY19hZS5hdXRvVXNlckZuSGFuZGxlcihhZUF1dG9Vc2VyRm4sIHYuZWxlbWVudCwgdi5lbGVtZW50U2VsZWN0b3IsIHYuZXhwQ29uZmlnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2LnZpZXdhYmlsaXR5UmF0ZSA9IGlzUmVsYXRlaXZlUmF0aW8gPyBvcHRzLmludGVyc2VjdGlvblJhdGlvIDogdmlld2FiaWxpdHlSYXRlSW5XaW5kb3c7XG4gICAgICAgICAgICAgIHYudmlld2FiaWxpdHkgPSBpc1JlbGF0ZWl2ZVJhdGlvID8gJ2ludGVyc2VjdGlvbicgOiAnZmlsbHdpbmRvdyc7XG4gICAgICAgICAgICAgIC8vIOS4jeiuvue9ruabneWFieaXtumVv+aXtuWwseebtOaOpeWPkeWHuuaXpeW/l1xuICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5FWFBfRFVSQVRJT04pIHtcbiAgICAgICAgICAgICAgICB2LnN0YXR1cyA9IDI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXRpbF9hY19hZS51cGRhdGVFeHBIYXNoTWFwKGxvZ2tleSwgdiwgJ1VQREFURScpO1xuICAgICAgICAgICAgICArK3NpemU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZpZXdhYmlsaXR5UmF0ZUluV2luZG93KSB7XG4gICAgICAgICAgICAgIC8vIOiiq2luc2VjdGlvbk9ic2VydmXmipPlj5bliLDlubblnKjlsY/luZXkuK3lh7rnjrDov4fnmoTlhYPntKDmiZNsYXN0RXZlbnRUeXBl5qCH77yM5pa55L6/5ZCO57utbW92ZeOAgXNjcm9sbOS6i+S7tuWGjeasoeaKk+WPllxuICAgICAgICAgICAgICB1dGlsX2FjX2FlLnVwZGF0ZUV4cEhhc2hNYXAobG9na2V5LCB1dGlsRGFzaC5hc3NpZ24oZWxlX3NbaV0sIHtcbiAgICAgICAgICAgICAgICBsYXN0RXZlbnRUeXBlOiB2LmV2ZW50VHlwZVxuICAgICAgICAgICAgICB9KSwgJ1VQREFURScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gc2l6ZTtcbn1cblxuLyoqXG4gKiDor6Xmlrnms5XooqtvbnNjcm9sbCzmiJbooqtvbnJlc2l6ZeWbnuiwg+WHveaVsOiwg+eUqO+8jOajgOmqjOWFg+e0oOaYr+WQpuabneWFiVxuICovXG5mdW5jdGlvbiBoYW5kbGVyX2RvbV9leHBvc3VyZSAoZW50cnksIGlzRmlyc3QpIHtcbiAgdmFyIFBVQl9LRVkgPSAnQVBMVVNfQUVfRVhQT1NVUkVfQ0hBTkdFJztcbiAgdmFyIGV2ZW50VHlwZSA9IGVudHJ5ICYmIGVudHJ5LnR5cGUgPyBlbnRyeS50eXBlIDogJ0lPYnNlcnZlcic7XG4gIHZhciBleHBvc3VyZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgdmFyIHNpemUgPSAwO1xuICBpZiAoaXNGaXJzdCkge1xuICAgIC8vIHdpbmRvdy5jb25zb2xlLmNvdW50KCdpc0ZpcnN0Jyk7XG4gICAgc2l6ZSA9IHV0aWxFeHBvc3VyZS5maWx0ZXJTdGFydEV4cG9zdXJlU2l6ZShleHBvc3VyZVRpbWUsIGVudHJ5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyB3aW5kb3cuY29uc29sZS5jb3VudCgnaXNTZWNvbmQnKTtcbiAgICBzaXplID0gZmlsdGVyU3RhcnRFeHBvc3VyZVNpemUoZXhwb3N1cmVUaW1lLCBlbnRyeSk7XG4gIH1cbiAgLy8g5a2Y5Zyo5pud5YWJ5YWD57Sg77yM562J5b6FIHgg5q+r56eS5ZCO5LqM5qyh5Yik5pat5pud5YWJ5pyJ5pWI5oCnXG4gIGlmIChzaXplID4gMCkge1xuICAgIGlmIChjb25maWcuRVhQX0RVUkFUSU9OKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHNpemUgPSB1dGlsRXhwb3N1cmUuZmlsdGVyRW5kRXhwb3N1cmVTaXplKGV4cG9zdXJlVGltZSwgZXZlbnRUeXBlKTtcbiAgICAgICAgaWYgKHNpemUgPiAwKSB7XG4gICAgICAgICAgLy8g5a2Y5Zyo5pyJ5pWI5pud5YWJ5YWD57Sg55qE5oOF5Ya15LiL77yM5Y+R5bCE5pud5YWJ5LqL5Lu277yM57uZd2F0Y2hSZWNvcmQuanPov5nkuKrnjq/oioLlpITnkIZcbiAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIucHVibGlzaChQVUJfS0VZLCB7XG4gICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgZXZlbnRUeXBlOiBldmVudFR5cGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgY29uZmlnLkVYUF9EVVJBVElPTik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5wdWJsaXNoKFBVQl9LRVksIHtcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgZXZlbnRUeXBlOiBldmVudFR5cGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVJT2JzZXJ2ZXIgKG9wdGlvbnMpIHtcbiAgdmFyIGRlZmF1bHRPcHRzID0ge1xuICAgIHJvb3Q6IG51bGwsIC8vIGRlZmF1bHQgdmFsdWUgaXMgd2luZG93LCB5b3UgY2FuIHJld3JpdGUgaXQgYnkgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Njcm9sbEFyZWEnKSxcbiAgICByb290TWFyZ2luOiAnMHB4JyxcbiAgICB0aHJlc2hvbGQ6IEFDX1JBVEVcbiAgfTtcbiAgcmV0dXJuIG5ldyBJT2JzZXJ2ZXIoZnVuY3Rpb24gKGVudHJpZXMpIHtcbiAgICBlYWNoKGVudHJpZXMsIGZ1bmN0aW9uKGVudHJ5KXtcbiAgICAgIGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IDApIHtcbiAgICAgICAgaGFuZGxlcl9kb21fZXhwb3N1cmUoZW50cnkpO1xuICAgICAgfSAgXG4gICAgfSk7XG4gIH0sIHV0aWxEYXNoLmFzc2lnbihkZWZhdWx0T3B0cywgb3B0aW9ucykpO1xufVxuXG4vKipcbiAqIHdhdGNoSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcbiAqIEBwYXJhbXMgb2JqIHtPYmplY3R9IHtcbiAqICAgZXhwQ29uZmlnOiBbe1xuICogICAgIGNzc1NlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG4gKiAgICAgZWxlbWVudFNlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG4gKiAgICAgbG9na2V5OiBcIi9kYWN1LjEuMS4xXCJcbiAqICAgICBwcm9wczogW1wiX2xrYVwiXVxuICogICB9XSxcbiAqICAgaXNUaHJvdHRsZVdhdGNoOiBmYWxzZVxuICogfVxuICogQHBhcmFtcyBvcHRzIHtPYmplY3R9IHtcbiAqICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuICogfVxuICovXG5mdW5jdGlvbiB3YXRjaEludGVyc2VjdGlvbk9ic2VydmVyIChleHBDb25maWcpIHtcbiAgLy8gY29uc29sZS5jb3VudCgnd2F0Y2hJbnRlcnNlY3Rpb25PYnNlcnZlcicpO1xuICBpZiAoSU9ic2VydmVyKSB7XG4gICAgaWYgKCFpb2JzZXJ2ZXJNYXAuaW9fYmFzZSkge1xuICAgICAgaW9ic2VydmVyTWFwLmlvX2Jhc2UgPSBjcmVhdGVJT2JzZXJ2ZXIoKTtcbiAgICB9XG4gICAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuICAgIHZhciBfYWNIYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLl9hY0hhc2hNYXAgfHwge307XG4gICAgZm9yICh2YXIgbG9na2V5IGluIF9hY0hhc2hNYXApIHtcbiAgICAgIHZhciBlbGVfcyA9IF9hY0hhc2hNYXBbbG9na2V5XSB8fCBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHYgPSBlbGVfc1tpXSB8fCB7fTtcbiAgICAgICAgaWYgKCF2LmluT2JzZXJ2ZXIpIHtcbiAgICAgICAgICB2YXIga2V5ID0gJ2lvX3ZfJyArIGVuY29kZVVSSUNvbXBvbmVudCh2LnBvc2l0aW9uU2VsZWN0b3IpO1xuICAgICAgICAgIHZhciBpb192O1xuICAgICAgICAgIGlmICh2LnBvc2l0aW9uU2VsZWN0b3IgJiYgIWlvYnNlcnZlck1hcFtrZXldKSB7XG4gICAgICAgICAgICBpb192ID0gY3JlYXRlSU9ic2VydmVyKHtcbiAgICAgICAgICAgICAgcm9vdDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih2LnBvc2l0aW9uU2VsZWN0b3IpLFxuICAgICAgICAgICAgICBleHBDb25maWc6IGV4cENvbmZpZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpb2JzZXJ2ZXJNYXBba2V5XSA9IGlvX3Y7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpb192KSB7XG4gICAgICAgICAgICBpb192Lm9ic2VydmUodi5lbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW9ic2VydmVyTWFwLmlvX2Jhc2Uub2JzZXJ2ZSh2LmVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2LmluT2JzZXJ2ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIOebkeWQrGRvbeWPmOWMlu+8jOacieWPmOWMluaJp+ihjOWbnuiwg1xuICogQHBhcmFtIHtoYW5kbGVyX2RvbV9jaGFuZ2V9IGNiXG4gKi9cbmV4cG9ydHMud2F0Y2hfZXhwb3N1cmVfY2hhbmdlID0gZnVuY3Rpb24oZXhwQ29uZmlnKSB7XG4gIC8vIHN0ZXAxIOebkeWQrOesrOS4gOasoWRvbWNoYW5nZeWPkeWwhOeahOa2iOaBr++8jOWBmuesrOS4gOasoemqjOivgeabneWFieeahOWkhOeQhlxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdBUExVU19BRV9ET01fQ0hBTkdFJywgZnVuY3Rpb24gKCkge1xuICAgIHdhdGNoSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZXhwQ29uZmlnKTtcbiAgfSk7XG4gIC8vIHN0ZXAyIOebkeWQrOWFg+e0oOabneWFiVxuICB3YXRjaEludGVyc2VjdGlvbk9ic2VydmVyKGV4cENvbmZpZyk7XG59O1xuXG4vKipcbiAqIHdhdGNoSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcbiAqIEBwYXJhbXMgb2JqIHtPYmplY3R9IHtcbiAqICAgZXhwQ29uZmlnOiBbe1xuICogICAgIGNzc1NlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG4gKiAgICAgZWxlbWVudFNlbGVjdG9yOiBcIkRJVltsb2drZXk9XCIvZGFjdS4xLjEuMVwiXVwiXG4gKiAgICAgbG9na2V5OiBcIi9kYWN1LjEuMS4xXCJcbiAqICAgICBwcm9wczogW1wiX2xrYVwiXVxuICogICB9XSxcbiAqICAgaXNUaHJvdHRsZVdhdGNoOiBmYWxzZVxuICogfVxuICovXG5leHBvcnRzLmNsZWFyID0gZnVuY3Rpb24gKF9jb25maWcsIG9wdHMpIHtcbiAgaWYgKG9wdHMgJiYgb3B0cy5mcm9tICE9PSAnYXBwZW5kTWV0YUluZm8nKSB7XG4gICAgZm9yICh2YXIgayBpbiBpb2JzZXJ2ZXJNYXApIHtcbiAgICAgIHZhciBpbyA9IGlvYnNlcnZlck1hcFtrXTtcbiAgICAgIC8vIC8vIOWBnOatouinguWvn1xuICAgICAgLy8gaW8udW5vYnNlcnZlKGVsZW1lbnQpO1xuICAgICAgLy8g5YWz6Zet6KeC5a+f5ZmoXG4gICAgICBpby5kaXNjb25uZWN0KCk7XG4gICAgfVxuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9hZS93YXRjaEV4cG9zdXJlSU9ic2VydmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxudmFyIHV0aWxFbGVtZW50QWMgPSByZXF1aXJlKCcuL3V0aWxFbGVtZW50QWMnKTtcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi8uLi9saWJfY29tbW9uL2NvbmZpZycpO1xudmFyIHV0aWxfYWNfYWUgPSByZXF1aXJlKCcuLi8uLi9saWJfY29tbW9uL3V0aWxfYWNfYWUnKTtcbi8vIOiHquWKqOabneWFieaJk+eCuSAtIOWIpOWumuWPr+inhueahOavlOS+i+eOh1xudmFyIEFDX1JBVEUgPSBjb25maWcuQVVUT19BVF9WSUVXX1JBVEU7XG52YXIgQUNfUkFURV9JTl9XSU5ET1cgPSBjb25maWcuQVVUT19BVF9WSUVXX1JBVEVfSU5fV0lORE9XO1xudmFyIHdpblBvc2l0aW9ucztcblxudmFyIGlzRGlzcGxheU5vbmUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgdmFyIGlzTm9uZTtcbiAgd2hpbGUgKGVsICYmIGVsLnRhZ05hbWUgIT09ICdIVE1MJykge1xuICAgIGlzTm9uZSA9IGVsLnN0eWxlLmRpc3BsYXk7XG4gICAgaWYgKGlzTm9uZSAhPT0gJ25vbmUnKSB7XG4gICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIGlzTm9uZSA9PT0gJ25vbmUnO1xufTtcblxuXG4vKipcbiAqIOagueaNruW+heabneWFieeahOWFg+e0oOWIl+ihqOajgOafpeacrOasoea7mui9ruaIluiAheeql+WPo+Wkp+Wwj+WPmOWMluinpuWPkeeahOWFg+e0oOaYr+WQpuWcqOWPr+inhueql+WGhe+8iOabneWFie+8iVxuICog5bCG5p+l6K+i5Yiw55qE5aSE5LqO5pud5YWJ54q25oCB55qE5YWD57Sg54q25oCB77yIc3RhdHVz77yJ5bGe5oCn5YC85pS55Li64oCcMeKAne+8jOiuvue9ruWIneWni+abneWFieaXtumXtGV4cG9zdXJlVGltZVxuICog5bm26L+U5Zue5pys5qyh5LqL5Lu26Kem5Y+R55qE5pud5YWJ5YWD57Sg55qE5p2h5pWwXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cG9zdXJlVGltZSAvLyBvbnNjcm9sbCxvbnJlc2l6ZeWIneWni+abneWFieaXtumXtFxuICogQHJldHVybiB7TnVtYmVyfSBzaXplIC8vIOacrOasoeS6i+S7tuinpuWPkeeahOabneWFieWFg+e0oOeahOadoeaVsFxuICovXG5leHBvcnRzLmZpbHRlclN0YXJ0RXhwb3N1cmVTaXplID0gZnVuY3Rpb24oZXhwb3N1cmVUaW1lLCBldmVudFR5cGUpIHtcbiAgdmFyIHNpemUgPSAwO1xuICAvLyB2YXIgd2luUGFyYW1zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5QYXJhbXMoKTsgLy8gVE9ETyAtIOmqjOivgeaAp+iDvemXrumimO+8jOWBmuaIkOWPr+mFje+8jOmDqOWIhuS4muWKoeWmguatpOWkhOeQhlxuICAvLyB2YXIgd2luUG9zaXRpb25zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5Qb3NpdGlvbnMod2luUGFyYW1zKTtcbiAgdmFyIHdpblBvc2l0aW9ucyA9IHV0aWxFbGVtZW50QWMuZ2V0V2luUG9zaXRpb25zKCk7XG5cbiAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuICB2YXIgX2FjSGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5fYWNIYXNoTWFwIHx8IHt9O1xuICBmb3IgKHZhciBsb2drZXkgaW4gX2FjSGFzaE1hcCkge1xuICAgIHZhciBlbGVfcyA9IF9hY0hhc2hNYXBbbG9na2V5XSB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZV9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuICAgICAgaWYgKHYuc3RhdHVzID09PSAwICYmIHYuZXhwQ29uZmlnKSB7XG4gICAgICAgIGlmICghaXNEaXNwbGF5Tm9uZSh2LmVsZW1lbnQpKSB7XG4gICAgICAgICAgdmFyIF9lbGVQb3MgPSB1dGlsRWxlbWVudEFjLmdldEVsZW1lbnRQb3NpdGlvbih2LmVsZW1lbnQpO1xuICAgICAgICAgIGlmIChfZWxlUG9zLndpZHRoICYmIF9lbGVQb3MuaGVpZ2h0KSB7XG4gICAgICAgICAgICB2LnggPSBfZWxlUG9zLng7XG4gICAgICAgICAgICB2LnkgPSBfZWxlUG9zLnk7XG4gICAgICAgICAgICB2LmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcbiAgICAgICAgICAgIHYud2lkdGggPSBfZWxlUG9zLndpZHRoO1xuICAgICAgICAgICAgdi5oZWlnaHQgPSBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICAgIHYuc2l6ZSA9IF9lbGVQb3Mud2lkdGggKiBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5Yik5pat5Yiw5pyJcG9zaXRpb25TZWxlY3Rvcu+8jOW5tuS4lOW9k+WJjeWFg+e0oOWkhOS6juebuOWvueWumuS9jeOAgee7neWvueWumuS9jeetieWFg+e0oOWGhea7muWKqOaXtu+8iGNsaWVudEhlaWdodCA+IHNjcm9sbEhlaWdodClcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVNlbGVjdG9yUG9zaXRpb25zO1xuICAgICAgICAgICAgaWYgKHYuZXhwQ29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgcmVsYXRpdmVTZWxlY3RvclBvc2l0aW9ucyA9IHV0aWxFbGVtZW50QWMuZ2V0V2luUG9zaXRpb25zKHYuZXhwQ29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDojrflj5blhYPntKDnmoTlj6/op4bnjofvvIjlnKjlj6/op4bnqpflhoXnmoTlj6/op4Hmr5TkvovvvIlcbiAgICAgICAgICAgIHZhciB2aWV3YWJpbGl0eVJhdGUgPSB1dGlsRWxlbWVudEFjLndyYXBWaWV3YWJpbGl0eVJhdGUocmVsYXRpdmVTZWxlY3RvclBvc2l0aW9ucyB8fCB3aW5Qb3NpdGlvbnMsIHYsIEFDX1JBVEUpO1xuICAgICAgICAgICAgdmFyIGlzVmlld2FiaWxpdHlSYXRlID0gdmlld2FiaWxpdHlSYXRlID49IEFDX1JBVEU7XG5cbiAgICAgICAgICAgIHZhciB2aWV3YWJpbGl0eUluV2luZG93UmF0ZSA9IHZpZXdhYmlsaXR5UmF0ZTtcbiAgICAgICAgICAgIGlmIChyZWxhdGl2ZVNlbGVjdG9yUG9zaXRpb25zKSB7XG4gICAgICAgICAgICAgIHZpZXdhYmlsaXR5SW5XaW5kb3dSYXRlID0gdXRpbEVsZW1lbnRBYy53cmFwVmlld2FiaWxpdHlSYXRlKHdpblBvc2l0aW9ucywgdiwgQUNfUkFURSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50QXJlYSA9IHYud2lkdGggKiB2LmhlaWdodCAqIHZpZXdhYmlsaXR5SW5XaW5kb3dSYXRlO1xuICAgICAgICAgICAgdmFyIHZpZXdhYmlsaXR5UmF0ZUluV2luZG93ID0gdXRpbEVsZW1lbnRBYy5nZXRWaWV3YWJpbGl0eVJhdGVJbldpbmRvdyh3aW5Qb3NpdGlvbnMsIGVsZW1lbnRBcmVhLCBBQ19SQVRFX0lOX1dJTkRPVyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBpc1JlY29yZCA9IHV0aWxFbGVtZW50QWMuY2hlY2tJc1JlY29yZCh2LmVsZW1lbnQsIHYuaGFzaF92YWx1ZSwgJ19hcGx1c19hdXRvX2V4cCcpO1xuICAgICAgICAgICAgLy8g5Zyo5Y+v6KeG56qX5YaF77yM5LiUZG9t6IqC54K55LiK5rKh5pyJ5bey5pud5YWJ5qCH6K+G77yM5LiU5LiN5Zyo5YaF5a2Y5Lit5oiW5Zyo5YaF5a2Y5Lit5L2G54q25oCB5pivMO+8iDDkuLrliJ3lp4vnirbmgIHvvIlcbiAgICAgICAgICAgIGlmICgoaXNWaWV3YWJpbGl0eVJhdGUgfHwgdmlld2FiaWxpdHlSYXRlSW5XaW5kb3cgPj0gQUNfUkFURV9JTl9XSU5ET1cpICYmICFpc1JlY29yZCkge1xuICAgICAgICAgICAgICB2LmV4cG9zdXJlVGltZSA9IGV4cG9zdXJlVGltZTtcbiAgICAgICAgICAgICAgdi5zdGF0dXMgPSAxOyAvLyDliJ3op4HlhYnnirbmgIFcbiAgICAgICAgICAgICAgdmFyIGFlQXV0b1VzZXJGbiA9IGNvbmZpZy5nZXRBdXRvRXhwVXNlckZuKCk7XG4gICAgICAgICAgICAgIGlmIChhZUF1dG9Vc2VyRm4pIHtcbiAgICAgICAgICAgICAgICB2LnVzZXJQYXJhbXMgPSB1dGlsX2FjX2FlLmF1dG9Vc2VyRm5IYW5kbGVyKGFlQXV0b1VzZXJGbiwgdi5lbGVtZW50LCB2LmVsZW1lbnRTZWxlY3Rvciwgdi5leHBDb25maWcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIOS4jeiuvue9ruabneWFieaXtumVv+aXtuWwseebtOaOpeWPkeWHuuaXpeW/l1xuICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5FWFBfRFVSQVRJT04pIHtcbiAgICAgICAgICAgICAgICB2LnZpZXdhYmlsaXR5UmF0ZSA9IGlzVmlld2FiaWxpdHlSYXRlID8gdmlld2FiaWxpdHlSYXRlIDogdmlld2FiaWxpdHlSYXRlSW5XaW5kb3c7XG4gICAgICAgICAgICAgICAgdi52aWV3YWJpbGl0eSA9IGlzVmlld2FiaWxpdHlSYXRlID8gJ2ludGVyc2VjdGlvbicgOiAnZmlsbHdpbmRvdyc7XG4gICAgICAgICAgICAgICAgdi5zdGF0dXMgPSAyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHV0aWxfYWNfYWUudXBkYXRlRXhwSGFzaE1hcChsb2drZXksIHYsICdVUERBVEUnKTtcbiAgICAgICAgICAgICAgKytzaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gc2l6ZTtcbn07XG5cbi8qKlxuICog5ZyoZmlsdGVyU3RhcnRFeHBvc3VyZVNpemXmi7/liLDliLDnmoTliJ3lp4vmm53lhYnlhYPntKDliJfooajln7rnoYDkuIrvvIzkuozmrKHliKTmlq3mm53lhYnlhYPntKDmmK/lkKbmmK/mnInmlYjmm53lhYnvvIzlpoLmjIHnu63mm53lhYkyMDDmr6vnp5JcbiAqIOacieaViOabneWFieeahOWFg+e0oOeKtuaAge+8iHN0YXR1c++8ieWxnuaAp+WAvOaUueS4uuKAnDLigJ3vvIzml6DmlYjmm53lhYnnmoTlhYPntKDnirbmgIHlsZ7mgKflgLzmlLnkuLrigJww4oCdXG4gKiDlubbov5Tlm57mnKzmrKHkuovku7bop6blj5HnmoTmm53lhYnlhYPntKDnmoTmnaHmlbBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwb3N1cmVUaW1lIC8vIG9uc2Nyb2xsLG9ucmVzaXpl5Yid5aeL5pud5YWJ5pe26Ze0XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHNpemUgLy8g5pys5qyh5LqL5Lu26Kem5Y+R55qE5pud5YWJ5YWD57Sg55qE5p2h5pWwXG4gKi9cbmV4cG9ydHMuZmlsdGVyRW5kRXhwb3N1cmVTaXplID0gZnVuY3Rpb24oZXhwb3N1cmVUaW1lLCBldmVudFR5cGUpIHtcbiAgdmFyIHNpemUgPSAwO1xuICAvLyB2YXIgd2luUGFyYW1zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5QYXJhbXMoKTsgLy8gVE9ETyAtIOmqjOivgeaAp+iDvemXrumimO+8jOWBmuaIkOWPr+mFje+8jOmDqOWIhuS4muWKoeWmguatpOWkhOeQhlxuICAvLyB2YXIgd2luUG9zaXRpb25zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5Qb3NpdGlvbnMod2luUGFyYW1zKTtcbiAgaWYgKCF3aW5Qb3NpdGlvbnMpIHtcbiAgICB3aW5Qb3NpdGlvbnMgPSB1dGlsRWxlbWVudEFjLmdldFdpblBvc2l0aW9ucygpO1xuICB9XG5cbiAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuICB2YXIgX2FjSGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5fYWNIYXNoTWFwIHx8IHt9O1xuICBmb3IgKHZhciBsb2drZXkgaW4gX2FjSGFzaE1hcCkge1xuICAgIHZhciBlbGVfcyA9IF9hY0hhc2hNYXBbbG9na2V5XSB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZV9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuICAgICAgaWYgKHYuc3RhdHVzID09PSAxICYmIHYuZXhwb3N1cmVUaW1lID09PSBleHBvc3VyZVRpbWUgJiYgdi5leHBDb25maWcpIHtcbiAgICAgICAgdi5ldmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgICAgIC8vIOWIpOaWreWIsOaciXBvc2l0aW9uU2VsZWN0b3LvvIzlubbkuJTlvZPliY3lhYPntKDlpITkuo7nm7jlr7nlrprkvY3jgIHnu53lr7nlrprkvY3nrYnlhYPntKDlhoXmu5rliqjml7bvvIhjbGllbnRIZWlnaHQgPiBzY3JvbGxIZWlnaHQpXG4gICAgICAgIGlmICh2LmV4cENvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG4gICAgICAgICAgLy8gd2luUGFyYW1zID0gdXRpbEVsZW1lbnRBYy5nZXRXaW5QYXJhbXModi5leHBDb25maWcucG9zaXRpb25TZWxlY3Rvcik7IC8vIFRPRE8gLSDpqozor4HmgKfog73pl67popjvvIzlgZrmiJDlj6/phY3vvIzpg6jliIbkuJrliqHlpoLmraTlpITnkIZcbiAgICAgICAgICAvLyB3aW5Qb3NpdGlvbnMgPSB1dGlsRWxlbWVudEFjLmdldFdpblBvc2l0aW9ucyh3aW5QYXJhbXMpO1xuICAgICAgICAgIHdpblBvc2l0aW9ucyA9IHV0aWxFbGVtZW50QWMuZ2V0V2luUG9zaXRpb25zKHYuZXhwQ29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIOiOt+WPluWFg+e0oOeahOWPr+inhueOh++8iOWcqOWPr+inhueql+WGheeahOWPr+ingeavlOS+i++8iVxuICAgICAgICB2YXIgdmlld2FiaWxpdHlSYXRlID0gdXRpbEVsZW1lbnRBYy53cmFwVmlld2FiaWxpdHlSYXRlKHdpblBvc2l0aW9ucywgdiwgQUNfUkFURSk7XG4gICAgICAgIHZhciBpc1JlY29yZCA9IHV0aWxFbGVtZW50QWMuY2hlY2tJc1JlY29yZCh2LmVsZW1lbnQsIHYuaGFzaF92YWx1ZSwgJ19hcGx1c19hdXRvX2V4cCcpO1xuICAgICAgICAvLyDlnKjlj6/op4bnqpflhoXvvIzkuJRkb23oioLngrnkuIrmsqHmnInlt7Lmm53lhYnmoIfor4bvvIzkuJTkuI3lnKjlhoXlrZjkuK3miJblnKjlhoXlrZjkuK3kvYbnirbmgIHmmK8w77yIMOS4uuWIneWni+eKtuaAge+8iVxuICAgICAgICBpZiAodmlld2FiaWxpdHlSYXRlICYmICFpc1JlY29yZCkge1xuICAgICAgICAgIHYudmlld2FiaWxpdHlSYXRlID0gdmlld2FiaWxpdHlSYXRlO1xuICAgICAgICAgIHYuc3RhdHVzID0gMjsgLy8g5Yid6KeB5YWJeHh45q+r56eS5ZCO5L6d54S26KeB5YWJ54q25oCBXG4gICAgICAgICAgdXRpbF9hY19hZS51cGRhdGVFeHBIYXNoTWFwKGxvZ2tleSwgdiwgJ1VQREFURScpO1xuICAgICAgICAgICsrc2l6ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2LnN0YXR1cyA9IDA7IC8vIOWIneingeWFiXh4eOavq+enkuWQjuS4jeWGjeingeWFie+8jOaUueS4uuWIneWni+eKtuaAgVxuICAgICAgICAgIHYuZXhwb3N1cmVUaW1lID0gJyc7XG4gICAgICAgICAgdXRpbF9hY19hZS51cGRhdGVFeHBIYXNoTWFwKGxvZ2tleSwgdiwgJ1VQREFURScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBzaXplO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9hZS91dGlsL3V0aWxFeHBvc3VyZS5qc1xuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxFdmVudCA9IHJlcXVpcmUoJy4vdXRpbC9ldmVudCcpO1xudmFyIHV0aWxFeHBvc3VyZSA9IHJlcXVpcmUoJy4vdXRpbC91dGlsRXhwb3N1cmUnKTtcbnZhciB1dGlsX2FjX2FlID0gcmVxdWlyZSgnLi4vbGliX2NvbW1vbi91dGlsX2FjX2FlJyk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vbGliX2NvbW1vbi9jb25maWcnKTtcblxuLyoqXG4gKiDor6Xmlrnms5XooqtvbnNjcm9sbCzmiJbooqtvbnJlc2l6ZeWbnuiwg+WHveaVsOiwg+eUqO+8jOajgOmqjOWFg+e0oOaYr+WQpuabneWFiVxuICovXG52YXIgaGFuZGxlcl9kb21fZXhwb3N1cmUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciBQVUJfS0VZID0gJ0FQTFVTX0FFX0VYUE9TVVJFX0NIQU5HRSc7XG4gIHZhciBldmVudFR5cGUgPSBlICYmIGUudHlwZSA/IGUudHlwZSA6ICdpbml0JztcbiAgdmFyIGV4cG9zdXJlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB2YXIgc2l6ZSA9IHV0aWxFeHBvc3VyZS5maWx0ZXJTdGFydEV4cG9zdXJlU2l6ZShleHBvc3VyZVRpbWUsIGV2ZW50VHlwZSk7XG4gIC8vIOWtmOWcqOabneWFieWFg+e0oO+8jOetieW+hSB4IOavq+enkuWQjuS6jOasoeWIpOaWreabneWFieacieaViOaAp1xuICBpZiAoc2l6ZSA+IDAgKSB7XG4gICAgaWYgKGNvbmZpZy5FWFBfRFVSQVRJT04pIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgc2l6ZSA9IHV0aWxFeHBvc3VyZS5maWx0ZXJFbmRFeHBvc3VyZVNpemUoZXhwb3N1cmVUaW1lLCBldmVudFR5cGUpO1xuICAgICAgICBpZiAoc2l6ZSA+IDApIHtcbiAgICAgICAgICAvLyDlrZjlnKjmnInmlYjmm53lhYnlhYPntKDnmoTmg4XlhrXkuIvvvIzlj5HlsITmm53lhYnkuovku7bvvIznu5l3YXRjaFJlY29yZC5qc+i/meS4queOr+iKguWkhOeQhlxuICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5wdWJsaXNoKFBVQl9LRVksIHtcbiAgICAgICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgICAgICBldmVudFR5cGU6IGV2ZW50VHlwZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LCBjb25maWcuRVhQX0RVUkFUSU9OKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnB1Ymxpc2goUFVCX0tFWSwge1xuICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICBldmVudFR5cGU6IGV2ZW50VHlwZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdGhyb3R0bGVfaGFuZGxlcl9leHBvc3VyZSA9IHV0aWxfYWNfYWUudGhyb3R0bGUoZnVuY3Rpb24gKGUpIHtcbiAgaGFuZGxlcl9kb21fZXhwb3N1cmUoZSk7XG59LCAxMDApO1xuXG52YXIgc2VsZWN0b3JzID0ge307XG5cbi8qKlxuICog55uR5ZCsZG9t5Y+Y5YyW77yM5pyJ5Y+Y5YyW5omn6KGM5Zue6LCDXG4gKiBAcGFyYW0ge2hhbmRsZXJfZG9tX2NoYW5nZX0gY2JcbiAqL1xudmFyIHdhdGNoX3Bvc2l0aW9uc2VsZWN0b3JfY2hhbmdlID0gZnVuY3Rpb24gKGV4cENvbmZpZywgdHlwZSkge1xuICBpZiAoZXhwQ29uZmlnICYmIGV4cENvbmZpZy5mb3JFYWNoICYmIE9iamVjdC5rZXlzICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcbiAgICBleHBDb25maWcuZm9yRWFjaChmdW5jdGlvbih2KXtcbiAgICAgIGlmICh2LnBvc2l0aW9uU2VsZWN0b3IgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih2LnBvc2l0aW9uU2VsZWN0b3IpKSB7XG4gICAgICAgIHNlbGVjdG9yc1t2LnBvc2l0aW9uU2VsZWN0b3JdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgdG1wX3NlbGVjdG9ycyA9IE9iamVjdC5rZXlzKHNlbGVjdG9ycyk7XG4gICAgdG1wX3NlbGVjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uKHMpe1xuICAgICAgaWYgKHV0aWxFdmVudFt0eXBlXSkge1xuICAgICAgICB1dGlsRXZlbnRbdHlwZV0oZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSwgJ3Njcm9sbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdGhyb3R0bGVfaGFuZGxlcl9leHBvc3VyZShlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICog55uR5ZCsZG9t5Y+Y5YyW77yM5pyJ5Y+Y5YyW5omn6KGM5Zue6LCDXG4gKiBAcGFyYW0ge2hhbmRsZXJfZG9tX2NoYW5nZX0gY2JcbiAqL1xuZXhwb3J0cy53YXRjaF9leHBvc3VyZV9jaGFuZ2UgPSBmdW5jdGlvbihleHBDb25maWcpIHtcbiAgLy8gc3RlcDEg55uR5ZCs56ys5LiA5qyhZG9tY2hhbmdl5Y+R5bCE55qE5raI5oGv77yM5YGa56ys5LiA5qyh6aqM6K+B5pud5YWJ55qE5aSE55CGXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ0FQTFVTX0FFX0RPTV9DSEFOR0UnLCBoYW5kbGVyX2RvbV9leHBvc3VyZSk7XG5cbiAgLy8gc3RlcDIg55uR5ZCs5YWD57Sg5pud5YWJXG4gIHV0aWxFdmVudC5vbih3aW5kb3csICd0b3VjaG1vdmUnLCB0aHJvdHRsZV9oYW5kbGVyX2V4cG9zdXJlKTtcbiAgdXRpbEV2ZW50Lm9uKHdpbmRvdywgJ3Njcm9sbCcsIHRocm90dGxlX2hhbmRsZXJfZXhwb3N1cmUpO1xuICB1dGlsRXZlbnQub24od2luZG93LCAncmVzaXplJywgaGFuZGxlcl9kb21fZXhwb3N1cmUpO1xuICB3YXRjaF9wb3NpdGlvbnNlbGVjdG9yX2NoYW5nZShleHBDb25maWcsICdvbicpO1xufTtcblxuZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uKGV4cENvbmZpZykge1xuICB1dGlsRXZlbnQudW4od2luZG93LCAndG91Y2htb3ZlJywgdGhyb3R0bGVfaGFuZGxlcl9leHBvc3VyZSk7XG4gIHV0aWxFdmVudC51bih3aW5kb3csICdzY3JvbGwnLCB0aHJvdHRsZV9oYW5kbGVyX2V4cG9zdXJlKTtcbiAgdXRpbEV2ZW50LnVuKHdpbmRvdywgJ3Jlc2l6ZScsIGhhbmRsZXJfZG9tX2V4cG9zdXJlKTtcbiAgd2F0Y2hfcG9zaXRpb25zZWxlY3Rvcl9jaGFuZ2UoZXhwQ29uZmlnLCAndW4nKTtcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9hZS93YXRjaEV4cG9zdXJlLmpzXG4vLyBtb2R1bGUgaWQgPSA2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdHJhY2tlclV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdHJhY2tlclV0aWwnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgZWFjaE1hcCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoTWFwJyk7XG4vLyB2YXIgdXRpbEVsZW1lbnRBYyA9IHJlcXVpcmUoJy4vdXRpbC91dGlsRWxlbWVudEFjJyk7XG52YXIgdXRpbF9hY19hZSA9IHJlcXVpcmUoJy4uL2xpYl9jb21tb24vdXRpbF9hY19hZScpO1xudmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2xpYl9jb21tb24vY29uZmlnJyk7XG5cbi8vIHNwbeWMuuWdl+iHquWKqOabneWFieiuvue9riBodHRwczovL2FvbmUuYWxpYmFiYS1pbmMuY29tL3JlcS8yMTgwMzM5OVxuZnVuY3Rpb24gcHJvY2Vzc1NQTUNEIChlbHR5cGUsIGVsZW1lbnQsIHNwbSkge1xuICB2YXIgc3BtQyA9ICcwJztcbiAgaWYgKHNwbSkge1xuICAgIGlmIChlbHR5cGUgPT09ICdzcG1jJykge1xuICAgICAgdmFyIHNwbUFyciA9IHNwbS5zcGxpdCgnLicpO1xuICAgICAgc3BtQyA9IHNwbUFyclsyXSA/IHNwbUFyclsyXSA6IHNwbUFyclszXTtcbiAgICAgIC8vIOWPr+inhuWMluWfi+eCueWcuuaZr+S4i+WkmuWIpOaWreS4gOatpeS4jeiDveaYr2nmiJbogIVk5byA5aS05ou85o6l5pWw5a2X55qE5oOF5Ya177yM5Zug5Li66L+Z5Liq5pivc3BtRFxuICAgICAgaWYgKC9eKFxcaXxcXGQpWzAtOV0rJC8udGVzdChzcG1DKSkge1xuICAgICAgICBzcG1DID0gJzAnO1xuICAgICAgfVxuICAgICAgc3BtID0gW3NwbUFyclswXSwgc3BtQXJyWzFdLCBzcG1DXS5qb2luKCcuJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNwbSA9ICcnO1xuICAgIHZhciBnX1NQTSA9IHdpbmRvdy5nX1NQTSB8fCB7fTtcbiAgICBpZiAodHlwZW9mIGdfU1BNLmdldFBhcmFtID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgc3BtT2JqID0gZ19TUE0uZ2V0UGFyYW0oZWxlbWVudCk7XG4gICAgICAvLyBodHRwczovL2FvbmUuYWxpYmFiYS1pbmMuY29tL3JlcS8yMTgwMzM5OSBA5LqR5p2wIDIwMTktMDgtMDnpnIDmsYJcbiAgICAgIGlmIChlbHR5cGUgPT09ICdzcG1jJykge1xuICAgICAgICBzcG1DID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3BtJykgfHwgJzAnO1xuICAgICAgICBzcG0gPSBbc3BtT2JqLmEsIHNwbU9iai5iLCBzcG1DXS5qb2luKCcuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcG0gPSBbc3BtT2JqLmEsIHNwbU9iai5iLCBzcG1PYmouYywgc3BtT2JqLmRdLmpvaW4oJy4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNwbTtcbn1cblxuLyoqXG4gKiDnu4Too4XmiZPngrnlj4LmlbBcbiAqIGxvZ2tleUNvbnRhaW5lcuaVsOaNruagvOW8j1xuICogbG9na2V5MTogW3BhcmFtT2JqMTEsIHBhcmFtT2JqMTIsIC4uLl1cbiAqIGxvZ2tleTI6IFtwYXJhbU9iajIxLCBwYXJhbU9iajIyLCAuLi5dXG4gKiBAcmV0dXJuIHtPYmplY3R9IGxvZ2tleUNvbnRhaW5lclxuICovXG52YXIgZmlsdGVyUmVjb3JkcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaXNBcGx1c0RlYnVnID0gYXBsdXMuYXBsdXNEZWJ1ZztcbiAgdmFyIGxvZ2tleUNvbnRhaW5lciA9IHt9O1xuICB2YXIgcmVxdWVzdF9jZmcgPSBjb25maWcuZ2V0RGVmYXVsdFJlcXVlc3RDZmcoKTtcblxuICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gIHZhciBfYWNIYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLl9hY0hhc2hNYXAgfHwge307XG4gIGVhY2hNYXAoX2FjSGFzaE1hcCwgZnVuY3Rpb24gKGxvZ2tleSwgYXJyKSB7XG4gICAgLy8g5p+l6K+i5pyJ5pWI5pud5YWJ5YWD57Sg77yI54q25oCB5Li64oCcMuKAne+8ie+8jOaUvuWFpeW+heaJk+eCuembhuWQiGxvZ2tleUNvbnRhaW5lclxuICAgIHZhciBlbGVfcyA9IGFyciB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWxlX3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG4gICAgICBpZiAodi5zdGF0dXMgPT09IDIpIHtcbiAgICAgICAgdi5zdGF0dXMgPSAzOyAvLyDlh4blpIfmiZPngrnnirbmgIFcbiAgICAgICAgdXRpbF9hY19hZS51cGRhdGVFeHBIYXNoTWFwKGxvZ2tleSwgdiwgJ1VQREFURScpO1xuICAgICAgICBfYXBsdXNfYXV0b19leHAuZXhwX3RpbWVzKys7XG5cbiAgICAgICAgLy8g6K+75Y+W6KKr5pud5YWJ5YWD57Sg5LiK55qE54m55a6a5bGe5oCn77yM6L+Z5Lqb54m55a6a5bGe5oCn5piv6YCa6L+H5pud5YWJ5Z+L54K55LqL5YWI5Z+L6L+b5Y6755qEXG4gICAgICAgIHZhciBleHBDb25maWcgPSB2LmV4cENvbmZpZyB8fCB7fTtcbiAgICAgICAgdmFyIHNwbV9hYiA9IGdvbGRsb2cuc3BtX2FiID8gZ29sZGxvZy5zcG1fYWIuam9pbignLicpIDogJzAuMC4wLjAnOyAvLyDkv53lupVzcG1BQlxuICAgICAgICB2YXIgc3BtID0gcHJvY2Vzc1NQTUNEKGV4cENvbmZpZy5lbHR5cGUsIHYuZWxlbWVudCkgfHwgc3BtX2FiO1xuXG4gICAgICAgIHZhciBzY20gPSAnJztcbiAgICAgICAgdmFyIF9yYXRlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBfcmF0ZU51bSA9IG5ldyBOdW1iZXIodi52aWV3YWJpbGl0eVJhdGUpO1xuICAgICAgICAgIF9yYXRlID0gX3JhdGVOdW0udG9GaXhlZCgyKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIF9yYXRlID0gdi52aWV3YWJpbGl0eVJhdGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGV4YXJnc19vcmlnaW4gPSB7XG4gICAgICAgICAgLy8gJ194cGF0aCc6IHV0aWxfYWNfYWUuZ2V0WFBhdGgodi5lbGVtZW50KSxcbiAgICAgICAgICAnX3cnOiB2LndpZHRoLFxuICAgICAgICAgICdfaCc6IHYuaGVpZ2h0LFxuICAgICAgICAgICdfeCc6IHYueCxcbiAgICAgICAgICAnX3knOiB2LnksXG4gICAgICAgICAgJ19yYXRlJzogX3JhdGUsXG4gICAgICAgICAgJ192aWV3YWJpbGl0eSc6IHYudmlld2FiaWxpdHksXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2LnVzZXJQYXJhbXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2LnVzZXJQYXJhbXMudXNlcmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBleGFyZ3Nfb3JpZ2luID0gdXRpbERhc2guYXNzaWduKGV4YXJnc19vcmlnaW4sIHYudXNlclBhcmFtcy51c2VyZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOWPr+inhuWMluWfi+eCueS8muWKqOaAgeazqOWFpXNwbeOAgXNjbe+8jOivpuingSAvcy9zcmMvYXBsdXNfcGx1Z2luL2xpYl93ZWJ2dC9Mb2dHLmpzOiBnZXRBdHRyQXJnc1xuICAgICAgICAgIGlmICh2LnVzZXJQYXJhbXMuc3BtKSB7XG4gICAgICAgICAgICBzcG0gPSBwcm9jZXNzU1BNQ0QoZXhwQ29uZmlnLmVsdHlwZSwgJycsIHYudXNlclBhcmFtcy5zcG0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodi51c2VyUGFyYW1zLnNjbSkge1xuICAgICAgICAgICAgc2NtID0gdi51c2VyUGFyYW1zLnNjbTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh1dGlsX2FjX2FlLmlzTWV0aG9kKGV4cENvbmZpZy5tZXRob2QpIHx8IHV0aWxfYWNfYWUuaXNQa2dTaXplKGV4cENvbmZpZy5wa2dTaXplKSkge1xuICAgICAgICAgIHJlcXVlc3RfY2ZnID0gdXRpbF9hY19hZS5maWx0ZXJFeHBDb25maWdSZXF1ZXN0Q2ZnKGV4cENvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICBzY206IHNjbSxcbiAgICAgICAgICBzcG06IHNwbSxcbiAgICAgICAgICBhcGx1c0NvbnRlbnRJZDogJydcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGV4YXJncyA9IHV0aWxfYWNfYWUuZmlsbFByb3BzRGF0YShleHBDb25maWcsIHYuZWxlbWVudCwgZXhhcmdzX29yaWdpbik7XG4gICAgICAgIGV4YXJncyA9IHV0aWxfYWNfYWUuZmlsbEZpbHRlckRhdGEoZXhwQ29uZmlnLCB2LmVsZW1lbnQsIGV4YXJnc19vcmlnaW4pO1xuICAgICAgICBleGFyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oZXhhcmdzLCB1dGlsX2FjX2FlLmdldERhdGFUcmFja2VyUGFyYW1zKHYuZWxlbWVudCkpO1xuXG4gICAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgICBwYXJhbXMuZXhhcmdzID0gZXhhcmdzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBzcG1EYXRhID0gdXRpbF9hY19hZS5maWxsU3BtRGF0YShleHBDb25maWcsIHYuZWxlbWVudCwgZXhhcmdzX29yaWdpbik7XG4gICAgICAgICAgZXhhcmdzID0gdXRpbERhc2guYXNzaWduKGV4YXJncywgc3BtRGF0YSk7XG4gICAgICAgICAgcGFyYW1zID0gZXhhcmdzO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbG9na2V5Q29udGFpbmVyW2xvZ2tleV0pIHtcbiAgICAgICAgICBsb2drZXlDb250YWluZXJbbG9na2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2tleUNvbnRhaW5lcltsb2drZXldLnB1c2gocGFyYW1zKTtcbiAgICAgICAgaXNBcGx1c0RlYnVnICYmIHVsb2coKS53KCdsb2drZXkgPSAnICsgbG9na2V5ICsgJywgcGFyYW1zID0gJyArIGRlY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShwYXJhbXMpKSk7XG4gICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgLy8gICBtc2c6ICdsb2drZXkgPSAnICsgbG9na2V5ICsgJywgcGFyYW1zID0gJyArIGRlY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShwYXJhbXMpKVxuICAgICAgICAvLyB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGxvZ2tleUNvbnRhaW5lcjogbG9na2V5Q29udGFpbmVyLFxuICAgIHJlcXVlc3RfY2ZnOiByZXF1ZXN0X2NmZ1xuICB9O1xufTtcblxudmFyIGRvX2Nsb25lX2FyciA9IGZ1bmN0aW9uIChlbGVzKSB7XG4gIHZhciBycyA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gZWxlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBvYmogPSBlbGVzW2ldIHx8IHt9O1xuICAgIHZhciB0bXAgPSB7fTtcbiAgICBlYWNoTWFwKG9iaiwgZnVuY3Rpb24gKGssIHZhbHVlKSB7XG4gICAgICBpZiAoayAhPT0gJ2VsZW1lbnQnKSB7XG4gICAgICAgIHRtcFtrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZhciB0bXAyID0gdXRpbERhc2guY2xvbmVEZWVwKHRtcCk7XG4gICAgdG1wMi5lbGVtZW50ID0gb2JqLmVsZW1lbnQ7XG4gICAgcnMucHVzaCh0bXAyKTtcbiAgfVxuICByZXR1cm4gcnM7XG59O1xuXG4vKipcbiAqIEBwYXJhbXMgb3B0aW9uc1xuICovXG52YXIgaGFuZGxlclJlY29yZCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuICB2YXIgX2FjSGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5fYWNIYXNoTWFwIHx8IHt9O1xuICB2YXIgY2xlYXJfbGlzdCA9IFtdO1xuICBlYWNoTWFwKF9hY0hhc2hNYXAsIGZ1bmN0aW9uIChsb2drZXksIG9iaikge1xuICAgIC8vIOafpeivouacieaViOabneWFieWFg+e0oO+8iOeKtuaAgeS4uuKAnDLigJ3vvInvvIzmlL7lhaXlvoXmiZPngrnpm4blkIhsb2drZXlDb250YWluZXJcbiAgICB2YXIgZWxlX3MgPSBkb19jbG9uZV9hcnIob2JqKSB8fCBbXTtcbiAgICBmb3IgKHZhciB4ID0gMCwgbGVuID0gZWxlX3MubGVuZ3RoOyB4IDwgbGVuOyB4KyspIHtcbiAgICAgIHZhciB2ID0gZWxlX3NbeF0gfHwge307XG4gICAgICB2YXIgdl9vcmlnaW4gPSBvYmpbeF0gfHwge307XG4gICAgICAvLyDmn6Xor6Llt7LmiJDlip/miZPngrnnmoTlhYPntKDvvIzlsIblhbbku45oYXNobWFw5Lit56e76Zmk77yM5bm25L+u5pS5ZG9t6IqC54K5XG4gICAgICBpZiAodi5zdGF0dXMgPT09IDMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyDmm7TmlrDlhYPntKDlsZ7mgKdcbiAgICAgICAgICB1dGlsX2FjX2FlLnNldFJlY29yZFN1Y2Nlc3Modl9vcmlnaW4sIGNvbmZpZy5EQVRBX0FQTFVTX0FFX0tFWSk7XG4gICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnB1Ymxpc2goJ0FQTFVTX0VMRU1FTlRfRVhQT1NVUkUnLCB7XG4gICAgICAgICAgICBsb2drZXk6IGxvZ2tleSxcbiAgICAgICAgICAgIHZfb3JpZ2luOiB2X29yaWdpbixcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjbGVhcl9saXN0LnB1c2godl9vcmlnaW4pO1xuICAgICAgICB9IGNhdGNoIChlcnIpe1xuICAgICAgICAgIHVsb2coKS53KGVyciAmJiBlcnIubWVzc2FnZSk7XG4gICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgIC8vICAgbXNnOiBlcnIgJiYgZXJyLm1lc3NhZ2VcbiAgICAgICAgICAvLyB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAoY2xlYXJfbGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICB1dGlsX2FjX2FlLnVwZGF0ZUV4cEhhc2hNYXAobG9na2V5LCBjbGVhcl9saXN0LnBvcCgpLCAnQ0xFQVInKTtcbiAgICB9XG4gIH0pO1xufTtcblxudmFyIGhhbmRsZXI7XG52YXIgcmVjb3JkUXVldWUgPSBbXTtcbnZhciBwcm9jZXNzUmVjb3JkUXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gIGhhbmRsZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHJlY29yZFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2gocmVjb3JkUXVldWUucG9wKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGVhckludGVydmFsKGhhbmRsZXIpO1xuICAgICAgaGFuZGxlciA9IG51bGw7XG4gICAgfVxuICB9LCAyMDApO1xufTtcblxudmFyIGZsYWc7XG5mdW5jdGlvbiB3YXRjaFVubG9hZFJlY29yZCAoKSB7XG4gIGlmICghZmxhZykge1xuICAgIGZsYWcgPSB0cnVlO1xuICAgIGFwbHVzLm9uKHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlcik7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29yZFF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFwbHVzX3F1ZXVlLnB1c2gocmVjb3JkUXVldWVbaV0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICog6K6w5b2V5pud5YWJ5YWD57Sg77yM5omT5YyF5Y+R6YCB5pel5b+XKOavjzEw5Liq5LiA57uEKVxuICogbW9kaWZ5IGJ5IEBSaWNoYXJkfOiwi+WjqyBpbiAyMDE3LTExLTI4IOWinuWKoOS4gOS4quWFpeWPgu+8mlxuICogICAgICByZXF1ZXN0X2NmZ++8miDmj5DkvpvvvJrigJ0x44CB5pel5b+X5omT5YyF5p2h5pWwcGtnU2l6ZSwgMuOAgeaXpeW/l+WPkemAgeaWueW8j21ldGhvZOS4pOS4qumFjee9rumhueKAnFxuICogQHBhcmFtcyBwYXJhbXMge1xuICogICAgbG9na2V5Q29udGFpbmVyIHtBcnJheX1cbiAqICAgIHJlcXVlc3RfY2ZnIHtPYmplY3R9XG4gKiAgfVxuICogQHBhcmFtcyBvcHRpb25zIHtcbiAqICAgc2l6ZSB7TnVtYmVyfSBleHBvdXNlIGVsZW1lbnRzIG51bWJlclxuICogICBldmVudFR5cGUge051bWJlcn0gZXhwb3VzZSBldmVudCB0eXBlIChpbml0OndhdGNoRE9NLCBzY3JvbGwsIHRvdWNobW92ZSAuLi4pXG4gKiB9XG4gKlxuICovXG52YXIgcmVjb3JkQXBsdXNBdEZvckFsaSA9IGZ1bmN0aW9uKHBhcmFtcywgb3B0aW9ucywgY2IpIHtcbiAgdmFyIGxvZ2tleUNvbnRhaW5lciA9IHBhcmFtcy5sb2drZXlDb250YWluZXIgfHwgW107XG4gIHZhciByZXF1ZXN0X2NmZyA9IHBhcmFtcy5yZXF1ZXN0X2NmZyB8fCB7fTtcbiAgdHJhY2tlclV0aWwud3JhcChmdW5jdGlvbigpe1xuICAgIGVhY2hNYXAobG9na2V5Q29udGFpbmVyLCBmdW5jdGlvbiAoX2xvZ2tleSwgbG9na2V5X3ZhbHVlcykge1xuICAgICAgaWYgKGxvZ2tleV92YWx1ZXMgJiYgbG9na2V5X3ZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBsb2drZXlfdmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBnb2tleSA9IFtdO1xuICAgICAgICAgIC8vIHZhciBleHBvdXN1cmVQYXJhbXMgPSBKU09OLnN0cmluZ2lmeShsb2drZXlfdmFsdWVzKTsgLy8obG9na2V5X3ZhbHVlcy5zbGljZShpLCBpICsgU0laRSkpO1xuICAgICAgICAgIHZhciBleHBvdXN1cmVQYXJhbXMgPSBKU09OLnN0cmluZ2lmeShsb2drZXlfdmFsdWVzLnNsaWNlKGksIGkgKyByZXF1ZXN0X2NmZy5wa2dTaXplKSk7XG4gICAgICAgICAgZ29rZXkucHVzaCgnZXhwZGF0YT0nICsgZXhwb3VzdXJlUGFyYW1zKTtcbiAgICAgICAgICBnb2tleS5wdXNoKCdfaXNfYXV0b19leHA9MScpO1xuICAgICAgICAgIGdva2V5LnB1c2goJ19ldmVudFR5cGU9JyArIG9wdGlvbnMuZXZlbnRUeXBlKTtcbiAgICAgICAgICBnb2tleS5wdXNoKCdfbWV0aG9kPScgKyByZXF1ZXN0X2NmZy5tZXRob2QpO1xuICAgICAgICAgIGdva2V5LnB1c2goJ19wa2dTaXplPScgKyByZXF1ZXN0X2NmZy5wa2dTaXplKTtcbiAgICAgICAgICBcbiAgICAgICAgICB2YXIgbWV0aG9kID0gcmVxdWVzdF9jZmcubWV0aG9kIHx8ICdQT1NUJztcbiAgICAgICAgICByZWNvcmRRdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgICAgICBhcmd1bWVudHM6IFtfbG9na2V5LCAnRVhQJywgZ29rZXkuam9pbignJicpLCBtZXRob2RdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaSArPSByZXF1ZXN0X2NmZy5wa2dTaXplO1xuICAgICAgICB9XG4gICAgICAgIGNiKG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCAncmVjb3JkQXBsdXNBdEZvckFsaScpO1xufTtcblxudmFyIHJlY29yZEFwbHVzQXRGb3JBbGl5dW4gPSBmdW5jdGlvbiAocGFyYW1zLCBvcHRpb25zLCBjYikge1xuICB2YXIgbG9na2V5Q29udGFpbmVyID0gcGFyYW1zLmxvZ2tleUNvbnRhaW5lciB8fCBbXTtcbiAgdmFyIHJlcXVlc3RfY2ZnID0gcGFyYW1zLnJlcXVlc3RfY2ZnIHx8IHt9O1xuICB0cmFja2VyVXRpbC53cmFwKGZ1bmN0aW9uKCl7XG4gICAgZWFjaE1hcChsb2drZXlDb250YWluZXIsIGZ1bmN0aW9uIChfbG9na2V5LCBsb2drZXlfdmFsdWVzKSB7XG4gICAgICBpZiAobG9na2V5X3ZhbHVlcyAmJiBsb2drZXlfdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGxvZ2tleV92YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGdva2V5ID0ge1xuICAgICAgICAgICAgX2lzX2F1dG9fZXhwOiAxLFxuICAgICAgICAgICAgX2V2ZW50VHlwZTogb3B0aW9ucy5ldmVudFR5cGUsXG4gICAgICAgICAgICBfbWV0aG9kOiByZXF1ZXN0X2NmZy5tZXRob2QsXG4gICAgICAgICAgICBpc19hdXRvOiAxXG4gICAgICAgICAgfTtcbiAgICAgICAgICB2YXIgZXhwb3VzdXJlUGFyYW1zID0gbG9na2V5X3ZhbHVlc1tpXTtcbiAgICAgICAgICBmb3IgKHZhciBrIGluIGV4cG91c3VyZVBhcmFtcykgeyAgXG4gICAgICAgICAgICBnb2tleVtrXSA9IGV4cG91c3VyZVBhcmFtc1trXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIG1ldGhvZCA9IHJlcXVlc3RfY2ZnLm1ldGhvZCB8fCAnUE9TVCc7XG4gICAgICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICAgICAgYXJndW1lbnRzOiBbX2xvZ2tleSwgJ0VYUCcsIGdva2V5LCBtZXRob2RdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGNiKG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCAncmVjb3JkQXBsdXNBdEZvckFsaXl1bicpO1xufTtcblxuLyoqXG4gKiBAcGFyYW1zIG9wdGlvbnMge1xuICogICBzaXplIHtOdW1iZXJ9IGV4cG91c2UgZWxlbWVudHMgbnVtYmVyXG4gKiAgIGV2ZW50VHlwZSB7TnVtYmVyfSBleHBvdXNlIGV2ZW50VHlwZSAoaW5pdDp3YXRjaERPTSwgc2Nyb2xsLCB0b3VjaG1vdmUgLi4uKVxuICogfVxuICovXG52YXIgaGFuZGxlckV4cG9zdXJlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICBpZiAob3B0aW9ucy5zaXplID4gMCkge1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgcHJvY2Vzc1JlY29yZFF1ZXVlKCk7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBmaWx0ZXJSZWNvcmRzKCkgfHwge307XG4gICAgaWYgKGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy10cmFjay1jb21iaW5lJykgPT09ICdvbicpIHtcbiAgICAgIHJlY29yZEFwbHVzQXRGb3JBbGkocmVzdWx0LCBvcHRpb25zLCBoYW5kbGVyUmVjb3JkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVjb3JkQXBsdXNBdEZvckFsaXl1bihyZXN1bHQsIG9wdGlvbnMsIGhhbmRsZXJSZWNvcmQpO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0cy53YXRjaF9kYXRhX2NoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdBUExVU19BRV9FWFBPU1VSRV9DSEFOR0UnLCBoYW5kbGVyRXhwb3N1cmUpO1xuICB3YXRjaFVubG9hZFJlY29yZCgpO1xufTtcblxuZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICBhcGx1cy5hcGx1c19wdWJzdWIudW5zdWJzY3JpYmUoJ0FQTFVTX0FFX0VYUE9TVVJFX0NIQU5HRScsIGhhbmRsZXJFeHBvc3VyZSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc193ZWIvbGliX2FlL3dhdGNoUmVjb3JkLmpzXG4vLyBtb2R1bGUgaWQgPSA2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9hcGx1c19jcGx1Z2luL3NyYy9saWJfbW9uaXRvci90cmFja2VyX2xvc3Rwdi5qc1xuICog6K6w5b2V5Lii5aSxcHbnmoTlnLrmma9cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEV2ZW50ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudCcpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgbmFtZVN0b3JhZ2UgPSByZXF1aXJlKCdAdXRpbHMvdXRpbE5hbWVTdG9yYWdlJykubmFtZVN0b3JhZ2U7XG52YXIgdXRpbFJlZmVycmVyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxSZWZlcnJlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG4gICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG4gICAgICogfVxuICAgICAqL1xuICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgLy8gfSxcblxuICAgIC8qKlxuICAgICAqIOWGmSByZWZlcnJlclxuICAgICAqXG4gICAgICog5ZyoIHdpbmRvdy5uYW1lIOS4reiusOW9leW9k+WJjemhtemdoueahCB1cmzvvIzku6Xkvr/kuIvkuIDkuKrpobXpnaLor7vlj5ZcbiAgICAgKiB3aW5kb3cubmFtZSDnmoTor7vlhpkgQVBJIOWSjCBuYW1lIOWAvOeahOinhOiMg+WumuS5iemDvemHh+eUqCBuYW1lU3RvcmFnZVxuICAgICAqIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL2NvZGV2L25hbWUtc3RvcmFnZS90cmVlL21hc3RlclxuICAgICAqL1xuICAgIHJlY29yZFZhbEluV2luZG93TmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGlzX2h0dHBzID0gYXBsdXNTdGF0aWMuSFRUUFMgPT0gbG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICB2YXIgTkFNRVNUT1JBR0VfS0VZUyA9IGFwbHVzLmdsb2JhbENvbmZpZy5OQU1FU1RPUkFHRV9LRVlTIHx8IHt9O1xuICAgICAgdmFyIHJlZmVycmVyO1xuICAgICAgdmFyIHJlZmVycmVyX3B2X2lkO1xuXG4gICAgICAvLyDku4XlnKggdG9wIOmhtemdouaJjeWBmui/meS4quaTjeS9nFxuICAgICAgLy8g5LuF5ZyoIGh0dHBzIOmhtemdouWcqCB3aW5kb3cubmFtZSDkuK3orrDlvZXkuIsgcmVmZXJyZXIg55qE5YC8XG4gICAgICB2YXIgaXNfaW5faWZyYW1lID0gcGFyZW50ICE9PSBzZWxmOyAgLy8g5b2T5YmN6aG16Z2i5piv5ZCm5ZyoIGlmcmFtZSDkuK1cbiAgICAgIGlmIChpc19pbl9pZnJhbWUgfHwgIWlzX2h0dHBzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHBhZ2VfdXJsID0gbG9jYXRpb24uaHJlZjtcbiAgICAgIC8vIOaYr+WQpuWcqOeZu+W9lemhtemdouS4ilxuICAgICAgdmFyIGlzX2xvZ2luX3BhZ2UgPSBpc19odHRwcyAmJiAocGFnZV91cmwuaW5kZXhPZignbG9naW4udGFvYmFvLmNvbScpID49IDAgfHwgcGFnZV91cmwuaW5kZXhPZignbG9naW4udG1hbGwuY29tJykgPj0gMCk7XG4gICAgICB2YXIgcGFnZV9yZWZlcnJlciA9IHV0aWxSZWZlcnJlci5nZXRSZWZlcihOQU1FU1RPUkFHRV9LRVlTKTtcblxuICAgICAgLyoqXG4gICAgICAgKiDlpoLmnpzmmK/lnKjnmbvlvZXpobXpnaLkuIrvvIzlubbkuJTlt7Lnu4/orrDlvZXkuobkuIDkuKogcmVmZXJyZXLvvIzliJnov5nlhL/ljrvmjokgcmVmZXJyZXIg5Y+C5pWwXG4gICAgICAgKiDlm6DkuLrvvIzlpoLmnpznlKjmiLfmmK/ku44gQSDpobXpnaLngrnlh7vliLAgQiDpobXpnaLvvIzkuK3pl7Tnu4/ov4fkuobnmbvlvZXpobXpnaLvvIxcbiAgICAgICAqIOWQjuWPsOWcqOi/mOWOn+i3r+W+hOaXtu+8jOWPqumcgOimgeefpemBkyBBIC0+IELvvIzogIzkuI3pnIDopoHnn6XpgZMgQSAtPiBsb2dpbiAtPiBCXG4gICAgICAgKi9cbiAgICAgIGlmIChpc19sb2dpbl9wYWdlICYmIHBhZ2VfcmVmZXJyZXIpIHtcbiAgICAgICAgcmVmZXJyZXIgPSBwYWdlX3JlZmVycmVyO1xuICAgICAgICByZWZlcnJlcl9wdl9pZCA9IG5hbWVTdG9yYWdlLmdldEl0ZW0oTkFNRVNUT1JBR0VfS0VZU1snUkVGRVJSRVJfUFZfSUQnXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWZlcnJlciA9IHBhZ2VfdXJsO1xuICAgICAgICByZWZlcnJlcl9wdl9pZCA9IGFwbHVzLnB2aWQ7XG4gICAgICB9XG5cbiAgICAgIG5hbWVTdG9yYWdlLnNldEl0ZW0oTkFNRVNUT1JBR0VfS0VZU1snUkVGRVJSRVInXSwgcmVmZXJyZXIpO1xuICAgICAgbmFtZVN0b3JhZ2Uuc2V0SXRlbShOQU1FU1RPUkFHRV9LRVlTWydSRUZFUlJFUl9QVl9JRCddLCByZWZlcnJlcl9wdl9pZCk7XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHV0aWxFdmVudC5vbih3aW5kb3csICdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zZWxmLnJlY29yZFZhbEluV2luZG93TmFtZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX21vbml0b3IvbmFtZV9zdG9yYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9hcGx1c19jcGx1Z2luL3NyYy9saWJfbW9uaXRvci90cmFja2VyX2xvc3Rwdi5qc1xuICog6K6w5b2V5Lii5aSxcHbnmoTlnLrmma9cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEV2ZW50ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudCcpO1xudmFyIFRyYWNrZXIgPSByZXF1aXJlKCcuL3RyYWNrZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuICAgICAqICAgbG9nQ29uZmlnOiB7bG9nQ29uZmlnfVxuICAgICAqIH1cbiAgICAgKi9cbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG4gICAgLyoqXG4gICAgICog6K6w5b2V4oCd5Lii5aSxUFbigJxcbiAgICAgKlxuICAgICAqIEBwYXJhbXMge09iamVjdH0gcGFyYW1zIDoge1xuICAgICAqICAgcGFnZTogJ3d3dy54eHguY29tJyxcbiAgICAgKiAgIHBhZ2VfdXJsOiAnaHR0cDovL3h4eC8/MjMyMydcbiAgICAgKiAgIGR1cmF0aW9uOiAxMTFcbiAgICAgKiAgIHNwbV9hYjogMS4yXG4gICAgICogfVxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBkb190cmFja2VyX2xvc3RwdjogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucGFnZSkge1xuICAgICAgICB2YXIgc3BtYWIgPSBwYXJhbXMuc3BtX2FiID8gcGFyYW1zLnNwbV9hYi5zcGxpdCgnLicpIDogW107XG4gICAgICAgIHZhciBNX1QgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnNlbmRCZWFjb24gPyAncG9zdCcgOiAnZ2V0JztcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAncmVjb3JkX2xvc3Rwdl9ieScgKyBNX1QgKyAnXycgKyBwYXJhbXMubXNnO1xuICAgICAgICB2YXIgdHJhY2tlciA9IG5ldyBUcmFja2VyKHtcbiAgICAgICAgICByYXRpbzogcGFyYW1zLnJhdGlvIHx8IHRoaXMub3B0aW9ucy5jb25maWcubG9zdFB2UmVjb3JkUmF0aW8gLy8g5Lii5aSxUFbnmoTorrDlvZXmpoLnjodcbiAgICAgICAgfSk7XG4gICAgICAgIHRyYWNrZXIucnVuKHtcbiAgICAgICAgICAnY29kZSc6IDEwMixcbiAgICAgICAgICAncGFnZSc6IHBhcmFtcy5wYWdlLFxuICAgICAgICAgICdtc2cnOiBtZXNzYWdlLFxuICAgICAgICAgICdzcG1fYSc6IHNwbWFiWzBdLFxuICAgICAgICAgICdzcG1fYic6IHNwbWFiWzFdLFxuICAgICAgICAgICdjMSc6IHBhcmFtcy5kdXJhdGlvbiwgLy8g6aG16Z2i5YGc55WZ5pe26ZW/77yM5a2X5q615a6a5LmJ6KeBZnNw5bmz5Y+wXG4gICAgICAgICAgJ2MyJzogcGFyYW1zLnBhZ2VfdXJsIC8vIOmhtemdouWOn+Wni3VybO+8jOWtl+auteWumuS5ieingWZzcOW5s+WPsFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOiusOW9lXB25rKh5pyJ5Y+R6YCB55qE6aG16Z2iVVJM5Y+K55So5oi3562J5b6F5pe26ZW/XG4gICAgICogQHBhcmFtcyB7TnVtYmVyfSBkdXJhdGlvbiDpobXpnaLlgZznlZnml7bplb/vvIjmr6vnp5LvvIlcbiAgICAgKi9cbiAgICByZWNvcmRMb3N0UHY6IGZ1bmN0aW9uIChkdXJhdGlvbikge1xuICAgICAgdmFyIGFwbHVzID0gd2luZG93LmFwbHVzIHx8IHt9O1xuICAgICAgdmFyIF8kID0gKGFwbHVzLl8kID0gYXBsdXMuXyQgfHwge30pOyAvLyDlhoXpg6jkvb/nlKjnmoTlj5jph49cbiAgICAgIHZhciBzcG1fYWIgPSBhcGx1cy5zcG1fYWIgPyBhcGx1cy5zcG1fYWIuam9pbignLicpIDogJzAuMCc7XG4gICAgICB2YXIgcHZDb3VudCA9IF8kLnNlbmRfcHZfY291bnQgfHwgMDtcblxuICAgICAgLy8g6K6w5b2V5Lii5aSxcHbvvIxUT0RPIOWNlemhteW6lOeUqOmcgOimgeebkeWQrGhhc2jlj5jljJbmiJZoaXN0b3J55Y+Y5YyW5qyh5pWwXG4gICAgICBpZiAocHZDb3VudCA8IDEpIHtcbiAgICAgICAgLy8g5pSv5oyBc2VuZEJlYW5jb27nmoTmtY/op4jlmajov5nph4zlsLHlj6/ku6Xmiorml6Xlv5flj5Hlh7rljrtcbiAgICAgICAgLy8gVE9ET+S4jeaUr+aMgXNlbmRCZWFjb27nmoTmtY/op4jlmajogIPomZHlrZjliLDpmaTkuoZ3aW5kb3cubmFtZeS5i+WklueahOWIq+eahOWcsOaWue+8jOiAg+iZkeS4juWPguaVsOaXoOeXlemAj+S8oOmhueebruS4gOi1t+aQnlxuICAgICAgICBpZiAobmF2aWdhdG9yICYmIG5hdmlnYXRvci5zZW5kQmVhY29uKSB7XG4gICAgICAgICAgdmFyIF9wYWdlID0gbG9jYXRpb24uaG9zdG5hbWUgKyBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgICB0aGlzLmRvX3RyYWNrZXJfbG9zdHB2KHtcbiAgICAgICAgICAgIHBhZ2U6IF9wYWdlLFxuICAgICAgICAgICAgcGFnZV91cmw6IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIF9wYWdlLFxuICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgc3BtX2FiOiBzcG1fYWIsXG4gICAgICAgICAgICBtc2c6ICdkb21fc3RhdGU9JyArIGRvY3VtZW50LnJlYWR5U3RhdGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc3RhcnREYXRlID0gbmV3IERhdGUoKTsgLy8g57uT5p2f5pe26Ze0XG4gICAgICB1dGlsRXZlbnQub24od2luZG93LCAnYmVmb3JldW5sb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZW5kRGF0ZSA9IG5ldyBEYXRlKCk7IC8vIOe7k+adn+aXtumXtFxuICAgICAgICB2YXIgZHVyYXRpb24gPSBlbmREYXRlLmdldFRpbWUoKSAtIHN0YXJ0RGF0ZS5nZXRUaW1lKCk7IC8vIOaXtumXtOW3rueahOavq+enkuaVsFxuICAgICAgICBfc2VsZi5yZWNvcmRMb3N0UHYoZHVyYXRpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX21vbml0b3IvcmVjb3JkX2xvc3RfcHYuanNcbi8vIG1vZHVsZSBpZCA9IDY2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfby9tb25pdG9yL3RyYWNrZXIuanNcbiAqIOWvueiHqui6q2pz55qE55uR5o6nIC0g6Lef6LiqXG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG5cbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblxudmFyIERFRkFVTFRfT1BUUyA9IHtcbiAgcmF0aW86IDEsXG4gIGxvZ2tleTogJ2ZzcC4xLjEnLFxuICBnbWtleTogJycsXG4gIGNoa3N1bTogJ0g0Njc0NzYxNSdcbn07XG5cbnZhciBUcmFja2VyID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgaWYgKCFvcHRzIHx8IHR5cGVvZiBvcHRzICE9PSAnb2JqZWN0Jykge1xuICAgIG9wdHMgPSBERUZBVUxUX09QVFM7XG4gIH1cbiAgdGhpcy5vcHRzID0gb3B0cztcbiAgdGhpcy5vcHRzLnJhdGlvID0gb3B0cy5yYXRpbyB8fCBERUZBVUxUX09QVFMucmF0aW87IC8vIOmHh+agt+amgueOh+m7mOiupDIwJVxuICB0aGlzLm9wdHMubG9na2V5ID0gb3B0cy5sb2drZXkgfHwgREVGQVVMVF9PUFRTLmxvZ2tleTsgLy8g6buY6K6k6YeH5qC36L+Z5Liq5YC85Luj6KGo5pivanPplJnor69cbiAgdGhpcy5vcHRzLmdta2V5ID0gb3B0cy5nbWtleSB8fCBERUZBVUxUX09QVFMuZ21rZXk7XG4gIHRoaXMub3B0cy5jaGtzdW0gPSBvcHRzLmNoa3N1bSB8fCBERUZBVUxUX09QVFMuY2hrc3VtO1xufTtcbnZhciBmbiA9IFRyYWNrZXIucHJvdG90eXBlO1xuXG4vLyDph4fmoLfmpoLnjofosIPmlbRcbmZuLmdldFJhbmRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgKyAxO1xufTtcblxuLyoqXG4gKiDosIPnlKjpu4Tph5Hku6Tnrq3nmoRyZWNvcmTmlrnms5XvvIzkuIrmiqVqc+mUmeivr1xuICogQHBhcmFtIG9wdGlvbnMge09iamVjdHxTdHJpbmd9IHtcbiAqICAgbG9na2V5IHtTdHJpbmd9IOS7pOeurSBJRCDvvIjlpoIgL3RtYWxsYWMuMS4x77yM5b+F6aG75Lul4oCcL+KAneW8gOWktO+8ieaIluWbvueJh+WcsOWdgO+8iOWmgiAxLmdpZu+8ie+8jFxuICogICDmm53lhYnml6Xlv5fnmoQgbG9na2V5IOS4umFj5oiW5LulYWMt5byA5aS077yM5bi46KeE5pel5b+X55qEIGxvZ2tleSDmmK8gKi5naWbvvIzpu4Tph5Hku6Tnrq3nmoQgbG9na2V5IOW8gOWktOS4gOWumuaYr+KAnC/igJ1cbiAqICAgZ21rZXkge1N0cmluZ31cbiAqICAgZ29rZXkge1N0cmluZ30g5b2i5aaCIGE9MSZiPTImYz1jY2NcbiAqICAgY2hrc3VtIHtOdW1iZXJ8U3RyaW5nfVxuICogfVxuICovXG5mbi5ydW4gPSBmdW5jdGlvbiAob3B0aW9ucywgbXVzdFNlbmQpIHtcbiAgdmFyIGRlZmF1bHRfb3B0cyA9IHtcbiAgICBwaWQ6ICdhcGx1cycsIC8vIOW/hemhu+WMheWQqyBwaWQg5a2X5q6177yM5Y2z5ZyoIENsdWUg5bmz5Y+w5Lit55Sz6K+355qEIHBpZFxuICAgIGNvZGU6IDEwMSwgLy8g5b+F6aG75YyF5ZCrIGNvZGUg5a2X5q6177yM55So5LqO5Yy65YiG5LiN5ZCM57G75Z6L55qE6ZSZ6K+v77yM5Y2z5ZyoIENsdWUg5bmz5Y+w5Lit55Sz6K+355qE6Ieq5a6a5LmJ55uR5o6nIGNvZGVcbiAgICBtc2c6ICflvILluLjlhoXlrrknIC8vIOW/hemhu+WMheWQqyBtc2cg5a2X5q6177yM566A6KaB5o+P6L+w5b2T5YmN6ZSZ6K+v77yM5aaC44CO5Yqg6L29IHVzZXJJZCDlpLHotKXjgI/miJbjgI54eEZ1bmN0aW9uIOaJp+ihjOW8guW4uOOAj+OAglxuICB9O1xuICB2YXIgb3B0cztcbiAgdmFyIHJhbmRvbVJhdGlvO1xuICB2YXIgdXJsID0gJyc7XG5cbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXMgPSB3aW5kb3cuYXBsdXMgfHwge307XG4gICAgdmFyIF8kID0gYXBsdXMuXyQgfHwge307XG4gICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbyB8fCB7fTtcbiAgICB2YXIgYXBsdXNUcmFja2VyUmF0ZSA9IHBhcnNlRmxvYXQobWV0YV9pbmZvWydhcGx1cy10cmFja2VyLXJhdGUnXSk7XG4gICAgb3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcbiAgICBpZiAodHlwZW9mIGFwbHVzVHJhY2tlclJhdGUgIT09ICdudW1iZXInIHx8IChhcGx1c1RyYWNrZXJSYXRlICsgJycpID09PSAnTmFOJykge1xuICAgICAgYXBsdXNUcmFja2VyUmF0ZSA9IG9wdHMucmF0aW87XG4gICAgfVxuICAgIHJhbmRvbVJhdGlvID0gdGhpcy5nZXRSYW5kb20oKTtcbiAgICBpZiAobXVzdFNlbmQgfHwgKHJhbmRvbVJhdGlvIDw9IGFwbHVzVHJhY2tlclJhdGUgKiAxMDApKSB7XG4gICAgICB1cmwgPSAnLy9nbS5tbXN0YXQuY29tLycgKyBvcHRzLmxvZ2tleTtcbiAgICAgIG9wdGlvbnMucmVsID0gYXBsdXMuZ2xvYmFsQ29uZmlnLnNjcmlwdF9uYW1lICsgJ0AnICsgYXBsdXMuZ2xvYmFsQ29uZmlnLmx2ZXI7XG4gICAgICBvcHRpb25zLnR5cGUgPSBvcHRpb25zLmNvZGU7XG4gICAgICBvcHRpb25zLnVpZCA9IGVuY29kZVVSSUNvbXBvbmVudChhcGx1cy5nZXRDb29raWVDbmEoJ2NuYScpKTtcbiAgICAgIG9wdGlvbnMgPSB1dGlsRGFzaC5hc3NpZ24oZGVmYXVsdF9vcHRzLCBvcHRpb25zKTtcblxuICAgICAgdmFyIF90cmFja2VyT3B0cyA9IGZvcm1hdC5vYmoycGFyYW0ob3B0aW9ucyk7XG4gICAgICBhcGx1cy50cmFja2VyID0gYXBsdXMuc2VuZCh1cmwsIHtcbiAgICAgICAgY2FjaGU6IHV0aWxEYXNoLm1ha2VDYWNoZU51bSgpLFxuICAgICAgICBnb2tleTogX3RyYWNrZXJPcHRzLFxuICAgICAgICBsb2d0eXBlOiAnMidcbiAgICAgIH0sICdQT1NUJyk7IC8vIOaMh+WumuS8mOWFiOaMiXBvc3Tor7fmsYLlj5HpgIFcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIG1zZzogJ3RyYWNrZXIucnVuKCkgZXhlYyBlcnJvcjogJyArIGVyclxuICAgIH0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYWNrZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tb25pdG9yL3RyYWNrZXIuanNcbi8vIG1vZHVsZSBpZCA9IDY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuICAgICAqICAgbG9nQ29uZmlnOiB7bG9nQ29uZmlnfVxuICAgICAqIH1cbiAgICAgKi9cbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgLy8g5L+d6K+B5Y+q5Lya5pyJ5LiA5LiqYXBsdXNfcGx1Z2luX21vbml0b3Lov5DooYxcbiAgICAgIGlmIChhcGx1cy5fYXBsdXNfY3BsdWdpbl9tKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIHZhciBjb25maWcgPSB7XG4gICAgICAvLyAgIG9ic29sZXRlSW50ZXJSZWNvcmRSYXRpbzogJzAuMDEnLCAvLyDov4fml7bnmoTmjqXlj6PooqvosIPnlKjnmoTorrDlvZXmpoLnjofvvIwwLjAx5Li6MSXvvIwwLjHkuLoxMCXvvIzku6XmraTnsbvmjqhcbiAgICAgIC8vICAganNFcnJvclJlY29yZFJhdGlvOiAnMC4wMScsIC8vIGpz6ZSZ6K+v55qE6K6w5b2V5qaC546H77yMMC4wMeS4ujEl77yMMC4x5Li6MTAl77yM5Lul5q2k57G75o6oXG4gICAgICAvLyAgIGJyb3dzZXJTdXBwb3J0UmF0aW86ICcwLjAxJywgLy8g5rWP6KeI5Zmo5pSv5oyB5oCn6Zeu6aKY5pS26ZuGXG4gICAgICAvLyB9O1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWc7XG4gICAgICBhcGx1cy5fYXBsdXNfY3BsdWdpbl9tID0gcmVxdWlyZSgnLi9saWJfbW9uaXRvci9tYWluLmpzJykucnVuKGNvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfbW9uaXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9tb25pdG9yL3RyYWNrZXJVdGlsLmpzXG4gKiBcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciBUcmFja2VyID0gcmVxdWlyZSgnLi90cmFja2VyJyk7XG5cbnZhciBNX1QgPSBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnNlbmRCZWFjb24gPyAncG9zdCcgOiAnZ2V0JztcblxuZXhwb3J0cy5ydW4gPSBmdW5jdGlvbiAoY29uZmlnX3RyYWNrZXIpIHtcbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6ICdjb21wbGV0ZScsXG4gICAgLyoqXG4gICAgICog6K6w5b2V4oCdSlPplJnor6/igJxcbiAgICAgKlxuICAgICAqIEBwYXJhbXMge09iamVjdH0gY29uZmlnIDoge1xuICAgICAqICAgbG9na2V5OiAnZnNwLjEuMScsXG4gICAgICogICBtZXNzYWdlOiAnJyxcbiAgICAgKiAgIGVycm9yOiBlcnJvcixcbiAgICAgKiAgIGZpbGVuYW1lOiAnZmlsZW5hbWUnLFxuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgZG9fdHJhY2tlcl9qc2Vycm9yOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdHJhY2tlciA9IG5ldyBUcmFja2VyKHtcbiAgICAgICAgICBsb2drZXk6IG9iaiA/IG9iai5sb2drZXkgOiAnJyxcbiAgICAgICAgICByYXRpbzogb2JqICYmIHR5cGVvZiBvYmoucmF0aW8gPT09ICdudW1iZXInICYmIG9iai5yYXRpbyA+IDAgPyBvYmoucmF0aW8gOiBjb25maWdfdHJhY2tlci5qc0Vycm9yUmVjb3JkUmF0aW8gLy8ganPplJnor6/orrDlvZXmpoLnjodcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBlcnJvcl9tZXNzYWdlID0gW1xuICAgICAgICAgICdNZXNzYWdlOiAnICsgb2JqLm1lc3NhZ2UsXG4gICAgICAgICAgJ0Vycm9yIG9iamVjdDogJyArIG9iai5lcnJvclxuICAgICAgICBdLmpvaW4oJyAtICcpO1xuICAgICAgICB2YXIgc3BtX2FiID0gYXBsdXMuc3BtX2FiIHx8IFtdO1xuICAgICAgICB2YXIgX3BhZ2UgPSBsb2NhdGlvbiA/IGxvY2F0aW9uLmhvc3RuYW1lICsgbG9jYXRpb24ucGF0aG5hbWUgOiAnJztcbiAgICAgICAgdHJhY2tlci5ydW4oe1xuICAgICAgICAgICdjb2RlJzogMTEwLFxuICAgICAgICAgICdwYWdlJzogX3BhZ2UsXG4gICAgICAgICAgJ21zZyc6ICdyZWNvcmRfanNlcnJvcl9ieScgKyBNX1QgKyAnXycgKyBvYmoubWVzc2FnZSxcbiAgICAgICAgICAnc3BtX2EnOiBzcG1fYWJbMF0sXG4gICAgICAgICAgJ3NwbV9iJzogc3BtX2FiWzFdLFxuICAgICAgICAgICdjMSc6IGVycm9yX21lc3NhZ2UsIC8vIGVycm9yX21lc3NhZ2XvvIzlrZfmrrXlrprkuYnop4Fmc3DlubPlj7BcbiAgICAgICAgICAnYzInOiBvYmouZmlsZW5hbWUsIC8vIOaKpemUmeaWh+S7tuWQje+8jOWtl+auteWumuS5ieingWZzcOW5s+WPsFxuICAgICAgICAgICdjMyc6IGxvY2F0aW9uID8gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgX3BhZ2UgOiAnJyAvLyBwYWdlX3VybO+8jOWtl+auteWumuS5ieingWZzcOW5s+WPsFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgbXNnOiBlcnJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOiusOW9leKAnea1j+iniOWZqOS4jeWFvOWuueeahOWxnuaAp+KAnFxuICAgICAqXG4gICAgICogQHBhcmFtcyB7T2JqZWN0fSBwYXJhbXMgOiB7XG4gICAgICogICBwYWdlOiAnd3d3Lnh4eC5jb20nLFxuICAgICAqICAgbXNnOiAndGhlIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBzZW5kQmVhY29uIGFuZCBYTUxIVFRQJyxcbiAgICAgKiAgIGJyb3dzZXJfYXR0cjogJ1hNTEhUVFAnLFxuICAgICAqICAgc3BtX2FiOiAxLjJcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIGRvX3RyYWNrZXJfYnJvd3Nlcl9zdXBwb3J0OiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICB2YXIgcnMgPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLnBhZ2UpIHtcbiAgICAgICAgICB2YXIgc3BtYWIgPSBwYXJhbXMuc3BtX2FiID8gcGFyYW1zLnNwbV9hYi5zcGxpdCgnLicpIDogW107XG4gICAgICAgICAgdmFyIHRyYWNrZXIgPSBuZXcgVHJhY2tlcih7XG4gICAgICAgICAgICByYXRpbzogcGFyYW1zLnJhdGlvIHx8IGNvbmZpZ190cmFja2VyLmJyb3dzZXJTdXBwb3J0UmF0aW8gLy8g5rWP6KeI5Zmo5LiN5pSv5oyB55qE5byC5bi46K6w5b2V5qaC546HXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIF9hcGx1c19jbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuICAgICAgICAgIHZhciB1YV9pbmZvID0gX2FwbHVzX2NsaWVudC51YV9pbmZvIHx8IHt9O1xuICAgICAgICAgIHRyYWNrZXIucnVuKHtcbiAgICAgICAgICAgICdjb2RlJzogMTExLFxuICAgICAgICAgICAgJ3BhZ2UnOiBwYXJhbXMucGFnZSxcbiAgICAgICAgICAgICdtc2cnOiBwYXJhbXMubXNnICsgJ19ieScgKyBNX1QsXG4gICAgICAgICAgICAnc3BtX2EnOiBzcG1hYlswXSxcbiAgICAgICAgICAgICdzcG1fYic6IHNwbWFiWzFdLFxuICAgICAgICAgICAgJ2MxJzogW3VhX2luZm8ubywgdWFfaW5mby5iLCB1YV9pbmZvLnddLmpvaW4oJ18nKSwgLy8g5rWP6KeI5Zmo5bGe5oCnXG4gICAgICAgICAgICAnYzInOiBwYXJhbXMuZXRhZyB8fCAnJyxcbiAgICAgICAgICAgICdjMyc6IHBhcmFtcy5jbmEgfHwgJydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBycyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgbXNnOiBlcnJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcnM7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX21vbml0b3IvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiB1bemAmumBk++8jGFwbHVz5Y+R6YCBaHR0cOivt+axguaXpeW/l+aPkuS7tlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgbWluaSA9IHJlcXVpcmUoJy4uL2xpYl91L3V0aWxzL21pbmknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuICAgICAqICAgbG9nQ29uZmlnOiB7bG9nQ29uZmlnfVxuICAgICAqIH1cbiAgICAgKi9cblxuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIE1haW4gPSByZXF1aXJlKCcuL2xpYl9jb25uZWN0aW9uL21haW5fd2ViX2h0dHBfdW0uanMnKTtcbiAgICAgIHZhciBtYWluID0gTWFpbi5jcmVhdGUoe1xuICAgICAgICBXUzogbnVsbCxcbiAgICAgICAgQ1RYOiB3aW5kb3csXG4gICAgICAgIENUWF9UWVBFOiAnV0VCJ1xuICAgICAgfSk7XG4gICAgICBtYWluLnJ1bih0aGlzLm9wdGlvbnMpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX3dlYl9odHRwX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHVt6YCa6YGT77yM5oum5oiq5bm25oyJaHR0cOWNj+iuruWPkemAgeaXpeW/l1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBBYXJvbnzpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbG9nX2Nsb3VkID0gcmVxdWlyZSgnLi9sb2dfY2xvdWQnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIgbWFpbl9iYXNlX2h0dHAgPSByZXF1aXJlKCcuL21haW5fYmFzZV9odHRwLmpzJyk7XG52YXIgYm9keUJ1aWxkID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9ib2R5X2J1aWxkZXJfd2ViX3VtJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsU3RvcmUgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFN0b3JlJyk7XG52YXIgZmV0Y2hEYXRhID0gcmVxdWlyZSgnQHV0aWxzL2ZldGNoRGF0YScpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIGluaXRUaW1lc3RhbXA7XG5tb2R1bGUuZXhwb3J0cyA9IG1haW5fYmFzZV9odHRwLmV4dGVuZCh7XG4gIC8qKlxuICAgKiBAcGFyYW1zIHtPYmplY3R9IGRhdGFcbiAgICogKi8gXG4gIGhhbmRsZXJNaWRkbGV3YXJlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIGlmICghIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkpTQlJJREdFX09OTFkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwYXJhbXMgPSBsb2dfY2xvdWQuY2hhbmdlVG9PYmooZGF0YS53aGF0X3RvX3NlbmQubG9nZGF0YSk7XG4gICAgdmFyIG1hdGNoVmFsdWUgPSBsb2NhdGlvbiAmJiBsb2NhdGlvbi5ocmVmLm1hdGNoKC9hcGx1c0RlYnVnPSh0cnVlfGZhbHNlKS8pIHx8IFtdO1xuICAgIHZhciBpc0RlYnVnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ0RFQlVHJykgfHwgbWF0Y2hWYWx1ZVsxXTtcbiAgICB1bG9nKCkuc2V0RGVidWcoISFpc0RlYnVnKTtcbiAgICB2YXIgbWV0aG9kO1xuICAgIHZhciBwb3N0RGF0YSA9IGJvZHlCdWlsZChwYXJhbXMsIGRhdGEudXNlcmRhdGEpO1xuICAgIGlmIChhcGx1cy5faDVfc2hhcmVfZW5hYmxlKSB7XG4gICAgICBtZXRob2QgPSAnUE9TVCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1ldGhvZCA9IGRhdGEud2hlcmVfdG9fc2VuZC5tZXRob2Q7XG4gICAgICBpZiAobWV0aG9kICE9PSAnUE9TVCcgfHwgISEhKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3Iuc2VuZEJlYWNvbikpIHtcbiAgICAgICAgcG9zdERhdGEgPSBcImQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocG9zdERhdGEpO1xuICAgICAgfSBcbiAgICB9XG4gICAgaWYgKHBvc3REYXRhKSB7XG4gICAgICB1bG9nKCkuaSgnZXZlbnQgYmVmb3JlIHNlbmQgdG86ICcsIGRhdGEud2hlcmVfdG9fc2VuZC51cmwpO1xuICAgIH1cbiAgICBpZiAoIWluaXRUaW1lc3RhbXApIHtcbiAgICAgIGluaXRUaW1lc3RhbXAgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgIH1cblxuICAgIGlmIChpbml0VGltZXN0YW1wICYmIGluaXRUaW1lc3RhbXAgLSAobmV3IERhdGUoKSkuZ2V0VGltZSgpID4gYXBsdXNTdGF0aWMuU0hBUkVfQ0FDSEVfSU5URVJWQUwgJiYgYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX19zaGFyZWZyb20nKTtcbiAgICAgIHV0aWxTdG9yZS5yZW1vdmUoJ19fZnJvbWFwcGtleScpO1xuICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX3VtX3NzcmMnKTtcbiAgICAgIHV0aWxTdG9yZS5yZW1vdmUoJ191bV9jaGFubmVsJyk7XG4gICAgICB1dGlsU3RvcmUucmVtb3ZlKCdfdW1fY2FtcGFpZ24nKTtcbiAgICB9XG5cbiAgICBpZiAoIWFwbHVzLl9oNV9zaGFyZV9lbmFibGUpIHtcbiAgICAgIGFwbHVzLnNlbmQoZGF0YS53aGVyZV90b19zZW5kLnVybCwgcG9zdERhdGEsIG1ldGhvZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoRGF0YS5yZXF1ZXN0NHVtKHtcbiAgICAgICAgdXJsOiBkYXRhLndoZXJlX3RvX3NlbmQudXJsLFxuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgZGF0YTogcG9zdERhdGEsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmltcHJpbnQpIHtcbiAgICAgICAgICAgIC8vIHVtIGg1IOWIhuS6q1xuICAgICAgICAgICAgdXRpbFN0b3JlLnNldChhcGx1c1N0YXRpYy5JTVBSSU5ULCByZXMuaW1wcmludCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICB1bG9nKCkudygnYXBsdXMgd2VibG9ncyBlcnJvcjogJyArIGVycm9yICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfY29ubmVjdGlvbi9tYWluX3dlYl9odHRwX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHdlYnNvY2tldCB1dGlsc1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbmV4cG9ydHMuZ2V0S2V5SW5kZXggPSBmdW5jdGlvbiAoa2V5KSB7XG4gIHZhciBtYXAgPSB7XG4gICAgcHJvdG9jb2w6IDEsXG4gICAgZXZlbnRfYXJnczogMjUsXG4gIH07XG4gIHJldHVybiBtYXBba2V5XTtcbn07XG52YXIgSEwgPSAnLSc7XG5leHBvcnRzLmNoYW5nZVRvQXJyYXkgPSBmdW5jdGlvbiAoZm9ybWF0LCBkYXRhKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXG4gIHZhciB0aW1lID0gZGF0YS5ldmVudF90aW1lc3RhbXAuZ2V0VGltZSgpLnRvU3RyaW5nKCk7XG4gIHZhciBjbGllbnQgPSBkYXRhLmNsaWVudCB8fCB7fTtcbiAgdmFyIHdpZHRoID0gY2xpZW50LnNjcmVlbldpZHRoIHx8ICcnO1xuICB2YXIgaGVpZ2h0ID0gY2xpZW50LnNjcmVlbkhlaWdodCB8fCAnJztcblxuICB2YXIgX3Jlc29sdXRpb24gPSB3aWR0aCArICcqJyArIGhlaWdodDtcbiAgdmFyIHJlc29sdXRpb24gPSB3aWR0aCAmJiBoZWlnaHQgPyBfcmVzb2x1dGlvbiA6IEhMO1xuXG4gIC8vIHZhciBVQSA9IGNsaWVudC51c2VyQWdlbnQgfHwgSEw7XG4gIHZhciBMQU5HID0gY2xpZW50Lmxhbmd1YWdlIHx8IEhMO1xuICB2YXIgZ29rZXkgPSBkYXRhLmdva2V5IHx8IHt9O1xuICB2YXIgZXZlbnRfYXJncyA9IEpTT04uc3RyaW5naWZ5KGdva2V5KTtcbiAgdmFyIHNka19pbmZvID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIGN1c3RvbVNka0lkOiBkYXRhLnNka19pbmZvLmN1c3RvbVNka0lkIHx8ICcnLFxuICAgIHBsYXRmb3JtX3R5cGU6IGRhdGEuc2RrX2luZm8ucGxhdGZvcm1UeXBlIHx8ICcnLCAvL3dlY2hhdCwgJ2FsaXBheScsICdiYWlkdScsICd0YW9iYW8nXG4gIH0pO1xuICB2YXIgYXBwS2V5ID0gZGF0YS5hcHBLZXkgfHwgZGF0YS5hcHBJZCB8fCBITDtcbiAgLy8g5Lia5Yqh5bqU55So55qE5omp5bGV5L+h5oGvXG4gIHZhciBhcHBfZXh0X2luZm8gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgLy8gYXBwSWQ6IGNsaWVudC5hcHBJZCB8fCAnJ1xuICAgIGFwcElkOiBjbGllbnQuYXBwSWQgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ21pbmlBcHBJZCcpIHx8ICcnXG4gIH0pO1xuICB2YXIgc2Vzc2lvbl9hcmdzID0gSlNPTi5zdHJpbmdpZnkoZGF0YS5zZXNzaW9uQXJncyB8fCB7fSk7XG4gIHZhciBnbG9iYWxfYXJncyA9IEpTT04uc3RyaW5naWZ5KGRhdGEuZ2xvYmFsQXJncyB8fCB7fSk7IC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG4gIHZhciBhcmcxID0gZGF0YS5hcmcxIHx8IGRhdGEubG9na2V5IHx8IEhMO1xuICBpZiAoYXJnMS5pbmRleE9mKCcvJCRfJykgPT09IDApIHtcbiAgICBhcmcxID0gYXJnMS5zdWJzdHJpbmcoMSwgYXJnMS5sZW5ndGgpO1xuICB9XG4gIGlmIChkYXRhLmV2ZW50X2NvZGUgPT09ICcyMDAxJyAmJiBkYXRhLnRyYWNrZXJFdmVudENvZGUpIHtcbiAgICBhcmcxID0gZGF0YS50cmFja2VyRXZlbnRDb2RlO1xuICB9XG4gIHZhciBtb2RlbCA9IFtcbiAgICBkYXRhLmNhY2hlLCAgICAgICAgICAgICAgICAgLy8gbG9nX2lkIOagh+ivhuivpeadoeaXpeW/l+eahOWUr+S4gElEXG4gICAgZGF0YS5tZXRob2QgfHwgJ0dFVCcsICAgICAgIC8vIHByb3RvY29sX2luZm8g5Y2P6K6u5L+h5oGvIOS4iemAieS5i+S4gO+8mldTL1BPU1QvR0VUXG4gICAgSEwsICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZXJfYWdlbnQgLSDlrqLmiLfnq69VQeS/oeaBryjmlK/ku5jlrp3lrqLmiLfnq6/kvJrmnInnq5bnur/vvIzkvJrlr7zoh7TmnI3liqHnq6/op6PmnpDlh7rplJnvvIzmlYXliY3nq6/kuI3ph4cpXG4gICAgcmVzb2x1dGlvbiwgICAgICAgICAgICAgICAgIC8vIHJlc29sdXRpb24g5bGP5bmV5a695bqmKuWxj+W5lemrmOW6piBcbiAgICBhcHBLZXksICAgICAgICAgICAgICAgICAgICAgLy8gYXBwX2tleVxuICAgIGFwcF9leHRfaW5mbywgICAgICAgICAgICAgICAvLyBhcHBfZXh0X2luZm8gQXBw5omp5bGV5L+h5oGvXG4gICAgZGF0YS5fZGV2X2lkIHx8IEhMLCAgICAgICAgIC8vIGJpel9kZXZpY2VfaWQg5Lia5Yqh5LiK5Lyg55qE6K6+5aSH6K+G5YirSURcbiAgICAne30nLCAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV2aWNlX2V4dF9pbmZvIOiuvuWkh+aJqeWxleS/oeaBryjlj4Lop4HkuIvmlofor7TmmI4pIFRPRE8g5b6F5a6aIGstdiBqc29u5LiyXG4gICAgZGF0YS5fdXNlcl9uaWNrIHx8IEhMLCAgICAgIC8vIGJpel91c2VyX25pY2sg5Lia5Yqh56uv55So5LqO6K+G5Yir5bey55m75b2V55So5oi355qE5Lya5ZGY5qCH6K+GIFRPRE8g5Lia5Yqh5Lyg5YWlXG4gICAgZGF0YS5fdXNlcl9pZCB8fCBITCwgICAgICAgIC8vIGJpel91c2VyX2lkIOS4muWKoeerr+eUqOS6juivhuWIq+W3sueZu+W9leeUqOaIt+eahOS8muWRmElEXG4gICAgZGF0YS5fYW5vbnlfaWQgfHwgSEwsICAgICAgIC8vIGJpel9hbm9ueV9pZCDkuJrliqHnq6/nlKjkuo7or4bliKvpnZ7nmbvlvZXnlKjmiLfnmoTljL/lkI1JRFxuICAgICd7fScsICAgICAgICAgICAgICAgICAgICAgICAvLyBiaXpfdXNlcl9leHRfaW5mbyDkuJrliqHnq6/kuIrkvKDnmoTmianlsZXnlKjmiLfkv6Hmga8gVE9ET1xuICAgIExBTkcsICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2NhbGUg5Zyw5Yy6LeivreiogOS/oeaBr1xuICAgIGRhdGEudGltZVpvbmUgfHwgSEwsICAgICAgICAvLyB0aW1lem9uZSDorr7lpIfkvb/nlKjnmoTml7bljLpcbiAgICBjbGllbnQub3MgfHwgSEwsICAgICAgICAgICAgLy8gb3Mg5pON5L2c57O757ufIOWmgu+8mlwiT1MgWFwiXG4gICAgY2xpZW50Lm9zX3ZlcnNpb24gfHwgSEwsICAgIC8vIG9zX3ZlcnNpb24g5pON5L2c57O757uf54mI5pys5Y+3L0J1aWxk56CB77yM5aaC77yaXCIxMF8xNF80XCJcbiAgICBzZGtfaW5mbywgICAgICAgICAgICAgICAgICAgLy8gc2RrX2luZm8gU0RL5L+h5oGvKOWPguingeivtOaYjikgay1257uT5p6E77yM6ZyA6Kej5p6QIFwianN2ZXI9YXBsdXNfdS5qcyZsdmVyPTguMTEuNVwiIFRPRE9cbiAgICBkYXRhLl9zZXNzaW9uX2lkIHx8IEhMLCAgICAgLy8gYml6X3Nlc3Npb25faWQg5Lia5Yqh56uv57u05oqk55qEc2Vzc2lvbiBpZFxuICAgIGRhdGEuY25hIHx8IEhMLCAgICAgICAgICAgICAvLyB1dGRpZFxuICAgIHRpbWUsICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudF90aW1lc3RhbXAg5LqL5Lu25pel5b+X55Sf5oiQ5pe26Ze0KOacrOWcsCksIHB25Li66aG16Z2i6L+b5YWl5pe26Ze0XG4gICAgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEudXJsKSB8fCBITCwgICAgICAgICAgICAvLyBwYWdlIOWujOaVtOeahFVSTOaIluiAhVNjcmVlbiBOYW1lXG4gICAgZGF0YS5ldmVudF9jb2RlIHx8IEhMLCAgICAgIC8vIGV2ZW50X2lkIOS6i+S7tuexu+Wei0lEIFRPRE8gQOS6keadsFxuICAgIGVuY29kZVVSSUNvbXBvbmVudChkYXRhLnByZSkgfHwgSEwsICAgICAgICAgICAgLy8gcmVmZXJfcGFnZSDmnaXmupBwYWdlXG4gICAgZ2xvYmFsX2FyZ3MsICAgICAgICAgICAgICAgIC8vIGdsb2JhbF9hcmdzIOeUqOaIt+iuvue9rueahOWFqOWxgOWPguaVsCwg55Sf5ZG95ZGo5pyf57qn5YirXG4gICAgc2Vzc2lvbl9hcmdzLCAgICAgICAgICAgICAgIC8vIHNlc3Npb25fYXJncyDnlKjmiLforr7nva7nmoRTZXNzaW9u57qn5Y+C5pWwLOi3qFNlc3Npb27muIXnqbpcbiAgICBldmVudF9hcmdzLCAgICAgICAgICAgICAgICAgLy8gZXZlbnRfYXJncyDnlKjmiLforr7nva7nmoRQVue6p+WPguaVsCzot6hQVua4heepuiBrLXbnu5PmnoQgQOS6keadsFxuICAgIGFyZzEsICAgICAgICAgICAgICAgICAgICAgICAvLyBhcmcxIOeUqOaIt+aJqeWxlemihOeVmVxuICAgIGRhdGEuc2RrX2luZm8uanN2ZXIsICAgICAgICAvLyBUT0RPIHNka190eXBlIChhcGx1c19taW5pLmpzKSByZXNlcnZlXzEg5LqL5Lu25bGe5oCn77yaUFbnuqfnmoTml6Xlv5flj4LmlbAs6LeoUFboh6rliqjmuIXnqbrvvIzov5nph4zmmK9qc+Wkp+eJiOacrOWPt++8jGFwbHVzLmpzIHx8IGFwbHVzX21pbmkuanNcbiAgICBkYXRhLnNka19pbmZvLmx2ZXIsICAgICAgICAgLy8gc2RrX3ZlcnNpb24gIFNES+eJiOacrO+8jOi/memHjOWvueW6lGFwbHVzSlPnmoTlhbfkvZPniYjmnKzlj7fvvIzlpoIxLjAuMFxuICAgIGNsaWVudC5hcHBWZXJzaW9uIHx8ICdkZXZ0b29scycgfHwgSEwsICAgICAgICAgLy8gYXBwX3ZlcnNpb25cbiAgICBjbGllbnQuYnJhbmQgfHwgSEwsICAgICAgICAgLy8gYnJhbmQg5omL5py65ZOB54mMXG4gICAgSEwsICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhcnJpZXIg6L+Q6JCl5ZWG77yI5YmN56uv5Lmf5Y+W5LiN5Yiw77yJXG4gICAgY2xpZW50Lm5ldHdvcmtUeXBlIHx8IEhMLCAgIC8vIGFjY2VzcyDnvZHnu5znsbvlnotcbiAgXTtcbiAgLy8gY29uc29sZS5sb2cobW9kZWwpO1xuICByZXR1cm4gbW9kZWw7XG59O1xuXG5leHBvcnRzLmNoYW5nZVRvT2JqID0gZnVuY3Rpb24oZGF0YSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHRpbWUgPSBkYXRhLmV2ZW50X3RpbWVzdGFtcC5nZXRUaW1lKCkudG9TdHJpbmcoKTtcbiAgdmFyIGNsaWVudCA9IGRhdGEuY2xpZW50IHx8IHt9O1xuXG4gIC8vIHZhciBVQSA9IGNsaWVudC51c2VyQWdlbnQgfHwgSEw7XG4gIHZhciBMQU5HID0gY2xpZW50Lmxhbmd1YWdlIHx8IEhMO1xuICB2YXIgZ29rZXkgPSBkYXRhLmdva2V5IHx8IHt9O1xuICB2YXIgZXZlbnRfYXJncyA9IEpTT04uc3RyaW5naWZ5KGdva2V5KTtcbiAgdmFyIHNka19pbmZvID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIGN1c3RvbVNka0lkOiBkYXRhLnNka19pbmZvLmN1c3RvbVNka0lkIHx8ICcnLFxuICAgIHBsYXRmb3JtX3R5cGU6IGRhdGEuc2RrX2luZm8ucGxhdGZvcm1UeXBlIHx8ICcnLCAvL3dlY2hhdCwgJ2FsaXBheScsICdiYWlkdScsICd0YW9iYW8nXG4gIH0pO1xuICBcbiAgdmFyIGFwcEtleSA9IGRhdGEuYXBwS2V5IHx8IGRhdGEuYXBwSWQgfHwgSEw7XG4gIC8vIOS4muWKoeW6lOeUqOeahOaJqeWxleS/oeaBr1xuICB2YXIgYXBwX2V4dF9pbmZvID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIGFwcElkOiBjbGllbnQuYXBwSWQgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ21pbmlBcHBJZCcpIHx8ICcnXG4gIH0pO1xuICB2YXIgc2Vzc2lvbl9hcmdzID0gSlNPTi5zdHJpbmdpZnkoZGF0YS5zZXNzaW9uQXJncyB8fCB7fSk7XG4gIHZhciBnbG9iYWxfYXJncyA9IEpTT04uc3RyaW5naWZ5KGRhdGEuZ2xvYmFsQXJncyB8fCB7fSk7IC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG4gIHZhciBhcmcxID0gZGF0YS5hcmcxIHx8IGRhdGEubG9na2V5IHx8IEhMO1xuICBpZiAoYXJnMS5pbmRleE9mKCcvJCRfJykgPT09IDApIHtcbiAgICBhcmcxID0gYXJnMS5zdWJzdHJpbmcoMSwgYXJnMS5sZW5ndGgpO1xuICB9XG4gIGlmIChkYXRhLmV2ZW50X2NvZGUgPT09ICcyMDAxJyAmJiBkYXRhLnRyYWNrZXJFdmVudENvZGUpIHtcbiAgICBhcmcxID0gZGF0YS50cmFja2VyRXZlbnRDb2RlO1xuICB9XG5cbiAgdmFyIE9iaiA9IHt9O1xuICBPYmoucGxhdGZvcm0gPSAgZGF0YS5zZGtfaW5mby5wbGF0Zm9ybVR5cGUgfHwgJyc7XG4gIE9iai5zZGtfdHlwZSA9IE9iai5wbGF0Zm9ybSA/IE9iai5wbGF0Zm9ybSArICdtcCcgOiAnJztcbiAgT2JqLmFwcGtleSA9IGFwcEtleTtcbiAgT2JqLnNka192ZXJzaW9uID0gZGF0YS5zZGtfaW5mby5sdmVyOyAvLyBzZGtfdmVyc2lvbiAgU0RL54mI5pys77yM6L+Z6YeM5a+55bqUYXBsdXNKU+eahOWFt+S9k+eJiOacrOWPt++8jOWmgjEuMC4wXG4gIC8vIHZhciBtb2Rlcm5PUyA9IFVBLm1hdGNoKC9pcGhvbmV8aXBhZHxhbmRyb2lkfG1hY2ludG9zaHxXaW5kb3dzL2kpO1xuICBPYmouZGV2aWNlX3R5cGUgPSBjbGllbnQuZGV2aWNlX21vZGVsIHx8ICcnO1xuICBPYmoub3MgPSBjbGllbnQub3MgfHwgJyc7XG4gIE9iai5vc192ZXJzaW9uID0gY2xpZW50Lm9zX3ZlcnNpb24gfHwgJyc7XG4gIE9iai5qc3ZlciA9IGRhdGEuc2RrX2luZm8uanN2ZXI7IC8vIHNka190eXBlIChhcGx1c19taW5pLmpzKSByZXNlcnZlXzEg5LqL5Lu25bGe5oCn77yaUFbnuqfnmoTml6Xlv5flj4LmlbAs6LeoUFboh6rliqjmuIXnqbrvvIzov5nph4zmmK9qc+Wkp+eJiOacrOWPt++8jGFwbHVzLmpzIHx8IGFwbHVzX21pbmkuanMgfHwgYXBsdXNfY2xvdWQuanM7XG4gIC8vIE9iai5kZXZpY2VfbW9kZWwgPSBVQTsgLy8gc2VydmVyIOerr+mAmui/hyBIVFRQIHJlcXVlc3QgaGVhZGVyIOiOt+WPllxuICBPYmoucGl4ZWxfcmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAnJztcbiAgdmFyIHcgPSBNYXRoLnJvdW5kKGNsaWVudC5zY3JlZW5XaWR0aCAqICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKSk7XG4gIHZhciBoID0gTWF0aC5yb3VuZChjbGllbnQuc2NyZWVuSGVpZ2h0ICogKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEpKTtcbiAgT2JqLnJlc29sdXRpb24gPSB3ID4gaCA/IHcgKyAnKicgKyBoIDogaCArICcqJyArIHc7XG4gIE9iai5sYW5ndWFnZSA9IExBTkc7XG4gIE9iai5hcHBfdmVyc2lvbiA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBWZXJzaW9uJykgfHwgJ2RldnRvb2xzJztcbiAgLy8gZWt2IOmcgOimgeWtl+autVxuICBPYmouYXJnMSA9IGFyZzE7XG4gIE9iai5ldmVudF9hcmdzID0gZXZlbnRfYXJnczsgLy9ldmVudF9hcmdzIOeUqOaIt+iuvue9rueahFBW57qn5Y+C5pWwLOi3qFBW5riF56m6IGstdue7k+aehCBA5LqR5p2wXG4gIE9iai5ldmVudF9jb2RlID0gZGF0YS5ldmVudF9jb2RlIHx8ICcnO1xuICBPYmouc2Vzc2lvbkFyZ3MgPSBzZXNzaW9uX2FyZ3M7IC8vIHNlc3Npb25fYXJncyDnlKjmiLforr7nva7nmoRTZXNzaW9u57qn5Y+C5pWwLOi3qFNlc3Npb27muIXnqbpcbiAgT2JqLmdsb2JhbF9hcmdzID0gZ2xvYmFsX2FyZ3M7IC8vIGdsb2JhbF9hcmdzIOeUqOaIt+iuvue9rueahOWFqOWxgOWPguaVsCwg55Sf5ZG95ZGo5pyf57qn5YirXG4gIE9iai5hcHBfZXh0X2luZm8gPSBhcHBfZXh0X2luZm87IC8vIGFwcF9leHRfaW5mbyBBcHDmianlsZXkv6Hmga9cbiAgT2JqLnRpbWUgPSB0aW1lOyAvL2V2ZW50X3RpbWVzdGFtcCDkuovku7bml6Xlv5fnlJ/miJDml7bpl7Qo5pys5ZywKSwgcHbkuLrpobXpnaLov5vlhaXml7bpl7RcbiAgT2JqLmNuYSA9IGRhdGEuY25hIHx8ICcnO1xuICBPYmoudXJsID0gZGF0YS51cmwgfHwgJyc7XG4gIE9iai5wcmUgPSBkYXRhLnByZSB8fCAnJztcbiAgT2JqLm1ldGhvZCA9IGRhdGEubWV0aG9kIHx8ICdHRVQnO1xuICBPYmoubG9nX2lkID0gZGF0YS5jYWNoZSB8fCAnJzsgLy8gbG9nX2lkIOagh+ivhuivpeadoeaXpeW/l+eahOWUr+S4gElEXG4gIE9iai5zZGtfaW5mbyA9IHNka19pbmZvO1xuICBPYmouaXNfYXV0byA9IGRhdGEuaXNfYXV0bztcbiAgT2JqLnRyYWNrX3R5cGUgPSBkYXRhLnRyYWNrX3R5cGU7XG4gIHZhciBleGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJyk7XG4gIGlmIChleGRhdGEgJiYgZXhkYXRhLmFwbHVzX3RyYWNrX2RlYnVnX2lkKSB7XG4gICAgT2JqLnRyYWNrX2RlYnVnX2lkID0gZXhkYXRhLmFwbHVzX3RyYWNrX2RlYnVnX2lkO1xuICB9XG4gIHJldHVybiBPYmo7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbG9nX2Nsb3VkLmpzXG4vLyBtb2R1bGUgaWQgPSA3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOaLpuaIquW5tuaMiWh0dHDljY/orq7lj5HpgIHml6Xlv5dcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xuLy8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG52YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4vLyB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2UuZXh0ZW5kKHtcblxuICBzdWJzY3JpYmVMb2dzOiBmdW5jdGlvbiAoYWN0aW9uLCBjYWxsYmFjaykge1xuICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIFthY3Rpb24sIGZ1bmN0aW9uIChvcmlEYXRhcykge1xuICAgICAgaWYgKG9yaURhdGFzLnN0YXR1cyA9PT0gYXBsdXNTdGF0aWMuQ09NUExFVEUpIHtcbiAgICAgICAgY2FsbGJhY2sob3JpRGF0YXMpO1xuICAgICAgfVxuICAgIH1dKTtcbiAgfSxcblxuICBnZXRMb2dpY1N5bWJvbDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmZvcm1hdCA9PT0gJ0FMSScgPyAnJicgOiAnfHwnO1xuICB9LFxuXG4gIC8qKlxuICAgKiDlnKjlrZDnsbvkuK3lrp7njrBcbiAgICogQHBhcmFtcyB7T2JqZWN0fSBkYXRhXG4gICAqL1xuICBoYW5kbGVyTWlkZGxld2FyZTogZnVuY3Rpb24gKCkge30sXG4gIFxuXG4gIHdhdGNoTE9HOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICBcbiAgICAvLyDorqLpmIVwduS6i+S7tlxuICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgX3NlbGYuaGFuZGxlck1pZGRsZXdhcmUoZGF0YSwgJ3B2Jyk7XG4gICAgfSk7XG5cbiAgICAvLyDorqLpmIVoamxqL2FwbHVz5LqL5Lu2XG4gICAgX3NlbGYuc3Vic2NyaWJlTG9ncyhhcGx1c1N0YXRpYy5NV19DSEFOR0VfSEpMSiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsIGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICB9KTtcbiAgfSxcblxuICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLndhdGNoTE9HKCk7XG4gIH1cbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfY29ubmVjdGlvbi9tYWluX2Jhc2VfaHR0cC5qc1xuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiB1bSDpgJrpgZPvvIzmlLbmlbDor7fmsYLkuIrmiqXmlbDmja5cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgQWFyb2586ZKw5pitIDxjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20+XG4gKi9cbnZhciBjbG9uZURlZXAgPSByZXF1aXJlKCdAdXRpbHMvY2xvbmVEZWVwJyk7XG52YXIgYnVpbGRIZWFkZXIgPSByZXF1aXJlKCcuL2hlYWRlcl9idWlsZGVyX3dlYl91bScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgbWFuZ2xlID0gcmVxdWlyZSgnLi9tYW5nbGVfd2ViJyk7XG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIganNvblV0aWwgPSByZXF1aXJlKCcuL2pzb25VdGlsJyk7XG52YXIgY3JlYXRlRXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50Jyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy8vdWxvZycpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbFN0b3JlID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxTdG9yZScpO1xudmFyIGVhY2hNYXAgPSByZXF1aXJlKCdAdXRpbHMvZWFjaE1hcCcpO1xudmFyIHV0aWxNb25pdG9yID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxNb25pdG9yJyk7XG52YXIgYXBsdXNVdGlscyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgdXRpbFBhZ2UgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFBhZ2UnKTtcbnZhciB1bVV0aWxzID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS91dGlscycpO1xuXG4vKipcbiAqIOWQjHVt6YCa6YGT54mI5pys55qE5bCP56iL5bqP5pS25pWw5LiK5oql5pWw5o2u5L2T55u45q+U77yM5LiN6ZyA6KaBIHNlc3Npb27vvIxzZXNzaW9uIOeUseacjeWKoeerr+ino+WGs1xuICog5bm25LiUIGVrdiDmsqHmnInnvJPlrZjmnLrliLZcbiovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsb2dkYXRhLCB1c2VyZGF0YSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIGdsb2JhbGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsZGF0YScpIHx8IHt9O1xuICB2YXIgdXRtT2JqID0gZ2V0VXRtUGFyYW1zT2JqKCk7XG4gIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScsIHV0bU9iaik7XG4gIGlmICghbG9nZGF0YSB8fCAhdXNlcmRhdGEgfHwgdXRpbHMuY2hlY2tFbXB0eU9iaihsb2dkYXRhKSB8fCB1dGlscy5jaGVja0VtcHR5T2JqKHVzZXJkYXRhKSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICB2YXIgZGF0YSA9IHt9O1xuICB2YXIgaGVhZGVyID0gY2xvbmVEZWVwKGJ1aWxkSGVhZGVyKGxvZ2RhdGEpKTtcbiAgdmFyIGFfYW5vbnlfaWQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8IGxvZ2RhdGEuY25hO1xuICBpZiAoYV9hbm9ueV9pZCkge1xuICAgIC8vIGhlYWRlci5hbm9ueV9pZCA9IGFfYW5vbnlfaWQ7XG4gICAgaGVhZGVyLmlkX3RyYWNraW5nLmFub255X2lkID0gYV9hbm9ueV9pZDtcbiAgfVxuICBpZiAoZ2xvYmFsZGF0YS5fYWJmcGMpIHtcbiAgICBoZWFkZXIuaWRfdHJhY2tpbmcuX2FiZnBjID0gZ2xvYmFsZGF0YS5fYWJmcGM7XG4gIH1cbiAgLy8gZml4IGlkdHJhY2luZyBidWcsIGlmIHVzZXIgZG9uJ3Qgc2V0IF9kZXZfaWRcbiAgdmFyIGFfZGV2X2lkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSB8fCBsb2dkYXRhLmNuYTtcbiAgaWYgKGFfZGV2X2lkKSB7XG4gICAgLy8gaGVhZGVyLmRldl9pZCA9IGFfZGV2X2lkO1xuICAgIGhlYWRlci5pZF90cmFja2luZy5kZXZfaWQgPSBhX2Rldl9pZDtcbiAgfVxuICBcbiAgaWYgKGFwbHVzLl9oNV9zaGFyZV9lbmFibGUpIHtcbiAgICB2YXIgdXVpZCA9IGFwbHVzLmdldE1ldGFJbmZvKCd1dWlkJyk7XG4gICAgaWYgKHV1aWQpIHtcbiAgICAgIGhlYWRlci5pZF90cmFja2luZy51ZCA9IHV1aWQ7XG4gICAgfVxuICAgIHZhciB1bmlvbmlkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3VuaW9uaWQnKTtcbiAgICBpZiAodW5pb25pZCkge1xuICAgICAgaGVhZGVyLmlkX3RyYWNraW5nLnVuaW9uaWQgPSB1bmlvbmlkO1xuICAgIH1cbiAgICB2YXIgYW5vdXltb3Vzb3BlbmlkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2Fub3V5bW91c29wZW5pZCcpO1xuICAgIGlmIChhbm91eW1vdXNvcGVuaWQpIHtcbiAgICAgIGhlYWRlci5pZF90cmFja2luZy5hbm9ueW1vdXNpZCA9IGFub3V5bW91c29wZW5pZDtcbiAgICB9XG4gICAgdmFyIGFsaXBheV9pZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhbGlwYXlpZCcpO1xuICAgIGlmIChhbGlwYXlfaWQpIHtcbiAgICAgIGhlYWRlci5pZF90cmFja2luZy5hbGlwYXlfaWQgPSBhbGlwYXlfaWQ7XG4gICAgfVxuICAgIHZhciBzd2FuaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnc3dhbmlkJyk7XG4gICAgaWYgKHN3YW5pZCkge1xuICAgICAgaGVhZGVyLmlkX3RyYWNraW5nLmFub255bW91c2lkID0gc3dhbmlkO1xuICAgIH1cbiAgICB2YXIgdXNlclByb2ZpbGUgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5VU0VSX1BST0ZJTEVfS0VZKTtcbiAgICBpZiAodXNlclByb2ZpbGUpIHtcbiAgICAgIGhlYWRlci51c2VyX2luZm8gPSB1c2VyUHJvZmlsZTtcbiAgICB9XG4gICAgdmFyIGltcCA9IHV0aWxTdG9yZS5nZXQoYXBsdXNTdGF0aWMuSU1QUklOVCk7XG4gICAgaWYgKGltcCkge1xuICAgICAgaGVhZGVyLmltcHJpbnQgPSBpbXA7XG4gICAgfVxuICAgIHZhciBpZF90eXBlID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuSURfVFlQRSkgfHwgJ2NuYWlkJztcbiAgICBoZWFkZXIuaWRfdHlwZSA9IGlkX3R5cGU7XG4gIH1cbiAgdmFyIG9wZW5pZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdvcGVuaWQnKTtcbiAgaWYgKG9wZW5pZCkge1xuICAgIGhlYWRlci5pZF90cmFja2luZy5vcGVuaWQgPSBvcGVuaWQ7XG4gIH1cblxuICB2YXIgZWt2ID0gbnVsbDtcbiAgaWYgKGxvZ2RhdGEuZXZlbnRfY29kZSA9PT0gJzIwMDEnKSB7XG4gICAgZWt2ID0gX2J1aWxkUFZFdmVudChsb2dkYXRhLCB1c2VyZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgZWt2ID0gX2J1aWxkSEpMSkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKTtcbiAgfVxuICBpZiAoZWt2KSB7XG4gICAgZGF0YSA9IHtcbiAgICAgIGFuYWx5dGljczoge1xuICAgICAgICBla3ZzOiB7XCJzZXNzaW9uaWRcIiA6IFtjbG9uZURlZXAoZWt2KV19XG4gICAgICB9XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdXNlcklkID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpO1xuICBpZiAodXNlcklkICYmIGRhdGEuYW5hbHl0aWNzKSB7XG4gICAgZGF0YS5hbmFseXRpY3MuYWN0aXZlX3VzZXIgPSB7XG4gICAgICBwdWlkOiB1c2VySWQsXG4gICAgICBwcm92aWRlcjogYXBsdXMuZ2V0TWV0YUluZm8oJ191c2VyX25pY2snKVxuICAgIH07XG4gIH1cbiAgZGF0YS5oZWFkZXIgPSB1dGlscy5hc3NpZ24oaGVhZGVyLCBkYXRhLmhlYWRlciwge1xuICAgIHRzOiBEYXRlLm5vdygpLFxuICAgIHRyYWNlSWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyBEYXRlLm5vdygpICsgdXRpbHMuZ2V0UmFuZG9tU3RyKDkpXG4gIH0pO1xuICB0cnkge1xuICAgIHZhciBfc3RhcnRJZCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGFwbHVzU3RhdGljLlNUQVJUX0lEKTtcbiAgICBpZiAoX3N0YXJ0SWQpIHtcbiAgICAgIGRhdGEuaGVhZGVyLnN0YXJ0X2lkID0gX3N0YXJ0SWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9zdGFydElkID0gdW1VdGlscy5nZXRTdGFydElkKCk7XG4gICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShhcGx1c1N0YXRpYy5TVEFSVF9JRCwgX3N0YXJ0SWQpO1xuICAgIH1cbiAgfSBjYXRjaChlKSB7fVxuICB2YXIgbWFuZ2xlRGF0YSA9IG1hbmdsZShkYXRhKTtcbiAgdmFyIHJlcXVlc3REYXRhID0ganNvblV0aWwuc3RyaW5nZnkobWFuZ2xlRGF0YSk7XG4gIHVsb2coKS5pKCdldmVudCBkYXRhOiAnLG1hbmdsZURhdGEpO1xuICByZXR1cm4gYmFzZTY0LmVuY29kZShyZXF1ZXN0RGF0YSk7XG59O1xuXG5mdW5jdGlvbiBnZXRVdG1QYXJhbXNPYmogKCkge1xuICB2YXIgb2JqID0ge307XG4gIHZhciB1cCA9IHV0aWxEYXNoLmdldFVybFBhcmFtcygpO1xuICB0cnkge1xuICAgIGVhY2hNYXAodXAsIGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgICAvLyDpgb/lhY3kuLrnqbrml7bph43lhplnbG9iYWxwcm9wZXJ0eeWGheeahOWxnuaAp1xuICAgICAgaWYoay5pbmRleE9mKCd1dG1fJykgPT09IDApIHtcbiAgICAgICAgb2JqW2tdID0gdjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgdXRtU3RvcmFnZSA9IHV0aWxTdG9yZS5nZXQoYXBsdXNTdGF0aWMuQVBMVVNfTEFURUFTVF9VVE0pO1xuICAgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChvYmopKSB7XG4gICAgICBpZiAoIXV0bVN0b3JhZ2UgfHwganNvblV0aWwuc3RyaW5nZnkob2JqKSAhPT0gdXRtU3RvcmFnZSkge1xuICAgICAgICB1dGlsU3RvcmUuc2V0KGFwbHVzU3RhdGljLkFQTFVTX0xBVEVBU1RfVVRNLCBqc29uVXRpbC5zdHJpbmdmeShvYmopKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb2JqID0ganNvblV0aWwucGFyc2UodXRtU3RvcmFnZSkgfHwge307XG4gICAgfVxuICB9IGNhdGNoIChlKSB7fVxuICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBfYnVpbGRTaGFyZUluZm8oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuICAgIHZhciBzaGFyZUluZm8gPSB7fTtcbiAgICB2YXIgc2hhcmVmcm9tID0gdXRpbFN0b3JlLmdldCgnX19zaGFyZWZyb20nKTtcbiAgICB2YXIgZnJvbWFwcGtleSA9IHV0aWxTdG9yZS5nZXQoJ19fZnJvbWFwcGtleScpO1xuICAgIHZhciBfdW1fc3NyYyA9IHV0aWxTdG9yZS5nZXQoJ191bV9zc3JjJyk7IFxuICAgIHZhciBfdW1fY2hhbm5lbCA9IHV0aWxTdG9yZS5nZXQoJ191bV9jaGFubmVsJyk7XG4gICAgdmFyIF91bV9jYW1wYWlnbiA9IHV0aWxTdG9yZS5nZXQoJ191bV9jYW1wYWlnbicpO1xuICAgIGlmIChzaGFyZWZyb20pIHtcbiAgICAgIHNoYXJlSW5mby5zaGFyZWZyb20gPSBzaGFyZWZyb207XG4gICAgfVxuICAgIGlmIChmcm9tYXBwa2V5KSB7XG4gICAgICBzaGFyZUluZm8uZnJvbWFwcGtleSA9IGZyb21hcHBrZXk7XG4gICAgfVxuICAgIGlmIChfdW1fc3NyYykge1xuICAgICAgc2hhcmVJbmZvLl91bV9zc3JjID0gX3VtX3NzcmM7XG4gICAgfVxuICAgIGlmIChfdW1fY2hhbm5lbCkge1xuICAgICAgc2hhcmVJbmZvLl91bV9jaGFubmVsID0gX3VtX2NoYW5uZWw7XG4gICAgfVxuICAgIGlmIChfdW1fY2FtcGFpZ24pIHtcbiAgICAgIHNoYXJlSW5mby5fdW1fY2FtcGFpZ24gPSBfdW1fY2FtcGFpZ247XG4gICAgfVxuICAgIHJldHVybiBzaGFyZUluZm87XG4gIH1cbiAgcmV0dXJuO1xufVxuXG4vLyBmdW5jdGlvbiBnZXRQYWdlTmFtZShwcm9wZXJ0aWVzLCBsb2dkYXRhKSB7XG4vLyAgIHZhciBwYWdlTWFuYWdlclBhZ2VOYW1lID0gcGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUobG9jYXRpb24ucGF0aG5hbWUpO1xuLy8gICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbi8vICAgLy8g5paw5aKe5aSa6aG15bqU55SocGFnZW5hbWXorr7nva4gQOiwi+WjqyDnmoTpnIDmsYJcbi8vICAgdmFyIG1ldGFQYWdlTmFtZSA9IGFwbHVzLmdldE1ldGFJbmZvICYmIGFwbHVzLmdldE1ldGFJbmZvKFwiYXBsdXMtcGFnZW5hbWVcIikgfHwgXCJcIjsgIFxuLy8gICByZXR1cm4gcHJvcGVydGllcy5zcG1CIHx8IHByb3BlcnRpZXMucGFnZV9uYW1lIHx8IChkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuZGF0YXNldCAmJiBkb2N1bWVudC5ib2R5LmRhdGFzZXQucGFnZW5hbWUpIHx8IG1ldGFQYWdlTmFtZSB8fCBwYWdlTWFuYWdlclBhZ2VOYW1lIHx8IGxvZ2RhdGEudXJsLnNwbGl0KCc/JylbMF0gfHwgJy0nO1xuLy8gfTtcblxuZnVuY3Rpb24gX2J1aWxkSEpMSkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB0cnkge1xuICAgIHZhciBldmVudEFyZ3MgPSB7fTtcbiAgICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcbiAgICBldmVudEFyZ3MuZ3AgPSBncDtcbiAgICB2YXIgZ29rZXkgPSB1c2VyZGF0YS5nb2tleTtcbiAgICAvLyBjb252ZXJ0IHVybCBwYXJhbWV0ZXIgdG8gYSBqYXZhc2NyaXB0IG9iamVjdFxuICAgIHZhciBwcm9wZXJ0aWVzO1xuICAgIGlmICh0eXBlb2YgZ29rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwcm9wZXJ0aWVzID0gYXBsdXNVdGlscy5hcnIyb2JqKGFwbHVzVXRpbHMucGFyYW0yYXJyKGdva2V5KSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZ29rZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICBwcm9wZXJ0aWVzID0gY2xvbmVEZWVwKGdva2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcGVydGllcyA9IHt9O1xuICAgIH1cbiAgICAvLyAkJF9hcHBfbGlua+eahHRhcmdldEFwcEtleVxuICAgIGlmKHByb3BlcnRpZXMudGFyZ2V0QXBwS2V5KSB7XG4gICAgICBldmVudEFyZ3MudGFyZ2V0QXBwS2V5ID0gcHJvcGVydGllcy50YXJnZXRBcHBLZXk7XG4gICAgICBkZWxldGUgcHJvcGVydGllcy50YXJnZXRBcHBLZXk7XG4gICAgfTtcbiAgICAvLyBA5paH5b+DIOaYr+WQpuS4uuiHquWKqOWfi+eCuSBpc19hdXRvID0gMVxuICAgIC8vIEDmloflv4Mg5piv5ZCm5Li66Ieq5Yqo5Z+L54K5KOWFqOWfi+eCuSkgdHJhY2tfdHlwZSA9IDFcbiAgICBpZiAocHJvcGVydGllcy5pc19hdXRvKSB7XG4gICAgICBldmVudEFyZ3MuaXNfYXV0byA9IDE7XG4gICAgICBldmVudEFyZ3MudHJhY2tfdHlwZSA9IFwiMVwiO1xuICAgICAgZGVsZXRlIHByb3BlcnRpZXMuaXNfYXV0bztcbiAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzWydhcGx1cy1hZSddO1xuICAgICAgZGVsZXRlIHByb3BlcnRpZXNbJ2FwbHVzLWNsayddO1xuICAgICAgZGVsZXRlIHByb3BlcnRpZXMuYXV0b19lbGVtZW50O1xuICAgICAgLy8gQOaWh+W/gyBA6ZKw5pitIOS4iuaKpeWFqOWfi+eCueeahOS6i+S7tuexu+Wei1xuICAgICAgaWYgKGxvZ2RhdGEuZXZlbnRfY29kZSkge1xuICAgICAgICBldmVudEFyZ3MuZXZlbnRfdHlwZV9pZCA9IGxvZ2RhdGEuZXZlbnRfY29kZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZXZlbnRBcmdzLmlzX2F1dG8gPSAwO1xuICAgICAgZXZlbnRBcmdzLnRyYWNrX3R5cGUgPSBcIjBcIjtcbiAgICB9XG4gICAgLy8gQOaWh+W/gyDlhajln4vngrnkuIrmiqXmjqfku7blsZ7mgKdcbiAgICBpZiAocHJvcGVydGllcy5hcCkge1xuICAgICAgZXZlbnRBcmdzLmFwID0gcHJvcGVydGllcy5hcDtcbiAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmFwO1xuICAgIH1cblxuXG4gICAgZXZlbnRBcmdzLnBhZ2VfdGl0bGUgPSBwcm9wZXJ0aWVzLnBhZ2VfdGl0bGUgfHwgdXRpbFBhZ2UuZ2V0UGFnZVRpdGxlKGxvY2F0aW9uLnBhdGhuYW1lKSB8fCBkb2N1bWVudC50aXRsZSB8fCAnJztcbiAgICBwcm9wZXJ0aWVzLnBhZ2VfdGl0bGUgJiYgZGVsZXRlIHByb3BlcnRpZXMucGFnZV90aXRsZTtcbiAgICBpZiAobG9nZGF0YS51cmwpIHtcbiAgICAgIGV2ZW50QXJncy5wYWdlX25hbWUgPSB1dGlsUGFnZS5nZXRQYWdlTmFtZShsb2NhdGlvbi5wYXRobmFtZSwgcHJvcGVydGllcyk7XG4gICAgICBldmVudEFyZ3MudXJsID0gbG9nZGF0YS51cmwgfHwgJy0nO1xuICAgICAgaWYgKGV2ZW50QXJncy5wYWdlX25hbWUgJiYgcHJvcGVydGllcy5zcG1DKSB7XG4gICAgICAgIGV2ZW50QXJnc1snc3BtLWNudCddID0gW2VuY29kZVVSSUNvbXBvbmVudChldmVudEFyZ3MucGFnZV9uYW1lKSwgZW5jb2RlVVJJQ29tcG9uZW50KHByb3BlcnRpZXMuc3BtQyksIGVuY29kZVVSSUNvbXBvbmVudChwcm9wZXJ0aWVzLnNwbUQpXS5maWx0ZXIoZnVuY3Rpb24odil7XG4gICAgICAgICAgcmV0dXJuICEhdjtcbiAgICAgICAgfSkuam9pbignLicpO1xuICAgICAgICBkZWxldGUgcHJvcGVydGllcy5zcG1DO1xuICAgICAgICBkZWxldGUgcHJvcGVydGllcy5zcG1EO1xuICAgICAgICBkZWxldGUgcHJvcGVydGllcy5zcG1CO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgY2xvbmVQID0gY2xvbmVEZWVwKHByb3BlcnRpZXMpO1xuICAgIGZvciAodmFyIGsgaW4gY2xvbmVQKSB7XG4gICAgICBpZiAodHlwZW9mIGsgPT09ICdzdHJpbmcnICYmIHV0aWxzLnN0YXJ0c1dpdGgoaywgJ18nKSkge1xuICAgICAgICBldmVudEFyZ3Nba10gPSBjbG9uZVBba107XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW2tdO1xuICAgICAgfVxuICAgIH1cbiAgICBldmVudEFyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oZXZlbnRBcmdzLCBfYnVpbGRTaGFyZUluZm8oKSB8fCB7fSk7XG5cbiAgICBldmVudEFyZ3MucmFuayA9IHV0aWxNb25pdG9yLnJhbmsoKTtcbiAgICBpZiAodXNlcmRhdGEubG9na2V5ID09PSBhcGx1c1N0YXRpYy5QQUdFX0xFQVZFKSB7XG4gICAgICBldmVudEFyZ3MuYW1vdW50ID0gZXZlbnRBcmdzLnJhbms7XG4gICAgfVxuICAgIHZhciBldmVudCA9IGNyZWF0ZUV2ZW50KHVzZXJkYXRhLmxvZ2tleSwgdXRpbERhc2guYXNzaWduKGV2ZW50QXJncywgeyBjdXNwOiBwcm9wZXJ0aWVzfSApKTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0gY2F0Y2ggKGUpIHsgXG4gICAgdWxvZygpLncoJ0pTT04gcGFyc2UgZmFpbGVkJywgZSk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRQVkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTsgIFxuICB2YXIgcHZhcmdzID0ge307XG4gIHB2YXJncy5yID0gbG9nZGF0YS5hcmcxO1xuICBwdmFyZ3MuZ3AgPSBncDtcblxuICBwdmFyZ3MuaXNfYXV0byA9ICEhbG9nZGF0YS5pc19hdXRvID8gMSA6IDA7XG4gIHB2YXJncy50cmFja190eXBlID0gbG9nZGF0YS50cmFja190eXBlO1xuXG4gIHZhciBhcmdzID0gdXNlcmRhdGE7XG4gIHZhciBwcm9wZXJ0aWVzID0gY2xvbmVEZWVwKHV0aWxzLmRlbGV0ZUluZm8oY2xvbmVEZWVwKGFyZ3MpLCBbJ19hbm9ueV9pZCcsICdfZGV2X2lkJywgJ19zZXNzaW9uX2lkJywgJ191c2VyX2lkJywgJ191c2VyX25pY2snLCAnX3NyY19wb3NfaWQnLCAnY25hJywgJ19hYmZwYyddKSk7XG4gIFxuICBpZiAocHJvcGVydGllcy5kdXJhdGlvbikge1xuICAgIHB2YXJncy5kdXJhdGlvbiA9IHByb3BlcnRpZXMuZHVyYXRpb247XG4gICAgZGVsZXRlIHByb3BlcnRpZXMuZHVyYXRpb247XG4gIH1cblxuICBwdmFyZ3MucGFnZV90aXRsZSA9IHByb3BlcnRpZXMucGFnZV90aXRsZSB8fCB1dGlsUGFnZS5nZXRQYWdlVGl0bGUobG9jYXRpb24ucGF0aG5hbWUpIHx8IGRvY3VtZW50LnRpdGxlIHx8ICcnO1xuICBwcm9wZXJ0aWVzLnBhZ2VfdGl0bGUgJiYgZGVsZXRlIHByb3BlcnRpZXMucGFnZV90aXRsZTtcblxuICBpZiAobG9nZGF0YS51cmwpIHtcbiAgICBwdmFyZ3MucGFnZV9uYW1lID0gdXRpbFBhZ2UuZ2V0UGFnZU5hbWUobG9jYXRpb24ucGF0aG5hbWUsIHByb3BlcnRpZXMpO1xuICAgIHB2YXJncy51cmwgPSBsb2dkYXRhLnVybDtcbiAgICBwdmFyZ3NbJ3NwbS1jbnQnXSA9IGVuY29kZVVSSUNvbXBvbmVudChwdmFyZ3MucGFnZV9uYW1lKTtcbiAgfVxuXG4gIGlmIChsb2dkYXRhLnByZSkge1xuICAgIHB2YXJncy5yZWZfdXJsID0gbG9nZGF0YS5wcmUgfHwgJy0nO1xuICAgIGlmIChhcGx1cy5faDVfc2hhcmVfZW5hYmxlICYmIHB2YXJncy5yZWZfdXJsLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBycyA9IHB2YXJncy5yZWZfdXJsLm1hdGNoKC8oXFx3fC0pK1xcLihcXHd8LSkrXFwuKFxcd3wtKSsvKTtcbiAgICAgIGlmIChycyAmJiBycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHB2YXJncy5fdW1fcmVmZXJlcl9kb21haW4gPSByc1swXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHZhcmdzLnJhbmsgPSB1dGlsTW9uaXRvci5yYW5rKCk7XG4gIHB2YXJncyA9IHV0aWxEYXNoLmFzc2lnbihwdmFyZ3MsIF9idWlsZFNoYXJlSW5mbygpIHx8IHt9KTtcbiAgcmV0dXJuIGNyZWF0ZUV2ZW50KGFwbHVzU3RhdGljLlBBR0VfU1RBUlQsIHV0aWxEYXNoLmFzc2lnbihwdmFyZ3MsIHsgY3VzcDogcHJvcGVydGllcyB9KSk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9ib2R5X2J1aWxkZXJfd2ViX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOWFi+mahuS4gOS4qm9iamVjdFxuICovXG5mdW5jdGlvbiBjbG9uZURlZXAgKG9iaikge1xuICB2YXIgc3RyO1xuICB2YXIgbmV3b2JqID0gQXJyYXkuaXNBcnJheShvYmopID8gW10gOiB7fTsgLy9GaXggb2JqLmNvbnRydWN0b3IgdHlwZUVycm9yIGNvbnN0cnVjdG9yIHVuZGVmaW5lZFxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG4gICAgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgLy/ns7vliJfljJblr7nosaFcbiAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdvYmo7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGNsb25lRGVlcDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9jbG9uZURlZXAuanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgdmFyIGhlYWRlciA9IHt9O1xuICBoZWFkZXIuc2RrX3R5cGUgPSBkYXRhLnNka190eXBlO1xuICBoZWFkZXIuYXBwa2V5ID0gZGF0YS5hcHBrZXk7XG4gIGhlYWRlci5zZGtfdmVyc2lvbiA9IGRhdGEuc2RrX3ZlcnNpb247XG4gIGhlYWRlci5kZXZpY2VfdHlwZSA9IGRhdGEuZGV2aWNlX3R5cGU7XG4gIGhlYWRlci5vcyA9IGRhdGEub3M7XG4gIGhlYWRlci5vc192ZXJzaW9uID0gZGF0YS5vc192ZXJzaW9uO1xuICBoZWFkZXIucGxhdGZvcm0gPSBkYXRhLnBsYXRmb3JtO1xuICBoZWFkZXIucGl4ZWxfcmF0aW8gPSBkYXRhLnBpeGVsX3JhdGlvO1xuICBoZWFkZXIucmVzb2x1dGlvbiA9IGRhdGEucmVzb2x1dGlvbjtcbiAgaGVhZGVyLmxhbmd1YWdlID0gZGF0YS5sYW5ndWFnZTtcbiAgaGVhZGVyLmFwcF92ZXJzaW9uID0gZGF0YS5hcHBfdmVyc2lvbjtcbiAgaGVhZGVyLmpzdmVyID0gZGF0YS5qc3ZlcjtcbiAgaGVhZGVyLnByZSA9IGRhdGEucHJlO1xuICBoZWFkZXIudXJsID0gZGF0YS51cmw7XG4gIGhlYWRlci5kZWJ1Z0lkID0gZGF0YS50cmFja19kZWJ1Z19pZDtcbiAgaGVhZGVyLmlkX3RyYWNraW5nID0ge307XG4gIHJldHVybiBoZWFkZXI7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL2hlYWRlcl9idWlsZGVyX3dlYl91bS5qc1xuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbnZhciBhbmFseXRpY3NNYXAgPSB7XG4gIGVrdnM6ICdlJyxcbiAgYWN0aXZlX3VzZXI6ICdhY3RpdmVfdXNlcidcbn07XG5cbnZhciBoZWFkZXJNYXAgPSB7XG4gIHNka190eXBlOiAnc2R0JyxcbiAgZGV2aWNlX21vZGVsOiAnZG0nLFxuICBsYW5ndWFnZTogJ2xhbmcnLFxuICBkZXZpY2VfdHlwZTogJ2R0JyxcbiAgb3NfdmVyc2lvbjogJ292JyxcbiAgYXBwa2V5OiAnYWsnLFxuICBzZGtfdmVyc2lvbjogJ3N2JyxcbiAgcmVzb2x1dGlvbjogJ3JsJyxcbiAgdGVzdFRva2VuOiAndHRuJyxcbiAgcGl4ZWxfcmF0aW86ICdwcicsXG4gIF9pZDogJ2lkJyxcbiAgaWRfdHlwZTogJ2l0JyxcbiAgaWRfdHJhY2tpbmc6ICdpdHInLFxuICBpbXByaW50OiAnaW1wJyxcbiAgZGVidWdJZDogJ2RrJ1xufTtcblxudmFyIGlkTWFwID0ge1xuICB1dWlkOiAndWQnLFxuICB1bmlvbmlkOiAndW5kJyxcbiAgb3BlbmlkOiAnb2QnLFxuICBhbm9ueW1vdXNpZDogJ25kJyxcbiAgYWxpcGF5X2lkOiAnYWQnLFxuICBkZXZpY2VfaWQ6ICdkZCcsXG4gIHVzZXJpZDogJ3B1aWQnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgcmV0dXJuIHtcbiAgICBoOiBfbWFuZ2xlSGVhZGVyKGRhdGEuaGVhZGVyLCBoZWFkZXJNYXApLFxuICAgIGE6IF9tYW5nbGVBbmFseXRpY3MoZGF0YS5hbmFseXRpY3MsIGFuYWx5dGljc01hcClcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcbiAgdmFyIHJlc3VsdCA9IF9tYW5nbGVPYmooaGVhZGVyLCBtYXApO1xuXG4gIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG4gICAgcmVzdWx0W21hcC5pZF90cmFja2luZyB8fCAnaWRfdHJhY2tpbmcnXSA9IF9tYW5nbGVPYmooaGVhZGVyLmlkX3RyYWNraW5nLCBpZE1hcCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZnVuY3Rpb24gX21hbmdsZU9iaihvYmosIG1hcCkge1xuICB2YXIgcmVzdWx0ID0ge307XG5cbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChtYXBba2V5XSkge1xuICAgICAgcmVzdWx0W21hcFtrZXldXSA9IG9ialtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IG9ialtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiBfbWFuZ2xlQW5hbHl0aWNzKGFuYWx5dGljcywgbWFwKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBpZiAoYW5hbHl0aWNzKSB7XG4gICAgZm9yICh2YXIgcHJvcCBpbiBhbmFseXRpY3MpIHtcbiAgICAgIGlmIChhbmFseXRpY3NbcHJvcF0pIHtcbiAgICAgICAgcmVzdWx0W21hcFtwcm9wXV0gPSBhbmFseXRpY3NbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9tYW5nbGVfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSA3N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xudmFyIGI2NGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xudmFyIGI2NHRhYiA9IChmdW5jdGlvbiAoYmluKSB7XG4gIHZhciB0ID0ge307XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYmluLmxlbmd0aDsgaSA8IGw7IGkrKykgdFtiaW4uY2hhckF0KGkpXSA9IGk7XG4gIHJldHVybiB0O1xufSkoYjY0Y2hhcnMpO1xudmFyIGZyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG52YXIgY2JfdXRvYiA9IGZ1bmN0aW9uIChjKSB7XG4gIHZhciBjYztcbiAgaWYgKGMubGVuZ3RoIDwgMikge1xuICAgIGNjID0gYy5jaGFyQ29kZUF0KDApO1xuICAgIHJldHVybiBjYyA8IDEyOCA/IGMgOiBjYyA8IDIwNDggPyBmcm9tQ2hhckNvZGUoMTkyIHwgY2MgPj4+IDYpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpIDogZnJvbUNoYXJDb2RlKDIyNCB8IGNjID4+PiAxMiAmIDE1KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcbiAgfSBlbHNlIHtcbiAgICBjYyA9IDY1NTM2ICsgKGMuY2hhckNvZGVBdCgwKSAtIDU1Mjk2KSAqIDEwMjQgKyAoYy5jaGFyQ29kZUF0KDEpIC0gNTYzMjApO1xuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoMjQwIHwgY2MgPj4+IDE4ICYgNykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDEyICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuICB9XG59O1xudmFyIHJlX3V0b2IgPSAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGRl18W15cXHgwMC1cXHg3Rl0vZztcbnZhciB1dG9iID0gZnVuY3Rpb24gKHUpIHtcbiAgcmV0dXJuIHUucmVwbGFjZShyZV91dG9iLCBjYl91dG9iKTtcbn07XG52YXIgY2JfZW5jb2RlID0gZnVuY3Rpb24gKGNjYykge1xuICB2YXIgcGFkbGVuID0gWzAsIDIsIDFdW2NjYy5sZW5ndGggJSAzXSxcbiAgICBvcmQgPSBjY2MuY2hhckNvZGVBdCgwKSA8PCAxNiB8IChjY2MubGVuZ3RoID4gMSA/IGNjYy5jaGFyQ29kZUF0KDEpIDogMCkgPDwgOCB8IChjY2MubGVuZ3RoID4gMiA/IGNjYy5jaGFyQ29kZUF0KDIpIDogMCksXG4gICAgY2hhcnMgPSBbYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gMTgpLCBiNjRjaGFycy5jaGFyQXQob3JkID4+PiAxMiAmIDYzKSwgcGFkbGVuID49IDIgPyAnPScgOiBiNjRjaGFycy5jaGFyQXQob3JkID4+PiA2ICYgNjMpLCBwYWRsZW4gPj0gMSA/ICc9JyA6IGI2NGNoYXJzLmNoYXJBdChvcmQgJiA2MyldO1xuICByZXR1cm4gY2hhcnMuam9pbignJyk7XG59O1xudmFyIGJ0b2EgPSBmdW5jdGlvbiAoYikge1xuICByZXR1cm4gYi5yZXBsYWNlKC9bXFxzXFxTXXsxLDN9L2csIGNiX2VuY29kZSk7XG59O1xudmFyIF9lbmNvZGUgPSBmdW5jdGlvbiAodSkge1xuICByZXR1cm4gYnRvYSh1dG9iKHUpKTtcbn07XG52YXIgZW5jb2RlID0gZnVuY3Rpb24gKHUsIHVyaXNhZmUpIHtcbiAgcmV0dXJuICF1cmlzYWZlID8gX2VuY29kZShTdHJpbmcodSkpIDogX2VuY29kZShTdHJpbmcodSkpLnJlcGxhY2UoL1srXFwvXS9nLCBmdW5jdGlvbiAobTApIHtcbiAgICByZXR1cm4gbTAgPT0gJysnID8gJy0nIDogJ18nO1xuICB9KS5yZXBsYWNlKC9cXD0vZywgJycpO1xufTtcbi8vIHZhciBlbmNvZGVVUkkgPSBmdW5jdGlvbiAodSkge1xuLy8gICByZXR1cm4gZW5jb2RlKHUsIHRydWUpO1xuLy8gfTtcbnZhciByZV9idG91ID0gbmV3IFJlZ0V4cChbJ1vDgC3Dn11bwoAtwr9dJywgJ1vDoC3Dr11bwoAtwr9dezJ9JywgJ1vDsC3Dt11bwoAtwr9dezN9J10uam9pbignfCcpLCAnZycpO1xudmFyIGNiX2J0b3UgPSBmdW5jdGlvbiAoY2NjYykge1xuICBzd2l0Y2ggKGNjY2MubGVuZ3RoKSB7XG4gIGNhc2UgNDpcbiAgICB2YXIgY3AgPSAoNyAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgMTggfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDEyIHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDIpKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMyksIG9mZnNldCA9IGNwIC0gNjU1MzY7XG4gICAgcmV0dXJuIGZyb21DaGFyQ29kZSgob2Zmc2V0ID4+PiAxMCkgKyA1NTI5NikgKyBmcm9tQ2hhckNvZGUoKG9mZnNldCAmIDEwMjMpICsgNTYzMjApO1xuICBjYXNlIDM6XG4gICAgcmV0dXJuIGZyb21DaGFyQ29kZSgoMTUgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDEyIHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMikpO1xuICBkZWZhdWx0OlxuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDMxICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpO1xuICB9XG59O1xudmFyIGJ0b3UgPSBmdW5jdGlvbiAoYikge1xuICByZXR1cm4gYi5yZXBsYWNlKHJlX2J0b3UsIGNiX2J0b3UpO1xufTtcbnZhciBjYl9kZWNvZGUgPSBmdW5jdGlvbiAoY2NjYykge1xuICB2YXIgbGVuID0gY2NjYy5sZW5ndGgsXG4gICAgcGFkbGVuID0gbGVuICUgNCxcbiAgICBuID0gKGxlbiA+IDAgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMCldIDw8IDE4IDogMCkgfCAobGVuID4gMSA/IGI2NHRhYltjY2NjLmNoYXJBdCgxKV0gPDwgMTIgOiAwKSB8IChsZW4gPiAyID8gYjY0dGFiW2NjY2MuY2hhckF0KDIpXSA8PCA2IDogMCkgfCAobGVuID4gMyA/IGI2NHRhYltjY2NjLmNoYXJBdCgzKV0gOiAwKSxcbiAgICBjaGFycyA9IFtmcm9tQ2hhckNvZGUobiA+Pj4gMTYpLCBmcm9tQ2hhckNvZGUobiA+Pj4gOCAmIDI1NSksIGZyb21DaGFyQ29kZShuICYgMjU1KV07XG4gIGNoYXJzLmxlbmd0aCAtPSBbMCwgMCwgMiwgMV1bcGFkbGVuXTtcbiAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xufTtcbnZhciBhdG9iID0gZnVuY3Rpb24gKGEpIHtcbiAgcmV0dXJuIGEucmVwbGFjZSgvW1xcc1xcU117MSw0fS9nLCBjYl9kZWNvZGUpO1xufTtcbnZhciBfZGVjb2RlID0gZnVuY3Rpb24gKGEpIHtcbiAgcmV0dXJuIGJ0b3UoYXRvYihhKSk7XG59O1xudmFyIGRlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG4gIHJldHVybiBfZGVjb2RlKFN0cmluZyhhKS5yZXBsYWNlKC9bLV9dL2csIGZ1bmN0aW9uIChtMCkge1xuICAgIHJldHVybiBtMCA9PSAnLScgPyAnKycgOiAnLyc7XG4gIH0pLnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXS9nLCAnJykpO1xufTtcblxuZXhwb3J0cy5lbmNvZGUgPSBlbmNvZGU7XG5leHBvcnRzLmRlY29kZSA9IGRlY29kZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9iYXNlNjQuanNcbi8vIG1vZHVsZSBpZCA9IDc4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBldmVudC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuLy8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBqc29uVXRpbCA9IHJlcXVpcmUoJy4vanNvblV0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgcHJvcGVydGllcykge1xuICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJyB8fCAhaWQpIHtcbiAgICB1bG9nKCkudygnZXZlbnQgbG9na2V5IGlzIGludmFsaWQsIGlkID0nLCBpZCB8fCBcIicnIGV2ZW50IHByb3BlcnRpZXMgPSBcIiwganNvblV0aWwuc3RyaW5nZnkocHJvcGVydGllcy5jdXNwKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBldmVudCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGV2ZW50LmlkID0gaWQ7XG4gIGlmICghcHJvcGVydGllcyB8fCAhcHJvcGVydGllcy50cykge1xuICAgIGV2ZW50LnRzID0gRGF0ZS5ub3coKTtcbiAgfVxuICB2YXIgcHJvcHNUeXBlID0gdHlwZW9mIHByb3BlcnRpZXM7XG4gIGlmIChwcm9wc1R5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkpIHtcbiAgICAgICAgZXZlbnRba2V5XSA9IHByb3BlcnRpZXNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gZml477ya5rig6YGT5bGe5oCn6KKr6KaG55uWXG4gIC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAvLyB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcbiAgLy8gaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuICAvLyAgIGV2ZW50WydncCddID0gZ3A7IFxuICAvLyB9XG4gIHJldHVybiBldmVudDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiB1dGlsTW9uaXRvci5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xudmFyIGVrdlJhbmsgPSAwO1xudmFyIGVrdlNldCA9IHt9O1xuZnVuY3Rpb24gcmFuaygpIHtcbiAgZWt2UmFuaysrOyBcbiAgaWYgKCFla3ZTZXQuaGFzT3duUHJvcGVydHkoZWt2UmFuaykpIHtcbiAgICBla3ZTZXRbZWt2UmFua10gPSBla3ZSYW5rO1xuICB9IGVsc2Uge1xuICAgIGVrdlJhbmsrKztcbiAgfVxuICByZXR1cm4gZWt2UmFuaztcbn07XG5leHBvcnRzLnJhbmsgPSByYW5rO1xuXG5mdW5jdGlvbiBjbGVhcigpIHtcbiAgZWt2UmFuayA9IDA7XG4gIGVrdlNldCA9IHt9O1xufVxuZXhwb3J0cy5jbGVhciA9IGNsZWFyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxNb25pdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA4MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbFBhZ2UuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgaXNTdHJpbmcgPSByZXF1aXJlKCdAdXRpbHMvaXNTdHJpbmcnKTtcbi8qXG4gIHBhZ2VDb2RlID0gaHR0cDovL3d3dy5hYmMuY29tLz9rZXkxPXZhbHVlMSZrZXkyPXZhbHVlMi9wYXRoMS9wYXRoMi9wYXRoM1xuICBmaXhfcGFnZUNvZGUgPSBodHRwOi8vd3d3LmFiYy5jb20vcGF0aDEvcGF0aDIvcGF0aDNcbiAgcGFnZUNvZGUgPSBodHRwOi8vd3d3LmFiYy5jb20vP2tleTE9dmFsdWUxJmtleTI9dmFsdWUyLyMvcGF0aDEvcGF0aDIvcGF0aDNcbiAgZml4X3BhZ2VDb2RlID0gaHR0cDovL3d3dy5hYmMuY29tLyMvcGF0aDEvcGF0aDIvcGF0aDNcbiAgcGFnZUNvZGU9aHR0bzovL3d3dy5hYmMuY29tLz9rZXYxPXZhbHVlMSZrZXYyPXZhbHVlMiMvcGF0aDEvcGF0aDIvcGF0aDNcbiAgZml4X3BhZ2VDb2RlID0gaHR0cDovL3d3dy5hYmMuY29tLyMvcGF0aDEvcGF0aDIvcGF0aDNcbiAgcGFnZUNvZGU9aHR0bzovL3d3dy5hYmMuY29tLz9rZXYxPXZhbHVlMSZrZXYyPXZhbHVlMiMvcGF0aDEvcGF0aDIvcGF0aDM/a2V2Mz12YWx1ZTMma2V5ND12YWx1ZTRcbiAgZml4X3BhZ2VDb2RlPWh0dG86Ly93d3cuYWJjLmNvbS8jL3BhdGgxL3BhdGgyL3BhdGgzXG4gIGh0dHA6Ly9kb21haW4vdnRwYWdlP2tleTE9dmFsdWUxJmtleTI9dmFsdWUyL3BhdGgxL3BhdGgyL3BhdGgzXG4gIGZpeF9wYWdlQ29kZT1odHRwOi8vZG9tYWluL3Z0cGFnZS9wYXRoMS9wYXRoMi9wYXRoM1xuKi9cblxuZnVuY3Rpb24gZ2V0UGFnZU5hbWUocGF0aCwgcHJvcGVydGllcykge1xuICB0cnkge1xuICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuICAgIHZhciBwbmFtZSA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKHBhdGgpOyAvL3BhZ2VDb25maWdcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgbWV0YVBhZ2VOYW1lID0gYXBsdXMuZ2V0TWV0YUluZm8gJiYgYXBsdXMuZ2V0TWV0YUluZm8oXCJhcGx1cy1wYWdlbmFtZVwiKSB8fCBcIlwiOyAvL21ldGFJbmZvIGFwbHVzLXBhZ2VuYW1lXG4gICAgdmFyIGR5bmFtaWNQYWdlRnVuYyA9IGFwbHVzLmdldE1ldGFJbmZvICYmIGFwbHVzLmdldE1ldGFJbmZvKFwiYXBsdXMtZHluYW1pY3BhZ2VcIik7XG4gICAgdmFyIGhhbmRsZVVSTCA9IGxvY2F0aW9uLmhyZWY7XG4gICAgaWYgKGR5bmFtaWNQYWdlRnVuYyAmJiBpc0Z1bmN0aW9uKGR5bmFtaWNQYWdlRnVuYykgJiYgaXNTdHJpbmcoZHluYW1pY1BhZ2VGdW5jKCkpKSB7XG4gICAgICBoYW5kbGVVUkwgPSBkeW5hbWljUGFnZUZ1bmMoKTsgXG4gICAgfVxuICAgIHZhciBmaXJzdCA9IGhhbmRsZVVSTC5zcGxpdCgnPycpWzBdO1xuICAgIHZhciBkZWZhdWx0VXJsID0gZmlyc3Q7XG4gICAgaWYgKGhhbmRsZVVSTC5zcGxpdCgnPycpLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBzZWNvbmQgPSBoYW5kbGVVUkwuc3BsaXQoJz8nKVsxXTtcbiAgICAgIC8qKlxuICAgICAgICogY2hlY2tlZFxuICAgICAgICogIGh0dHA6Ly93d3cuYWJjLmNvbS8/a2V5MT12YWx1ZTEma2V5Mj12YWx1ZTIvcGF0aDEvcGF0aDIvcGF0aDNcbiAgICAgICAqICBmaXg6IGh0dHA6Ly93d3cuYWJjLmNvbS9wYXRoMS9wYXRoMi9wYXRoM1xuICAgICAgKi9cbiAgICAgIHZhciBkYXNoUG9zID0gc2Vjb25kLmluZGV4T2YoJy8nKTtcbiAgICAgIC8qKlxuICAgICAgICogY2hlY2tlZFxuICAgICAgICogaHR0cDovL3d3dy5hYmMuY29tLz9rZXYxPXZhbHVlMSZrZXYyPXZhbHVlMiMvcGF0aDEvcGF0aDIvcGF0aDMgXG4gICAgICAgKiBmaXg6IGh0dHA6Ly93d3cuYWJjLmNvbS8jL3BhdGgxL3BhdGgyL3BhdGgzXG4gICAgICAgKiAqLyBcbiAgICAgIHZhciBoYXNoVGFnUG9zID0gc2Vjb25kLmluZGV4T2YoJyMvJyk7XG4gICAgICB2YXIgcGF0aFBvcyA9IC0xO1xuICAgICAgaWYgKGhhc2hUYWdQb3MgPiAtMSAmJiBkYXNoUG9zID4gLTEpIHtcbiAgICAgICAgaWYgKGhhc2hUYWdQb3MgPCBkYXNoUG9zKSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgKiBjaGVja2VkXG5cdFx0XHRcdFx0KiBodHRwOi8vZG9tYWluP2tleTE9dmFsdWUxJmtleTI9dmFsdWUyIy9wYXRoMS9wYXRoMi9wYXRoM1xuICAgICAgICAgICogZml4OiBodHRwOi8vZG9tYWluLyMvcGF0aDEvcGF0aDIvcGF0aDNcblx0XHRcdFx0XHQqL1xuICAgICAgICAgIHBhdGhQb3MgPSBoYXNoVGFnUG9zO1xuICAgICAgICB9IGVsc2UgaWYgKGhhc2hUYWdQb3MgPiBkYXNoUG9zKSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogY2hlY2tlZFxuXHRcdFx0XHRcdCAqIGh0dHA6Ly9kb21haW4/a2V5MT12YWx1ZTEma2V5Mj12YWx1ZTIvIy9wYXRoMS9wYXRoMi9wYXRoM1xuICAgICAgICAgICAqIGZpeDogaHR0cDovL2RvbWFpbi8jL3BhdGgxL3BhdGgyL3BhdGgzXG5cdFx0XHRcdFx0ICovXG4gICAgICAgICAgcGF0aFBvcyA9IGRhc2hQb3M7XG4gICAgICAgIH0gXG4gICAgICB9IGVsc2UgaWYgKGRhc2hQb3MgPiAtMSkge1xuICAgICAgICBwYXRoUG9zID0gZGFzaFBvcyArIDE7XG4gICAgICB9IGVsc2UgaWYgKGhhc2hUYWdQb3MgPiAtMSkge1xuICAgICAgICBwYXRoUG9zID0gaGFzaFRhZ1BvcztcbiAgICAgIH0gXG5cbiAgICAgIGlmIChwYXRoUG9zID4gLTEpIHtcbiAgICAgICAgdmFyIGxvY2F0aW9uUGF0aCA9IHNlY29uZC5zdWJzdHJpbmcocGF0aFBvcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGVja2VkXG5cdFx0XHRcdCAqIGlmIGh0dHA6Ly9kb21haW4/a2V5MT12YWx1ZTEma2V5Mj12YWx1ZTIjL3BhdGgxL3BhdGgyL3BhdGgzP2tleTM9dmFsdWUzJmtleTQ9dmFsdWU0XG4gICAgICAgICAqIGZpeDogaHR0cDovL2RvbWFpbi9wYXRoMS9wYXRoMi9wYXRoM1xuXHRcdFx0XHQgKi9cbiAgICAgICAgdmFyIHBhdGhQYXJhbUluZGV4ID0gbG9jYXRpb25QYXRoLmluZGV4T2YoXCI/XCIpO1xuICAgICAgICBpZiAocGF0aFBhcmFtSW5kZXggPiAtMSkge1xuICAgICAgICAgIGxvY2F0aW9uUGF0aCA9IGxvY2F0aW9uUGF0aC5zdWJzdHJpbmcoMCwgcGF0aFBhcmFtSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodXRpbERhc2guaXNFbmRXaXRoKGZpcnN0LCAnLycpICYmIHV0aWxEYXNoLmlzU3RhcnRXaXRoKGxvY2F0aW9uUGF0aCwgJy8nKSkge1xuICAgICAgICAgIGRlZmF1bHRVcmwgPSBmaXJzdCArIGxvY2F0aW9uUGF0aC5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbERhc2guaXNFbmRXaXRoKGZpcnN0LCAnLycpIHx8IHV0aWxEYXNoLmlzU3RhcnRXaXRoKGxvY2F0aW9uUGF0aCwgJy8nKSkge1xuICAgICAgICAgIGRlZmF1bHRVcmwgPSBmaXJzdCArIGxvY2F0aW9uUGF0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBodHRwOi8vZG9tYWluL3Z0cGFnZT9rZXkxPXZhbHVlMSZrZXkyPXZhbHVlMi9wYXRoMS9wYXRoMi9wYXRoM1xuICAgICAgICAgICAqIGZpeDogaHR0cDovL2RvbWFpbi92dHBhZ2UvcGF0aDEvcGF0aDIvcGF0aDNcbiAgICAgICAgICAgKiAqLyBcbiAgICAgICAgICBkZWZhdWx0VXJsID0gZmlyc3QgKyAnLycgKyBsb2NhdGlvblBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3BlcnRpZXMuc3BtQiB8fCBwcm9wZXJ0aWVzLnBhZ2VfbmFtZSB8fCAoZG9jdW1lbnQgJiYgZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnBhZ2VuYW1lKSB8fCBtZXRhUGFnZU5hbWUgfHwgcG5hbWUgfHwgZGVmYXVsdFVybCB8fCAnLSc7IC8vZGVmYXVsdCBwYWdlX25hbWUgPSAnJ1xuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudygnZ2V0IHBhZ2VuYW1lIGZhaWxlZCBlID0nLCBlKTtcbiAgfVxufTtcbmV4cG9ydHMuZ2V0UGFnZU5hbWUgPSBnZXRQYWdlTmFtZTtcblxuZnVuY3Rpb24gZ2V0UGFnZVRpdGxlKHBhdGgpIHtcbiAgcmV0dXJuIFBhZ2VNYW5hZ2VyLmdldFBhZ2VUaXRsZShwYXRoKTtcbn07XG5cbmV4cG9ydHMuZ2V0UGFnZVRpdGxlID0gZ2V0UGFnZVRpdGxlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxQYWdlLmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBjdXJyZW50UGF0aCA9IFwiXCI7XG52YXIgcGFnZU9wdGlvbk1hcCA9IHt9O1xuXG5mdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgcXVlcnkpIHtcbiAgaWYgKCFwYXRoIHx8IHBhdGggPT09ICctJykge1xuICAgIHJldHVybiBcIi1cIjtcbiAgfVxuICB2YXIgcXMgPSBbXTtcbiAgZm9yICh2YXIgcSBpbiBxdWVyeSkge1xuICAgIHFzLnB1c2gocSArICc9JyArIHF1ZXJ5W3FdKTtcbiAgfVxuICB2YXIgcXNzID0gcXMuam9pbignJicpO1xuICByZXR1cm4gcXNzID8gcGF0aCArICc/JyArIHFzcyA6IHBhdGg7XG59O1xuXG5leHBvcnRzLmdldEN1cnJlbnRQYWdlUGF0aCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gY3VycmVudFBhdGg7XG59O1xuXG5leHBvcnRzLnNldEN1cnJlbnRQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuICBpZiAocGF0aCkge1xuICAgIGN1cnJlbnRQYXRoID0gcGF0aDtcbiAgfVxufTtcblxuZXhwb3J0cy5nZXRQYWdlUXVlcnkgPSBmdW5jdGlvbihwYXRoKSB7XG4gIGlmIChwYXRoKSB7XG4gICAgcmV0dXJuIHBhZ2VPcHRpb25NYXBbcGF0aF07XG4gIH1cbn07XG5cbmV4cG9ydHMuc2V0UGFnZVF1ZXJ5ID0gZnVuY3Rpb24ocGF0aCwgcXVlcnkpIHtcbiAgaWYgKHBhdGgpIHtcbiAgICBwYWdlT3B0aW9uTWFwW3BhdGhdID0gcXVlcnk7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0RnVsbFBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBidWlsZFBhdGgocGF0aCwgcGFnZU9wdGlvbk1hcFtwYXRoXSk7XG59O1xuXG5leHBvcnRzLmdldFBhZ2VOYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG1ldGEgPSBhcGx1cy5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpIHx8IHt9O1xuICB2YXIgcmVhbFBhdGggPSBwYXRoIHx8IGN1cnJlbnRQYXRoO1xuICBpZiAobWV0YS5oYXNoTW9kZSkge1xuICAgIHJlYWxQYXRoID0gbG9jYXRpb24uaGFzaDtcbiAgfVxuICB0cnkge1xuICAgIC8vIOWvueS6juWKqOaAgei3r+eUse+8jOaUr+aMgeeUqOaIt+S8oOWFpeato+WImei/m+ihjOWMuemFjVxuICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YSkge1xuICAgICAgICBpZiAoa2V5ID09PSByZWFsUGF0aCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKG1ldGFba2V5XSAmJiBtZXRhW2tleV0ucmVnUnVsZSAmJiBtZXRhW2tleV0ucmVnUnVsZS50ZXN0KHJlYWxQYXRoKSkge1xuICAgICAgICAgIHJlYWxQYXRoID0ga2V5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgICAvL1xuICB9XG4gIHJldHVybiBtZXRhW3JlYWxQYXRoXTtcbn07XG5cbnZhciB1bG9nID0gcmVxdWlyZShcIkB1dGlscy91bG9nXCIpO1xudmFyIGVhY2hNYXAgPSByZXF1aXJlKFwiQHV0aWxzL2VhY2hNYXBcIik7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuZXhwb3J0cy5nZXRXeFRpdGxlID0gZnVuY3Rpb24ocGF0aCkge1xuICBpZiAoIXBhdGgpIHJldHVybiBcIlwiO1xuICB2YXIgbWluaSA9IHJlcXVpcmUoXCJAdXRpbHMvbWluaVwiKTtcbiAgdmFyIHBsYXRUeXBlID0gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKTtcbiAgdmFyIHQgPSBcIlwiO1xuICB0cnkge1xuICAgIGlmIChwbGF0VHlwZSA9PT0gJ3d4JyAmJiBfX3d4Q29uZmlnKSB7XG4gICAgICB2YXIgd3hDb25maWcgPSBfX3d4Q29uZmlnOyAgICAgIFxuICAgICAgdmFyIHBhZ2UgPSBfX3d4Q29uZmlnLnBhZ2UgfHwge307XG4gICAgICB2YXIgcm91dGUgPSBwYWdlW3BhdGhdIHx8IHBhZ2VbcGF0aCArIFwiLmh0bWxcIl07XG4gICAgICB2YXIgbiA9IHt9LCBpID0ge307XG4gICAgICBpZiAod3hDb25maWcuZ2xvYmFsICYmIHd4Q29uZmlnLmdsb2JhbC53aW5kb3cgJiYgd3hDb25maWcuZ2xvYmFsLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG4gICAgICAgIG4udGl0bGUgPSB3eENvbmZpZy5nbG9iYWwud2luZG93Lm5hdmlnYXRpb25CYXJUaXRsZVRleHQ7XG4gICAgICB9XG4gICAgICBpZiAocm91dGUgJiYgcm91dGUud2luZG93ICYmIHJvdXRlLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG4gICAgICAgIGkudGl0bGUgPSByb3V0ZS53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpLnRpdGxlICYmIF9fd3hBcHBDb2RlX18pIHtcbiAgICAgICAgdmFyIGFwcEpTT04gPSBfX3d4QXBwQ29kZV9fW3BhdGggKyBcIi5qc29uXCJdO1xuICAgICAgICBpZiAoYXBwSlNPTiAmJiBhcHBKU09OLm5hdmlnYXRpb25CYXJUaXRsZVRleHQpIHtcbiAgICAgICAgICBpLnRpdGxlID0gYXBwSlNPTi5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0O1xuICAgICAgICB9IFxuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgICAgIGlmIChjdHguZ2xvYmFsVGl0bGVNYXApIHtcbiAgICAgICAgZWFjaE1hcChjdHguZ2xvYmFsVGl0bGVNYXAsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgICAgICAgIGlmIChrZXkgPT09IHBhdGgpIHtcbiAgICAgICAgICAgIHQgPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB7XG4gICAgICAgIHQgPSBpLnRpdGxlIHx8IG4udGl0bGUgfHwgJyc7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudygnY3VycmVudCBwbGF0Zm9ybSBjYW4gbm90IHRyYWNrIHBhZ2UgdGl0bGUnKTtcbiAgICByZXR1cm4gdDtcbiAgfVxufTtcblxuZXhwb3J0cy5nZXRQYWdlQ29kZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuICh0aGlzLmdldFBhZ2VOYW1lKHBhdGgpIHx8IHt9KS5wYWdlTmFtZTtcbn07XG5cbmV4cG9ydHMuZ2V0UGFnZVRpdGxlID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gKHRoaXMuZ2V0UGFnZU5hbWUocGF0aCkgfHwge30pLnBhZ2VUaXRsZSB8fCB0aGlzLmdldFd4VGl0bGUocGF0aCk7XG59O1xuXG5leHBvcnRzLmdldFZUUmVhbHRpbWVDb2RlID0gZnVuY3Rpb24oKSB7XG4gIGlmIChjdXJyZW50UGF0aCkge1xuICAgIHZhciBxdWVyeSA9IHBhZ2VPcHRpb25NYXBbY3VycmVudFBhdGhdIHx8IHt9O1xuICAgIHZhciByZWdFeHAgPSAvXlxcJHZ0Xy87XG4gICAgdmFyIHNjZW5lID0gZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5LnNjZW5lKTtcbiAgICByZXR1cm4gc2NlbmUgJiYgcmVnRXhwLnRlc3Qoc2NlbmUpICYmIHNjZW5lLnJlcGxhY2UocmVnRXhwLCAnJyk7XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDlsI/nqIvluo/lt6XlhbdcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnOyBcblxudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxuZXhwb3J0cy5nZXRDdXJyZW50UGFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG4gIHJldHVybiBwYWdlc1twYWdlcy5sZW5ndGggLSAxXSB8fCB7fTtcbn07XG5cbmV4cG9ydHMuZ2V0UmVmZXJyZXJQYWdlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICByZXR1cm4gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl0gfHwge307XG59O1xuXG52YXIgX2lzVGI7XG4vLyDljZXpobXmtYvor5XpnIDopoFcbmV4cG9ydHMucmVzZXRJc1RCID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIF9pc1RiID0gdmFsdWU7XG59O1xuXG5cbmZ1bmN0aW9uIGluaXRJc1RCICgpIHtcbiAgaWYgKHR5cGVvZiBfaXNUYiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIF9pc1RiO1xuICB9IGVsc2Uge1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgdmFyIFVBID0gbmF2aWdhdG9yID8gKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnN3dXNlckFnZW50KSA6ICcnO1xuICAgICAgcmVzdWx0ID0gISEvQWxpQXBwL2kudGVzdChVQSk7XG4gICAgICBpZiAoL0FsaUFwcFxcKChBUHxEaW5nVGFsa3xBTUFQfFVDfFFVQVJLKS9pLnRlc3QoVUEpKSB7XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKC9BbGlBcHBcXChLQi9pLnRlc3QoVUEpKSB7XG4gICAgICAgIHJlc3VsdCA9ICEhL01pc3QvLnRlc3QoVUEpO1xuICAgICAgfVxuICAgICAgLy9JREUt5reY5a6dLeWVhuWutuW6lOeUqOS4i+acn+acm+i/lOWbnnRydWVcbiAgICAgIGlmKC9BbGlwYXlJREUgVGFvYmFvLy50ZXN0KFVBKSl7XG4gICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGN0eC5jYW5JVXNlKSkge1xuICAgICAgICAgIHJlc3VsdCA9ICEhY3R4LmNhbklVc2UoJ2NhbGxVc2VyVHJhY2snKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgX2lzVGIgPSByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdDsgIFxuICB9XG59XG5leHBvcnRzLmluaXRJc1RCID0gaW5pdElzVEI7XG5cbmZ1bmN0aW9uIGlzVEIoKSB7XG4gIGlmICh0eXBlb2YgX2lzVGIgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiAhIV9pc1RiOyAgXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGluaXRJc1RCKCk7XG4gIH1cbn1cblxudmFyIGdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4ge1xuICAgICAgY3R4OiBkZCxcbiAgICAgIHBsYXRUeXBlOiAnZGQnLFxuICAgICAgc2RrVHlwZTogJ2RkbXAnLFxuICAgICAgbG9nRG9tYWluOiAnL2RkbV9sb2dzJ1xuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3R4OiBteSxcbiAgICAgICAgcGxhdFR5cGU6IG15ICYmIG15LnRiID8gJ3Rhb2JhbycgOiAnbXknLFxuICAgICAgICBzZGtUeXBlOiBteSAmJiBteS50YiA/ICd0YW9iYW9tcCcgOiAnbXltcCcsXG4gICAgICAgIGxvZ0RvbWFpbjogJy9hbGlwYXltX2xvZ3MnXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY3R4OiB0dCxcbiAgICAgICAgICBwbGF0VHlwZTogJ3R0JyxcbiAgICAgICAgICBzZGtUeXBlOiAndHRtcCcsXG4gICAgICAgICAgbG9nRG9tYWluOiAnL2J5dGVkYW5jZW1fbG9ncydcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3R4OiBzd2FuLFxuICAgICAgICAgICAgcGxhdFR5cGU6ICdiZCcsXG4gICAgICAgICAgICBzZGtUeXBlOiAnYmRtcCcsXG4gICAgICAgICAgICBsb2dEb21haW46ICcvYmFpZHVtX2xvZ3MnXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBjdHg6IHd4LFxuICAgICAgICAgICAgICBwbGF0VHlwZTogJ3d4JyxcbiAgICAgICAgICAgICAgc2RrVHlwZTogJ3d4bXAnLFxuICAgICAgICAgICAgICBsb2dEb21haW46ICcvd3htX2xvZ3MnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGN0eDoge30sXG4gICAgICAgICAgICAgIHBsYXRUeXBlOiAnVU5LTk9XJyxcbiAgICAgICAgICAgICAgc2RrVHlwZTogJ1VOS05PVydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy5pc1RCID0gaXNUQjtcbmV4cG9ydHMuZ2V0UGxhdGZvcm1UeXBlID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkucGxhdFR5cGU7XG59O1xuZXhwb3J0cy5nZXRTZGtUeXBlID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkuc2RrVHlwZTtcbn07XG5leHBvcnRzLmdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG59O1xuZXhwb3J0cy5nZXRMb2dEb21haW4gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLmxvZ0RvbWFpbjtcbn07XG5cblxudmFyIEhUVFBfUkVRVUVTVCA9ICdodHRwUmVxdWVzdCc7XG52YXIgUkVRVUVTVCA9ICdyZXF1ZXN0JztcbnZhciBGTiA9IGZ1bmN0aW9uICgpIHt9O1xuXG4vKipcbiAqIOWPkemAgUdFVOivt+axglxuICogQHBhcmFtcyB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbXMge1N0cmluZ30gb3B0cyB7XG4gKiAgIHRpbWVvdXQ6IDUwMDBcbiAqIH1cbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjayB7XG4gKiAgIHRpbWVvdXQ6IDUwMDBcbiAqIH1cbiAqL1xuZXhwb3J0cy5yZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCwgb3B0cywgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgLy8gdmFyIGN0eCA9IHV0aWxzLmdldENvbnRleHQoKSB8fCB7fTtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG4gIGlmICghaXNGdW5jdGlvbihmYWlsdXJlQ2FsbGJhY2spKSB7XG4gICAgZmFpbHVyZUNhbGxiYWNrID0gRk47XG4gIH1cbiAgaWYgKCFpc0Z1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaykpIHtcbiAgICBzdWNjZXNzQ2FsbGJhY2sgPSBGTjtcbiAgfVxuXG4gIHZhciBtZXRob2ROYW1lID0gb3B0cy5yZXF1ZXN0TWV0aG9kTmFtZSB8fCBSRVFVRVNUO1xuICB2YXIgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuICBpZiAoIWlzRnVuY3Rpb24ocmVxKSAmJiBtZXRob2ROYW1lICE9PSBSRVFVRVNUKSB7XG4gICAgbWV0aG9kTmFtZSA9IFJFUVVFU1Q7XG4gICAgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuICB9XG4gIGlmICghaXNGdW5jdGlvbihyZXEpICYmIG1ldGhvZE5hbWUgIT09IEhUVFBfUkVRVUVTVCkge1xuICAgIC8vIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCfmlrnms5VcIicgKyBtZXRob2ROYW1lICsgJ1wi5LiN5a2Y5ZyoIScpO1xuICAgIG1ldGhvZE5hbWUgPSBIVFRQX1JFUVVFU1Q7XG4gICAgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuICB9XG5cbiAgdmFyIGRhdGFUeXBlID0gb3B0cyAmJiBvcHRzLmRhdGFUeXBlID8gb3B0cy5kYXRhVHlwZSA6ICdiYXNlNjQnO1xuICB2YXIgdGltZW91dCA9IG9wdHMgJiYgb3B0cy50aW1lb3V0ID8gb3B0cy50aW1lb3V0IDogMzAwMDtcbiAgdmFyIG1ldGhvZCA9IG9wdHMubWV0aG9kIHx8ICdHRVQnO1xuICB2YXIgY3VzdG9tUmVxdWVzdFRpbWVvdXQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19NSU5JX1JFUVVFU1RfVElNRU9VVCk7XG4gIFxuICB2YXIgY2FsbGJhY2tlZDtcbiAgLy8g5aaC5p6cdXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0ICBcbiAgdXJsID0gdXRpbC5maXhEb21haW4odXJsKTtcbiAgdmFyIG1zZztcbiAgaWYgKGlzRnVuY3Rpb24ocmVxKSkge1xuICAgIHZhciByZXFPcHRpb25zID0ge1xuICAgICAgdXJsOiB1cmwsXG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIGRhdGFUeXBlOiBkYXRhVHlwZSxcbiAgICAgIHRpbWVvdXQ6IGN1c3RvbVJlcXVlc3RUaW1lb3V0IHx8IHRpbWVvdXQsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGlmICghY2FsbGJhY2tlZCkge1xuICAgICAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXMpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAvLyBjb25zb2xlICYmIGNvbnNvbGUud2FybignYXBsdXPml6Xlv5for7fmsYJcIicgKyB1cmwgKyAnXCLlpLHotKXvvIzljp/lm6DvvJonICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7XG4gICAgICAgIGlmICghY2FsbGJhY2tlZCkge1xuICAgICAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuICAgICAgICAgIGZhaWx1cmVDYWxsYmFjayh7XG4gICAgICAgICAgICBmYWlsdXJlOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogcmVzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChtZXRob2QgPT09ICdQT1NUJyAmJiBvcHRzLmRhdGEpIHtcbiAgICAgIGlmIChIVFRQX1JFUVVFU1QgPT09IG1ldGhvZE5hbWUpIHtcbiAgICAgICAgLy8g5LiT6Zeo5a+56ZKJ6ZKJ55qE5pSv5oyBXG4gICAgICAgIHJlcU9wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH07XG4gICAgICAgIHJlcU9wdGlvbnMuZGF0YVR5cGUgPSAnanNvbic7XG4gICAgICAgIHJlcU9wdGlvbnMuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdHMuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXFPcHRpb25zLmRhdGEgPSBvcHRzLmRhdGE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIF9leHRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJlcXVlc3QtZXh0aW5mbycpO1xuICAgIGlmICh0eXBlb2YgX2V4dEluZm8gPT09ICdvYmplY3QnKSB7XG4gICAgICByZXFPcHRpb25zLl9leHRJbmZvID0gX2V4dEluZm87XG4gICAgfVxuICAgIHJlcShyZXFPcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWNhbGxiYWNrZWQpIHtcbiAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuICAgICAgZmFpbHVyZUNhbGxiYWNrKHtcbiAgICAgICAgZmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgZGF0YTogbXNnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjYWxsYmFja2VkKSB7XG4gICAgICBjYWxsYmFja2VkID0gdHJ1ZTtcbiAgICAgIG1zZyA9ICdhcGx1cyBsb2cgcmVxdWVzdFwiJyArIHVybCArICcgdGltZW91dFwiLCB0aW1lIHNwZW5kJyArIHRpbWVvdXQgKyAnbXMnO1xuICAgICAgY29uc29sZSAmJiBjb25zb2xlLndhcm4obXNnKTtcbiAgICAgIGZhaWx1cmVDYWxsYmFjayh7XG4gICAgICAgIGZhaWx1cmU6IHRydWUsXG4gICAgICAgIGRhdGE6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB0aW1lb3V0KTtcbn07XG5cblxuZXhwb3J0cy5zZXRTdG9yYWdlU3luYyA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgdHJ5IHtcbiAgICB2YXIgcHQgPSBnZXRQbGF0Zm9ybVR5cGUoKS5wbGF0VHlwZTtcbiAgICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuICAgIGlmIChwdCA9PT0gJ215JyB8fCBwdCA9PT0gJ3Rhb2JhbycpIHtcbiAgICAgIGN0eC5zZXRTdG9yYWdlU3luYyh7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBkYXRhOiB2YWx1ZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5zZXRTdG9yYWdlU3luYyhrZXksIHZhbHVlKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7fVxufTtcblxuZXhwb3J0cy5nZXRTdG9yYWdlU3luYyA9IGZ1bmN0aW9uKGtleSkge1xuICB0cnkge1xuICAgIHZhciBwdCA9IGdldFBsYXRmb3JtVHlwZSgpLnBsYXRUeXBlO1xuICAgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7ICBcbiAgICBpZiAocHQgPT09ICdteScgfHwgcHQgPT09ICd0YW9iYW8nKSB7XG4gICAgICByZXR1cm4gY3R4LmdldFN0b3JhZ2VTeW5jKHtrZXk6IGtleX0pLmRhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjdHguZ2V0U3RvcmFnZVN5bmMoa2V5KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7fVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJmdW5jdGlvbiBpc1N0cmluZyhzdHIpe1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHN0cik9PT1cIltvYmplY3QgU3RyaW5nXVwiO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3RyaW5nO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2lzU3RyaW5nLmpzXG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3V0aWwvZmV0Y2hEYXRhLmpzXG4gKiDlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMuanMnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcblxuLyoqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICog6YWN572u6aG55YyF5ous77yaXG4gKiBiYXNlOiDpu5jorqTngbDluqbln7rmlbAxMDAwMFxuICogdGltZW91dDogQ09SU+i2heaXtuaXtumXtFxuICovXG52YXIgX2NvbmZpZyA9IHtcbiAgYmFzZTogMTAwMDAsXG4gIC8vIOm7mOiupDEwc1xuICB0aW1lb3V0OiAxMDAwMFxufTtcblxudmFyIGZldGNoID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHVybCwgcmVzb2x2ZSwgcmVqZWN0LCBvcHRzKSB7XG4gIGlmICgvXlxcL1xcLy8udGVzdCh1cmwpKSB7XG4gICAgdXJsID0gYXBsdXNTdGF0aWMuSFRUUFMgKyB1cmw7XG4gIH1cbiAgdmFyIHBlbmRpbmcgPSB0cnVlO1xuICB2YXIgdGltZW91dCA9IChvcHRzICYmIG9wdHMudGltZW91dCkgPyBvcHRzLnRpbWVvdXQgOiBfY29uZmlnLnRpbWVvdXQ7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICBpZiAocGVuZGluZykge1xuICAgICAgcGVuZGluZyA9IGZhbHNlO1xuICAgICAgaXNGdW5jdGlvbihyZWplY3QpICYmIHJlamVjdCh7XG4gICAgICAgIHRpbWVvdXQ6IHRpbWVvdXRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgdGltZW91dCk7XG4gIHdpbmRvdy5mZXRjaCh1cmwpXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGlmKC9hcHBsaWNhdGlvblxcL2pzb24vLnRlc3QocmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGlmIChwZW5kaW5nKSB7XG4gICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgIHBlbmRpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgcGVuZGluZyAmJiByZWplY3QoZXJyb3IpO1xuICAgIH0pO1xufTtcblxudmFyIGFqYXggPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAodXJsLCByZXNvbHZlLCByZWplY3QsIG9wdHMpIHtcbiAgdmFyIHhocjtcbiAgdmFyIG1ldGhvZCA9ICdHRVQnO1xuICB2YXIgb25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh4aHIucmVzcG9uc2VUZXh0KSB7XG4gICAgICByZXNvbHZlKHhoci5yZXNwb25zZVRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWplY3QoKTtcbiAgICB9XG4gIH07XG4gIHZhciBDT1JTID0gd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICBpZiAoQ09SUykge1xuICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB4aHIgPSBuZXcgd2luZG93LlhEb21haW5SZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuICB9XG4gIC8vIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG4gIHZhciB0aW1lb3V0ID0gKG9wdHMgJiYgb3B0cy50aW1lb3V0KSA/IG9wdHMudGltZW91dCA6IF9jb25maWcudGltZW91dDtcbiAgeGhyLnRpbWVvdXQgPSB0aW1lb3V0O1xuICB4aHIub25sb2FkID0gb25sb2FkO1xuICB4aHIub25lcnJvciA9IHJlamVjdDtcbiAgeGhyLm9udGltZW91dCA9IHJlamVjdDtcbiAgeGhyLnNlbmQoKTtcbn07XG5cbnZhciByZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCwgcmVzb2x2ZSwgcmVqZWN0LCBvcHRzKSB7XG4gIGlmICh3aW5kb3cuZmV0Y2gpIHtcbiAgICBmZXRjaCh1cmwsIHJlc29sdmUsIHJlamVjdCwgb3B0cyk7XG4gIH0gZWxzZSB7XG4gICAgYWpheCh1cmwsIHJlc29sdmUsIHJlamVjdCwgb3B0cyk7XG4gIH1cbn07XG5cbnZhciByZXF1ZXN0NHVtID0gZnVuY3Rpb24ob3B0LCBjb250ZW50VHlwZSkge1xuICBvcHQgPSBvcHQgfHwge307XG4gIG9wdC5tZXRob2QgPSAob3B0Lm1ldGhvZCB8fCAnUE9TVCcpLnRvVXBwZXJDYXNlKCk7XG4gIG9wdC51cmwgPSBvcHQudXJsIHx8ICcnO1xuICBvcHQuZGF0YSA9IG9wdC5kYXRhIHx8IG51bGw7XG4gIG9wdC5zdWNjZXNzID0gb3B0LnN1Y2Nlc3MgfHwgZnVuY3Rpb24gKCkge307XG4gIG9wdC5lcnJvciA9IG9wdC5lcnJvciB8fCBmdW5jdGlvbiAoKSB7fTtcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICB2YXIgcGFyYW1zID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvcHQuZGF0YSl7XG4gICAgcGFyYW1zLnB1c2goa2V5ICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG9wdC5kYXRhW2tleV0pKTtcbiAgfVxuICB2YXIgZ2V0RGF0YSA9IHBhcmFtcy5qb2luKCcmJyk7XG4gIHZhciBwb3N0RGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdC5kYXRhIHx8IHt9KTtcbiAgXG4gIGlmIChvcHQubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICB4aHIub3BlbihvcHQubWV0aG9kLCBvcHQudXJsLCB0cnVlKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgY29udGVudFR5cGUgfHwgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgfSBlbHNlIGlmIChvcHQubWV0aG9kID09PSAnR0VUJykge1xuICAgIHhoci5vcGVuKG9wdC5tZXRob2QsIG9wdC51cmwgKyAnPycgKyBnZXREYXRhLCB0cnVlKTtcbiAgfVxuXG4gIC8vIHdpdGhDcmVkZW50aWFscyBjYW5ub3QgYmUgbW9kaWZpZWQgdW50aWwgYWZ0ZXIgY2FsbGluZyAub3BlbiBvbiBBbmRyb2lkIGFuZCBNb2JpbGUgU2FmYXJpXG4gIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICB4aHIudGltZW91dCA9IDMwMDA7XG4gIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgeGhyLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgIHZhciBqc29uID0ge307XG4gICAgICB0cnkge1xuICAgICAgICBqc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7fVxuICAgICAgb3B0LnN1Y2Nlc3MoanNvbik7XG4gICAgfWVsc2UgaWYoeGhyLnJlYWR5U3RhdGUgPT0gNCl7XG4gICAgICBvcHQuZXJyb3IoeGhyLnN0YXVzKTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKG9wdC5tZXRob2QgPT09ICdQT1NUJykge1xuICAgIHhoci5zZW5kKHBvc3REYXRhKTtcbiAgfSBlbHNlIHtcbiAgICB4aHIuc2VuZCgpO1xuICB9XG59O1xuXG5leHBvcnRzLnJlcXVlc3QgPSByZXF1ZXN0O1xuZXhwb3J0cy5yZXF1ZXN0NHVtID0gcmVxdWVzdDR1bTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2ZldGNoRGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOazqOWFpWxvZ0NvbmZpZyzkvpvlkI7nu63mj5Lku7bkvb/nlKhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJy4uL2xpYl91L3V0aWxzL2VhY2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgZ2V0TG9nQ29uZmlnOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbG9nQ29uZmlnID0ge307XG4gICAgICB2YXIgcGx1Z2lucyA9IHRoaXMub3B0aW9ucy5jb25maWcucGx1Z2lucztcblxuICAgICAgZm9yICh2YXIgayBpbiBwbHVnaW5zKSB7XG4gICAgICAgIGxvZ0NvbmZpZ1trXSA9IHtcbiAgICAgICAgICBwbHVnaW5zOiBwbHVnaW5zW2tdLFxuICAgICAgICAgIGNvbnRleHQ6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGVhY2gocGx1Z2luc1trXSwgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBsb2dDb25maWdba10uY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWcgfHwge307XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxvZ0NvbmZpZztcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5sb2dDb25maWcgPSB0aGlzLmdldExvZ0NvbmZpZygpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LlBBR0VfTE9BRF9USU1FO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX2xvZ19pbmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvZXRhZy5qc1xuICpcbiAqIOS9nOeUqO+8muWOuyBodHRwczovL2xvZy5tbXN0YXQuY29tL2VnLmpzIHwgaHR0cHM6Ly9nai5tbXN0YXQuY29tL2VnLmpz5ZCM5q2lY25h77yM5bm25YaZ5YWl5Yiw5pys5ZywY29va2llXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xudmFyIHV0aWxTdG9yZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsU3RvcmUnKTtcbnZhciBjb29raWUgPSByZXF1aXJlKCdAdXRpbHMvY29va2llJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIHV0aWxEYXRhID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXRhJyk7XG52YXIgZGF0ZSA9IHJlcXVpcmUoJ0B1dGlscy9kYXRlJyk7XG52YXIgdXRpbERvbSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRG9tJyk7XG52YXIgYXBsdXNVdGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcbnZhciB1dGlsUmVtb3RlQ2ZnID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxSZW1vdGVDZmcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICBBQkZQQzogJ19hYmZwYycsXG4gICAgVkVSU0lPTjogJzIuMCcsIC8vIOeJiOacrDoxIGluIDIwMjEtMTItMDIgQOiwi+Wjq1xuICAgIElNUFJJTlRfVkVSU0lPTjogJ2ltcHJpbnRWZXJzaW9uJyxcbiAgICBBUExVU19JTVBSSU5UX1ZFUlNJT046ICdBUExVU19JTVBSSU5UX1ZFUlNJT04nLFxuICAgIEFQTFVTX1JFTU9URV9DT05GSUc6ICdBUExVU19SRU1PVEVfQ09ORklHJyxcblxuICAgIHRyeUdldFN0b3JlVmFsdWU6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGxzVmFsdWUgPSB1dGlsU3RvcmUuZ2V0KGtleSk7XG4gICAgICB2YXIgY29va2llVmFsdWUgPSBjb29raWUuZ2V0Q29va2llKGtleSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsc1ZhbHVlOiBsc1ZhbHVlLFxuICAgICAgICBjb29raWVWYWx1ZTogY29va2llVmFsdWVcbiAgICAgIH07XG4gICAgfSxcblxuICAgIHN5bmNSY2ZnOiBmdW5jdGlvbihfYWJmcGMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgZG9tYWluID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcbiAgICAgIGRvbWFpbiA9IGFwbHVzVXRpbC5maXhEb21haW4oZG9tYWluKTtcbiAgICAgIHZhciBfZm4gPSB1dGlsRG9tLmxvYWRTY3JpcHQ7XG4gICAgICB2YXIgYWsgPSBhcGx1c1V0aWwuZ2V0QXBwS2V5KCk7XG4gICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgIF9mbihkb21haW4gKycvcmNmZy5qcz9fYWJmcGM9JytfYWJmcGMgKyAnJmFrPScgKyBhaywgY2FsbGJhY2spOyAgXG4gICAgICB9XG4gICAgfSxcblxuICAgIHNldEltcHJpbnRWZXJzaW9uOiBmdW5jdGlvbihpbXB2KSB7XG4gICAgICB0aGlzLmltcHYgPSBpbXB2O1xuICAgICAgLy8g5a2Y5YWlbG9jYWxzdG9yYWdlJ1xuICAgICAgaWYgKGltcHYgJiYgdXRpbERhdGEuZ2V0THNJbXB2KHRoaXMuQVBMVVNfSU1QUklOVF9WRVJTSU9OKSAhPT0gaW1wdikge1xuICAgICAgICB1dGlsRGF0YS5zZXRMc0ltcHYodGhpcy5BUExVU19JTVBSSU5UX1ZFUlNJT04sIGRhdGUuZ2V0Rm9ybWF0RGF0ZSgpLCBpbXB2KTtcbiAgICAgICAgLy8gdmFyIGFwbHVzX3Job3N0X3YgPSBhcGx1cy5fJC5tZXRhX2luZm9bJ2FwbHVzLXJob3N0LXYnXTtcbiAgICAgICAgdmFyIGRvbWFpbiA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG4gICAgICAgIGRvbWFpbiA9IGFwbHVzVXRpbC5maXhEb21haW4oZG9tYWluKTtcbiAgICAgICAgdmFyIHVybCA9IGRvbWFpbiArIGltcHY7XG4gICAgICAgIHRoaXMuc3luY1JlbW90ZUNmZ0RhdGEodXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBsc1JlbW90ZUNmZyA9IHV0aWxEYXRhLmdldExzUmVtb3RlQ2ZnKHRoaXMuQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG4gICAgICAgIHV0aWxSZW1vdGVDZmcuZW5hYmxlQ2ZnKGxzUmVtb3RlQ2ZnKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3luY1JlbW90ZUNmZ0RhdGE6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgdmFyIF9mbiA9IHV0aWxEb20ubG9hZFNjcmlwdDtcbiAgICAgIF9mbih1cmwsIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHZhciBJbXByaW50O1xuICAgICAgICB2YXIgY2ZnO1xuICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IudHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgIHVsb2coKS53KCdxdWlja3RyYWNraW5nIGxvYWQgcmVtb3RlIGNvbmZpZyBmYWlsZWQnLCBlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIEltcHJpbnQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdpbXByaW50Jyk7XG4gICAgICAgICAgICBjZmcgPSB0eXBlb2YgSW1wcmludCA9PT0gJ29iamVjdCcgPyBJbXByaW50IDogSlNPTi5wYXJzZShJbXByaW50KTtcbiAgICAgICAgICAgIHV0aWxEYXRhLnNldExzUmVtb3RlQ2ZnKGFwbHVzU3RhdGljLkFQTFVTX1JFTU9URV9DT05GSUcsIGRhdGUuZ2V0Rm9ybWF0RGF0ZSgpLCBjZmcpO1xuICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgY2ZnID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdXRpbFJlbW90ZUNmZy5lbmFibGVDZmcoY2ZnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFiZnBjT2JqID0gX3NlbGYudHJ5R2V0U3RvcmVWYWx1ZShfc2VsZi5BQkZQQyk7XG4gICAgICB2YXIgX2FiZnBjID0gYWJmcGNPYmoubHNWYWx1ZSB8fCBhYmZwY09iai5jb29raWVWYWx1ZTtcbiAgICAgIFxuICAgICAgaWYgKF9hYmZwYykge1xuICAgICAgICBfYWJmcGMgPSBfYWJmcGMucmVwbGFjZSgnXycgKyBfc2VsZi5WRVJTSU9OLCAnJyk7XG4gICAgICB9XG4gICAgICB2YXIgcSA9ICh3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKSk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHEucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbihzdGF0dXMpIHtcbiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgX3NlbGYuc3luY1JjZmcoX2FiZnBjLCBmdW5jdGlvbihlcnJvcil7IFxuICAgICAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICB1bG9nKCkudygncmVtb3RlIGNvbmZpZ3VyYXRpb24gcmVxdWVzdCBmYWlsZWQsIGVyciBtc2c6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB2YXIgaW1wVmVyc2lvbiA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoX3NlbGYuSU1QUklOVF9WRVJTSU9OKTtcbiAgICAgICAgICAgICAgICAgIF9zZWxmLnNldEltcHJpbnRWZXJzaW9uKGltcFZlcnNpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3JjZmdfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSA4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogY29va2llXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGVhY2ggPSByZXF1aXJlKCcuL2VhY2gnKTtcbnZhciB0bGQgPSByZXF1aXJlKCcuL3RsZCcpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJy4vdXRpbEFycmF5Jyk7XG5cbi8qKlxuICog5Y+W5b6XIGNvb2tpZSDkuK3lr7nlupQga2V5IOeahOWAvFxuICogQHBhcmFtIGtleSB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRDb29raWUoa2V5KSB7XG4gIGlmICghZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgdmFyIGNvb2tpZV92YWwgPSBkb2N1bWVudC5jb29raWUubWF0Y2goXG4gICAgbmV3IFJlZ0V4cCgnKD86Xnw7KVxcXFxzKicgKyBrZXkgKyAnPShbXjtdKyknKVxuICApO1xuICByZXR1cm4gY29va2llX3ZhbCA/IGNvb2tpZV92YWxbMV0gOiAnJztcbn07XG5leHBvcnRzLmdldENvb2tpZSA9IGdldENvb2tpZTtcblxuZnVuY3Rpb24gZ2V0RXhwaXJlc1RpbWUgKG9wdGlvbnMpIHtcbiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICB2YXIgZGF0ZVN0ciA9ICcnO1xuICBpZiAoJ3Nlc3Npb24nID09PSBvcHRpb25zLmV4cGlyZXMpIHtcbiAgfSBlbHNlIGlmIChvcHRpb25zLmV4cGlyZXMgJiYgKCdudW1iZXInID09PSB0eXBlb2Ygb3B0aW9ucy5leHBpcmVzIHx8IG9wdGlvbnMuZXhwaXJlcy50b1VUQ1N0cmluZykpIHtcbiAgICAvLyBvcHRpb25zLmV4cGlyZXPlpKnmlbBcbiAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBvcHRpb25zLmV4cGlyZXMpIHtcbiAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIDI0ICogb3B0aW9ucy5leHBpcmVzICogNjAgKiA2MCAqIDEwMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRlID0gb3B0aW9ucy5leHBpcmVzO1xuICAgIH1cbiAgICBkYXRlU3RyID0gJ2V4cGlyZXM9JyArIGRhdGUudG9VVENTdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyAyMOW5tOi/h+acn+aXtumXtFxuICAgIHZhciB5ZWFycyA9IDIwO1xuICAgIGlmKHV0aWxBcnJheS5pbmRleG9mKFsndi55b3VrdS5jb20nLCd3d3cueW91a3UuY29tJywncGxheWVyLnlvdWt1LmNvbSddLGxvY2F0aW9uLmhvc3RuYW1lKT4tMSl7XG4gICAgICAvLyDkvJjphbfkuJrliqHnibnmrorvvIzlj6rog70x5bm05pyJ5pWI5pyfXG4gICAgICB5ZWFycyA9IDE7XG4gICAgfVxuICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIHllYXJzICogMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgZGF0ZVN0ciA9ICdleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XG4gIH1cbiAgcmV0dXJuIGRhdGVTdHI7XG59XG5cbmZ1bmN0aW9uIHRyeVNldENvb2tpZShuYW1lLCB2YWwsIG9wdGlvbnMpIHtcbiAgaWYgKCFkb2N1bWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgdmFsICs9ICc7JyArIChvcHRpb25zLmV4cGlyZXMgfHwgZ2V0RXhwaXJlc1RpbWUob3B0aW9ucykpO1xuICAvLyB3d3cudGFvYmFvLmNvbSAtPiB0YW9iYW8uY29tXG4gIHZhbCArPSAnOyBwYXRoPScgKyAob3B0aW9ucy5wYXRoID8gb3B0aW9ucy5wYXRoIDogJy8nKTtcbiAgdmFsICs9ICc7IGRvbWFpbj0nICsgb3B0aW9ucy5kb21haW47XG5cbiAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIHZhbDtcblxuICB2YXIgY2hyb21lVmVyc2lvbiA9IDA7XG4gIHRyeSB7XG4gICAgdmFyIGNocm9tZUluZm9zID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvXFxkKy8pO1xuICAgIGlmIChjaHJvbWVJbmZvcyAmJiBjaHJvbWVJbmZvc1swXSkge1xuICAgICAgY2hyb21lVmVyc2lvbiA9IGNocm9tZUluZm9zWzBdLnNwbGl0KCcvJylbMV07XG4gICAgICBpZiAoY2hyb21lVmVyc2lvbikge1xuICAgICAgICBjaHJvbWVWZXJzaW9uID0gcGFyc2VJbnQoY2hyb21lVmVyc2lvbik7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7fVxuXG4gIGlmIChvcHRpb25zLlNhbWVTaXRlICYmIGNocm9tZVZlcnNpb24gPj0gODApIHtcbiAgICB2YWwgKz0gJzsgU2FtZVNpdGU9JyArIG9wdGlvbnMuU2FtZVNpdGU7XG4gICAgdmFsICs9ICc7IFNlY3VyZSc7XG4gICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIHZhbDtcbiAgfVxuICByZXR1cm4gZ2V0Q29va2llKG5hbWUpO1xufTtcbmV4cG9ydHMudHJ5U2V0Q29va2llID0gdHJ5U2V0Q29va2llO1xuXG4vKipcbiAqIEBwYXJhbXMge1N0cmluZ30gbmFtZSBjb29raWVLZXlcbiAqIEBwYXJhbXMge1N0cmluZ3xOdW1iZXJ9IHZhbCBjb29raWVWYWx1ZVxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRpb25zIHtcbiAqICAgZXhwaXJlc1xuICogICBkb21haW5cbiAqICAgcGF0aFxuICogfVxuICovXG5mdW5jdGlvbiBzZXRDb29raWUobmFtZSwgdmFsLCBvcHRpb25zKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZG9tYWluKSB7XG4gICAgICB0cnlTZXRDb29raWUobmFtZSwgdmFsLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGRvbWFpbnMgPSB0bGQuZ2V0RG9tYWlucygpO1xuICAgICAgdmFyIGkgPSAwO1xuICAgICAgd2hpbGUgKGkgPCBkb21haW5zLmxlbmd0aCkge1xuICAgICAgICBvcHRpb25zLmRvbWFpbiA9IGRvbWFpbnNbaV07XG4gICAgICAgIGlmICghdHJ5U2V0Q29va2llKG5hbWUsIHZhbCwgb3B0aW9ucykpIHtcbiAgICAgICAgICBpKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaSA9IGRvbWFpbnMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7fVxufTtcblxuZXhwb3J0cy5zZXRDb29raWUgPSBzZXRDb29raWU7XG5cbnZhciBrZXlzID0gWyd0cmFja25pY2snLCAndGh3JywgJ2NuYSddO1xuXG5leHBvcnRzLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBkYXRhID0ge307XG4gIGVhY2goa2V5cywgZnVuY3Rpb24gKGspIHtcbiAgICBkYXRhW2tdID0gZ2V0Q29va2llKGspO1xuICB9KTtcblxuICBpZiAobG9jYXRpb24pIHtcbiAgICB2YXIgaG9zdG5hbWUgPSBsb2NhdGlvbi5ob3N0bmFtZTtcbiAgICAvLyBUT0RPIOW+heWtkOeXleacjeWKoeerr+WunueOsOiHquWKqOS7jmh0dHDlpLTph4zlj5ZjbmF1aemAu+i+keWQjuaKiui/meautemAu+i+keW5suaOie+8gVxuICAgIC8vIDIwMTMtMDUtMDYg5LiA5ZW46ZyA5rGC77yM5LuF5ZyoIHRhbnguY29tIOaIliAqLnRhbnguY29tIOmhtemdouWPliBjbmF1aSDov5nkuKogY29va2llXG4gICAgZGF0YS5jbmF1aSA9IC9cXGJ0YW54XFwuY29tJC8udGVzdChob3N0bmFtZSkgPyBnZXRDb29raWUoJ2NuYXVpJykgOiAnJztcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufTtcblxuLy8g6Ieq5a6a5LmJY29va2ll6YeH6ZuGXG4vLyBodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL2RvY3Mva3ZobWJnXG4vLyAyMDE4LzMvMTJcbi8vIOS4jeWGjemHh+mbhl9hX2RfYe+8jOmHh+mbhmhuZ++8jOW5tuS/ruaUueS4ul9obmdcbi8v6K+m6KeB77yaaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2tiL2lzc3Vlcy8yMjFcbmV4cG9ydHMuZ2V0SG5nID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGdldENvb2tpZSgnaG5nJykgfHwgJycpO1xufTtcblxuZXhwb3J0cy5nZXRDb29raWVDbmEgPSBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gZ2V0Q29va2llKG5hbWUpIHx8IGdldENvb2tpZSgnXycgKyBuYW1lKTtcbn07XG5leHBvcnRzLnNldENvb2tpZUNuYSA9IGZ1bmN0aW9uIChuYW1lLCB2YWwsIG9wdGlvbnMpIHtcbiAgdmFyIGRvbWFpbnMgPSB0bGQuZ2V0RG9tYWlucygpO1xuICB2YXIgaSA9IDA7XG4gIHdoaWxlIChpIDwgZG9tYWlucy5sZW5ndGgpIHtcbiAgICBvcHRpb25zLmRvbWFpbiA9IGRvbWFpbnNbaV07XG4gICAgaWYgKCF0cnlTZXRDb29raWUobmFtZSwgdmFsLCBvcHRpb25zKSkge1xuICAgICAgaWYgKGkgPT09IGRvbWFpbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB2YWwgKyAnOycgKyBnZXRFeHBpcmVzVGltZShvcHRpb25zKTtcbiAgICAgICAgdmFsdWUgKz0gJzsgcGF0aD0vJztcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ18nICsgbmFtZSArICc9JyArIHZhbHVlO1xuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBpID0gZG9tYWlucy5sZW5ndGg7XG4gICAgfVxuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvY29va2llLmpzXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIEBhdXRob3Igaml6aGEud3lqXG4gKiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqXG4gKiBUTEQgPSBUb3AgTGV2ZWwgRG9tYWluXG4gKlxuICogYXBsdXMg5YaZIGNvb2tpZSDml7bvvIzpgJrluLjopoHmsYLlhpnliLDmoLnln5/vvIzmr5TlpoIgcGFpbWFpLnRhb2Jhby5jb20g55qEIGNvb2tpZSDopoHlhpnliLAgdGFvYmFvLmNvbSDln5/kuIvvvIxcbiAqIOS9huaYr+acieS6m+WVhuWutuermeeCuee7keWumuS6huiHquWumuS5ieWfn+WQje+8jOavlOWmgiBodHRwOi8vaHVhc2hlbmdzaGlqaS5jb20uY24vIO+8jOWmguaenOWPquaYr+eugOWNleWcsOWPluWfn+WQjeeahOacgOWQjuS4pOS9je+8jFxuICog5bCx5Lya5Y+W5YiwIGNvbS5jbu+8jOaXoOazleato+W4uOiuvue9riBjb29raWXvvIzmiYDku6XpnIDopoHov5nkuKrlupNcbiAqIG1vZGlmeSBieSBA6LCL5aOrIGluIDIwMTctMTAtMjjml6XvvIzlj5bmtojplb/ln5/lkI3lkI7nvIDnmb3lkI3ljZXvvIzku6Xop6PlhrNsYXphZGHnrYnmlrDmjqXlhaXkuJrliqHpl67pophcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuZ2V0RG9tYWlucyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdG9wcyA9IFtdO1xuICB0cnkge1xuICAgIHZhciBmdWxsX2RvbWFpbiA9IGxvY2F0aW9uLmhvc3RuYW1lO1xuICAgIHZhciBhID0gZnVsbF9kb21haW4uc3BsaXQoJy4nKTtcbiAgICB2YXIgaSA9IDI7XG4gICAgd2hpbGUoaSA8PSBhLmxlbmd0aCkge1xuICAgICAgdG9wcy5wdXNoKGEuc2xpY2UoYS5sZW5ndGggLSBpKS5qb2luKCcuJykpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cbiAgcmV0dXJuIHRvcHM7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdGxkLmpzXG4vLyBtb2R1bGUgaWQgPSA4OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3V0aWwvZGF0ZVV0aWwuanNcbiAqIOaXpeacn+W4ruWKqeexu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHplcm9GaWxsKG51bWJlciwgdGFyZ2V0TGVuZ3RoLCBmb3JjZVNpZ24pIHtcbiAgdmFyIGFic051bWJlciA9ICcnICsgTWF0aC5hYnMobnVtYmVyKSxcbiAgICB6ZXJvc1RvRmlsbCA9IHRhcmdldExlbmd0aCAtIGFic051bWJlci5sZW5ndGgsXG4gICAgc2lnbiA9IG51bWJlciA+PSAwO1xuICByZXR1cm4gKHNpZ24gPyAoZm9yY2VTaWduID8gJysnOiAnJykgOiAnLScpICsgTWF0aC5wb3coMTAsIE1hdGgubWF4KDAsIHplcm9zVG9GaWxsKSkudG9TdHJpbmcoKS5zdWJzdHIoMSkgKyBhYnNOdW1iZXI7XG59O1xuLyoqXG4gKiDmoLnmja7moLzlvI/ov5Tlm57ml6XmnJ9cbiAqIEBwYXJhbXMgW2Zvcm1hdF0gXCItXCIgKDIwMTgtMDEtMDEpIHwgXCIvXCIgKDIwMTgvMDEvMDEpXG4gKi9cbmV4cG9ydHMuZ2V0Rm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGZvcm1hdCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGQuZ2V0RnVsbFllYXIoKSxcbiAgICAgIHplcm9GaWxsKGQuZ2V0TW9udGgoKSArIDEsIDIsIDApLFxuICAgICAgemVyb0ZpbGwoZC5nZXREYXRlKCksIDIsIDApXG4gICAgXS5qb2luKGZvcm1hdCB8fCAnJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9kYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbFJlbW90ZUNmZy5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xudmFyIGFwbHVzVXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxEYXRhID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXRhJyk7XG52YXIgY2FjaGUgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL2NhY2hlJyk7XG52YXIgQVBMVVNfUkVNT1RFX0NPTkZJRyA9ICdBUExVU19SRU1PVEVfQ09ORklHJztcblxuXG4vKipcbiAqIOWFqOWfi+eCuei/nOeoi+mFjee9riDor7vlj5ZcbiovXG5cbmZ1bmN0aW9uIGdldExvY2FsU3RhdHVzKGtleSkge1xuICB2YXIgbHNjZmc7XG4gIGlmICh1dGlsR29sZGxvZy5pc1dlYigpKSB7XG4gICAgbHNjZmcgPSB1dGlsRGF0YS5nZXRMc1JlbW90ZUNmZyhBUExVU19SRU1PVEVfQ09ORklHKTtcbiAgfSBlbHNlIHtcbiAgICBsc2NmZyA9IGNhY2hlKCkuZ2V0U3luYyhhcGx1c1N0YXRpYy5BUExVU19SRU1PVEVfQ09ORklHKTtcbiAgfVxuICByZXR1cm4gbHNjZmcgJiYgbHNjZmdba2V5XTtcbn07XG5cbmZ1bmN0aW9uIHNldEF1dG9FdmVudFN0YXR1cyhzdGF0dXMpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcbiAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9FVkVOVF9SRU1PVEUsIHN0YXR1c11cbiAgfSk7XG59O1xuXG5leHBvcnRzLmdldEF1dG9FdmVudFN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHJlc3VsdCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UX1JFTU9URSkgfHwgZ2V0TG9jYWxTdGF0dXMoJ2NvZGVsZXNzQ2xpY2tFdmVudFN0YXR1cycpO1xuICBcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmZ1bmN0aW9uIHNldERldmljZVN0YXR1cyhlbmFibGUpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcbiAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19ERVZJQ0VfRU5BQkxFLCBlbmFibGVdXG4gIH0pO1xufTtcblxuZXhwb3J0cy5nZXREZXZpY2VTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHJldHVybiBnZXRMb2NhbFN0YXR1cygnY3VycmVudERldmljZUVuYWJsZScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RFVklDRV9FTkFCTEUpO1xufTtcblxuZnVuY3Rpb24gc2V0QXV0b1BhZ2VTdGF0dXMoc3RhdHVzKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPUFZfUkVNT1RFLCBzdGF0dXNdXG4gIH0pO1xufTtcblxuZXhwb3J0cy5nZXRBdXRvUGFnZVN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHJlc3VsdCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT1BWX1JFTU9URSkgfHwgZ2V0TG9jYWxTdGF0dXMoJ2NvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cycpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZnVuY3Rpb24gc2V0QXV0b1RyYWNrU3RhdHVzKHN0YXR1cykge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19FTkFCTEVEX1JFTU9URSwgc3RhdHVzXVxuICB9KTtcbn07XG5cblxuZXhwb3J0cy5nZXRBdXRvVHJhY2tTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciByZXN1bHQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEUpIHx8IGdldExvY2FsU3RhdHVzKCdjb2RlbGVzc1N0YXR1cycpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0cy5lbmFibGVDZmcgPSBmdW5jdGlvbihjZmcpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgaWYgKGNmZykge1xuICAgIC8vIEDmloflv4MgY29kZWxlc3NDb2xsZWN0b3JQYWdlU3RhdHVzID0gMSDlhbPpl63oh6rliqhwdlxuICAgIHNldEF1dG9FdmVudFN0YXR1cyhjZmcuY29kZWxlc3NDbGlja0V2ZW50U3RhdHVzKTtcbiAgICBzZXRBdXRvUGFnZVN0YXR1cyhjZmcuY29kZWxlc3NDb2xsZWN0b3JQYWdlU3RhdHVzKTtcbiAgICBzZXRBdXRvVHJhY2tTdGF0dXMoY2ZnLmNvZGVsZXNzU3RhdHVzKTtcbiAgICBzZXREZXZpY2VTdGF0dXMoY2ZnLmN1cnJlbnREZXZpY2VFbmFibGUpO1xuICAgIFxuICAgIGlmIChjZmcuZXZlbnRTYW1wbGluZ1JhdGUgJiYgY2ZnLmV2ZW50U2FtcGxpbmdSYXRlLmxlbmd0aCA+IDApIHtcbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19FVkVOVF9MSU1JVFJBVEVTLCBhcGx1c1V0aWwubWFwRXZlbnRTYW1wbGVSYXRlcyhjZmcuZXZlbnRTYW1wbGluZ1JhdGUpXVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNmZy5jb2RlbGVzc0lnbm9yZUNvbXBvbmVudCAmJiBjZmcuY29kZWxlc3NJZ25vcmVDb21wb25lbnQubGVuZ3RoID4gMCkge1xuICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG4gICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19DT05GSUdfUkVNT1RFLCBjZmcuY29kZWxlc3NJZ25vcmVDb21wb25lbnRdXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cblxuXG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxSZW1vdGVDZmcuanNcbi8vIG1vZHVsZSBpZCA9IDkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciBqc29uVXRpbCA9IHJlcXVpcmUoJy4vanNvblV0aWwnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIGJhc2U2NCA9IHJlcXVpcmUoJy4vYmFzZTY0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX25hbWUgPSAnJztcbiAgdmFyIF9kYXRhID0gbnVsbDtcbiAgdmFyIF9sb2FkZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBDYWNoZSgpIHtcbiAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICBpZiAoIV9kYXRhKSB7XG4gICAgICAgIF9uYW1lID0gJ2FwbHVzX2NhY2hlXycgKyB1dGlsLmdldEFwcEtleSgpIHx8ICcnO1xuICAgICAgICBjdHguZ2V0U3RvcmFnZSh7XG4gICAgICAgICAga2V5OiBfbmFtZSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7XG4gICAgICAgICAgICAgIF9kYXRhID0ganNvblV0aWwucGFyc2UocmVzLmRhdGEpIHx8IHt9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuICAgICAgICAgICAgICBrZXk6IF9uYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfZGF0YSA9IHt9O1xuICAgICAgICAgICAgX2xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICBjdHgucmVtb3ZlU3RvcmFnZSh7XG4gICAgICAgICAgICAgIGtleTogX25hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuICAgICAgICAgIGtleTogX25hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfZGF0YSkge1xuICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG4gICAgICAgICAga2V5OiBfbmFtZSxcbiAgICAgICAgICBkYXRhOiBqc29uVXRpbC5zdHJpbmdmeShfZGF0YSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChfZGF0YSkge1xuICAgICAgICBfZGF0YVtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGtleSkgeyAgICAgIFxuICAgICAgcmV0dXJuIChfZGF0YSB8fCB7fSlba2V5XTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoX2RhdGEgJiYgX2RhdGFba2V5XSkge1xuICAgICAgICBkZWxldGUgX2RhdGFba2V5XTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX2RhdGE7XG4gICAgfTtcblxuICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfZGF0YSA9IG51bGw7XG4gICAgfTtcblxuICAgIHRoaXMuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuICEhdGhpcy5nZXQoa2V5KTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0xvYWRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfbG9hZGVkO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFN5bmMgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBtaW5pLmdldFN0b3JhZ2VTeW5jKGtleSk7XG4gICAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLkFQTFVTX0lNUFJJTlRfVkVSU0lPTikge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gICBcbiAgICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnID8gIGpzb25VdGlsLnBhcnNlKHJlc3VsdCkgOiByZXN1bHQ7XG4gICAgICB9IGNhdGNoKGUpIHt9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U3luYyA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgbWluaS5zZXRTdG9yYWdlU3luYyhrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWluaS5zZXRTdG9yYWdlU3luYyhrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlKSB7fVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBfaW5zdGFuY2UgPSBuZXcgQ2FjaGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2luc3RhbmNlO1xuICB9O1xufSkoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9jYWNoZS5qc1xuLy8gbW9kdWxlIGlkID0gOTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGVuX3RvX3NlbmQuanNcbiAqXG4gKiAgIOS9nOeUqO+8miDkvZXml7bmiafooYxzZW5kcHbmj5Lku7ZcbiAqICAgZm46IGdldE1ldGFJbmZvIOe7p+aJv+iHs0Jhc2VcbiAqICAgZm46IHJ1biAo5o+S5Lu25qCH5YeG55qE5omn6KGM5YWl5Y+jKVxuICogICBhcGx1cy13YWl0aW5nPVwiMVwiOiDnrYnlvoU256eS5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG4gKiAgIGFwbHVzLXdhaXRpbmc9XCJNQU5cIjog5LiN6Ieq5Yqo5Y+R6YCBUFbml6Xlv5c7XG4gKiAgIGFwbHVzLXdhaXRpbmc9XCJuXCI6IOWFtuS4rW7kuLrlpKfkuo4x55qE5q2j5pW05pWwLCBhcGx1c+WcqOetieW+hW7mr6vnp5LkuYvlkI7lsJ3or5Xlj5HpgIFQVuaXpeW/lztcbiAqXG4gKiAgIGRlcHPvvJog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZtZXRhX2luZm9cbiAgICAgKiBUT0RPIOiLpeS7iuWQjuacieWKqOaAgeS/ruaUuW1ldGFfaW5mb+eahOmcgOaxgu+8jFxuICAgICAqIOatpOWkhOmcgOimgeWKqOaAgeS7jiBtZXRhSW5mb+aooeWdl+S4reWOu+iwg+eUqGdldEluZm/mlrnms5XmnaXojrflj5bnm7jlhbPkv6Hmga/vvIzov5nmoLflgZrnmoTlnY/lpITmmK/mtojogJfmgKfog71cbiAgICAgKi9cbiAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuICAgICAgcmV0dXJuIG1ldGFfaW5mbztcbiAgICB9LFxuXG4gICAgZ2V0QXBsdXNXYWl0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtZXRhX2luZm8gPSB0aGlzLmdldE1ldGFJbmZvKCkgfHwge307XG4gICAgICByZXR1cm4gbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo++8jOmFjee9ruS6hmFwbHVzV2FpdGluZyDlubbkuJQg5pivYXBsdXPoh6rliqjmiZPngrnmiY3otbDov5nmrrXpgLvovpFcbiAgICAgKiA8bWV0YSBuYW1lPVwiYXBsdXMtd2FpdGluZ1wiIGNvbnRlbnQ9XCJ4eHhcIiAvPlxuICAgICAqICAgeHh4OiAnTUFOJyAtIOS4jeWPkemAgXB255qE5qCH6K+GXG4gICAgICogICB4eHg6ICcxJyAtIOWwneivleetieW+hTbnp5LlkI7lj5FwdlxuICAgICAqXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIo57uI5q2i5Lit6Ze05Lu25omn6KGMKSB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oc3RhdGUsIGNiKSB7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpO1xuICAgICAgaWYgKGFwbHVzV2FpdGluZyAmJiBjb25maWcuaXNfYXV0bykge1xuICAgICAgICBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpICsgJyc7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2ID0ge1xuICAgICAgICAgIGFwbHVzV2FpdGluZzogYXBsdXNXYWl0aW5nXG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaChhcGx1c1dhaXRpbmcpIHtcbiAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fVVNFUl9JRDpcbiAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fQU5PTllfSUQ6XG4gICAgICAgIGNhc2UgJ01BTic6XG4gICAgICAgICAgcmV0dXJuICdkb25lJztcbiAgICAgICAgY2FzZSAnMSc6XG4gICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYuaXNXYWl0ID0gdHJ1ZTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICAgIH0sIDYwMDApO1xuICAgICAgICAgIHJldHVybiA2MDAwO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHZhciBuID0gYXBsdXNXYWl0aW5nICogMTtcbiAgICAgICAgICBpZiAoKG4gKyAnJykgIT09ICdOYU4nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfSwgbik7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doZW5fdG9fc2VuZHB2LmpzXG4vLyBtb2R1bGUgaWQgPSA5M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3doZXJlX3RvX3NlbmQuanNcbiAqXG4gKiAgIOS9nOeUqO+8mnVt6YCa6YGT5LiL77yM5pS26ZuGcHblj5HpgIHljrvlkJHkv6Hmga/vvIjln5/lkI3lj5blhrPkuo7phY3nva7vvIlcbiAqICAgZm46IHJ1biAo5o+S5Lu25qCH5YeG55qE5omn6KGM5YWl5Y+jKVxuICogICDmnInphY3nva7ov5nkuKrlhaXlj6NcbiAqICAgPG1ldGEgbmFtZT1cImFwbHVzLXJob3N0LXZcIiBjb250ZW50PVwieHh4Lnh4eC5jb21cIj5cbiAqICAg5pe277yMUFbml6Xlv5dob3N05pS55Li65L2/55SoYXBsdXMtcmhvc3QtdiDmoIfnrb7lhoVjb250ZW505YaF5aOw5piO55qE5YC8XG4gKlxuICogICBkZXBz77ya5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOmSsOaYrSA8Y2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsVUEgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFVBJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBhcGx1c1V0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIFBPU1QgPSAnUE9TVCc7XG52YXIgR0VUID0gJ0dFVCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICog6I635Y+WbWV0YV9pbmZvXG4gICAgICogVE9ETyDoi6Xku4rlkI7mnInliqjmgIHkv67mlLltZXRhX2luZm/nmoTpnIDmsYLvvIxcbiAgICAgKiDmraTlpITpnIDopoHliqjmgIHku44gbWV0YUluZm/mqKHlnZfkuK3ljrvosIPnlKhnZXRJbmZv5pa55rOV5p2l6I635Y+W55u45YWz5L+h5oGv77yM6L+Z5qC35YGa55qE5Z2P5aSE5piv5raI6ICX5oCn6IO9XG4gICAgICovXG4gICAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcbiAgICAgIHJldHVybiBtZXRhX2luZm87XG4gICAgfSxcblxuICAgIGdldEFwbHVzTWV0YUJ5S2V5OiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBtZXRhX2luZm8gPSB0aGlzLmdldE1ldGFJbmZvKCkgfHwge307XG4gICAgICByZXR1cm4gbWV0YV9pbmZvW2tleV07XG4gICAgfSxcblxuICAgIGdldFJob3N0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbWV0YVZhbHVlID0gdGhpcy5nZXRBcGx1c01ldGFCeUtleSgnYXBsdXMtcmhvc3QtdicpO1xuICAgICAgaWYgKCFhcGx1c1V0aWwuY2hlY2tEb21haW4obWV0YVZhbHVlKSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWV0YVZhbHVlO1xuICAgIH0sXG5cbiAgICBnZXRIamxqSG9zdFVybDogZnVuY3Rpb24gKHJob3N0KSB7XG4gICAgICByaG9zdCA9IGFwbHVzVXRpbC5maXhEb21haW4ocmhvc3QpO1xuICAgICAgdmFyIGVuZGZpeCA9ICcvd2ViX2xvZ3MnO1xuICAgICAgdmFyIHVybCA9IHJob3N0ICsgZW5kZml4O1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9LFxuXG4gICAgZ2V0UHZIb3N0VXJsOiBmdW5jdGlvbiAocmhvc3QpIHtcbiAgICAgIHJob3N0ID0gYXBsdXNVdGlsLmZpeERvbWFpbihyaG9zdCk7XG4gICAgICB2YXIgZW5kZml4ID0gL1xcLyQvLnRlc3Qocmhvc3QpID8gJycgOiAnLyc7XG5cbiAgICAgIHZhciBnaWYgPSAndi5naWYnO1xuICAgICAgaWYgKHV0aWxVQS5pc01vYmlsZSgpKSB7XG4gICAgICAgIGdpZiA9ICdtLmdpZic7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmhvc3QgKyBlbmRmaXggKyBnaWY7XG4gICAgfSxcblxuICAgIGdldENoYW5uZWw6IGZ1bmN0aW9uIChjaGFubmVsKSB7XG4gICAgICB2YXIgYXBsdXNDaGFubmVsID0gdGhpcy5nZXRBcGx1c01ldGFCeUtleSgnYXBsdXMtY2hhbm5lbCcpO1xuICAgICAgdmFyIGNoYW5uZWxzID0gWydXUycsICdXUy1PTkxZJywgR0VULCBQT1NUXTtcblxuICAgICAgdmFyIHJzO1xuICAgICAgaWYgKGNoYW5uZWxzLmluZGV4T2YoY2hhbm5lbCkgPiAtMSkge1xuICAgICAgICBycyA9IGNoYW5uZWw7XG4gICAgICB9XG4gICAgICBpZiAoIXJzICYmIGNoYW5uZWxzLmluZGV4T2YoYXBsdXNDaGFubmVsKSA+IC0xKSB7XG4gICAgICAgIHJzID0gYXBsdXNDaGFubmVsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBoamxq5Y+R6YCB5Yiw5ZOq6YeM5Y67XG4gICAgICogMS4g5aaC5p6c5piv5Y2V5Y+R77yMaDXnmoTlj5HpgIHljrvlkJHpgLvovpHnm7TmjqXot7Pov4dcbiAgICAgKiAyLiB2YWxpZGl0eTpcbiAgICAgKiAgIDxtZXRhIG5hbWU9XCJhcGx1cy1yaG9zdC1nXCIgY29udGVudD1cImdtLm1tc3RhdC5jb21cIiAvPlxuICAgICAqICAg5pyJ5YC85LiU5ZCI5rOV5omN5L2/55So77yM5ZCm5YiZ55So6buY6K6k55qEZ20ubW1zdGF0LmNvbS93Z28ubW1zdGF0LmNvbVxuICAgICAqXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7ICAgICAgXG4gICAgICB2YXIgaXNfc2luZ2xlID0gISF0aGlzLm9wdGlvbnMuY29udGV4dC5pc19zaW5nbGU7XG4gICAgICBpZiAoaXNfc2luZ2xlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciByZWNvcmRUeXBlID0gdGhpcy5vcHRpb25zLmNvbmZpZy5yZWNvcmRUeXBlO1xuICAgICAgdmFyIHJob3N0ID0gdGhpcy5nZXRSaG9zdChyZWNvcmRUeXBlKTtcbiAgICAgIGlmICghcmhvc3QpIHtcbiAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAvLyAgIG1zZzogJ2N1cnJlbnQgcmVxdWVzdCBkb21haW4gaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdXIgYXBsdXMtcmhvc3QtdiB2YWx1ZSBpbnNpZGUgbWV0YWluZm8hJ1xuICAgICAgICAvLyB9KTtcbiAgICAgICAgdWxvZygpLncoJ2N1cnJlbnQgcmVxdWVzdCBkb21haW4gaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdXIgYXBsdXMtcmhvc3QtdiB2YWx1ZSBpbnNpZGUgbWV0YWluZm8hJyk7XG4gICAgICAgIHJldHVybiAnZG9uZSc7XG4gICAgICB9XG5cbiAgICAgIHZhciB1cmw7XG4gICAgICBpZiAocmVjb3JkVHlwZSA9PT0gJ1BWJyAmJiAhYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuICAgICAgICB1cmwgPSB0aGlzLmdldFB2SG9zdFVybChyaG9zdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmwgPSB0aGlzLmdldEhqbGpIb3N0VXJsKHJob3N0KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgbWV0aG9kID0gdGhpcy5nZXRDaGFubmVsKGNvbmZpZy5tZXRob2QpIHx8IFBPU1Q7XG4gICAgICBpZiAobWV0aG9kID09PSBQT1NUICYmICghbmF2aWdhdG9yIHx8ICFuYXZpZ2F0b3Iuc2VuZEJlYWNvbikpIHtcbiAgICAgICAgbWV0aG9kID0gR0VUO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZCA9IGNvbmZpZy5tZXRob2Q7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLnVybCA9IHVybDtcbiAgICAgIHJldHVybjtcbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX3dlYl9jbG91ZF91bS5qc1xuLy8gbW9kdWxlIGlkID0gOTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIFVB5Yik5pat55u45YWz5bel5YW3XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5pc01vYmlsZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgVUEgPSBuYXZpZ2F0b3IgPyBuYXZpZ2F0b3IudXNlckFnZW50IDogJyc7XG4gIHZhciBpc0FsaUFwcCA9IC9BbGlBcHB8WXVub3N8Y3ljbG9uZS9pLnRlc3QoVUEpOyAvLyDkupFPU+a1j+iniOWZqOWGheaguOS4umN5Y2xvbmVcbiAgdmFyIGlzSU9TID0gKC9pUGhvbmV8aVBhZHxpUG9kL2kpLnRlc3QoVUEpO1xuICB2YXIgaXNBbmRyb2lkID0gKC9BbmRyb2lkL2kpLnRlc3QoVUEpO1xuICB2YXIgaXNXaW5kb3dzUGhvbmUgPSAoL1dpbmRvd3MgUGhvbmUvaSkudGVzdChVQSkgfHwgKC9JRU1vYmlsZS9pKS50ZXN0KFVBKSB8fCAoL1dQRGVza3RvcC9pKS50ZXN0KFVBKTtcbiAgdmFyIGlzQmxhY2tCZXJyeSA9ICgvQmxhY2tCZXJyeS9pKS50ZXN0KFVBKTtcbiAgdmFyIGlzT3BlcmFNb2JpbGUgPSAoL09wZXJhIE1pbmkvaSkudGVzdChVQSk7XG4gIHJldHVybiBpc0FsaUFwcCB8fCBpc0lPUyB8fCBpc0FuZHJvaWQgfHwgaXNXaW5kb3dzUGhvbmUgfHwgaXNCbGFja0JlcnJ5IHx8IGlzT3BlcmFNb2JpbGU7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxVQS5qc1xuLy8gbW9kdWxlIGlkID0gOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGF0X3RvX3NlbmQuanNcbiAqXG4gKiDkvZznlKjvvJrml6Xlv5flj5HpgIHln7rnoYDlj4LmlbDmlLbpm4bvvJpcbiAqICAgICAg5oyJ6aG65bqP5bCGYXBsdXMucHZfZGF0YS5iYXNpY+OAgWV4cGFyYW1z44CBb2xkUGFyYW1z44CBYXBsdXMucHZfZGF0YS5leHRyYeWbm+S4reexu+Wei+eahOWPguaVsG1lcmdl5Zyo5LiA5Liq5pWw57uE5LitXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29va2llID0gcmVxdWlyZSgnQHV0aWxzL2Nvb2tpZScpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGxvZ0lkID0gcmVxdWlyZSgnQHV0aWxzL2xvZ0lkJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1dGlsVUEgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFVBJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxQYXJhbXMgPSByZXF1aXJlKCcuL3V0aWxQYXJhbXMnKTtcbnZhciBlYWNoTWFwID0gcmVxdWlyZSgnQHV0aWxzL2VhY2hNYXAnKTtcbnZhciBhc3NpZ24gPSByZXF1aXJlKCdAdXRpbHMvYXNzaWduJyk7XG4vLyDkuIDmsb3lpKfkvJfpnIDmsYLvvJroh6rliqjop6PmnpB1cmwg77yf5Y+35ZCO55qE5Y+C5pWw77yM5YGa5Li66aG16Z2i5rWP6KeI5LqL5Lu255qE5LqL5Lu25bGe5oCn5LiK5oqlXG4vLyB1cmzlj4LmlbDlnKjliJ3lp4vljJbml7bojrflj5bkuIDmrKHljbPlj6/vvIzpgb/lhY3mr4/mrKHml6Xlv5fph43lpI3ov5DooYxcbnZhciB1cmxQYXJhbXMgPSB1dGlsRGFzaC5nZXRVcmxQYXJhbXMoKTtcblxuZnVuY3Rpb24gZ2V0VXRtUGFyYW1zT2JqICgpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgdXAgPSB1dGlsRGFzaC5nZXRVcmxQYXJhbXMoKTtcbiAgdHJ5IHtcbiAgICBlYWNoTWFwKHVwLCBmdW5jdGlvbiAoaywgdikge1xuICAgICAgLy8g6YG/5YWN5Li656m65pe26YeN5YaZZ2xvYmFscHJvcGVydHnlhoXnmoTlsZ7mgKdcbiAgICAgIGlmKGsuaW5kZXhPZigndXRtXycpID09PSAwKSB7XG4gICAgICAgIG9ialtrXSA9IHY7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiBvYmo7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXRDb21tb25QYXJhbXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGdsb2JhbGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsZGF0YScpIHx8IHt9O1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICAvLyB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgcGxhdGZvcm1UeXBlID0gdXRpbFVBLmlzTW9iaWxlKCkgPyAnV0FQJyA6ICdQQyc7XG4gICAgICB2YXIgdXNlckluZm8gPSB7XG4gICAgICAgIF9kZXZfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfZGV2X2lkJyksXG4gICAgICAgIF9hbm9ueV9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSxcbiAgICAgICAgX3VzZXJfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSxcbiAgICAgICAgX3VzZXJfbmljazogYXBsdXMuZ2V0TWV0YUluZm8oJ191c2VyX25pY2snKSB8fCBjb29raWUuZ2V0Q29va2llKCd0cmFja25pY2snKSxcbiAgICAgICAgX3Nlc3Npb25faWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfc2Vzc2lvbl9pZCcpLFxuICAgICAgfTtcbiAgICAgIGlmICghYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcbiAgICAgICAgdXNlckluZm8uX3BhZ2VfdGl0bGUgPSBkb2N1bWVudC50aXRsZSB8fCAnJztcbiAgICAgIH1cbiAgICAgIHZhciB1cmwgPSBjb25maWcucGFnZVVybCB8fCAobG9jYXRpb24gPyBsb2NhdGlvbi5ocmVmIDogJy0nKTtcbiAgICAgIHZhciB0aXRsZSA9IGNvbmZpZy50aXRsZSB8fCAoZG9jdW1lbnQgJiYgZG9jdW1lbnQudGl0bGUpO1xuICAgICAgdmFyIGNhY2hlID0gKGFwbHVzLmdsb2JhbENvbmZpZy5pc0RlY29kZVVybCA/ICdEQ18nIDogJycpICsgbG9nSWQuZ2V0TG9nSWQodXJsLCB0aXRsZSk7XG5cbiAgICAgIHZhciBhcHBJZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBLZXknKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnYXBwSWQnKTtcbiAgICAgIGlmICghYXBwSWQpIHtcbiAgICAgICAgdWxvZygpLncoJ3BsZWFzZSBzZXQgYXBwSWQgaW4gYXBsdXMgbWV0YUluZm8gYmVmb3JlIHNlbmRQViEnKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb21tb25QYXJhbXMgPSB1dGlsRGFzaC5hc3NpZ24oe1xuICAgICAgICBhcHBJZDogYXBwSWQsXG4gICAgICAgIGNhY2hlOiBjYWNoZSwgLy8gbG9nSWQuZ2V0TG9nSWQodXJsLCB0aXRsZSksXG4gICAgICAgIGNuYTogZXRhZy5jbmEgfHwgY29va2llLmdldENvb2tpZUNuYSgnY25hJykgfHwgZ2xvYmFsZGF0YS5jbmEgfHwgJycsIFxuICAgICAgICBfYWJmcGM6IGdsb2JhbGRhdGEuX2FiZnBjIHx8ICcnLCBcbiAgICAgICAgZXRhZzogZXRhZyxcbiAgICAgICAgcHJlOiBfJC5wYWdlX3JlZmVycmVyIHx8ICctJywgXG4gICAgICAgIHNka19pbmZvOiB7XG4gICAgICAgICAganN2ZXI6IGFwbHVzLmdsb2JhbENvbmZpZy5zY3JpcHRfbmFtZSxcbiAgICAgICAgICBsdmVyOiBhcGx1cy5nbG9iYWxDb25maWcubHZlcixcbiAgICAgICAgICBjdXN0b21TZGtJZDogYXBsdXMuZ2V0TWV0YUluZm8oJ2N1c3RvbVNka0lkJykgfHwgJycsXG4gICAgICAgICAgcGxhdGZvcm1UeXBlOiBwbGF0Zm9ybVR5cGUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgfSxcbiAgICAgICAgdHJhY2tlckV2ZW50Q29kZTogY29uZmlnLnRyYWNrZXJFdmVudENvZGUsXG4gICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIGNsaWVudDogYXBsdXMuX2FwbHVzX2NsaWVudCB8fCB7fSxcbiAgICAgICAgdGltZVpvbmU6IHV0aWxQYXJhbXMuZ2V0VGltZVpvbmUoKSxcbiAgICAgICAgZ29rZXk6IHVzZXJJbmZvLCAvLyB1dGlsRGFzaC5hc3NpZ24oc3BtSW5mbywgdXNlckluZm8pLFxuICAgICAgICBnbWtleTogdXNlcmRhdGEuZ21rZXkgfHwgJycsXG4gICAgICAgIG1ldGhvZDogdGhpcy5vcHRpb25zLmNvbnRleHQud2hlcmVfdG9fc2VuZC5tZXRob2RcbiAgICAgIH0sIHVzZXJJbmZvKTtcbiAgICAgIGlmICghYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcbiAgICAgICAgdmFyIHV0bXMgPSBnZXRVdG1QYXJhbXNPYmooKTtcbiAgICAgICAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbC1hcmdzJyk7XG4gICAgICAgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChncCkgfHwgIXV0aWxEYXNoLmlzRW1wdHlPYmplY3QodXRtcykpIHtcbiAgICAgICAgICBjb21tb25QYXJhbXMuZ2xvYmFsQXJncyA9IGFzc2lnbihncCwgdXRtcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjb21tb25QYXJhbXM7XG4gICAgfSxcblxuXG4gICAgZ2V0UHZQYXJhbXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHZhciB0YXJnZXRVcmwgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLnVybDtcbiAgICAgIHZhciBjb21tb25QYXJhbXMgPSB0aGlzLmdldENvbW1vblBhcmFtcygpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5jb25maWcuaXNfYXV0bykge1xuICAgICAgICBjb21tb25QYXJhbXMuc2RrX2luZm8ubWFuc25kbG9nID0gMTtcbiAgICAgIH1cbiAgICAgIC8vIOiAgemTvui3ryAtLSDlsIZ1cmzlj4LmlbDmlbTlkIjov5tnb2tlee+8jOS6i+S7tuWPguaVsOS8mOWFiOe6pyA+IHVybOWPguaVsFxuICAgICAgaWYoIWFwbHVzLmdsb2JhbENvbmZpZy5pc1VNKSB7XG4gICAgICAgIGNvbW1vblBhcmFtcy5nb2tleSA9IHV0aWxEYXNoLmFzc2lnbih1cmxQYXJhbXMsIGNvbW1vblBhcmFtcy5nb2tleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXRpbERhc2guYXNzaWduKGNvbW1vblBhcmFtcywge1xuICAgICAgICBldmVudF9jb2RlOiAnMjAwMScsXG4gICAgICAgIGxvZ3R5cGU6ICcxJyxcbiAgICAgICAgbG9na2V5OiB1dGlsVUEuaXNNb2JpbGUoKSA/ICcvbS5naWYnIDogJy92LmdpZicsXG4gICAgICAgIGV2ZW50X3RpbWVzdGFtcDogYXBsdXMuXyQuc2VuZF9wdl9jb3VudCA+IDAgPyBuZXcgRGF0ZSgpIDogYXBsdXMubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSxcbiAgICAgICAgaXNfYXV0bzogdGhpcy5vcHRpb25zLmNvbmZpZy5pc19hdXRvLFxuICAgICAgICB0cmFja190eXBlOiB0aGlzLm9wdGlvbnMuY29uZmlnLnRyYWNrX3R5cGVcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRIamxqUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcbiAgICAgIHZhciBoamxqUGFyYW1zID0ge1xuICAgICAgICBldmVudF9jb2RlOiBhcGx1c1N0YXRpYy5FVkVOVF9JRF9NQVBbdXNlcmRhdGEuZ21rZXldIHx8IGFwbHVzU3RhdGljLk9USEVSLFxuICAgICAgICBsb2d0eXBlOiAnMicsXG4gICAgICAgIGxvZ2tleTogdXNlcmRhdGEubG9na2V5LFxuICAgICAgICBldmVudF90aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIC8vIG1hbnNuZGxvZzogJzEnLFxuICAgICAgfTtcbiAgICAgIHJldHVybiB1dGlsRGFzaC5hc3NpZ24odGhpcy5nZXRDb21tb25QYXJhbXMoKSwgaGpsalBhcmFtcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcbiAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG4gICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcbiAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge307XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNvbmZpZy5yZWNvcmRUeXBlID09PSAnUFYnKSB7XG4gICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0UHZQYXJhbXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0SGpsalBhcmFtcygpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBwYXJhbXM7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGF0X3RvX3NlbmRfd2ViX2Nsb3VkLmpzXG4vLyBtb2R1bGUgaWQgPSA5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogcHZpZFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsSGFzaCA9IHJlcXVpcmUoJy4vdXRpbEhhc2gnKTtcblxudmFyIGdldFJhbmRvbUlkID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgLyoqXG4gICAqIOeUn+aIkOacrOmhteeahCBwdiBpZFxuICAgKiBwdiBpZCDlj6rpnIDopoHlvZPliY3nlKjmiLfkvJror53llK/kuIDljbPlj6/vvIzov5nlhL/kvb/nlKjkuIDkuKogNiDkvY3nmoQgMTYg6L+b5Yi25pWw5a2XXG4gICAqL1xuICB2YXIgcm5kX3N0cnMgPSAnJztcbiAgdmFyIGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcbiAgdmFyIGhhbmRsZWQgPSBmYWxzZTtcbiAgdmFyIGNoYXI7XG5cbiAgLyoqXG4gICAqIOino+WGs+mDqOWIhiBzcG0g6KKrIEdGVyDlopnkuobnmoTmg4XlhrXvvIzlpoIgMjIuZ2xcbiAgICog5o6S6ZmkIHB2aWQg5LulIGdsIOW8gOWktOeahOaDheWGtVxuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlUFZJZCAoY2hhclBvcykge1xuICAgIHZhciBjaGFyc1dpdGhvdXRHID0gJzAxMjM0NTY3ODlhYmNkZWZoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGSElKS0xNTk9QUVJTVFVWV1hZWic7XG4gICAgdmFyIGNoYXJzV2l0aG91dEwgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS01OT1BRUlNUVVZXWFlaJztcblxuICAgIGlmIChjaGFyUG9zID09IDEpIHtcbiAgICAgIHJldHVybiBjaGFyc1dpdGhvdXRHLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MCksIDEpO1xuICAgIH0gZWxzZSBpZiAoY2hhclBvcyA9PSAyKSB7XG4gICAgICByZXR1cm4gY2hhcnNXaXRob3V0TC5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuICcwJztcbiAgfTtcblxuICB3aGlsZSAocm5kX3N0cnMubGVuZ3RoIDwgc2l6ZSkge1xuICAgIGNoYXIgPSBjaGFycy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjIpLCAxKTtcbiAgICAvLyDlpITnkIbooqvlopnnmoTmg4XlhrXvvIznm67liY3lj6rpkojlr7lnbOW8gOWktOeahFxuICAgIGlmICghaGFuZGxlZCAmJiBybmRfc3Rycy5sZW5ndGggPD0gMiAmJiAoY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJyB8fCBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2wnKSkge1xuICAgICAgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PT0gMCAmJiBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG4gICAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMSk7XG4gICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocm5kX3N0cnMubGVuZ3RoID09IDEgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJyAmJiBybmRfc3Rycy5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSA9PSAnZycpIHtcbiAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMik7XG4gICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBybmRfc3RycyArPSBjaGFyO1xuICB9XG4gIHJldHVybiBybmRfc3Rycztcbn07XG5cbmZ1bmN0aW9uIGdldENoYXJzIChhcmdzLCBzaXplLCBkZWZhdWx0VmFsKSB7XG4gIGlmIChhcmdzKSB7XG4gICAgcmV0dXJuIHV0aWxIYXNoLmhhc2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3MpKS5zdWJzdHIoMCwgc2l6ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWw7XG4gIH1cbn1cblxuZXhwb3J0cy5nZXRMb2dJZCA9IGZ1bmN0aW9uIChwYWdlVXJsLCBsb2dOYW1lKSB7XG4gIHZhciByYW5kb204Q2hhcnMgPSBnZXRSYW5kb21JZCg4KTtcbiAgdmFyIHJhbmRvbTRDaGFycyA9IHJhbmRvbThDaGFycy5zdWJzdHIoMCwgNCk7XG4gIHZhciByYW5kb202Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDYpO1xuICByZXR1cm4gW1xuICAgIGdldENoYXJzKHBhZ2VVcmwsIDQsIHJhbmRvbTRDaGFycyksXG4gICAgZ2V0Q2hhcnMobG9nTmFtZSwgNCwgcmFuZG9tNENoYXJzKSxcbiAgICByYW5kb202Q2hhcnNcbiAgXS5qb2luKCcnKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9sb2dJZC5qc1xuLy8gbW9kdWxlIGlkID0gOTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDov5Tlm55HTVTmoLzlvI/nmoTml7bljLrvvIzlpoLvvJpHTVQrMDU6NDUsIEdNVC0wNzowMCwgR01UKzA4OjAwXG4gKi9cbmV4cG9ydHMuZ2V0VGltZVpvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGltZVpvbmUgPSAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjA7XG4gIHZhciBfYW5kID0gJysnO1xuICBpZiAoX3RpbWVab25lIDwgMCkge1xuICAgIF9hbmQgPSAnLSc7XG4gIH1cbiAgdmFyIHpvbmUgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpKTtcbiAgdmFyIHJlbWFpbmRlciA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkgLSBfdGltZVpvbmUpO1xuICB2YXIgcmVtYWluZGVyWm9uZSA9ICcwMCc7XG4gIGlmIChyZW1haW5kZXIgPiAwKSB7XG4gICAgcmVtYWluZGVyWm9uZSA9IDYwICogcmVtYWluZGVyO1xuICB9XG4gIHJldHVybiAnR01UJyArIF9hbmQgKyAoem9uZSA+IDkgPyB6b25lIDogKCcwJyArIHpvbmUpKSArICc6JyArIHJlbWFpbmRlclpvbmU7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3V0aWxQYXJhbXMuanNcbi8vIG1vZHVsZSBpZCA9IDk4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YS5qc1xuICpcbiAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsHB2ZGF0YeWQjumdou+8mnB2ZGF0YS5jb25jYXQodXNlcmRhdGEpXG4gKiAgZGVwczogd2hhdF90b19zZW5kcHZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIOmHh+mbhuS4quaAp+WMluWPguaVsFxuICAgICAqXG4gICAgICogZ29rZXk6XG4gICAgICogICDov5nlnZfkuLrlr7nljoblj7J1c2VyZGF0YeS8oOmAkueahOWFvOWuueWBmuazle+8jFRPRE/vvJrmjqjliqjlupTnlKjmlrnlj5jmm7RcbiAgICAgKiAgIOW6lOeUqOaWueS8oOmAkueahGdva2V55qC85byP5bqU55So5pa56Ieq6KGM5Yaz5a6a77yMXG4gICAgICogICAgIOWmgiBnb2tleT1cImE9MSZiPTJcIiDmiJYge1wiYVwiOlt7XCJrZXlcIjoyMDE2MTIyNjE1NTAsXCJ2YWx1ZVwiOjAuMX0se1wia2V5XCI6MjAxNjEyMjYxNjAwLFwidmFsdWVcIjowLjV9LHtcImtleVwiOjIwMTYxMjI2MTYxMCxcInZhbHVlXCI6MX1dfVxuICAgICAqICAg6L+Z5Z2X6YC76L6R5piv6YCg5oiQZXh0ZW5kYXJnc+WGhemDqOWHuueOsOWkmuS4quaWnOadoOeahOWFg+WHtu+8ge+8ge+8gVxuICAgICAqIHBhZ2VfaWQ6XG4gICAgICogICDmnIlwYWdlX2lk5bCx5Zyoc3BtYuS4rea3u+WKoOWtkOWPguaVsFxuICAgICAqICAg5pegcGFnZV9pZOWwsea4hemZpHNwbWLkuK3nmoTlrZDlj4LmlbBcbiAgICAgKiBzcG1fY250XG4gICAgICogICDmm7TmlLnlroxzcG1i5L2N6L+Y6ZyA6KaB5pu05pawc3BtX2NudCBA6LCL5aOrIGluIDIwMTgtMDMtMjAgIOS7peWFjXRvVVTnmoRzcG0tY2505Lii5aSx5YiG5qG25Y+3XG4gICAgICog5Liq5oCn5YyW5Y+C5pWw77yaXG4gICAgICogICAxLiAoYXBsdXPmpI3lhaUpOiA8bWV0YSBuYW1lPVwiYXBsdXMtY3B2ZGF0YVwiIGNvbnRlbnQ9XCJKU09Oc3RyaW5nXCI+XG4gICAgICogICAyLiDmlrnms5XkvKDlhaU6IGFwbHVzLnNlbmRQVih7Q09ORklHfSwge1VTRVJEQVRFfSk7XG4gICAgICog5Y+N5L2c5byK55qE5paH5qGj5a696auYOiBfcHcsX3BoXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG4gICAgICovXG4gICAgZ2V0VXNlcmRhdGE6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBkID0ge307XG5cbiAgICAgIGlmIChjb25maWcgJiYgIWNvbmZpZy5pc19hdXRvKSB7XG4gICAgICAgIGlmIChjb25maWcuZ29rZXkpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGQgPSBmb3JtYXQucGFyYW0yb2JqKGNvbmZpZy5nb2tleSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLmdva2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZCA9IGNvbmZpZy5nb2tleTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGNvbWJvVXNlcmRhdGEgPSBmdW5jdGlvbihfZGF0YSkge1xuICAgICAgICBpZihpc0FycmF5KF9kYXRhKSl7XG4gICAgICAgICAgX2RhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgIGQgPSB1dGlsRGFzaC5hc3NpZ24oZCwgaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIGQgPSB1dGlsRGFzaC5hc3NpZ24oZCwgX2RhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29tYm9Vc2VyZGF0YShhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsZGF0YScpKTtcbiAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5aSE55CGXyTlhajlsYDlj5jph48gLS0tLS0tIDJcbiAgICAgKi9cbiAgICBwcm9jZXNzTG9kYXNoRG9sbGFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLnJlZmVycmVyKSB7XG4gICAgICAgIF8kLnBhZ2VfcmVmZXJyZXIgPSBjb25maWcucmVmZXJyZXI7XG4gICAgICB9XG4gICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG4gICAgICovXG4gICAgdXBkYXRlUHJlOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgaWYgKF8kLnBhZ2VfcmVmZXJyZXIpIHtcbiAgICAgICAgZGF0YS5wcmUgPSAgXyQucGFnZV9yZWZlcnJlcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6NcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZCA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhO1xuICAgICAgdmFyIHVzZXJkYXRhID0gdXRpbERhc2guYXNzaWduKHRoaXMuZ2V0VXNlcmRhdGEoKSwgZC51c2VyZGF0YSB8fCB7fSk7XG4gICAgICB0aGlzLnByb2Nlc3NMb2Rhc2hEb2xsYXIoKTtcblxuICAgICAgZC5nb2tleSA9IHV0aWxEYXNoLmFzc2lnbihkLmdva2V5LCB1c2VyZGF0YSk7XG4gICAgICBkID0gdGhpcy51cGRhdGVQcmUoZCk7XG5cbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gZDtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LnVzZXJkYXRhID0gZC5nb2tleTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIC9BcnJheS8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykpO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2lzQXJyYXkuanNcbi8vIG1vZHVsZSBpZCA9IDEwMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfd2ViLmpzXG4gKlxuICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG4gKiAgICAgICAgICAg5bm25bCG5pS26ZuG5Yiw55qE6Ieq5a6a5LmJ5Y+C5pWw5Lul5pWw57uE5qC85byP6L+95Yqg5YiwcHZkYXRh5ZCO6Z2i77yacHZkYXRhLmNvbmNhdCh1c2VyZGF0YSlcbiAqICBkZXBzOiB3aGF0X3RvX3NlbmRwdlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsRXhpbmZvID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFeGluZm8nKTtcbnZhciBnZXRFeFBhcmFtc09iaiA9IHJlcXVpcmUoJy4uL2dldEV4cGFyYW1zT2JqJyk7XG52YXIgYXNzaWduID0gcmVxdWlyZSgnQHV0aWxzL2Fzc2lnbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIGdldEV4UGFyYW1zSW5mbzogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGUgPSB1dGlsRXhpbmZvLmdldEV4UGFyYW1zKCk7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5leHBhcmFtcyA9IGU7XG4gICAgICByZXR1cm4gZ2V0RXhQYXJhbXNPYmooZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBnb2tleSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuICAgICAgZ29rZXkgPSBhc3NpZ24odGhpcy5nZXRFeFBhcmFtc0luZm8oKSwgZ29rZXkpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEuZ29rZXkgPSBnb2tleTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJy4vZWFjaCcpO1xudmFyIGZvcm1hdCA9IHJlcXVpcmUoJy4vZm9ybWF0Jyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCcuL3V0aWxEYXNoJyk7XG52YXIgdXRpbERvbSA9IHJlcXVpcmUoJy4vdXRpbERvbScpO1xudmFyIHV0aWxBdHRyaWJ1dGUgPSByZXF1aXJlKCcuL3V0aWxBdHRyaWJ1dGUnKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCcuL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJy4vYXBsdXNTdGF0aWMnKTtcblxuLyoqXG4gKiBwYXJhbSB0byBhcnJheVxuICogMjAxNi0wOC0yNCDmlL7lvIDvvIznlKjmnaXlpITnkIZleHBhcmFtcyBA6LCL5aOrXG4gKiDlsIbkuIDkuKrnroDljZXnmoTlvaLlpoIgYT0xJmI9MiZjPTMg6L+Z5qC355qE5Y+C5pWw6L2s5YyW5Li6566A5Y2V55qEIGFycmF5IOagvOW8j++8jOWmgu+8mlxuICogW1tcImFcIiwgXCIxXCJdLCBbXCJiXCIsIFwiMlwiXSwgW1wiY1wiLCBcIjNcIl1dXG4gKlxuICogQHBhcmFtIHBhcmFtcyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBwYXJhbTJhcnIgKHBhcmFtcykge1xuICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG4gICAgaSA9IDAsIGwgPSBhLmxlbmd0aCxcbiAgICBpdGVtLFxuICAgIGFyciA9IFtdO1xuICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhW2ldLnNwbGl0KFwiPVwiKTtcbiAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG4gIH1cblxuICByZXR1cm4gYXJyO1xufTtcblxuLyoqXG4gKiDlsIZtZXRh6YWN572u55qEZXhwYXJhbXPlkIjlubbliLBiZWFjb27ovpPlh7rnmoRleHBhcmFtc+S4ilxuICogQHBhcmFtcyB7U3RyaW5nfSBiZWFjb25FeHBhcmFtc1xuICogQHBhcmFtcyB7U3RyaW5nfSBtZXRhRXhwYXJhbXNcbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IGV4cGFyYW1zXG4gKi9cbmZ1bmN0aW9uIG1lcmdlRXhwYXJhbXMgKGJlYWNvbkV4cGFyYW1zLCBtZXRhRXhwYXJhbXMpIHtcbiAgdmFyIGJleHBhcmFtcyA9ICdhcGx1cyZzaWR4PWFwbHVzU2lkZXgmY2t4PWFwbHVzQ2t4JztcbiAgdmFyIGRlZmF1bHRFeHBhcmFtcyA9IGJlYWNvbkV4cGFyYW1zIHx8IGJleHBhcmFtcztcbiAgdHJ5IHtcbiAgICBpZiAobWV0YUV4cGFyYW1zKSB7XG4gICAgICB2YXIgbWV0YU9iaiA9IGZvcm1hdC5wYXJhbTJvYmoobWV0YUV4cGFyYW1zKTtcbiAgICAgIHZhciBibGFja3MgPSBbYXBsdXNTdGF0aWMuQVBMVVMsICdjbmEnLCBhcGx1c1N0YXRpYy5TUE1fQ05ULCBhcGx1c1N0YXRpYy5TUE1fVVJMLCBhcGx1c1N0YXRpYy5TUE1fUFJFLCAnbG9ndHlwZScsICdwcmUnLCAndWlkYXBsdXMnLCAnYXNpZCcsICdzaWR4JywgJ3RyaWQnLCAnZ29rZXknXTtcbiAgICAgIGVhY2goYmxhY2tzLCBmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmIChtZXRhT2JqLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe21zZzogJ0NhbiBub3QgaW5qZWN0IGtleXdvcmRzOiAnICsga30pO1xuICAgICAgICAgIHVsb2coKS53KCdDYW4gbm90IGluamVjdCBrZXl3b3JkczogJyArIGspO1xuICAgICAgICAgIGRlbGV0ZSBtZXRhT2JqW2tdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBtZXRhT2JqWycnXTsgLy8g56m655m9a2V55Lmf56e76Zmk5o6JXG5cbiAgICAgIHZhciB0bXBQYXJhbSA9ICcnO1xuICAgICAgLy8g5pyJYmVhY29u6YWN572u55qE5oOF5Ya1XG4gICAgICBpZiAoYmVhY29uRXhwYXJhbXMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gYmVhY29uRXhwYXJhbXMubWF0Y2goL2FwbHVzJi8pLmluZGV4O1xuICAgICAgICB2YXIgYmVhY29uT2JqID0gaW5kZXggPiAwID8gZm9ybWF0LnBhcmFtMm9iaihiZWFjb25FeHBhcmFtcy5zdWJzdHJpbmcoMCwgaW5kZXgpKSA6IHt9O1xuICAgICAgICBkZWxldGUgYmVhY29uT2JqWycnXTtcbiAgICAgICAgdG1wUGFyYW0gPSBmb3JtYXQub2JqMnBhcmFtKHV0aWxEYXNoLmFzc2lnbihiZWFjb25PYmosIG1ldGFPYmopKSArICcmJyArIGJlYWNvbkV4cGFyYW1zLnN1YnN0cmluZyhpbmRleCwgYmVhY29uRXhwYXJhbXMubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOaXoGJlYWNvbumFjee9rueahOaDheWGtVxuICAgICAgICB0bXBQYXJhbSA9IGZvcm1hdC5vYmoycGFyYW0obWV0YU9iaikgKyAnJicgKyBiZXhwYXJhbXM7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG1wUGFyYW07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZWZhdWx0RXhwYXJhbXM7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRFeHBhcmFtcztcbiAgfVxufTtcbmV4cG9ydHMubWVyZ2VFeHBhcmFtcyA9IG1lcmdlRXhwYXJhbXM7XG5cblxuZnVuY3Rpb24gZ2V0RXhQYXJhbXNGcm9tTWV0YSAoKSB7XG4gIHZhciBfJCA9IGFwbHVzICYmIGFwbHVzLl8kID8gYXBsdXMuXyQgOiB7fTtcbiAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbyB8fCB7fTtcbiAgcmV0dXJuIG1ldGFfaW5mb1snYXBsdXMtZXhwYXJhbXMnXSB8fCAnJztcbn07XG5cbi8vIGV4cGFyYW1z5Y+C5pWwLS0tLS0tIDJcbmZ1bmN0aW9uIGdldEV4UGFyYW1zICgpIHtcbiAgdmFyIGN1cnJlbnRfbm9kZSA9IHV0aWxEb20uZ2V0Q3VycmVudE5vZGUoKTtcbiAgdmFyIGJfZXhwYXJhbXMgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKGN1cnJlbnRfbm9kZSwgJ2V4cGFyYW1zJyk7XG4gIHZhciBleHBhcmFtcyA9IG1lcmdlRXhwYXJhbXMoYl9leHBhcmFtcywgZ2V0RXhQYXJhbXNGcm9tTWV0YSgpKSB8fCAnJztcbiAgcmV0dXJuIGV4cGFyYW1zICYmIGV4cGFyYW1zLnJlcGxhY2UoLyZhbXA7L2csIFwiJlwiKS5yZXBsYWNlKC9cXGJ1c2VyKGl8SSlkPS8sIFwidWlkYXBsdXM9XCIpO1xufTtcbmV4cG9ydHMuZ2V0RXhQYXJhbXMgPSBnZXRFeFBhcmFtcztcblxuLyoqXG4gKiDlh7rkuo7mtYHph4/nmoTogIPomZHvvIxiZWFjb27ovpPlh7rnmoRleHBhcmFtc+WPquWPliBleHBhcmFtc19rZXlfbmFtZXPvvIjop4HphY3nva7vvIkg5YaF55qE5Yeg5Liq5a2X5q61XG4gKiDoi6VleHBhcmFtc+WGheaciXVzZXJpZCDmiJbogIUg5Zyo5Y+R6YCB55qEUFbpkp91aWRhcGx1c+acieWAvCwg5YiZ5Zyo5Luk566t6K+35rGC55qEZ29rZXnlhoXkuZ/ov73liqB1aWRwYWx1c+WPguaVsFxuICog6IulZXhwYXJhbXPlhoXmnInkvKDlhaVwY19pL3B1X2ksIOWImeWcqOS7pOeureivt+axgueahGdva2V55YaF5Lmf6buY6K6k6L+95YqgcGNfaS9wdV9p5Y+C5pWwXG4gKlxuICogQHJldHVybiB7T2JqZWN0fSByc1xuICovXG5leHBvcnRzLmdldEV4cGFyYW1zSW5mb3MgPSBmdW5jdGlvbihleHBhcmFtc19rZXlfbmFtZXMsIG1ldGFfZXhpbmZvKSB7XG4gIHZhciBycyA9IHt9O1xuICB2YXIga2V5cyA9IGV4cGFyYW1zX2tleV9uYW1lcyB8fCBbJ3VpZGFwbHVzJywgJ3BjX2knLCAncHVfaSddO1xuICB2YXIgdG1wX2luZm8gPSBnZXRFeFBhcmFtcygpIHx8ICcnO1xuICB0bXBfaW5mbyA9IHRtcF9pbmZvLnJlcGxhY2UoLyZhcGx1cyYvLCAnJicpO1xuICB2YXIgdG1wX2FyciA9IHBhcmFtMmFycih0bXBfaW5mbykgfHwgW107XG4gIFxuICB2YXIgY29uZiA9IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gdXRpbEFycmF5LmluZGV4b2Yoa2V5cywgaykgPiAtMTtcbiAgfTsgIFxuICAvLyDlh7rkuo7mtYHph4/nmoTogIPomZHvvIxiZWFjb27ovpPlh7rnmoRleHBhcmFtc+WPquWPliAgZXhwYXJhbXNfa2V5X25hbWVz77yI6KeB6YWN572u77yJ5YaF55qE5Yeg5Liq5a2X5q61XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG1wX2Fyci5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0bXBfb2JqID0gdG1wX2FycltpXTtcbiAgICB2YXIgayA9IHRtcF9vYmpbMF0gfHwgJyc7XG4gICAgdmFyIHYgPSB0bXBfb2JqWzFdIHx8ICcnO1xuICAgIGlmIChrICYmIHYgJiYgKG1ldGFfZXhpbmZvID09PSAnRVhQQVJBTVMnIHx8IGNvbmYoaykpKSB7XG4gICAgICByc1trXSA9IHY7XG4gICAgfVxuICB9XG4gIHJldHVybiBycztcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEV4aW5mby5qc1xuLy8gbW9kdWxlIGlkID0gMTAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleHBhcmFtcykge1xuICB2YXIgcnMgPSB7fTtcbiAgdHJ5IHtcbiAgICAvLyB2YXIgZXhwYXJhbXMgPSB1dGlsRXhpbmZvLmdldEV4UGFyYW1zKCk7XG4gICAgLy8gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEuZXhwYXJhbXMgPSBleHBhcmFtcztcbiAgICB2YXIgdG1wT2JqID0gZm9ybWF0LnBhcmFtMm9iaihleHBhcmFtcy5yZXBsYWNlKC8mYW1wOy9nLCAnJicpLnJlcGxhY2UoL1xcYnVzZXIoaXxJKWQ9LywgJ3VpZGFwbHVzPScpLnJlcGxhY2UoLyZhcGx1cyYvLCAnJicpKTtcbiAgICAvLyDku4Xlj5YgWyd1aWRhcGx1cycsICdwY19pJywgJ3B1X2knXSDkuInkuKrlgLxcbiAgICBpZiAodG1wT2JqLnVpZGFwbHVzKSB7XG4gICAgICBycy51aWRhcGx1cyA9IHRtcE9iai51aWRhcGx1cztcbiAgICB9XG4gICAgcnMucGNfaSA9IHRtcE9iai5wY19pO1xuICAgIHJzLnB1X2kgPSB0bXBPYmoucHVfaTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coZSk7XG4gIH1cbiAgcmV0dXJuIHJzO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9nZXRFeHBhcmFtc09iai5qc1xuLy8gbW9kdWxlIGlkID0gMTAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX2IvY29uZmlnL3BsdWdpbnMvd2hhdF9zZW5kcHZfdG9fdXQyLmpzXG4gKlxuICogIOS9nOeUqO+8muWmguaenOW9k+WJjeeOr+Wig+a7oei2s3RvVVTmnaHku7bvvIzliJnlsIbmlLbpm4blj5HpgIHoh7NVVOeahOWPguaVsO+8jFxuICogICAgICAg5bm25bCG5pS26ZuG5Yiw55qE5Y+C5pWw5a2Y5pS+5Yiw5LiK5LiL5paH546v5aKD5LitOiBjb250ZXh0LndoZXJlX3RvX3NlbmRwdi5wdmRhdGFUb1VUXG4gKiAgZGVwczogIHdoZXJlX3RvX3NlbmRwdlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7IFxudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBjb29raWUgPSByZXF1aXJlKCdAdXRpbHMvY29va2llJyk7XG52YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxuLyoqXG4gKiDmuIXnkIbmiZPngrnlj4LmlbBcbiAqIOWwhuaJgOacieWAvOS4uuepuueahOWPguaVsOWOu+aOie+8iGFwbHVz6Zmk5aSW77yJ77ybXG4gKiDlpoLmnpzmnInph43lpI3nmoTlj4LmlbDvvIzlj6rkv53nlZnmnIDlkI7kuIDkuKpcbiAqIEBwYXJhbSBkYXRhIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMoZGF0YSkge1xuICB2YXIgbmV3X3BhcmFtcyA9IFtdO1xuICB2YXIgaTtcbiAgdmFyIGl0ZW07XG4gIHZhciBrZXlzID0ge307XG4gIHZhciBrO1xuICB2YXIgdjtcblxuICBmb3IgKGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaXRlbSA9IGRhdGFbaV07XG4gICAgayA9IGl0ZW1bMF07XG4gICAgaWYgKGsgJiYgay5pbmRleE9mKHV0aWwuc19wbGFpbl9vYmopID09IC0xICYmIGtleXMuaGFzT3duUHJvcGVydHkoaykpIGNvbnRpbnVlO1xuICAgIHYgPSBpdGVtWzFdO1xuICAgIGlmIChrID09ICdhcGx1cycgfHwgdikge1xuICAgICAgbmV3X3BhcmFtcy51bnNoaWZ0KFtrLCB2XSk7XG4gICAgICBrZXlzW2tdID0gMTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3X3BhcmFtcztcbn07XG5cbi8qKlxuICog5riF55CGdG9VVOaJk+eCueWPguaVsO+8jOWOu+mZpO+8mlxuICogbG9ndHlwZVxuICogY2FjaGVcbiAqIHNjclxuICogOjotcGxhaW4teHh4XG4gKiBzcG0tY250XG4gKiBAcGFyYW0gZGF0YVxuICovXG5mdW5jdGlvbiBjbGVhblBhcmFtc0ZvclRvVVQoZGF0YSkge1xuICB2YXIgbmV3X3BhcmFtcyA9IFtdLFxuICAgIGksXG4gICAgaXRlbSxcbiAgICBrLCB2LFxuICAgIGV4Y2x1ZGVQYXJtcyA9IHtcbiAgICAgIFwibG9ndHlwZVwiOiB0cnVlLFxuICAgICAgXCJjYWNoZVwiOiB0cnVlLFxuICAgICAgXCJzY3JcIjogdHJ1ZSxcbiAgICAgIFwic3BtLWNudFwiOiB0cnVlXG4gICAgfTtcblxuICBmb3IgKGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaXRlbSA9IGRhdGFbaV07XG4gICAgayA9IGl0ZW1bMF07XG4gICAgdiA9IGl0ZW1bMV07XG4gICAgaWYgKCh1dGlsRGFzaC5pc1N0YXJ0V2l0aChrLCB1dGlsLnNfcGxhaW5fb2JqKSAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoaywgdXRpbC5ta1BsYWluS2V5Rm9yRXhwYXJhbXMoKSkpIHx8IGV4Y2x1ZGVQYXJtc1trXSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIDIwMTYtMDgtMjQg55Cs5a2Q6ZyA5rGC77yMZXhwYXJhbXPljZXni6zlpITnkIbvvIx3aW5kdmFuZemHjOmcgOimgSBA6LCL5aOrXG4gICAgaWYgKHV0aWxEYXNoLmlzU3RhcnRXaXRoKGssIHV0aWwubWtQbGFpbktleUZvckV4cGFyYW1zKCkpKSB7XG4gICAgICB2YXIgZXhwYXJhbXNBcnIgPSB1dGlsLnBhcmFtMmFycih2KTtcbiAgICAgIGlmICh0eXBlb2YgZXhwYXJhbXNBcnIgPT09ICdvYmplY3QnICYmIGV4cGFyYW1zQXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IGV4cGFyYW1zQXJyLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgdmFyIGVJdGVtID0gZXhwYXJhbXNBcnJbal07XG4gICAgICAgICAgLy8g56m65YC85LiN6ZyA6KaBXG4gICAgICAgICAgaWYgKGVJdGVtICYmIGVJdGVtWzFdKSB7XG4gICAgICAgICAgICBuZXdfcGFyYW1zLnVuc2hpZnQoW2VJdGVtWzBdLCBlSXRlbVsxXV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIG5ld19wYXJhbXMudW5zaGlmdChbaywgdl0pO1xuICB9XG4gIHJldHVybiBuZXdfcGFyYW1zO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvLyAvLyDliJ3lp4vljJbmqKHlnZdcbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICAvLyDlhbPplK7or43kuI3lhYHorrjlupTnlKjmlrnopobnm5ZcbiAgICBrZXlJc0F2YWlsYWJsZTogZnVuY3Rpb24oaykge1xuICAgICAgdmFyIGJsYWNrcyA9IFsnZnVuY3R5cGUnLCAnZnVuY0lkJywgJ3NwbS1jbnQnLCAnc3BtLXVybCcsICdzcG0tcHJlJywgJ19pc2g1JywgJ19pc19nMnUnLCAnX2g1dXJsJywgJ2NuYScsICdpc29uZXBhZ2UnLCAnbHZlcicsICdqc3ZlciddO1xuICAgICAgaWYodXRpbEFycmF5LmluZGV4b2YoYmxhY2tzLCBrKSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIOW3sue7j+WSjFVU57qm5a6a5aW977yM5Lyg6YCS57uZVVTnmoTkuoznuqflj4LmlbDlj6rmlK/mjIHln7rmnKzmlbDmja7nsbvlnovvvIzkuI3mlK/mjIHlr7nosaFcbiAgICB2YWxJc0F2YWlsYWJsZTogZnVuY3Rpb24odikge1xuICAgICAgaWYgKHR5cGVvZiB2ID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgdXBVdERhdGE6IGZ1bmN0aW9uKGQsIG9iaikge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIGQgPSBkID8gZCA6IHt9O1xuICAgICAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKHZhciBrIGluIG9iaikge1xuICAgICAgICAgIHZhciB2ID0gb2JqW2tdO1xuICAgICAgICAgIGlmKGsgJiYgX3NlbGYudmFsSXNBdmFpbGFibGUodikgJiYgX3NlbGYua2V5SXNBdmFpbGFibGUoaykpIHtcbiAgICAgICAgICAgIGRba10gPSB2OyAvLyDoh6rlrprkuYnlj4LmlbDnu5/nu5/pnIDopoHliqBcIl9cIuWJjee8gFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGQ7XG4gICAgfSxcblxuICAgIGdldFRvVXREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjb250ZXh0LndoYXRfdG9fc2VuZCB8fCB7fTtcbiAgICAgIHZhciBsb2dkYXRhID0gd2hhdF90b19zZW5kLmxvZ2RhdGEgfHwge307XG4gICAgICB2YXIgc2RrX2luZm8gPSBsb2dkYXRhLnNka19pbmZvIHx8IHt9O1xuICAgICAgdmFyIGV0YWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5ldGFnIHx8IHt9O1xuXG4gICAgICB2YXIgZXhwYXJhbXMgPSBjbGVhblBhcmFtc0ZvclRvVVQoY2xlYW5QYXJhbXMobG9nZGF0YS5leHBhcmFtcyB8fCBbXSkpO1xuICAgICAgZXhwYXJhbXMgPSB1dGlsLmFycjJvYmooZXhwYXJhbXMpO1xuICAgICAgLy8gdmFyIHVzZXJkYXRhID0gY2xlYW5QYXJhbXNGb3JUb1VUKGNsZWFuUGFyYW1zKGNvbnRleHQudXNlcmRhdGEgfHwgW10pKTtcbiAgICAgIC8vIHVzZXJkYXRhID0gdXRpbC5hcnIyb2JqKHVzZXJkYXRhKTtcbiAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGE7XG4gICAgICB2YXIgcGFnZXVybCA9IGxvY2F0aW9uLmhyZWY7XG5cbiAgICAgIHZhciBkID0ge1xuICAgICAgfTtcbiAgICAgIC8vIC0tLS0yMDE3MDMyNyBhcGx1c+aWsOWinumcgOaxgiBA5Lmd6ZShKDAyNzcxNylcbiAgICAgIC8vIDEuwqBhcGx1c+WinuWKoCBzY23jgIEgaXNzYj0xKOWmguaenHVybOWQjumdouaciXBvaW505Y+C5pWw77yJ44CBIHBnMXN0ZXBrIOS4ieS4quWPguaVsO+8jOi/meS4ieS4quWPguaVsOmDvea2ieWPilVSTOWPguaVsOino+aekFxuICAgICAgdmFyIHNjbSA9IHV0aWxVcmwuZ2V0UGFyYW1Gcm9tVXJsKCdzY20nLCBwYWdldXJsKSB8fCAnJztcbiAgICAgIGlmIChzY20pIHtcbiAgICAgICAgZFsnc2NtJ10gPSBzY207XG4gICAgICB9XG4gICAgICB2YXIgcGcxc3RlcGsgPSB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgncGcxc3RlcGsnLCBwYWdldXJsKSB8fCAnJztcbiAgICAgIGlmIChwZzFzdGVwaykge1xuICAgICAgICBkWydwZzFzdGVwayddID0gcGcxc3RlcGs7XG4gICAgICB9XG4gICAgICB2YXIgcG9pbnQgPSB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgncG9pbnQnLCBwYWdldXJsKSB8fCAnJztcbiAgICAgIGlmIChwb2ludCkge1xuICAgICAgICBkWydpc3NiJ10gPSAxO1xuICAgICAgfVxuICAgICAgaWYgKHNka19pbmZvICYmIHNka19pbmZvLm1hbnNuZGxvZykge1xuICAgICAgICBkLm1hbnNuZGxvZyA9IHNka19pbmZvLm1hbnNuZGxvZztcbiAgICAgIH1cblxuICAgICAgZCA9IHRoaXMudXBVdERhdGEoZCwgZXhwYXJhbXMpOyAgLy8gYmVhY29u5Z+L54K555qE5bqU55So5Y+C5pWwXG4gICAgICBkID0gdGhpcy51cFV0RGF0YShkLCBsb2dkYXRhLmdva2V5KTtcbiAgICAgIGQgPSB0aGlzLnVwVXREYXRhKGQsIHVzZXJkYXRhKTsgIC8vIOW6lOeUqOaWuemAmui/h3NlbmRQVuaOpeWPo+S8oOmAkueahHB25Y+C5pWwXG5cbiAgICAgIC8vIOWPguaVsOexu+Wei+S4gO+8mumcgOimgVVU54m55q6K5aSE55CG55qE77yIZnVuY3R5cGXvvIxmdW5jSWTvvIx1cmzvvIxsb2drZXnvvIlcbiAgICAgIGQuZnVuY3R5cGUgPSAncGFnZSc7XG4gICAgICBkLmZ1bmNJZCA9ICcyMDAxJztcbiAgICAgIGlmIChhcGx1cyAmJiBhcGx1cy5nbG9iYWxDb25maWcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gICAgICAgIGQudXJsID0gKGxvY2F0aW9uLnByb3RvY29sIHx8ICdodHRwczonKSArICcvLycgKyBsb2NhdGlvbi5ob3N0ICsgbG9jYXRpb24ucGF0aG5hbWU7IC8vIGxvY2F0aW9uLm9yaWdpbiArIGxvY2F0aW9uLnBhdGhuYW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZC51cmwgPSBsb2NhdGlvbi5ocmVmO1xuICAgICAgfVxuICAgICAgaWYoY29uZmlnLnBhZ2VOYW1lKXtcbiAgICAgICAgZC51cmwgPSBjb25maWcucGFnZU5hbWU7XG4gICAgICB9XG4gICAgICAvLyDlj4LmlbDnsbvlnovkuozvvJrkuI3pnIDopoFVVOeJueauiuWkhOeQhueahO+8iOWFtuS7lmFwbHVz6Ieq5a6a5LmJa2V5XFx2YWx1Ze+8iWtleemcgOimgeS4i+WIkue6v+W8gOWktFxuICAgICAgZC5faXNoNSA9ICcxJzsgICAgLy8gVVTlv4XpobvnmoTlsZ7mgKfvvIzlhpnmrbvljbPlj69cbiAgICAgIGQuX2g1dXJsID0gcGFnZXVybDtcbiAgICAgIGQuX3RvVVQgPSAyO1xuICAgICAgZC5fYnJpZGdlTmFtZSA9ICdXaW5kVmFuZSc7XG4gICAgICBkLl9icmlkZ2VWZXJzaW9uID0gJzMuMC43JztcblxuICAgICAgLy8g5Y+C5pWw57G75Z6L5LiJ77ya5LiN6ZyA6KaBVVTnibnmrorlpITnkIbvvIzkuJRrZXnml6DkuIvliJLnur/liY3nvIBcbiAgICAgIGlmIChzcG0uc3BtX2NudCkgZFthcGx1c1N0YXRpYy5TUE1fQ05UXSA9IHNwbS5zcG1fY250IHx8ICcnO1xuICAgICAgaWYgKHNwbS5zcG1fdXJsKSBkW2FwbHVzU3RhdGljLlNQTV9VUkxdID0gc3BtLnNwbV91cmwgfHwgJyc7XG4gICAgICBpZiAoc3BtLnNwbV9wcmUpIGRbYXBsdXNTdGF0aWMuU1BNX1BSRV0gPSBzcG0uc3BtX3ByZSB8fCAnJztcblxuICAgICAgZC5jbmEgPSBldGFnLmNuYSB8fCBjb29raWUuZ2V0Q29va2llQ25hKCdjbmEnKTtcbiAgICAgIGQubHZlciA9IHNka19pbmZvLmx2ZXI7XG4gICAgICBkLmpzdmVyID0gc2RrX2luZm8uanN2ZXI7XG4gICAgICBkLnB2ZXIgPSAnMS4wLjAnO1xuICAgICAgZC5pc29uZXBhZ2UgPSAtMTtcbiAgICAgIHZhciB1dHBhcmFtQ250ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXV0cGFyYW0nKTtcbiAgICAgIGlmICh1dHBhcmFtQ250KSB7XG4gICAgICAgIGRbJ3V0cGFyYW0tY250J10gPSBKU09OLnN0cmluZ2lmeSh1dHBhcmFtQ250KTtcbiAgICAgIH1cbiAgICAgIGQuX2lzX2cydV8gPSAxO1xuICAgICAgZC5fc2xvZyA9IDE7XG4gICAgICByZXR1cm4gZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcHblj5HpgIHliLDlk6rph4zljrtcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGMud2hhdF90b19zZW5kIHx8IHt9O1xuICAgICAgd2hhdF90b19zZW5kLnB2ZGF0YVRvVXQgPSB0aGlzLmdldFRvVXREYXRhKCk7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQgPSB3aGF0X3RvX3NlbmQ7XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91dDIuanNcbi8vIG1vZHVsZSBpZCA9IDEwNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogd2hhdF90b19zZW5kcHZfdW0ybmF0aXZlLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiDkvZznlKjvvJog5qGl5o6l5YaF5bWM5oOF5Ya15LiL77yMdW3ml6Xlv5fljY/orq7lj5HpgIFQVuaXpeW/l+e7mW5hdGl2ZVxuICogXG4gKiBkZXBzOiDml6BcbiAqIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqIFxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS91dGlscycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4vLyB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlsUGFnZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUGFnZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIGdldFRvTmF0aXZlRGF0YTogZnVuY3Rpb24oKSB7XG4gICAgICAvLyB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgLy8gdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcbiAgICAgIC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgdXNlcmRhdGEgPSB1dGlsRGFzaC5jbG9uZURlZXAoY29udGV4dC51c2VyZGF0YSkgfHwge307XG4gICAgICB2YXIgd2hhdF90b19zZW5kID0gY29udGV4dC53aGF0X3RvX3NlbmQgfHwge307XG4gICAgICB2YXIgbG9nZGF0YSA9IHdoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuICAgICAgdmFyIHNka19pbmZvID0gbG9nZGF0YS5zZGtfaW5mbyB8fCB7fTtcbiAgICAgIHZhciBldGFnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuZXRhZyB8fCB7fTtcblxuICAgICAgdmFyIHJlc3VsdCA9IHt9ICxzZGtBcmdzID0ge30sIGN1c3RvbUFyZ3MgPSB7fTtcbiAgICAgIHNka0FyZ3MuY25hID0gZXRhZy5jbmE7XG4gICAgICBzZGtBcmdzLmx2ZXIgPSBzZGtfaW5mby5sdmVyO1xuICAgICAgc2RrQXJncy5qc3ZlciA9IHNka19pbmZvLmpzdmVyO1xuICAgICAgc2RrQXJncy5pZCA9IGFwbHVzU3RhdGljLlBBR0VfU1RBUlQ7XG4gICAgICBzZGtBcmdzLnRzID0gRGF0ZS5ub3coKTsgLy/lkozoo7h3ZWLkvqfkvJrmnInlt67lvIJcbiAgICAgIHNka0FyZ3MuciA9IGxvZ2RhdGEuYXJnMSB8fCBsb2dkYXRhLmxvZ2tleSB8fCAnLSc7XG4gICAgICBzZGtBcmdzLmlzX2g1ID0gJzEnO1xuXG4gICAgICBpZiAodXNlcmRhdGEuaGFzT3duUHJvcGVydHkoJ2F1dG9zZW5kJykgfHwgbG9nZGF0YS5pc19hdXRvIHx8IGxvZ2RhdGEudHJhY2tfdHlwZSA9PT0gJzEnKSB7XG4gICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAwO1xuICAgICAgfVxuICAgICAgc2RrQXJncy50cmFja190eXBlID0gc2RrQXJncy5pc19hdXRvICsgJyc7XG4gICAgICBcbiAgICAgIGN1c3RvbUFyZ3MgPSB1dGlsRGFzaC5jbG9uZURlZXAodXRpbHMuZGVsZXRlSW5mbyh1c2VyZGF0YSwgW1xuICAgICAgICAnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3NyY19wb3NfaWQnLFxuICAgICAgICAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaycsICdfYWJmcGMnLCAnY25hJ1xuICAgICAgXSkpO1xuXG4gICAgICBpZiAoY3VzdG9tQXJncy5kdXJhdGlvbikge1xuICAgICAgICBzZGtBcmdzLmR1cmF0aW9uID0gY3VzdG9tQXJncy5kdXJhdGlvbjtcbiAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3MuZHVyYXRpb247XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXN0b21BcmdzLnBhZ2Vfc3RhcnQpIHtcbiAgICAgICAgc2RrQXJncy5wYWdlX3N0YXJ0ID0gY3VzdG9tQXJncy5wYWdlX3N0YXJ0O1xuICAgICAgICBkZWxldGUgY3VzdG9tQXJncy5wYWdlX3N0YXJ0O1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobG9nZGF0YS51cmwpIHtcbiAgICAgICAgc2RrQXJncy5wYWdlX25hbWUgPSB1dGlsUGFnZS5nZXRQYWdlTmFtZShsb2NhdGlvbi5wYXRobmFtZSwgY3VzdG9tQXJncyk7IFxuICAgICAgICAvLyBhcGx1cy5nZXRQYWdlTmFtZSgpIHx8IGN1c3RvbUFyZ3Muc3BtQiB8fCBjdXN0b21BcmdzLnBhZ2VfbmFtZSB8fCBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgICAgIHNka0FyZ3MudXJsID0gbG9nZGF0YS51cmwgfHwgJy0nO1xuICAgICAgICBzZGtBcmdzWydzcG0tY250J10gPSBlbmNvZGVVUklDb21wb25lbnQoc2RrQXJncy5wYWdlX25hbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAobG9nZGF0YS5wcmUpIHtcbiAgICAgICAgc2RrQXJncy5yZWZfdXJsID0gbG9nZGF0YS5wcmUgfHwgJy0nO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiAoY3VzdG9tQXJncy5wYWdlX25hbWUpIHtcbiAgICAgIC8vICAgZGVsZXRlIGN1c3RvbUFyZ3MucGFnZV9uYW1lO1xuICAgICAgLy8gfVxuICAgICAgaWYgKGN1c3RvbUFyZ3MudHMpIHtcbiAgICAgICAgLy8g5Yig6ZmkbmF0aXZl5L+d55WZ5a2X5q61dHNcbiAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3MudHM7XG4gICAgICB9XG4gICAgICByZXN1bHQuc2RrQXJncyA9IHV0aWxEYXNoLmNsb25lRGVlcChzZGtBcmdzKTtcbiAgICAgIHJlc3VsdC5jdXNwID0gY3VzdG9tQXJncztcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGMud2hhdF90b19zZW5kIHx8IHt9O1xuICAgICAgd2hhdF90b19zZW5kLnB2ZGF0YVRvVW1OYXRpdmUgPSB0aGlzLmdldFRvTmF0aXZlRGF0YSgpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdW0ybmF0aXZlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9jYW5fdG9fc2VuZHB2LmpzXG4gKlxuICog5L2c55So77ya5Yik5patcHbog73lkKblj5HpgIHvvIzkuI3lj6/ku6Xlj5HpgIHliJnkvJrkuK3mlq3lkI7nu63miYDmnInkuK3pl7Tku7bmiafooYxcbiAqIGRlcHM6IOaXoFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxFdmVudExpbWl0ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudExpbWl0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyB9LFxuXG4gICAgLyoqXG4gICAgICog5piv5ZCm6KaB5omn6KGMc2VuZHB255qE5YWl5Y+jXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIHZhciBjYW5fdG9fc2VuZHB2ID0gdGhpcy5vcHRpb25zLmNvbnRleHQuY2FuX3RvX3NlbmRwdiB8fCB7fTtcbiAgICAgIHZhciBjb3VudCA9IF8kLnNlbmRfcHZfY291bnQgfHwgMDtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgaWYgKChjb25maWcuaXNfYXV0byAmJiBjb3VudCA+IDApIHx8ICF1dGlsRXZlbnRMaW1pdC5jYW5TZW5kUFYoY29uZmlnLnRyYWNrX3R5cGUpKSB7XG4gICAgICAgIHJldHVybiAnZG9uZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYW5fdG9fc2VuZHB2LmZsYWcgPSAnWUVTJztcbiAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQuY2FuX3RvX3NlbmRwdiA9IGNhbl90b19zZW5kcHY7XG4gICAgICAgIF8kLnNlbmRfcHZfY291bnQgPSArK2NvdW50O1xuICAgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvY2FuX3RvX3NlbmRwdi5qc1xuLy8gbW9kdWxlIGlkID0gMTA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiB1dGlsRXZlbnRMaW1pdC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxSZW1vdGVDZmcgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFJlbW90ZUNmZycpO1xudmFyIHV0aWxMb2NhbENmZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9jYWxDb25maWcnKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciBhcGx1c1V0aWxzID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcblxuZnVuY3Rpb24gbmVlZExpbWl0U2VuZChsb2drZXkpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICB2YXIgZXZlbnRMaW1pdFJhdGVzID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRVZFTlRfTElNSVRSQVRFUyk7XG4gIGlmIChldmVudExpbWl0UmF0ZXMgJiYgZXZlbnRMaW1pdFJhdGVzLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgZXZlbnQgPSB1dGlsQXJyYXkuZmluZChldmVudExpbWl0UmF0ZXMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLmV2ZW50SWQgPT09IGxvZ2tleTtcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIHZhciByYW5kb20gPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoxMDAwKTtcbiAgICAgIGlmIChyYW5kb20gPCAoZXZlbnQuc2FtcGxpbmdSYXRlICogMTAwMCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuZnVuY3Rpb24gaXNVTSgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBpc1VNID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU07XG4gIHJldHVybiAhIWlzVU07XG59O1xuXG5leHBvcnRzLmNhblRvU2VuZEhKTEogPSBmdW5jdGlvbihnb2tleSwgbG9na2V5KSB7XG4gIHZhciBkZXZpY2VTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldERldmljZVN0YXR1cygpO1xuICBpZiAoIWRldmljZVN0YXR1cykge1xuICAgIHRyeSB7XG4gICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgICBpZiAodXRpbERhc2guaXNFbXB0eU9iamVjdChjdHgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9TVEFSVCB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9FTkQ7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7fVxuICB9XG5cbiAgLy8g5aaC5p6c5YWo5Z+L54K55YWz6ZetIOaIluiAhSDlhajln4vngrnkuovku7blhbPpl63ph4fpm4bvvIzkuI3lj5HpgIHkuovku7ZcbiAgdmFyIHJlbW90ZUF1dG90cmFja1N0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0QXV0b1RyYWNrU3RhdHVzKCk7XG4gIHZhciBhdXRvZXZlbnRTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldEF1dG9FdmVudFN0YXR1cygpO1xuICAvLyBA5paH5b+DIFxuICB2YXIgbG9jYWxBdXRvdHJhY2tFbmFibGVkID0gdXRpbExvY2FsQ2ZnLmdldEF1dG9UcmFja1N0YXR1cygpO1xuXG4gIHZhciBwYXJhbXMgPSB7fTtcbiAgaWYgKHR5cGVvZiBnb2tleSA9PT0gJ3N0cmluZycpIHtcbiAgICBwYXJhbXMgPSBhcGx1c1V0aWxzLmFycjJvYmooYXBsdXNVdGlscy5wYXJhbTJhcnIoZ29rZXkpKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJhbXMgPSBnb2tleTtcbiAgfVxuXG4gIGlmIChwYXJhbXMuYXV0b19lbGVtZW50KSB7XG4gICAgaWYgKGF1dG9ldmVudFN0YXR1cyA9PT0gMiB8fCByZW1vdGVBdXRvdHJhY2tTdGF0dXMgPT09IDIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKCFyZW1vdGVBdXRvdHJhY2tTdGF0dXMgJiYgIWxvY2FsQXV0b3RyYWNrRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmICghbmVlZExpbWl0U2VuZChsb2drZXkpKSB7XG4gICAgcmV0dXJuO1xuICB9ICBcbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbmV4cG9ydHMuY2FuU2VuZFBWID0gZnVuY3Rpb24odHJhY2tfdHlwZSkge1xuICBpZiAoIWlzVU0oKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IFxuICAvL+iuvuWkh+W8gOWFsyBcbiAgdmFyIGRldmljZVN0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0RGV2aWNlU3RhdHVzKCk7XG4gIC8vIOi/nOeoi+WFqOWfi+eCuSDoh6rliqhwdiDlvIDlhbNcbiAgdmFyIGF1dG9wdlN0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0QXV0b1BhZ2VTdGF0dXMoKTtcbiAgLy8g5pys5Zyw5YWo5Z+L54K56YWN572uIOiHquWKqHB2IOW8gOWFs1xuICB2YXIgbG9jYWxBdXRvUHZEaXNhYmxlZCA9IHV0aWxMb2NhbENmZy5sb2NhbEF1dG9QVkRpc2FibGVkKCk7XG4gIFxuICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgaWYgKCFkZXZpY2VTdGF0dXMpIHtcbiAgICByZXN1bHQgPSBmYWxzZTtcbiAgfSBlbHNlIGlmICh0cmFja190eXBlID09PSAnMScpe1xuICAgIHJldHVybiAhKGF1dG9wdlN0YXR1cyA9PT0gMiB8fCAoIWF1dG9wdlN0YXR1cyAmJiBsb2NhbEF1dG9QdkRpc2FibGVkKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEV2ZW50TGltaXQuanNcbi8vIG1vZHVsZSBpZCA9IDEwN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbExvY2FsQ29uZmlnLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxuLyoqXG4gKiDlhajln4vngrnmnKzlnLDphY3nva4g6K+75Y+WXG4gKiDlj5blgLwg5Y+q5pyJIHRydWUgb3IgZmFsc2VcbiovXG5cbmV4cG9ydHMubG9jYWxBdXRvRXZlbnREaXNhYmxlZCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgcmV0dXJuICEhYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPRVZFTlQpOyBcbn07XG5cblxuZXhwb3J0cy5sb2NhbEF1dG9QVkRpc2FibGVkID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICByZXR1cm4gISFhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9QVikgfHwgISEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSA9PT0gJ01BTicpO1xufTtcblxuZXhwb3J0cy5nZXRBdXRvVHJhY2tTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHJldHVybiAhIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19FTkFCTEVEKTtcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxMb2NhbENvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gMTA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi9hZnRlcl9wdi5qc1xuICpcbiAqIOS9nOeUqO+8mnB25Y+R6YCB5a6M5q+V77yM5YiG5Y+R5LiA5Liq5a6M5oiQ5LqL5Lu2XG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvLyAvLyDliJ3lp4vljJbmqKHlnZdcbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6NcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ3B2X2NvbnRleHQnLCBjKTtcbiAgICAgIC8vIHB25Y+R6YCB5a6M5q+V77yM5YiG5Y+R5LiA5Liq5a6M5oiQ5LqL5Lu2XG4gICAgICB2YXIgc3BtX2FiID0gYXBsdXMuc3BtX2FiIHx8IFtdO1xuICAgICAgdmFyIF9zcG1hYiA9IHNwbV9hYi5qb2luKCcuJyk7XG4gICAgICB2YXIgX2NvdW50ID0gXyQuc2VuZF9wdl9jb3VudDtcblxuICAgICAgdmFyIHB1Yk9iaiA9IHtcbiAgICAgICAgY25hOiBjLmV0YWcgPyBjLmV0YWcuY25hIDogJycsXG4gICAgICAgIGNvdW50OiBfY291bnQsXG4gICAgICAgIHNwbWFiX3ByZTogYXBsdXMuc3BtYWJfcHJlXG4gICAgICB9O1xuICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhbJ3NlbmRQVicsICdjb21wbGV0ZScsIF9zcG1hYiwgcHViT2JqXSk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKFsnc2VuZFBWJywgJ2NvbXBsZXRlJywgX3NwbWFiLCBwdWJPYmpdKTtcbiAgICAgIHJldHVybjtcbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L2FmdGVyX3B2LmpzXG4vLyBtb2R1bGUgaWQgPSAxMDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9faGpsal91c2VyZGF0YS5qc1xuICpcbiAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsGxvZ2RhdGHlkI7pnaLvvJpsb2dkYXRhLmNvbmNhdCh1c2VyZGF0YSlcbiAqICBkZXBzOiB3aGF0X3RvX2hqbGpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvLyAvKipcbiAgICAvLyAgKiDliJ3lp4vljJbmqKHlnZdcbiAgICAvLyAgKi9cbiAgICAvLyBpbml0OiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyB9LFxuXG4gICAgLyoqXG4gICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG4gICAgICpcbiAgICAgKiByZWNvcmQobG9na2V5LCBnbWtleSwgZ29rZXkpIEFQSeS4reeahGdva2V5XG4gICAgICogbWV0YTphcGx1cy1leGluZm/kv6Hmga8sIG1ldGE6YXBsdXMtZXhkYXRh5L+h5oGvXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG4gICAgICovXG4gICAgZ2V0VXNlckRhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG4gICAgICB2YXIgZ29rZXkgPSBjLndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuXG4gICAgICBnb2tleSA9IHV0aWxEYXNoLmFzc2lnbihnb2tleSwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbGRhdGEnKSk7XG4gICAgICBnb2tleSA9IHV0aWxEYXNoLmFzc2lnbihnb2tleSwgZm9ybWF0LnBhcmFtMm9iaih1c2VyZGF0YS5nb2tleSkpO1xuICAgICAgdmFyIGFwbHVzRXhpbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4aW5mbycpO1xuICAgICAgaWYgKGFwbHVzRXhpbmZvKSB7XG4gICAgICAgIGdva2V5ID0gdXRpbERhc2guYXNzaWduKGdva2V5LCBmb3JtYXQucGFyYW0yb2JqKGFwbHVzRXhpbmZvKSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBleGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJyk7XG4gICAgICBpZiAoaXNBcnJheShleGRhdGEpKSB7XG4gICAgICAgIGV4ZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgIGdva2V5ID0gdXRpbERhc2guYXNzaWduKGdva2V5LCBpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnb2tleSA9IHV0aWxEYXNoLmFzc2lnbihnb2tleSwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnb2tleTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG4gICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleSA9IHRoaXMuZ2V0VXNlckRhdGEoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDExMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvd2hhdF90b19oamxqX3VzZXJkYXRhLmpzXG4gKlxuICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG4gKiAgICAgICAgICAg5bm25bCG5pS26ZuG5Yiw55qE6Ieq5a6a5LmJ5Y+C5pWw5Lul5pWw57uE5qC85byP6L+95Yqg5YiwbG9nZGF0YeWQjumdou+8mmxvZ2RhdGEuY29uY2F0KHVzZXJkYXRhKVxuICogIGRlcHM6IHdoYXRfdG9faGpsalxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsRXhpbmZvID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFeGluZm8nKTtcbnZhciBnZXRFeFBhcmFtc09iaiA9IHJlcXVpcmUoJy4uL2dldEV4cGFyYW1zT2JqJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvLyBnZXRDb29raWVVc2VySW5mbzogZnVuY3Rpb24gKCkge1xuICAgIC8vICAgdmFyIGQgPSB7fTtcbiAgICAvLyAgIC8vIOaXpeW/l+aUtumbhuW3peWPt1xuICAgIC8vICAgdmFyIHduID0gY29va2llLmdldENvb2tpZSgnd29ya25vJykgfHwgY29va2llLmdldENvb2tpZSgnZW1wbElkJyk7XG4gICAgLy8gICBpZiAod24pIHtcbiAgICAvLyAgICAgZC53b3Jrbm8gPSB3bjtcbiAgICAvLyAgIH1cbiAgICAvLyAgIHZhciBobmcgPSBjb29raWUuZ2V0SG5nKCk7XG4gICAgLy8gICBpZiAoaG5nKSB7XG4gICAgLy8gICAgIGQuX2huZyA9IGNvb2tpZS5nZXRIbmcoKTtcbiAgICAvLyAgIH1cbiAgICAvLyAgIHJldHVybiBkO1xuICAgIC8vIH0sXG5cbiAgICBnZXRFeFBhcmFtc0luZm86IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBlID0gdXRpbEV4aW5mby5nZXRFeFBhcmFtcygpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEuZXhwYXJhbXMgPSBlO1xuICAgICAgcmV0dXJuIGdldEV4UGFyYW1zT2JqKGUpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6NcbiAgICAgKiDov5Tlm54nZG9uZSfnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gJ2RvbmUnIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBnb2tleSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24odGhpcy5nZXRFeFBhcmFtc0luZm8oKSwgZ29rZXkpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEuZ29rZXkgPSBnb2tleTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdXNlcmRhdGFfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfYi9jb25maWcvcGx1Z2lucy93aGF0X3RvX2hqbGpfdXQyLmpzXG4gKlxuICog5L2c55So77ya5pel5b+X5Y+R6YCB6IezVVTlj4LmlbDmlLbpm4bvvJpcbiAqXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIOiOt+WPllVU5pel5b+X6ZyA6KaB55qE5Y+C5pWwXG4gICAgICog5Y+C5pWw57G75Z6L5LiA77ya6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIhmdW5jdHlwZe+8jGZ1bmNJZO+8jHVybO+8jGxvZ2tlee+8iVxuICAgICAqIOWPguaVsOexu+Wei+S6jO+8muS4jemcgOimgVVU54m55q6K5aSE55CG55qE77yI5YW25LuWYXBsdXPoh6rlrprkuYlrZXlcXHZhbHVl77yJa2V56ZyA6KaB5LiL5YiS57q/5byA5aS0XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHtcbiAgICAgKiAgIGZ1bmN0eXBlOiBcImN0cmxcIixcbiAgICAgKiAgIGZ1bmNJZDogXCIyMTAxXCIsXG4gICAgICogICB1cmw6IFwiaHR0cHM6Ly9oNS5tLnRhb2Jhby5jb20vYnV5L3FpbmdkYW4vbGlzdC5odG1sXCIsXG4gICAgICogICBsb2drZXk6IFwiL3FpbmdkYW4uMi4zXCIsXG4gICAgICpcbiAgICAgKiAgIF9zcG1jbnQ6IFwiYTMxNDUuODE4MzczNy4wLjBcIixcbiAgICAgKiAgIF9zcG11cmw6IFwiYTAuYjAuYzAuZDBcIixcbiAgICAgKiAgIF9oNXVybDogXCIvL2g1Lm0udGFvYmFvLmNvbS9idXkvcWluZ2Rhbi9saXN0Lmh0bWw/c2NtPTIwMTkuMS40LjMxMSZpdGVtSWQ9NTI3MzUxNDYxNDU2LDUyNzAzODU1NTc1NiZzcG09YTIxNDEuMS53aWRnZXQuNCZsb2NhdGU9d2lkZ2V0LTRcIixcbiAgICAgKiAgIF9jbmE6IFwiMTIzNDQ0NjU0N1wiLFxuICAgICAqICAgX290aGVyczogXCJzb21ldmFsdWVcIiAsXG4gICAgICogICBfaXNoNTogXCIxXCIgIC8vIFVU5b+F6aG755qE5bGe5oCn77yM5YaZ5q275Y2z5Y+vXG4gICAgICogICBfaXNfZzJ1XzogXCIxXCIgLy8g5Y2V5Y+R5pe26ZyA6KaBXG4gICAgICogfVxuICAgICAqL1xuICAgIGdldFRvVXREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuICAgICAgdmFyIGV0YWcgPSBjb250ZXh0LmV0YWcgfHwge307XG4gICAgICB2YXIgd2hhdF90b19zZW5kID0gY29udGV4dC53aGF0X3RvX3NlbmQgfHwge307XG4gICAgICB2YXIgbG9nZGF0YSA9IHdoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuICAgICAgdmFyIHNka19pbmZvID0gbG9nZGF0YS5zZGtfaW5mbyB8fCB7fTtcbiAgICAgIHZhciBnb2tleSA9IGxvZ2RhdGEuZ29rZXkgfHwge307XG5cbiAgICAgIHZhciBnb2tleUFyciA9IFtdO1xuICAgICAgdmFyIGdva2V5U3RyID0gJyc7XG4gICAgICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG4gICAgICAgIGlmIChbYXBsdXNTdGF0aWMuU1BNX0NOVCwgYXBsdXNTdGF0aWMuU1BNX1VSTCwgYXBsdXNTdGF0aWMuU1BNX1BSRV0uaW5kZXhPZihrKSA9PT0gLTEpIHtcbiAgICAgICAgICB2YXIgX3RtcFZhbHVlID0gZ29rZXlba107XG4gICAgICAgICAgaWYgKGdva2V5W2tdID09PSAndW5kZWZpbmVkJyB8fCBnb2tleVtrXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdG1wVmFsdWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgICAgZ29rZXlBcnIucHVzaChrICsgJz0nICsgX3RtcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGdva2V5QXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZ29rZXlTdHIgPSBnb2tleUFyci5qb2luKCcmJyk7XG4gICAgICB9XG4gICAgICB2YXIgcGFnZXVybCA9IGxvY2F0aW9uLmhyZWY7XG4gICAgICB2YXIgZCA9IHt9O1xuICAgICAgLy8g5Y+C5pWw57G75Z6L5LiA77ya6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIhmdW5jdHlwZe+8jGZ1bmNJZO+8jHVybO+8jGxvZ2tlee+8iVxuICAgICAgZC5mdW5jdHlwZSA9ICdjdHJsJztcbiAgICAgIGQuZnVuY0lkID0gbG9nZGF0YS5ldmVudF9jb2RlO1xuICAgICAgaWYgKGFwbHVzICYmIGFwbHVzLmdsb2JhbENvbmZpZyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgZC51cmwgPSAobG9jYXRpb24ucHJvdG9jb2wgfHwgJ2h0dHBzOicpICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGQudXJsID0gbG9jYXRpb24uaHJlZjtcbiAgICAgIH1cbiAgICAgIGlmKGdva2V5LnBhZ2VOYW1lKXtcbiAgICAgICAgZC51cmwgPSBnb2tleS5wYWdlTmFtZTtcbiAgICAgIH1cbiAgICAgIGQubG9na2V5ID0gbG9nZGF0YS5sb2drZXk7XG4gICAgICBkLmdva2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGdva2V5U3RyKTtcbiAgICAgIGQuZ21rZXkgPSBsb2dkYXRhLmdta2V5O1xuXG4gICAgICAvLyDlj4LmlbDnsbvlnovkuozvvJrkuI3pnIDopoFVVOeJueauiuWkhOeQhueahO+8iOWFtuS7lmFwbHVz6Ieq5a6a5LmJa2V5XFx2YWx1Ze+8iWtleemcgOimgeS4i+WIkue6v+W8gOWktFxuICAgICAgZC5faXNoNSA9ICcxJztcbiAgICAgIGQuX2g1dXJsID0gcGFnZXVybDtcbiAgICAgIGQuX2lzX2cydV8gPSAxO1xuICAgICAgZC5fc2xvZyA9IDE7XG4gICAgICBkLl90b1VUID0gMjtcbiAgICAgIGQuX2JyaWRnZU5hbWUgPSAnV2luZFZhbmUnO1xuICAgICAgZC5fYnJpZGdlVmVyc2lvbiA9ICczLjAuNyc7XG5cbiAgICAgIC8vIOWPguaVsOexu+Wei+S4ie+8muS4jemcgOimgVVU54m55q6K5aSE55CG77yM5LiUa2V55peg5LiL5YiS57q/5YmN57yAXG4gICAgICBpZiAoc3BtLnNwbV9jbnQpIGRbYXBsdXNTdGF0aWMuU1BNX0NOVF0gPSBzcG0uc3BtX2NudCB8fCAnJztcbiAgICAgIGlmIChzcG0uc3BtX3VybCkgZFthcGx1c1N0YXRpYy5TUE1fVVJMXSA9IHNwbS5zcG1fdXJsIHx8ICcnO1xuICAgICAgaWYgKHNwbS5zcG1fcHJlKSBkW2FwbHVzU3RhdGljLlNQTV9QUkVdID0gc3BtLnNwbV9wcmUgfHwgJyc7XG5cbiAgICAgIGQuY25hID0gZXRhZy5jbmE7XG4gICAgICBkLmx2ZXIgPSBzZGtfaW5mby5sdmVyO1xuICAgICAgZC5qc3ZlciA9IHNka19pbmZvLmpzdmVyO1xuICAgICAgLy8g5Y+v6KeG5YyW5Luk566t5qCH6K+GYXV0b3NlbmRcbiAgICAgIGlmICh1c2VyZGF0YS5oYXNPd25Qcm9wZXJ0eSgnYXV0b3NlbmQnKSkge1xuICAgICAgICBkLmF1dG9zZW5kID0gdXNlcmRhdGEuYXV0b3NlbmQ7XG4gICAgICB9XG4gICAgICB2YXIgdXRwYXJhbUNudCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy11dHBhcmFtJyk7XG4gICAgICBpZiAodXRwYXJhbUNudCkge1xuICAgICAgICBkWyd1dHBhcmFtLWNudCddID0gSlNPTi5zdHJpbmdpZnkodXRwYXJhbUNudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjLndoYXRfdG9fc2VuZCB8fCB7fTtcbiAgICAgIHdoYXRfdG9fc2VuZC5wdmRhdGFUb1V0ID0gdGhpcy5nZXRUb1V0RGF0YSgpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91dDIuanNcbi8vIG1vZHVsZSBpZCA9IDExMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogd2hhdF90b19oamxqXzJuYXRpdmUuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogXG4gKiDkvZznlKjvvJog5qGl5o6l5YaF5bWM5oOF5Ya15LiL77yMdW3ml6Xlv5fljY/orq7lj5HpgIHpu4Tph5Hku6Tnrq3ml6Xlv5fnu5luYXRpdmVcbiAqIFxuICogZGVwczog5pegXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS91dGlscycpO1xudmFyIGFwbHVzVXRpbHMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xuLy8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsUGFnZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUGFnZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgZ2V0VG9OYXRpdmVEYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGNvbnRleHQud2hhdF90b19zZW5kIHx8IHt9O1xuICAgICAgdmFyIGxvZ2RhdGEgPSB3aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcbiAgICAgIHZhciBzZGtfaW5mbyA9IGxvZ2RhdGEuc2RrX2luZm8gfHwge307XG5cbiAgICAgIHZhciByZXN1bHQgPSB7fSAsc2RrQXJncyA9IHt9LCBjdXN0b21BcmdzID0ge307XG4gICAgICBzZGtBcmdzLmNuYSA9IGV0YWcuY25hO1xuICAgICAgc2RrQXJncy5sdmVyID0gc2RrX2luZm8ubHZlcjtcbiAgICAgIHNka0FyZ3MuanN2ZXIgPSBzZGtfaW5mby5qc3ZlcjtcbiAgICAgIHNka0FyZ3MuaWQgPSB1c2VyZGF0YS5sb2drZXkgfHwgJy0nO1xuICAgICAgc2RrQXJncy50cyA9IERhdGUubm93KCk7IC8v5ZKM6KO4d2Vi5L6n5Lya5pyJ5beu5byCXG4gICAgICBzZGtBcmdzLmlzX2g1ID0gJzEnO1xuICAgICAgLy8gc2RrQXJncy5mdW5jSWQgPSBsb2dkYXRhLmV2ZW50X2NvZGU7IC8vd2h5IGhhcyB0aGlzIGludmFsaWQgcHJvcGVydHkhIVxuICAgICAgLy8gQOmSsOaYrSBmaXgg5YWo5Z+L54K5IOahpeaOpeS6i+S7tuexu+Wei1xuICAgICAgc2RrQXJncy5ldmVudF90eXBlX2lkID0gbG9nZGF0YS5ldmVudF9jb2RlO1xuICAgICAgaWYgKHVzZXJkYXRhLmdva2V5KSB7XG4gICAgICAgIHN3aXRjaCh0eXBlb2YgdXNlcmRhdGEuZ29rZXkpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAhISh1c2VyZGF0YS5nb2tleS5tYXRjaCgnaXNfYXV0bycpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSB1c2VyZGF0YS5nb2tleS5pc19hdXRvO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiBcbiAgICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAwO1xuICAgICAgfVxuICAgICAgc2RrQXJncy50cmFja190eXBlID0gc2RrQXJncy5pc19hdXRvIHx8IDAgKyAnJztcbiAgICAgIGlmICh0eXBlb2YgdXNlcmRhdGEuZ29rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGN1c3RvbUFyZ3MgPSBhcGx1c1V0aWxzLmFycjJvYmooYXBsdXNVdGlscy5wYXJhbTJhcnIodXNlcmRhdGEuZ29rZXkgfHwgJycpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1c3RvbUFyZ3MgPSB1dGlsRGFzaC5jbG9uZURlZXAodXRpbHMuZGVsZXRlSW5mbyh1c2VyZGF0YS5nb2tleSwgW1xuICAgICAgICAgICdfYW5vbnlfaWQnLCAnX2Rldl9pZCcsICdfc2Vzc2lvbl9pZCcsICdfc3JjX3Bvc19pZCcsXG4gICAgICAgICAgJ191c2VyX2lkJywgJ191c2VyX25pY2snXG4gICAgICAgIF0pKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxvZ2RhdGEudXJsKSB7XG4gICAgICAgIHNka0FyZ3MucGFnZV9uYW1lID0gdXRpbFBhZ2UuZ2V0UGFnZU5hbWUobG9jYXRpb24ucGF0aG5hbWUsIGN1c3RvbUFyZ3MpOyBcbiAgICAgICAgLy8gYXBsdXMuZ2V0UGFnZU5hbWUoKSB8fCBjdXN0b21BcmdzLnNwbUIgfHwgY3VzdG9tQXJnc1snZGF0YS1wYWdlbmFtZSddIHx8IGN1c3RvbUFyZ3MucGFnZV9uYW1lIHx8IGxvZ2RhdGEudXJsIHx8ICctJztcbiAgICAgICAgc2RrQXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgICAgIGlmIChzZGtBcmdzLnBhZ2VfbmFtZSAmJiBjdXN0b21BcmdzLnNwbUMpIHtcbiAgICAgICAgICBzZGtBcmdzWydzcG0tY250J10gPSBbZW5jb2RlVVJJQ29tcG9uZW50KHNka0FyZ3MucGFnZV9uYW1lKSwgZW5jb2RlVVJJQ29tcG9uZW50KGN1c3RvbUFyZ3Muc3BtQyksIGVuY29kZVVSSUNvbXBvbmVudChjdXN0b21BcmdzLnNwbUQpXS5maWx0ZXIoZnVuY3Rpb24odil7XG4gICAgICAgICAgICByZXR1cm4gISF2O1xuICAgICAgICAgIH0pLmpvaW4oJy4nKTtcbiAgICAgICAgICBkZWxldGUgY3VzdG9tQXJncy5zcG1DO1xuICAgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnNwbUI7XG4gICAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3Muc3BtRDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpZiAoY3VzdG9tQXJncy5wYWdlX25hbWUgfHwgY3VzdG9tQXJnc1snZGF0YS1wYWdlbmFtZSddKSB7XG4gICAgICAvLyAgIGRlbGV0ZSBjdXN0b21BcmdzLnBhZ2VfbmFtZTtcbiAgICAgIC8vICAgZGVsZXRlIGN1c3RvbUFyZ3NbJ2RhdGEtcGFnZW5hbWUnXTtcbiAgICAgIC8vIH1cbiAgICAgIGlmIChjdXN0b21BcmdzLnRzKSB7XG4gICAgICAgIC8vIOWIoOmZpG5hdGl2ZeS/neeVmeWtl+autXRzXG4gICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnRzO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xvbmVQID0gdXRpbERhc2guY2xvbmVEZWVwKGN1c3RvbUFyZ3MpO1xuICAgICAgZm9yICh2YXIgayBpbiBjbG9uZVApIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrID09PSAnc3RyaW5nJyAmJiB1dGlscy5zdGFydHNXaXRoKGssICdfJykpIHtcbiAgICAgICAgICBzZGtBcmdzW2tdID0gY2xvbmVQW2tdO1xuICAgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzW2tdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdC5zZGtBcmdzID0gdXRpbERhc2guY2xvbmVEZWVwKHNka0FyZ3MpO1xuICAgICAgdmFyIHRlbXBDdXNwID0gdXRpbERhc2guY2xvbmVEZWVwKGN1c3RvbUFyZ3MpO1xuICAgICAgcmVzdWx0LmN1c3AgPSB0ZW1wQ3VzcDtcbiAgICAgIGlmICh0ZW1wQ3VzcC5hcCkge1xuICAgICAgICByZXN1bHQuYXAgPSB0ZW1wQ3VzcC5hcDtcbiAgICAgICAgZGVsZXRlIHRlbXBDdXNwLmFwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgd2hhdF90b19zZW5kID0gYy53aGF0X3RvX3NlbmQgfHwge307XG4gICAgICB3aGF0X3RvX3NlbmQuaGpsamRhdGFUb1VtTmF0aXZlID0gdGhpcy5nZXRUb05hdGl2ZURhdGEoKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZCA9IHdoYXRfdG9fc2VuZDtcbiAgICAgIHJldHVybjsgXG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91bTJuYXRpdmUuanNcbi8vIG1vZHVsZSBpZCA9IDExM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2FwbHVzX3NwbS5qc1xuICogU1BNIOWfi+eCueiEmuacrOWFpeWPo++8jOS+nei1lmFwbHVzSlPvvIzmnKzohJrmnKzmnIDlpJrnrYnlvoUxMHPvvIzlpoLmnpwxMHPlkI7ov5jmsqHmnInmo4DmtYvliLBhcGx1c0pT77yM5YiZ5omT5Ye66K2m5ZGK77yBXG4gKiBAc2VlIGh0dHA6Ly93aWtpLnVlZC50YW9iYW8ubmV0L2Rva3UucGhwP2lkPXRtczpzcG0lRTUlOUYlOEIlRTclODIlQjklRTYlOTYlQjklRTYlQTElODhcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9zcG1fY2xvdWQvbWFpbicpKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYl9jbG91ZC9hcGx1c19zcG1fY2xvdWQuanNcbi8vIG1vZHVsZSBpZCA9IDExNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9zcG0vbWFpbi5qc1xuICogU1BNIOWfi+eCueiEmuacrFxuICogQHNlZSBodHRwOi8vd2lraS51ZWQudGFvYmFvLm5ldC9kb2t1LnBocD9pZD10bXM6c3BtJUU1JTlGJThCJUU3JTgyJUI5JUU2JTk2JUI5JUU2JUExJTg4XG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBAYXV0aG9yIOWto+acrSA8aml6aGEud3lqQHRhb2Jhby5jb20+XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbERvbSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRG9tJyk7XG4vLyB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxuLy8gdmFyIG9wZW5BUEkgPSByZXF1aXJlKCcuL29wZW5BUEknKTtcbi8vIHZhciB3YXRjaENsaWNrID0gcmVxdWlyZSgnLi93YXRjaENsaWNrJyk7XG4vLyB2YXIgd2F0Y2hJZnJhbWUgPSByZXF1aXJlKCcuL3dhdGNoSWZyYW1lJyk7XG52YXIgd2F0Y2hTUE0gPSByZXF1aXJlKCcuL3dhdGNoU1BNJyk7XG4vLyB2YXIgd2F0Y2hXSFNwbSA9IHJlcXVpcmUoJy4vd2F0Y2hXSFNwbScpO1xuLy8gdmFyIHNwbSA9IHJlcXVpcmUoJy4vc3BtJyk7XG5cbi8qKlxuICog5YWo5bGAIFNQTSDmlrnms5VcbiAqIEBzZWUgaHR0cDovL3dpa2kudWVkLnRhb2Jhby5uZXQvZG9rdS5waHA/aWQ9dGVhbTp1ZGM6ZjJlOnVuaWZpZWQtYmVhY29uOnNwbS1vcGVuYXBpXG4gKlxuICogZ19zcG0uc3BtX2RfZm9yX2FkIEFQSSDnlKjkuo7lub/lkYrnmoRzcG1fZOS9jVxuICogZ19zcG0uc3BtIEFQSSDkuLoyMDE0LTA2LTA0IOaiteaYk+mcgOaxglxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgb2JqICA9IHtcbiAgICBpc1RvdWNoRW5hYmxlZDogdXRpbERvbS5pc1RvdWNoKCksXG4gIH07XG4gIHdhdGNoU1BNLnJ1bihvYmopO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViX2Nsb3VkL2xpYl9zcG1fY2xvdWQvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gMTE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG4vKipcbiAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX3NwbS9tYWluLmpzXG4gKiBTUE0g5Z+L54K56ISa5pysXG4gKiBAc2VlIGh0dHA6Ly93aWtpLnVlZC50YW9iYW8ubmV0L2Rva3UucGhwP2lkPXRtczpzcG0lRTUlOUYlOEIlRTclODIlQjklRTYlOTYlQjklRTYlQTElODhcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIEBhdXRob3Ig5a2j5pytIDxqaXpoYS53eWpAdGFvYmFvLmNvbT5cbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgdXRpbEV2ZW50ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudCcpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG52YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4vLyB2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG5cbnZhciBjdXJyZW50UGFnZUNvbmZpZyA9IHt9O1xuXG5mdW5jdGlvbiBmaW5kQW5jaG9yRWxlbWVudCAoZWwpIHtcbiAgdmFyIHRhZ19uYW1lO1xuICB2YXIgZmxhZztcbiAgLy8gdmFyIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB3aGlsZSAoZWwgJiYgKHRhZ19uYW1lID0gZWwudGFnTmFtZSkpIHtcbiAgICBpZiAodGFnX25hbWUgPT09ICdBJykge1xuICAgICAgZmxhZyA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYgKHRhZ19uYW1lID09ICdCT0RZJyB8fCB0YWdfbmFtZSA9PSAnSFRNTCcpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIGZsYWcgPyBlbCA6ICcnO1xuICAvLyBjYWxsYmFjayhmbGFnID8gZWwgOiAnJyk7XG59XG5cbmZ1bmN0aW9uIGZpbmRBcGx1c0FuY2hvckJ5QWxpbmtFbCAoYWxpbmtFbCkge1xuICB2YXIgX3Bvc19pZDtcbiAgdmFyIGlzUGFnZSA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciB0YWdfbmFtZTtcbiAgICB3aGlsZSAoYWxpbmtFbCAmJiAodGFnX25hbWUgPSBhbGlua0VsLnRhZ05hbWUpKSB7XG4gICAgICBfcG9zX2lkID0gYWxpbmtFbCAmJiBhbGlua0VsLmdldEF0dHJpYnV0ZSA/IGFsaW5rRWwuZ2V0QXR0cmlidXRlKCdkYXRhLWFwbHVzLXBvcy1pZCcpIDogJyc7XG4gICAgICBpZiAoX3Bvc19pZCkge1xuICAgICAgICAvLyBpc0Z1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaykgJiYgc3VjY2Vzc0NhbGxiYWNrKGFsaW5rRWwsIF9wb3NfaWQpO1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAodGFnX25hbWUgPT0gJ0JPRFknIHx8IHRhZ19uYW1lID09ICdIVE1MJykge1xuICAgICAgICBfcG9zX2lkID0gJ1BBR0UnO1xuICAgICAgICAvLyBpc0Z1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaykgJiYgc3VjY2Vzc0NhbGxiYWNrKGFsaW5rRWwsICdQQUdFJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgYWxpbmtFbCA9IGFsaW5rRWwucGFyZW50Tm9kZTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBpc0Z1bmN0aW9uKGZhaWx1cmVDYWxsYmFjaykgJiYgZmFpbHVyZUNhbGxiYWNrKCk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBfcG9zX2lkOiBfcG9zX2lkLFxuICAgIGFsaW5rRWw6IGFsaW5rRWwsXG4gICAgaXNQYWdlOiBpc1BhZ2VcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0QXBsdXNDbGtDb25maWcgKF9wb3NfaWQpIHtcbiAgdmFyIGFwbHVzQXV0b0Nsa0NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpIHx8IFtdO1xuICB2YXIgY2xrQ29uZmlnID0ge307XG4gIGlmIChfcG9zX2lkID09PSAnUEFHRScpIHtcbiAgICByZXR1cm4gYXBsdXNBdXRvQ2xrQ29uZmlnWzBdIHx8IHt9O1xuICB9IGVsc2Uge1xuICAgIGVhY2goYXBsdXNBdXRvQ2xrQ29uZmlnLCBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICBpZiAoY29uZmlnLl9wb3NfaWQgPT09IF9wb3NfaWQpIHtcbiAgICAgICAgY2xrQ29uZmlnID0gY29uZmlnO1xuICAgICAgICByZXR1cm4gJ2JyZWFrJztcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY2xrQ29uZmlnO1xuICB9XG59XG5cbi8qKlxuICog5Zyo57uZ5a6a55qEIGhyZWYg5Lit6Ze05o+S5YWlIHNwbSDlj4LmlbDvvIzlpoLmnpzljp/mnaUgaHJlZiDkuK3lt7LmnIkgc3Bt77yM5YiZ5bCG5YW25pu05pawXG4gKiBAcGFyYW0gaHJlZiB7U3RyaW5nfVxuICogQHBhcmFtIHNwbV9pZCB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBzcG1fdXBkYXRlSHJlZldpdGhTUE1JZChocmVmLCBzcG1faWQpIHtcbiAgLy8g5Y675o6J546w5pyJ55qEIGhyZWYg5Lit55qEIHNwbSDlj4LmlbBcbiAgaWYgKGhyZWYgJiYgLyY/XFxiX3NyY19wb3NfaWQ9W14mI10qLy50ZXN0KGhyZWYpKSB7XG4gICAgaHJlZiA9IGhyZWYucmVwbGFjZSgvJj9cXGJfc3JjX3Bvc19pZD1bXiYjXSovZywgJycpXG4gICAgICAucmVwbGFjZSgvJnsyLH0vZywgJyYnKVxuICAgICAgLnJlcGxhY2UoL1xcPyYvLCAnPycpXG4gICAgICAucmVwbGFjZSgvXFw/JC8sICcnKVxuICAgIDtcbiAgfVxuXG4gIGlmICghc3BtX2lkKSByZXR1cm4gaHJlZjtcblxuICAvLyDlnKggaHJlZiDkuK3mj5LlhaXmlrDnmoQgc3BtIOWPguaVsFxuICB2YXIgc2VhcmNoO1xuICB2YXIgaGFzaDtcbiAgdmFyIGE7XG4gIHZhciBhbmRfY2hhciA9ICcmJztcbiAgdmFyIHF1ZXJ5X3NwbGl0O1xuICB2YXIgcXVlcnlfY291bnQ7XG4gIHZhciBmaWxlbmFtZTtcbiAgdmFyIGZpbGVfZXh0O1xuXG4gIGlmIChocmVmLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcbiAgICBhID0gaHJlZi5zcGxpdCgnIycpO1xuICAgIGhyZWYgPSBhLnNoaWZ0KCk7XG4gICAgaGFzaCA9IGEuam9pbignIycpOyAvLyDlj5bnrKzkuIDkuKogIyDlkI7nmoTpg6jliIZcbiAgfVxuICBxdWVyeV9zcGxpdCA9IGhyZWYuc3BsaXQoJz8nKTtcbiAgcXVlcnlfY291bnQgPSBxdWVyeV9zcGxpdC5sZW5ndGggLSAxO1xuXG4gIC8vIOS4i+mdouWkhOeQhuW9ouWmguKAnGh0dHA6Ly93d3cudGFvYmFvLmNvbeKAnei/meagt+eahOacq+WwvuS4jeW4puKAnC/igJ3nmoTpk77mjqVcbiAgLy8g6L+Z56eN6ZO+5o6l5a+55bqU55qEZmlsZW5hbWXkuLrnqbpcbiAgYSA9IHF1ZXJ5X3NwbGl0WzBdLnNwbGl0KCcvLycpO1xuICBhID0gYVthLmxlbmd0aCAtIDFdLnNwbGl0KCcvJyk7XG4gIGZpbGVuYW1lID0gYS5sZW5ndGggPiAxID8gYS5wb3AoKSA6ICcnO1xuXG4gIGlmIChxdWVyeV9jb3VudCA+IDApIHtcbiAgICAvKipcbiAgICAgKiDnlLHkuo7lrZjlnKjnsbvkvLwgaHR0cDovL2p1LmF0cGFuZWwuY29tLz9zY209MTAwNS4xMC4xLjcwMyZ1cmw9aHR0cDovL3d3dy50bWFsbC5jb20vZ28vYWN0L3RtYWxsL215bXgteW0ucGhwP19zcmNfcG9zX2lkPTEuMTAwMDM4Ni4yMjIwMTcuMjAmYWRfaWQ9JmFtX2lkPSZjbV9pZD0mcG1faWQ9MTUwMTAwODI3MjYzMzY4MDg1ZjhcbiAgICAgKiDov5nmoLfnmoTpk77mjqXvvIzms6jmhI/lhbbkuK3mnInkuKTkuKrigJw/4oCd77yMXG4gICAgICog6L+Z5piv5LiA56eN6Lez6L2s6ZO+5o6l77yM5YW25LitIHNwbSDlj4LmlbDpnIDopoHliqDlnKjlkI7pnaLkuIDkuKogPyDkuYvlkI7vvIxcbiAgICAgKiDnu4/kuI7morXmmJPllYbph4/vvIgyMDEyLTAzLTMw77yJ77yM5Yaz5a6a57uf5LiA5bCGIHNwbSDlj4LmlbDliqDliLAgaHJlZiDnmoTmnIDlkI7kuIDkuKogPyDkuYvlkI5cbiAgICAgKi9cbiAgICBzZWFyY2ggPSBxdWVyeV9zcGxpdC5wb3AoKTsgLy8g5Y+W5pyA5ZCO5LiA5LiqID8g5ZCO55qE6YOo5YiGXG4gICAgaHJlZiA9IHF1ZXJ5X3NwbGl0LmpvaW4oJz8nKTsgLy8g5pyA5ZCO5LiA5LiqID8g5LmL5YmN55qE6YOo5YiGXG4gIH1cblxuICBpZiAoc2VhcmNoICYmXG4gICAgcXVlcnlfY291bnQgPiAxICYmIC8vICMg5Y+q5a+55Lik5Liq5Y+K5Lul5LiK55qE4oCcP+KAneeahCB1cmwg5omn6KGM6L+Z5qC355qE5qOA5rWLXG4gICAgc2VhcmNoLmluZGV4T2YoJyYnKSA9PSAtMSAmJlxuICAgIC8vIHNlYXJjaC5pbmRleE9mKCc9JykgPT0gLTEgJiZcbiAgICBzZWFyY2guaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgIC8qKlxuICAgICAqIOacieS4gOS6m+mhtemdou+8jOWmgiBodHRwOi8vbG9naW4udGFvYmFvLmNvbS9tZW1iZXIvbG9nb3V0LmpodG1sP2Y9dG9wJnJlZGlyZWN0VVJMPWh0dHA6Ly9sb2dpbi50bWFsbC5jb20vP19zcmNfcG9zX2lkPTEwMDcuMTAwMzYxLjAuMTgwJTI2cmVkaXJlY3RfdXJsPWh0dHAlMjUzQSUyNTJGJTI1MkZ0ZW1haS50bWFsbC5jb20lMjUyRiUyNTNGc3BtJTI1M0QzLjEwMDA0NzMuMTk3NTYyLjIlMjUyNnBydCUyNTNEMTMzNjM2NzQyNTE5NiUyNTI2cHJjJTI1M0Q0XG4gICAgICogc3BtIOWPguaVsOWKoOWcqOesrOS6jOS4qiA/IOS5i+WQju+8jOS9huaYr+esrOS6jOS4qiA/IOS5i+WQjueahCAmIOmDveW3sue7j+WBmuS6huinhOiMg+eahOi9rOegge+8jOaJgOS7peaWsOa3u+WKoOeahCBzcG0g5ZCO6Z2i55qEICYg5Lmf6KaB6L+b6KGM6L2s56CBXG4gICAgICovXG4gICAgYW5kX2NoYXIgPSAnJTI2JztcbiAgfVxuXG4gIHZhciBzcG1fcHJlZml4ID0gJyc7IC8vIOWmguaenOW9k+WJjeWcqGlmcmFtZeS4re+8jOW5tuS4lGlmcmFtZeaciXNwbeWPguaVsO+8jOWImei/meS4quWJjee8gOS4jeS4uuepulxuICBocmVmID0gaHJlZiArICc/X3NyY19wb3NfaWQ9JyArIHNwbV9wcmVmaXggKyBzcG1faWRcbiAgICArIChzZWFyY2ggPyAoYW5kX2NoYXIgKyBzZWFyY2gpIDogJycpXG4gICAgKyAoaGFzaCA/ICgnIycgKyBoYXNoKSA6ICcnKVxuICA7XG5cbiAgLyoqXG4gICAqIOa3u+WKoOaWh+S7tuWQjemineWkluWPguaVsFxuICAgKiDnlLHkuo7lnKhJReS4i++8jOWmguaenOWKoOS6hnNwbeWPguaVsOWPr+iDveS8muW8lei1t+aWh+S7tuWQjue8gOWQjeiiq+S/ruaUue+8jFxuICAgKlxuICAgKiDmr5TlpoLvvJpcbiAgICog5Y6f5aeL5LiL6L296ZO+5o6l77yaXG4gICAqIGh0dHA6Ly9kb3dubG9hZC5hbGlwYXkuY29tL3NlYy9lZGl0L2FsaWVkaXQuZXhlXG4gICAqXG4gICAqIOWKoOS6hnNwbeWPguaVsOS5i+WQju+8mlxuICAgKiBodHRwOi8vZG93bmxvYWQuYWxpcGF5LmNvbS9zZWMvZWRpdC9hbGllZGl0LmV4ZT9fc3JjX3Bvc19pZD1hMjEwNy4xLjEwMDAzNDEuMTDvvIjmnInpl67popjvvIxJReS4i+WQjue8gOWQjeiiq+S/ruaUueS4uuKAnC4xMOKAne+8iVxuICAgKlxuICAgKiDliqDkuoZmaWxl5Y+C5pWw5LmL5ZCO77yaXG4gICAqIGh0dHA6Ly9kb3dubG9hZC5hbGlwYXkuY29tL3NlYy9lZGl0L2FsaWVkaXQuZXhlP19zcmNfcG9zX2lkPWEyMTA3LjEuMTAwMDM0MS4xMCZmaWxlPWFsaWVkaXQuZXhl77yI5rKh5pyJ6Zeu6aKY77yJXG4gICAqXG4gICAqIOWboOatpO+8jOi/meWEv+S8muWvueW9ouWmguaWh+S7tuS4i+i9veeahOmTvuaOpea3u+WKoOS4gOS4qumineWkluWPguaVsFxuICAgKi9cbiAgZmlsZV9leHQgPSB1dGlsRGFzaC5pc0NvbnRhaW4oZmlsZW5hbWUsICcuJykgPyBmaWxlbmFtZS5zcGxpdCgnLicpLnBvcCgpLnRvTG93ZXJDYXNlKCkgOiAnJztcbiAgaWYgKGZpbGVfZXh0KSB7XG4gICAgaWYgKCh7XG4gICAgICAncG5nJzogMSxcbiAgICAgICdqcGcnOiAxLFxuICAgICAgJ2pwZWcnOiAxLFxuICAgICAgJ2dpZic6IDEsXG4gICAgICAnYm1wJzogMSxcbiAgICAgICdzd2YnOiAxXG4gICAgfSkuaGFzT3duUHJvcGVydHkoZmlsZV9leHQpKSB7XG4gICAgICAvLyDku6Xlm77niYflkI7nvIDlkI3nu5PlsL7nmoTpk77mjqXkuI3liqAgc3BtIOWPguaVsFxuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgaWYgKCFzZWFyY2ggJiYgcXVlcnlfY291bnQgPD0gMSkge1xuICAgICAgaWYgKCFoYXNoICYmICEoe1xuICAgICAgICAnaHRtJzogMSxcbiAgICAgICAgJ2h0bWwnOiAxLFxuICAgICAgICAncGhwJzogMSxcbiAgICAgICAgJ2FzcHgnOiAxLFxuICAgICAgICAnc2h0bWwnOiAxLFxuICAgICAgICAneGh0bWwnOiAxXG4gICAgICB9KS5oYXNPd25Qcm9wZXJ0eShmaWxlX2V4dCkpIHtcbiAgICAgICAgLy8g6K6k5Li65b2T5YmN5paH5Lu25piv5LiA5Liq5LiL6L295paH5Lu277yM5re75Yqg6aKd5aSW5Y+C5pWwXG4gICAgICAgIGhyZWYgKz0gJyZmaWxlPScgKyBmaWxlbmFtZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gaHJlZjtcbn1cblxuZnVuY3Rpb24gYXBsdXNUcmFja2VyIChhcGx1c0FuY2hvciwgX3Bvc19pZCkge1xuICB2YXIgYWxpbmtzID0gYXBsdXNBbmNob3IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2EnKTtcbiAgdmFyIGNsa0NvbmZpZyA9IGdldEFwbHVzQ2xrQ29uZmlnKF9wb3NfaWQpIHx8IHt9O1xuICB2YXIgY3VycmVudFBhZ2UgPSBjdXJyZW50UGFnZUNvbmZpZy5wYWdlIHx8IHt9O1xuICB2YXIgc3BtQiA9IGNsa0NvbmZpZy5zcG1CIHx8IGN1cnJlbnRQYWdlLnNwbUI7XG4gIGlmICghc3BtQikge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbXlpbmRleCA9IDE7XG4gIGVhY2goYWxpbmtzLCBmdW5jdGlvbiAoYWxpbmspIHtcbiAgICAvLyDkuI3og73nm7TmjqXnlKjnspfmmrTnmoRmaW5kQWxs55qEYWxpbmvvvIzkvY3nva7ntKLlvJXkvJrkubFcbiAgICAvLyDpnIDlkJHkuIrmn6Xmib7kuIDpgY3vvIzlpoLmnpzmr5TovoPmt7HnmoToioLngrnlhoXlj4jorr7nva7kuoblhbbku5bnmoRfcG9zX2lk77yM5YiZ5LiN6IO95aSE55CGXG4gICAgdmFyIHJzID0gZmluZEFwbHVzQW5jaG9yQnlBbGlua0VsKGFsaW5rKTtcbiAgICB2YXIgcmVhbF9wb3NfaWQgPSBycy5fcG9zX2lkO1xuICAgIGlmIChfcG9zX2lkID09PSByZWFsX3Bvc19pZCkge1xuICAgICAgdmFyIHNwbSA9IF9wb3NfaWQgPT09ICdQQUdFJyA/IFtzcG1CLCBteWluZGV4KytdLmpvaW4oJy4nKSA6IFtzcG1CLCBfcG9zX2lkLCBteWluZGV4KytdLmpvaW4oJy4nKTtcbiAgICAgIGFwbHVzLl9jdXJyZW50X3NwbSA9IHNwbTtcbiAgICAgIHZhciBxID0gKHdpbmRvdy5hcGx1c19xdWV1ZSB8fCAod2luZG93LmFwbHVzX3F1ZXVlID0gW10pKTtcbiAgICAgIHEucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCB7XG4gICAgICAgICAgX3NyY19wb3NfaWQ6IHNwbVxuICAgICAgICB9XVxuICAgICAgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChhbGluayAmJiBhbGluay5zZXRBdHRyaWJ1dGUpIHtcbiAgICAgICAgICBpZiAoIWFsaW5rLmdldEF0dHJpYnV0ZSgnYXBsdXMtYW5jaG9yLWlkJykpIHtcbiAgICAgICAgICAgIGFsaW5rLnNldEF0dHJpYnV0ZSgnYXBsdXMtYW5jaG9yLWlkJywgc3BtKTtcbiAgICAgICAgICAgIGlmIChhbGluay5ocmVmICYmIGFsaW5rLmhyZWYgIT09ICcjJykge1xuICAgICAgICAgICAgICBhbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBzcG1fdXBkYXRlSHJlZldpdGhTUE1JZChhbGluay5ocmVmLCBzcG0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGNvbnNvbGUud2Fybign5p+l5om+5Yiw5YyF5ZCr5YWz57O755qEX3Bvc19pZCA9ICcsIHJlYWxfcG9zX2lkKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIHRpbWVzdGFtcDog55So5oi354K55Ye755qE5pe26Ze05oizLCDlpJrmnaHorrDlvZXmjInml7bpl7Tpobrluo/lgJLmjpIsIOWNs+e6pui/keeahOS4i+agh+e6pumdoOWJjVxuICogdGFyZ2V0X2V4cHJlc3Npb25fdHlwZTog55uu5qCH6ZO+5o6l6KGo6L6+5byP57G75Z6LLCDlj5blgLzlj6/og73kuLogbnVsbCwg5oiW6ICFaHJlZuWxnuaAp+WAvCwg5oiW6ICF55So5oi36Ieq5a6a5LmJ55qE6Lef6Liq5Y+C5pWwXG4gKiB0YXJnZXRfZXhwcmVzc2lvbjogIOeCueWHu+S9jee9ruWvueW6lOeahOebruagh+mTvuaOpeihqOi+vuW8jywgdHlwZeS4umhyZWbml7bkuLrkuIDkuKp1cmwsIOexu+Wei+S4uuiHquWumuS5ieWPguaVsOaXtiwg5YiZ5Li65LiA5Liq5LiN5a6a6ZW/55qE5a2X56ym5LiyXG4gKiBzcG1faWQ6IOiiq+eCueWHu+eCueS9jeeahHNwbee8lueggVxuICogbG9nX2lkOiDlvZPliY3pobXpnaLnmoRwdmlkXG4gKiBjdXJyZW50X3VybDog5b2T5YmN6aG16Z2i55qEVVJMXG4gKiBjdXJyZW50X3JlZmVycmVyOiDlvZPliY3pobXpnaLnmoRyZWZlcnJlcl91cmxcbiAqIHRyYWNraW5nX3BhcmFtOiDpnIDopoHpop3lpJbkvKDpgJLkuIvljrvnmoTml6Xlv5flj4LmlbBcbiAqL1xuZnVuY3Rpb24gZG9UcmFjZSAoZSwgZWwpIHtcbiAgdmFyIGFsaW5rRWwgPSBmaW5kQW5jaG9yRWxlbWVudChlbCk7XG4gIHZhciBfcG9zX2lkO1xuICBpZiAoYWxpbmtFbCl7XG4gICAgX3Bvc19pZCA9IGFsaW5rRWwuZ2V0QXR0cmlidXRlKCdhcGx1cy1hbmNob3ItaWQnKTtcbiAgICBpZiAoIV9wb3NfaWQpIHtcbiAgICAgIHZhciBycyA9IGZpbmRBcGx1c0FuY2hvckJ5QWxpbmtFbChhbGlua0VsKTtcbiAgICAgIF9wb3NfaWQgPSBycy5fcG9zX2lkO1xuICAgICAgYXBsdXNUcmFja2VyKHJzLmFsaW5rRWwsIF9wb3NfaWQpOyAgXG4gICAgfVxuICB9XG4gIHJldHVybiBfcG9zX2lkO1xufVxuXG5mdW5jdGlvbiBpbml0UGFnZVNwbSAoc291cmNlX3Bvc19pZCkge1xuICB2YXIgcSA9ICh3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKSk7XG4gIHZhciBfc3JjX3Bvc19pZCA9IHNvdXJjZV9wb3NfaWQgfHwgdXRpbFVybC5nZXRQYXJhbUZyb21VcmwoJ19zcmNfcG9zX2lkJywgbG9jYXRpb24uaHJlZik7XG4gIHEucHVzaCh7XG4gICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgIGFyZ3VtZW50czogWydhcGx1cy1jcHZkYXRhJywge1xuICAgICAgX3NyY19wb3NfaWQ6IF9zcmNfcG9zX2lkXG4gICAgfV1cbiAgfSk7XG4gIHEucHVzaCh7XG4gICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCB7XG4gICAgICBfc3JjX3Bvc19pZDogX3NyY19wb3NfaWRcbiAgICB9XVxuICB9KTtcbiAgLy8g6aaW5qyhUFblkI7muIXnkIbmjonmnaXmupBwb3NfaWRcbiAgcS5wdXNoKHtcbiAgICBhY3Rpb246ICdhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlJyxcbiAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5NV19DSEFOR0VfUFYsIGZ1bmN0aW9uIChvcmlEYXRhcykge1xuICAgICAgaWYgKG9yaURhdGFzLnN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtY3B2ZGF0YScsIHtcbiAgICAgICAgICBfc3JjX3Bvc19pZDogJydcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHdhdGNoUGFnZUNvbmZpZyAoKSB7XG4gIC8vIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5QVUJMSVNILCBbYXBsdXNTdGF0aWMuQ1VSUkVOVF9QQUdFX0NPTkZJRywgY3VycmVudFBhZ2VDb25maWddKTtcbiAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLlNVQlNDUklCRSwgW2FwbHVzU3RhdGljLkNVUlJFTlRfUEFHRV9DT05GSUcsIGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICBjdXJyZW50UGFnZUNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgfV0pO1xufVxuXG5mdW5jdGlvbiB3YXRjaEFwbHVzQXV0b0NsayAoKSB7XG4gIGlmIChhcGx1cyAmJiBhcGx1cy5nbG9iYWxDb25maWcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcblxuICB9IGVsc2Uge1xuICAgIHZhciBxID0gKHdpbmRvdy5hcGx1c19xdWV1ZSB8fCAod2luZG93LmFwbHVzX3F1ZXVlID0gW10pKTtcbiAgICBxLnB1c2goe1xuICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWF1dG8tY2xrLXVzZXJmbicsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICB2YXIgYXBsdXNBbmNob3JJZCA9IGVsID8gZWwuZ2V0QXR0cmlidXRlKCdhcGx1cy1hbmNob3ItaWQnKSA6ICcnO1xuICAgICAgICBpZiAoYXBsdXNBbmNob3JJZCkge1xuICAgICAgICAgIHJldHVybiAnX3Bvc19pZD0nICsgYXBsdXNBbmNob3JJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgX3Bvc19pZCA9IGVsID8gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWFwbHVzLXBvcy1pZCcpIDogJyc7XG4gICAgICAgICAgdmFyIGNsa0NvbmZpZyA9IF9wb3NfaWQgPyBnZXRBcGx1c0Nsa0NvbmZpZyhfcG9zX2lkKSA6IHt9O1xuICAgICAgICAgIGlmIChjbGtDb25maWcuc3BtQiAmJiBjbGtDb25maWcuX3Bvc19pZCkge1xuICAgICAgICAgICAgdmFyIHNwbSA9W2Nsa0NvbmZpZy5zcG1CLCBfcG9zX2lkXS5qb2luKCcuJyk7XG4gICAgICAgICAgICByZXR1cm4gJ19wb3NfaWQ9JyArIHNwbTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfV1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIOebkeWQrHRhcOS6i+S7tu+8jOe7mei2hemTvuaOpeWKoHNwbeS/oeaBr++8jOe7memdnui2hemTvuaOpea3u+WKoGRhdGEtc3BtLWFuY2hvci1pZOWxnuaAp1xuICogQHBhcmFtcyB7b2JqZWN0fSBvYmoge1xuICogICBpc1RvdWNoRW5hYmxlZDogdHJ1ZXx8ZmFsc2VcbiAqIH1cbiAqL1xuZXhwb3J0cy5ydW4gPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBkb2MgPSBkb2N1bWVudDtcbiAgaW5pdFBhZ2VTcG0oKTtcbiAgd2F0Y2hQYWdlQ29uZmlnKCk7XG4gIHdhdGNoQXBsdXNBdXRvQ2xrKCk7XG4gIHdpbmRvdy5hcGx1cy5kb1RyYWNlID0gZG9UcmFjZTtcbiAgaWYgKG9iaiAmJiBvYmouaXNUb3VjaEVuYWJsZWQpIHtcbiAgICB1dGlsRXZlbnQub24oZG9jLCAndGFwU3BtJywgZG9UcmFjZSk7XG4gIH0gZWxzZSB7XG4gICAgdXRpbEV2ZW50Lm9uKGRvYywgJ21vdXNlZG93bicsIGRvVHJhY2UpO1xuICAgIHV0aWxFdmVudC5vbihkb2MsICdrZXlkb3duJywgZG9UcmFjZSk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYl9jbG91ZC9saWJfc3BtX2Nsb3VkL3dhdGNoU1BNLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuICogQVBJ5o+S5Lu2XG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9hcGkvbWFpbicpKHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX2FwaS5qc1xuLy8gbW9kdWxlIGlkID0gMTE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcbiAqIEFQSeaPkuS7tlxuICpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG4vKipcbiAqIEBwYXJhbXMge09iamVjdH0gbG9nQ29uZmlnIHtcbiAqICAgIHB2OiB7XG4gKiAgICAgIHBsdWdpbnM6IHJlcXVpcmUoJy4vbGliX2xvZy9wbHVnaW5zX3B2JyksXG4gKiAgICAgIGNvbnRleHQ6IHJlcXVpcmUoJy4vbGliX2xvZy9jb25maWcvY29uZmlnX3UnKVxuICogICAgfSxcbiAqICAgIGhqbGo6IHtcbiAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfaGpsaicpLFxuICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ19oamxqX3UnKVxuICogICAgfVxuICogIH1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAobG9nQ29uZmlnKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMuX2FwbHVzX2FwaSkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBhcGx1cy5fYXBsdXNfYXBpID0ge1xuICAgICAgc3RhdHVzOiAnY29tcGxldGUnXG4gICAgfTtcbiAgfVxuXG4gIHZhciBhcGx1c09iaiA9IHJlcXVpcmUoJy4vYXBsdXMnKS5ydW4uY3JlYXRlKHtcbiAgICBsb2dDb25maWc6IGxvZ0NvbmZpZ1xuICB9KTtcbiAgZm9yICh2YXIgayBpbiBhcGx1c09iaikge1xuICAgIGFwbHVzW2tdID0gYXBsdXNPYmpba107XG4gIH1cblxuICAvLyDliJ3lp4vljJZwdmlkXG4gIHJlcXVpcmUoJ0B1dGlscy91dGlsUHZpZCcpLm1ha2VQVklkKCk7XG5cbiAgdmFyIG1zZ0FyciA9IFsnYXBsdXNSZWFkeScsICdjb21wbGV0ZSddO1xuICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ0Fycik7XG4gIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNnQXJyKTtcblxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGRvYyA9IGRvY3VtZW50O1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbnZhciBjb29raWUgPSByZXF1aXJlKCdAdXRpbHMvY29va2llJyk7XG52YXIgdXRpbEV2ZW50ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudCcpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxHUSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR1EnKTtcbnZhciBSZWR1Y2VyID0gcmVxdWlyZSgnQGNvcmUvUmVkdWNlcicpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciB1dGlsRXZlbnRMaW1pdCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRXZlbnRMaW1pdCcpO1xudmFyIHV0aWxTcG0gPSByZXF1aXJlKCdAdXRpbHMvdXRpbFNwbScpO1xuXG5cbnZhciBtZXRhSW5mbyA9IHJlcXVpcmUoJy4uL2xpYl9tZXRhL21ldGFJbmZvQWxpJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xudmFyIGZuX2JlZm9yZV9wdiA9IFtdO1xudmFyIGZuX2FmdGVyX3B2ID0gW107XG52YXIgZm5fYmVmb3JlX3JlY29yZCA9IFtdO1xudmFyIGZuX2FmdGVyX3JlY29yZCA9IFtdO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIgRU1QVFlfRk4gPSBmdW5jdGlvbiAoKSB7fTtcblxuZnVuY3Rpb24gZ2V0TW1zdGF0VGltZW91dCAoKSB7XG4gIHZhciB0aW1lID0gNTAwMDtcbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgbG9uZ3RpbWUgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtbW1zdGF0LXRpbWVvdXQnKTtcbiAgICBpZiAobG9uZ3RpbWUpIHtcbiAgICAgIHZhciB0aW1lSW50ID0gcGFyc2VJbnQobG9uZ3RpbWUpO1xuICAgICAgaWYgKHRpbWVJbnQgPj0gMTAwMCAmJiB0aW1lSW50IDw9IDEwMDAwKSB7XG4gICAgICAgIHRpbWUgID0gdGltZUludDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiB0aW1lO1xufVxuXG4vLyBmdW5jdGlvbiBuZWVkTGltaXRTZW5kKGxvZ2tleSkge1xuLy8gICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4vLyAgIHZhciBldmVudExpbWl0UmF0ZXMgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19FVkVOVF9MSU1JVFJBVEVTKTtcbi8vICAgaWYgKGV2ZW50TGltaXRSYXRlcyAmJiBldmVudExpbWl0UmF0ZXMubGVuZ3RoID4gMCkge1xuLy8gICAgIHZhciBldmVudCA9IHV0aWxBcnJheS5maW5kKGV2ZW50TGltaXRSYXRlcywgZnVuY3Rpb24oaXRlbSkge1xuLy8gICAgICAgcmV0dXJuIGl0ZW0uZXZlbnRJZCA9PT0gbG9na2V5O1xuLy8gICAgIH0pO1xuICAgIFxuLy8gICAgIGlmIChldmVudCkge1xuLy8gICAgICAgdmFyIHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjEwMDApOyAgICAgIFxuLy8gICAgICAgaWYgKHJhbmRvbSA8IChldmVudC5zYW1wbGluZ1JhdGUgKiAxMDAwKSkge1xuLy8gICAgICAgICByZXR1cm4gdHJ1ZTtcbi8vICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIHJldHVybiBmYWxzZTtcbi8vICAgICAgIH1cbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgcmV0dXJuIHRydWU7XG4vLyAgICAgfVxuLy8gICB9IGVsc2Uge1xuLy8gICAgIHJldHVybiB0cnVlO1xuLy8gICB9XG4vLyB9XG5cbmZ1bmN0aW9uIGdldFJhbmRvbUludCAoc3BtX2FiLCBsb2drZXksIGNmZykge1xuICB2YXIgc3BtYSA9IHNwbV9hYlswXTtcbiAgdmFyIHNwbWIgPSBzcG1fYWJbMV07XG4gIHZhciBzcG1PYmogPSAoY2ZnIHx8IHt9KS5zcG07XG4gIHZhciBsb2drZXlPYmogPSAoY2ZnIHx8IHt9KS5sb2drZXk7XG4gIHZhciByYXRlID0gMTtcbiAgaWYoc3BtT2JqICYmIHNwbU9ialtzcG1hXSl7XG4gICAgdmFyIHNwbWFPYmogPSBzcG1PYmpbc3BtYV07XG4gICAgcmF0ZSA9IHNwbWFPYmouY3A7XG4gICAgaWYoc3BtYU9ialtzcG1iXSl7XG4gICAgICByYXRlID0gc3BtYU9ialtzcG1iXS5jcDtcbiAgICB9ICAgXG4gIH1lbHNlIGlmKGxvZ2tleU9iaiAmJiBsb2drZXlPYmpbbG9na2V5XSl7XG4gICAgcmF0ZSA9IGxvZ2tleU9ialtsb2drZXldO1xuICB9XG4gIHZhciByYW5kb21JbnQgPSBNYXRoLmNlaWwoKE1hdGgucmFuZG9tKCkgKiBNYXRoLmZsb29yKDEvcmF0ZSkpKTtcbiAgcmV0dXJuIHJhbmRvbUludDtcbn1cblxuZXhwb3J0cy5ydW4gPSBCYXNlLmV4dGVuZCh7XG4gIC8qKlxuICAgKiDms6jlhowgc2VuZFBWIOaJp+ihjOS5i+WJjeeahOaWueazlVxuICAgKiDov5nkupvmlrnms5XlsIblnKggc2VuZFBWIOS5i+WJjeS+neasoeaJp+ihjO+8jOWmguaenOacieS4gOS4quaYvuW8j+i/lOWbniBmYWxzZe+8jOWImSBzZW5kUFYg5bCG6KKr5Y+W5raIXG4gICAqIEBwYXJhbSBmbiB7ZnVuY3Rpb259XG4gICAqL1xuICBiZWZvcmVTZW5kUFY6IGZ1bmN0aW9uIChmbikge1xuICAgIGZuX2JlZm9yZV9wdi5wdXNoKGZuKTtcbiAgfSxcblxuICAvKipcbiAgICog5rOo5YaMIHNlbmRQViDmiafooYzkuYvlkI7nmoTmlrnms5VcbiAgICog6L+Z5Lqb5pa55rOV5bCG5ZyoIHNlbmRQViDkuYvlkI7kvp3mrKHmiafooYxcbiAgICogQHBhcmFtIGZuIHtmdW5jdGlvbn1cbiAgICovXG4gIGFmdGVyU2VuZFBWOiBmdW5jdGlvbiAoZm4pIHtcbiAgICBmbl9hZnRlcl9wdi5wdXNoKGZuKTtcbiAgfSxcbiAgLyoqXG4gICAqIOWPkemAgeaJk+eCuVxuICAgKiDogIHmjqXlj6PvvIznqbrlh73mlbDov4fmuKFcbiAgICogQHBhcmFtIFt1c2VyZGF0YV0ge29iamVjdH1cbiAgICogQHBhcmFtIFtjb25maWddIHtvYmplY3R9XG4gICAqL1xuICBsYXVuY2g6IGZ1bmN0aW9uKCl7XG4gICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgbXNnOiAnd2FybmluZzogVGhpcyBpbnRlcmZhY2UgaXMgZGVwcmVjYXRlZCwgY2FuIG5vdCBzZW5kIHB2IGxvZywgcGxlYXNlIHVzZSBnb2xkbG9nLnNlbmRQViBpbnN0ZWFkISBBUEk6IGh0dHA6Ly9sb2cuYWxpYmFiYS1pbmMuY29tL2xvZy9pbmZvLmh0bT90eXBlPTIyNzcmaWQ9MzEnXG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAgKiBHRVQg6K+35rGC5LiA5Liq5Zu+54mH5Zyw5Z2A77yM5ZCR5pyN5Yqh5Zmo5Y+R6YCB5omT54K5XG4gICAqXG4gICAqIEBwYXJhbSB1cmwge1N0cmluZ31cbiAgICogQHBhcmFtIFtkYXRhU3RyXSB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW21ldGhvZF0ge1N0cmluZ30gIC8vIFBPU1QgT1IgR0VUXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHNlbmQ6IGZ1bmN0aW9uICh1cmwsIGRhdGFTdHIsIG1ldGhvZCkge1xuICAgIHZhciBzcmM7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgLy8g5aaC5p6cdXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0XG4gICAgaWYgKC9eXFwvXFwvLy50ZXN0KHVybCkpIHtcbiAgICAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuICAgICAgaWYgKC9eXFwvXFwvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgICB9XG4gICAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgICB9XG4gICAgLy8g5oyH5a6a5LqGUE9TVOWImeS8mOWFiOaMiVBPU1Tlj5HpgIFcbiAgICAvLyDlvLnlhoXpu5jorqTkvJjlhYhzZW5kQmVhY29uXG4gICAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnICYmIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3Iuc2VuZEJlYWNvbikge1xuICAgICAgc3JjID0gcmVxdWVzdC5wb3N0RGF0YSh1cmwsIGRhdGFTdHIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcmMgPSByZXF1ZXN0LnNlbmRJbWcodXJsICsgJz8nICsgZGF0YVN0ciwgZ2V0TW1zdGF0VGltZW91dCgpKTtcbiAgICB9XG4gICAgYXBsdXMucmVxID0gc3JjO1xuICAgIHJldHVybiBzcmM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcbiAgICogICBjaGVja3N1bTogMTExMTExMTEsICAgLy8g5qC55o2uc3BtYSxzcG1i6Ieq5Yqo55Sf5oiQ55qE5LiA5Liq5a2X56ym5LiyXG4gICAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2VcbiAgICogICBwYWdlX2lkOiAxMjMsICAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuICAgKiAgIGdva2V5OiAnJywgICAgICAgICAgICAvLyDnlKjmiLfoh6rlrprkuYnlj4LmlbDvvIjlkJHkuIvlhbzlrrnvvIxUT0RP5ZCO57ut5LiL5o6J77yJXG4gICAqIH1cbiAgICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhOiB7XG4gICAqICAgcmVmZXJyZXI6ICdodHRwOi8vd3d3LnRhb2Jhby5jb20nICAgLy8g5bCG5Lya5pu/5o2icHbor7fmsYLnmoRwcmXlj4LmlbBcbiAgICogICB4eHgxOiAndnZ2MScsXG4gICAqICAgeHh4MjogJ3Z2djInLFxuICAgKiAgIHh4eE46ICd2dnZOJyxcbiAgICogfSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG4gICAqL1xuICBzZW5kUFY6IGZ1bmN0aW9uIChjb25maWcsIHVzZXJkYXRhKSB7XG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICAgIC8vIDHjgIFiZWZvcmVTZW5kUFbvvIzlpoLmnpzku7vmhI/kuIDkuKrlh73mlbDov5Tlm57lgLzkuLogZmFsc2XvvIzliJnkuK3mlq3lubbpgIDlh7rvvIzkuI3lj5HpgIEgUFYg6K+35rGCXG4gICAgaWYgKHV0aWxEYXNoLmFueShmbl9iZWZvcmVfcHYsIGZ1bmN0aW9uIChmbikge1xuICAgICAgcmV0dXJuIGZuKGFwbHVzLCBjb25maWcpID09PSBmYWxzZTtcbiAgICB9KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgc2tpcFJ1bGVzID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfU0tJUF9BUFZfUlVMRVMpIHx8IFtdO1xuICAgIGlmICh1dGlsQXJyYXkuaXRlbU1hdGNoKHNraXBSdWxlcywgbG9jYXRpb24uaHJlZikgJiYgY29uZmlnLmlzX2F1dG8pIHtcbiAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIC8vICAgbXNnOiAn5qC55o2u6KeE5YiZOicgKyBza2lwUnVsZXMgKyAnLCDlv73nlaXoh6rliqhwduS4iuaKpScgKyBsb2NhdGlvbi5ocmVmXG4gICAgICAvLyB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gMuOAgeaJp+ihjCBzZW5kcHYg5o+S5Lu2XG4gICAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICAgIGNvbmZpZy5yZWNvcmRUeXBlID0gJ1BWJzsgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG4gICAgXG4gICAgdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcbiAgICB2YXIgaXNBbGkgPSBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGk7IFxuICAgIGlmICgoaXNBbGkgfHwgaXNVTSkgJiYgY29uZmlnLm1ldGhvZCE9PSdHRVQnKSB7XG4gICAgICBjb25maWcubWV0aG9kID0gJ1BPU1QnO1xuICAgIH1cbiAgICB2YXIgcHYgPSBhcGx1cy5sb2dDb25maWcucHY7XG4gICAgcmVkdWNlci5ydW4oe1xuICAgICAgcGx1Z2luczogcHYucGx1Z2lucyxcbiAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChwdi5jb250ZXh0KSAvLyDpmLLmraLmupDphY3nva7ooqvmsaHmn5NcbiAgICB9LCB7XG4gICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgIHVzZXJkYXRhOiB1c2VyZGF0YSxcbiAgICAgIHB1YnN1YlR5cGU6ICdwdicsXG4gICAgICBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcHYsXG4gICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9wdidcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtcyBjb25maWcge1xuICAgKiAgIGNvbXBvbmVudElkOiAxNDYwMDhcbiAgICogICBwYWdlSWQ6IOmHh+mbhueuoeeQhuW5s+WPsOS4iueUn+aIkOeahOWUr+S4gOeahHBhZ2VJZCBodHRwczovL2xvZzItZGFpbHkuYWxpYmFiYS5uZXQvdHJhY2svZGV2ZWxvcC9hcmVhLW1hbmFnZW1lbnQvZGV0YWlsLzE0NjAwMy84ODAwMDQvMTQ2MDA4XG4gICAqIH1cbiAgICovXG4gIHBhZ2VFbnRlcjogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5QVUJMSVNILCBbYXBsdXNTdGF0aWMuUEFHRV9FTlRFUiwgY29uZmlnXSk7XG4gICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLkNBQ0hFX1BVQlMsIFthcGx1c1N0YXRpYy5QQUdFX0VOVEVSLCBjb25maWddKTtcbiAgfSxcblxuICAvKipcbiAgICog5YW85a65d2Vidmlld+WGheWbnuiwg2dvbGRsb2cuZ2V0UGFyYW3mjqXlj6PnmoTlnZFcbiAgICovXG4gIGdldFBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihzaWQpIHtcbiAgICB2YXIgd3YgPSB3aW5kb3cuV2luZFZhbmUgfHwge307XG4gICAgdmFyIHZhbHVlID0gd3YgJiYgdHlwZW9mIHd2LmdldFBhcmFtID09PSAnZnVuY3Rpb24nID8gd3YuZ2V0UGFyYW0oc2lkKSA6ICcnO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICBiZWZvcmVSZWNvcmQ6IGZ1bmN0aW9uIChmbikge1xuICAgIGZuX2JlZm9yZV9yZWNvcmQucHVzaChmbik7XG4gIH0sXG5cbiAgYWZ0ZXJSZWNvcmQ6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChmbikge1xuICAgIGZuX2FmdGVyX3JlY29yZC5wdXNoKGZuKTtcbiAgfSxcblxuICAvKipcbiAgICog5Y+R6YCB6buE6YeR5Luk566t5omT54K5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsb2drZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGdta2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBnb2tleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIOivt+axguaWueazleS4uiBQT1NUIG9yIEdFVFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2JcbiAgICovXG4gIHJlY29yZDogZnVuY3Rpb24gKGxvZ2tleSwgZ21rZXksIGdva2V5LCBtZXRob2QsIGNiKSB7XG4gICAgLy8gbWV0aG9kID0gJ0dFVCc7IC8vIHV0aWwuaXNTdHJpbmcobWV0aG9kKSA/IG1ldGhvZC50b1VwcGVyQ2FzZSgpIDogJ0dFVCc7XG4gICAgLy8gYmVmb3JlUmVjb3JkIO+8jOWmguaenOS7u+aEj+S4gOS4quWHveaVsOi/lOWbnuWAvOS4uiBmYWxzZe+8jOWImeS4reaWreW5tumAgOWHuu+8jOS4jeWPkemAgSByZWNvcmQg6K+35rGCXG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpO1xuICAgIHZhciBpc1VNID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU07XG4gICAgaWYgKGxvZ2tleSAmJiBsb2drZXkuaW5kZXhPZignLycpICE9PSAwICYmIGlzQWxpKSB7XG4gICAgICBsb2drZXkgPSAnLycgKyBsb2drZXk7XG4gICAgfVxuICAgIGlmICh1dGlsRGFzaC5hbnkoZm5fYmVmb3JlX3JlY29yZCwgZnVuY3Rpb24gKGZuKSB7XG4gICAgICByZXR1cm4gZm4oYXBsdXMpID09PSBmYWxzZTtcbiAgICB9KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gXG4gICAgdmFyIHJhbmRvbUludCA9IDE7XG4gICAgdmFyIGlzQXJyYXkgPSBhcGx1cy5zcG1fYWIgaW5zdGFuY2VvZiBBcnJheTtcbiAgICBpZihpc0FsaSAmJiBpc0FycmF5ICYmIGFwbHVzLnNwbV9hYi5sZW5ndGggPiAxKXtcbiAgICAgIHJhbmRvbUludCA9IGdldFJhbmRvbUludChhcGx1cy5zcG1fYWIsIGxvZ2tleSwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJlcG9ydC1yYXRlJykpO1xuICAgIH1cbiAgICBpZihyYW5kb21JbnQgPT09IDEpe1xuICAgICAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICAgICAgdmFyIGhqbGogPSBhcGx1cy5sb2dDb25maWcuaGpsajtcbiAgICAgIGlmICghaXNVTSkge1xuICAgICAgICByZWR1Y2VyLnJ1bih7XG4gICAgICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuICAgICAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuICAgICAgICB9LCB7XG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcbiAgICAgICAgICAgIG1ldGhvZDogaXNVTSA/IChtZXRob2QgfHwgJ1BPU1QnKSA6IG1ldGhvZFxuICAgICAgICAgICAgLy8gbWV0aG9kOiBtZXRob2QgfHwgJ1BPU1QnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB1c2VyZGF0YToge1xuICAgICAgICAgICAgbG9na2V5OiBsb2drZXksXG4gICAgICAgICAgICBnbWtleTogZ21rZXksXG4gICAgICAgICAgICBnb2tleTogZ29rZXkgfHwge31cbiAgICAgICAgICB9LFxuICAgICAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcbiAgICAgICAgICBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuICAgICAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2hqbGonXG4gICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXRpbEV2ZW50TGltaXQuY2FuVG9TZW5kSEpMSihnb2tleSwgbG9na2V5KSAmJiByZWR1Y2VyLnJ1bih7XG4gICAgICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuICAgICAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuICAgICAgICB9LCB7XG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcbiAgICAgICAgICAgIG1ldGhvZDogaXNVTSA/IChtZXRob2QgfHwgJ1BPU1QnKSA6IG1ldGhvZFxuICAgICAgICAgICAgLy8gbWV0aG9kOiBtZXRob2QgfHwgJ1BPU1QnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB1c2VyZGF0YToge1xuICAgICAgICAgICAgbG9na2V5OiBsb2drZXksXG4gICAgICAgICAgICBnbWtleTogZ21rZXksXG4gICAgICAgICAgICBnb2tleTogZ29rZXkgfHwge31cbiAgICAgICAgICB9LFxuICAgICAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcbiAgICAgICAgICBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuICAgICAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2hqbGonXG4gICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gICAgXG4gIH0sXG5cbiAgLyoqXG4gICAqIOaatOmcsue7mWFwbHVzX3NwbS5qcywg5Y+R6YCB5Y+v6KeG5YyW6buE6YeR5Luk566tXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsb2drZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGdta2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBnb2tleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIOivt+axguaWueazleS4uiBQT1NUIG9yIEdFVFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2JcbiAgICovXG4gIHJlY29yZFVkYXRhOiBmdW5jdGlvbiAobG9na2V5LCBnbWtleSwgZ29rZXksIG1ldGhvZCwgY2IpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG4gICAgdmFyIGhqbGogPSBhcGx1cy5sb2dDb25maWcuaGpsajtcbiAgICB2YXIgaXNBbGkgPSBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGk7XG4gICAgcmVkdWNlci5ydW4oe1xuICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuICAgICAgY29udGV4dDogdXRpbERhc2guY2xvbmVEZWVwKGhqbGouY29udGV4dCkgLy8g6Ziy5q2i5rqQ6YWN572u6KKr5rGh5p+TXG4gICAgfSwge1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIHJlY29yZFR5cGU6ICdEQVRBQ0xJQ0tfSEpMSicsIC8vIOWIpOaWreWNleWPjOWPkeeUqOeahO+8jOiAg+iZkeenu+mZpFxuICAgICAgICBtZXRob2Q6IGlzQWxpID8gbWV0aG9kIDogKG1ldGhvZCB8fCAnUE9TVCcpXG4gICAgICB9LFxuICAgICAgdXNlcmRhdGE6IHtcbiAgICAgICAgbG9na2V5OiBsb2drZXksXG4gICAgICAgIGdta2V5OiBnbWtleSxcbiAgICAgICAgZ29rZXk6IGdva2V5IHx8IHt9XG4gICAgICB9LFxuICAgICAgcHVic3ViVHlwZTogJ2hqbGonLFxuICAgICAgbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3JlY29yZCxcbiAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2hqbGonXG4gICAgfSwgZnVuY3Rpb24oKXtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKGNiKSkge1xuICAgICAgICBjYigpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiDmm7TmlrDpobXpnaLnmoQgYeOAgWIg5L2NXG4gICAqIOmcgOaxguWPguinge+8mmh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL2FsaWxvZy9rYi9pc3N1ZXMvMTM3XG4gICAqIEBwYXJhbSBhIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBbYl0ge1N0cmluZ31cbiAgICogQHBhcmFtIFtjYl0ge0Z1bmN0aW9ufVxuICAgKi9cbiAgc2V0UGFnZVNQTTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGEsIGIsIGNiKSB7XG4gICAgLypcbiAgICAgKiBbc3BtRmxhZ10ge2Jvb2xlYW59IDIwMTgvMy8xMi00LzMg6K+l5qCH6K+G5Li6dHJ1Ze+8jOihqOekunNwbS1wcmXlkoxzcG0tdXJs5LiN5Lya5pS55Y+YXG4gICAgICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vbHpkdHJhY2tpbmcvdm95YWdlcmFwcC9wZHB2MyNhcGx1cy10cmFja2luZy1saWJcbiAgICAgKi9cbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgc3BtRmxhZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1zcG0tZml4ZWQnKTtcbiAgICB2YXIgY2FsbGJhY2sgPSB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgPyBjYiA6IGZ1bmN0aW9uICgpIHt9O1xuICAgIC8vIOabtOaWsOWGhemDqOWPmOmHj+WAvFxuICAgIGFwbHVzLnNwbV9hYiA9IGFwbHVzLnNwbV9hYiB8fCBbXTtcbiAgICB2YXIgb2xkX3NwbWFiID0gdXRpbERhc2guY2xvbmVEZWVwKGFwbHVzLnNwbV9hYik7XG5cblxuICAgIGlmIChhKSB7XG4gICAgICBhcGx1cy5zcG1fYWJbMF0gPSAnJyArIGE7XG4gICAgICBhcGx1cy5fJC5zcG0uZGF0YS5hID0gJycgKyBhO1xuICAgIH1cbiAgICBpZiAoYikge1xuICAgICAgYXBsdXMuc3BtX2FiWzFdID0gJycgKyBiO1xuICAgICAgYXBsdXMuXyQuc3BtLmRhdGEuYiA9ICcnICsgIGI7XG4gICAgfVxuXG4gICAgLy8gdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICB2YXIgbWV0YV9pbmZvID0gbWV0YUluZm8ucUdldCgpO1xuICAgIC8vIOeUn+aIkCBQViDmiZPngrnnmoTmlbDmja4gVE9ET1xuICAgIGFwbHVzLnNwbUFQSSAmJiBhcGx1cy5zcG1BUEkuc3BhSW5pdChhcGx1cywgbWV0YV9pbmZvLCBvbGRfc3BtYWIpO1xuXG4gICAgaWYgKHNwbUZsYWcgIT09ICcxJykge1xuICAgICAgdmFyIF9zcG1hYl9wcmUgPSBvbGRfc3BtYWIuam9pbignLicpO1xuICAgICAgYXBsdXMuc3BtYWJfcHJlID0gX3NwbWFiX3ByZTtcbiAgICB9XG4gICAgdmFyIG1zZ3MgPSBbJ3NldFBhZ2VTUE0nLCB7XG4gICAgICBzcG1hYl9wcmU6IGFwbHVzLnNwbWFiX3ByZSxcbiAgICAgIHNwbWFiOiBhcGx1cy5zcG1fYWIuam9pbignLicpXG4gICAgfV07XG4gICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcbiAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuXG4gICAgdXRpbFNwbS5yZXNldE1ldGFBbmRCb2R5KCk7XG4gICAgdXRpbFNwbS5yZXNldE1vZHVsZXMoKTtcblxuICAgIGNhbGxiYWNrKCk7XG4gIH0sXG5cbiAgZ2V0UGFnZVNQTTogZnVuY3Rpb24oKXtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICByZXR1cm4gYXBsdXMuc3BtX2FiO1xuICB9LFxuXG4gIC8qKlxuICAgKiDliqjmgIHphY3nva5tZXRhXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIHtcbiAgICogICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG4gICAqICAgcHJpb3JpdHk6IDEsIC8vIOiuvue9ruS6huS8mOWFiOe6pzHvvIzlkIzml7bmnIk8bWV0YSBuYW1lPVwiYXBsdXMteC1zZXR0aW5nc1wiIGNvbnRlbnQ9XCIke2FwbHVz5o+S5Lu25ZCNfSRcIj7vvIzov5nlj6rog73orr7nva7kuIDmrKFcbiAgICogfVxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgc2V0TWV0YUluZm86IGZ1bmN0aW9uKGFyZzEsIHZhbHVlLCBvcHRzKSB7XG4gICAgdmFyIGs7XG4gICAgdmFyIHY7XG4gICAgdmFyIGRlZmF1bHRNb2RlID0gJ09WRVJXUklURSc7XG4gICAgdmFyIG1vZGUgPSBkZWZhdWx0TW9kZTtcbiAgICBpZiAodHlwZW9mIGFyZzEgPT09ICdvYmplY3QnKSB7XG4gICAgICBrID0gYXJnMS5tZXRhTmFtZTtcbiAgICAgIHYgPSBhcmcxLm1ldGFWYWx1ZTtcbiAgICAgIG1vZGUgPSBhcmcxLm1vZGUgfHwgZGVmYXVsdE1vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGsgPSBhcmcxO1xuICAgICAgdiA9IHZhbHVlO1xuICAgIH1cbiAgICBpZiAobW9kZSA9PT0gZGVmYXVsdE1vZGUpIHtcbiAgICAgIGlmIChtZXRhSW5mby5zZXRNZXRhSW5mbyhrLCB2LCBvcHRzKSkge1xuICAgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgICBfJC5tZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCk7XG4gICAgICAgIHZhciBycyA9IHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ18kJywgXyQpO1xuXG4gICAgICAgIHZhciBtc2dzID0gWydzZXRNZXRhSW5mbycsIGssIHYsIG9wdHNdO1xuICAgICAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuICAgICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgICAgICByZXR1cm4gcnM7XG4gICAgICB9IFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5hcHBlbmRNZXRhSW5mbyhrLCB2KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRvIGFwcGVuZCBgbWV0YWAgdGFnIGlmIHRoZXJlJ3Mgbm9uZSBhcGx1cyBtZXRhLlxuICAgKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcbiAgICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG4gICAqICAtIGBPYmplY3QuYXNzaWduYCBjYWxsZWQgb24gT2JqZWN0IHZhbHVlcy5cbiAgICogIEBwYXJhbSBrXG4gICAqICBAcGFyYW0gdlxuICAgKi9cbiAgYXBwZW5kTWV0YUluZm86IG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvLFxuXG4gIC8qKlxuICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCMzMzJkZTYyY1xuICAgKi9cbiAgdXBkYXRlUGFnZVByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgaWYgKHByb3BlcnRpZXMgJiYgdHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAocHJvcGVydGllcy5fcGFnZSkge1xuICAgICAgICBwcm9wZXJ0aWVzLnBhZ2VOYW1lID0gcHJvcGVydGllcy5fcGFnZTtcbiAgICAgICAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLXBhZ2VuYW1lJywgcHJvcGVydGllcy5wYWdlTmFtZSk7XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLl9wYWdlO1xuICAgICAgfVxuICAgICAgYXBsdXMuYXBwZW5kTWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnLCBwcm9wZXJ0aWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdWxvZygpLncoJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVQYWdlUHJvcGVydGllc1xcJ3MgcGFyYW1zIG11c3QgYmUgb2JqZWN0Jyk7XG4gICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAvLyAgIG1zZzogJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVQYWdlUHJvcGVydGllc1xcJ3MgcGFyYW1zIG11c3QgYmUgb2JqZWN0J1xuICAgICAgLy8gfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCM2MDM0YzFkYVxuICAgKi9cbiAgdXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocHJvcGVydGllcykge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1uZXh0cGFnZS1wcm9wZXJ0aWVzJywgcHJvcGVydGllcyk7ICBcbiAgICB9IGVsc2Uge1xuICAgICAgdWxvZygpLncoJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVOZXh0UGFnZVByb3BlcnRpZXNcXCdzIHBhcmFtcyBtdXN0IGJlIG9iamVjdCcpO1xuICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgLy8gICBtc2c6ICd3YXJuaW5nOiB0eXBlb2YgdXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzXFwncyBwYXJhbXMgbXVzdCBiZSBvYmplY3QnXG4gICAgICAvLyB9KTtcbiAgICB9XG4gICAgLy8gdmFyIHEgPSAod2luZG93LmdvbGRsb2dfcXVldWUgfHwgKHdpbmRvdy5nb2xkbG9nX3F1ZXVlID0gW10pKTtcbiAgICAvLyBxLnB1c2goe1xuICAgIC8vICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgLy8gICBhcmd1bWVudHM6IFsnTmF0aXZlNEFwbHVzRXhlY1JlYWR5JywgZnVuY3Rpb24oc3RhdHVzKXtcbiAgICAvLyAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgIC8vICAgICAgIC8vIOmFjee9rm1ldGFcbiAgICAvLyAgICAgICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gICAgICAgICB3aW5kb3cuQXBsdXM0VVQudXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgIC8vICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgLy8gICAgICAgICAgIG1zZzogJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVQYWdlUHJvcGVydGllc1xcJ3MgcGFyYW1zIG11c3QgYmUgb2JqZWN0J1xuICAgIC8vICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gICB9XVxuICAgIC8vIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBnZXQgbWV0YUluZm8gYnkga2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBtZXRhSW5mby5nZXRNZXRhSW5mbyhrKTtcbiAgfSxcblxuICAvLyDkuovku7bnu5HlrprmjqXlj6PvvIzku47moLjlv4PlupPmmrTpnLLlh7rljrvkvpthcGx1c0pT5o+S5Lu25L2/55SoXG4gIG9uOiB1dGlsRXZlbnQub24sXG4gIC8vIOa3seW6puWFi+mahu+8jOS7juaguOW/g+W6k+aatOmcsuWHuuWOu+S+m2FwbHVzSlPmj5Lku7bkvb/nlKhcbiAgY2xvbmVEZWVwOiB1dGlsRGFzaC5jbG9uZURlZXAsXG4gIHNldENvb2tpZTogY29va2llLnNldENvb2tpZSxcbiAgZ2V0Q29va2llOiBjb29raWUuZ2V0Q29va2llLFxuXG4gIC8vIFdFQuerr+aaguS4jemcgOimgeWunueOsFxuICBwYWdlQXBwZWFyOiBFTVBUWV9GTixcblxuICAvLyBXRULnq6/mmoLkuI3pnIDopoHlrp7njrBcbiAgcGFnZURpc2FwcGVhcjogRU1QVFlfRk4sXG5cbiAgdXBkYXRlUGFnZVV0cGFyYW06IEVNUFRZX0ZOLFxuXG4gIHVwZGF0ZU5leHRQYWdlVXRwYXJhbTogRU1QVFlfRk4sXG5cbiAgLyoqXG4gICAqIEBwYXJhbXMge09iamVjdH0gcHJvcGVydGllc1xuICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG4gICAqL1xuICB1cGRhdGVTZXNzaW9uUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICBhcGx1cy5zZXRNZXRhSW5mbygnX3Nlc3Npb25fYXJncycsIHByb3BlcnRpZXMpO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIOWPi+ebn+S6keS4iuiuvue9rumhtemdoue8lueggVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGFnZW5hbWVcbiAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuICAgKiAqLyAgXG4gIHNldFBhZ2VOYW1lOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYWdlbmFtZSkge1xuICAgIGlmICghcGFnZW5hbWUgfHwgdHlwZW9mIHBhZ2VuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgdWxvZygpLncoJ3NldFBhZ2VOYW1lIGZhaWxlZDogJyArICcgcGFnZW5hbWU9JyArIHBhZ2VuYW1lICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBib2R5ID0gZG9jLnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgICB0cnkge1xuICAgICAgYm9keS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGFnZW5hbWUnLCBwYWdlbmFtZSk7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICB1bG9nKCkudygnc2V0UGFnZU5hbWUgZmFpbGVkOiAnICsgJyBlcnI9JyArIGUpO1xuICAgIH1cbiAgfSxcblxuICBnZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdy5kb2N1bWVudC5ib2R5ICYmIHdpbmRvdy5kb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgd2luZG93LmRvY3VtZW50LmJvZHkuZGF0YXNldC5wYWdlbmFtZSkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5kb2N1bWVudC5ib2R5LmRhdGFzZXQucGFnZW5hbWU7XG4gICAgfSBcbiAgICByZXR1cm4gJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiOt+WPluWFg+e0oOeahHNwbS1hbmNob3ItaWRcbiAgICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnQgXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IGRhdGEtc3BtLWFuY2hvci1pZFxuICAgKi9cblxuICBnZXRFbGVtZW50U1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50LmRhdGFzZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNwbS1hbmNob3ItaWQnKTtcbiAgfSxcblxuICAvKipcbiAgICog5Lmd6ZSh6ZyA5rGC77yaaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9seGxuN2gvYnZ6eW1yL2FrYjQ5ZiNoUGFYTFxuICAgKiBhcHDllKTotbfkuovku7bmjqXlj6PvvIzlrp7pmYXlsLHmmK9yZWNvcmRcbiAgICovXG4gIHJlY29yZEFwcExpbms6IGZ1bmN0aW9uIChnb2tleSwgbWV0aG9kLCBjYikge1xuICAgIGlmKCFnb2tleS50YXJnZXRBcHBLZXkpIHtcbiAgICAgIHVsb2coKS53KCdzZW5kICQkX2FwcF9saW5rIGZhaWxlZDogdGFyZ2V0QXBwS2V5IGlzIG51bGwnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgcmV0dXJuIGFwbHVzLnJlY29yZCgnJCRfYXBwX2xpbmsnLCAnT1RIRVInLCBnb2tleSwgbWV0aG9kLCBjYik7XG4gIH0sXG59KTtcblxuLy8gZXhwb3J0cy5ydW4gPSBvcGVuQVBJLmluaXQocnVuKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2FwaS9hcGx1cy5qc1xuLy8gbW9kdWxlIGlkID0gMTE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgQ29tcG9zZSA9IHJlcXVpcmUoJ0Bjb3JlL2NvbXBvc2UnKTtcbnZhciBwbHVnaW5zTG9hZGVyID0gcmVxdWlyZSgnQGNvcmUvcGx1Z2luc0xvYWRlcicpO1xuXG4vKipcbiAqIHNlbnB2XG4gKiBAcGFyYW0gW09iamVjdF0gY29uZmlnOiB7XG4gKiAgIGNoZWNrc3VtOiAxMTExMTExMSwgICAvLyDmoLnmja5zcG1hLHNwbWLoh6rliqjnlJ/miJDnmoTkuIDkuKrlrZfnrKbkuLJcbiAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2VcbiAqICAgcGFnZV9pZDogMTIzLCAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuICogICBnb2tleTogJycsICAgICAgICAgICAvLyDnm67liY3lt7Lnu4/lpLHmlYhcbiAqICAgcmVmZXJyZXI6ICdodHRwOi8vd3d3LnRhb2Jhby5jb20nICAgLy8g5bCG5Lya5pu/5o2icHbor7fmsYLnmoRwcmXlj4LmlbBcbiAqIH0gLy8g5ZCMIGFwbHVzLmxhdW5jaOesrOS6jOS4quWFpeWPguKAnG1hbnVhbOKAnVxuICpcbiAqIEBwYXJhbSBbT2JqZWN0XSB1c2VyZGF0YSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG4gKlxuICogQHBhcmFtIFtPYmplY3RdIG9iaiAtIHtmbl9hZnRlcl9wdjogZm5fYWZ0ZXJfcHYsIHh4eDogeHh4fVxuICpcbiAqIHN0ZXAxOiBsb2FkZXIgcGx1Z2lucyAgbWlkZGxld2FyZVxuICogc3RlcDI6IGxvYWRlciBkb1NlbmRQdiBtaWRkbGV3YXJlXG4gKiBzdGVwMzogcnVuIG1pZGRsZXdhcmVzXG4gKi9cblxudmFyIFJlZHVjZXIgPSBmdW5jdGlvbigpIHtcbn07XG5cbi8qKlxuICogQHBhcmFtcyBPYmplY3QgQ09ORklHIHtcbiAqICAgY29udGV4dDogeHh4LFxuICogICBwbHVnaW5zOiB4eHggXG4gKiB9XG4gKiBAcGFyYW1zIE9iamVjdCBvcHRzIHtcbiAqICAgY29uZmlnOiBjb25maWcsXG4gKiAgIHVzZXJkYXRhOiB1c2VyZGF0YSxcbiAqICAgcHVic3ViVHlwZTogJ3B2JyB8fCAnaGpsaicgfHwgJ3ByZXB2J1xuICogICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9wdicgfHwgJ213X2NoYW5nZV9oamxqJyB8fCAnbXdfY2hhbmdlX3ByZXB2J1xuICogICBtZXNzYWdlRm5RdWV1ZTogW2ZuMSwgZm4yIC4uLl1cbiAqIH1cbiAqL1xuUmVkdWNlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKENPTkZJRywgb3B0cywgY2FsbGJhY2spIHtcbiAgLy8gMeOAgWluaXQgcGx1Z2luc1xuICB2YXIgcGwgPSBuZXcgcGx1Z2luc0xvYWRlcigpO1xuICBwbC5pbml0KHtcbiAgICBtaWRkbGV3YXJlOiBbXSxcbiAgICBjb25maWc6IG9wdHMuY29uZmlnLFxuICAgIHBsdWdpbnM6IENPTkZJRy5wbHVnaW5zXG4gIH0pO1xuICB2YXIgbWlkZGxld2FyZSA9IHBsLnJ1bigpO1xuXG4gIC8vIOWIneWni+WMluS4iuS4i+aWh+eOr+Wig++8jGNvbnRleHTlhoXnmoRkYXRh5bCG5Lya5Zyo5ZCE5Liq5o+S5Lu25Lit6L+b6KGM6LWL5YC85oiW6ICF5L+u5pS577yI6YeN6KaB77yJXG4gIHZhciBjb250ZXh0ID0gaXNGdW5jdGlvbihDT05GSUcuY29udGV4dCkgPyBuZXcgQ09ORklHLmNvbnRleHQoKSA6IENPTkZJRy5jb250ZXh0O1xuICBjb250ZXh0LnVzZXJkYXRhID0gb3B0cy51c2VyZGF0YTtcbiAgY29udGV4dC5sb2dnZXIgPSB1dGlsTG9nZ2VyLmxvZ2dlcjtcblxuICB2YXIgYXBwID0ge1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgcHVic3ViOiB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdhcGx1c19wdWJzdWInKSxcbiAgICBwdWJzdWJUeXBlOiBvcHRzICYmIG9wdHMucHVic3ViVHlwZVxuICB9O1xuXG4gIHZhciBjb21wb3NlID0gbmV3IENvbXBvc2UoKTtcbiAgY29tcG9zZS5jcmVhdGUoYXBwKTtcbiAgLy8g5omn6KGM5Lit6Ze05Lu2XG4gIGNvbXBvc2Uud3JhcChtaWRkbGV3YXJlLCBmdW5jdGlvbigpIHtcbiAgICBhcHAuY29udGV4dC5zdGF0dXMgPSBhcGx1c1N0YXRpYy5DT01QTEVURTtcbiAgICBpZiAob3B0cykge1xuICAgICAgaWYgKG9wdHMubWlkZGxld2FyZU1lc3NhZ2VLZXkpIHtcbiAgICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhbb3B0cy5taWRkbGV3YXJlTWVzc2FnZUtleSwgYXBwLmNvbnRleHRdKTsgIFxuICAgICAgfVxuICAgICAgaWYgKG9wdHMubWVzc2FnZUZuUXVldWUpIHtcbiAgICAgICAgZWFjaChvcHRzLm1lc3NhZ2VGblF1ZXVlLCBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICBmbih1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyksIENPTkZJRyk7XG4gICAgICAgIH0pOyAgXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgY2FsbGJhY2soYXBwLmNvbnRleHQpO1xuICAgIH1cbiAgfSkoKTtcblxufTtcbm1vZHVsZS5leHBvcnRzID0gUmVkdWNlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvUmVkdWNlci5qc1xuLy8gbW9kdWxlIGlkID0gMTIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2NvbXBvc2UuanNcbiAqIOWHveaVsOmYn+WIl+WMheijheWZqCBFeHBvc2UgY29tcG9zaXRvclxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5cbmZ1bmN0aW9uIGNvbXBvc2UgKCkge307XG5cbmNvbXBvc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIC8qKlxuICAgKiBjcmVhdGXlrp7pmYXkuIrmmK/lr7luZXfnmoTlsIHoo4XvvJtcbiAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG4gICAqIHRoaXPljbPmjIflkJHosIPnlKjlvZPliY1jcmVhdGXnmoTmnoTpgKDlh73mlbDvvJtcbiAgICovXG4gIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICBpZiAodHlwZW9mIHRoaXNbbmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzW25hbWVdID0gcHJvcHNbbmFtZV07XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuY29tcG9zZS5wcm90b3R5cGUuY2FsbGVkTGlzdCA9IFtdO1xuXG5jb21wb3NlLnByb3RvdHlwZS5zZXRDYWxsZWRMaXN0ID0gZnVuY3Rpb24oaSkge1xuICBpZiAodXRpbEFycmF5LmluZGV4b2YodGhpcy5jYWxsZWRMaXN0LCBpKSA9PT0gLTEpIHtcbiAgICB0aGlzLmNhbGxlZExpc3QucHVzaChpKTtcbiAgfVxufTtcblxuY29tcG9zZS5wcm90b3R5cGUucmVzZXRDYWxsZWRMaXN0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY2FsbGVkTGlzdCA9IFtdO1xufTtcblxuY29tcG9zZS5wcm90b3R5cGUud3JhcCA9IGZ1bmN0aW9uKG13LCBjYWxsYmFjaykge1xuICB2YXIgY29udGV4dCA9IHRoaXM7XG4gIHZhciBjdHggPSB0aGlzLmNvbnRleHQgfHwge307XG4gIHZhciBjb21wb3NlID0gY3R4LmNvbXBvc2UgfHwge307XG4gIHZhciBtYXhUaW1lb3V0ID0gY29tcG9zZS5tYXhUaW1lb3V0IHx8IDEwICogMTAwMDtcblxuICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgdmFyIHNpemUgPSBtdy5sZW5ndGg7IC8vIOS4remXtOS7tumYn+WIl+mVv+W6plxuICAgIHZhciBpID0gMDsgLy8g5Lit6Ze05Lu257Si5byVXG4gICAgdmFyIGogPSAwOyAvLyDkuIDkuKrmoIfor4bvvIwwLeWIneWni+eKtuaAge+8jDEt5Lit6Ze05Lu25Zue6LCD5omn6KGM5LqGXG4gICAgdmFyIHNsZWVwSGFuZGVyMTtcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24oaW5kZXgsIHN0YXR1cykge1xuICAgICAgLy8gY29udGV4dC5wdWJzdWJJbmZvKGNvbnRleHQsIG13W2ldKTtcbiAgICAgIC8vIOS4remXtOS7tumYn+WIl+aJp+ihjOWujOavleWQjui/lOWbnlxuICAgICAgaWYgKGkgPT09IHNpemUpIHtcbiAgICAgICAgc3RhdGUgPSAnZG9uZSc7XG4gICAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7IC8vIOmHjee9rmNhbGxlZExpc3Tlj5jph49cbiAgICAgICAgLy8gc3RhdHVz5aaC5p6c562J5LqOZG9uZe+8jOivtOaYjuaYr+S4remAlOmAgOWHuueahOS4remXtOS7tu+8jOS4jemcgOimgeaJp+ihjOWbnuiwg1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykgJiYgc3RhdHVzICE9PSBzdGF0ZSkge1xuICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyVGltZW91dChzbGVlcEhhbmRlcjEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyB2YXIgY2Jfc3RhdGUgPSBudWxsO1xuICAgICAgLy8g5L+d6K+B5q+P5Liq5Lit6Ze05Lu25Y+q5Lya5omn6KGM5LiA5qyhXG4gICAgICBpZiAodXRpbEFycmF5LmluZGV4b2YoY29udGV4dC5jYWxsZWRMaXN0LCBpKSA9PT0gLTEpIHtcbiAgICAgICAgY29udGV4dC5zZXRDYWxsZWRMaXN0ICYmIGNvbnRleHQuc2V0Q2FsbGVkTGlzdChpKTtcbiAgICAgICAgaWYgKG13ICYmIG13W2ldICYmIGlzRnVuY3Rpb24obXdbaV1bMF0pKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1pZGRsZXdhcmVcbiAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtc2dcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RhdGUgPSBtd1tpXVswXS5jYWxsKGNvbnRleHQsIHN0YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgaiA9IDE7ICAvLyAxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuICAgICAgICAgICAgICBydW4oaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB1bG9nKCkudyhlKTtcbiAgICAgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgICAgIC8vICAgbXNnOiBlXG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyDnirbmgIHkuLpwYXVzZeetieW+hTIwMG1z6L2u6K+i77yM54q25oCB5Li6bnVtYmVy57G75Z6L55qE5pWw5YC8562J5b6Fc3RhdGVtc+i9ruivolxuICAgICAgdmFyIGlzTnVtYmVyID0gdHlwZW9mIHN0YXRlID09PSAnbnVtYmVyJztcbiAgICAgIGlmIChzdGF0ZSA9PT0gJ3BhdXNlJyB8fCBpc051bWJlcikge1xuICAgICAgICBqID0gMDtcbiAgICAgICAgLy8g5pyA5aSn562J5b6F5pe26ZW/XG4gICAgICAgIHZhciBfdGltZV9vdXQgPSBpc051bWJlciA/IHN0YXRlIDogbWF4VGltZW91dDtcbiAgICAgICAgdmFyIF9td19uYW1lID0gbXdbaV0gPyBtd1tpXVsxXSA6ICcnO1xuICAgICAgICBzbGVlcEhhbmRlcjEgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChqID09PSAwKSB7XG4gICAgICAgICAgICB1bG9nKCkudygnanVtcCB0aGUgbWlkZGxld2FyZSBhYm91dCAnICsgX213X25hbWUgKyAnLCBiZWNhdXNlIHdhaXRpbmcgdGltZW91dCBtYXhUaW1lb3V0ID0gJyArIF90aW1lX291dCk7XG4gICAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgICAvLyAgIG1zZzogJ2p1bXAgdGhlIG1pZGRsZXdhcmUgYWJvdXQgJyArIF9td19uYW1lICsgJywgYmVjYXVzZSB3YWl0aW5nIHRpbWVvdXQgbWF4VGltZW91dCA9ICcgKyBfdGltZV9vdXRcbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgc3RhdGUgPSBudWxsO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgcnVuKGkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgX3RpbWVfb3V0KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkb25lJykge1xuICAgICAgICAvLyDnirbmgIHkuLpkb25l6KGo56S657uT5p2f77yM5LiN566h5ZCO6Z2i6L+Y5pyJ5rKh5pyJ5Lit6Ze05Lu26YO957uT5p2fXG4gICAgICAgIGkgPSBzaXplO1xuICAgICAgICBydW4oaSwgc3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g6buY6K6k54q25oCB77yM5Y+q566h5omn6KGM5Lit6Ze05Lu26Zif5YiXXG4gICAgICAgIGkrKztcbiAgICAgICAgcnVuKGkpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKGNvbnRleHQuY2FsbGVkTGlzdCAmJiBjb250ZXh0LmNhbGxlZExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgY29udGV4dC5yZXNldENhbGxlZExpc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bihpKTtcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY29tcG9zZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL2NvbXBvc2UuanNcbi8vIG1vZHVsZSBpZCA9IDEyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3BsdWdpbnNMb2FkZXIuanNcbiAqIOaPkuS7tuWKoOi9veWZqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCdAdXRpbHMvYXNzaWduJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtcyBvcHRzIHtcbiAgICAgKiAgIG1pZGRsZXdhcmU6IFtdLFxuICAgICAqICAgcGx1Z2luczogW10sXG4gICAgICogICBjb25maWc6IHt9XG4gICAgICogfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICBpZiAob3B0cyAmJiB0eXBlb2Ygb3B0cy5taWRkbGV3YXJlID09PSAnb2JqZWN0JyAmJiBvcHRzLm1pZGRsZXdhcmUubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBvcHRzLm1pZGRsZXdhcmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGx1Z2luc19uYW1lID0gW107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOWIhuWPkeiuoumYheWPmOWMllxuICAgICAqIEBwYXJhbSBvIHtcbiAgICAgKiAgIHB1YnN1Yjogey4uLn0sXG4gICAgICogICBjb250ZXh0OiB7Li4ufVxuICAgICAqIH0sXG4gICAgICogQHBhcmFtIG13IOW9k+WJjeaJp+ihjOeahOS4remXtOS7tlxuICAgICAqL1xuICAgIHB1YnN1YkluZm86IGZ1bmN0aW9uKGN0eCwgbXcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwdWJzdWIgPSBjdHgucHVic3ViO1xuICAgICAgICBpZiAocHVic3ViKSB7XG4gICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3BsdWdpbnNfY2hhbmdlXycgKyBjdHgucHVic3ViVHlwZSwgbXcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHVsb2coKS53KGUpO1xuICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIC8vICAgbXNnOiBlXG4gICAgICAgIC8vIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgaWYoIWluZGV4KSBpbmRleCA9IDA7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIG1pZGRsZXdhcmUgPSB0aGlzLm1pZGRsZXdhcmU7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcbiAgICAgIHZhciBwbHVnaW5zID0gb3B0cy5wbHVnaW5zO1xuICAgICAgaWYgKHBsdWdpbnMgJiYgdHlwZW9mIHBsdWdpbnMgPT09ICdvYmplY3QnICYmIHBsdWdpbnMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpbmRleF07XG4gICAgICAgIHRoaXMucGx1Z2luc19uYW1lLnB1c2gocGx1Z2luLm5hbWUpO1xuICAgICAgICBtaWRkbGV3YXJlLnB1c2goW2Z1bmN0aW9uKHN0YXRlLCBjYil7XG4gICAgICAgICAgX3NlbGYucHVic3ViSW5mbyh0aGlzLCBwbHVnaW4pO1xuICAgICAgICAgIC8vIOiOt+WPluaPkuS7tuaooeWdl+i3r+W+hOW5tuWIneWni+WMllxuICAgICAgICAgIHZhciBtID0gbmV3IHBsdWdpbi5wYXRoKCk7XG5cbiAgICAgICAgICAvLyDkuLroioLnnIHku6PnoIHph4/vvIzpu5jorqTnmoTliJ3lp4vljJbmlrnms5XlnKjliqDovb3lmajlhoXlgZrlhZzlupXlpITnkIbvvIzljbPmj5Lku7blhoXml6Dnibnmrormg4XlhrXml6DpnIDlrp7njrBpbml05pa55rOVXG4gICAgICAgICAgaWYgKCFtLmluaXQpIHtcbiAgICAgICAgICAgIG0uaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDlsIbkuIrkuIvmlofms6jlhaXliLDmj5Lku7blhoVcbiAgICAgICAgICBtLmluaXQoe1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgY29uZmlnOiBhc3NpZ24ocGx1Z2luLmNvbmZpZyB8fCB7fSwgb3B0cy5jb25maWcpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIG0ucnVuKHN0YXRlLCBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAvLyDov5nph4zkvb/nlKgx5q+r56eS5bu26L+f5omn6KGM77yM6Ziy5q2i5Lit6Ze05Lu25Li75L2T5YaF55qEY2FsbGJhY2vlhYjmiafooYzvvIzlr7zoh7TmoYbmnrbmi7/kuI3liLDkuK3pl7Tku7ZyZXR1cm7nmoTnrYnlvoXml7bplb/vvIzku47ogIzlr7zoh7Tnm5HmjqflvILluLhcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjYihwbHVnaW4sIG1zZyk7XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgcGx1Z2luLm5hbWVdKTtcblxuICAgICAgICBpbmRleCsrO1xuICAgICAgICBpZihwbHVnaW5zW2luZGV4XSl7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucnVuKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1pZGRsZXdhcmU7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL3BsdWdpbnNMb2FkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBkb2MgPSBkb2N1bWVudDtcbmZ1bmN0aW9uIGdldFNQTUFNZXRhRWxlbWVudChtZXRhTmFtZSkge1xuICB2YXIgbWV0YXMgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKTtcbiAgdmFyIGk7XG4gIHZhciBsO1xuICB2YXIgZWw7XG4gIHZhciBuYW1lO1xuICBmb3IgKGkgPSAwLCBsID0gbWV0YXMubGVuZ3RoOyBpIDwgbDsgaSArKykge1xuICAgIGVsID0gbWV0YXNbaV07XG4gICAgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgIGlmIChuYW1lID09PSBtZXRhTmFtZSkge1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZVNQTU1ldGEoKSB7XG4gIHZhciBlbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdtZXRhJyk7XG4gIGVsLnNldEF0dHJpYnV0ZSgnbmFtZScsICdkYXRhLXNwbScpO1xuXG4gIHZhciBoZWFkID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gIGlmIChoZWFkKSB7XG4gICAgaGVhZC5pbnNlcnRCZWZvcmUoZWwsIGhlYWQuZmlyc3RDaGlsZCk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59O1xuLyoqXG4gKiDmm7TmlrAv6YeN572uIG1ldGHjgIFib2R5IOagh+etvuS4reeahCBh44CBYiDkvY1cbiAqL1xuZnVuY3Rpb24gcmVzZXRNZXRhQW5kQm9keSgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBlbF9tZXRhX2RhdGFfc3BtID0gZ2V0U1BNQU1ldGFFbGVtZW50KCdkYXRhLXNwbScpO1xuICB2YXIgZWxfbWV0YV9zcG1faWQgPSBnZXRTUE1BTWV0YUVsZW1lbnQoJ3NwbS1pZCcpO1xuXG4gIHZhciBlbF9tZXRhID0gZWxfbWV0YV9kYXRhX3NwbSB8fCBlbF9tZXRhX3NwbV9pZDtcblxuICBpZiAoIWVsX21ldGEpIHtcbiAgICBlbF9tZXRhX2RhdGFfc3BtID0gY3JlYXRlU1BNTWV0YSgpO1xuICAgXG4gIH1cbiAgaWYoZWxfbWV0YV9kYXRhX3NwbSl7XG4gICAgZWxfbWV0YV9kYXRhX3NwbS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCBhcGx1cy5zcG1fYWJbMF0gfHwgJycpO1xuICB9XG4gIGlmKGVsX21ldGFfc3BtX2lkKXtcbiAgICBlbF9tZXRhX3NwbV9pZC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCAoYXBsdXMuc3BtX2FiIHx8IFtdKS5qb2luKCcuJykpO1xuICB9XG4gIHZhciBib2R5ID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gIGlmIChib2R5KSB7XG4gICAgYm9keS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3BtJywgYXBsdXMuc3BtX2FiWzFdIHx8ICcnKTtcbiAgfVxufTtcblxuZXhwb3J0cy5yZXNldE1ldGFBbmRCb2R5ID0gcmVzZXRNZXRhQW5kQm9keTtcblxuLyoqXG4gKiDmm7TmlrDpobXpnaLkuIrmqKHlnZfnmoTlgLxcbiAqL1xuZnVuY3Rpb24gcmVzZXRNb2R1bGVzKCkge1xuICB2YXIgZWxzID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJyk7XG4gIHZhciBpO1xuICB2YXIgbDtcbiAgdmFyIGVsO1xuXG4gIGZvciAoaSA9IDAsIGwgPSBlbHMubGVuZ3RoOyBpIDwgbDsgaSArKykge1xuICAgIGVsID0gZWxzW2ldO1xuICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3BtLW1heC1pZHgnKSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXNwbS1tYXgtaWR4JywgJycpO1xuICAgIH1cbiAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNwbS1hbmNob3ItaWQnKSkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXNwbS1hbmNob3ItaWQnLCAnJyk7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy5yZXNldE1vZHVsZXMgPSByZXNldE1vZHVsZXM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbFNwbS5qc1xuLy8gbW9kdWxlIGlkID0gMTIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2FwbHVzLmpzXG4gKiByZXF1ZXN0XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIGppemhhLnd5akBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG52YXIgdXRpbE5ldHdvcmsgPSByZXF1aXJlKCdAdXRpbHMvdXRpbE5ldHdvcmsnKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblxuLy8g5Y+R6YCB5Zu+54mHR0VU6K+35rGC5YaF5qC4XG5mdW5jdGlvbiBzZW5kSW1nQ29yZSAoc3JjLCB0aW1lb3V0LCBzdWNjZXNzQ2FsbEJhY2ssIGVycm9yQ2FsbEJhY2spIHtcbiAgdmFyIHdpbiA9IHdpbmRvdyB8fCB7fTtcbiAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICB2YXIgcm5kX2lkID0gXCJfaW1nX1wiICsgTWF0aC5yYW5kb20oKTtcblxuICAvLyDlnKjlhajlsYDlj5jph4/kuK3lvJXnlKggaW1n77yM6Ziy5q2iIGltZyDooqvlnoPlnL7lm57mlLbmnLrliLbov4fml6nlm57mlLbpgKDmiJDor7fmsYLlj5HpgIHlpLHotKVcbiAgLy8g5Y+C6ICD77yaaHR0cDovL29sZGoubmV0L2FydGljbGUvb25lLXRoaW5nLXRvLW5vdGljZS1hYm91dC1uZXctaW1hZ2UvXG4gIHdpbltybmRfaWRdID0gaW1nO1xuXG4gIHZhciByZW1vdmVSbmRJZCA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod2luW3JuZF9pZF0pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRlbGV0ZSB3aW5bcm5kX2lkXTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgd2luW3JuZF9pZF0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGltZy5vbmxvYWQgPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG4gICAgcmVtb3ZlUm5kSWQoKTtcbiAgICBzdWNjZXNzQ2FsbEJhY2sgJiYgc3VjY2Vzc0NhbGxCYWNrKCk7XG4gIH07XG4gIGltZy5vbmVycm9yID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZVJuZElkKCk7XG4gICAgZXJyb3JDYWxsQmFjayAmJiBlcnJvckNhbGxCYWNrKCk7XG4gIH07XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICBpZiAod2luZG93W3JuZF9pZF0pIHtcbiAgICAgIHdpbmRvd1tybmRfaWRdLnNyYyA9ICcnO1xuICAgICAgcmVtb3ZlUm5kSWQoKTtcbiAgICB9XG4gIH0sIHRpbWVvdXQgfHwgNTAwMCk7XG5cbiAgaW1nLnNyYyA9IHNyYztcbiAgaW1nID0gbnVsbDsgLy8g5Yig6Zmk5Li05pe25Y+Y6YeP55qE5byV55SoXG4gIHJldHVybiBzcmM7XG59O1xuZXhwb3J0cy5zZW5kSW1nQ29yZSA9IHNlbmRJbWdDb3JlO1xuXG5leHBvcnRzLnNlbmRJbWcgPSBmdW5jdGlvbiAoc3JjLCB0aW1lb3V0KXtcbiAgdmFyIHN1Y2Nlc3NDYWxsQmFjayA9IGZ1bmN0aW9uKCl7XG4gICAgdXRpbExvZ2dlci5sb2coJ+aXpeW/l+S4iuaKpeaIkOWKn++8gScpO1xuICB9OyBcbiAgdmFyIGVycm9yQ2FsbEJhY2sgPSBmdW5jdGlvbigpe1xuICAgIHV0aWxOZXR3b3JrLnRvRHluYW1pY3NOZXR3b3JrKCk7XG4gIH07XG4gIHNlbmRJbWdDb3JlKHNyYywgdGltZW91dCwgc3VjY2Vzc0NhbGxCYWNrLCBlcnJvckNhbGxCYWNrKTtcbn07XG5cbi8vIOWPkemAgXNlbmRCZWFjb24gcG9zdOivt+axglxuZXhwb3J0cy5wb3N0RGF0YSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEpIHtcbiAgLy8gZm9yICh2YXIgayBpbiBkYXRhKSB7XG4gIC8vICAgaWYgKGsgIT09ICdjbmEnKSB7XG4gIC8vICAgICBkYXRhW2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba10pO1xuICAvLyAgIH1cbiAgLy8gfVxuICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbih1cmwsIGRhdGEpO1xuICByZXR1cm4gdXJsO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9hcGkvcmVxdWVzdC5qc1xuLy8gbW9kdWxlIGlkID0gMTI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogY2hhbmdlIG5ldHdvcmsoZnJvbSBzdGF0aWMgdG8gZHluYW1pY3MpXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDpm6rnkZ4gPGxpeGlhcnVpLmx4ckBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cbi8vIOiOt+WPlumdmeaAgeaIluWKqOaAgeWfn+WQjVxuZnVuY3Rpb24gZ2V0SG9zdCAoaG9zdCwgbmV0d29ya1R5cGUpeyAgXG4gIGlmKG5ldHdvcmtUeXBlID09PSAnZHluYW1pY3MnKSB7XG4gICAgdmFyIHN0YXRpY0hvc3RzID0gW1wiZ20ubW1zdGF0LmNvbVwiLCBcIndnby5tbXN0YXQuY29tXCJdO1xuICAgIGlmKHN0YXRpY0hvc3RzLmluZGV4T2YoaG9zdCkgPiAtMSl7XG4gICAgICByZXR1cm4gXCJkLVwiICsgaG9zdDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHJldHVybiBob3N0O1xuICAgIH1cbiAgfSBcbn07XG5cbmZ1bmN0aW9uIGdldE5ldHdvcmtTd2l0Y2gob3B0KXtcbiAgb3B0ID0gb3B0IHx8IHt9O1xuICB2YXIgbWF4Q291bnQgPSBvcHQubWF4Q291bnQgfHwgMTtcbiAgdmFyIG5ldHdvcmtUeXBlID0gb3B0Lm5ldHdvcmtUeXBlIHx8ICdzdGF0aWMnO1xuICB2YXIgZGlyZWN0U3dpdGNoID0gb3B0LmRpcmVjdFN3aXRjaCB8fCBmYWxzZTtcbiAgdmFyIGNvdW50ID0gMDtcbiAgXG4gIGZ1bmN0aW9uIGNoYW5nZSgpe1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBtZXRhVmFsdWUgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmhvc3QtZycpO1xuICAgIHZhciBob3N0ID0gZ2V0SG9zdChtZXRhVmFsdWUsIG5ldHdvcmtUeXBlKTtcbiAgICAvLyDlpoLmnpzlvZPliY1ob3N05LiN5a2Y5Zyo5Yqo5oCB5Z+f5ZCN77yM5YiZ5LiN5L+u5pS55Luk566t55qEaG9zdFxuICAgIGlmKGhvc3QgIT09IG1ldGFWYWx1ZSl7XG4gICAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtcmhvc3QtZycsIGhvc3QpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24oY3VyU3dpdGNoKXtcbiAgICBjdXJTd2l0Y2ggPSBjdXJTd2l0Y2ggfHwgZGlyZWN0U3dpdGNoO1xuICAgIC8vIOWmguaenOebtOaOpeWIh+aNouWIsOWKqOaAgee9kee7nOeahOW8gOWFs+aYr3RydWXnirbmgIHvvIzpgqPkuYjkuI3ov5vlhaXorqHmlbDvvIznq4vljbPliIfmjaLnvZHnu5xcbiAgICBpZihjdXJTd2l0Y2gpe1xuICAgICAgY2hhbmdlKCk7XG4gICAgfWVsc2V7XG4gICAgICArK2NvdW50O1xuICAgICAgaWYoY291bnQgPj0gbWF4Q291bnQpe1xuICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgbGV2ZXI6ICd3YXJuJyxcbiAgICAgICAgICBtc2c6ICfml6Xlv5fkuIrmiqXlpLHotKXvvIzms6jmhI/vvIzopoHliIfmiJDliqjmgIHnvZHnu5zllaYhJ1xuICAgICAgICB9KTtcbiAgICAgICAgY2hhbmdlKCk7XG4gICAgICAgIGNvdW50ID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG4vLyDliIfmjaLln5/lkI1cbmV4cG9ydHMudG9EeW5hbWljc05ldHdvcmsgPSBnZXROZXR3b3JrU3dpdGNoKHtcbiAgbWF4Q291bnQ6MSxcbiAgbmV0d29ya1R5cGU6J2R5bmFtaWNzJyxcbiAgZGlyZWN0U3dpdGNoOiBmYWxzZVxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbE5ldHdvcmsuanNcbi8vIG1vZHVsZSBpZCA9IDEyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogcHZpZFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnLi91dGlsUHVic3ViJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG52YXIgbG9nSWQgPSByZXF1aXJlKCcuL2xvZ0lkJyk7XG5cbi8qKlxuICog5Yik5pat5piv5ZCm56aB55So5LqGcHZpZFxuICogQHJldHVybiBbQm9vbGVhbl1cbiAqL1xuZnVuY3Rpb24gaXNEaXNhYmxlUHZpZCAoKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgZGlzYWJsZVB2aWQ7XG4gIHRyeSB7XG4gICAgdmFyIG1ldGFfdmFsdWUgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZGlzYWJsZS1wdmlkJykgKyAnJztcbiAgICBpZiAobWV0YV92YWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgICBkaXNhYmxlUHZpZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChtZXRhX3ZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICBkaXNhYmxlUHZpZCA9IGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaChlcnIpe1xuICB9XG4gIHJldHVybiBkaXNhYmxlUHZpZDtcbn07XG5leHBvcnRzLmlzRGlzYWJsZVB2aWQgPSBpc0Rpc2FibGVQdmlkO1xuXG4vKipcbiAqIOWkhOeQhumhtemdouS4iueahCBwdiBpZFxuICovXG5leHBvcnRzLm1ha2VQVklkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHByZV9wdmlkID0gYXBsdXMucHZpZDtcbiAgdmFyIHVybCA9IGxvY2F0aW9uICYmIGxvY2F0aW9uLmhyZWY7XG4gIHZhciB0aXRsZSA9IGRvY3VtZW50ICYmIGRvY3VtZW50LnRpdGxlO1xuICBhcGx1cy5wdmlkID0gbG9nSWQuZ2V0TG9nSWQodXJsLCB0aXRsZSk7XG4gIGFwbHVzLmdldFB2SWQgPSBnZXRQdklkO1xuICB2YXIgbXNncyA9IFsncHZpZENoYW5nZScsIHtcbiAgICBwcmVfcHZpZDogcHJlX3B2aWQsXG4gICAgcHZpZDogYXBsdXMucHZpZFxuICB9XTtcbiAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcbiAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcbiAgcmV0dXJuIGlzRGlzYWJsZVB2aWQoKSA/ICcnIDogYXBsdXMucHZpZDtcbn07XG5cbmZ1bmN0aW9uIGdldFB2SWQoKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICByZXR1cm4gaXNEaXNhYmxlUHZpZCgpID8gJycgOiBhcGx1cy5wdmlkO1xufTtcbmV4cG9ydHMuZ2V0UHZJZCA9IGdldFB2SWQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUHZpZC5qc1xuLy8gbW9kdWxlIGlkID0gMTI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5Lqn55Sf5rWP6KeI5Zmo5oyH57q5XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuXG52YXIgdXRpbEV2ZW50ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudCcpO1xudmFyIHV0aWxFeGluZm8gPSByZXF1aXJlKCdAdXRpbHMvdXRpbEV4aW5mbycpO1xudmFyIHV0aWxTdG9yZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsU3RvcmUnKTtcbnZhciB1dGlsQXNzaWduID0gcmVxdWlyZSgnQHV0aWxzL2Fzc2lnbicpO1xudmFyIGNvb2tpZSA9IHJlcXVpcmUoJ0B1dGlscy9jb29raWUnKTtcbnZhciB1dGlsRG9tID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEb20nKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIENhbnZhcyA9IHJlcXVpcmUoJy4vY2FudmFzLmpzJyk7XG52YXIgYXBsdXNVdGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgQUJGUEM6ICdfYWJmcGMnLFxuICAgIENOQTogJ2NuYScsXG4gICAgVkVSU0lPTjogJzIuMCcsIC8vIOeJiOacrDoxIGluIDIwMjEtMTItMDIgQOiwi+Wjq1xuICAgIGdsOiAnJyxcbiAgICBjYW52YXM6ICcnLFxuXG4gICAgd3JpdGVDb29raWU6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgZXhwaXJlcyA9IG5ldyBEYXRlKCk7IC8vIDHlubTmnInmlYhcbiAgICAgICAgZXhwaXJlcy5zZXRUaW1lKGV4cGlyZXMuZ2V0VGltZSgpICsgMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgIGNvb2tpZS5zZXRDb29raWUoa2V5LCB2YWx1ZSwge1xuICAgICAgICAgIFNhbWVTaXRlOiB0cnVlLFxuICAgICAgICAgIGV4cGlyZXM6ICdleHBpcmVzPScgKyBleHBpcmVzLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB0cnlTeW5jRnA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhYmZwY09iaiA9IHRoaXMudHJ5R2V0U3RvcmVWYWx1ZSh0aGlzLkFCRlBDKTtcbiAgICAgIHRoaXMuc3luY0xTMkNvb2tpZSh0aGlzLkFCRlBDLCBhYmZwY09iaik7XG4gICAgfSxcblxuICAgIHRyeUdldFN0b3JlVmFsdWU6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBMU1ZhbHVlID0gdXRpbFN0b3JlLmdldChrZXkpO1xuICAgICAgdmFyIGNvb2tpZVZhbHVlID0gY29va2llLmdldENvb2tpZShrZXkpOyAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgTFNWYWx1ZTogTFNWYWx1ZSxcbiAgICAgICAgY29va2llVmFsdWU6IGNvb2tpZVZhbHVlICAgICAgICBcbiAgICAgIH07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlmNsaWVudEluZm8o5rWP6KeI5Zmo44CB6K6+5aSH562J5L+h5oGvKVxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiAgIHZlcnNpb246IDIsXG4gICAgICogICB1YV9pbmZvOiB7XG4gICAgICogICAgIGI6ICdjaHJvbWU1OCdcbiAgICAgKiAgICAgaXNtOiAnbWFjJ1xuICAgICAqICAgICBteDogJzM2MGVlJ1xuICAgICAqICAgICBvOiAnbWFjJ1xuICAgICAqICAgICBwOiAxXG4gICAgICogICAgIHM6ICcxOTIweDEwODAnXG4gICAgICogICAgIHc6ICd3ZWJraXQnXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqL1xuICAgIGdldENsaWVudEluZm86IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJzID0ge307XG4gICAgICB0cnkge1xuICAgICAgICBycyA9IGdvbGRsb2cgPyBnb2xkbG9nLl9hcGx1c19jbGllbnQgOiB7fTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIH1cbiAgICAgIHJldHVybiBycztcbiAgICAgIFxuICAgIH0sXG5cbiAgICBoYXNVc2FibGVTV0Y6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHN3ZjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93LkFjdGl2ZVhPYmplY3QgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzd2YgPSBuZXcgQWN0aXZlWE9iamVjdCgnU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2gnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzd2YgPSBuYXZpZ2F0b3IucGx1Z2luc1snU2hvY2t3YXZlIEZsYXNoJ107XG4gICAgICAgIH0gIFxuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIHJldHVybiBzd2YgPyAndHJ1ZScgOiAnZmFsc2UnO1xuICAgIH0sXG5cbiAgICBnZXRDYW52YXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghdGhpcy5jYW52YXMpIHtcbiAgICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzO1xuICAgIH0sXG5cbiAgICBnZXRXZWJHbDogZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuZ2V0Q2FudmFzKCk7XG4gICAgICAgIGlmICghdGhpcy5nbCAmJiBjYW52YXMpIHtcbiAgICAgICAgICB0aGlzLmdsID0gd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCAmJiAoY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJykgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcpKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIHJldHVybiB0aGlzLmdsO1xuICAgIH0sXG5cbiAgICBpbml0VWludDhBcnJheUhhc2hDb2RlMjogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFVaW50OEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZTIpIHtcbiAgICAgICAgVWludDhBcnJheS5wcm90b3R5cGUuaGFzaENvZGUyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGhhc2ggPSAwLCBpLCBjaHIsIGxlbjtcbiAgICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gaGFzaDtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjaHIgPSB0aGlzW2ldO1xuICAgICAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hyO1xuICAgICAgICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGhhc2g7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSxcblxuICAgIGdldFdlYkdsUHJpbnRpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBteUdsID0gdGhpcy5nZXRXZWJHbCgpO1xuICAgICAgaWYgKG15R2wpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLmluaXRVaW50OEFycmF5SGFzaENvZGUyKCk7XG4gICAgICAgICAgLy8gdmFyIHBpeGVscyA9IG5ldyBVaW50OEFycmF5KDI1NiAqIDI1NiAqIDQpO1xuICAgICAgICAgIC8vIG15R2wucmVhZFBpeGVscygwLCAwLCAyNTYsIDI1NiwgbXlHbC5SR0JBLCBteUdsLlVOU0lHTkVEX0JZVEUsIHBpeGVscyk7XG4gICAgICAgICAgdmFyIHZlbiwgcmVuO1xuICAgICAgICAgIHZhciBkZWJ1Z0luZm8gPSBteUdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbycpO1xuICAgICAgICAgIGlmIChkZWJ1Z0luZm8pIHtcbiAgICAgICAgICAgIHZlbiA9IG15R2wuZ2V0UGFyYW1ldGVyKGRlYnVnSW5mby5VTk1BU0tFRF9WRU5ET1JfV0VCR0wpO1xuICAgICAgICAgICAgcmVuID0gbXlHbC5nZXRQYXJhbWV0ZXIoZGVidWdJbmZvLlVOTUFTS0VEX1JFTkRFUkVSX1dFQkdMKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2RlYnVnSW5mbyBpcyBub3QgYWNjZXNzYWJsZScpO1xuICAgICAgICAgICAgdmVuID0gJ05vIGRlYnVnIEluZm8nO1xuICAgICAgICAgICAgcmVuID0gJ05vIGRlYnVnIEluZm8nO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB2YXIgaGFzaCA9IHBpeGVscy5oYXNoQ29kZTIoKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbXlHbDogbXlHbCxcbiAgICAgICAgICAgIHZlbjogdmVuLFxuICAgICAgICAgICAgcmVuOiByZW4sXG4gICAgICAgICAgICAvLyBoYXNoOiBoYXNoLFxuICAgICAgICAgICAgLy8gcGl4ZWxzOiBwaXhlbHNcbiAgICAgICAgICB9OyBcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0UmVzb2x1dGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHpvb21fbGV2ZWwgPSAxOyAvL2RldGVjdFpvb20uZGV2aWNlKCk7XG4gICAgICB2YXIgZml4ZWRfd2lkdGggPSBzY3JlZW4ud2lkdGggKiB6b29tX2xldmVsO1xuICAgICAgdmFyIGZpeGVkX2hlaWdodCA9IHNjcmVlbi5oZWlnaHQgKiB6b29tX2xldmVsO1xuICAgICAgdmFyIHJlcyA9IHNjcmVlbi5jb2xvckRlcHRoICsgJ18nICsgTWF0aC5yb3VuZChmaXhlZF93aWR0aCkgKyAnXycgKyBNYXRoLnJvdW5kKGZpeGVkX2hlaWdodCkgKyAnXycgKyB6b29tX2xldmVsICsgJ18nICsgc2NyZWVuLndpZHRoICsgJ18nICsgc2NyZWVuLmhlaWdodCArICdfJyArIHNjcmVlbi5jb2xvckRlcHRoOyAvLyArICdfJyArIHdpbmRvdy5zY3JlZW4uYXZhaWxXaWR0aCArICdfJyArIHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgKyAnXycgKyB3aW5kb3cuc2NyZWVuLmxlZnQgKyAnXycgKyB3aW5kb3cuc2NyZWVuLnRvcCArICdfJyArIHdpbmRvdy5zY3JlZW4uYXZhaWxMZWZ0ICsgJ18nICsgd2luZG93LnNjcmVlbi5hdmFpbFRvcCArICdfJyArIHdpbmRvdy5pbm5lcldpZHRoICsgJ18nICsgd2luZG93Lm91dGVyV2lkdGggKyAnXyc7IC8vICsgZGV0ZWN0Wm9vbS56b29tKCk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZVdlYkdsUHJpbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIOmDqOWIhuS7o+eggSBcbiAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgIHZhciBnbCA9IHRoaXMuZ2V0V2ViR2woKTtcbiAgICAgIGlmIChnbCkge1xuICAgICAgICB0cnkgeyBcbiAgICAgICAgICB2YXIgdlNoYWRlclRlbXBsYXRlID0gJ2F0dHJpYnV0ZSB2ZWMyIGF0dHJWZXJ0ZXg7dmFyeWluZyB2ZWMyIHZhcnlpblRleENvb3JkaW5hdGU7dW5pZm9ybSB2ZWMyIHVuaWZvcm1PZmZzZXQ7dm9pZCBtYWluKCl7dmFyeWluVGV4Q29vcmRpbmF0ZT1hdHRyVmVydGV4K3VuaWZvcm1PZmZzZXQ7Z2xfUG9zaXRpb249dmVjNChhdHRyVmVydGV4LDAsMSk7fSc7XG4gICAgICAgICAgdmFyIGZTaGFkZXJUZW1wbGF0ZSA9ICdwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDt2YXJ5aW5nIHZlYzIgdmFyeWluVGV4Q29vcmRpbmF0ZTt2b2lkIG1haW4oKSB7Z2xfRnJhZ0NvbG9yPXZlYzQodmFyeWluVGV4Q29vcmRpbmF0ZSwwLDEpO30nO1xuICAgICAgICAgIHZhciB2ZXJ0ZXhQb3NCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdmVydGV4UG9zQnVmZmVyKTtcbiAgICAgICAgICB2YXIgdmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KFstMC4yLCAtMC45LCAwLCAwLjQsIC0wLjI2LCAwLCAwLCAwLjczMjEzNDQ0NCwgMF0pO1xuICAgICAgICAgIC8vIOWIm+W7uuW5tuWIneWni+WMluS6hkJ1ZmZlcuWvueixoeeahOaVsOaNruWtmOWCqOWMuuOAglxuICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB2ZXJ0aWNlcywgZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICAgIHZlcnRleFBvc0J1ZmZlci5pdGVtU2l6ZSA9IDM7XG4gICAgICAgICAgdmVydGV4UG9zQnVmZmVyLm51bUl0ZW1zID0gMztcbiAgICAgICAgICAvLyDliJvlu7rlkozliJ3lp4vljJbkuIDkuKpXZWJHTFByb2dyYW3lr7nosaHjgIJcbiAgICAgICAgICB2YXIgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgICAgICAvLyDliJvlu7rnnYDoibLlmajlr7nosaFcbiAgICAgICAgICB2YXIgdnNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5WRVJURVhfU0hBREVSKTtcbiAgICAgICAgICAvLyDkuIvkuKTooYzphY3nva7nnYDoibLlmaggXG4gICAgICAgICAgZ2wuc2hhZGVyU291cmNlKHZzaGFkZXIsIHZTaGFkZXJUZW1wbGF0ZSk7ICAvLyDorr7nva7nnYDoibLlmajku6PnoIEgIFxuICAgICAgICAgIGdsLmNvbXBpbGVTaGFkZXIodnNoYWRlcik7IC8vIOe8luivkeS4gOS4quedgOiJsuWZqO+8jOS7peS+v+iiq1dlYkdMUHJvZ3JhbeWvueixoeaJgOS9v+eUqFxuICAgICAgICAgICAgICBcbiAgICAgICAgICB2YXIgZnNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpO1xuICAgICAgICAgIGdsLnNoYWRlclNvdXJjZShmc2hhZGVyLCBmU2hhZGVyVGVtcGxhdGUpO1xuICAgICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoZnNoYWRlcik7XG4gICAgICAgICAgLy8g5re75Yqg6aKE5YWI5a6a5LmJ5aW955qE6aG254K5552A6Imy5Zmo5ZKM54mH5q61552A6Imy5ZmoICBcbiAgICAgICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdnNoYWRlcik7XG4gICAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZzaGFkZXIpO1xuICAgICAgICAgIC8vIOmTvuaOpVdlYkdMUHJvZ3JhbeWvueixoSAgIFxuICAgICAgICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICAgIC8vIOWumuS5ieWlveeahFdlYkdMUHJvZ3JhbeWvueixoea3u+WKoOWIsOW9k+WJjeeahOa4suafk+eKtuaAgSAgXG4gICAgICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTsgIFxuICAgICAgICAgIHByb2dyYW0udmVydGV4UG9zQXR0cmliID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ2F0dHJWZXJ0ZXgnKTtcbiAgICAgICAgICBwcm9ncmFtLm9mZnNldFVuaWZvcm0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VuaWZvcm1PZmZzZXQnKTsgICAgXG4gICAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocHJvZ3JhbS52ZXJ0ZXhQb3NBcnJheSk7XG4gICAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihwcm9ncmFtLnZlcnRleFBvc0F0dHJpYiwgdmVydGV4UG9zQnVmZmVyLml0ZW1TaXplLCBnbC5GTE9BVCwgITEsIDAsIDApO1xuICAgICAgICAgIGdsLnVuaWZvcm0yZihwcm9ncmFtLm9mZnNldFVuaWZvcm0sIDEsIDEpO1xuICAgICAgICAgIC8vIOS7juWQkemHj+aVsOe7hOS4ree7mOWItuWbvuWFgyAgXG4gICAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5UUklBTkdMRV9TVFJJUCwgMCwgdmVydGV4UG9zQnVmZmVyLm51bUl0ZW1zKTtcbiAgICAgICAgICByZXN1bHQgPSBnbC5jYW52YXMudG9EYXRhVVJMKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgICAgICAgIFxuICAgICAgICAgIC8qIC50b0RhdGFVUkwgbWF5IGJlIGFic2VudCBvciBicm9rZW4gKGJsb2NrZWQgYnkgZXh0ZW5zaW9uKSAqL1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGF1ZGlvRmluZ2VyUHJpbnRpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHZhciBmaW5pc2hlZCA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGF1ZGlvQ3R4ID0gbmV3KHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCk7XG4gICAgICAgIC8vIHZhciBvc2NpbGxhdG9yID0gYXVkaW9DdHguY3JlYXRlT3NjaWxsYXRvcigpO1xuICAgICAgICAvLyB2YXIgYW5hbHlzZXIgPSBhdWRpb0N0eC5jcmVhdGVBbmFseXNlcigpO1xuICAgICAgICAvLyB2YXIgZ2Fpbk5vZGUgPSBhdWRpb0N0eC5jcmVhdGVHYWluKCk7XG4gICAgICAgIC8vIHZhciBzY3JpcHRQcm9jZXNzb3IgPSBhdWRpb0N0eC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoNDA5NiwgMSwgMSk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IGF1ZGlvQ3R4LmRlc3RpbmF0aW9uO1xuICAgICAgICByZXR1cm4gKGF1ZGlvQ3R4LnNhbXBsZVJhdGUpLnRvU3RyaW5nKCkgKyAnXycgKyBkZXN0aW5hdGlvbi5tYXhDaGFubmVsQ291bnQgKyAnXycgKyBkZXN0aW5hdGlvbi5udW1iZXJPZklucHV0cyArICdfJyArIGRlc3RpbmF0aW9uLm51bWJlck9mT3V0cHV0cyArICdfJyArIGRlc3RpbmF0aW9uLmNoYW5uZWxDb3VudCArICdfJyArIGRlc3RpbmF0aW9uLmNoYW5uZWxDb3VudE1vZGUgKyAnXycgKyBkZXN0aW5hdGlvbi5jaGFubmVsSW50ZXJwcmV0YXRpb247XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuICdub3Qgc3VwcG9ydGVkJztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0UGx1Z2luc1ByaW50aW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGxncyA9ICcnO1xuICAgICAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IucGx1Z2lucykge1xuICAgICAgICB2YXIgcGxnc19sZW4gPSBuYXZpZ2F0b3IucGx1Z2lucy5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsZ3NfbGVuOyBpKyspIHtcbiAgICAgICAgICBwbGdzICs9IG5hdmlnYXRvci5wbHVnaW5zW2ldLm5hbWUgKyAnXyc7XG4gICAgICAgIH1cbiAgICAgICAgcGxncyA9IHBsZ3MucmVwbGFjZSgvW15hLXpBLVogXS9nLCAnJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGxncztcbiAgICB9LFxuXG4gICAgY2hlY2tJc1RvdWNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gJ29udG91Y2hlbmQnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfSxcblxuICAgIGdlbmVyYXRlRnA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB3ZWJnbFByaW50aW5nID0gdGhpcy5nZXRXZWJHbFByaW50aW5nKCkgfHwge307IC8vIG15R2wsIHZlbiwgcmVuLCBoYXNoLCBwaXhlbHNcbiAgICAgIC8vIGNvbnNvbGUud2Fybignd2ViZ2xQcmludGluZyA9PT0gJywgd2ViZ2xQcmludGluZyk7XG4gICAgICAvLyB2YXIgcGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkoMjU2ICogMjU2ICogNCk7XG4gICAgICB2YXIgY29va2llRGF0YSA9IGNvb2tpZS5nZXREYXRhKCk7XG4gICAgICB2YXIgZXhwYXJhbXMgPSB1dGlsRXhpbmZvLmdldEV4cGFyYW1zSW5mb3MoKTtcbiAgICAgIHZhciBfdXNlcl9pZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdfdXNlcl9pZCcpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdfZGV2X2lkJykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ19hbm9ueV9pZCcpO1xuICAgICAgdmFyIHVpZGFwbHVzID0gZXhwYXJhbXMudWlkYXBsdXMgfHwgbmV3IERhdGUoKS5nZXRUaW1lKCk7IC8vKGdvbGRsb2cucHZpZCA/IGdvbGRsb2cucHZpZC5zdWJzdHJpbmcoMCwgOCkgOiAnJyk7XG4gICAgICBcbiAgICAgIHZhciBjYW52YXNfdGVzdCA9IENhbnZhcy5nZXRDYW52YXNIYXNoKCk7XG4gICAgICB2YXIgcmVzdWx0ID0gdXRpbEFzc2lnbih0aGlzLmdldENsaWVudEluZm8oKSwge1xuICAgICAgICBXZWJHTDogdGhpcy5nbCA/ICd0cnVlJyA6ICdmYWxzZScsXG4gICAgICAgIHdlYmdsUHJpbnQ6IHRoaXMuZ2VuZXJhdGVXZWJHbFByaW50KCksXG4gICAgICAgIGFkQmxvY2s6ICdObycsXG4gICAgICAgIGF1ZGlvOiB0aGlzLmF1ZGlvRmluZ2VyUHJpbnRpbmcoKSxcbiAgICAgICAgY29va2llRW5hYmxlZDogbmF2aWdhdG9yID8gISFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCA6ICdmYWxzZScsXG4gICAgICAgIGNwdV9jb3JlczogbmF2aWdhdG9yICYmIG5hdmlnYXRvci5oYXJkd2FyZUNvbmN1cnJlbmN5ID8gbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kgOiAtMSxcbiAgICAgICAgZm9udGxpc3Q6IHRoaXMuaGFzVXNhYmxlU1dGKCksXG4gICAgICAgIC8vIGZvbnRzOiAnMDAwMDAwMDAwMDAwMDAwMTAwMDAwMTAwMTEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDEwMDAwMDAwMDAwMTEwMDEwMTAwMDExMDAwMDAwMDEwMDAwMDAwMDAxMDAwMDAxMDEwMDEwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMTAwMDAwMTAwMDAwMDAwMDAwMDAwMDAxMTAwMDAwMTAxMDAwMDAwMDAwMDEwMTAwMDAwMDEwMDAwMDAxMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTAxMDAwMDAwMTAxMDAxMDExMDAxMDAwMTAwMDAxMDAwMTAwMDAwMTAwMDEwMTEwMDAwMTAwMDEwMDAwMTAwMDAwMDEwMTEwMDAwMDAxMDAwMTEwMTAwMDAwMDAwMDAwMDEwMDAxMDAwMDAwMDAwMDAwMDExMDAwMDEwMDEwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTEwMDAwMDAwMDEwMDAwMDAxMDAwMTAwMTAwMDAwMDAwMDAwMDAwMDAwMTAwMDAxMDAwMDAxMDAwMTAwMTAwMDAwMDAwMDEwMDAwMDEwMDAwMDAwMDEwMDAwMDAwMDAwMDEwMDAxMDAwMDAwMDEwMDAwMDAwMDAxMDEwMDAwMDExMTAwMDAwMDAwMTAwMDAwMDAxMDAwMDAwMDAwMDAwMDEwMDEwMDEwMDAwMTAwMDAxMDEwMDAwMDAwMDAwMDAwMDAwMDAxMDAxMTAwMTEwMDAwMTEwMDAwMDAxMTAxMDAwMDAwMDEwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMTAwMTAwMDExMTExMDEwMDAwMDAxMTAxMDAxMDEwMDAxMDAwMDAwMDAwMDEwMDEwMDAwMDAwMTAwMDAwMDAwMDEwMDEwMTAwMDAwMDAwMDAwMTEwMDAwMDAxMDEwMDAwMDAwMDAwMDAwMDExMDEwMDAxMDAxMDEwMTAxMDAwMDAxMDAwMTAwMDEwMDAwMDAwMDAwMTAwMDAwMDAxMDAwMDAwMTAwMDAwMDAwMTAwMTAwMDAwMDAxMDAxMTAwMTAwMDEwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMTAwMDAxMDAwMDAwMDAwMDAwMDAxMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMTAwMTAxMDExMDAxMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDEwMDAwMDAwMDAxMDAwMDAwMTExMDAwMDAwMTEwMDAxMDAwMDAwMDAwMDAwMDEwMDAwMDAwMTAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMTAxMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMTAwMDEwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMTAxMDAwMDEwMDAwMDAwMDAwMTAwMDAwMTAwMDAwMDAxMDAwMDEwMTAxMDExMTAwMDAwMDAwMTAwMTExMDAwMDAwMDExMDAxMDAwMTAwMDAwMDEwMDAxMDExMDAxMDAxMDAwMDAwMDAwMDAwMDAwMDAxMDAwMTAwMDAwMDAwMDAwMDAxMDAwMDAwMDEwMDAwMDEwMTAwMDAxMDAwMTAxMTEwMDAwMTExMDAwMDAwMDEwMTAwMDAxMDAxMDAwMDAwMDAwMTExMDAwMDAwMDAwMDAwMDAxMDEwMDAwMDExMDAwMDAwMDEwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMTAwMDAxMDAwMDAwMDAwMDAwMTAwMDEwMDAwMDAwMDAwMDAxMDExMDAwMDAxMDAwMDEwMDAwMDAwMTEwMTEwMDAwMDAwMDEwMTAwMDAwMDAwMDAwMDAxMTAwMDAxMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDEwMTAxMDAwMDAwMDAwMDAwMDAwMTAwMTAwMDAwMDAwMDAwMDAwMTAwMDAwMDAxMDAwMDAwMDAwMDAwMDAxMDExMDEwMDAxMDExMDAwMTAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTAwMDAwMDAwMDAwMDAwMDAwMDEwMTAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTEwMDEwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMTAxMTAwMDAwMDExMDAwMDAxMDAxMDEwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDEwMDAwMDAwMDAxMTAwMDAwMDAwMTAwMDAwMDAwMTAwMDAwMTAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDEwMTAwMDAwMDAwMDAwMDAwMDAwMDEwMDEwMDAwMDAxMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMTAwMTEwMDAwMDAwMDAwMDAwMDAwMDExMDAxMDAwMDEwMDAwMTAwMDAwMDAwMDEwMDAxMDAwMDAwMDAxMDAwMDAwMDAwMDAxMDAwMDAwMDAwMTAwMDEwMDEwMDAwMTAwMDAwMDAwMDAwMDAxMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAxMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDExMDAwMDExMDAwMDAwMDAwMDEwMDAxMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDEwMDAwMDEwMDExMDAwMDExMDAwMDAwMDEwMTAwMTAwMDAwMDAwMDAwMDEwMTEwMDAwMDAwMDAwMDEwMDAxMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTEwMDAwMDAxMDAwMDAwMDAwMDEwMDAwMDAxMDAwMDAwMDAwMDEwMDEwMDAwMTEwMDAwMDAxMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMTEwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAxMDAwMDAxMDAxMDAwMDAxMDAwMTAwMDAwMDAwMTAxMDEwMDAxMDAxMDAwMTAwMDAwMDAwMTAwMTAwMDAwMTAxMDAxMDAxMDAwMDAwMDAwMDAwMTAwMTExMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAxMDAwMDAwMDAwMDAwMTAxMDEwMDAwMDAwMDEwMDAwMDAwMDAwMTAxMDEwMTAxMTEwMDAwMDEwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDExMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDEwMDAwMDEwMTEwMDAwMDAwMTAxMDAwMDAwMDAwMDAwMTAxMDEwMTAwMDEwMDEwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAxMDAwMDAwMDEwMTAwMDAwMDAxMDAwMTAwMDAwMDAwMDAwMTAwMTAwMTAwMDAxMDAwMDAwMDAxMDAwMDAwMDAwMTAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMTAwMDAxMDAwMTAwMDAxMDEwMDAxMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDExMTAwMDAwMDAxMDAwMDAxMDAxMTAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMTAxMDAwMDAwMDAwMDAwMDEwMDAwMTAwMDAxMDEwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAxMDAwMTExMDAwMTExMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDAxMDEwMDAwMDAwMDAwMDAwMDAwMDAwMTExMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDEwMTAwMDAwMDAwMDAwMDAwMTAwMDAwMDAxMTAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMTAxMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDExMDAxMDAwMDAwMDEwMDAwMTAwMTAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDEwMDAwMDAwMTAwMDAwMDAwMDAxMDAwMDExMDAxMDAxMDAxMDEwMDAwMDAxMDAwMDAwMDEwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMTAwMDAwMDAxMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDEwMTAwMDAwMDAwMTAwMTAxMTAwMDAwMDAwMTAwMDEwMDAwMDEwMTAwMDAwMDEwMDAwMDEwMDAxMDAwMDAwMDAxMDAxMDAwMTAwMDAwMTEwMDAwMTAwMDAwMDAwMDAxMDAxMDAwMTAwMDAwMDAwMDEwMDAwMTAxMDAwMDAwMDAwMDAwMDAxMDAxMDAwMDAwMTAwMTAwMDEwMTAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMTAwMDExMDAwMDEwMTAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMTAwMDAxMDAwMDAxMDAwMDAxMDAwMDAwMDAxMDAwMDAwMDAxMDEwMDEwMDEwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMTAwMDAxMTAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAxMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDEwMDAwMDAwMTAwMDAwMDAwMDExMDAwMDAwMDAwMDAwMTAwMDEwMDEwMDAxMTAwMTAwMDAwMTAwMTAwMDAxMDExMDAwMDAwMDAwMDAwMDEwMDAwMDAxMDAxMDAwMDAwMDAwMDAwMDExMDAwMDAwMDAwMDAxMDAwMTAxMDEwMTAwMDAwMDEwMDAwMDAwMTExMDAwMDAwMTAxMDAwMDEwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMTAwMTAwMDAwMDAwMDAxMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTAwMTExMTExMTEwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAxMDAwMDAwMTAwMDAwMDEwMTAxMTAwMDAwMDEwMDAwMDAwMDAwMTAxMDAwJyxcbiAgICAgICAgZ3B1OiB3ZWJnbFByaW50aW5nLnJlbixcbiAgICAgICAgLy8gZ3B1SW1nczogezA6IC0xOTE0MjgzMDE2LCAxOiAxMTYyMjk4OTMzLCAyOiAxNjk5MzM0MTU1LCAzOiAxMDE1NDcwMjA2LCA0OiAtMTg0NTcwMjQyMiwgNTogOTU5OTUwMjExLCA2OiAtMTU4Njc2OTY2MywgNzogLTIxMDcwNTUwNywgODogMTg0NTM3NDAwNCwgOTogMTM3MTY4MTYzMSwgMTA6IDI3ODI4MTIzMSwgMTE6IC05MDY0MjIyNjEsIDEyOiA2NTY1MTQyMDgsIDEzOiAxNTgyMDgwOTY4LCAxNDogLTE0NzY3NzQ4MTAsIDE1OiAxNDk5NDg5OTM1LCAxNjogLTQ1Nzg2NTgxNSwgMTc6IDEzNDU4OTIyMzYsIDE4OiAtODQzMzc2ODUwLCAxOTogLTIwMjM2NTIyNDAsIDIwOiAzMDE0MTMxMzUsIDIxOiAxOTE3OTU4MjI4LCAyMjogLTE1NzM3MDU1NzYsIDIzOiAtNzMyMjYzODkwLCAyNDogLTc3MTAxMjYyNSwgMjU6IC00NjY4MzY0MDIsIDI2OiAtMTUyNTg3NjcwMywgMjc6IC0xNjE2MDU0MDc5fVxuICAgICAgICAvLyBncHVJbWdzOiBwaXhlbHMuaGFzaENvZGUyKCksXG4gICAgICAgIGhhc2g6IHdlYmdsUHJpbnRpbmcuaGFzaCxcbiAgICAgICAgaW5jOiB3ZWJnbFByaW50aW5nLmluYyxcbiAgICAgICAgLy8gbGFuZ3NEZXRlY3RlZDogcmVxdWlyZSgnLi9sYW5ndWFnZURldGVjdG9yLmpzJykuZ2V0X3dyaXRpbmdfc2NyaXB0cygpLFxuICAgICAgICBpc1N1cHBvcnRMUzogdXRpbFN0b3JlLnRlc3QoKSA/ICd0cnVlJyA6ICdmYWxzZScsXG4gICAgICAgIHBsdWdpbnM6IHRoaXMuZ2V0UGx1Z2luc1ByaW50aW5nKCksXG4gICAgICAgIHJlc29sdXRpb246IHRoaXMuZ2V0UmVzb2x1dGlvbigpLFxuICAgICAgICB0aW1lem9uZTogLW5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDYwLFxuICAgICAgICBpc1RvdWNoOiB0aGlzLmNoZWNrSXNUb3VjaCgpLFxuICAgICAgICBsYW5nOiBuYXZpZ2F0b3IgPyBuYXZpZ2F0b3IubGFuZ3VhZ2UgOiAnJyxcbiAgICAgICAgdHJhY2tuaWNrOiBjb29raWVEYXRhLnRyYWNrbmljayB8fCBleHBhcmFtcy5wdV9pIHx8IF91c2VyX2lkIHx8IHVpZGFwbHVzXG4gICAgICB9KTtcbiAgICAgIHZhciB2YWx1ZXMgPSBbY2FudmFzX3Rlc3RdO1xuICAgICAgZm9yKHZhciBrIGluIHJlc3VsdCkge1xuICAgICAgICByZXN1bHRba10gJiYgdmFsdWVzLnB1c2gocmVzdWx0W2tdKTtcbiAgICAgIH1cbiAgICAgIHZhciBfYWJmcGMgPSBDYW52YXMuY2FsY1NIQTEodmFsdWVzLmpvaW4oJ18nKSkgKyAnXycgKyB0aGlzLlZFUlNJT047XG4gICAgICB1dGlsU3RvcmUuc2V0KHRoaXMuQUJGUEMsIF9hYmZwYyk7XG4gICAgICB0aGlzLndyaXRlQ29va2llKHRoaXMuQUJGUEMsIF9hYmZwYyk7XG5cbiAgICAgIHJldHVybiBfYWJmcGM7XG4gICAgfSxcblxuICAgIHN5bmNDTkE6IGZ1bmN0aW9uIChfYWJmcGMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX2ZuID0gdXRpbERvbS5sb2FkU2NyaXB0O1xuICAgICAgLy8gdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcbiAgICAgIHZhciBkb21haW4gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmhvc3QtdicpO1xuICAgICAgZG9tYWluID0gYXBsdXNVdGlsLmZpeERvbWFpbihkb21haW4pO1xuICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICBfZm4oZG9tYWluICsnL3BiZS5qcz9fYWJmcGM9JytfYWJmcGMsIGNhbGxiYWNrKTsgIFxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzeW5jTFMyQ29va2llOiBmdW5jdGlvbiAoa2V5LCBvcHRpb25zKSB7XG4gICAgICB2YXIgTFNWYWx1ZSA9IG9wdGlvbnMuTFNWYWx1ZTtcbiAgICAgIHZhciBjb29raWVWYWx1ZSA9IG9wdGlvbnMuY29va2llVmFsdWU7XG5cbiAgICAgIGlmIChMU1ZhbHVlICYmIExTVmFsdWUgIT09IGNvb2tpZVZhbHVlKSB7XG4gICAgICAgIHRoaXMud3JpdGVDb29raWUoa2V5LCBMU1ZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb29raWVWYWx1ZSAmJiAhTFNWYWx1ZSkge1xuICAgICAgICB1dGlsU3RvcmUuc2V0KGtleSwgY29va2llVmFsdWUpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGVHbG9iYWxEYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5fYWJmcGMpIHtcbiAgICAgICAgcGFyYW1zLl9hYmZwYyA9IHBhcmFtcy5fYWJmcGMucmVwbGFjZSgnXycgKyB0aGlzLlZFUlNJT04sICcnKTtcbiAgICAgIH1cbiAgICAgIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1nbG9iYWxkYXRhJywgcGFyYW1zKTtcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFiZnBjT2JqID0gX3NlbGYudHJ5R2V0U3RvcmVWYWx1ZShfc2VsZi5BQkZQQyk7XG4gICAgICB2YXIgY25hT2JqID0gX3NlbGYudHJ5R2V0U3RvcmVWYWx1ZShfc2VsZi5DTkEpO1xuXG4gICAgICBfc2VsZi5zeW5jTFMyQ29va2llKHRoaXMuQUJGUEMsIGFiZnBjT2JqKTtcbiAgICAgIF9zZWxmLnN5bmNMUzJDb29raWUodGhpcy5DTkEsIGNuYU9iaik7XG4gICAgICBcbiAgICAgIHZhciBfYWJmcGMgPSBhYmZwY09iai5MU1ZhbHVlIHx8IGFiZnBjT2JqLmNvb2tpZVZhbHVlO1xuICAgICAgdmFyIGNuYSA9IGNuYU9iai5MU1ZhbHVlIHx8IGNuYU9iai5jb29raWVWYWx1ZTtcblxuICAgICAgaWYgKCFfYWJmcGMpIHtcbiAgICAgICAgX2FiZnBjID0gX3NlbGYuZ2VuZXJhdGVGcCgpO1xuICAgICAgfVxuXG4gICAgICAvLyDln4vngrnkuIrmiqXnmoRfYWJmcGPpnIDopoHnp7vpmaTniYjmnKzlj7dcbiAgICAgIF9hYmZwYyA9IF9hYmZwYy5yZXBsYWNlKCdfJyArIF9zZWxmLlZFUlNJT04sICcnKTtcbiAgICAgIGlmIChfYWJmcGMgJiYgYXBsdXMgJiYgYXBsdXMuYXBwZW5kTWV0YUluZm8pIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgICBfYWJmcGM6IF9hYmZwY1xuICAgICAgICB9O1xuICAgICAgICBpZiAoY25hKSB7XG4gICAgICAgICAgcGFyYW1zLmNuYSA9IGNuYTtcbiAgICAgICAgfVxuICAgICAgICBfc2VsZi51cGRhdGVHbG9iYWxEYXRhKHBhcmFtcyk7XG4gICAgICB9XG4gICAgICB1dGlsRXZlbnQub24od2luZG93LCAnYmVmb3JldW5sb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBfc2VsZi50cnlTeW5jRnAoKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFjbmEpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgICAgICAgIF9zZWxmLnN5bmNDTkEoX2FiZnBjLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgX2NuYSA9IGdvbGRsb2cuY25hO1xuICAgICAgICAgICAgICAgICAgaWYgKF9jbmEpIHtcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYudXBkYXRlR2xvYmFsRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgX2FiZnBjOiBfYWJmcGMsXG4gICAgICAgICAgICAgICAgICAgICAgY25hOiBfY25hXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB1dGlsU3RvcmUuc2V0KF9zZWxmLkNOQSwgX2NuYSk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLndyaXRlQ29va2llKF9zZWxmLkNOQSwgX2NuYSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9maW5nZXJwcmludC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQSBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHRoZSBTZWN1cmUgSGFzaCBBbGdvcml0aG0sIFNIQS0xLCBhcyBkZWZpbmVkXG4gKiBpbiBGSVBTIFBVQiAxODAtMVxuICogQ29weXJpZ2h0IChDKSBQYXVsIEpvaG5zdG9uIDIwMDAuXG4gKiBTZWUgaHR0cDovL3BhamhvbWUub3JnLnVrL3NpdGUvbGVnYWwuaHRtbCBmb3IgZGV0YWlscy5cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG5cbi8qXG4gKiBDb252ZXJ0IGEgMzItYml0IG51bWJlciB0byBhIGhleCBzdHJpbmcgd2l0aCBtcy1ieXRlIGZpcnN0XG4gKi9cbnZhciBoZXhfY2hyID0gXCIwMTIzNDU2Nzg5YWJjZGVmXCI7XG5mdW5jdGlvbiBoZXgobnVtKVxue1xuICB2YXIgc3RyID0gXCJcIjtcbiAgZm9yKHZhciBqID0gNzsgaiA+PSAwOyBqLS0pXG4gICAgc3RyICs9IGhleF9jaHIuY2hhckF0KChudW0gPj4gKGogKiA0KSkgJiAweDBGKTtcbiAgcmV0dXJuIHN0cjtcbn1cblxuLypcbiAqIENvbnZlcnQgYSBzdHJpbmcgdG8gYSBzZXF1ZW5jZSBvZiAxNi13b3JkIGJsb2Nrcywgc3RvcmVkIGFzIGFuIGFycmF5LlxuICogQXBwZW5kIHBhZGRpbmcgYml0cyBhbmQgdGhlIGxlbmd0aCwgYXMgZGVzY3JpYmVkIGluIHRoZSBTSEExIHN0YW5kYXJkLlxuICovXG5mdW5jdGlvbiBzdHIyYmxrc19TSEExKHN0cikge1xuICB2YXIgbmJsayA9ICgoc3RyLmxlbmd0aCArIDgpID4+IDYpICsgMTtcbiAgdmFyIGJsa3MgPSBuZXcgQXJyYXkobmJsayAqIDE2KTtcbiAgZm9yKHZhciBqID0gMDsgaiA8IG5ibGsgKiAxNjsgaisrKSBibGtzW2pdID0gMDtcblxuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGJsa3NbaSA+PiAyXSB8PSBzdHIuY2hhckNvZGVBdChpKSA8PCAoMjQgLSAoaSAlIDQpICogOCk7XG4gIH1cbiAgYmxrc1tpID4+IDJdIHw9IDB4ODAgPDwgKDI0IC0gKGkgJSA0KSAqIDgpO1xuICBibGtzW25ibGsgKiAxNiAtIDFdID0gc3RyLmxlbmd0aCAqIDg7XG4gIHJldHVybiBibGtzO1xufVxuXG4vKlxuICogQWRkIGludGVnZXJzLCB3cmFwcGluZyBhdCAyXjMyLiBUaGlzIHVzZXMgMTYtYml0IG9wZXJhdGlvbnMgaW50ZXJuYWxseSBcbiAqIHRvIHdvcmsgYXJvdW5kIGJ1Z3MgaW4gc29tZSBKUyBpbnRlcnByZXRlcnMuXG4gKi9cbmZ1bmN0aW9uIGFkZCh4LCB5KVxue1xuICB2YXIgbHN3ID0gKHggJiAweEZGRkYpICsgKHkgJiAweEZGRkYpO1xuICB2YXIgbXN3ID0gKHggPj4gMTYpICsgKHkgPj4gMTYpICsgKGxzdyA+PiAxNik7XG4gIHJldHVybiAobXN3IDw8IDE2KSB8IChsc3cgJiAweEZGRkYpO1xufVxuXG4vKlxuICogQml0d2lzZSByb3RhdGUgYSAzMi1iaXQgbnVtYmVyIHRvIHRoZSBsZWZ0XG4gKi9cbmZ1bmN0aW9uIHJvbChudW0sIGNudClcbntcbiAgcmV0dXJuIChudW0gPDwgY250KSB8IChudW0gPj4+ICgzMiAtIGNudCkpO1xufVxuXG4vKlxuICogUGVyZm9ybSB0aGUgYXBwcm9wcmlhdGUgdHJpcGxldCBjb21iaW5hdGlvbiBmdW5jdGlvbiBmb3IgdGhlIGN1cnJlbnRcbiAqIGl0ZXJhdGlvblxuICovXG5mdW5jdGlvbiBmdCh0LCBiLCBjLCBkKVxue1xuICBpZih0IDwgMjApIHJldHVybiAoYiAmIGMpIHwgKCh+YikgJiBkKTtcbiAgaWYodCA8IDQwKSByZXR1cm4gYiBeIGMgXiBkO1xuICBpZih0IDwgNjApIHJldHVybiAoYiAmIGMpIHwgKGIgJiBkKSB8IChjICYgZCk7XG4gIHJldHVybiBiIF4gYyBeIGQ7XG59XG5cbi8qXG4gKiBEZXRlcm1pbmUgdGhlIGFwcHJvcHJpYXRlIGFkZGl0aXZlIGNvbnN0YW50IGZvciB0aGUgY3VycmVudCBpdGVyYXRpb25cbiAqL1xuZnVuY3Rpb24ga3QodCkge1xuICByZXR1cm4gKHQgPCAyMCkgPyAgMTUxODUwMDI0OSA6ICh0IDwgNDApID8gIDE4NTk3NzUzOTMgOiAodCA8IDYwKSA/IC0xODk0MDA3NTg4IDogLTg5OTQ5NzUxNDtcbn1cblxudmFyIEJhc2U2NEVuY29kZVVybFNhZmUgPSBmdW5jdGlvbihzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXCsvZywgJy0nKS5yZXBsYWNlKC9cXC8vZywgJ18nKS5yZXBsYWNlKC9cXD0rJC8sICcnKTtcbn07XG5cbi8qXG4gKiBUYWtlIGEgc3RyaW5nIGFuZCByZXR1cm4gdGhlIGhleCByZXByZXNlbnRhdGlvbiBvZiBpdHMgU0hBLTEuXG4gKi9cbmZ1bmN0aW9uIGNhbGNTSEExKHN0cilcbntcbiAgdmFyIHggPSBzdHIyYmxrc19TSEExKHN0cik7XG4gIC8vIGNvbnNvbGUubG9nKCd4ID0gJywgeCk7XG5cbiAgdmFyIHcgPSBuZXcgQXJyYXkoODApO1xuXG4gIHZhciBhID0gIDE3MzI1ODQxOTM7XG4gIHZhciBiID0gLTI3MTczMzg3OTtcbiAgdmFyIGMgPSAtMTczMjU4NDE5NDtcbiAgdmFyIGQgPSAgMjcxNzMzODc4O1xuICB2YXIgZSA9IC0xMDA5NTg5Nzc2O1xuXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSArPSAxNilcbiAge1xuICAgIHZhciBvbGRhID0gYTtcbiAgICB2YXIgb2xkYiA9IGI7XG4gICAgdmFyIG9sZGMgPSBjO1xuICAgIHZhciBvbGRkID0gZDtcbiAgICB2YXIgb2xkZSA9IGU7XG5cbiAgICBmb3IodmFyIGogPSAwOyBqIDwgODA7IGorKylcbiAgICB7XG4gICAgICBpZihqIDwgMTYpIHdbal0gPSB4W2kgKyBqXTtcbiAgICAgIGVsc2Ugd1tqXSA9IHJvbCh3W2otM10gXiB3W2otOF0gXiB3W2otMTRdIF4gd1tqLTE2XSwgMSk7XG4gICAgICB2YXIgdCA9IGFkZChhZGQocm9sKGEsIDUpLCBmdChqLCBiLCBjLCBkKSksIGFkZChhZGQoZSwgd1tqXSksIGt0KGopKSk7XG4gICAgICBlID0gZDtcbiAgICAgIGQgPSBjO1xuICAgICAgYyA9IHJvbChiLCAzMCk7XG4gICAgICBiID0gYTtcbiAgICAgIGEgPSB0O1xuICAgIH1cblxuICAgIGEgPSBhZGQoYSwgb2xkYSk7XG4gICAgYiA9IGFkZChiLCBvbGRiKTtcbiAgICBjID0gYWRkKGMsIG9sZGMpO1xuICAgIGQgPSBhZGQoZCwgb2xkZCk7XG4gICAgZSA9IGFkZChlLCBvbGRlKTtcbiAgfVxuICByZXR1cm4gQmFzZTY0RW5jb2RlVXJsU2FmZShoZXgoYSkgKyBoZXgoYikgKyBoZXgoYykgKyBoZXgoZCkgKyBoZXgoZSkpO1xufVxuXG52YXIgQ2FudmFzVGVzdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgY2FudmFzRGF0YSA9IFwiTm90IHN1cHBvcnRlZFwiO1xuICB0cnkge1xuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAvLyBjYW52YXMgPSAkKFwiPGNhbnZhcyBoZWlnaHQ9JzYwJyB3aWR0aD0nNDAwJz48L2NhbnZhcz5cIilbMF07XG4gICAgdmFyIGNhbnZhc0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjtcbiAgICBjYW52YXNDb250ZXh0LnRleHRCYXNlbGluZSA9IFwiYWxwaGFiZXRpY1wiO1xuICAgIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gXCIjZjYwXCI7XG4gICAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgxMjUsIDEsIDYyLCAyMCk7XG4gICAgY2FudmFzQ29udGV4dC5maWxsU3R5bGUgPSBcIiMwNjlcIjtcbiAgICBjYW52YXNDb250ZXh0LmZvbnQgPSBcIjExcHQgbm8tcmVhbC1mb250LTEyM1wiO1xuICAgIGNhbnZhc0NvbnRleHQuZmlsbFRleHQoXCJDd20gZmpvcmRiYW5rIGdseXBocyB2ZXh0IHF1aXosIFxcdWQ4M2RcXHVkZTAzXCIsIDIsIDE1KTtcbiAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IFwicmdiYSgxMDIsIDIwNCwgMCwgMC43KVwiO1xuICAgIGNhbnZhc0NvbnRleHQuZm9udCA9IFwiMThwdCBBcmlhbFwiO1xuICAgIGNhbnZhc0NvbnRleHQuZmlsbFRleHQoXCJDd20gZmpvcmRiYW5rIGdseXBocyB2ZXh0IHF1aXosIFxcdWQ4M2RcXHVkZTAzXCIsIDQsIDQ1KTtcbiAgICBjYW52YXNEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2NhbnZhcyBlcnJvckluZm8gPSAnLCBlKTtcbiAgfVxuICByZXR1cm4gY2FudmFzRGF0YTtcbn07XG5cbmV4cG9ydHMuY2FsY1NIQTEgPSBjYWxjU0hBMTtcblxuLy8gdmFyIGN2c190ZXN0O1xuZXhwb3J0cy5nZXRDYW52YXNIYXNoID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY3ZzX3Rlc3Q7XG4gIGlmICghY3ZzX3Rlc3QpIHtcbiAgICBjdnNfdGVzdCA9IENhbnZhc1Rlc3QoKTtcbiAgfVxuICB2YXIgX3NoYTEgPSBjYWxjU0hBMShjdnNfdGVzdCk7XG4gIHJldHVybiBCYXNlNjRFbmNvZGVVcmxTYWZlKF9zaGExKTsgLy9yZW1vdmUgdGhlIGxlYWRpbmcgd29yZHMgIFxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9maW5nZXJwcmludC9jYW52YXMuanNcbi8vIG1vZHVsZSBpZCA9IDEyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9pbml0L2luaXRMb2FkX2Jhc2UuanNcbiAqIOWIneWni+WMluWfuuehgOaooeWdl++8jOS4jeiDveebtOaOpeS9v+eUqO+8jOmcgOimgemAmui/h2luaXRMb2FkX3BjLmpz5oiWaW5pdExvYWRfd2FwLmpz562J5YW35L2T55qE5Zy65pmv5qih5Z2X6LCD55SoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIEBhdXRob3Igaml6aGEud3lqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhY3Rpb24gPSByZXF1aXJlKCcuL2FjdGlvbicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1c19jb25maWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWc7XG4gICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXG4gICAgICB2YXIgY29udGV4dCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgICAgIHZhciBxdWUgPSBjb250ZXh0W0FQTFVTX1FVRVVFXSB8fCBbXTtcbiAgICAgIHZhciBycyA9IGFjdGlvbi5nZXRGb3JtYXRRdWV1ZShxdWUsICdtZXRhUXVldWUnKTtcbiAgICAgIGNvbnRleHRbQVBMVVNfUVVFVUVdID0gcnMucXVldWU7XG4gICAgICBhY3Rpb24ucHJvY2Vzc0dvbGRsb2dRdWV1ZShycy5mb3JtYXRRdWV1ZSwgdGhpcy5vcHRpb25zLmNvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL21ldGFfcXVldWUuanNcbi8vIG1vZHVsZSBpZCA9IDEyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG4vKipcbiAqIEBwYXJhbXMge0FycmF5fSBRVUVVRVxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuICogfVxuICovXG52YXIgcHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChRVUVVRSwgb3B0cykge1xuICBmdW5jdGlvbiBmKCkge1xuICAgIGlmICghUVVFVUUgfHwgIXV0aWxBcnJheS5pc0FycmF5KFFVRVVFKSB8fCAhUVVFVUUubGVuZ3RoKSByZXR1cm47XG4gICAgLy8g5o6S5bqPXG4gICAgdmFyIHF1ZSA9IGdldEZvcm1hdFF1ZXVlKFFVRVVFKS5xdWV1ZTtcbiAgICB2YXIgdGFzayA9IHt9O1xuICAgIHZhciBkZWxheVRhc2tzID0gW107XG4gICAgd2hpbGUgKHRhc2sgPSBxdWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuICAgICAgcHJvY2Vzc1Rhc2sodGFzaywgb3B0cywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgZGVsYXlUYXNrcy5wdXNoKHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkZWxheVRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGFzayA9IGRlbGF5VGFza3Muc2hpZnQoKSkge1xuICAgICAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBmKCk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KGUpO1xuICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAvLyAgIG1zZzogZVxuICAgIC8vIH0pO1xuICB9XG59O1xuZXhwb3J0cy5wcm9jZXNzR29sZGxvZ1F1ZXVlID0gcHJvY2Vzc0dvbGRsb2dRdWV1ZTtcblxuZnVuY3Rpb24gZ2V0TWV0YUluZm8oKSB7XG4gIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcbiAgcmV0dXJuIG1ldGFfaW5mbztcbn1cblxuZnVuY3Rpb24gZ2V0QXBsdXNIb2xkVHlwZSAoKSB7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgdWFpZCA9IG1ldGFfaW5mby51YWlkICsgJyc7XG4gIGlmICh1YWlkID09PSAnMScgJiYgIW1ldGFfaW5mby5fYW5vbnlfaWQpIHtcbiAgICByZXR1cm4gJ0JMT0NLJztcbiAgfVxuICByZXR1cm4gbWV0YV9pbmZvWydfaG9sZCddIHx8IG1ldGFfaW5mb1snYXBsdXMtd2FpdGluZyddO1xufVxuXG52YXIgQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUgPSBbXTtcbnZhciBBUExVU19IT0xEX0FOT05ZX1FVRVVFID0gW107XG52YXIgQVBMVVNfSE9MRF9RVUVVRSA9IFtdO1xuXG5mdW5jdGlvbiBmaWx0ZXJUYXNrICh0YXNrKSB7XG4gIHZhciBob2xkVHlwZSA9IGdldEFwbHVzSG9sZFR5cGUoKTtcbiAgLy8gY29uc29sZS5sb2coJ2hvbGRUeXBlID09PSAnLCBob2xkVHlwZSk7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgZmxhZyA9IHRydWU7XG5cbiAgLy8gMDogXCJfaG9sZFwiXG4gIC8vIDE6IFwiU1RBUlRcIlxuICB2YXIgYXJncyA9IHRhc2suYXJndW1lbnRzIHx8IFtdO1xuICB2YXIgbWV0YUtleSA9IGFyZ3NbMF07XG4gIHZhciBtZXRhVmFsdWUgPSBhcmdzWzFdO1xuICB2YXIgU1RBUlQgPSAnU1RBUlQnO1xuICBpZiAobWV0YUtleSA9PT0gJ19ob2xkJyAmJiBtZXRhVmFsdWUgPT09IFNUQVJUKSB7XG4gICAgcmV0dXJuIFNUQVJUO1xuICB9XG4gIGlmIChtZXRhS2V5ID09PSAnX2Fub255X2lkJyAmJiBtZXRhVmFsdWUpIHtcbiAgICByZXR1cm4gU1RBUlQ7XG4gIH1cbiAgaWYgKHRhc2sgJiYgL3NlbmRQVnxyZWNvcmR8c2V0UGFnZVNQTXxzZXRNZXRhSW5mb3xhcHBlbmRNZXRhSW5mbyQvLnRlc3QodGFzay5hY3Rpb24pKSB7XG4gICAgc3dpdGNoIChob2xkVHlwZSkge1xuICAgIGNhc2UgJ0JMT0NLJzpcbiAgICAgIGlmICghbWV0YV9pbmZvW2hvbGRUeXBlXSkge1xuICAgICAgICBBUExVU19IT0xEX1FVRVVFLnB1c2godGFzayk7XG4gICAgICAgIGZsYWcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZsYWc7XG59XG5cblxuLy8gdmFyIHByb2Nlc3NlZCA9IGZhbHNlO1xuZnVuY3Rpb24gcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUgKG9wdHMpIHtcbiAgLy8gaWYgKCFwcm9jZXNzZWQpIHtcbiAgLy8gICBwcm9jZXNzZWQgPSB0cnVlO1xuICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1FVRVVFLCBvcHRzKTsgIFxuICAvLyB9XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBxdWV1ZU5hbWU6IGFwbHVzX3F1ZXVlIHx8IGdvbGRsb2dfcXVldWVcbiAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG4gKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcbiAqIH1cbiAqL1xuZXhwb3J0cy5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUgPSBmdW5jdGlvbiAocXVldWVOYW1lLCBvcHRzKSB7XG4gIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuICBxdWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuU0VUX01FVEFfSU5GTywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9VU0VSX0lEICYmIHZhbHVlKSB7XG4gICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9BTk9OWV9JRCAmJiB2YWx1ZSkge1xuICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfQU5PTllfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdfaG9sZCcgJiYgdmFsdWUgPT09ICdTVEFSVCcpIHtcbiAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXRNZXRob2ROYW1lIChrZXksIGlzT3BlbkFwaSkge1xuICBpZiAoaXNPcGVuQXBpICYmIGFwbHVzU3RhdGljLm9wZW5BUElzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAga2V5ID0gJ18nICsga2V5O1xuICB9XG4gIHJldHVybiBrZXk7XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSB0YXNrXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG4gKiB9XG4gKi9cbnZhciBwcm9jZXNzVGFzayA9IGZ1bmN0aW9uKHRhc2ssIG9wdHMsIGNhbGxiYWNrKSB7XG4gIHZhciBpc09wZW5BcGkgPSAhIW9wdHMuaXNPcGVuQXBpO1xuICB2YXIgYWN0aW9uID0gdGFzayA/IHRhc2suYWN0aW9uIDogJyc7XG4gIHZhciBhcmdzID0gdGFzayA/IHRhc2suYXJndW1lbnRzIDogJyc7XG5cbiAgdmFyIHJlc3VsdCA9IGZpbHRlclRhc2sodGFzayk7XG4gIGlmICghcmVzdWx0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB0cnkgeyAvLyDnoa7kv53mn5DkuKrku7vliqHmiafooYzlpLHotKXkuI3kvJrlvbHlk43lhbblroPku7vliqFcbiAgICBpZiAoYWN0aW9uICYmIGFyZ3MgJiYgdXRpbEFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgIHZhciBhID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgb2JqID0gY29udGV4dDtcbiAgICAgIHZhciBfZm4gPSBjb250ZXh0O1xuICAgICAgdmFyIG1ldGhvZE5hbWU7XG4gICAgICBpZiAoYS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgb2JqID0gY29udGV4dFthWzBdXVthWzFdXSB8fCB7fTtcbiAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYVsyXSwgaXNPcGVuQXBpKTtcbiAgICAgICAgX2ZuID0gb2JqW21ldGhvZE5hbWVdID8gb2JqW21ldGhvZE5hbWVdIDogJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAoYS5sZW5ndGgpIHtcbiAgICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhLnNoaWZ0KCksIGlzT3BlbkFwaSk7XG4gICAgICAgICAgX2ZuID0gb2JqID0gb2JqW21ldGhvZE5hbWVdO1xuICAgICAgICAgIGlmICghb2JqKSB7IC8vIOmdnuazlSBhY3Rpb25cbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0Z1bmN0aW9uKF9mbikpIHtcbiAgICAgICAgX2ZuLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0ID09PSAnU1RBUlQnKSB7XG4gICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoZSk7XG4gICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgIC8vICAgbXNnOiBlXG4gICAgLy8gfSk7XG4gIH1cbn07XG5leHBvcnRzLnByb2Nlc3NUYXNrID0gcHJvY2Vzc1Rhc2s7XG5cbnZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuICB2YXIgcXVldWVNYXAgPSB7XG4gICAgc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZTogW10sXG4gICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcbiAgICBzdWJzY3JpYmVRdWV1ZTogW10sXG4gICAgbWV0YVF1ZXVlOiBbXSxcbiAgICBvdGhlcnNRdWV1ZTogW11cbiAgfTtcblxuICB2YXIgcSA9IFtdO1xuICB2YXIgdGFzayA9IHt9O1xuICB3aGlsZSAodGFzayA9IHF1ZXVlLnNoaWZ0KCkpIHsgLy8g5L6d5qyh5omn6KGMIHdpbmRvdy5hcGx1c19xdWV1ZSDkuK3nmoTku7vliqFcbiAgICB0cnkge1xuICAgICAgdmFyIGFjID0gdGFzay5hY3Rpb247XG4gICAgICB2YXIga2V5ID0gdGFzay5hcmd1bWVudHNbMF07XG4gICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3NldE1ldGFJbmZvJykge1xuICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcbiAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgvTWV0YUluZm8vLnRlc3QoYWMpKSB7XG4gICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB1bG9nKCkudyhlKTtcbiAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIC8vICAgbXNnOiBlXG4gICAgICAvLyB9KTtcbiAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG4gICAgfVxuICB9XG4gIHZhciBmb3JtYXRRdWV1ZTtcbiAgaWYgKHR5cGUgJiYgcXVldWVNYXBbdHlwZV0pIHtcbiAgICBmb3JtYXRRdWV1ZSA9IHF1ZXVlTWFwW3R5cGVdO1xuICAgIHF1ZXVlTWFwW3R5cGVdID0gW107XG4gIH1cbiAgcSA9IHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUuY29uY2F0KHF1ZXVlTWFwLm1ldGFRdWV1ZSk7XG4gIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVRdWV1ZSk7XG4gIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUsIHF1ZXVlTWFwLm90aGVyc1F1ZXVlKTtcbiAgcmV0dXJuIHtcbiAgICBxdWV1ZTogcSxcbiAgICBmb3JtYXRRdWV1ZTogZm9ybWF0UXVldWVcbiAgfTtcbn07XG5leHBvcnRzLmdldEZvcm1hdFF1ZXVlID0gZ2V0Rm9ybWF0UXVldWU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hY3Rpb24uanNcbi8vIG1vZHVsZSBpZCA9IDEzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogQXRtQnJpZGdlLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cblxuXG5cInVzZSBzdHJpY3RcIjtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcblxuZnVuY3Rpb24gaW5pdEpTQnJpZGdlKHdpbikge1xuICB2YXIgUHJvbWlzZSA9IHdpbi5Qcm9taXNlOyAvL+S9nOeUqOaYr+WVpe+8n1xuICB2YXIgZG9jID0gd2luLmRvY3VtZW50O1xuICB2YXIgdWEgPSB3aW4ubmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgdmFyIGlzV2luID0gKC9XaW5kb3dzXFxzUGhvbmVcXHMoPzpPU1xccyk/W1xcZFxcLl0rL2kpLnRlc3QodWEpIHx8ICgvV2luZG93c1xcc05UXFxzW1xcZFxcLl0rL2kpLnRlc3QodWEpO1xuICB2YXIgaXNJT1MgPSAoL2lQaG9uZXxpUGFkfGlQb2QvaSkudGVzdCh1YSk7XG4gIHZhciBpc0FuZHJvaWQgPSAoL0FuZHJvaWQvaSkudGVzdCh1YSk7XG4gIHZhciBzaWRCYXNlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDEgPDwgMTYpKTsgLy9zaWQg55qE5L2c55So5piv5ZWl77yfXG4gIHZhciBpbmMgPSAxO1xuICB2YXIgaWZyYW1lUG9vbCA9IFtdO1xuICB2YXIgaWZyYW1lTGltaXQgPSAzO1xuXG4gIHZhciBJRlJBTUVfUFJFRklYID0gJ2lmcmFtZV8nO1xuICB2YXIgUEFSQU1fUFJFRklYID0gJ3BhcmFtXyc7XG5cbiAgdmFyIENBTExfR0NfVElNRSA9IDYwICogMTAwMCAqIDEwO1xuICB2YXIgUEFSQU1fR0NfVElNRSA9IDYwICogMTAwMDtcblxuICB2YXIgSlNCcmlkZ2VfQ29yZSA9IHtcbiAgICB0cmFjZTogZnVuY3Rpb24obmFtZSwgcGFyYW1zLCBzdWNjZXNzQ2FsbCwgZmFpbENhbGwsIHRpbWVvdXQpIHtcbiAgICAgIHJldHVybiBKU0JyaWRnZV9Db3JlLmNhbGwobmFtZSwgcGFyYW1zLCBzdWNjZXNzQ2FsbCwgZmFpbENhbGwsIHRpbWVvdXQpO1xuICAgIH0sXG5cbiAgICBjYWxsOiBmdW5jdGlvbihtZXRob2QsIHBhcmFtcywgc3VjY2VzcywgZmFpbHVyZSwgdGltZW91dCkge1xuICAgICAgdmFyIHNpZCwgcHJvbWlzZTtcbiAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdGltZW91dCA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygc3VjY2VzcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzdWNjZXNzID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKFByb21pc2UgJiYgIXN1Y2Nlc3MgJiYgIWZhaWx1cmUpIHtcbiAgICAgICAgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHN1Y2Nlc3MgPSByZXNvbHZlO1xuICAgICAgICAgIGZhaWx1cmUgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBzaWQgPSBKU0JyaWRnZV9Qcml2YXRlLmdldFNpZCgpO1xuICAgICAgdmFyIGNhbGxJbmZvID0ge1xuICAgICAgICBzdWNjZXNzOiBzdWNjZXNzLFxuICAgICAgICBmYWlsdXJlOiBmYWlsdXJlXG4gICAgICB9O1xuICAgICAgaWYgKHRpbWVvdXQgPiAwKXtcbiAgICAgICAgY2FsbEluZm8udGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBKU0JyaWRnZV9Db3JlLm9uRmFpbHVyZShzaWQsIHtyZXQ6IFwiSFlfVElNRU9VVFwifSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgfVxuXG4gICAgICBKU0JyaWRnZV9Qcml2YXRlLnJlZ2lzdGVyQ2FsbChzaWQsIGNhbGxJbmZvKTtcbiAgICAgIEpTQnJpZGdlX1ByaXZhdGUucmVnaXN0ZXJHQyhzaWQsIHRpbWVvdXQpO1xuXG4gICAgICBKU0JyaWRnZV9Qcml2YXRlLmV2b2tlTmF0aXZlKG1ldGhvZCwgcGFyYW1zLCBzaWQpO1xuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIC8vIOmcgOimgW5hdGl2Zeerr+mAmuefpWpz55qE5pe25YCZ77yI6YCa5L+h77yJ77yM55So6Kem5Y+R5LqL5Lu255qE5pa55byP6L+b6KGMXG4gICAgZmlyZUV2ZW50OiBmdW5jdGlvbihldmVudG5hbWUsIGV2ZW50ZGF0YSkge1xuICAgICAgdmFyIGV2ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ0hUTUxFdmVudHMnKTtcbiAgICAgIGV2LmluaXRFdmVudChldmVudG5hbWUsIGZhbHNlLCB0cnVlKTtcbiAgICAgIGV2LnBhcmFtID0gSlNCcmlkZ2VfUHJpdmF0ZS5wYXJzZURhdGEoZXZlbnRkYXRhKTtcblxuICAgICAgZG9jLmRpc3BhdGNoRXZlbnQoZXYpO1xuICAgIH0sXG5cbiAgICBnZXRQYXJhbTogZnVuY3Rpb24oc2lkKSB7XG4gICAgICByZXR1cm4gSlNCcmlkZ2VfUHJpdmF0ZS5nZXRQYXJhbShzaWQpO1xuICAgIH0sXG5cbiAgICBmaW5kOiBmdW5jdGlvbiAocmVxSWQsIGtlZXBBbGl2ZSkge1xuICAgICAgaWYgKCFrZWVwQWxpdmUpIHtcbiAgICAgICAgSlNCcmlkZ2VfUHJpdmF0ZS51bnJlZ2lzdGVyQ2FsbChyZXFJZCwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uKHNpZCwgZGF0YSwga2VlcEFsaXZlKSB7XG4gICAgICAvLyBuYXRpdmXku6PnoIHlpITnkIbmiJDlip/lkI7vvIzosIPnlKjor6Xmlrnms5XmnaXpgJrnn6Vqc1xuICAgICAgSlNCcmlkZ2VfUHJpdmF0ZS5vbkNvbXBsZXRlKHNpZCwgZGF0YSwgJ3N1Y2Nlc3MnLCBrZWVwQWxpdmUpO1xuICAgIH0sXG5cbiAgICBvbkZhaWx1cmU6IGZ1bmN0aW9uKHNpZCwgZGF0YSkge1xuICAgICAgLy8gbmF0aXZl5Luj56CB5aSE55CG5aSx6LSl5ZCO77yM6LCD55So6K+l5pa55rOV5p2l6YCa55+lanNcbiAgICAgIEpTQnJpZGdlX1ByaXZhdGUub25Db21wbGV0ZShzaWQsIGRhdGEsICdmYWlsdXJlJyk7XG4gICAgfVxuXG4gIH07XG5cbiAgdmFyIEpTQnJpZGdlX1ByaXZhdGUgPSB7XG4gICAgcGFyYW1zOiB7fSxcbiAgICBjYWxsczoge30sXG5cbiAgICBnZXRTaWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gaU9TIDEwLjMg5ZCO56uv5Y+j5LiN6IO96LaF6L+HIDY1NTM2LlxuICAgICAgcmV0dXJuICgoc2lkQmFzZSArIGluYysrKSAlIDY1NTM2KSArICcnO1xuICAgIH0sXG5cbiAgICBidWlsZFBhcmFtOiBmdW5jdGlvbihvYmopIHtcbiAgICAgIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gb2JqIHx8ICcnO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRQYXJhbTogZnVuY3Rpb24oc2lkKSB7XG4gICAgICAvLyDlm6DkuLppb3PkuItpZnJhbWXljY/orq7vvIzlr7nkuo51cmzplb/luqbmnInpmZDliLbvvIzmiYDku6Xlop7liqDkuIDkuKrlj4LmlbDnmoRtYXDjgIJcbiAgICAgIHJldHVybiB0aGlzLnBhcmFtc1tQQVJBTV9QUkVGSVggKyBzaWRdIHx8ICcnO1xuICAgIH0sXG5cbiAgICBzZXRQYXJhbTogZnVuY3Rpb24oc2lkLCBwYXJhbXMpIHtcbiAgICAgIHRoaXMucGFyYW1zW1BBUkFNX1BSRUZJWCArIHNpZF0gPSBwYXJhbXM7XG4gICAgfSxcblxuICAgIHBhcnNlRGF0YTogZnVuY3Rpb24oc3RyKSB7XG4gICAgICB2YXIgcnN0O1xuICAgICAgaWYgKHN0ciAmJiB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJzdCA9IEpTT04ucGFyc2Uoc3RyKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgcnN0ID0ge3JldDonSFlfUkVTVUxUX1BBUlNFX0VSUk9SJywgb3JpZ2luVmFsdWU6IHN0cn07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJzdCA9IHN0ciB8fCB7fTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJzdDtcbiAgICB9LFxuXG4gICAgcmVnaXN0ZXJDYWxsOiBmdW5jdGlvbihzaWQsIGNhbGxJbmZvKSB7XG4gICAgICB0aGlzLmNhbGxzW3NpZF0gPSBjYWxsSW5mbztcbiAgICB9LFxuXG4gICAgdW5yZWdpc3RlckNhbGw6IGZ1bmN0aW9uKHNpZCwga2VlcEFsaXZlKSB7XG4gICAgICB2YXIgY2FsbEluZm8gPSB0aGlzLmNhbGxzW3NpZF0gfHwge307XG5cbiAgICAgIHZhciB0aW1lb3V0ID0gY2FsbEluZm8udGltZW91dDtcbiAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFrZWVwQWxpdmUpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuY2FsbHNbc2lkXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhbGxJbmZvO1xuICAgIH0sXG5cbiAgICB1c2VJZnJhbWU6IGZ1bmN0aW9uKHNpZCwgdXJsKSB7XG4gICAgICB2YXIgaWZyYW1laWQgPSBJRlJBTUVfUFJFRklYICsgc2lkO1xuICAgICAgdmFyIGlmcmFtZSA9IGlmcmFtZVBvb2wucG9wKCk7XG5cbiAgICAgIGlmICghaWZyYW1lKSB7XG4gICAgICAgIGlmcmFtZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnZnJhbWVib3JkZXInLCAnMCcpO1xuICAgICAgICBpZnJhbWUuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDowO2hlaWdodDowO2JvcmRlcjowO2Rpc3BsYXk6bm9uZTsnO1xuICAgICAgfVxuXG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdpZCcsIGlmcmFtZWlkKTtcbiAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG5cbiAgICAgIGlmICghaWZyYW1lLnBhcmVudE5vZGUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgICAgICB9LDUpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZXRyaWV2ZUlmcmFtZSA6IGZ1bmN0aW9uKHNpZCkge1xuICAgICAgdmFyIGlmcmFtZWlkID0gSUZSQU1FX1BSRUZJWCArIHNpZDtcbiAgICAgIHZhciBpZnJhbWUgPSBkb2MucXVlcnlTZWxlY3RvcignIycgKyBpZnJhbWVpZCk7XG5cbiAgICAgIGlmIChpZnJhbWUpIHtcbiAgICAgICAgaWYgKGlmcmFtZVBvb2wubGVuZ3RoID49IGlmcmFtZUxpbWl0KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRvYy5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8g5pyJ5pe2IGlmcmFtZSDnmoQgcGFyZW50IOW5tuS4jeaYryBib2R577yM5oiW6ICF54q25oCB5LiN5q2j56Gu77yM5Lya5a+86Ie05oqb5byC5bi4XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOmBv+WFjeWQjOS4gOS4qiBpZnJhbWUg6YeN5aSN5o+S5YWl5Lik5qyhIGlmcmFtZVBvbGxcbiAgICAgICAgICBpZiAoaWZyYW1lUG9vbC5pbmRleE9mKGlmcmFtZSkgPCAwKSB7XG4gICAgICAgICAgICBpZnJhbWVQb29sLnB1c2goaWZyYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZXZva2VOYXRpdmU6IGZ1bmN0aW9uKG1ldGhvZCwgcGFyYW1zLCBzaWQpIHtcbiAgICAgIHZhciBjbWQgPSB7XG4gICAgICAgIGNsYXNzTmFtZSA6IFwiVW1lbmc0QXBsdXNcIixcbiAgICAgICAgbWV0aG9kTmFtZSA6IG1ldGhvZCxcbiAgICAgICAgc2lkOiBzaWQsXG4gICAgICAgIGNhbGxiYWNrOiAnJyxcbiAgICAgICAgcGFyYW1zIDogcGFyYW1zXG4gICAgICB9O1xuICAgICAgdmFyIGpzb25TdHIgPSBKU09OLnN0cmluZ2lmeShjbWQpO1xuICAgICAgXG4gICAgICB1bG9nKCkuaSgnVW1lbmc0QXBsdXNGbHV0dGVyID09PT09ICcsIHdpbmRvdy5VbWVuZzRBcGx1c0ZsdXR0ZXIpO1xuXG4gICAgICBpZiAoaXNXaW4pIHtcbiAgICAgICAgdWxvZygpLncoJ2pzYnJpZGdlIG5vdCBzdXBwb3J0IHdpbmRvd3Mgb3MgZGV2aWNlcy4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0lPUykge1xuICAgICAgICAgIGlmICh3aW5kb3cud2Via2l0ICYmIHdpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzICYmIHdpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzLlVtZW5nNEFwbHVzICYmIHdpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzLlVtZW5nNEFwbHVzLnBvc3RNZXNzYWdlKSB7XG4gICAgICAgICAgICB1bG9nKCkuaSgnanNicmlkZ2UgbmF0aXZlIGxvZ3M6ICcgKyBqc29uU3RyKTtcbiAgICAgICAgICAgIHdpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzLlVtZW5nNEFwbHVzLnBvc3RNZXNzYWdlKGpzb25TdHIpO1xuICAgICAgICAgIH0gZWxzZSBpZih3aW5kb3cuVW1lbmc0QXBsdXNGbHV0dGVyKSB7XG4gICAgICAgICAgICB3aW5kb3cuVW1lbmc0QXBsdXNGbHV0dGVyLnBvc3RNZXNzYWdlKGpzb25TdHIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1bG9nKCkudygnanNicmlkZ2UgaU9TIGVudmlyb25tZW50IGludmFsaWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBbmRyb2lkKSB7XG4gICAgICAgICAgaWYgKHdpbmRvdy5VbWVuZzRBcGx1cykge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5VbWVuZzRBcGx1cy5DQUxMKSB7XG4gICAgICAgICAgICAgIHVsb2coKS5pKCdqc2JyaWRnZSBuYXRpdmUgbG9nczogJyArIGpzb25TdHIpO1xuICAgICAgICAgICAgICB3aW5kb3cuVW1lbmc0QXBsdXMuQ0FMTChqc29uU3RyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LlVtZW5nNEFwbHVzLmNhbGwpIHtcbiAgICAgICAgICAgICAgdWxvZygpLmkoJ2pzYnJpZGdlIG5hdGl2ZSBoYW1vbnlvcyBsb2dzOiAnICsganNvblN0cik7XG4gICAgICAgICAgICAgIHdpbmRvdy5VbWVuZzRBcGx1cy5jYWxsKGpzb25TdHIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdWxvZygpLncoJ2pzYnJpZGdlIEFuZHJvaWQgZW52aXJvbm1lbnQgZXJyb3IsIFVtZW5nNEFwbHVzIGV4aXN0cywgYnV0IG1ldGhvZCBub3QgZm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYod2luZG93LlVtZW5nNEFwbHVzRmx1dHRlcikge1xuICAgICAgICAgICAgd2luZG93LlVtZW5nNEFwbHVzRmx1dHRlci5wb3N0TWVzc2FnZShqc29uU3RyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdWxvZygpLncoJ2pzYnJpZGdlIEFuZHJvaWQgZW52aXJvbm1lbnQgaW52YWxpZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICByZWdpc3RlckdDOiBmdW5jdGlvbihzaWQsIHRpbWVvdXQpIHtcbiAgICAgIC8vIOWeg+WcvuWbnuaUtlxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIGNhbGxHQ1RpbWUgPSBNYXRoLm1heCh0aW1lb3V0IHx8IDAsIENBTExfR0NfVElNRSk7XG4gICAgICB2YXIgcGFyYW1HQ1RpbWUgPSBNYXRoLm1heCh0aW1lb3V0IHx8IDAsIFBBUkFNX0dDX1RJTUUpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoYXQudW5yZWdpc3RlckNhbGwoc2lkKTtcbiAgICAgIH0sIGNhbGxHQ1RpbWUpO1xuXG4gICAgICBpZiAoaXNJT1MpIHtcbiAgICAgICAgLy8gaW9z5LiL5aSE55CGcGFyYW1z55qE5Zue5pS2XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBpZiAodGhhdC5wYXJhbXNbUEFSQU1fUFJFRklYICsgc2lkXSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoYXQucGFyYW1zW1BBUkFNX1BSRUZJWCArIHNpZF07XG4gICAgICAgICAgfVxuICAgICAgICB9LCBwYXJhbUdDVGltZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKHNpZCwgZGF0YSwgdHlwZSwga2VlcEFsaXZlKSB7XG4gICAgICB2YXIgY2FsbCA9IHRoaXMudW5yZWdpc3RlckNhbGwoc2lkLCBrZWVwQWxpdmUpO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBjYWxsLnN1Y2Nlc3M7XG4gICAgICB2YXIgZmFpbHVyZSA9IGNhbGwuZmFpbHVyZTtcblxuICAgICAgZGF0YSA9IHRoaXMucGFyc2VEYXRhKGRhdGEpO1xuXG4gICAgICB2YXIgcmV0ID0gZGF0YS5yZXQ7XG4gICAgICBpZiAodHlwZW9mIHJldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGF0YSA9IGRhdGEudmFsdWUgfHwgZGF0YTtcbiAgICAgICAgaWYgKCFkYXRhLnJldCkge1xuICAgICAgICAgIGRhdGEucmV0ID0gW3JldF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUgPT09ICdzdWNjZXNzJykge1xuICAgICAgICBzdWNjZXNzICYmIHN1Y2Nlc3MoZGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdmYWlsdXJlJykge1xuICAgICAgICBmYWlsdXJlICYmIGZhaWx1cmUoZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0lPUykgeyAgICAvL2lPU+S4i+WbnuaUtmlmcmFtZVxuICAgICAgICB0aGlzLnJldHJpZXZlSWZyYW1lKHNpZCk7XG4gICAgICAgIGlmICh0aGlzLnBhcmFtc1tQQVJBTV9QUkVGSVggKyBzaWRdKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMucGFyYW1zW1BBUkFNX1BSRUZJWCArIHNpZF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIEpTQnJpZGdlX0NvcmU7XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7ICBcbiAgICBzdWJzY3JpYmVMb2dzOiBmdW5jdGlvbiAoYWN0aW9uLCBjYWxsYmFjaykge1xuICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZShhY3Rpb24sIGZ1bmN0aW9uIChvcmlEYXRhcykge1xuICAgICAgICBpZiAob3JpRGF0YXMuc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgY2FsbGJhY2sob3JpRGF0YXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgaXNKc0JyaWRnZVJlYWR5OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAod2luZG93LndlYmtpdCAmJiB3aW5kb3cud2Via2l0Lm1lc3NhZ2VIYW5kbGVycyAmJiB3aW5kb3cud2Via2l0Lm1lc3NhZ2VIYW5kbGVycy5VbWVuZzRBcGx1cyAmJiB3aW5kb3cud2Via2l0Lm1lc3NhZ2VIYW5kbGVycy5VbWVuZzRBcGx1cykgfHwgd2luZG93LlVtZW5nNEFwbHVzO1xuICAgIH0sXG5cbiAgICBjYWxsVVQ6IGZ1bmN0aW9uIChhY3Rpb24sIHBhcmFtcykge1xuICAgICAgLy8gdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHBhcmFtcy5fYnJpZGdlTmFtZSA9IHRoaXMub3B0aW9ucy5icmlkZ2VOYW1lIHx8ICdBdG1CcmlkZ2UnO1xuICAgICAgcGFyYW1zLl9icmlkZ2VWZXJzaW9uID0gdGhpcy5vcHRpb25zLmJyaWRnZVZlcnNpb24gfHwgJzEuMC4wJztcbiAgICAgIC8vIHV0aWxMb2dnZXIuZGVidWdMb2coeyBtc2c6ICflvZPliY3pgI/kvKDmtojmga/kvZM6ICcrSlNPTi5zdHJpbmdpZnkocGFyYW1zKX0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgd2luZG93LkF0bUJyaWRnZS50cmFjZShcbiAgICAgICAgICBhY3Rpb24sIHBhcmFtcywgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgIHVsb2coKS5pKCdTVUNDRVNTOicsIG8pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIHVsb2coKS53KCdGQUlMVVJFOicsIGVycik7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgdWxvZygpLncoZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGNhbGxNZXJnZVRvTmF0aXZlR1A6IGZ1bmN0aW9uKGFjdGlvbiwgdmFsdWUpIHtcbiAgICAgIHVsb2coKS5pKCdjdXJyZW50IGJyaWRnZSBncDogJysgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgIC8vIHV0aWxMb2dnZXIuZGVidWdMb2coe21zZzogJ+W9k+WJjemAj+S8oOWFqOWxgOWxnuaApzogJysgSlNPTi5zdHJpbmdpZnkodmFsdWUpfSk7XG4gICAgfSxcblxuICAgIHdhdGNoTE9HOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgX3NlbGYuc3Vic2NyaWJlTG9ncygnbXdfY2hhbmdlX3B2JywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGRhdGEud2hhdF90b19zZW5kIHx8IHt9O1xuICAgICAgICB2YXIgcGFyYW1zID0gd2hhdF90b19zZW5kLnB2ZGF0YVRvVW1OYXRpdmUgfHwge307XG4gICAgICAgIF9zZWxmLmNhbGxVVCgnc2VuZFBWJywgcGFyYW1zKTtcbiAgICAgIH0pO1xuICAgICAgX3NlbGYuc3Vic2NyaWJlTG9ncygnbXdfY2hhbmdlX2hqbGonLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2YXIgd2hhdF90b19zZW5kID0gZGF0YS53aGF0X3RvX3NlbmQgfHwge307XG4gICAgICAgIHZhciBwYXJhbXMgPSB3aGF0X3RvX3NlbmQuaGpsamRhdGFUb1VtTmF0aXZlIHx8IHt9O1xuICAgICAgICBfc2VsZi5jYWxsVVQoJ3NlbmRFdmVudCcsIHBhcmFtcyk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbigpe1xuICAgICAgaWYgKCF3aW5kb3cuQXRtQnJpZGdlKSB7XG4gICAgICAgIHZhciBBdG1CcmlkZ2UgPSBpbml0SlNCcmlkZ2Uod2luZG93KTtcbiAgICAgICAgd2luZG93LkF0bUJyaWRnZSA9IEF0bUJyaWRnZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHdpbmRvdy5BdG1CcmlkZ2UpIHtcbiAgICAgICAgdGhpcy53YXRjaExPRygpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfanNCcmlkZ2UvQXRtQnJpZGdlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvaW5pdC9pbml0TG9hZF9iYXNlLmpzXG4gKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBAYXV0aG9yIGppemhhLnd5aiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFjdGlvbiA9IHJlcXVpcmUoJy4vYWN0aW9uJyk7XG5cbnZhciBRdWV1ZSA9IEJhc2UuZXh0ZW5kKHtcbiAgcHVzaDogZnVuY3Rpb24odGFzaykge1xuICAgIHRoaXMubGVuZ3RoKys7XG4gICAgYWN0aW9uLnByb2Nlc3NUYXNrKHRhc2ssIHRoaXMub3B0cyk7ICBcbiAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBwcm9jZXNzQXBsdXNRdWV1ZTogZnVuY3Rpb24gKHF1ZXVlTmFtZSkge1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIHF1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKHF1ZXVlTmFtZSk7XG4gICAgICBhY3Rpb24ucHJvY2Vzc0dvbGRsb2dRdWV1ZShxdWUsIG9wdHMpO1xuICAgICAgdXRpbEdvbGRsb2cuc2V0R2xvYmFsVmFsdWUocXVldWVOYW1lLCBRdWV1ZS5jcmVhdGUoe1xuICAgICAgICBvcHRzOiBvcHRzLCBcbiAgICAgICAgc3RhcnRMZW5ndGg6IHF1ZS5sZW5ndGgsXG4gICAgICAgIGxlbmd0aDogMFxuICAgICAgfSkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIHtTdHJpbmd9IHR5cGVcbiAgICAgKi9cbiAgICBydW46ICBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuICAgICAgdmFyIEFQTFVTX1FVRVVFID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRTtcblxuICAgICAgdGhpcy5wcm9jZXNzQXBsdXNRdWV1ZShBUExVU19RVUVVRSk7XG5cbiAgICAgIGlmIChBUExVU19RVUVVRSA9PT0gJ2FwbHVzX3F1ZXVlJykge1xuICAgICAgICB0aGlzLnByb2Nlc3NBcGx1c1F1ZXVlKCdnb2xkbG9nX3F1ZXVlJyk7XG4gICAgICB9XG4gICAgICBhY3Rpb24uc3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlKEFQTFVTX1FVRVVFLCB0aGlzLm9wdGlvbnMuY29uZmlnKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvYXBsdXNfcXVldWUuanNcbi8vIG1vZHVsZSBpZCA9IDEzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog6L+Z5piv5LiA5Liq5Yqg6L295Zmo77yM55So5LqO54Ot5Yqg6L29SlPmj5Lku7ZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgdXRpbERvbSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRG9tJyk7XG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xuLy8gdmFyIHBsdWdpbkxvYWRlck1hcCA9IHt9O1xuLyoqXG4gKiBET01SZWFkeeWQjuW8gOWni+aJp+ihjOWKoOi9vWFwbHVzSlPmj5Lku7bnmoTliqjkvZxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtcyB7T2JqZWN0fSBvcHRpb25zIHtcbiAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cbiAgICAgKiB9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9LFxuXG4gICAgLy8gLyoqXG4gICAgLy8gICog5Yqg6L296Ieq5Yqo5pud5YWJXFzoh6rliqjngrnlh7vnmoRqc1xuICAgIC8vICAqIEBwYXJhbXMge1N0cmluZ30gbWV0YUtleSAnYXBsdXMtYXV0by1leHAnIHwgJ2FwbHVzLWF1dG8tY2xrJ1xuICAgIC8vICAqIEBwYXJhbXMge1N0cmluZ30gbWV0YVZhbHVlXG4gICAgLy8gICovXG4gICAgLy8gbG9hZEFwbHVzUGx1Z2luOiBmdW5jdGlvbiAobWV0YUtleSkge1xuICAgIC8vICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgLy8gICB2YXIgY2RuUGF0aCA9IGNvbmZpZ1ttZXRhS2V5XTtcbiAgICAvLyAgIHZhciBwbHVnaW5fcGF0aHMgPSBhcGx1cy5nZXRDZG5QYXRoKCkgKyBjZG5QYXRoO1xuICAgIC8vICAgaWYgKGNkblBhdGggJiYgIWFwbHVzW2NvbmZpZy5nbG9iYWxOYW1lXSAmJiAhcGx1Z2luTG9hZGVyTWFwW2NkblBhdGhdKSB7XG4gICAgLy8gICAgIHV0aWxEb20uYWRkU2NyaXB0KHBsdWdpbl9wYXRocyk7XG4gICAgLy8gICAgIHBsdWdpbkxvYWRlck1hcFtjZG5QYXRoXSA9IHRydWU7XG4gICAgLy8gICB9XG4gICAgLy8gfSxcblxuICAgIGFkZFN0eWxlOiBmdW5jdGlvbiAoaWQsIHN0eWxlVXJsKSB7XG4gICAgICB2YXIgc3R5bGVJZCA9IGlkICsgJ19zdHlsZSc7XG4gICAgICB2YXIgc3R5bGVOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3R5bGVJZCk7XG4gICAgICBpZiAoIXN0eWxlTm9kZSkge1xuICAgICAgICBzdHlsZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG4gICAgICAgIHN0eWxlTm9kZS5pZCA9IHN0eWxlSWQ7XG4gICAgICAgIHN0eWxlTm9kZS5ocmVmID0gc3R5bGVVcmw7XG4gICAgICAgIHN0eWxlTm9kZS5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgICAgIHN0eWxlTm9kZS50eXBlID0gJ3RleHQvY3NzJztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKS5pdGVtKDApLmFwcGVuZENoaWxkKHN0eWxlTm9kZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIGlzX2luX2lmcmFtZSA9IHBhcmVudCAhPT0gc2VsZjsgIC8vIOW9k+WJjemhtemdouaYr+WQpuWcqCBpZnJhbWUg5LitXG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIGlmICghaXNfaW5faWZyYW1lICYmIGNvbmZpZy51cmxSdWxlcykge1xuICAgICAgICBlYWNoKGNvbmZpZy51cmxSdWxlcywgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCh2LnJ1bGUpO1xuICAgICAgICAgIHZhciBtYXRjaGVkSW5MUztcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbWF0Y2hlZEluTFMgPSB2LmlkID8gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0odi5pZCkgOiAnJztcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgIGlmIChyZWcudGVzdChsb2NhdGlvbi5ocmVmKSB8fCBtYXRjaGVkSW5MUykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0odi5pZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgaWYgKHV0aWxBcnJheS5pc0FycmF5KHYuY2RuUGF0aCkpIHtcbiAgICAgICAgICAgICAgZWFjaCh2LmNkblBhdGgsIGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgICAgICAgICAgaWYgKC9cXC5jc3MkLy50ZXN0KHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICBfc2VsZi5hZGRTdHlsZSh2LmlkLCBwYXRoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC9cXC5qcy8udGVzdChwYXRoKSkge1xuICAgICAgICAgICAgICAgICAgdXRpbERvbS5hZGRTY3JpcHQocGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHV0aWxEb20uYWRkU2NyaXB0KHYuY2RuUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ3NldE1ldGFJbmZvJywgZnVuY3Rpb24gKG1ldGFLZXksIG1ldGFWYXVlKSB7XG4gICAgICAvLyAgIF9zZWxmLmxvYWRBcGx1c1BsdWdpbihtZXRhS2V5LCBtZXRhVmF1ZSk7XG4gICAgICAvLyB9KTtcbiAgICAgIC8vIGlmICgvYXBsdXNfd2VidnRfbWVzc2FnZXIvLnRlc3QobG9jYXRpb24uaHJlZikpIHtcbiAgICAgIC8vICAgdXRpbERvbS5hZGRTY3JpcHQocGx1Z2luX3BhdGhzKTtcbiAgICAgIC8vIH1cbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc193ZWIvbGliX2hvdC9ob3RfbG9hZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcHYvbWFpbi5qc1xuICog6Ieq5YqoUFbmj5Lku7ZcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIOWPr+inhuWMluiHquWKqHB25LiO6Ieq5YqocHbmiZPpgJrvvIzoi6XmsqHmnInlj6/op4bljJZwdu+8jOWImem7mOiupOS4iuaKpeiHquWKqHB2XG4gICAgICBpZiAoIWFwbHVzLl9hcGx1c192dF9jZmcpIHtcbiAgICAgICAgcmVxdWlyZSgnLi9saWJfYXV0b3B2L21haW4nKSgpOyAgXG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9hcGx1c19hcHZfaW5qZWN0X3VtLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IG1haW4uanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbid1c2Ugc3RyaWN0JztcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG5cbmZ1bmN0aW9uIHNlbmRQVigpIHtcbiAgdmFyIHEgPSAod2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSkpO1xuICBxLnB1c2goe1xuICAgIGFjdGlvbjogJ2FwbHVzLnNlbmRQVicsXG4gICAgLy8gQOmSsOaYrSDljZXpobXlupTnlKjpnIDkvKDpgJIgaXNfYXV0byA9IGZhbHNlXG4gICAgLy8g5Y6f5Zug5Li6IGNhbl90b19zZW5kUFYg5Luj56CB5Yqg5LqG6ZmQ5Yi2XG4gICAgYXJndW1lbnRzOiBbeyBpc19hdXRvOiBmYWxzZSwgdHJhY2tfdHlwZTogXCIxXCIgfSwge31dXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBsb2dQVigpIHsgIFxuICAvLyBA5paH5b+DIOWFqOmdoueCueWMuuWIhuWfi+eCueaWueW8j++8jHRyYWNrX3R5cGUgIFxuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIHZhciBwYWdlQ29uZmlnID0gYXBsdXMgJiYgYXBsdXMuZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKTtcbiAgaWYgKHBhZ2VDb25maWcpIHtcbiAgICBpZiAocGFnZUNvbmZpZy5oYXNoTW9kZSkge1xuICAgICAgdmFyIGhhc2hWYWwgPSBsb2NhdGlvbi5oYXNoO1xuICAgICAgaWYgKHBhZ2VDb25maWdbaGFzaFZhbF0pIHtcbiAgICAgICAgaWYgKCFwYWdlQ29uZmlnW2hhc2hWYWxdLnNraXBNZSkge1xuICAgICAgICAgIHNlbmRQVigpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZW5kUFYoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICBpZiAocGFnZUNvbmZpZ1twYXRobmFtZV0pIHtcbiAgICAgICAgaWYgKCFwYWdlQ29uZmlnW3BhdGhuYW1lXS5za2lwTWUpIHtcbiAgICAgICAgICBzZW5kUFYoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VuZFBWKCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNlbmRQVigpO1xuICB9ICBcbn07XG5cbmZ1bmN0aW9uIHNlbmRQVkluSW5pdCgpIHtcbiAgaWYgKCFhcGx1cy5fYXBsdXNfYXB2KSB7XG4gICAgbG9nUFYoKTtcbiAgfSBlbHNlIHtcbiAgICBhcGx1cy5fYXBsdXNfYXB2ID0ge1xuICAgICAgc3RhdHVzOiAnY29tcGxldGUnXG4gICAgfTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgc2VuZFBWSW5Jbml0KCk7XG4gIHV0aWxVcmwud2F0Y2hIaXN0b3J5Q2hhbmdlKGxvZ1BWKTtcbiAgdXRpbFVybC53YXRjaEhhc2hDaGFuZ2UobG9nUFYpO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfYXV0b3B2L21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDEzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogYXBsdXNfYXV0b3B2X2luamVjdC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHJlcXVpcmUoJy4vbGliX2Nsa19hdXRvdHJhY2svbWFpbicpKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9hcGx1c19hdXRvdHJhY2tfaW5qZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSAxMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IG1haW4uanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblxuLy8gdmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG52YXIgZXZlbnRVdGlscyA9IHJlcXVpcmUoJy4vZXZlbnRVdGlscycpO1xudmFyIHV0aWxPYmplY3QgPSByZXF1aXJlKCdAdXRpbHMvdXRpbE9iamVjdCcpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBlYWNoTWFwID0gcmVxdWlyZSgnQHV0aWxzL2VhY2hNYXAnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBhc3NpZ24gPSByZXF1aXJlKCdAdXRpbHMvYXNzaWduJyk7XG52YXIgdXRpbEhhc2ggPSByZXF1aXJlKFwiQHV0aWxzL3V0aWxIYXNoXCIpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xuXG5mdW5jdGlvbiBvdGhlclRhZ3MoKSB7XG4gIHZhciB0YWdzID0gW107XG4gIHZhciBhdXRvRWxlbU1ldGEgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfQ09ORklHKTtcbiAgaWYgKGF1dG9FbGVtTWV0YSAmJiBhdXRvRWxlbU1ldGEuY29sbGVjdF90YWdzICYmIHV0aWxPYmplY3QuaXNPYmplY3QoYXV0b0VsZW1NZXRhLmNvbGxlY3RfdGFncykpIHtcbiAgICBlYWNoTWFwKGF1dG9FbGVtTWV0YS5jb2xsZWN0X3RhZ3MsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuICAgICAgdmFsdWUgJiYgdGFncy5wdXNoKGtleSk7XG4gICAgfSk7XG4gIH0gXG4gIHJldHVybiB0YWdzO1xufTtcblxuZnVuY3Rpb24gcmVtb3RlSWdub3JlVGFncygpIHtcbiAgcmV0dXJuIGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19DT05GSUdfUkVNT1RFKSB8fCBbXTtcbn07XG5cbmZ1bmN0aW9uIGdldFRhcmdldEVsZW1lbnQodGFyZ2V0KSB7XG4gIHZhciBpID0gdGFyZ2V0O1xuICBpZiAoJ29iamVjdCcgIT09IHR5cGVvZiBpKSByZXR1cm4gbnVsbDtcbiAgaWYgKCdzdHJpbmcnICE9PSB0eXBlb2YgaS50YWdOYW1lKSByZXR1cm4gbnVsbDtcbiAgdmFyIG4gPSBpLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKFwiYm9keVwiID09PSBuLnRvTG93ZXJDYXNlKCkgfHwgXCJodG1sXCIgPT09IG4udG9Mb3dlckNhc2UoKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9ICBcbiAgaWYgKCFpIHx8ICFpLnBhcmVudE5vZGUgfHwgIWkucGFyZW50Tm9kZS5jaGlsZHJlbikgcmV0dXJuIG51bGw7XG4gIHZhciBwYXJlbnROb2RlID0gaS5wYXJlbnROb2RlO1xuICBcbiAgdmFyIG9UYWdzID0gb3RoZXJUYWdzKCk7XG4gIHZhciBpZ25vcmVUYWdzID0gcmVtb3RlSWdub3JlVGFncygpO1xuICBcbiAgaWYgKGRvbVV0aWxzLmhhc0F0dHJpYnV0ZSh0YXJnZXQsIFwiYXBsdXMtYXV0b3RyYWNrLW9mZlwiKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChpZ25vcmVUYWdzLmxlbmd0aCA+IDAgJiYgdXRpbEFycmF5LmluZGV4b2YoaWdub3JlVGFncywgbikgPiAtMSkge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyDmt7vliqDlsZ7mgKdcbiAgaWYgKFwiYVwiID09PSBuIHx8IFwiYnV0dG9uXCIgPT09IG4gfHwgXCJpbnB1dFwiID09PSBuIHx8IFwidGV4dGFyZWFcIiA9PT0gbikge1xuICAgIHJldHVybiBpO1xuICB9XG4gIFxuICBpZiAoXCJidXR0b25cIiA9PT0gcGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgfHwgXCJhXCIgPT09IHBhcmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgcmV0dXJuIHBhcmVudE5vZGU7XG4gIH1cblxuICBpZiAodXRpbEFycmF5LmluZGV4b2Yob1RhZ3MsIG4pID4gLTEpIHJldHVybiBpO1xuXG4gIHZhciBtYXBQcmV2Tm9kZSA9IGRvbVV0aWxzLmdldFByZXYocGFyZW50Tm9kZSk7XG4gIGlmIChcbiAgICBcImFyZWFcIiA9PT0gbiAmJiBcbiAgICBcIm1hcFwiID09PSBwYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAmJiBcbiAgICBtYXBQcmV2Tm9kZS50YWdOYW1lICYmIFwiaW1nXCIgPT09IG1hcFByZXZOb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKVxuICApIHtcbiAgICByZXR1cm4gbWFwUHJldk5vZGU7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHNlbmRFdmVudChwYXJhbXMpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXNfcXVldWUgPSAod2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSkpO1xuICAgIHZhciB1c2VyRXZlbnRDb2RlID0gbnVsbDtcbiAgICBpZiAocGFyYW1zWydjbGstbG9na2V5J10pIHtcbiAgICAgIHVzZXJFdmVudENvZGUgPSBwYXJhbXNbJ2Nsay1sb2drZXknXTtcbiAgICAgIGRlbGV0ZSBwYXJhbXNbJ2Nsay1sb2drZXknXTtcbiAgICB9XG4gICAgdmFyIGV2ZW50X2NvZGU7XG4gICAgdmFyIGVrdl9oYXNoX2NvZGUgPSB1dGlsSGFzaC5oYXNoKHV0aWwuZ2V0QXBwS2V5KCkpICsgdXRpbEhhc2guaGFzaChwYXJhbXMuYXAuZWxlbWVudF9zZWxlY3RvciwgdXRpbC5nZXRBcHBLZXkoKSk7XG4gICAgZXZlbnRfY29kZSA9IHVzZXJFdmVudENvZGUgfHwgZWt2X2hhc2hfY29kZTtcblxuICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgIGFyZ3VtZW50czogW2V2ZW50X2NvZGUsIFwiQ0xLXCIsIHBhcmFtcyB8fCB7fV1cbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ2F1dG90cmFjayBldmVudCBzZW5kIGZhaWxlZCwgZT0nLCBlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50RGF0YUF0dHJpYnV0ZXModGFyZ2V0KSB7XG4gIC8vIGF1dG9fZWxlbWVudCDkuLrkuLTml7blj5jph4/vvIznlKjkuo7mjqfliLblhajln4vngrnoh6rliqjmjqfku7bvvIzlm6DkuLrlhajln4vngrnkuovku7bmjqfliLbkuI3lrozmlbRcbiAgdmFyIG9iaiA9IHtpc19hdXRvOiAxLCBhdXRvX2VsZW1lbnQ6IDF9OyAvL+WFqOWfi+eCueWcuuaZr++8jOeCueWHu+S6i+S7tuaJk+iHquWKqOagh1xuICB0cnkge1xuICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0Lmhhc0F0dHJpYnV0ZXMpIHtcbiAgICAgIHZhciBhdHRycyA9IHRhcmdldC5hdHRyaWJ1dGVzO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIga2V5ID0gYXR0cnNbaV0ubmFtZSB8fCBcIlwiO1xuICAgICAgICB2YXIgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICAgICAgaWYgKGtleSAmJiBrZXkuaW5kZXhPZihcImRhdGEtXCIpID4gLTEpIHtcbiAgICAgICAgICB2YXIgcktleSA9IGtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKTtcbiAgICAgICAgICBvYmpbcktleV0gPSBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHVsb2coKS53KGVycm9yICYmIGVycm9yLm1lc3NhZ2UpO1xuICB9ICBcbiAgcmV0dXJuIG9iajtcbn07XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRJbmZvKHRhcmdldCkge1xuICB2YXIgcmVzdWx0ID0gZ2V0RWxlbWVudERhdGFBdHRyaWJ1dGVzKHRhcmdldCk7XG4gIGlmICh0YXJnZXQpIHtcbiAgICByZXN1bHQgPSBhc3NpZ24ocmVzdWx0LCB7XG4gICAgICBhcDoge1xuICAgICAgICBlbGVtZW50X3R5cGU6IHRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGVsZW1lbnRfbmFtZTogdGFyZ2V0LmdldEF0dHJpYnV0ZSAmJiB0YXJnZXQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSB8fCBcIlwiLFxuICAgICAgICBlbGVtZW50X2lkOiB0YXJnZXQuZ2V0QXR0cmlidXRlICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSB8fCBcIlwiLFxuICAgICAgICBlbGVtZW50X2NsYXNzX25hbWU6IFwic3RyaW5nXCIgPT0gdHlwZW9mIHRhcmdldC5jbGFzc05hbWUgPyB0YXJnZXQuY2xhc3NOYW1lIDogXCJcIixcbiAgICAgICAgZWxlbWVudF9jb250ZW50OiBkb21VdGlscy5nZXRFbGVtZW50Q29udGVudCh0YXJnZXQsIHRhcmdldC50YWdOYW1lKSB8fCBcIlwiLFxuICAgICAgICBlbGVtZW50X3NlbGVjdG9yOiBkb21VdGlscy5nZXREb21TZWxlY3Rvcih0YXJnZXQpIHx8IFwiXCIsXG4gICAgICAgIGVsZW1lbnRfcGF0aDogZG9tVXRpbHMuZ2V0RWxlbWVudFBhdGgodGFyZ2V0KVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7IFxufTtcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgZnVuY3Rpb24gZXZlbnRIYW5kbGVyKGUpIHtcbiAgICBpZiAoIWUpIHJldHVybiBmYWxzZTtcbiAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgdmFyIHRhcmdldENhblJlY29yZCA9IGdldFRhcmdldEVsZW1lbnQodGFyZ2V0KTsgICAgXG4gICAgdGFyZ2V0Q2FuUmVjb3JkICYmIHNlbmRFdmVudChnZXRFbGVtZW50SW5mbyh0YXJnZXRDYW5SZWNvcmQpKTtcbiAgfVxuICBldmVudFV0aWxzLmFkZEhhbmRsZXIoZG9jdW1lbnQsIGV2ZW50VXRpbHMuY2xpY2tFdmVudCgpLCBldmVudEhhbmRsZXIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsIGZ1bmN0aW9uKCl7XG4gICAgZXZlbnRVdGlscy5yZW1vdmVIYW5kbGVyKGRvY3VtZW50LCAgZXZlbnRVdGlscy5jbGlja0V2ZW50KCksIGV2ZW50SGFuZGxlcik7XG4gIH0sIGZhbHNlKTsgIFxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuICBpZiAoYXBsdXMuX2F1dG90cmFja2VkX2VuYWJsZSkge1xuICAgIHJldHVybjsgXG4gIH0gZWxzZSB7XG4gICAgYXBsdXMuX2F1dG90cmFja2VkX2VuYWJsZSA9IHRydWU7XG4gICAgaW5pdCgpO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9jbGtfYXV0b3RyYWNrL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDEzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogZG9tVXRpbHMuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblxuZnVuY3Rpb24gZ2V0TmFtZSh0YXJnZXQsIGF0dHJpYnV0ZSkge1xuICBpZiAodGFyZ2V0ICYmIHRhcmdldFthdHRyaWJ1dGVdKSB7XG4gICAgcmV0dXJuIHRhcmdldFthdHRyaWJ1dGVdLnRvTG93ZXJDYXNlKCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG5leHBvcnRzLnNpYmxpbmdzID0gZnVuY3Rpb24odGFyZ2V0LCB0eXBlKSB7XG4gIGlmICh0eXBlID09PSAnbmV4dFNpYmxpbmcnKSB7XG4gICAgcmV0dXJuIHRhcmdldC5uZXh0U2libGluZztcbiAgfSBlbHNlIGlmICh0eXBlID09PSAncHJldmlvdXNTaWJsaW5nJykge1xuICAgIHJldHVybiB0YXJnZXQucHJldmlvdXNTaWJsaW5nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5leHBvcnRzLnNpYmxpbmcgPSBmdW5jdGlvbih0YXJnZXQsIHR5cGUpIHtcbiAgZm9yICg7ICh0YXJnZXQgPSB0YXJnZXRbdHlwZV0pICYmIDEgIT09IHRhcmdldC5ub2RlVHlwZTsgKTtcbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbmV4cG9ydHMucHJldmlvdXNFbGVtZW50U2libGluZyA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICB2YXIgZSA9IHRhcmdldDtcbiAgaWYgKFwicHJldmlvdXNFbGVtZW50U2libGluZ1wiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLmdldFByZXYoZSk7XG4gIH1cbiAgd2hpbGUoZS5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICBlID0gZS5wcmV2aW91c1NpYmxpbmc7XG4gICAgaWYgKDEgPT09IGUubm9kZVR5cGUpIHtcbiAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmV4cG9ydHMuZ2V0U2FtZVR5cGVTaWJsaW5ncyA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICB2YXIgZSA9IHRhcmdldCwgdCA9IGUucGFyZW50Tm9kZSwgdGFnbmFtZSA9IGdldE5hbWUoZSwgJ3RhZ05hbWUnKTtcbiAgdmFyIGEgPSBbXSwgaSA9IDA7XG4gIHdoaWxlKGkgPCB0LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgIHZhciBuID0gdC5jaGlsZHJlbltpXTtcbiAgICBpZiAoMSA9PT0gbi5ub2RlVHlwZSAmJiB0YWduYW1lICYmIGdldE5hbWUobiwgJ3RhZ05hbWUnKSA9PT0gdGFnbmFtZSkge1xuICAgICAgYS5wdXNoKHQuY2hpbGRyZW5baV0pO1xuICAgIH1cbiAgICBpKys7XG4gIH1cbiAgcmV0dXJuIGE7XG59O1xuXG5leHBvcnRzLmdldE5leHQgPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgcmV0dXJuIHRoaXMuc2libGluZyh0YXJnZXQsICduZXh0U2libGluZycpO1xufTtcblxuZXhwb3J0cy5nZXRQcmV2ID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gIHJldHVybiB0aGlzLnNpYmxpbmcodGFyZ2V0LCAncHJldmlvdXNTaWJsaW5nJyk7XG59O1xuXG5leHBvcnRzLmluZGV4T2YgPSBmdW5jdGlvbihhcnIsIHRhcmdldCkge1xuICB2YXIgZnVuYyA9IGFyci5pbmRleE9mO1xuICBpZiAoZnVuYykgcmV0dXJuIGZ1bmMuY2FsbChhcnIsIHRhcmdldCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHRhcmdldCA9PT0gYXJyW2ldKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufTtcblxuZXhwb3J0cy5nZXRDbG9zZXN0TGkgPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgcmV0dXJuIChmdW5jdGlvbiAoZSwgdCkge1xuICAgIGZvciAoOyBlICYmIGUgIT09IGRvY3VtZW50ICYmIDEgPT09IGUubm9kZVR5cGU7IGUgPSBlLnBhcmVudE5vZGUpXG4gICAgICBpZiAoZ2V0TmFtZShlLCAndGFnTmFtZScpID09PSB0KSByZXR1cm4gZTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSkodGFyZ2V0LCBcImxpXCIpO1xufTtcblxuZnVuY3Rpb24gY2hlY2tUYXJnZXRJZCh0YXJnZXQpIHtcbiAgcmV0dXJuIHRhcmdldCAmJiB0YXJnZXQuaWQgJiYgL15bQS1aYS16XVstQS1aYS16MC05XzouXSokLy50ZXN0KHRhcmdldC5pZCk7XG59O1xuXG5mdW5jdGlvbiBnZXRFbGVtZW50UGF0aCh0YXJnZXQpIHtcbiAgdmFyIGEgPSBbXTsgXG4gIGlmICghdGFyZ2V0KSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgXG4gIHdoaWxlKHRhcmdldC5wYXJlbnROb2RlKSB7XG4gICAgaWYgKGNoZWNrVGFyZ2V0SWQodGFyZ2V0KSkge1xuICAgICAgYS51bnNoaWZ0KCBnZXROYW1lKHRhcmdldCwgJ3RhZ05hbWUnKSArIFwiI1wiICsgdGFyZ2V0LmlkKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICBhLnVuc2hpZnQoXCJib2R5XCIpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmICh0YXJnZXQudGFnTmFtZSAmJiB0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSkge1xuICAgICAgYS51bnNoaWZ0KGdldE5hbWUodGFyZ2V0LCAndGFnTmFtZScpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBhLmpvaW4oXCIgPiBcIik7XG59O1xuZXhwb3J0cy5nZXRFbGVtZW50UGF0aCA9IGdldEVsZW1lbnRQYXRoO1xuXG4vLyBleHBvcnRzLmdldEVsZW1lbnRQb3NpdGlvbiA9IGZ1bmN0aW9uKHRhcmdldCwgcGF0aCkge1xuLy8gICB2YXIgbiA9IHRoaXMuZ2V0Q2xvc2VzdExpKHRhcmdldCk7XG4vLyAgIGlmICghbikgcmV0dXJuIG51bGw7XG4vLyAgIHZhciB0YWduYW1lID0gdGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbi8vICAgdmFyIGVsZW1zID0gbi5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWduYW1lKTtcbi8vICAgdmFyIGxlbiA9IGVsZW1zLmxlbmd0aDtcbi8vICAgdmFyIGFyciA9IFtdO1xuLy8gICBpZiAobGVuID4gMSkge1xuLy8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbi8vICAgICAgIGdldEVsZW1lbnRQYXRoKGVsZW1zW2ldLCBpKSA9PT0gcGF0aCAmJiBhcnIucHVzaChlbGVtc1tpXSk7XG4vLyAgICAgfVxuLy8gICAgIGlmIChhcnIubGVuZ3RoID4gMSkgcmV0dXJuIHRoaXMuaW5kZXhPZihhcnIsIHRhcmdldCk7XG4vLyAgIH1cbi8vICAgdmFyIHRoYXQgPSB0aGlzO1xuLy8gICByZXR1cm4gKGZ1bmN0aW9uIChlKSB7XG4vLyAgICAgaWYgKChlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSwgIWUucGFyZW50Tm9kZSkpIHJldHVybiBcIlwiO1xuLy8gICAgIGlmICgxID09PSB0aGF0LmdldFNhbWVUeXBlU2libGluZ3MoZSkubGVuZ3RoKSByZXR1cm4gMDtcbi8vICAgICB2YXIgaW5kZXggPSAwO1xuLy8gICAgIHZhciBlbGVtID0gZTtcbi8vICAgICB3aGlsZSh0aGF0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcoZWxlbSkpIHtcbi8vICAgICAgIGVsZW0gPSB0aGF0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcoZWxlbSk7XG4vLyAgICAgICBpbmRleCsrO1xuLy8gICAgIH1cbi8vICAgICByZXR1cm4gaW5kZXg7XG4vLyAgIH0pKG4pO1xuLy8gfTtcblxuZXhwb3J0cy5nZXREb21JbmRleCA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICBpZiAoIXRhcmdldC5wYXJlbnROb2RlKSByZXR1cm4gLTE7XG4gIHZhciBwb3MgPSAwO1xuICB2YXIgdGFnTmFtZSA9IGdldE5hbWUodGFyZ2V0LCAndGFnTmFtZScpO1xuICB2YXIgY2hpbGRyZW4gPSB0YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlbjtcbiAgdmFyIGkgPSAwO1xuICB3aGlsZShpIDwgY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgaWYgKHRhZ05hbWUgJiYgZ2V0TmFtZShjaGlsZHJlbltpXSwgJ3RhZ05hbWUnKSA9PT0gdGFnTmFtZSkge1xuICAgICAgaWYgKHRhcmdldCA9PT0gY2hpbGRyZW5baV0pIHtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgIH1cbiAgICAgIHBvcysrO1xuICAgIH1cbiAgICBpKys7XG4gIH1cbiAgcmV0dXJuIC0xO1xufTtcblxuZXhwb3J0cy5zZWxlY3RvciA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICB2YXIgciA9IHRhcmdldC5wYXJlbnROb2RlICYmIDkgPT09IHRhcmdldC5wYXJlbnROb2RlLm5vZGVUeXBlID8gLTEgOiB0aGlzLmdldERvbUluZGV4KHRhcmdldCk7XG4gIGlmICh0YXJnZXQuZ2V0QXR0cmlidXRlICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSAmJiAvXltBLVphLXpdWy1BLVphLXowLTlfOi5dKiQvLnRlc3QodGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpKSkge1xuICAgIHJldHVybiBcIiNcIiArIHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2V0TmFtZSh0YXJnZXQsICd0YWdOYW1lJykgKyAofnIgPyBcIjpudGgtb2YtdHlwZShcIiArIChyICsgMSkgKyBcIilcIiA6IFwiXCIpO1xuICB9XG59O1xuXG5leHBvcnRzLmdldERvbVNlbGVjdG9yID0gZnVuY3Rpb24odGFyZ2V0LCBhcnIpIHtcbiAgaWYgKCF0YXJnZXQgfHwgIXRhcmdldC5wYXJlbnROb2RlIHx8ICF0YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlbikge1xuICAgIHJldHVybiBudWxsO1xuICB9IFxuICBhcnIgPSBhcnIgJiYgYXJyLmpvaW4gPyBhcnIgOiBbXTtcbiAgdmFyIGEgPSBnZXROYW1lKHRhcmdldCwgJ25vZGVOYW1lJyk7XG4gIGlmIChcImJvZHlcIiAhPT0gYSAmJiAxID09PSB0YXJnZXQubm9kZVR5cGUpIHtcbiAgICBhcnIudW5zaGlmdCh0aGlzLnNlbGVjdG9yKHRhcmdldCkpO1xuICAgIGlmICh0YXJnZXQuZ2V0QXR0cmlidXRlICYmIHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2lkJykgJiYgIC9eW0EtWmEtel1bLUEtWmEtejAtOV86Ll0qJC8udGVzdCh0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIikpKSB7XG4gICAgICByZXR1cm4gYXJyLmpvaW4oJyA+ICcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREb21TZWxlY3Rvcih0YXJnZXQucGFyZW50Tm9kZSwgYXJyKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYXJyLnVuc2hpZnQoXCJib2R5XCIpO1xuICAgIHJldHVybiBhcnIuam9pbignID4gJyk7XG4gIH1cbn07XG5cbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG5leHBvcnRzLmhhc0F0dHJpYnV0ZXMgPSBmdW5jdGlvbih0YXJnZXQsIHNlYXJjaCkge1xuICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHNlYXJjaCkge1xuICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZSh0YXJnZXQsIHNlYXJjaCk7XG4gIH1cbiAgaWYgKHV0aWxBcnJheS5pc0FycmF5KHNlYXJjaCkpIHtcbiAgICB2YXIgciA9IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VhcmNoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5oYXNBdHRyaWJ1dGUodGFyZ2V0LCBzZWFyY2hbaV0pKSB7XG4gICAgICAgIHIgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cbn07XG5cbmV4cG9ydHMuaGFzQXR0cmlidXRlID0gZnVuY3Rpb24odGFyZ2V0LCBhdHRyKSB7XG4gIGlmIChhdHRyID09PSBcImFwbHVzLWF1dG90cmFjay1vZmZcIikge1xuICAgIHZhciB0ID0gdGFyZ2V0O1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICB3aGlsZSh0KSB7XG4gICAgICBpZiAodC5oYXNBdHRyaWJ1dGUgJiYgdC5oYXNBdHRyaWJ1dGUoYXR0cikpIHtcbiAgICAgICAgcmVzdWx0ID0gdC5nZXRBdHRyaWJ1dGUoYXR0cikgPT09ICd0cnVlJztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB0ID0gdC5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0YXJnZXQuaGFzQXR0cmlidXRlID8gdGFyZ2V0Lmhhc0F0dHJpYnV0ZShhdHRyKSA6ICEoIXRhcmdldC5hdHRyaWJ1dGVzW2F0dHJdIHx8ICF0YXJnZXQuYXR0cmlidXRlc1thdHRyXS5zcGVjaWZpZWQpO1xuICB9XG59O1xuXG5mdW5jdGlvbiB0cmltKGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csIFwiXCIpO1xufTtcblxuZXhwb3J0cy5nZXRFbGVtZW50Q29udGVudCA9IGZ1bmN0aW9uKHRhcmdldCwgdGFnTmFtZSkge1xuICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgaWYgKHRhcmdldC50ZXh0Q29udGVudCkge1xuICAgIHJlc3VsdCA9IHRyaW0odGFyZ2V0LnRleHRDb250ZW50KTtcbiAgfSBlbHNlIGlmICh0YXJnZXQuaW5uZXJUZXh0KSB7XG4gICAgcmVzdWx0ID0gdHJpbSh0YXJnZXQuaW5uZXJUZXh0KTtcbiAgfSBlbHNlIGlmICh0YWdOYW1lID09PSBcImlucHV0XCIgfHwgdGFnTmFtZSA9PT0gXCJJTlBVVFwiKSB7XG4gICAgdmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4gICAgdmFyIGF1dG9fdHJhY2tfbWV0YSA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19DT05GSUcpO1xuICAgIGlmIChhdXRvX3RyYWNrX21ldGEuY29sbGVjdF9pbnB1dCkge1xuICAgICAgcmVzdWx0ID0gZW5jb2RlVVJJQ29tcG9uZW50KHRhcmdldC52YWx1ZSkgfHwgXCJcIjtcbiAgICB9XG4gIH0gZWxzZSBpZiAoXCJidXR0b25cIiA9PT0gdGFyZ2V0LnR5cGUgfHwgXCJzdWJtaXRcIiA9PT0gdGFyZ2V0LnR5cGUpe1xuICAgIHJlc3VsdCA9IHRhcmdldC52YWx1ZSB8fCBcIlwiO1xuICB9IFxuICBpZiAocmVzdWx0KSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1tcXHJcXG5dL2csIFwiIFwiKS5yZXBsYWNlKC9bIF0rL2csIFwiIFwiKS5zdWJzdHJpbmcoMCwgMjU1KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfY2xrX2F1dG90cmFjay9kb21VdGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMTM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBldmVudFV0aWxzLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGRIYW5kbGVyOiBmdW5jdGlvbihlbGVtZW50LCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcil7XG4gICAgICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuICAgICAgdmFyIGNmZyA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19DT05GSUcpIHx8IHt9O1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsICEhY2ZnLmVsZW1lbnRfY2FwdHVyZV9lbmFibGUgfHwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoZWxlbWVudC5hdHRhY2hFdmVudCl7XG4gICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KFwib25cIiArIHR5cGUsIGhhbmRsZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50WydvbicgKyB0eXBlXSA9IGhhbmRsZXI7XG4gICAgfVxuICB9LFxuXG4gIHJlbW92ZUhhbmRsZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIHR5cGUsIGhhbmRsZXIpIHtcbiAgICBpZiAoZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoZWxlbWVudC5kZXRhY2hFdmVudCkge1xuICAgICAgZWxlbWVudC5kZXRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBoYW5kbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudFtcIm9uXCIgKyB0eXBlXSA9IG51bGw7XG4gICAgfVxuICB9LFxuXG4gIGNsaWNrRXZlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgPT09IHRydWUpXG4gICAgICByZXR1cm4gJ3RvdWNoc3RhcnQnO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiAnY2xpY2snO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9jbGtfYXV0b3RyYWNrL2V2ZW50VXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDEzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbE9iamVjdC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuZXhwb3J0cy5pc09iamVjdCA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIG51bGwgIT09IGUgJiYgXCJbb2JqZWN0IE9iamVjdF1cIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpO1xufTtcblxuZXhwb3J0cy5pc0VtcHR5T2JqZWN0ID0gZnVuY3Rpb24oZSkge1xuICBpZiAodGhpcy5pc09iamVjdChlKSkge1xuICAgIGZvciAodmFyIHIgaW4gZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCByKSkgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxPYmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDE0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogYXBsdXNfaGVhdG1hcF9pbmplY3QuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuICAgICAgLy8g5L+d6K+B5Y+q5Lya5pyJ5LiA5LiqYXBsdXNfcGx1Z2luX3h3aui/kOihjFxuICAgICAgaWYgKGFwbHVzLl9hcGx1c19wbHVnaW5feHdqKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwbHVzLl9hcGx1c19wbHVnaW5feHdqID0ge1xuICAgICAgICAgIHN0YXR1czogJ2luaXQnXG4gICAgICAgIH07XG4gICAgICAgIHJlcXVpcmUoJy4vbGliX2hlYXRtYXAvbWFpbicpKCk7XG5cbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2FwbHVzX2hlYXRtYXBfaW5qZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IG1haW4uanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblwidXNlIHN0cmljdFwiO1xudmFyIHdpbiA9IHdpbmRvdztcbnZhciBkb2MgPSBkb2N1bWVudDtcbnZhciBhc3NpZ24gPSByZXF1aXJlKCdAdXRpbHMvYXNzaWduJyk7XG5cbmZ1bmN0aW9uIGluaXRIZWF0TWFwKCkge1xuICB2YXIgdmVyc2lvbiA9IDY7XG5cbiAgLyoqIOmYsuatouaXp+acieeJiOacrOimhuebluaWsOeJiOacrCAqKi9cbiAgaWYgKHdpbltcIl9hcF94d2pfaGVhdFwiXSAmJiB2ZXJzaW9uIDw9IHdpbltcIl9hcF94d2pfaGVhdFwiXS52ZXJzaW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHBlcmZvcm1hbmNlID0gd2luLnBlcmZvcm1hbmNlIHx8XG4gICAgd2luLm1velBlcmZvcm1hbmNlIHx8XG4gICAgd2luLm1zUGVyZm9ybWFuY2UgfHxcbiAgICB3aW4ud2Via2l0UGVyZm9ybWFuY2UgfHwgeyBfbmE6IDEgfTtcbiAgdmFyIGxvYyA9IGxvY2F0aW9uO1xuICB2YXIgdXJsID0gbG9jYXRpb24uaHJlZjtcbiAgdmFyIGhvc3RuYW1lID0gbG9jLmhvc3RuYW1lO1xuICB2YXIgbmF2ID0gd2luLm5hdmlnYXRvcjtcbiAgdmFyIGFwcF92ZXJzaW9uID0gbmF2LmFwcFZlcnNpb247XG4gIHZhciB1YSA9IG5hdiA/IG5hdi51c2VyQWdlbnQgOiBcIlwiO1xuICB2YXIgX2hlYWRfbm9kZTsgLy8g55So5LqO5L+d5a2Y6aG16Z2i55qEIGhlYWQgTm9kZVxuICB2YXIgX21ldGFfbm9kZXM7IC8vIOeUqOS6juS/neWtmOmhtemdoiBoZWFkIOS4reeahCBtZXRhIOiKgueCuembhuWQiFxuICB2YXIgaXNfYWhvdCA9IGdldE1ldGFBaG90KCk7XG4gIHZhciBpc19oZWF0bWFwX2VuYWJsZSA9IGdldE1ldGFIZWF0bWFwRW5hYmxlZCgpO1xuICB2YXIgcmF0ZV9haG90X3JlcyA9IGdldE1ldGFBaG90UmVzKCk7XG4gIHZhciBtaWNyb3Njb3BlX2RhdGEgPSBnZXRNZXRhTWljcm9zY29wZSgpO1xuICAvL3ZhciBJRlJBTUVfUFJFRklYID0gJ2lmcmFtZV8nO1xuICB2YXIgYXBsdXNfbm9kZSA9IGRvYy5nZXRFbGVtZW50QnlJZChcImJlYWNvbi1hcGx1c1wiKTtcbiAgdmFyIGV4cGFyYW1zID0gdHJ5VG9HZXRBdHRyaWJ1dGUoYXBsdXNfbm9kZSwgXCJleHBhcmFtc1wiKTtcblxuICAvKiog6buY6K6k6YWN572uICoqL1xuICB2YXIgZGVmYXVsdF9jb25maWcgPSB7XG4gICAgbGF5b3V0OiAwLFxuICAgIHNob3VsZEJpbmRNb25pdG9yOiBmYWxzZSxcbiAgfTtcblxuICB2YXIgQ09ORklHID0ge1xuICAgIFJBVEU6IHtcbiAgICAgIFJFU09VUkNFX1RJTUlORzogaXNOYU4ocmF0ZV9haG90X3JlcykgPyAxIDogcmF0ZV9haG90X3Jlc1xuICAgIH0sXG4gICAgLy8gVEhSRVNIT0xEOiB7XG4gICAgLy8gICAgIFJFU09VUkNFX1RJTUlORzogNTBcbiAgICAvLyB9LFxuICAgIC8vIERFQlVHOiB7XG4gICAgLy8gICAgIFJFU09VUkNFX1RJTUlORzogbG9jYXRpb24uc2VhcmNoLmluZGV4T2YoJ2FwLWRlYnVnLXJlc291cmNlJykgPiAtMVxuICAgIC8vIH0sXG4gICAgLy8gSUQ6IHtcbiAgICAvLyAgICAgSUZSQU1FOiAnYXBsdXNfaWZyYW1lX3Jlc291cmNlX3RpbWluZycsXG4gICAgLy8gICAgIEZPUk06ICdhcGx1c19mb3JtX3Jlc291cmNlX3RpbWluZydcbiAgICAvLyB9XG4gIH07XG5cbiAgLyoqIOi+heWKqeaWueazlSAqKi9cbiAgdmFyIGlzTnVtYmVyID0gZnVuY3Rpb24gKHYpIHtcbiAgICByZXR1cm4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCI7XG4gIH07XG5cbiAgLyoqXG4gICAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbljIXlkKvlrZfnrKbkuLIgczJcbiAgICogQHBhcmFtIHMxIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuICAgKi9cbiAgdmFyIGlzQ29udGFpbiA9IGZ1bmN0aW9uIChzMSwgczIpIHtcbiAgICByZXR1cm4gczEuaW5kZXhPZihzMikgPiAtMTtcbiAgfTtcblxuICAvKipcbiAgICogIOagueaNrnNjcmlwdOS4iueahGV4cGFyYW1z5Yik5pat5piv5ZCm5piv5bqX6ZO6XG4gICAqL1xuICB2YXIgaXNEcHAgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGlzQ29udGFpbihleHBhcmFtcywgXCJhdHBfaXNkcHBcIik7XG4gIH07XG5cbiAgLyoqXG4gICAqICDmjpLpmaTor6bmg4XpobXlkozlupfpk7rpobVcbiAgICovXG4gIHZhciBzaG91bGRCaW5kTW9uaXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNfYWhvdCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGksIGxlbjtcbiAgICB2YXIgYmxhY2tfbGlzdCA9IFtcIml0ZW0udGFvYmFvLmNvbVwiLCBcImRldGFpbC50bWFsbC5jb21cIiwgXCJzLnRhb2Jhby5jb21cIl07XG4gICAgbGVuID0gYmxhY2tfbGlzdC5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoaXNDb250YWluKGhvc3RuYW1lLCBibGFja19saXN0W2ldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMjAxMy0wMS0wOCDlup7pg73pnIDmsYJcbiAgICBpZiAoaXNDb250YWluKHVybCwgXCIvZ28vYWN0L1wiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAhaXNEcHAoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBnZXRFeHBhcmFtcygpIHtcbiAgICB2YXIgZXhwYXJhbXNBcnJheSA9IGV4cGFyYW1zLnNwbGl0KFwiJlwiKSxcbiAgICAgIGV4cGFyYW1zTWFwID0ge307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBhcmFtc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZXhwYXJhbSA9IGV4cGFyYW1zQXJyYXlbaV0sXG4gICAgICAgIGUgPSBleHBhcmFtLnNwbGl0KFwiPVwiKTtcbiAgICAgIGV4cGFyYW1zTWFwW2VbMF1dID0gZVsxXTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cGFyYW1zTWFwO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJ5VG9HZXRBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cl9uYW1lKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGVcbiAgICAgID8gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cl9uYW1lKSB8fCBcIlwiXG4gICAgICA6IFwiXCI7XG4gIH1cblxuICAvKipcbiAgICog5Y+W5b6X6aG16Z2i5LiKIGhlYWQg5Lit55qE5omA5pyJIG1ldGEg5YWD57SgXG4gICAqL1xuICBmdW5jdGlvbiBnZXRNZXRhVGFncygpIHtcbiAgICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIF9tZXRhX25vZGVzIHx8XG4gICAgICAoX2hlYWRfbm9kZVxuICAgICAgICA/IChfbWV0YV9ub2RlcyA9IF9oZWFkX25vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJtZXRhXCIpKVxuICAgICAgICA6IFtdKVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNZXRhQ29udGVudEJ5TmFtZShuYW1lKSB7XG4gICAgdmFyIGk7XG4gICAgdmFyIG1ldGE7XG4gICAgdmFyIG1ldGFfbm9kZXMgPSBnZXRNZXRhVGFncygpO1xuICAgIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG4gICAgdmFyIGNvbnRlbnQ7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICBtZXRhID0gbWV0YV9ub2Rlc1tpXTtcbiAgICAgIGlmICh0cnlUb0dldEF0dHJpYnV0ZShtZXRhLCBcIm5hbWVcIikgPT09IG5hbWUpIHtcbiAgICAgICAgY29udGVudCA9IHRyeVRvR2V0QXR0cmlidXRlKG1ldGEsIFwiY29udGVudFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNZXRhQWhvdCgpIHtcbiAgICByZXR1cm4gZ2V0TWV0YUNvbnRlbnRCeU5hbWUoXCJhaG90LWFwbHVzXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TWV0YUhlYXRtYXBFbmFibGVkKCkge1xuICAgIHZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHJldHVybiBnZXRNZXRhQ29udGVudEJ5TmFtZSgnYXBsdXMtaGVhdG1hcC1lbmFibGVkJykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWhlYXRtYXAtZW5hYmxlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWPluW+lyBoZWFkIC8gbWV0YSDkuK3nmoQgYXBsdXMtcmF0ZS1haG90XG4gICAqIOW9ouWmgu+8mlxuICAgKiA8bWV0YSBuYW1lPSdhcGx1cy1yYXRlLWFob3QnIGNvbnRlbnQ9JzAuMSc+XG4gICAqL1xuICBmdW5jdGlvbiBnZXRNZXRhQWhvdFJlcygpIHtcbiAgICB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgY29udGVudCA9IGdldE1ldGFDb250ZW50QnlOYW1lKCdhcGx1cy1yYXRlLWFob3QnKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmF0ZS1haG90Jyk7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoY29udGVudCB8fCAnJyk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRNZXRhTWljcm9zY29wZSgpIHtcbiAgICByZXR1cm4gZ2V0TWV0YUNvbnRlbnRCeU5hbWUoXCJtaWNyb3Njb3BlLWRhdGFcIik7XG4gIH1cblxuICAvLyBmdW5jdGlvbiB1c2VJZnJhbWUoc2lkLCB1cmwpIHtcbiAgLy8gICAgIHZhciBpZnJhbWVpZCA9IHNpZDtcbiAgLy8gICAgIHZhciBpZnJhbWUgPSBkb2MuZ2V0RWxlbWVudEJ5SWQoaWZyYW1laWQpO1xuXG4gIC8vICAgICBpZiAoIWlmcmFtZSkge1xuICAvLyAgICAgICAgIGlmcmFtZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgLy8gICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdmcmFtZWJvcmRlcicsICcwJyk7XG4gIC8vICAgICAgICAgaWZyYW1lLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6MDtoZWlnaHQ6MDtib3JkZXI6MDtkaXNwbGF5Om5vbmU7JztcbiAgLy8gICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdpZCcsIGlmcmFtZWlkKTtcbiAgLy8gICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCduYW1lJywgaWZyYW1laWQpO1xuICAvLyAgICAgfVxuXG4gIC8vICAgICBpZiAodXJsKSB7XG4gIC8vICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcbiAgLy8gICAgIH1cblxuICAvLyAgICAgaWYgKCFpZnJhbWUucGFyZW50Tm9kZSkge1xuICAvLyAgICAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gIC8vICAgICB9XG5cbiAgLy8gICAgIHJldHVybiBpZnJhbWU7XG4gIC8vIH1cblxuICB2YXIgX2ZuID0gd2luLmFkZEV2ZW50TGlzdGVuZXJcbiAgICA/IGZ1bmN0aW9uIChjYikge1xuICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGNiLCBmYWxzZSk7XG4gICAgfVxuICAgIDogZnVuY3Rpb24gKCkge307XG4gIHZhciBvbmxvYWQgPSB3aW4uYXR0YWNoRXZlbnRcbiAgICA/IGZ1bmN0aW9uIChjYikge1xuICAgICAgd2luLmF0dGFjaEV2ZW50KFwib25sb2FkXCIsIGNiKTtcbiAgICB9XG4gICAgOiBfZm47XG5cbiAgLyoqXG4gICAqIOeUn+aIkOacrOmhteeahCBwdiBpZFxuICAgKi9cbiAgLy8gdmFyIG1ha2VQdmlkID0gZnVuY3Rpb24gKCkge1xuICAvLyAgIHZhciBybmRfc3RycyA9IFwiXCIsXG4gIC8vICAgICBjaGFycyA9IFwiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIjtcblxuICAvLyAgIHdoaWxlIChybmRfc3Rycy5sZW5ndGggPCAxNikge1xuICAvLyAgICAgcm5kX3N0cnMgKz0gY2hhcnMuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYyKSwgMSk7XG4gIC8vICAgfVxuICAvLyAgIHJldHVybiBybmRfc3RycztcbiAgLy8gfTtcblxuICAvKipcbiAgICogQHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI2NjE4MTgvamF2YXNjcmlwdC1nZXQteHBhdGgtb2YtYS1ub2RlXG4gICAqIEBwYXJhbSBlbFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB2YXIgZ2V0WFBhdGggPSBmdW5jdGlvbiAoZWwpIHtcbiAgICB2YXIgYWxsX25vZGVzID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSxcbiAgICAgIHNlZ3MsXG4gICAgICBpLFxuICAgICAgc2liLFxuICAgICAgdW5pcXVlX2lkX2NvdW50LFxuICAgICAgbm9kZSxcbiAgICAgIGVsX2lkO1xuICAgIGZvciAoc2VncyA9IFtdOyBlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMTsgZWwgPSBlbC5wYXJlbnROb2RlKSB7XG4gICAgICBpZiAoZWwuaWQpIHtcbiAgICAgICAgZWxfaWQgPSBlbC5pZDtcbiAgICAgICAgdW5pcXVlX2lkX2NvdW50ID0gMDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGFsbF9ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG5vZGUgPSBhbGxfbm9kZXNbaV07XG4gICAgICAgICAgaWYgKG5vZGUuaWQgJiYgbm9kZS5pZCA9PT0gZWxfaWQpIHtcbiAgICAgICAgICAgIHVuaXF1ZV9pZF9jb3VudCsrO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKSB7XG4gICAgICAgICAgc2Vncy51bnNoaWZ0KGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArIFwiW0BpZD0nXCIgKyBlbF9pZCArIFwiJ11cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVuaXF1ZV9pZF9jb3VudCA9PT0gMSkge1xuICAgICAgICAgIHNlZ3MudW5zaGlmdChcIi9cIik7XG4gICAgICAgICAgcmV0dXJuIHNlZ3Muam9pbihcIi9cIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoaSA9IDEsIHNpYiA9IGVsLnByZXZpb3VzU2libGluZzsgc2liOyBzaWIgPSBzaWIucHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgICAgaWYgKHNpYi50YWdOYW1lID09PSBlbC50YWdOYW1lKSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKSB7XG4gICAgICAgICAgc2Vncy51bnNoaWZ0KGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArIFwiW1wiICsgaSArIFwiXVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2Vncy5sZW5ndGggPyBcIi9cIiArIHNlZ3Muam9pbihcIi9cIikgOiBudWxsO1xuICB9O1xuXG4gIC8qKlxuICAgKiBvYmplY3QgdG8gcGFyYW1cbiAgICog5bCG5LiA5Liq566A5Y2V5a+56LGh6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI9cbiAgICogQHBhcmFtIG9iaiB7T2JqZWN0fVxuICAgKi9cbiAgLy8gdmFyIG9iajJwYXJhbSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgLy8gICB2YXIgYSA9IFtdLFxuICAvLyAgICAgaztcbiAgLy8gICBmb3IgKGsgaW4gb2JqKSB7XG4gIC8vICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGspKSB7XG4gIC8vICAgICAgIGEucHVzaChrICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW2tdKSk7XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyAgIHJldHVybiBhLmpvaW4oXCImXCIpO1xuICAvLyB9O1xuXG4gIC8qKlxuICAgKiDojrflj5bngrnlh7vkuovku7bnmoTkvY3nva5cbiAgICogQHBhcmFtIHRhcmdldFxuICAgKiBAcGFyYW0gZVxuICAgKiBAcGFyYW0gbGF5b3V0XG4gICAqIEByZXR1cm5zIHt7eDogKE51bWJlcnxwYWdlWHwqKSwgeTogKE51bWJlcnxwYWdlWXwqKSwgZXg6IG51bWJlciwgZXk6ICp9fVxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIHZhciBnZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICh0YXJnZXQsIGUsIGxheW91dCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHZhciBkb2Nfd2lkdGggPSBNYXRoLm1heChkLnNjcm9sbFdpZHRoLCBkLmNsaWVudFdpZHRoKSwgLy8g572R6aG15paH5qGj5a69XG4gICAgICBzY3JvbGxfdG9wID0gZC5zY3JvbGxUb3AsIC8vIOS4iui+uea7muWKqOadoeWNt+WOu+eahOWuveW6plxuICAgICAgc2Nyb2xsX2xlZnQgPSBkLnNjcm9sbExlZnQ7IC8vIOW3pui+uea7muWKqOadoeWNt+WOu+eahOWuveW6plxuXG4gICAgLy8g5Y+W5b6X54K55Ye75LqL5Lu25Zyo6aG16Z2i5LiK55qE5Z2Q5qCHXG4gICAgdmFyIHggPSBlLnBhZ2VYLFxuICAgICAgeSA9IGUucGFnZVk7XG4gICAgaWYgKCFpc051bWJlcih4KSkge1xuICAgICAgeCA9IGUuY2xpZW50WCArIHNjcm9sbF9sZWZ0O1xuICAgICAgeSA9IGUuY2xpZW50WSArIHNjcm9sbF90b3A7XG4gICAgfVxuXG4gICAgLy8g5Y+W5b6XIGVsIOWFg+e0oOeahOWdkOagh+S9jee9ruWPiuWuveW6pumrmOW6plxuICAgIHZhciBleCA9IC0xLFxuICAgICAgZXksXG4gICAgICByO1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIGlmICh0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDlj4LogIPvvJpodHRwOi8vd3d3LnJ1YW55aWZlbmcuY29tL2Jsb2cvMjAwOS8wOS9maW5kX2VsZW1lbnRfc19wb3NpdGlvbl91c2luZ19qYXZhc2NyaXB0Lmh0bWxcbiAgICAgICAgICog5LiK5paH5o+Q5Yiw55uu5YmNIElF44CBRmlyZWZveCAzLjAr44CBT3BlcmEgOS41K+mDveaUr+aMgeivpeaWueazle+8jOiAjEZpcmVmb3ggMi5444CBU2FmYXJp44CBQ2hyb21l44CBS29ucXVlcm9y5LiN5pSv5oyBXG4gICAgICAgICAqIOS4jei/h+e7j+a1i+ivle+8jENocm9tZSA5IOS7peWPiiBTYWZhcmkgNSDpg73mlK/mjIHor6Xmlrnms5VcbiAgICAgICAgICovXG4gICAgICAgIHIgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGV4ID0gci5sZWZ0ICsgc2Nyb2xsX2xlZnQ7XG4gICAgICAgIGV5ID0gci50b3AgKyBzY3JvbGxfdG9wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5re75Yqg5LiN5pSv5oyB6K+l5pa55rOV55qE5rWP6KeI5Zmo5LiL5Y+W5b6XIGVsIOWFg+e0oOeahOS9jee9rueahOS7o+eggVxuICAgICAgICAvLyBOT1RFIOWmguS4uuS6huS7o+eggeeyvueugO+8jOatpOatpeS5n+WPr+S7peW/veeVpe+8jOWvueacgOe7iOe7k+aenOW9seWTjeS4jeWkp1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOagueaNriBsYXlvdXQg6L2s5o2i5Z2Q5qCHXG4gICAgICovXG4gICAgLy8g54Ot5Yqb5Zu+5LiA5pyf5LiN5YGa5Z2Q5qCH6L2s5o2iXG4gICAgaWYgKGxheW91dCA9PT0gMCB8fCBsYXlvdXQgPT09IFwiMFwiKSB7XG4gICAgICAvLyDlm7rlrprlrr3luqblsYXkuK3vvIzku6XpobXpnaLkuK3lnoLnur/pobbpg6jkuLrljp/ngrlcbiAgICAgIHZhciBkb2Nfd2lkdGhfMiA9IGRvY193aWR0aCA+PiAxO1xuICAgICAgeCAtPSBkb2Nfd2lkdGhfMjtcbiAgICAgIGV4IC09IGRvY193aWR0aF8yO1xuICAgIH0gZWxzZSBpZiAobGF5b3V0ID09PSAyKSB7XG4gICAgICB4IC09IGRvY193aWR0aDtcbiAgICAgIGV4IC09IGRvY193aWR0aDtcbiAgICB9XG5cbiAgICByZXR1cm4geyB4OiB4LCB5OiB5LCBleDogZXgsIGV5OiBleSwgc3c6IGRvY193aWR0aCB9O1xuICB9O1xuXG4gIHZhciBudW1iZXJpZnkgPSBmdW5jdGlvbiAocykge1xuICAgIHZhciBjID0gMDtcbiAgICAvLyBjb252ZXJ0ICcxLjIuMy40JyB0byAxLjIzNFxuICAgIHJldHVybiBwYXJzZUZsb2F0KFxuICAgICAgcy5yZXBsYWNlKC9cXC4vZywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYysrID09PSAwID8gXCIuXCIgOiBcIlwiO1xuICAgICAgfSlcbiAgICApO1xuICB9O1xuICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UcmlkZW50Xyhzb2Z0d2FyZSlcbiAgdmFyIHNldFRyaWRlbnRWZXJzaW9uID0gZnVuY3Rpb24gKHVhLCBVQSkge1xuICAgIHZhciBjb3JlLCBtO1xuICAgIFVBWyhjb3JlID0gXCJ0cmlkZW50XCIpXSA9IDAuMTtcblxuICAgIGlmICgobSA9IHVhLm1hdGNoKC9UcmlkZW50XFwvKFtcXGQuXSopLykpICYmIG1bMV0pIHtcbiAgICAgIFVBW2NvcmVdID0gbnVtYmVyaWZ5KG1bMV0pO1xuICAgIH1cblxuICAgIFVBLmNvcmUgPSBjb3JlO1xuICB9O1xuXG4gIHZhciBnZXRJRVZlcnNpb24gPSBmdW5jdGlvbiAodWEpIHtcbiAgICB2YXIgbSwgdjtcbiAgICBpZiAoXG4gICAgICAobSA9IHVhLm1hdGNoKC9NU0lFIChbXjtdKil8VHJpZGVudC4qOyBydig/Olxcc3w6KT8oWzAtOS5dKykvKSkgJiZcbiAgICAgICh2ID0gbVsxXSB8fCBtWzJdKVxuICAgICkge1xuICAgICAgcmV0dXJuIG51bWJlcmlmeSh2KTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH07XG5cbiAgdmFyIGRlYWxEZWZhdWx0ID0gZnVuY3Rpb24gKHMpIHtcbiAgICByZXR1cm4gcyB8fCBcIm90aGVyXCI7XG4gIH07XG5cbiAgdmFyIGdldERlc2NyaXB0b3JGcm9tVXNlckFnZW50ID0gZnVuY3Rpb24gKHVhKSB7XG4gICAgdmFyIEVNUFRZID0gXCJcIjtcbiAgICB2YXIgb3M7XG4gICAgdmFyIGNvcmUgPSBFTVBUWTtcbiAgICB2YXIgc2hlbGwgPSBFTVBUWTtcbiAgICB2YXIgbTtcbiAgICB2YXIgSUVfREVURUNUX1JBTkdFID0gWzYsIDldO1xuICAgIHZhciBpZVZlcnNpb247XG4gICAgdmFyIHY7XG4gICAgdmFyIGVuZDtcbiAgICB2YXIgVkVSU0lPTl9QTEFDRUhPTERFUiA9IFwie3t2ZXJzaW9ufX1cIjtcbiAgICB2YXIgSUVfREVURUNUX1RQTCA9XG4gICAgICBcIjwhLS1baWYgSUUgXCIgKyBWRVJTSU9OX1BMQUNFSE9MREVSICsgXCJdPjxcIiArIFwicz48L3M+PCFbZW5kaWZdLS0+XCI7XG4gICAgdmFyIGRpdiA9IGRvYyAmJiBkb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB2YXIgcyA9IFtdO1xuICAgIHZhciBleHRyYV9uYW1lO1xuICAgIHZhciBleHRyYV92ZXJzaW9uO1xuICAgIHZhciBleHRlcm5hbDtcbiAgICAvKipcbiAgICAgKiBLSVNTWSBVQVxuICAgICAqIEBjbGFzcyBLSVNTWS5VQVxuICAgICAqIEBzaW5nbGV0b25cbiAgICAgKi9cbiAgICB2YXIgVUEgPSB7XG4gICAgICAvKipcbiAgICAgICAqIHdlYmtpdCB2ZXJzaW9uXG4gICAgICAgKiBAdHlwZSB1bmRlZmluZWR8TnVtYmVyXG4gICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG4gICAgICAgKi9cbiAgICAgIHdlYmtpdDogdW5kZWZpbmVkLFxuICAgICAgLyoqXG4gICAgICAgKiB0cmlkZW50IHZlcnNpb25cbiAgICAgICAqIEB0eXBlIHVuZGVmaW5lZHxOdW1iZXJcbiAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcbiAgICAgICAqL1xuICAgICAgdHJpZGVudDogdW5kZWZpbmVkLFxuICAgICAgLyoqXG4gICAgICAgKiBnZWNrbyB2ZXJzaW9uXG4gICAgICAgKiBAdHlwZSB1bmRlZmluZWR8TnVtYmVyXG4gICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG4gICAgICAgKi9cbiAgICAgIGdlY2tvOiB1bmRlZmluZWQsXG4gICAgICAvKipcbiAgICAgICAqIHByZXN0byB2ZXJzaW9uXG4gICAgICAgKiBAdHlwZSB1bmRlZmluZWR8TnVtYmVyXG4gICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG4gICAgICAgKi9cbiAgICAgIHByZXN0bzogdW5kZWZpbmVkLFxuICAgICAgLyoqXG4gICAgICAgKiBjaHJvbWUgdmVyc2lvblxuICAgICAgICogQHR5cGUgdW5kZWZpbmVkfE51bWJlclxuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBjaHJvbWU6IHVuZGVmaW5lZCxcbiAgICAgIC8qKlxuICAgICAgICogc2FmYXJpIHZlcnNpb25cbiAgICAgICAqIEB0eXBlIHVuZGVmaW5lZHxOdW1iZXJcbiAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcbiAgICAgICAqL1xuICAgICAgc2FmYXJpOiB1bmRlZmluZWQsXG4gICAgICAvKipcbiAgICAgICAqIGZpcmVmb3ggdmVyc2lvblxuICAgICAgICogQHR5cGUgdW5kZWZpbmVkfE51bWJlclxuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBmaXJlZm94OiB1bmRlZmluZWQsXG4gICAgICAvKipcbiAgICAgICAqIGllIHZlcnNpb25cbiAgICAgICAqIEB0eXBlIHVuZGVmaW5lZHxOdW1iZXJcbiAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcbiAgICAgICAqL1xuICAgICAgaWU6IHVuZGVmaW5lZCxcbiAgICAgIC8qKlxuICAgICAgICogaWUgZG9jdW1lbnQgbW9kZVxuICAgICAgICogQHR5cGUgdW5kZWZpbmVkfE51bWJlclxuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBpZU1vZGU6IHVuZGVmaW5lZCxcbiAgICAgIC8qKlxuICAgICAgICogb3BlcmEgdmVyc2lvblxuICAgICAgICogQHR5cGUgdW5kZWZpbmVkfE51bWJlclxuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBvcGVyYTogdW5kZWZpbmVkLFxuICAgICAgLyoqXG4gICAgICAgKiBtb2JpbGUgYnJvd3Nlci4gYXBwbGUsIGFuZHJvaWQuXG4gICAgICAgKiBAdHlwZSBTdHJpbmdcbiAgICAgICAqIEBtZW1iZXIgS0lTU1kuVUFcbiAgICAgICAqL1xuICAgICAgbW9iaWxlOiB1bmRlZmluZWQsXG4gICAgICAvKipcbiAgICAgICAqIGJyb3dzZXIgcmVuZGVyIGVuZ2luZSBuYW1lLiB3ZWJraXQsIHRyaWRlbnRcbiAgICAgICAqIEB0eXBlIFN0cmluZ1xuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBjb3JlOiB1bmRlZmluZWQsXG4gICAgICAvKipcbiAgICAgICAqIGJyb3dzZXIgc2hlbGwgbmFtZS4gaWUsIGNocm9tZSwgZmlyZWZveFxuICAgICAgICogQHR5cGUgU3RyaW5nXG4gICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG4gICAgICAgKi9cbiAgICAgIHNoZWxsOiB1bmRlZmluZWQsXG5cbiAgICAgIC8qKlxuICAgICAgICogUGhhbnRvbUpTIHZlcnNpb24gbnVtYmVyXG4gICAgICAgKiBAdHlwZSB1bmRlZmluZWR8TnVtYmVyXG4gICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG4gICAgICAgKi9cbiAgICAgIHBoYW50b21qczogdW5kZWZpbmVkLFxuXG4gICAgICAvKipcbiAgICAgICAqIG9wZXJhdGluZyBzeXN0ZW0uIGFuZHJvaWQsIGlvcywgbGludXgsIHdpbmRvd3NcbiAgICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBvczogdW5kZWZpbmVkLFxuXG4gICAgICAvKipcbiAgICAgICAqIGlwYWQgaW9zIHZlcnNpb25cbiAgICAgICAqIEB0eXBlIE51bWJlclxuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBpcGFkOiB1bmRlZmluZWQsXG4gICAgICAvKipcbiAgICAgICAqIGlwaG9uZSBpb3MgdmVyc2lvblxuICAgICAgICogQHR5cGUgTnVtYmVyXG4gICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG4gICAgICAgKi9cbiAgICAgIGlwaG9uZTogdW5kZWZpbmVkLFxuICAgICAgLyoqXG4gICAgICAgKiBpcG9kIGlvc1xuICAgICAgICogQHR5cGUgTnVtYmVyXG4gICAgICAgKiBAbWVtYmVyIEtJU1NZLlVBXG4gICAgICAgKi9cbiAgICAgIGlwb2Q6IHVuZGVmaW5lZCxcbiAgICAgIC8qKlxuICAgICAgICogaW9zIHZlcnNpb25cbiAgICAgICAqIEB0eXBlIE51bWJlclxuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBpb3M6IHVuZGVmaW5lZCxcblxuICAgICAgLyoqXG4gICAgICAgKiBhbmRyb2lkIHZlcnNpb25cbiAgICAgICAqIEB0eXBlIE51bWJlclxuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBhbmRyb2lkOiB1bmRlZmluZWQsXG5cbiAgICAgIC8qKlxuICAgICAgICogbm9kZWpzIHZlcnNpb25cbiAgICAgICAqIEB0eXBlIE51bWJlclxuICAgICAgICogQG1lbWJlciBLSVNTWS5VQVxuICAgICAgICovXG4gICAgICBub2RlanM6IHVuZGVmaW5lZCxcblxuICAgICAgLyoqXG4gICAgICAgKiBleHRyYSBicm93c2VyIG5hbWVcbiAgICAgICAqL1xuICAgICAgZXh0cmFOYW1lOiB1bmRlZmluZWQsXG5cbiAgICAgIC8qKlxuICAgICAgICogZXh0cmEgYnJvd3NlciB2ZXJzaW9uXG4gICAgICAgKi9cbiAgICAgIGV4dHJhVmVyc2lvbjogdW5kZWZpbmVkLFxuICAgIH07XG5cbiAgICAvLyBlamVjdGFcbiAgICBpZiAoZGl2ICYmIGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSkge1xuICAgICAgLy8gdHJ5IHRvIHVzZSBJRS1Db25kaXRpb25hbC1Db21tZW50IGRldGVjdCBJRSBtb3JlIGFjY3VyYXRlbHlcbiAgICAgIC8vIElFMTAgZG9lc24ndCBzdXBwb3J0IHRoaXMgbWV0aG9kLCBAcmVmOiBodHRwOi8vYmxvZ3MubXNkbi5jb20vYi9pZS9hcmNoaXZlLzIwMTEvMDcvMDYvaHRtbDUtcGFyc2luZy1pbi1pZTEwLmFzcHhcbiAgICAgIGRpdi5pbm5lckhUTUwgPSBJRV9ERVRFQ1RfVFBMLnJlcGxhY2UoVkVSU0lPTl9QTEFDRUhPTERFUiwgXCJcIik7XG4gICAgICBzID0gZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic1wiKTtcbiAgICB9XG5cbiAgICBpZiAocy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRUcmlkZW50VmVyc2lvbih1YSwgVUEpO1xuXG4gICAgICAvLyBEZXRlY3QgdGhlIGFjY3VyYXRlIHZlcnNpb25cbiAgICAgIC8vIOazqOaEj++8mlxuICAgICAgLy8gIFVBLnNoZWxsID0gaWUsIOihqOekuuWkluWjs+aYryBpZVxuICAgICAgLy8gIOS9hiBVQS5pZSA9IDcsIOW5tuS4jeS7o+ihqOWkluWjs+aYryBpZTcsIOi/mOacieWPr+iDveaYryBpZTgg55qE5YW85a655qih5byPXG4gICAgICAvLyAg5a+55LqOIGllOCDnmoTlhbzlrrnmqKHlvI/vvIzov5jopoHpgJrov4cgZG9jdW1lbnRNb2RlIOWOu+WIpOaWreOAguS9huatpOWkhOS4jeiDveiuqSBVQS5pZSA9IDgsIOWQpuWImVxuICAgICAgLy8gIOW+iOWkmuiEmuacrOWIpOaWreS8muWkseivr+OAguWboOS4uiBpZTgg55qE5YW85a655qih5byP6KGo546w6KGM5Li65ZKMIGllNyDnm7jlkIzvvIzogIzkuI3mmK/lkowgaWU4IOebuOWQjFxuICAgICAgZm9yICh2ID0gSUVfREVURUNUX1JBTkdFWzBdLCBlbmQgPSBJRV9ERVRFQ1RfUkFOR0VbMV07IHYgPD0gZW5kOyB2KyspIHtcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IElFX0RFVEVDVF9UUEwucmVwbGFjZShWRVJTSU9OX1BMQUNFSE9MREVSLCB2KTtcbiAgICAgICAgaWYgKHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIFVBWyhzaGVsbCA9IFwiaWVcIildID0gdjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20va2lzc3l0ZWFtL2tpc3N5L2lzc3Vlcy8zMjFcbiAgICAgIC8vIHdpbjggZW1iZWQgYXBwXG4gICAgICBpZiAoIVVBLmllICYmIChpZVZlcnNpb24gPSBnZXRJRVZlcnNpb24odWEpKSkge1xuICAgICAgICBVQVsoc2hlbGwgPSBcImllXCIpXSA9IGllVmVyc2lvbjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2ViS2l0XG4gICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oW1xcZC5dKikvKSkgJiYgbVsxXSkge1xuICAgICAgICBVQVsoY29yZSA9IFwid2Via2l0XCIpXSA9IG51bWJlcmlmeShtWzFdKTtcblxuICAgICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvT1BSXFwvKFxcZCtcXC5cXGQrKS8pKSAmJiBtWzFdKSB7XG4gICAgICAgICAgVUFbKHNoZWxsID0gXCJvcGVyYVwiKV0gPSBudW1iZXJpZnkobVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hyb21lXG4gICAgICAgIGVsc2UgaWYgKChtID0gdWEubWF0Y2goL0Nocm9tZVxcLyhbXFxkLl0qKS8pKSAmJiBtWzFdKSB7XG4gICAgICAgICAgVUFbKHNoZWxsID0gXCJjaHJvbWVcIildID0gbnVtYmVyaWZ5KG1bMV0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNhZmFyaVxuICAgICAgICBlbHNlIGlmICgobSA9IHVhLm1hdGNoKC9cXC8oW1xcZC5dKikgU2FmYXJpLykpICYmIG1bMV0pIHtcbiAgICAgICAgICBVQVsoc2hlbGwgPSBcInNhZmFyaVwiKV0gPSBudW1iZXJpZnkobVsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHBsZSBNb2JpbGVcbiAgICAgICAgaWYgKC8gTW9iaWxlXFwvLy50ZXN0KHVhKSAmJiB1YS5tYXRjaCgvaVBhZHxpUG9kfGlQaG9uZS8pKSB7XG4gICAgICAgICAgVUEubW9iaWxlID0gXCJhcHBsZVwiOyAvLyBpUGFkLCBpUGhvbmUgb3IgaVBvZCBUb3VjaFxuXG4gICAgICAgICAgbSA9IHVhLm1hdGNoKC9PUyAoW15cXHNdKikvKTtcbiAgICAgICAgICBpZiAobSAmJiBtWzFdKSB7XG4gICAgICAgICAgICBVQS5pb3MgPSBudW1iZXJpZnkobVsxXS5yZXBsYWNlKFwiX1wiLCBcIi5cIikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvcyA9IFwiaW9zXCI7XG4gICAgICAgICAgbSA9IHVhLm1hdGNoKC9pUGFkfGlQb2R8aVBob25lLyk7XG4gICAgICAgICAgaWYgKG0gJiYgbVswXSkge1xuICAgICAgICAgICAgVUFbbVswXS50b0xvd2VyQ2FzZSgpXSA9IFVBLmlvcztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoLyBBbmRyb2lkL2kudGVzdCh1YSkpIHtcbiAgICAgICAgICBpZiAoL01vYmlsZS8udGVzdCh1YSkpIHtcbiAgICAgICAgICAgIG9zID0gVUEubW9iaWxlID0gXCJhbmRyb2lkXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIG0gPSB1YS5tYXRjaCgvQW5kcm9pZCAoW15cXHNdKik7Lyk7XG4gICAgICAgICAgaWYgKG0gJiYgbVsxXSkge1xuICAgICAgICAgICAgVUEuYW5kcm9pZCA9IG51bWJlcmlmeShtWzFdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXIgV2ViS2l0IE1vYmlsZSBCcm93c2Vyc1xuICAgICAgICBlbHNlIGlmICgobSA9IHVhLm1hdGNoKC9Ob2tpYU5bXlxcL10qfEFuZHJvaWQgXFxkXFwuXFxkfHdlYk9TXFwvXFxkXFwuXFxkLykpKSB7XG4gICAgICAgICAgVUEubW9iaWxlID0gbVswXS50b0xvd2VyQ2FzZSgpOyAvLyBOb2tpYSBOLXNlcmllcywgQW5kcm9pZCwgd2ViT1MsIGV4OiBOb2tpYU45NVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChtID0gdWEubWF0Y2goL1BoYW50b21KU1xcLyhbXlxcc10qKS8pKSAmJiBtWzFdKSB7XG4gICAgICAgICAgVUEucGhhbnRvbWpzID0gbnVtYmVyaWZ5KG1bMV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBOT1QgV2ViS2l0XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gUHJlc3RvXG4gICAgICAgIC8vIHJlZjogaHR0cDovL3d3dy51c2VyYWdlbnRzdHJpbmcuY29tL3BhZ2VzL3VzZXJhZ2VudHN0cmluZy5waHBcbiAgICAgICAgaWYgKChtID0gdWEubWF0Y2goL1ByZXN0b1xcLyhbXFxkLl0qKS8pKSAmJiBtWzFdKSB7XG4gICAgICAgICAgVUFbKGNvcmUgPSBcInByZXN0b1wiKV0gPSBudW1iZXJpZnkobVsxXSk7XG5cbiAgICAgICAgICAvLyBPcGVyYVxuICAgICAgICAgIGlmICgobSA9IHVhLm1hdGNoKC9PcGVyYVxcLyhbXFxkLl0qKS8pKSAmJiBtWzFdKSB7XG4gICAgICAgICAgICBVQVsoc2hlbGwgPSBcIm9wZXJhXCIpXSA9IG51bWJlcmlmeShtWzFdKTsgLy8gT3BlcmEgZGV0ZWN0ZWQsIGxvb2sgZm9yIHJldmlzaW9uXG5cbiAgICAgICAgICAgIGlmICgobSA9IHVhLm1hdGNoKC9PcGVyYVxcLy4qIFZlcnNpb25cXC8oW1xcZC5dKikvKSkgJiYgbVsxXSkge1xuICAgICAgICAgICAgICBVQVtzaGVsbF0gPSBudW1iZXJpZnkobVsxXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE9wZXJhIE1pbmlcbiAgICAgICAgICAgIGlmICgobSA9IHVhLm1hdGNoKC9PcGVyYSBNaW5pW147XSovKSkgJiYgbSkge1xuICAgICAgICAgICAgICBVQS5tb2JpbGUgPSBtWzBdLnRvTG93ZXJDYXNlKCk7IC8vIGV4OiBPcGVyYSBNaW5pLzIuMC40NTA5LzEzMTZcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE9wZXJhIE1vYmlsZVxuICAgICAgICAgICAgLy8gZXg6IE9wZXJhLzkuODAgKFdpbmRvd3MgTlQgNi4xOyBPcGVyYSBNb2JpLzQ5OyBVOyBlbikgUHJlc3RvLzIuNC4xOCBWZXJzaW9uLzEwLjAwXG4gICAgICAgICAgICAvLyBpc3N1ZTog55Sx5LqOIE9wZXJhIE1vYmlsZSDmnIkgVmVyc2lvbi8g5a2X5q6177yM5Y+v6IO95Lya5LiOIE9wZXJhIOa3t+a3hu+8jOWQjOaXtuWvueS6jiBPcGVyYSBNb2JpbGUg55qE54mI5pys5Y+35Lmf5q+U6L6D5re35LmxXG4gICAgICAgICAgICBlbHNlIGlmICgobSA9IHVhLm1hdGNoKC9PcGVyYSBNb2JpW147XSovKSkgJiYgbSkge1xuICAgICAgICAgICAgICBVQS5tb2JpbGUgPSBtWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE5PVCBXZWJLaXQgb3IgUHJlc3RvXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTVNJRVxuICAgICAgICAgIC8vIOeUseS6juacgOW8gOWni+W3sue7j+S9v+eUqOS6hiBJRSDmnaHku7bms6jph4rliKTmlq3vvIzlm6DmraTokL3liLDov5nph4znmoTllK/kuIDlj6/og73mgKflj6rmnIkgSUUxMCtcbiAgICAgICAgICAvLyBhbmQgYW5hbHlzaXMgdG9vbHMgaW4gbm9kZWpzXG4gICAgICAgICAgaWYgKChpZVZlcnNpb24gPSBnZXRJRVZlcnNpb24odWEpKSkge1xuICAgICAgICAgICAgVUFbKHNoZWxsID0gXCJpZVwiKV0gPSBpZVZlcnNpb247XG4gICAgICAgICAgICBzZXRUcmlkZW50VmVyc2lvbih1YSwgVUEpO1xuICAgICAgICAgICAgLy8gTk9UIFdlYktpdCwgUHJlc3RvIG9yIElFXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEdlY2tvXG4gICAgICAgICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvR2Vja28vKSkpIHtcbiAgICAgICAgICAgICAgVUFbKGNvcmUgPSBcImdlY2tvXCIpXSA9IDAuMTsgLy8gR2Vja28gZGV0ZWN0ZWQsIGxvb2sgZm9yIHJldmlzaW9uXG4gICAgICAgICAgICAgIGlmICgobSA9IHVhLm1hdGNoKC9ydjooW1xcZC5dKikvKSkgJiYgbVsxXSkge1xuICAgICAgICAgICAgICAgIFVBW2NvcmVdID0gbnVtYmVyaWZ5KG1bMV0pO1xuICAgICAgICAgICAgICAgIGlmICgvTW9iaWxlfFRhYmxldC8udGVzdCh1YSkpIHtcbiAgICAgICAgICAgICAgICAgIFVBLm1vYmlsZSA9IFwiZmlyZWZveFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBGaXJlZm94XG4gICAgICAgICAgICAgIGlmICgobSA9IHVhLm1hdGNoKC9GaXJlZm94XFwvKFtcXGQuXSopLykpICYmIG1bMV0pIHtcbiAgICAgICAgICAgICAgICBVQVsoc2hlbGwgPSBcImZpcmVmb3hcIildID0gbnVtYmVyaWZ5KG1bMV0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0T1NJbmZvKCkge1xuICAgICAgdmFyIHRva2VuID0gW1xuICAgICAgICBbXCJXaW5kb3dzIE5UIDUuMVwiLCBcIndpblhQXCJdLFxuICAgICAgICBbXCJXaW5kb3dzIE5UIDYuMVwiLCBcIndpbjdcIl0sXG4gICAgICAgIFtcIldpbmRvd3MgTlQgNi4wXCIsIFwid2luVmlzdGFcIl0sXG4gICAgICAgIFtcIldpbmRvd3MgTlQgNi4yXCIsIFwid2luOFwiXSxcbiAgICAgICAgW1wiaVBhZFwiLCBcImlvc1wiXSxcbiAgICAgICAgW1wiaVBob25lO1wiLCBcImlvc1wiXSxcbiAgICAgICAgW1wiaVBvZFwiLCBcImlvc1wiXSxcbiAgICAgICAgW1wiTWFjaW50b3NoXCIsIFwibWFjXCJdLFxuICAgICAgICBbXCJBbmRyb2lkXCIsIFwiYW5kcm9pZFwiXSxcbiAgICAgICAgW1wiVWJ1bnR1XCIsIFwidWJ1bnR1XCJdLFxuICAgICAgICBbXCJMaW51eFwiLCBcImxpbnV4XCJdLFxuICAgICAgICBbXCJXaW5kb3dzIE5UIDUuMlwiLCBcIndpbjIwMDNcIl0sXG4gICAgICAgIFtcIldpbmRvd3MgTlQgNS4wXCIsIFwid2luMjAwMFwiXSxcbiAgICAgICAgW1wiV2luZG93c1wiLCBcIndpbk90aGVyXCJdLFxuICAgICAgICBbXCJyaGlub1wiLCBcInJoaW5vXCJdLFxuICAgICAgXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b2tlbi5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBpZiAodWEuaW5kZXhPZih0b2tlbltpXVswXSkgIT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuW2ldWzFdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gXCJvdGhlclwiO1xuICAgIH1cblxuICAgIGlmICghb3MpIHtcbiAgICAgIG9zID0gZ2V0T1NJbmZvKCk7XG4gICAgfVxuXG4gICAgLy8g5Zu95Lqn5rWP6KeI5Zmo5LiT5Zy6XG4gICAgZnVuY3Rpb24gX21pbWUod2hlcmUsIHZhbHVlLCBuYW1lLCBuYW1lUmVnKSB7XG4gICAgICB2YXIgbWltZVR5cGVzID0gd2luLm5hdmlnYXRvci5taW1lVHlwZXM7XG4gICAgICB2YXIgaTtcblxuICAgICAgLy8gUVHmtY/op4jlmag3LjfkvJrmiqXplJlcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAoaSBpbiBtaW1lVHlwZXMpIHtcbiAgICAgICAgICBpZiAobWltZVR5cGVzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICBpZiAobWltZVR5cGVzW2ldW3doZXJlXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKG5hbWUgIT09IHVuZGVmaW5lZCAmJiBuYW1lUmVnLnRlc3QobWltZVR5cGVzW2ldW25hbWVdKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICAgIGVsc2UgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgX3N0eWxlO1xuICAgIHZhciBfdjhsb2NhbGU7XG5cbiAgICAvLyDmt5jlrp3mtY/op4jlmajkuI3pgILnlKjkuI5taW1lXG4gICAgaWYgKCFfbWltZShcInR5cGVcIiwgXCJhcHBsaWNhdGlvbi92bmQuY2hyb21pdW0ucmVtb3Rpbmctdmlld2VyXCIpKSB7XG4gICAgICBfc3R5bGUgPSBcInNjb3BlZFwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICBfdjhsb2NhbGUgPSBcInY4TG9jYWxlXCIgaW4gd2luO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZXh0ZXJuYWwgPSB3aW4uZXh0ZXJuYWwgfHwgdW5kZWZpbmVkO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuXG4gICAgICAvLyAzNjBCcm93c2VyXG4gICAgICBpZiAoKG0gPSB1YS5tYXRjaCgvMzYwU0UvKSkpIHtcbiAgICAgICAgZXh0cmFfbmFtZSA9IFwiMzYwXCI7XG4gICAgICB9XG4gICAgICAvLyDlhYjliKTmlq1zb2dvIOWSjCDnjI7osblcbiAgICAgIGVsc2UgaWYgKFxuICAgICAgICAobSA9IHVhLm1hdGNoKC9TRVxccyhbXFxkLl0qKS8pKSB8fFxuICAgICAgICAoZXh0ZXJuYWwgJiYgXCJTRVZlcnNpb25cIiBpbiBleHRlcm5hbClcbiAgICAgICkge1xuICAgICAgICBleHRyYV9uYW1lID0gXCJzb3Vnb3VcIjtcbiAgICAgICAgZXh0cmFfdmVyc2lvbiA9IG51bWJlcmlmeShtWzFdKSB8fCAwLjE7XG4gICAgICB9XG4gICAgICAvLyBNYXh0aG9uXG4gICAgICBlbHNlIGlmICgobSA9IHVhLm1hdGNoKC9NYXh0aG9uKD86XFwvKSsoW1xcZC5dKikvKSkgJiYgZXh0ZXJuYWwpIHtcbiAgICAgICAgLy8gaXNzdWU6IE1heHRob24gMy54IGluIElFLUNvcmUgY2Fubm90IGJlIHJlY29nbmlzZWQgYW5kIGl0IGRvZXNuJ3QgaGF2ZSBleGFjdCB2ZXJzaW9uIG51bWJlclxuICAgICAgICAvLyBidXQgb3RoZXIgbWF4dGhvbiB2ZXJzaW9ucyBhbGwgaGF2ZSBleGFjdCB2ZXJzaW9uIG51bWJlclxuICAgICAgICBleHRyYV9uYW1lID0gXCJtYXh0aG9uXCI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZXh0cmFfdmVyc2lvbiA9IG51bWJlcmlmeShleHRlcm5hbFtcIm1heF92ZXJzaW9uXCJdIHx8IG1bMV0pO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgIGV4dHJhX3ZlcnNpb24gPSAwLjE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIDM2MFNFIG9yIHRoZXdvcmxkXG4gICAgICAvLyDpg6jliIYgZmYg5Lmf5Lya6L+b5YWl5Yiw6L+Z5Liq5Yik5pat77yM55u05o6l5o6S6Zmk5o6JXG4gICAgICBlbHNlIGlmIChfc3R5bGUgJiYgX3Y4bG9jYWxlKSB7XG4gICAgICAgIGV4dHJhX25hbWUgPSBcIjM2MHNlXCI7XG4gICAgICB9XG4gICAgICAvLyBvcGVyYSDkvJrmmK/mvI/nvZHkuYvpsbzvvIzmjpLpmaTmjolcbiAgICAgIGVsc2UgaWYgKFxuICAgICAgICAhX3N0eWxlICYmXG4gICAgICAgICFfdjhsb2NhbGUgJiZcbiAgICAgICAgL0dlY2tvXFwpXFxzK0Nocm9tZS8udGVzdChhcHBfdmVyc2lvbikgJiZcbiAgICAgICAgIVVBW1wib3BlcmFcIl0gJiZcbiAgICAgICAgIVVBW1widHJpZGVudFwiXVxuICAgICAgKSB7XG4gICAgICAgIGV4dHJhX25hbWUgPSBcIjM2MGVlXCI7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFRUXG4gICAgaWYgKChtID0gdWEubWF0Y2goL1RlbmNlbnRUcmF2ZWxlclxccyhbXFxkLl0qKXxRUUJyb3dzZXJcXC8oW1xcZC5dKikvKSkpIHtcbiAgICAgIGV4dHJhX25hbWUgPSBcInR0XCI7XG4gICAgICBleHRyYV92ZXJzaW9uID0gbnVtYmVyaWZ5KG1bMl0pIHx8IDAuMTtcbiAgICB9XG4gICAgLy8gTEJcbiAgICBlbHNlIGlmIChcbiAgICAgIChtID0gdWEubWF0Y2goL0xCQlJPV1NFUi8pKSB8fFxuICAgICAgKGV4dGVybmFsICYmIFwiTGllYmFvR2V0VmVyc2lvblwiIGluIGV4dGVybmFsKVxuICAgICkge1xuICAgICAgZXh0cmFfbmFtZSA9IFwibGllYmFvXCI7XG4gICAgfVxuICAgIC8vIFRoZVdvcmxkXG4gICAgZWxzZSBpZiAoKG0gPSB1YS5tYXRjaCgvVGhlV29ybGQvKSkpIHtcbiAgICAgIGV4dHJhX25hbWUgPSBcInRoZXdvcmxkXCI7XG4gICAgICBleHRyYV92ZXJzaW9uID0gMztcbiAgICB9XG4gICAgLy8gU291Z291XG4gICAgZWxzZSBpZiAoKG0gPSB1YS5tYXRjaCgvVGFvQnJvd3NlclxcLyhbXFxkLl0qKS8pKSkge1xuICAgICAgZXh0cmFfbmFtZSA9IFwidGFvYmFvXCI7XG4gICAgICBleHRyYV92ZXJzaW9uID0gbnVtYmVyaWZ5KG1bMV0pIHx8IDAuMTtcbiAgICB9XG5cbiAgICBVQS5vcyA9IG9zO1xuICAgIFVBLmNvcmUgPSBVQS5jb3JlIHx8IGNvcmU7XG4gICAgVUEuc2hlbGwgPSBzaGVsbDtcbiAgICBVQS5pZU1vZGUgPSAoVUEuaWUgJiYgZG9jLmRvY3VtZW50TW9kZSkgfHwgVUEuaWU7XG4gICAgVUEuZXh0cmFOYW1lID0gZXh0cmFfbmFtZTtcbiAgICBVQS5leHRyYVZlcnNpb24gPSBleHRyYV92ZXJzaW9uO1xuICAgIFVBLnJlc29sdXRpb24gPSB3aW4uc2NyZWVuLndpZHRoICsgXCJ4XCIgKyB3aW4uc2NyZWVuLmhlaWdodDtcblxuICAgIHJldHVybiBVQTtcbiAgfTtcblxuICAvLyBJRSA2IOeahCBxdWlya3Mg5qih5byP5Lit6KaB55SoIGRvY3VtZW50LmJvZHlcbiAgdmFyIGQgPSBkb2MuY29tcGF0TW9kZSA9PT0gXCJCYWNrQ29tcGF0XCIgPyBkb2MuYm9keSA6IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBsb2NfcHJvdG9jb2wgPSBsb2MucHJvdG9jb2w7XG4gIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB2YXIgblRpbWVzID0gMDtcblxuICB2YXIgRW5naW5lID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9O1xuXG4gIEVuZ2luZS5wcm90b3R5cGUgPSB7XG4gICAgc3RhcnR1cDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIC8vIHRoYXQuc2VuZFBWKCk7XG4gICAgICAgIGRlZmF1bHRfY29uZmlnLnNob3VsZEJpbmRNb25pdG9yICYmIHRoYXQuYmluZE1vbml0b3IoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9ubG9hZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gdGhhdC5zZW5kUFYoKTtcbiAgICAgICAgICBkZWZhdWx0X2NvbmZpZy5zaG91bGRCaW5kTW9uaXRvciAmJiB0aGF0LmJpbmRNb25pdG9yKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb2xsZWN0UGVyZm9ybWFuY2VUaW1pbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aW1pbmcgPSBwZXJmb3JtYW5jZS50aW1pbmc7XG4gICAgICB2YXIgcGFyYW1zID0ge307XG5cbiAgICAgIGlmICghdGltaW5nKSB7XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBtYXBwaW5nID0ge1xuICAgICAgICAvLyBmaXJzdFBhaW50OiAnZnAnLFxuICAgICAgICBuYXZpZ2F0aW9uU3RhcnQ6IFwibnNcIixcbiAgICAgICAgdW5sb2FkRXZlbnRTdGFydDogXCJ1ZXNcIixcbiAgICAgICAgdW5sb2FkRXZlbnRFbmQ6IFwidWVlXCIsXG4gICAgICAgIHJlZGlyZWN0U3RhcnQ6IFwicmRzXCIsXG4gICAgICAgIHJlZGlyZWN0RW5kOiBcInJkZVwiLFxuICAgICAgICBmZXRjaFN0YXJ0OiBcImZzXCIsXG4gICAgICAgIGRvbWFpbkxvb2t1cFN0YXJ0OiBcImRsc1wiLFxuICAgICAgICBkb21haW5Mb29rdXBFbmQ6IFwiZGxlXCIsXG4gICAgICAgIGNvbm5lY3RTdGFydDogXCJjc1wiLFxuICAgICAgICBjb25uZWN0RW5kOiBcImNlXCIsXG4gICAgICAgIHNlY3VyZUNvbm5lY3Rpb25TdGFydDogXCJzY3NcIixcbiAgICAgICAgcmVxdWVzdFN0YXJ0OiBcInJxc1wiLFxuICAgICAgICByZXNwb25zZVN0YXJ0OiBcInJwc1wiLFxuICAgICAgICByZXNwb25zZUVuZDogXCJycGVcIixcbiAgICAgICAgZG9tTG9hZGluZzogXCJkbFwiLFxuICAgICAgICBkb21JbnRlcmFjdGl2ZTogXCJkaVwiLFxuICAgICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRTdGFydDogXCJkY2xlc1wiLFxuICAgICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRFbmQ6IFwiZGNsZWVcIixcbiAgICAgICAgZG9tQ29tcGxldGU6IFwiZGNcIixcbiAgICAgICAgbG9hZEV2ZW50U3RhcnQ6IFwibGVzXCIsXG4gICAgICAgIGxvYWRFdmVudEVuZDogXCJsZWVcIixcbiAgICAgIH07XG5cbiAgICAgIHZhciBucyA9IHRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7XG4gICAgICB2YXIga2V5O1xuICAgICAgdmFyIHZhbHVlO1xuICAgICAgdmFyIG1hcHBpbmdLZXk7XG4gICAgICBmb3IgKGtleSBpbiB0aW1pbmcpIHtcbiAgICAgICAgLy9pZiAoIXRpbWluZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTsgLy8g6K+05piO77ya6L+Z5YS/5LiN6IO95YqgIGhhc093blByb3BlcnR577yM5ZCm5YiZ5Lya6L+H5ruk5o6J5b6I5aSaIGtleVxuICAgICAgICB2YWx1ZSA9IHRpbWluZ1trZXldO1xuICAgICAgICBtYXBwaW5nS2V5ID0gbWFwcGluZ1trZXldO1xuXG4gICAgICAgIGlmIChtYXBwaW5nS2V5KSB7XG4gICAgICAgICAgaWYgKHZhbHVlID09PSAwIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhcmFtc1ttYXBwaW5nS2V5XSA9IFwibmFcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgcGFyYW1zW21hcHBpbmdLZXldID0gdmFsdWUgLSBucztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gZmlyc3RQYWludFxuICAgICAgdmFyIGZwO1xuICAgICAgdmFyIGNocm9tZV9mcDtcbiAgICAgIGlmICh0eXBlb2YgdGltaW5nLm1zRmlyc3RQYWludCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAvLyBieSBtc1xuICAgICAgICBmcCA9IHRpbWluZy5tc0ZpcnN0UGFpbnQ7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB3aW4uY2hyb21lICYmXG4gICAgICAgIHdpbi5jaHJvbWUubG9hZFRpbWVzXG4gICAgICAgIChjaHJvbWVfZnAgPSB3aW4uY2hyb21lLmxvYWRUaW1lcygpLmZpcnN0UGFpbnRUaW1lKVxuICAgICAgKSB7XG4gICAgICAgIC8vIGJ5IHNcbiAgICAgICAgZnAgPSBNYXRoLmNlaWwoY2hyb21lX2ZwICogMTAwMCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgZnAgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgZnAgPSBmcCAtIG5zO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnAgPSBcIm5hXCI7XG4gICAgICB9XG4gICAgICBwYXJhbXMuZnAgPSBmcDtcblxuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogW1xuICAgICAqICAge1xuICAgICAqICAgICBuOiAnJyxcbiAgICAgKiAgICAgZnM6IG4sXG4gICAgICogICAgIHN0OiBuLFxuICAgICAqICAgICAuLi5cbiAgICAgKiAgIH0sXG4gICAgICogICB7fSwge30sIC4uLlxuICAgICAqIF1cbiAgICAgKi9cbiAgICBjb2xsZWN0UmVzb3VyY2VUaW1pbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIShcInBlcmZvcm1hbmNlXCIgaW4gd2luKSB8fFxuICAgICAgICAhKFwiZ2V0RW50cmllc0J5VHlwZVwiIGluIHBlcmZvcm1hbmNlKSB8fFxuICAgICAgICAhKHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJyZXNvdXJjZVwiKSBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlc1RpbWluZ09ianMgPSBbXTtcbiAgICAgIHZhciByZXNvdXJjZXMgPSBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwicmVzb3VyY2VcIik7XG4gICAgICB2YXIgZm9ybWF0TWlsbFNlY29uZCA9IGZ1bmN0aW9uIChtaWxsc2Vjb25kcykge1xuICAgICAgICBpZiAobWlsbHNlY29uZHMgPT09IHVuZGVmaW5lZCB8fCBtaWxsc2Vjb25kcyA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKG1pbGxzZWNvbmRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGZvciAodmFyIGluZGV4IGluIHJlc291cmNlcykge1xuICAgICAgICBpZiAoIXJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShpbmRleCkpIGNvbnRpbnVlO1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSByZXNvdXJjZXNbaW5kZXhdO1xuICAgICAgICBpZiAoIXJlc291cmNlLmluaXRpYXRvclR5cGUpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXNUaW1pbmdPYmpzLnB1c2goe1xuICAgICAgICAgIHJzOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLnJlZGlyZWN0U3RhcnQpLFxuICAgICAgICAgIHJlOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLnJlZGlyZWN0RW5kKSxcbiAgICAgICAgICBmczogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5mZXRjaFN0YXJ0KSxcbiAgICAgICAgICBzdDogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5zdGFydFRpbWUpLFxuICAgICAgICAgIGRsczogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5kb21haW5Mb29rdXBTdGFydCksXG4gICAgICAgICAgZGxlOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLmRvbWFpbkxvb2t1cEVuZCksXG4gICAgICAgICAgY3M6IGZvcm1hdE1pbGxTZWNvbmQocmVzb3VyY2UuY29ubmVjdFN0YXJ0KSxcbiAgICAgICAgICBjZTogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5jb25uZWN0RW5kKSxcbiAgICAgICAgICBzY3M6IGZvcm1hdE1pbGxTZWNvbmQocmVzb3VyY2Uuc2VjdXJlQ29ubmVjdGlvblN0YXJ0KSxcbiAgICAgICAgICByZXNxczogZm9ybWF0TWlsbFNlY29uZChyZXNvdXJjZS5yZXF1ZXN0U3RhcnQpLFxuICAgICAgICAgIHJlc3BzOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLnJlc3BvbnNlU3RhcnQpLFxuICAgICAgICAgIHJlc3BlOiBmb3JtYXRNaWxsU2Vjb25kKHJlc291cmNlLnJlc3BvbnNlRW5kKSxcbiAgICAgICAgICByZXN0eXBlOiByZXNvdXJjZS5pbml0aWF0b3JUeXBlLFxuICAgICAgICAgIG46IHJlc291cmNlLm5hbWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzVGltaW5nT2JqcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5Y+R6YCB5a6i5oi356uv5Y+C5pWwXG4gICAgICovXG4gICAgc2VuZFBWOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICB2YXIgZGVzY3JpcHRvcjtcbiAgICAgICAgdmFyIG9fb3M7XG4gICAgICAgIHZhciBvX3NoZWxsO1xuICAgICAgICB2YXIgb19jb3JlO1xuICAgICAgICB2YXIgb19yZXNvO1xuICAgICAgICB2YXIgb19leHRyYTtcbiAgICAgICAgdmFyIG9fZXh0cmFWO1xuXG4gICAgICAgIHZhciBvLFxuICAgICAgICAgIGIsXG4gICAgICAgICAgdyxcbiAgICAgICAgICBzLFxuICAgICAgICAgIG0sXG4gICAgICAgICAgcCA9IDE7XG5cbiAgICAgICAgdmFyIHRyaWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkZXNjcmlwdG9yID0gZ2V0RGVzY3JpcHRvckZyb21Vc2VyQWdlbnQodWEpO1xuXG4gICAgICAgICAgLy8g5pW055CG5a6i5oi356uv5L+h5oGvXG4gICAgICAgICAgb19vcyA9IGRlc2NyaXB0b3JbXCJvc1wiXTtcbiAgICAgICAgICBvX3NoZWxsID0gZGVzY3JpcHRvcltcInNoZWxsXCJdO1xuICAgICAgICAgIG9fY29yZSA9IGRlc2NyaXB0b3JbXCJjb3JlXCJdO1xuICAgICAgICAgIG9fcmVzbyA9IGRlc2NyaXB0b3JbXCJyZXNvbHV0aW9uXCJdO1xuICAgICAgICAgIG9fZXh0cmEgPSBkZXNjcmlwdG9yW1wiZXh0cmFOYW1lXCJdO1xuICAgICAgICAgIG9fZXh0cmFWID0gZGVzY3JpcHRvcltcImV4dHJhVmVyc2lvblwiXTtcblxuICAgICAgICAgIG8gPSBvX29zID8gb19vcyArIChkZXNjcmlwdG9yW29fb3NdID8gZGVzY3JpcHRvcltvX29zXSA6IFwiXCIpIDogXCJcIjtcbiAgICAgICAgICBiID0gb19zaGVsbCA/IG9fc2hlbGwgKyBwYXJzZUludChkZXNjcmlwdG9yW29fc2hlbGxdKSA6IFwiXCI7XG4gICAgICAgICAgdyA9IG9fY29yZTtcbiAgICAgICAgICBzID0gb19yZXNvO1xuICAgICAgICAgIG0gPSBvX2V4dHJhID8gb19leHRyYSArIChvX2V4dHJhViA/IHBhcnNlSW50KG9fZXh0cmFWKSA6IFwiXCIpIDogXCJcIjtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuXG4gICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgcDogcCxcbiAgICAgICAgICBvOiBkZWFsRGVmYXVsdChvKSwgLy8gb3NcbiAgICAgICAgICBiOiBkZWFsRGVmYXVsdChiKSwgLy8gYnJvd3NlclxuICAgICAgICAgIHc6IGRlYWxEZWZhdWx0KHcpLCAvLyBjb3JlXG4gICAgICAgICAgczogcywgLy8gc2NyZWVuIHBpeGVsXG4gICAgICAgICAgbXg6IG0sIC8vIOWbveS6p1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChsb2NfcHJvdG9jb2wgPT09IFwiaHR0cHM6XCIpIHtcbiAgICAgICAgICBwYXJhbXNbXCJpc3BzXCJdID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgodHJpZCA9IGdldEV4cGFyYW1zKClbXCJ0cmlkXCJdKSkge1xuICAgICAgICAgIHBhcmFtc1tcInRyaWRcIl0gPSB0cmlkO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gaXNzdWUgIzczOiBwZXJmb3JtYW5jZSB0aW1pbmdcbiAgICAgICAgICB2YXIgdGltaW5nUGFyYW1zID0gdGhhdC5jb2xsZWN0UGVyZm9ybWFuY2VUaW1pbmcoKTtcbiAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICBmb3IgKGtleSBpbiB0aW1pbmdQYXJhbXMpIHtcbiAgICAgICAgICAgIGlmICh0aW1pbmdQYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IHRpbWluZ1BhcmFtc1trZXldO1xuICAgICAgICAgICAgICBwYXJhbXNba2V5XSB8fCAocGFyYW1zW2tleV0gPSB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHRoYXQuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoYXQuc2VuZERhdGEocGFyYW1zLCB0cnVlKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGJpbmRNb25pdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXR0YSA9ICEhZG9jLmF0dGFjaEV2ZW50O1xuICAgICAgdmFyIG9uZXZlbnQgPSBhdHRhID8gXCJhdHRhY2hFdmVudFwiIDogXCJhZGRFdmVudExpc3RlbmVyXCI7XG5cbiAgICAgIC8vIOe7keWumiBkb2N1bWVudCDnmoQgbW91c2Vkb3duIOS6i+S7tlxuICAgICAgZG9jW29uZXZlbnRdKFxuICAgICAgICAoYXR0YSA/IFwib25cIiA6IFwiXCIpICsgXCJtb3VzZWRvd25cIixcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlID0gZSB8fCB3aW4uZXZlbnQ7XG4gICAgICAgICAgdmFyIGVsID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgc2VsZi5tb3VzZWRvd24oZWwsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgfSxcblxuICAgIG1vdXNlZG93bjogZnVuY3Rpb24gKHRhcmdldCwgZXZlbnQpIHtcbiAgICAgIC8vdmFyIG5vZGUgPSB0YXJnZXQ7XG4gICAgICB2YXIgdGFnX25hbWUgPSB0YXJnZXQudGFnTmFtZTtcbiAgICAgIC8vdmFyIGVpZDtcbiAgICAgIC8vdmFyIHBfbm9kZTtcbiAgICAgIHZhciBocmVmO1xuICAgICAgLy92YXIgdG9XYXRjaCA9IGZhbHNlO1xuICAgICAgdmFyIHBhcmFtcyA9IHsgdHlwZTogMSB9OyAvLyAsIHB2aWQ6IHB2aWRcblxuICAgICAgLy8g5aaC5p6c54K55Ye75Yiw5rua5Yqo6L205LiK5YiZ6L+U5ZueXG4gICAgICBpZiAodGFnX25hbWUgJiYgdGFnX25hbWUgPT09IFwiSFRNTFwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRhZ19uYW1lID09PSBcIkFcIiB8fCB0YWdfbmFtZSA9PT0gXCJBUkVBXCIpIHtcbiAgICAgICAgLy8g6Ziy5q2iIElFNiDkuIvmsYnlrZdVUkzkubHnoIHvvIzlj4LogIMgaHR0cDovL29sZGoubmV0L2FydGljbGUvanMtaHJlZi11cmwtZW5jb2RlLWllNi9cbiAgICAgICAgaHJlZiA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIsIDIpIHx8IFwiXCI7XG4gICAgICAgIHBhcmFtcy5ocmVmID0gaHJlZjtcbiAgICAgIH1cbiAgICAgIHZhciBwb3MgPSBnZXRQb3NpdGlvbih0YXJnZXQsIGV2ZW50LCB0aGlzLmNvbmZpZy5sYXlvdXQpO1xuICAgICAgcGFyYW1zLnhwYXRoID0gZ2V0WFBhdGgodGFyZ2V0KTtcbiAgICAgIHBhcmFtcy54ID0gcG9zLng7XG4gICAgICBwYXJhbXMueSA9IHBvcy55O1xuICAgICAgcGFyYW1zLmV4ID0gcG9zLmV4O1xuICAgICAgcGFyYW1zLmV5ID0gcG9zLmV5O1xuICAgICAgcGFyYW1zLnN3ID0gcG9zLnN3O1xuICAgICAgcGFyYW1zLmV3ID0gdGFyZ2V0Lm9mZnNldFdpZHRoO1xuICAgICAgcGFyYW1zLmVoID0gdGFyZ2V0Lm9mZnNldEhlaWdodDtcbiAgICAgIHBhcmFtcy50ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydDtcbiAgICAgIHBhcmFtcy5uID0gKytuVGltZXM7XG4gICAgICAvLyBpZiAodGhpc1tcInNwbS1jbnRcIl0pIHtcbiAgICAgIC8vICAgcGFyYW1zW1wic3BtLWNudFwiXSA9IHRoaXNbXCJzcG0tY250XCJdLmpvaW4oXCIuXCIpO1xuICAgICAgLy8gfVxuICAgICAgaWYgKGlzX2Fob3QgJiYgbWljcm9zY29wZV9kYXRhKSB7XG4gICAgICAgIHBhcmFtc1tcInNvXCJdID0gZW5jb2RlVVJJQ29tcG9uZW50KG1pY3Jvc2NvcGVfZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2VuZERhdGEocGFyYW1zKTtcbiAgICB9LFxuXG4gICAgc2VuZERhdGE6IGZ1bmN0aW9uIChkYXRhLCBpc1BWKSB7XG4gICAgICB2YXIgbG9na2V5ID0gXCIkJF9ob3Rwb2ludFwiO1xuICAgICAgdmFyIHJhbmRvbU51bSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjEwMDApO1xuICAgICAgdmFyIHEgPSB3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKTtcbiAgICAgIGlmIChpc1BWKSB7XG4gICAgICAgIHEucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiBcImFwbHVzLnNlbmRQVlwiLFxuICAgICAgICAgIGFyZ3VtZW50czogW3tpc19hdXRvOiB0cnVlfSwgZGF0YV1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmFuZG9tTnVtIDwgKENPTkZJRy5SQVRFLlJFU09VUkNFX1RJTUlORyAqIDEwMDApKSB7XG4gICAgICAgICAgaWYgKGlzX2hlYXRtYXBfZW5hYmxlKSB7XG4gICAgICAgICAgICBxLnB1c2goe1xuICAgICAgICAgICAgICBhY3Rpb246IFwiYXBsdXMucmVjb3JkXCIsXG4gICAgICAgICAgICAgIGFyZ3VtZW50czogW2xvZ2tleSwgXCJDTEtcIiwgYXNzaWduKHtpc19hdXRvOiAxfSwgZGF0YSksIFwiUE9TVFwiXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIH07XG5cbiAgLyoqXG4gICAqIOWQr+WKqOaJk+eCueiEmuacrFxuICAgKiDlpoLmnpzpnIDopoHlgZogYWhvdCDng63lipvlm77nm5HmjqfvvIjljbPmsqHlnKjpu5HlkI3ljZXkuIrvvInvvIzliJnopoHpop3lpJYgYmluZE1vbml0b3LvvIzlkKbliJnku4XkvZzpu4Tph5Hku6Tnrq3kv6Hmga/lj5HpgIFcbiAgICovXG4gIGlmIChzaG91bGRCaW5kTW9uaXRvcigpKSB7XG4gICAgZGVmYXVsdF9jb25maWcuc2hvdWxkQmluZE1vbml0b3IgPSB0cnVlO1xuICB9XG4gIHZhciBzdGIgPVxuICAgIHBlcmZvcm1hbmNlLnNldFJlc291cmNlVGltaW5nQnVmZmVyU2l6ZSB8fFxuICAgIHBlcmZvcm1hbmNlLndlYmtpdFNldFJlc291cmNlVGltaW5nQnVmZmVyU2l6ZTtcbiAgc3RiICYmIHN0Yi5jYWxsKHBlcmZvcm1hbmNlLCAyMDApOyAvLyDpg6jliIbmtY/op4jlmajmnIkgMTUwIOS4quWFg+e0oOeahOmZkOWItu+8jOiuvuS4uiAyMDBcblxuICB3aW5bXCJfYXBfeHdqX2hlYXRcIl0gPSB7XG4gICAgdmVyc2lvbjogdmVyc2lvbixcbiAgfTtcbiAgdmFyIGVuZ2luZSA9IG5ldyBFbmdpbmUoZGVmYXVsdF9jb25maWcpO1xuICBlbmdpbmUuc3RhcnR1cCgpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBpbml0SGVhdE1hcCgpO1xuICB9IGNhdGNoKGUpIHtcbiAgICB2YXIgcSA9IHdpbmRvdy5hcGx1c19xdWV1ZSB8fCAod2luZG93LmFwbHVzX3F1ZXVlID0gW10pO1xuICAgIHEucHVzaCh7XG4gICAgICBhY3Rpb246IFwiYXBsdXMuX2FwbHVzX2NwbHVnaW5fbS5kb190cmFja2VyX2pzZXJyb3JcIixcbiAgICAgIGFyZ3VtZW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgbWVzc2FnZTogXCJoZWFkbWFwYWxsXCIsIC8vIGVnOiBjb21wb3NlIG1pZGRsZXdhcmUgZXJyb3InLFxuICAgICAgICAgIGVycm9yOiBlbmNvZGVVUklDb21wb25lbnQoZS5zdGFjayksXG4gICAgICAgICAgZmlsZW5hbWU6IFwiYXBsdXNfeHdqX3BsdWdpblwiLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgfVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9saWJfaGVhdG1hcC9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IGFwbHVzX3BhZ2V2aWV3X2R1cmF0aW9uX2luamVjdC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9wYWdlX2xlYXZlL21haW4nKSgpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc193ZWIvYXBsdXNfcGFnZWxlYXZlX2luamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gMTQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBtYWluLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEV2ZW50ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudCcpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIEhJRERFTiA9ICdoaWRkZW4nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICB1dGlsRXZlbnQub24od2luZG93LCAndW5sb2FkJywgZnVuY3Rpb24oKXtcbiAgICB0cnkge1xuICAgICAgdmFyIHEgPSAod2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSkpO1xuICAgICAgcS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuUEFHRV9MRUFWRSwgXCJPVEhFUlwiLCB7fV1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSBISURERU4pIHtcbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oYXBsdXNTdGF0aWMuU1RBUlRfSUQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB1bG9nKCkudygnc2VuZCBicm93c2VyIGNsb3NlIGV2bmV0IGZhaWxlZCcpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9wYWdlX2xlYXZlL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDE0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhbGlsb2cvcy9zcmMvYXBsdXMuanNcbiAqIOaooeWdl+WMlueahGFwbHVzSnPlhaXlj6NcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgaml6aGEud3lqQGJsb2cgaHR0cDovL29sZGoubmV0XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG4gIHRyeSB7XG4gICAgdmFyIHdpbiA9IHdpbmRvdztcbiAgICB2YXIgX2sgPSAnZ190Yl9hcGx1c19sb2FkZWQnO1xuICAgIGlmICh3aW5bX2tdKSByZXR1cm47XG4gICAgd2luW19rXSA9IDE7XG4gICAgcmVxdWlyZSgnQHV0aWxzL2RlYnVnJykuaXNEZWJ1Z0FwbHVzKCk7XG4gICAgLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuICAgIHZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbiAgICB2YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG4gICAgdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG4gICAgdmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuICAgIHZhciBhcGx1c2luaXQgPSByZXF1aXJlKCdAY29yZS9hcGx1c2luaXQnKTtcblxuICAgIHZhciBSVU5OSU5HID0gJ3J1bm5pbmcnO1xuICAgIC8vIHZhciBDT01QTEVURSA9ICdjb21wbGV0ZSc7XG4gICAgdmFyIGFwbHVzU3RhdHVzID0gWydhcGx1c1JlYWR5JywgUlVOTklOR107XG4gICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhhcGx1c1N0YXR1cyk7XG5cbiAgICBhcGx1c2luaXQucnVuKHtcbiAgICAgIHBsdWdpbnM6IGFwbHVzX2NvbmZpZy5wbHVnaW5zLFxuICAgICAgY29udGV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29uZmlnX3B2X2NvbnRleHQgPSB7XG4gICAgICAgICAgUEFHRV9MT0FEX1RJTUU6IG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFBMVUdJTlNfUFYgPSBbXTtcbiAgICAgICAgZWFjaChhcGx1c19jb25maWcucGx1Z2lucywgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWcgfHwge307XG4gICAgICAgICAgaWYgKHYubmFtZSA9PT0gJ2FwbHVzX2xvZ19pbmplY3QnICYmIHYuY29uZmlnICYmIHYuY29uZmlnLnBsdWdpbnMpIHtcbiAgICAgICAgICAgIFBMVUdJTlNfUFYgPSB2LmNvbmZpZy5wbHVnaW5zLnB2O1xuICAgICAgICAgICAgZWFjaChQTFVHSU5TX1BWLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdXRpbERhc2guYXNzaWduKGNvbmZpZ19wdl9jb250ZXh0LCB7XG4gICAgICAgICAgYXBsdXNfY29uZmlnOiBhcGx1c19jb25maWdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdWxvZygpLnYoJ0FQTFVTIElOSVQgU1VDQ0VTUycpO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gVE9ETyBA6ZKw5pitIOWKoOebkeaOp1xuICAgIC8vIGNvbnNvbGUubG9nKGUpO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYXBsdXNfd2ViX2Jhc2ljLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnLi91bG9nJyk7XG52YXIgaXNEZWJ1ZztcblxuLyoqXG4gKiDmmK/lkKblvIDlkK9kZWJ1Z+aooeW8j+WFpeWPo++8jOWcqHVybOS4reWKoOWFpWRlYnVnQXBsdXM9dHJ1ZVxuICovXG5leHBvcnRzLmlzRGVidWdBcGx1cyA9IGZ1bmN0aW9uIChkZWJ1Zykge1xuICBpZiAodHlwZW9mIGlzRGVidWcgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBpc0RlYnVnO1xuICB9XG4gIC8vcGFyYW1ldGVyIGlzIGludmFsaWRcbiAgaWYgKHR5cGVvZiBkZWJ1ZyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgaXNEZWJ1ZyA9IGRlYnVnO1xuICB9XG4gIGlmIChsb2NhbFN0b3JhZ2UgJiYgbG9jYXRpb24pIHtcbiAgICB2YXIgbWF0Y2hfdmFsdWUgPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9hcGx1c0RlYnVnPSh0cnVlfGZhbHNlKS8pO1xuICAgIGlmIChtYXRjaF92YWx1ZSAmJiBtYXRjaF92YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXBsdXNEZWJ1ZycsIG1hdGNoX3ZhbHVlWzFdKTtcbiAgICB9XG4gICAgaXNEZWJ1ZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhcGx1c0RlYnVnJykgPT09ICd0cnVlJztcbiAgfSBlbHNlIHtcbiAgICBpc0RlYnVnID0gZmFsc2U7XG4gIH1cbiAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnYXBsdXNEZWJ1ZycsIGlzRGVidWcpOyAgXG4gIGlmKGlzRGVidWcpe1xuICAgIHVsb2coKS5zZXREZWJ1Zyhpc0RlYnVnKTtcbiAgfVxuICByZXR1cm4gaXNEZWJ1Zztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9kZWJ1Zy5qc1xuLy8gbW9kdWxlIGlkID0gMTQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBhcGx1cyBBUElcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVkdWNlciA9IHJlcXVpcmUoJ0Bjb3JlL1JlZHVjZXInKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcblxuLyoqXG4gKiDlsIblkI7nu63nmoRpbml05Yqo5L2c6YO95YGa5oiQ5o+S5Lu277yM55uu5YmN5Y+q5pyJd2hlcmVfdG9fc2VuZHB25LiA6aG5XG4gKlxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgcGx1Z2luc1xuICogICBjb250ZXh0XG4gKiB9XG4gKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqXG4gKi9cbmV4cG9ydHMucnVuID0gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG4gIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcbiAgcmVkdWNlci5ydW4oe1xuICAgIHBsdWdpbnM6IG9wdHMucGx1Z2lucyxcbiAgICBjb250ZXh0OiBvcHRzLmNvbnRleHRcbiAgfSwge1xuICAgIGNvbmZpZzoge30sXG4gICAgdXNlcmRhdGE6IHt9LFxuICAgIHB1YnN1YlR5cGU6ICdhcGx1c2luaXQnLFxuICAgIG1lc3NhZ2VGblF1ZXVlOiBbXSxcbiAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9hcGx1c2luaXQnXG4gIH0sIGZ1bmN0aW9uIChjdHgpIHtcbiAgICB2YXIgbXNncyA9IFsnYXBsdXNJbml0Q29udGV4dCcsIGN0eF07XG4gICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcbiAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgY2FsbGJhY2soY3R4KTtcbiAgICB9XG4gIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvYXBsdXNpbml0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==